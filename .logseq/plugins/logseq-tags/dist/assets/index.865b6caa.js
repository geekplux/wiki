import{q,g as U,m as P,s as N,a as D,o as E,b as O,t as F,r as H,c as j,p as W,d as V,e as G,v as Y,i as X,f as K,h as Q,j as J,k as Z,l as _,n as ee,u as te,w as oe,y as ae,x as se,z as ne,A as re,B as ie,C as le,D as ce,E as de,F as ge,G as pe,H as ue,I as he,J as fe,K as me,L as $e,M as xe,N as be,O as ye,P as ve,Q as ke,R as we,S as Te,T as Se,U as Ce,V as Re,W as Be,X as ze,Y as Ae,Z as Ie,_ as Le,$ as Me,a0 as qe,a1 as Ue,a2 as Pe,a3 as Ne,a4 as De,a5 as Ee,a6 as Oe,a7 as Fe,a8 as He,a9 as T,aa as k,ab as je,ac as We,ad as Ve,ae as Ge,af as c,ag as S,ah as Ye,ai as Xe,aj as Ke,ak as Qe}from"./vendor.01e8a6fb.js";const Je=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function a(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(t){if(t.ep)return;t.ep=!0;const n=a(t);fetch(t.href,n)}};Je();const{styled:r,css:x,theme:Mt,createTheme:Ze,getCssText:qt,globalCss:Ut,keyframes:B,config:Pt,reset:Nt}=q({theme:{colors:{...U,...P,...N,...D,...E,...O,...F,...H,...j,...W,...V,...G,...Y,...X,...K,...Q,...J,...Z,..._,...ee,...te,...oe,...ae,...se,...ne,...re,...ie,...le,...ce,...de,lowContrast:"$slate8",highContrast:"$slate12",elevation0:"$slate1",elevation0Hover:"$slate2",elevation1:"$slate2",elevation1Hover:"$slate3",elevation2:"$slate3",elevation2Hover:"$slate4",disabledText:"$slate8",disabledBackground:"$slate2",disabledBorder:"$slate7",interactiveBorder:"$slate7"},space:{1:"2px",2:"4px",3:"8px",4:"12px",5:"24px"},sizes:{1:"2px",2:"4px",3:"8px",4:"12px",5:"24px",6:"32px",7:"48px"},fonts:{sans:"Inter, sans-serif, system-ui, -apple-system, BlinkMacSystemFont"},fontWeights:{regular:"400",medium:"500",bold:"700"},fontSizes:{1:"12px",2:"14px",3:"20px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:{bp1:"(max-width: 520px)",bp2:"(max-width: 830px)",bp3:"(max-width: 1100px)",bp4:"(min-width: 1100px)",motionSafe:"(prefers-reduced-motion: no-preference)",hover:"(hover: hover)"},utils:{marginX:e=>({marginLeft:e,marginRight:e}),marginY:e=>({marginTop:e,marginBottom:e}),paddingX:e=>({paddingLeft:e,paddingRight:e}),paddingY:e=>({paddingTop:e,paddingBottom:e}),borderX:e=>({borderLeft:e,borderRight:e}),borderY:e=>({borderTop:e,borderBottom:e}),borderRaidusLeft:e=>({borderTopLeftRadius:e,borderBottomLeftRadius:e}),borderRaidusRight:e=>({borderTopRightRadius:e,borderBottomRightRadius:e}),borderRaidusTop:e=>({borderTopLeftRadius:e,borderTopRightRadius:e}),borderRaidusBottom:e=>({borderBottomLeftRadius:e,borderBottomRightRadius:e}),size:e=>({width:e,height:e}),textGradient:e=>({backgroundImage:e,backgroundSize:"100%",WebkitBackgroundClip:"text",MozBackgroundClip:"text",WebkitTextFillColor:"transparent",MozTextFillColor:"transparent"}),appearance:e=>({WebkitAppearance:e,appearance:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e})}}),_e=Ze("dark-theme",{colors:{...ge,...pe,...ue,...he,...fe,...me,...$e,...xe,...be,...ye,...ve,...ke,...we,...Te,...Se,...Ce,...Re,...Be,...ze,...Ae,...Ie,...Le,...Me,...qe,...Ue,...Pe,...Ne,...De,lowContrast:"$slate8",highContrast:"$slate12",elevation0:"$slate1",elevation0Hover:"$slate2",elevation0Active:"$slate3",elevation1:"$slate2",elevation1Hover:"$slate3",elevation1Active:"$slate4",elevation2:"$slate3",elevation2Hover:"$slate4",elevation2Active:"$slate5",disabledText:"$slate8",disabledBackground:"$slate2",disabledBorder:"$slate7",interactiveBorder:"$slate7"}}),et=r("input",{appearance:"none",MozAppearance:"none",WebkitAppearance:"none",margin:0,fontFamily:"$sans",backgroundColor:"$elevation0",border:"1px solid $colors$interactiveBorder",variants:{size:{1:{fontSize:"$1"},2:{fontSize:"$2"},3:{fontSize:"$3"}}}});var u;(function(e){e.NameAsc="NameAsc",e.NameDesc="NameDesc",e.UsageAsc="UsageAsc",e.UsageDesc="UsageDesc"})(u||(u={}));const tt=r(Ee,{display:"flex",padding:"$3",minWidth:"max-content",borderRadius:"$2",backgroundColor:"$elevation1"}),ot=x({all:"unset",flex:"0 0 auto",color:"$slate11",height:"$5",padding:"0 $2",borderRadius:"$1",display:"inline-flex",fontSize:"$3",lineHeight:1,alignItems:"center",justifyContent:"center","&:hover":{color:"$slate12",backgroundColor:"$elevation1Hover"},"&:focus":{position:"relative",boxShadow:"0 0 0 2px $elevation2"},variants:{shape:{square:{width:"$$height"}}}}),at=r(Oe,{width:1,backgroundColor:"$slate6",margin:"0 10px"}),st=r(Fe,{display:"inline-flex",borderRadius:4}),nt=r(He,ot,{boxShadow:0,marginLeft:"$1","&:first-child":{marginLeft:0},"&[data-state=on]":{color:"$blue11",backgroundColor:"$blue5"}}),m={Root:tt,Separator:at,ToggleGroup:st,ToggleItem:nt},o=T.exports.jsx,h=T.exports.jsxs,rt=T.exports.Fragment,it=r(m.Root,{display:"flex",gap:"$2"}),lt=({sortType:e,onSortTypeChange:s,...a})=>o(it,{...a,children:h(m.ToggleGroup,{type:"single",onValueChange:s,defaultValue:e,"aria-label":"Sort options",children:[o(m.ToggleItem,{value:u.NameAsc,children:o(k,{icon:je})}),o(m.ToggleItem,{value:u.NameDesc,children:o(k,{icon:We})}),o(m.Separator,{}),o(m.ToggleItem,{value:u.UsageAsc,children:o(k,{icon:Ve})}),o(m.ToggleItem,{value:u.UsageDesc,children:o(k,{icon:Ge})})]})});function C(){const e=c.exports.useRef(!1),s=c.exports.useCallback(()=>e.current,[]);return c.exports.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),s}function ct(e){const[s,a]=c.exports.useState(e),i=C();return c.exports.useEffect(()=>{const t=({mode:n})=>{i()&&a(n)};logseq.App.onThemeModeChanged(t)},[]),s}function z(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function dt(e){return e.hasOwnProperty("tags")}function A(e,s){return s?(a,i)=>e(i)-e(a):(a,i)=>e(a)-e(i)}function gt(){const e=C(),[s,a]=c.exports.useState([]),[i,t]=c.exports.useState([]);return c.exports.useLayoutEffect(()=>{(async()=>{const n=await logseq.DB.datascriptQuery(`
        [:find ?content ?tag (pull ?b [*])
          :where
          [?b :block/refs ?page-ref]
          [?b :block/content ?content]
          [?page-ref :block/name ?tag]
        ]
      `),p=await logseq.DB.datascriptQuery(`
        [:find ?tag (pull ?page [*])
          :where
          [?page :block/tags ?tag-ref]
          [?tag-ref :block/name ?tag]
        ]
      `);e()&&(a(n),t(p))})()},[]),c.exports.useMemo(()=>{const n=s.map(([l,d,v])=>{const $=z(d),R=l.toLowerCase();return(R.includes("tags::")||R.includes("#+tags:"))&&v["pre-block?"]===!0?null:l.match(new RegExp(`#${$}|#\\[\\[${$}\\]\\]`,"gi"))!=null?{tagName:d,blockOrPage:v}:null}),p=i.map(([l,d])=>({tagName:l,blockOrPage:d}));return[...n.filter(l=>l!=null),...p].reduce((l,{tagName:d,blockOrPage:v})=>{const $=l[d]??[];return $.push(v),l[d]=$,l},{})},[s,i])}const w=S.createContext({name:"",usages:[]});var pt=()=>o("svg",{"aria-hidden":"true",version:"1.1",viewBox:"0 0 192 512",fill:"currentColor",display:"inline-block",style:{width:"12px",height:"12px",marginLeft:"2px"},children:o("path",{d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z","fill-rule":"evenodd"})});const g=x({color:"$highContrast",fontFamily:"$sans",variants:{size:{1:{fontSize:"$1"},2:{fontSize:"$2"},3:{fontSize:"$3"}}}}),f=r("span",g);r("q",g);const ut=r("p",g);r("li",g);r("small",g);r("del",g);r("h1",g);r("h2",g);r("h3",g);r("h4",g);r("h5",g);r("h6",g);r("ins",g,{textDecoration:"none"});r("em",g,{fontStyle:"italic"});r("strong",g,{fontWeight:"$2"});const ht=r("mark",g,{backgroundColor:"$yellow3"}),I=r("div",{boxSizing:"border-box"}),L=x({display:"flex",alignItems:"center",gap:"$4",padding:"$3",cursor:"pointer",borderRadius:"$2","&:hover":{backgroundColor:"$elevation0Hover"}}),ft=r("div",{flex:"0 0 auto",padding:"$2",borderRadius:"$1",fontSize:"$1",variants:{color:{page:{backgroundColor:"$blue3",color:"$blue9"},block:{backgroundColor:"$orange3",color:"$orange9"}}}});function M({type:e}){return o(ft,{color:e,children:e==="page"?"P":"B"})}const mt=({block:e})=>{const{name:s}=c.exports.useContext(w),[a,i]=c.exports.useState(null),[t,n]=c.exports.useState(null);c.exports.useEffect(()=>{logseq.Editor.getPage(e.page.id).then(l=>i(l)),logseq.Editor.getBlock(e.parent.id).then(l=>n(l))},[]);const p=z(s),b=e.content.split(new RegExp(`(#${p}|#\\[\\[${p}\\]\\])`,"gi")),y=e.parent.id!==e.page.id;return h("div",{className:L(),onClick:async l=>{if(a!=null)return logseq.Editor.scrollToBlockInPage(a.name,e.uuid.$uuid$)},children:[o(M,{type:"block"}),h(I,{css:{display:"flex",flexDirection:"column",gap:"$2",overflow:"hidden"},children:[a!=null?h(I,{css:{display:"flex",gap:"$2",alignItems:"center",flex:"0 1 auto",overflow:"hidden",borderRadius:"$2"},children:[o(f,{size:"1",css:{padding:"$1",color:"$slate10",flex:"0 1 auto",whiteSpace:"nowrap"},children:a.originalName}),y&&t!=null&&h(rt,{children:[o(f,{css:{padding:"$1",color:"$slate8",fontSize:"8px"},children:"\u27A4"}),o(f,{size:"1",css:{padding:"$1",color:"$slate10",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:t.content})]})]}):o(f,{size:"1",children:"Loading..."}),o(ut,{size:"2",css:{margin:0},children:b.map((l,d)=>l.toLowerCase()===`#${s}`||l.toLowerCase()===`#[[${s}]]`?o(ht,{children:l},d):l)})]})]})},$t=({page:e})=>h("div",{className:L(),onClick:async s=>logseq.App.pushState("page",{name:e.name}),children:[o(M,{type:"page"}),o(f,{size:"2",children:e["original-name"]})]}),xt=r("div",{display:"flex",flexDirection:"column"}),bt=S.forwardRef(({...e},s)=>{const{usages:a}=c.exports.useContext(w);return o(xt,{ref:s,...e,children:a.map(i=>dt(i)?o($t,{page:i}):o(mt,{block:i}))})}),yt=r(Ye,{display:"flex",flexDirection:"column"}),vt=r("div",{display:"flex",alignItems:"center",paddingY:"$1",paddingLeft:"$1",paddingRight:"$3",cursor:"default",borderRadius:"$2","&:hover":{backgroundColor:"$elevation0Hover"},[`& ${f}`]:{cursor:"default"}}),kt=B({from:{height:0},to:{height:"var(--radix-collapsible-content-height)"}}),wt=B({from:{height:"var(--radix-collapsible-content-height)"},to:{height:0}}),Tt=()=>{const{name:e,usages:s}=c.exports.useContext(w),[a,i]=c.exports.useState(!1);return h(yt,{onOpenChange:i,children:[o(Xe,{asChild:!0,children:h(vt,{children:[o(f,{css:{transform:a?"rotate(90deg)":"rotate(0deg)",marginRight:"$2",color:"$disabledText"},children:o(pt,{})}),o(f,{size:"2",css:{flex:1},children:e}),o(f,{size:"1",css:{padding:"$2",borderRadius:"$1",backgroundColor:"$elevation2",color:"$slate9"},children:s.length})]})}),o(Ke,{asChild:!0,children:o(bt,{css:{marginLeft:"$3",overflow:"hidden",'&[data-state="open"]':{animation:`${kt} 200ms ease-out`},'&[data-state="closed"]':{animation:`${wt} 200ms ease-out`}}})})]})},St=r("div",{display:"flex",flexDirection:"column",overflowY:"auto"});function Ct({filter:e,sortType:s}){const a=gt(),i={[u.NameAsc]:(t,n)=>t.localeCompare(n),[u.NameDesc]:(t,n)=>n.localeCompare(t),[u.UsageAsc]:A(t=>a[t].length),[u.UsageDesc]:A(t=>a[t].length,!0)};return o(St,{children:Object.keys(a).sort(i[s]).filter(t=>e.trim()===""?!0:t.includes(e)).map(t=>o(w.Provider,{value:{name:t,usages:a[t]},children:o(Tt,{},t)}))})}function Rt(){const[e,s]=c.exports.useState(logseq.isMainUIVisible),a=C();return c.exports.useEffect(()=>{const i="ui:visible:changed",t=async({visible:n})=>{a()&&s(n)};return logseq.on(i,t),()=>{logseq.off(i,t)}},[a]),e}const Bt=x({position:"relative",height:"100%","& ::-webkit-scrollbar":{width:"6px"},"& ::-webkit-scrollbar-corner":{background:"0 0"},"& ::-webkit-scrollbar-thumb":{backgroundColor:"$interactiveBorder"}}),zt=x({position:"absolute",top:"calc(48px + $4)",right:"$4",boxSizing:"border-box",display:"flex",flexDirection:"column",gap:"$3",backgroundColor:"$elevation0",borderRadius:"$2",padding:"$4",width:"400px",height:"calc(100% - (48px + $4) * 2)",maxWidth:"50%",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"});function At({themeMode:e}){const s=c.exports.useRef(null),a=Rt(),[i,t]=c.exports.useState(""),[n,p]=c.exports.useState(logseq.settings?.sortType??u.NameAsc),b=ct(e),y=d=>{p(d),logseq.updateSettings({sortType:d})},l=d=>{t(d.target.value)};return a?o("main",{className:`${Bt()} ${b==="dark"?_e.className:""}`,onClick:d=>{s.current?.contains(d.target)||window.logseq.hideMainUI()},children:h("div",{ref:s,className:zt(),children:[o(et,{css:{padding:"$3",borderRadius:"$2"},size:"2",placeholder:"Search tags",onChange:l}),o(lt,{sortType:n,onSortTypeChange:y,css:{alignSelf:"center"}}),o(Ct,{filter:i,sortType:n})]})}):null}async function It(){const e=logseq.baseInfo.id;console.info(`${e}: MAIN`);const{preferredThemeMode:s}=await logseq.App.getUserConfigs();Qe.render(o(S.StrictMode,{children:o(At,{themeMode:s})}),document.getElementById("root")),logseq.provideModel({show(){logseq.showMainUI()}}),logseq.setMainUIInlineStyle({position:"fixed",zIndex:11});const a="tags-plugin-open";logseq.provideStyle(`
    div[data-injected-ui=${a}-${e}] {
      display: flex;
      align-items: center;
      font-weight: 500;
      position: relative;
    }
  `),logseq.App.registerUIItem("toolbar",{key:a,template:`
    <a data-on-click="show" class="button" style="font-size: 20px">
      #
    </a>
  `})}logseq.ready().then(It).catch(console.error);
