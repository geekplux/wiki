const qn=function(){const j=document.createElement("link").relList;if(j&&j.supports&&j.supports("modulepreload"))return;for(const U of document.querySelectorAll('link[rel="modulepreload"]'))V(U);new MutationObserver(U=>{for(const me of U)if(me.type==="childList")for(const B of me.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&V(B)}).observe(document,{childList:!0,subtree:!0});function J(U){const me={};return U.integrity&&(me.integrity=U.integrity),U.referrerpolicy&&(me.referrerPolicy=U.referrerpolicy),U.crossorigin==="use-credentials"?me.credentials="include":U.crossorigin==="anonymous"?me.credentials="omit":me.credentials="same-origin",me}function V(U){if(U.ep)return;U.ep=!0;const me=J(U);fetch(U.href,me)}};qn();var mn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mn={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(u,j){(function(J,V){u.exports=V()})(self,function(){return(()=>{var J={227:(B,d,C)=>{var O=C(155);d.formatArgs=function(L){if(L[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+L[0]+(this.useColors?"%c ":" ")+"+"+B.exports.humanize(this.diff),!this.useColors)return;const P="color: "+this.color;L.splice(1,0,P,"color: inherit");let f=0,c=0;L[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(f++,y==="%c"&&(c=f))}),L.splice(c,0,P)},d.save=function(L){try{L?d.storage.setItem("debug",L):d.storage.removeItem("debug")}catch{}},d.load=function(){let L;try{L=d.storage.getItem("debug")}catch{}return!L&&O!==void 0&&"env"in O&&(L=O.env.DEBUG),L},d.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},d.storage=function(){try{return localStorage}catch{}}(),d.destroy=(()=>{let L=!1;return()=>{L||(L=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],d.log=console.debug||console.log||(()=>{}),B.exports=C(447)(d);const{formatters:_}=B.exports;_.j=function(L){try{return JSON.stringify(L)}catch(P){return"[UnexpectedJSONParseError]: "+P.message}}},447:(B,d,C)=>{B.exports=function(O){function _(f){let c,y=null;function h(...M){if(!h.enabled)return;const N=h,$=Number(new Date),G=$-(c||$);N.diff=G,N.prev=c,N.curr=$,c=$,M[0]=_.coerce(M[0]),typeof M[0]!="string"&&M.unshift("%O");let x=0;M[0]=M[0].replace(/%([a-zA-Z%])/g,(I,i)=>{if(I==="%%")return"%";x++;const a=_.formatters[i];if(typeof a=="function"){const g=M[x];I=a.call(N,g),M.splice(x,1),x--}return I}),_.formatArgs.call(N,M),(N.log||_.log).apply(N,M)}return h.namespace=f,h.useColors=_.useColors(),h.color=_.selectColor(f),h.extend=L,h.destroy=_.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>y===null?_.enabled(f):y,set:M=>{y=M}}),typeof _.init=="function"&&_.init(h),h}function L(f,c){const y=_(this.namespace+(c===void 0?":":c)+f);return y.log=this.log,y}function P(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}return _.debug=_,_.default=_,_.coerce=function(f){return f instanceof Error?f.stack||f.message:f},_.disable=function(){const f=[..._.names.map(P),..._.skips.map(P).map(c=>"-"+c)].join(",");return _.enable(""),f},_.enable=function(f){let c;_.save(f),_.names=[],_.skips=[];const y=(typeof f=="string"?f:"").split(/[\s,]+/),h=y.length;for(c=0;c<h;c++)y[c]&&((f=y[c].replace(/\*/g,".*?"))[0]==="-"?_.skips.push(new RegExp("^"+f.substr(1)+"$")):_.names.push(new RegExp("^"+f+"$")))},_.enabled=function(f){if(f[f.length-1]==="*")return!0;let c,y;for(c=0,y=_.skips.length;c<y;c++)if(_.skips[c].test(f))return!1;for(c=0,y=_.names.length;c<y;c++)if(_.names[c].test(f))return!0;return!1},_.humanize=C(824),_.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(O).forEach(f=>{_[f]=O[f]}),_.names=[],_.skips=[],_.formatters={},_.selectColor=function(f){let c=0;for(let y=0;y<f.length;y++)c=(c<<5)-c+f.charCodeAt(y),c|=0;return _.colors[Math.abs(c)%_.colors.length]},_.enable(_.load()),_}},856:function(B){B.exports=function(){var d=Object.hasOwnProperty,C=Object.setPrototypeOf,O=Object.isFrozen,_=Object.getPrototypeOf,L=Object.getOwnPropertyDescriptor,P=Object.freeze,f=Object.seal,c=Object.create,y=typeof Reflect<"u"&&Reflect,h=y.apply,M=y.construct;h||(h=function(H,D,A){return H.apply(D,A)}),P||(P=function(H){return H}),f||(f=function(H){return H}),M||(M=function(H,D){return new(Function.prototype.bind.apply(H,[null].concat(function(A){if(Array.isArray(A)){for(var oe=0,ie=Array(A.length);oe<A.length;oe++)ie[oe]=A[oe];return ie}return Array.from(A)}(D))))});var N,$=Q(Array.prototype.forEach),G=Q(Array.prototype.pop),x=Q(Array.prototype.push),I=Q(String.prototype.toLowerCase),i=Q(String.prototype.match),a=Q(String.prototype.replace),g=Q(String.prototype.indexOf),S=Q(String.prototype.trim),W=Q(RegExp.prototype.test),X=(N=TypeError,function(){for(var H=arguments.length,D=Array(H),A=0;A<H;A++)D[A]=arguments[A];return M(N,D)});function Q(H){return function(D){for(var A=arguments.length,oe=Array(A>1?A-1:0),ie=1;ie<A;ie++)oe[ie-1]=arguments[ie];return h(H,D,oe)}}function R(H,D){C&&C(H,null);for(var A=D.length;A--;){var oe=D[A];if(typeof oe=="string"){var ie=I(oe);ie!==oe&&(O(D)||(D[A]=ie),oe=ie)}H[oe]=!0}return H}function pe(H){var D=c(null),A=void 0;for(A in H)h(d,H,[A])&&(D[A]=H[A]);return D}function ye(H,D){for(;H!==null;){var A=L(H,D);if(A){if(A.get)return Q(A.get);if(typeof A.value=="function")return Q(A.value)}H=_(H)}return function(oe){return console.warn("fallback value for",oe),null}}var He=P(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ve=P(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),l=P(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),v=P(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),F=P(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),re=P(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ce=P(["#text"]),ge=P(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),K=P(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),le=P(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fe=P(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),be=f(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Ze=f(/<%[\s\S]*|[\s\S]*%>/gm),Ee=f(/^data-[\-\w.\u00B7-\uFFFF]/),he=f(/^aria-[\-\w]+$/),te=f(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Se=f(/^(?:\w+script|data):/i),Le=f(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H};function _e(H){if(Array.isArray(H)){for(var D=0,A=Array(H.length);D<H.length;D++)A[D]=H[D];return A}return Array.from(H)}var qe=function(){return typeof window>"u"?null:window},gt=function(H,D){if((H===void 0?"undefined":Fe(H))!=="object"||typeof H.createPolicy!="function")return null;var A=null,oe="data-tt-policy-suffix";D.currentScript&&D.currentScript.hasAttribute(oe)&&(A=D.currentScript.getAttribute(oe));var ie="dompurify"+(A?"#"+A:"");try{return H.createPolicy(ie,{createHTML:function(Ke){return Ke}})}catch{return console.warn("TrustedTypes policy "+ie+" could not be created."),null}};return function H(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qe(),A=function(r){return H(r)};if(A.version="2.3.1",A.removed=[],!D||!D.document||D.document.nodeType!==9)return A.isSupported=!1,A;var oe=D.document,ie=D.document,Ke=D.DocumentFragment,qt=D.HTMLTemplateElement,lt=D.Node,Wt=D.Element,ft=D.NodeFilter,Ye=D.NamedNodeMap,Gt=Ye===void 0?D.NamedNodeMap||D.MozNamedAttrMap:Ye,Qt=D.Text,vn=D.Comment,wn=D.DOMParser,It=D.trustedTypes,Xe=Wt.prototype,Jt=ye(Xe,"cloneNode"),Ft=ye(Xe,"nextSibling"),Vt=ye(Xe,"childNodes"),ht=ye(Xe,"parentNode");if(typeof qt=="function"){var mt=ie.createElement("template");mt.content&&mt.content.ownerDocument&&(ie=mt.content.ownerDocument)}var Pe=gt(It,oe),Zt=Pe&&rt?Pe.createHTML(""):"",yt=ie,bt=yt.implementation,_n=yt.createNodeIterator,xn=yt.createDocumentFragment,ne=yt.getElementsByTagName,Kt=oe.importNode,et={};try{et=pe(ie).documentMode?ie.documentMode:{}}catch{}var Ae={};A.isSupported=typeof ht=="function"&&bt&&bt.createHTMLDocument!==void 0&&et!==9;var vt=be,wt=Ze,Yt=Ee,Lt=he,Cn=Se,Xt=Le,Pt=te,ve=null,en=R({},[].concat(_e(He),_e(Ve),_e(l),_e(F),_e(Ce))),xe=null,tn=R({},[].concat(_e(ge),_e(K),_e(le),_e(fe))),Mt=null,_t=null,nn=!0,Rt=!0,rn=!1,We=!1,tt=!1,xt=!1,Dt=!1,nt=!1,Ct=!1,on=!0,rt=!1,St=!0,zt=!0,ct=!1,ot={},Ge=null,Bt=R({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ut=null,an=R({},["audio","video","img","source","image","track"]),dt=null,sn=R({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),kt="http://www.w3.org/1998/Math/MathML",Me="http://www.w3.org/2000/svg",$e="http://www.w3.org/1999/xhtml",jt=$e,At=!1,it=null,Sn=ie.createElement("form"),Ht=function(r){it&&it===r||(r&&(r===void 0?"undefined":Fe(r))==="object"||(r={}),r=pe(r),ve="ALLOWED_TAGS"in r?R({},r.ALLOWED_TAGS):en,xe="ALLOWED_ATTR"in r?R({},r.ALLOWED_ATTR):tn,dt="ADD_URI_SAFE_ATTR"in r?R(pe(sn),r.ADD_URI_SAFE_ATTR):sn,ut="ADD_DATA_URI_TAGS"in r?R(pe(an),r.ADD_DATA_URI_TAGS):an,Ge="FORBID_CONTENTS"in r?R({},r.FORBID_CONTENTS):Bt,Mt="FORBID_TAGS"in r?R({},r.FORBID_TAGS):{},_t="FORBID_ATTR"in r?R({},r.FORBID_ATTR):{},ot="USE_PROFILES"in r&&r.USE_PROFILES,nn=r.ALLOW_ARIA_ATTR!==!1,Rt=r.ALLOW_DATA_ATTR!==!1,rn=r.ALLOW_UNKNOWN_PROTOCOLS||!1,We=r.SAFE_FOR_TEMPLATES||!1,tt=r.WHOLE_DOCUMENT||!1,nt=r.RETURN_DOM||!1,Ct=r.RETURN_DOM_FRAGMENT||!1,on=r.RETURN_DOM_IMPORT!==!1,rt=r.RETURN_TRUSTED_TYPE||!1,Dt=r.FORCE_BODY||!1,St=r.SANITIZE_DOM!==!1,zt=r.KEEP_CONTENT!==!1,ct=r.IN_PLACE||!1,Pt=r.ALLOWED_URI_REGEXP||Pt,jt=r.NAMESPACE||$e,We&&(Rt=!1),Ct&&(nt=!0),ot&&(ve=R({},[].concat(_e(Ce))),xe=[],ot.html===!0&&(R(ve,He),R(xe,ge)),ot.svg===!0&&(R(ve,Ve),R(xe,K),R(xe,fe)),ot.svgFilters===!0&&(R(ve,l),R(xe,K),R(xe,fe)),ot.mathMl===!0&&(R(ve,F),R(xe,le),R(xe,fe))),r.ADD_TAGS&&(ve===en&&(ve=pe(ve)),R(ve,r.ADD_TAGS)),r.ADD_ATTR&&(xe===tn&&(xe=pe(xe)),R(xe,r.ADD_ATTR)),r.ADD_URI_SAFE_ATTR&&R(dt,r.ADD_URI_SAFE_ATTR),r.FORBID_CONTENTS&&(Ge===Bt&&(Ge=pe(Ge)),R(Ge,r.FORBID_CONTENTS)),zt&&(ve["#text"]=!0),tt&&R(ve,["html","head","body"]),ve.table&&(R(ve,["tbody"]),delete Mt.tbody),P&&P(r),it=r)},ln=R({},["mi","mo","mn","ms","mtext"]),cn=R({},["foreignobject","desc","title","annotation-xml"]),at=R({},Ve);R(at,l),R(at,v);var $t=R({},F);R($t,re);var kn=function(r){var k=ht(r);k&&k.tagName||(k={namespaceURI:$e,tagName:"template"});var w=I(r.tagName),ee=I(k.tagName);if(r.namespaceURI===Me)return k.namespaceURI===$e?w==="svg":k.namespaceURI===kt?w==="svg"&&(ee==="annotation-xml"||ln[ee]):Boolean(at[w]);if(r.namespaceURI===kt)return k.namespaceURI===$e?w==="math":k.namespaceURI===Me?w==="math"&&cn[ee]:Boolean($t[w]);if(r.namespaceURI===$e){if(k.namespaceURI===Me&&!cn[ee]||k.namespaceURI===kt&&!ln[ee])return!1;var ae=R({},["title","style","font","a","script"]);return!$t[w]&&(ae[w]||!at[w])}return!1},Re=function(r){x(A.removed,{element:r});try{r.parentNode.removeChild(r)}catch{try{r.outerHTML=Zt}catch{r.remove()}}},un=function(r,k){try{x(A.removed,{attribute:k.getAttributeNode(r),from:k})}catch{x(A.removed,{attribute:null,from:k})}if(k.removeAttribute(r),r==="is"&&!xe[r])if(nt||Ct)try{Re(k)}catch{}else try{k.setAttribute(r,"")}catch{}},De=function(r){var k=void 0,w=void 0;if(Dt)r="<remove></remove>"+r;else{var ee=i(r,/^[\r\n\t ]+/);w=ee&&ee[0]}var ae=Pe?Pe.createHTML(r):r;if(jt===$e)try{k=new wn().parseFromString(ae,"text/html")}catch{}if(!k||!k.documentElement){k=bt.createDocument(jt,"template",null);try{k.documentElement.innerHTML=At?"":ae}catch{}}var ke=k.body||k.documentElement;return r&&w&&ke.insertBefore(ie.createTextNode(w),ke.childNodes[0]||null),jt===$e?ne.call(k,tt?"html":"body")[0]:tt?k.documentElement:ke},pt=function(r){return _n.call(r.ownerDocument||r,r,ft.SHOW_ELEMENT|ft.SHOW_COMMENT|ft.SHOW_TEXT,null,!1)},dn=function(r){return!(r instanceof Qt||r instanceof vn||typeof r.nodeName=="string"&&typeof r.textContent=="string"&&typeof r.removeChild=="function"&&r.attributes instanceof Gt&&typeof r.removeAttribute=="function"&&typeof r.setAttribute=="function"&&typeof r.namespaceURI=="string"&&typeof r.insertBefore=="function")},Ne=function(r){return(lt===void 0?"undefined":Fe(lt))==="object"?r instanceof lt:r&&(r===void 0?"undefined":Fe(r))==="object"&&typeof r.nodeType=="number"&&typeof r.nodeName=="string"},ze=function(r,k,w){Ae[r]&&$(Ae[r],function(ee){ee.call(A,k,w,it)})},pn=function(r){var k=void 0;if(ze("beforeSanitizeElements",r,null),dn(r)||i(r.nodeName,/[\u0080-\uFFFF]/))return Re(r),!0;var w=I(r.nodeName);if(ze("uponSanitizeElement",r,{tagName:w,allowedTags:ve}),!Ne(r.firstElementChild)&&(!Ne(r.content)||!Ne(r.content.firstElementChild))&&W(/<[/\w]/g,r.innerHTML)&&W(/<[/\w]/g,r.textContent)||w==="select"&&W(/<template/i,r.innerHTML))return Re(r),!0;if(!ve[w]||Mt[w]){if(zt&&!Ge[w]){var ee=ht(r)||r.parentNode,ae=Vt(r)||r.childNodes;if(ae&&ee)for(var ke=ae.length-1;ke>=0;--ke)ee.insertBefore(Jt(ae[ke],!0),Ft(r))}return Re(r),!0}return r instanceof Wt&&!kn(r)?(Re(r),!0):w!=="noscript"&&w!=="noembed"||!W(/<\/no(script|embed)/i,r.innerHTML)?(We&&r.nodeType===3&&(k=r.textContent,k=a(k,vt," "),k=a(k,wt," "),r.textContent!==k&&(x(A.removed,{element:r.cloneNode()}),r.textContent=k)),ze("afterSanitizeElements",r,null),!1):(Re(r),!0)},gn=function(r,k,w){if(St&&(k==="id"||k==="name")&&(w in ie||w in Sn))return!1;if(!(Rt&&!_t[k]&&W(Yt,k))){if(!(nn&&W(Lt,k))){if(!xe[k]||_t[k])return!1;if(!dt[k]){if(!W(Pt,a(w,Xt,""))){if((k!=="src"&&k!=="xlink:href"&&k!=="href"||r==="script"||g(w,"data:")!==0||!ut[r])&&!(rn&&!W(Cn,a(w,Xt,"")))){if(w)return!1}}}}}return!0},fn=function(r){var k=void 0,w=void 0,ee=void 0,ae=void 0;ze("beforeSanitizeAttributes",r,null);var ke=r.attributes;if(ke){var we={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xe};for(ae=ke.length;ae--;){var Tt=k=ke[ae],Te=Tt.name,Ot=Tt.namespaceURI;if(w=S(k.value),ee=I(Te),we.attrName=ee,we.attrValue=w,we.keepAttr=!0,we.forceKeepAttr=void 0,ze("uponSanitizeAttribute",r,we),w=we.attrValue,!we.forceKeepAttr&&(un(Te,r),we.keepAttr))if(W(/\/>/i,w))un(Te,r);else{We&&(w=a(w,vt," "),w=a(w,wt," "));var hn=r.nodeName.toLowerCase();if(gn(hn,ee,w))try{Ot?r.setAttributeNS(Ot,Te,w):r.setAttribute(Te,w),G(A.removed)}catch{}}}ze("afterSanitizeAttributes",r,null)}},jn=function r(k){var w=void 0,ee=pt(k);for(ze("beforeSanitizeShadowDOM",k,null);w=ee.nextNode();)ze("uponSanitizeShadowNode",w,null),pn(w)||(w.content instanceof Ke&&r(w.content),fn(w));ze("afterSanitizeShadowDOM",k,null)};return A.sanitize=function(r,k){var w=void 0,ee=void 0,ae=void 0,ke=void 0,we=void 0;if((At=!r)&&(r="<!-->"),typeof r!="string"&&!Ne(r)){if(typeof r.toString!="function")throw X("toString is not a function");if(typeof(r=r.toString())!="string")throw X("dirty is not a string, aborting")}if(!A.isSupported){if(Fe(D.toStaticHTML)==="object"||typeof D.toStaticHTML=="function"){if(typeof r=="string")return D.toStaticHTML(r);if(Ne(r))return D.toStaticHTML(r.outerHTML)}return r}if(xt||Ht(k),A.removed=[],typeof r=="string"&&(ct=!1),!ct)if(r instanceof lt)(ee=(w=De("<!---->")).ownerDocument.importNode(r,!0)).nodeType===1&&ee.nodeName==="BODY"||ee.nodeName==="HTML"?w=ee:w.appendChild(ee);else{if(!nt&&!We&&!tt&&r.indexOf("<")===-1)return Pe&&rt?Pe.createHTML(r):r;if(!(w=De(r)))return nt?null:Zt}w&&Dt&&Re(w.firstChild);for(var Tt=pt(ct?r:w);ae=Tt.nextNode();)ae.nodeType===3&&ae===ke||pn(ae)||(ae.content instanceof Ke&&jn(ae.content),fn(ae),ke=ae);if(ke=null,ct)return r;if(nt){if(Ct)for(we=xn.call(w.ownerDocument);w.firstChild;)we.appendChild(w.firstChild);else we=w;return on&&(we=Kt.call(oe,we,!0)),we}var Te=tt?w.outerHTML:w.innerHTML;return We&&(Te=a(Te,vt," "),Te=a(Te,wt," ")),Pe&&rt?Pe.createHTML(Te):Te},A.setConfig=function(r){Ht(r),xt=!0},A.clearConfig=function(){it=null,xt=!1},A.isValidAttribute=function(r,k,w){it||Ht({});var ee=I(r),ae=I(k);return gn(ee,ae,w)},A.addHook=function(r,k){typeof k=="function"&&(Ae[r]=Ae[r]||[],x(Ae[r],k))},A.removeHook=function(r){Ae[r]&&G(Ae[r])},A.removeHooks=function(r){Ae[r]&&(Ae[r]=[])},A.removeAllHooks=function(){Ae={}},A}()}()},729:B=>{var d=Object.prototype.hasOwnProperty,C="~";function O(){}function _(c,y,h){this.fn=c,this.context=y,this.once=h||!1}function L(c,y,h,M,N){if(typeof h!="function")throw new TypeError("The listener must be a function");var $=new _(h,M||c,N),G=C?C+y:y;return c._events[G]?c._events[G].fn?c._events[G]=[c._events[G],$]:c._events[G].push($):(c._events[G]=$,c._eventsCount++),c}function P(c,y){--c._eventsCount==0?c._events=new O:delete c._events[y]}function f(){this._events=new O,this._eventsCount=0}Object.create&&(O.prototype=Object.create(null),new O().__proto__||(C=!1)),f.prototype.eventNames=function(){var c,y,h=[];if(this._eventsCount===0)return h;for(y in c=this._events)d.call(c,y)&&h.push(C?y.slice(1):y);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},f.prototype.listeners=function(c){var y=C?C+c:c,h=this._events[y];if(!h)return[];if(h.fn)return[h.fn];for(var M=0,N=h.length,$=new Array(N);M<N;M++)$[M]=h[M].fn;return $},f.prototype.listenerCount=function(c){var y=C?C+c:c,h=this._events[y];return h?h.fn?1:h.length:0},f.prototype.emit=function(c,y,h,M,N,$){var G=C?C+c:c;if(!this._events[G])return!1;var x,I,i=this._events[G],a=arguments.length;if(i.fn){switch(i.once&&this.removeListener(c,i.fn,void 0,!0),a){case 1:return i.fn.call(i.context),!0;case 2:return i.fn.call(i.context,y),!0;case 3:return i.fn.call(i.context,y,h),!0;case 4:return i.fn.call(i.context,y,h,M),!0;case 5:return i.fn.call(i.context,y,h,M,N),!0;case 6:return i.fn.call(i.context,y,h,M,N,$),!0}for(I=1,x=new Array(a-1);I<a;I++)x[I-1]=arguments[I];i.fn.apply(i.context,x)}else{var g,S=i.length;for(I=0;I<S;I++)switch(i[I].once&&this.removeListener(c,i[I].fn,void 0,!0),a){case 1:i[I].fn.call(i[I].context);break;case 2:i[I].fn.call(i[I].context,y);break;case 3:i[I].fn.call(i[I].context,y,h);break;case 4:i[I].fn.call(i[I].context,y,h,M);break;default:if(!x)for(g=1,x=new Array(a-1);g<a;g++)x[g-1]=arguments[g];i[I].fn.apply(i[I].context,x)}}return!0},f.prototype.on=function(c,y,h){return L(this,c,y,h,!1)},f.prototype.once=function(c,y,h){return L(this,c,y,h,!0)},f.prototype.removeListener=function(c,y,h,M){var N=C?C+c:c;if(!this._events[N])return this;if(!y)return P(this,N),this;var $=this._events[N];if($.fn)$.fn!==y||M&&!$.once||h&&$.context!==h||P(this,N);else{for(var G=0,x=[],I=$.length;G<I;G++)($[G].fn!==y||M&&!$[G].once||h&&$[G].context!==h)&&x.push($[G]);x.length?this._events[N]=x.length===1?x[0]:x:P(this,N)}return this},f.prototype.removeAllListeners=function(c){var y;return c?(y=C?C+c:c,this._events[y]&&P(this,y)):(this._events=new O,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=C,f.EventEmitter=f,B.exports=f},717:B=>{typeof Object.create=="function"?B.exports=function(d,C){d.super_=C,d.prototype=Object.create(C.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}})}:B.exports=function(d,C){d.super_=C;var O=function(){};O.prototype=C.prototype,d.prototype=new O,d.prototype.constructor=d}},824:B=>{var d=1e3,C=60*d,O=60*C,_=24*O;function L(P,f,c,y){var h=f>=1.5*c;return Math.round(P/c)+" "+y+(h?"s":"")}B.exports=function(P,f){f=f||{};var c,y,h=typeof P;if(h==="string"&&P.length>0)return function(M){if(!((M=String(M)).length>100)){var N=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(M);if(N){var $=parseFloat(N[1]);switch((N[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*$;case"weeks":case"week":case"w":return 6048e5*$;case"days":case"day":case"d":return $*_;case"hours":case"hour":case"hrs":case"hr":case"h":return $*O;case"minutes":case"minute":case"mins":case"min":case"m":return $*C;case"seconds":case"second":case"secs":case"sec":case"s":return $*d;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return $;default:return}}}}(P);if(h==="number"&&isFinite(P))return f.long?(c=P,(y=Math.abs(c))>=_?L(c,y,_,"day"):y>=O?L(c,y,O,"hour"):y>=C?L(c,y,C,"minute"):y>=d?L(c,y,d,"second"):c+" ms"):function(M){var N=Math.abs(M);return N>=_?Math.round(M/_)+"d":N>=O?Math.round(M/O)+"h":N>=C?Math.round(M/C)+"m":N>=d?Math.round(M/d)+"s":M+"ms"}(P);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(P))}},520:(B,d,C)=>{var O=C(155),_=O.platform==="win32",L=C(539);function P(i,a){for(var g=[],S=0;S<i.length;S++){var W=i[S];W&&W!=="."&&(W===".."?g.length&&g[g.length-1]!==".."?g.pop():a&&g.push(".."):g.push(W))}return g}function f(i){for(var a=i.length-1,g=0;g<=a&&!i[g];g++);for(var S=a;S>=0&&!i[S];S--);return g===0&&S===a?i:g>S?[]:i.slice(g,S+1)}var c=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,y=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,h={};function M(i){var a=c.exec(i),g=(a[1]||"")+(a[2]||""),S=a[3]||"",W=y.exec(S);return[g,W[1],W[2],W[3]]}function N(i){var a=c.exec(i),g=a[1]||"",S=!!g&&g[1]!==":";return{device:g,isUnc:S,isAbsolute:S||!!a[2],tail:a[3]}}function $(i){return"\\\\"+i.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}h.resolve=function(){for(var i="",a="",g=!1,S=arguments.length-1;S>=-1;S--){var W;if(S>=0?W=arguments[S]:i?(W=O.env["="+i])&&W.substr(0,3).toLowerCase()===i.toLowerCase()+"\\"||(W=i+"\\"):W=O.cwd(),!L.isString(W))throw new TypeError("Arguments to path.resolve must be strings");if(W){var X=N(W),Q=X.device,R=X.isUnc,pe=X.isAbsolute,ye=X.tail;if((!Q||!i||Q.toLowerCase()===i.toLowerCase())&&(i||(i=Q),g||(a=ye+"\\"+a,g=pe),i&&g))break}}return R&&(i=$(i)),i+(g?"\\":"")+(a=P(a.split(/[\\\/]+/),!g).join("\\"))||"."},h.normalize=function(i){var a=N(i),g=a.device,S=a.isUnc,W=a.isAbsolute,X=a.tail,Q=/[\\\/]$/.test(X);return(X=P(X.split(/[\\\/]+/),!W).join("\\"))||W||(X="."),X&&Q&&(X+="\\"),S&&(g=$(g)),g+(W?"\\":"")+X},h.isAbsolute=function(i){return N(i).isAbsolute},h.join=function(){for(var i=[],a=0;a<arguments.length;a++){var g=arguments[a];if(!L.isString(g))throw new TypeError("Arguments to path.join must be strings");g&&i.push(g)}var S=i.join("\\");return/^[\\\/]{2}[^\\\/]/.test(i[0])||(S=S.replace(/^[\\\/]{2,}/,"\\")),h.normalize(S)},h.relative=function(i,a){i=h.resolve(i),a=h.resolve(a);for(var g=i.toLowerCase(),S=a.toLowerCase(),W=f(a.split("\\")),X=f(g.split("\\")),Q=f(S.split("\\")),R=Math.min(X.length,Q.length),pe=R,ye=0;ye<R;ye++)if(X[ye]!==Q[ye]){pe=ye;break}if(pe==0)return a;var He=[];for(ye=pe;ye<X.length;ye++)He.push("..");return(He=He.concat(W.slice(pe))).join("\\")},h._makeLong=function(i){if(!L.isString(i))return i;if(!i)return"";var a=h.resolve(i);return/^[a-zA-Z]\:\\/.test(a)?"\\\\?\\"+a:/^\\\\[^?.]/.test(a)?"\\\\?\\UNC\\"+a.substring(2):i},h.dirname=function(i){var a=M(i),g=a[0],S=a[1];return g||S?(S&&(S=S.substr(0,S.length-1)),g+S):"."},h.basename=function(i,a){var g=M(i)[2];return a&&g.substr(-1*a.length)===a&&(g=g.substr(0,g.length-a.length)),g},h.extname=function(i){return M(i)[3]},h.format=function(i){if(!L.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var a=i.root||"";if(!L.isString(a))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);var g=i.dir,S=i.base||"";return g?g[g.length-1]===h.sep?g+S:g+h.sep+S:S},h.parse=function(i){if(!L.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var a=M(i);if(!a||a.length!==4)throw new TypeError("Invalid path '"+i+"'");return{root:a[0],dir:a[0]+a[1].slice(0,-1),base:a[2],ext:a[3],name:a[2].slice(0,a[2].length-a[3].length)}},h.sep="\\",h.delimiter=";";var G=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,x={};function I(i){return G.exec(i).slice(1)}x.resolve=function(){for(var i="",a=!1,g=arguments.length-1;g>=-1&&!a;g--){var S=g>=0?arguments[g]:O.cwd();if(!L.isString(S))throw new TypeError("Arguments to path.resolve must be strings");S&&(i=S+"/"+i,a=S[0]==="/")}return(a?"/":"")+(i=P(i.split("/"),!a).join("/"))||"."},x.normalize=function(i){var a=x.isAbsolute(i),g=i&&i[i.length-1]==="/";return(i=P(i.split("/"),!a).join("/"))||a||(i="."),i&&g&&(i+="/"),(a?"/":"")+i},x.isAbsolute=function(i){return i.charAt(0)==="/"},x.join=function(){for(var i="",a=0;a<arguments.length;a++){var g=arguments[a];if(!L.isString(g))throw new TypeError("Arguments to path.join must be strings");g&&(i+=i?"/"+g:g)}return x.normalize(i)},x.relative=function(i,a){i=x.resolve(i).substr(1),a=x.resolve(a).substr(1);for(var g=f(i.split("/")),S=f(a.split("/")),W=Math.min(g.length,S.length),X=W,Q=0;Q<W;Q++)if(g[Q]!==S[Q]){X=Q;break}var R=[];for(Q=X;Q<g.length;Q++)R.push("..");return(R=R.concat(S.slice(X))).join("/")},x._makeLong=function(i){return i},x.dirname=function(i){var a=I(i),g=a[0],S=a[1];return g||S?(S&&(S=S.substr(0,S.length-1)),g+S):"."},x.basename=function(i,a){var g=I(i)[2];return a&&g.substr(-1*a.length)===a&&(g=g.substr(0,g.length-a.length)),g},x.extname=function(i){return I(i)[3]},x.format=function(i){if(!L.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var a=i.root||"";if(!L.isString(a))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);return(i.dir?i.dir+x.sep:"")+(i.base||"")},x.parse=function(i){if(!L.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var a=I(i);if(!a||a.length!==4)throw new TypeError("Invalid path '"+i+"'");return a[1]=a[1]||"",a[2]=a[2]||"",a[3]=a[3]||"",{root:a[0],dir:a[0]+a[1].slice(0,-1),base:a[2],ext:a[3],name:a[2].slice(0,a[2].length-a[3].length)}},x.sep="/",x.delimiter=":",B.exports=_?h:x,B.exports.posix=x,B.exports.win32=h},155:B=>{var d,C,O=B.exports={};function _(){throw new Error("setTimeout has not been defined")}function L(){throw new Error("clearTimeout has not been defined")}function P(x){if(d===setTimeout)return setTimeout(x,0);if((d===_||!d)&&setTimeout)return d=setTimeout,setTimeout(x,0);try{return d(x,0)}catch{try{return d.call(null,x,0)}catch{return d.call(this,x,0)}}}(function(){try{d=typeof setTimeout=="function"?setTimeout:_}catch{d=_}try{C=typeof clearTimeout=="function"?clearTimeout:L}catch{C=L}})();var f,c=[],y=!1,h=-1;function M(){y&&f&&(y=!1,f.length?c=f.concat(c):h=-1,c.length&&N())}function N(){if(!y){var x=P(M);y=!0;for(var I=c.length;I;){for(f=c,c=[];++h<I;)f&&f[h].run();h=-1,I=c.length}f=null,y=!1,function(i){if(C===clearTimeout)return clearTimeout(i);if((C===L||!C)&&clearTimeout)return C=clearTimeout,clearTimeout(i);try{C(i)}catch{try{return C.call(null,i)}catch{return C.call(this,i)}}}(x)}}function $(x,I){this.fun=x,this.array=I}function G(){}O.nextTick=function(x){var I=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)I[i-1]=arguments[i];c.push(new $(x,I)),c.length!==1||y||P(N)},$.prototype.run=function(){this.fun.apply(null,this.array)},O.title="browser",O.browser=!0,O.env={},O.argv=[],O.version="",O.versions={},O.on=G,O.addListener=G,O.once=G,O.off=G,O.removeListener=G,O.removeAllListeners=G,O.emit=G,O.prependListener=G,O.prependOnceListener=G,O.listeners=function(x){return[]},O.binding=function(x){throw new Error("process.binding is not supported")},O.cwd=function(){return"/"},O.chdir=function(x){throw new Error("process.chdir is not supported")},O.umask=function(){return 0}},384:B=>{B.exports=function(d){return d&&typeof d=="object"&&typeof d.copy=="function"&&typeof d.fill=="function"&&typeof d.readUInt8=="function"}},539:(B,d,C)=>{var O=C(155),_=/%[sdj%]/g;d.format=function(l){if(!i(l)){for(var v=[],F=0;F<arguments.length;F++)v.push(f(arguments[F]));return v.join(" ")}F=1;for(var re=arguments,Ce=re.length,ge=String(l).replace(_,function(le){if(le==="%%")return"%";if(F>=Ce)return le;switch(le){case"%s":return String(re[F++]);case"%d":return Number(re[F++]);case"%j":try{return JSON.stringify(re[F++])}catch{return"[Circular]"}default:return le}}),K=re[F];F<Ce;K=re[++F])x(K)||!S(K)?ge+=" "+K:ge+=" "+f(K);return ge},d.deprecate=function(l,v){if(a(C.g.process))return function(){return d.deprecate(l,v).apply(this,arguments)};if(O.noDeprecation===!0)return l;var F=!1;return function(){if(!F){if(O.throwDeprecation)throw new Error(v);O.traceDeprecation?console.trace(v):console.error(v),F=!0}return l.apply(this,arguments)}};var L,P={};function f(l,v){var F={seen:[],stylize:y};return arguments.length>=3&&(F.depth=arguments[2]),arguments.length>=4&&(F.colors=arguments[3]),G(v)?F.showHidden=v:v&&d._extend(F,v),a(F.showHidden)&&(F.showHidden=!1),a(F.depth)&&(F.depth=2),a(F.colors)&&(F.colors=!1),a(F.customInspect)&&(F.customInspect=!0),F.colors&&(F.stylize=c),h(F,l,F.depth)}function c(l,v){var F=f.styles[v];return F?"\x1B["+f.colors[F][0]+"m"+l+"\x1B["+f.colors[F][1]+"m":l}function y(l,v){return l}function h(l,v,F){if(l.customInspect&&v&&Q(v.inspect)&&v.inspect!==d.inspect&&(!v.constructor||v.constructor.prototype!==v)){var re=v.inspect(F,l);return i(re)||(re=h(l,re,F)),re}var Ce=function(he,te){if(a(te))return he.stylize("undefined","undefined");if(i(te)){var Se="'"+JSON.stringify(te).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return he.stylize(Se,"string")}return I(te)?he.stylize(""+te,"number"):G(te)?he.stylize(""+te,"boolean"):x(te)?he.stylize("null","null"):void 0}(l,v);if(Ce)return Ce;var ge=Object.keys(v),K=function(he){var te={};return he.forEach(function(Se,Le){te[Se]=!0}),te}(ge);if(l.showHidden&&(ge=Object.getOwnPropertyNames(v)),X(v)&&(ge.indexOf("message")>=0||ge.indexOf("description")>=0))return M(v);if(ge.length===0){if(Q(v)){var le=v.name?": "+v.name:"";return l.stylize("[Function"+le+"]","special")}if(g(v))return l.stylize(RegExp.prototype.toString.call(v),"regexp");if(W(v))return l.stylize(Date.prototype.toString.call(v),"date");if(X(v))return M(v)}var fe,be="",Ze=!1,Ee=["{","}"];return $(v)&&(Ze=!0,Ee=["[","]"]),Q(v)&&(be=" [Function"+(v.name?": "+v.name:"")+"]"),g(v)&&(be=" "+RegExp.prototype.toString.call(v)),W(v)&&(be=" "+Date.prototype.toUTCString.call(v)),X(v)&&(be=" "+M(v)),ge.length!==0||Ze&&v.length!=0?F<0?g(v)?l.stylize(RegExp.prototype.toString.call(v),"regexp"):l.stylize("[Object]","special"):(l.seen.push(v),fe=Ze?function(he,te,Se,Le,Fe){for(var _e=[],qe=0,gt=te.length;qe<gt;++qe)Ve(te,String(qe))?_e.push(N(he,te,Se,Le,String(qe),!0)):_e.push("");return Fe.forEach(function(H){H.match(/^\d+$/)||_e.push(N(he,te,Se,Le,H,!0))}),_e}(l,v,F,K,ge):ge.map(function(he){return N(l,v,F,K,he,Ze)}),l.seen.pop(),function(he,te,Se){return he.reduce(function(Le,Fe){return Fe.indexOf(`
`),Le+Fe.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Se[0]+(te===""?"":te+`
 `)+" "+he.join(`,
  `)+" "+Se[1]:Se[0]+te+" "+he.join(", ")+" "+Se[1]}(fe,be,Ee)):Ee[0]+be+Ee[1]}function M(l){return"["+Error.prototype.toString.call(l)+"]"}function N(l,v,F,re,Ce,ge){var K,le,fe;if((fe=Object.getOwnPropertyDescriptor(v,Ce)||{value:v[Ce]}).get?le=fe.set?l.stylize("[Getter/Setter]","special"):l.stylize("[Getter]","special"):fe.set&&(le=l.stylize("[Setter]","special")),Ve(re,Ce)||(K="["+Ce+"]"),le||(l.seen.indexOf(fe.value)<0?(le=x(F)?h(l,fe.value,null):h(l,fe.value,F-1)).indexOf(`
`)>-1&&(le=ge?le.split(`
`).map(function(be){return"  "+be}).join(`
`).substr(2):`
`+le.split(`
`).map(function(be){return"   "+be}).join(`
`)):le=l.stylize("[Circular]","special")),a(K)){if(ge&&Ce.match(/^\d+$/))return le;(K=JSON.stringify(""+Ce)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(K=K.substr(1,K.length-2),K=l.stylize(K,"name")):(K=K.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),K=l.stylize(K,"string"))}return K+": "+le}function $(l){return Array.isArray(l)}function G(l){return typeof l=="boolean"}function x(l){return l===null}function I(l){return typeof l=="number"}function i(l){return typeof l=="string"}function a(l){return l===void 0}function g(l){return S(l)&&R(l)==="[object RegExp]"}function S(l){return typeof l=="object"&&l!==null}function W(l){return S(l)&&R(l)==="[object Date]"}function X(l){return S(l)&&(R(l)==="[object Error]"||l instanceof Error)}function Q(l){return typeof l=="function"}function R(l){return Object.prototype.toString.call(l)}function pe(l){return l<10?"0"+l.toString(10):l.toString(10)}d.debuglog=function(l){if(a(L)&&(L=O.env.NODE_DEBUG||""),l=l.toUpperCase(),!P[l])if(new RegExp("\\b"+l+"\\b","i").test(L)){var v=O.pid;P[l]=function(){var F=d.format.apply(d,arguments);console.error("%s %d: %s",l,v,F)}}else P[l]=function(){};return P[l]},d.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},d.isArray=$,d.isBoolean=G,d.isNull=x,d.isNullOrUndefined=function(l){return l==null},d.isNumber=I,d.isString=i,d.isSymbol=function(l){return typeof l=="symbol"},d.isUndefined=a,d.isRegExp=g,d.isObject=S,d.isDate=W,d.isError=X,d.isFunction=Q,d.isPrimitive=function(l){return l===null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||typeof l=="symbol"||l===void 0},d.isBuffer=C(384);var ye=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function He(){var l=new Date,v=[pe(l.getHours()),pe(l.getMinutes()),pe(l.getSeconds())].join(":");return[l.getDate(),ye[l.getMonth()],v].join(" ")}function Ve(l,v){return Object.prototype.hasOwnProperty.call(l,v)}d.log=function(){console.log("%s - %s",He(),d.format.apply(d,arguments))},d.inherits=C(717),d._extend=function(l,v){if(!v||!S(v))return l;for(var F=Object.keys(v),re=F.length;re--;)l[F[re]]=v[F[re]];return l}}},V={};function U(B){var d=V[B];if(d!==void 0)return d.exports;var C=V[B]={exports:{}};return J[B].call(C.exports,C,C.exports,U),C.exports}U.n=B=>{var d=B&&B.__esModule?()=>B.default:()=>B;return U.d(d,{a:d}),d},U.d=(B,d)=>{for(var C in d)U.o(d,C)&&!U.o(B,C)&&Object.defineProperty(B,C,{enumerable:!0,get:d[C]})},U.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),U.o=(B,d)=>Object.prototype.hasOwnProperty.call(B,d),U.r=B=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})};var me={};return(()=>{U.r(me),U.d(me,{LSPluginUser:()=>Ot,setupPluginUserInstance:()=>hn});var B=U(520);U(856);const d=function(t,e){return t===e||t!=t&&e!=e},C=function(t,e){for(var n=t.length;n--;)if(d(t[n][0],e))return n;return-1};var O=Array.prototype.splice;function _(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}_.prototype.clear=function(){this.__data__=[],this.size=0},_.prototype.delete=function(t){var e=this.__data__,n=C(e,t);return!(n<0||(n==e.length-1?e.pop():O.call(e,n,1),--this.size,0))},_.prototype.get=function(t){var e=this.__data__,n=C(e,t);return n<0?void 0:e[n][1]},_.prototype.has=function(t){return C(this.__data__,t)>-1},_.prototype.set=function(t,e){var n=this.__data__,o=C(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this};const L=_,P=typeof mn=="object"&&mn&&mn.Object===Object&&mn;var f=typeof self=="object"&&self&&self.Object===Object&&self;const c=P||f||Function("return this")(),y=c.Symbol;var h=Object.prototype,M=h.hasOwnProperty,N=h.toString,$=y?y.toStringTag:void 0,G=Object.prototype.toString,x=y?y.toStringTag:void 0;const I=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":x&&x in Object(t)?function(e){var n=M.call(e,$),o=e[$];try{e[$]=void 0;var s=!0}catch{}var p=N.call(e);return s&&(n?e[$]=o:delete e[$]),p}(t):function(e){return G.call(e)}(t)},i=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},a=function(t){if(!i(t))return!1;var e=I(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},g=c["__core-js_shared__"];var S,W=(S=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",X=Function.prototype.toString,Q=/^\[object .+?Constructor\]$/,R=Function.prototype,pe=Object.prototype,ye=R.toString,He=pe.hasOwnProperty,Ve=RegExp("^"+ye.call(He).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const l=function(t){return!(!i(t)||(e=t,W&&W in e))&&(a(t)?Ve:Q).test(function(n){if(n!=null){try{return X.call(n)}catch{}try{return n+""}catch{}}return""}(t));var e},v=function(t,e){var n=function(o,s){return o?.[s]}(t,e);return l(n)?n:void 0},F=v(c,"Map"),re=v(Object,"create");var Ce=Object.prototype.hasOwnProperty,ge=Object.prototype.hasOwnProperty;function K(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}K.prototype.clear=function(){this.__data__=re?re(null):{},this.size=0},K.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},K.prototype.get=function(t){var e=this.__data__;if(re){var n=e[t];return n==="__lodash_hash_undefined__"?void 0:n}return Ce.call(e,t)?e[t]:void 0},K.prototype.has=function(t){var e=this.__data__;return re?e[t]!==void 0:ge.call(e,t)},K.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=re&&e===void 0?"__lodash_hash_undefined__":e,this};const le=K,fe=function(t,e){var n,o,s=t.__data__;return((o=typeof(n=e))=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null)?s[typeof e=="string"?"string":"hash"]:s.map};function be(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}be.prototype.clear=function(){this.size=0,this.__data__={hash:new le,map:new(F||L),string:new le}},be.prototype.delete=function(t){var e=fe(this,t).delete(t);return this.size-=e?1:0,e},be.prototype.get=function(t){return fe(this,t).get(t)},be.prototype.has=function(t){return fe(this,t).has(t)},be.prototype.set=function(t,e){var n=fe(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this};const Ze=be;function Ee(t){var e=this.__data__=new L(t);this.size=e.size}Ee.prototype.clear=function(){this.__data__=new L,this.size=0},Ee.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ee.prototype.get=function(t){return this.__data__.get(t)},Ee.prototype.has=function(t){return this.__data__.has(t)},Ee.prototype.set=function(t,e){var n=this.__data__;if(n instanceof L){var o=n.__data__;if(!F||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ze(o)}return n.set(t,e),this.size=n.size,this};const he=Ee,te=function(){try{var t=v(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Se=function(t,e,n){e=="__proto__"&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Le=function(t,e,n){(n!==void 0&&!d(t[e],n)||n===void 0&&!(e in t))&&Se(t,e,n)},Fe=function(t,e,n){for(var o=-1,s=Object(t),p=n(t),m=p.length;m--;){var T=p[++o];if(e(s[T],T,s)===!1)break}return t};var _e=j&&!j.nodeType&&j,qe=_e&&!0&&u&&!u.nodeType&&u,gt=qe&&qe.exports===_e?c.Buffer:void 0,H=gt?gt.allocUnsafe:void 0;const D=c.Uint8Array,A=function(t,e){var n,o,s=e?(n=t.buffer,o=new n.constructor(n.byteLength),new D(o).set(new D(n)),o):t.buffer;return new t.constructor(s,t.byteOffset,t.length)};var oe=Object.create;const ie=function(){function t(){}return function(e){if(!i(e))return{};if(oe)return oe(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Ke=(qt=Object.getPrototypeOf,lt=Object,function(t){return qt(lt(t))});var qt,lt,Wt=Object.prototype;const ft=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||Wt)},Ye=function(t){return t!=null&&typeof t=="object"},Gt=function(t){return Ye(t)&&I(t)=="[object Arguments]"};var Qt=Object.prototype,vn=Qt.hasOwnProperty,wn=Qt.propertyIsEnumerable;const It=Gt(function(){return arguments}())?Gt:function(t){return Ye(t)&&vn.call(t,"callee")&&!wn.call(t,"callee")},Xe=Array.isArray,Jt=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},Ft=function(t){return t!=null&&Jt(t.length)&&!a(t)};var Vt=j&&!j.nodeType&&j,ht=Vt&&!0&&u&&!u.nodeType&&u,mt=ht&&ht.exports===Vt?c.Buffer:void 0;const Pe=(mt?mt.isBuffer:void 0)||function(){return!1};var Zt=Function.prototype,yt=Object.prototype,bt=Zt.toString,_n=yt.hasOwnProperty,xn=bt.call(Object),ne={};ne["[object Float32Array]"]=ne["[object Float64Array]"]=ne["[object Int8Array]"]=ne["[object Int16Array]"]=ne["[object Int32Array]"]=ne["[object Uint8Array]"]=ne["[object Uint8ClampedArray]"]=ne["[object Uint16Array]"]=ne["[object Uint32Array]"]=!0,ne["[object Arguments]"]=ne["[object Array]"]=ne["[object ArrayBuffer]"]=ne["[object Boolean]"]=ne["[object DataView]"]=ne["[object Date]"]=ne["[object Error]"]=ne["[object Function]"]=ne["[object Map]"]=ne["[object Number]"]=ne["[object Object]"]=ne["[object RegExp]"]=ne["[object Set]"]=ne["[object String]"]=ne["[object WeakMap]"]=!1;var Kt=j&&!j.nodeType&&j,et=Kt&&!0&&u&&!u.nodeType&&u,Ae=et&&et.exports===Kt&&P.process,vt=function(){try{return et&&et.require&&et.require("util").types||Ae&&Ae.binding&&Ae.binding("util")}catch{}}(),wt=vt&&vt.isTypedArray;const Yt=wt?function(t){return function(e){return t(e)}}(wt):function(t){return Ye(t)&&Jt(t.length)&&!!ne[I(t)]},Lt=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]};var Cn=Object.prototype.hasOwnProperty;const Xt=function(t,e,n){var o=t[e];Cn.call(t,e)&&d(o,n)&&(n!==void 0||e in t)||Se(t,e,n)};var Pt=/^(?:0|[1-9]\d*)$/;const ve=function(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&(n=="number"||n!="symbol"&&Pt.test(t))&&t>-1&&t%1==0&&t<e};var en=Object.prototype.hasOwnProperty;const xe=function(t,e){var n=Xe(t),o=!n&&It(t),s=!n&&!o&&Pe(t),p=!n&&!o&&!s&&Yt(t),m=n||o||s||p,T=m?function(q,z){for(var Z=-1,ce=Array(q);++Z<q;)ce[Z]=z(Z);return ce}(t.length,String):[],E=T.length;for(var b in t)!e&&!en.call(t,b)||m&&(b=="length"||s&&(b=="offset"||b=="parent")||p&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||ve(b,E))||T.push(b);return T};var tn=Object.prototype.hasOwnProperty;const Mt=function(t){if(!i(t))return function(s){var p=[];if(s!=null)for(var m in Object(s))p.push(m);return p}(t);var e=ft(t),n=[];for(var o in t)(o!="constructor"||!e&&tn.call(t,o))&&n.push(o);return n},_t=function(t){return Ft(t)?xe(t,!0):Mt(t)},nn=function(t){return function(e,n,o,s){var p=!o;o||(o={});for(var m=-1,T=n.length;++m<T;){var E=n[m],b=s?s(o[E],e[E],E,o,e):void 0;b===void 0&&(b=e[E]),p?Se(o,E,b):Xt(o,E,b)}return o}(t,_t(t))},Rt=function(t,e,n,o,s,p,m){var T,E=Lt(t,n),b=Lt(e,n),q=m.get(b);if(q)Le(t,n,q);else{var z=p?p(E,b,n+"",t,e,m):void 0,Z=z===void 0;if(Z){var ce=Xe(b),Ue=!ce&&Pe(b),Qe=!ce&&!Ue&&Yt(b);z=b,ce||Ue||Qe?Xe(E)?z=E:Ye(T=E)&&Ft(T)?z=function(se,Ie){var Oe=-1,Nt=se.length;for(Ie||(Ie=Array(Nt));++Oe<Nt;)Ie[Oe]=se[Oe];return Ie}(E):Ue?(Z=!1,z=function(se,Ie){if(Ie)return se.slice();var Oe=se.length,Nt=H?H(Oe):new se.constructor(Oe);return se.copy(Nt),Nt}(b,!0)):Qe?(Z=!1,z=A(b,!0)):z=[]:function(se){if(!Ye(se)||I(se)!="[object Object]")return!1;var Ie=Ke(se);if(Ie===null)return!0;var Oe=_n.call(Ie,"constructor")&&Ie.constructor;return typeof Oe=="function"&&Oe instanceof Oe&&bt.call(Oe)==xn}(b)||It(b)?(z=E,It(E)?z=nn(E):i(E)&&!a(E)||(z=function(se){return typeof se.constructor!="function"||ft(se)?{}:ie(Ke(se))}(b))):Z=!1}Z&&(m.set(b,z),s(z,b,o,p,m),m.delete(b)),Le(t,n,z)}},rn=function t(e,n,o,s,p){e!==n&&Fe(n,function(m,T){if(p||(p=new he),i(m))Rt(e,n,T,o,t,s,p);else{var E=s?s(Lt(e,T),m,T+"",e,n,p):void 0;E===void 0&&(E=m),Le(e,T,E)}},_t)},We=function(t){return t},tt=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var xt=Math.max;const Dt=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:We;var nt=Date.now;const Ct=function(t){var e=0,n=0;return function(){var o=nt(),s=16-(o-n);if(n=o,s>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Dt),on=(rt=function(t,e,n){rn(t,e,n)},function(t,e){return Ct(function(n,o,s){return o=xt(o===void 0?n.length-1:o,0),function(){for(var p=arguments,m=-1,T=xt(p.length-o,0),E=Array(T);++m<T;)E[m]=p[o+m];m=-1;for(var b=Array(o+1);++m<o;)b[m]=p[m];return b[o]=s(E),tt(n,this,b)}}(t,e,We),t+"")}(function(t,e){var n=-1,o=e.length,s=o>1?e[o-1]:void 0,p=o>2?e[2]:void 0;for(s=rt.length>3&&typeof s=="function"?(o--,s):void 0,p&&function(T,E,b){if(!i(b))return!1;var q=typeof E;return!!(q=="number"?Ft(b)&&ve(E,b.length):q=="string"&&E in b)&&d(b[E],T)}(e[0],e[1],p)&&(s=o<3?void 0:s,o=1),t=Object(t);++n<o;){var m=e[n];m&&rt(t,m,n)}return t}));var rt,St=function(){return(St=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function zt(t){return t.toLowerCase()}var ct=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],ot=/[^A-Z0-9]+/gi;function Ge(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(o,s){return o.replace(s,n)},t)}const Bt=navigator.platform.toLowerCase()==="win32"?B.win32:B.posix,ut=function(t,e){return e===void 0&&(e={}),function(n,o){return o===void 0&&(o={}),function(s,p){p===void 0&&(p={});for(var m=p.splitRegexp,T=m===void 0?ct:m,E=p.stripRegexp,b=E===void 0?ot:E,q=p.transform,z=q===void 0?zt:q,Z=p.delimiter,ce=Z===void 0?" ":Z,Ue=Ge(Ge(s,T,"$1\0$2"),b,"\0"),Qe=0,se=Ue.length;Ue.charAt(Qe)==="\0";)Qe++;for(;Ue.charAt(se-1)==="\0";)se--;return Ue.slice(Qe,se).split("\0").map(z).join(ce)}(n,St({delimiter:"."},o))}(t,St({delimiter:"_"},e))},an=on;function dt(t,e){let n,o,s=!1;const p=T=>E=>{t&&clearTimeout(t),T(E),s=!0},m=new Promise((T,E)=>{n=p(T),o=p(E),t&&(t=setTimeout(()=>o(new Error(`[deferred timeout] ${e}`)),t))});return{created:Date.now(),setTag:T=>e=T,resolve:n,reject:o,promise:m,get settled(){return s}}}var sn=U(227),kt=U.n(sn);const Me="application/x-postmate-v1+json";let $e=0;const jt={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},At=(t,e)=>!(typeof e=="string"&&t.origin!==e||!t.data||typeof t.data=="object"&&!("postmate"in t.data)||t.data.type!==Me||!jt[t.data.postmate]);class it{parent;frame;child;events={};childOrigin;listener;constructor(e){this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=n=>{if(!At(n,this.childOrigin))return!1;const{data:o,name:s}=((n||{}).data||{}).value||{};n.data.postmate==="emit"&&s in this.events&&this.events[s].forEach(p=>{p.call(this,o)})},this.parent.addEventListener("message",this.listener,!1)}get(e){return new Promise(n=>{const o=++$e,s=p=>{p.data.uid===o&&p.data.postmate==="reply"&&(this.parent.removeEventListener("message",s,!1),n(p.data.value))};this.parent.addEventListener("message",s,!1),this.child.postMessage({postmate:"request",type:Me,property:e,uid:o},this.childOrigin)})}call(e,n){this.child.postMessage({postmate:"call",type:Me,property:e,data:n},this.childOrigin)}on(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class Sn{model;parent;parentOrigin;child;constructor(e){this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",n=>{if(!At(n,this.parentOrigin))return;const{property:o,uid:s,data:p}=n.data;n.data.postmate!=="call"?((m,T)=>{const E=typeof m[T]=="function"?m[T]():m[T];return Promise.resolve(E)})(this.model,o).then(m=>{n.source.postMessage({property:o,postmate:"reply",type:Me,uid:s,value:m},n.origin)}):o in this.model&&typeof this.model[o]=="function"&&this.model[o](p)})}emit(e,n){this.parent.postMessage({postmate:"emit",type:Me,value:{name:e,data:n}},this.parentOrigin)}}class Ht{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(e){this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const n=(p=>{const m=document.createElement("a");m.href=p;const T=m.protocol.length>4?m.protocol:window.location.protocol,E=m.host.length?m.port==="80"||m.port==="443"?m.hostname:m.host:window.location.host;return m.origin||`${T}//${E}`})(e=e||this.url);let o,s=0;return new Promise((p,m)=>{const T=b=>!!At(b,n)&&(b.data.postmate==="handshake-reply"?(clearInterval(o),this.parent.removeEventListener("message",T,!1),this.childOrigin=b.origin,p(new it(this))):m("Failed handshake"));this.parent.addEventListener("message",T,!1);const E=()=>{s++,this.child.postMessage({postmate:"handshake",type:Me,model:this.model},n),s===5&&clearInterval(o)};this.frame.addEventListener("load",()=>{E(),o=setInterval(E,500)}),this.frame.src=e})}}class ln{child;model;parent;parentOrigin;constructor(e){this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,n)=>{const o=s=>{if(s.data.postmate){if(s.data.postmate==="handshake"){this.child.removeEventListener("message",o,!1),s.source.postMessage({postmate:"handshake-reply",type:Me},s.origin),this.parentOrigin=s.origin;const p=s.data.model;return p&&Object.keys(p).forEach(m=>{this.model[m]=p[m]}),e(new Sn(this))}return n("Handshake Reply Failed")}};this.child.addEventListener("message",o,!1)})}}var cn=U(729),at=U.n(cn);const{importHTML:$t,createSandboxContainer:kn}=window.QSandbox||{};function Re(t,e){return t.startsWith("http")?fetch(t,e):(t=t.replace("file://",""),new Promise(async(n,o)=>{try{const s=await window.apis.doAction(["readFile",t]);n({text:()=>s})}catch(s){console.error(s),o(s)}}))}class un extends at(){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(e){super(),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){const{name:e,entry:n}=this._pluginLocal.options;if(this.loaded||!n)return;const{template:o,execScripts:s}=await $t(n,{fetch:Re});this._mount(o,document.body);const p=kn(e,{elementGetter:()=>this._root?.firstChild}).instance.proxy;p.__shadow_mode__=!0,p.LSPluginLocal=this._pluginLocal,p.LSPluginShadow=this,p.LSPluginUser=p.logseq=new Ot(this._pluginLocal.toJSON(),this._pluginLocal.caller);const m=await s(p,!0);this._unmountFns.push(m.unmount),this._loaded=!0}_mount(e,n){const o=this._frame=document.createElement("div");o.classList.add("lsp-shadow-sandbox"),o.id=this._pluginLocal.id,this._root=o.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,n.appendChild(o),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const De=kt()("LSPlugin:caller"),pt="#await#response#",dn="#lspmsg#error#",Ne=t=>`#lspmsg#${t}`;class ze extends at(){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(e){super(),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const n=this,o=this._pluginLocal!=null;let s=0;const p=new Map,m=dt(5e3),T=this._extendUserModel({"#lspmsg#ready#":async b=>{T[Ne(b?.pid)]=({type:q,payload:z})=>{De(`[host (_call) -> *user] ${this._debugTag}`,q,z),n.emit(q,z)},await m.resolve()},"#lspmsg#beforeunload#":async b=>{const q=dt(1e4);n.emit("beforeunload",Object.assign({actor:q},b)),await q.promise},"#lspmsg#settings#":async({type:b,payload:q})=>{n.emit("settings:changed",q)},"#lspmsg#":async({ns:b,type:q,payload:z})=>{De(`[host (async) -> *user] ${this._debugTag} ns=${b} type=${q}`,z),b&&b.startsWith("hook")?n.emit(`${b}:${q}`,z):n.emit(q,z)},"#lspmsg#reply#":({_sync:b,result:q})=>{if(De(`[sync host -> *user] #${b}`,q),p.has(b)){const z=p.get(b);z&&(q?.hasOwnProperty(dn)?z.reject(q[dn]):z.resolve(q),p.delete(b))}},...e});if(o)return await m.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const E=new ln(T).sendHandshakeReply();return this._status="pending",await E.then(b=>{this._child=b,this._connected=!0,this._call=async(q,z={},Z)=>{if(Z){const ce=++s;p.set(ce,Z),z._sync=ce,Z.setTag(`async call #${ce}`),De(`async call #${ce}`)}return b.emit(Ne(T.baseInfo.id),{type:q,payload:z}),Z?.promise},this._callUserModel=async(q,z)=>{try{T[q](z)}catch{De(`[model method] #${q} not existed`)}},setInterval(()=>{if(p.size>100)for(const[q,z]of p)z.settled&&p.delete(q)},18e5)}).finally(()=>{this._status=void 0}),await m.promise,T.baseInfo}async call(e,n={}){return this._call?.call(this,e,n)}async callAsync(e,n={}){const o=dt(1e4);return this._call?.call(this,e,n,o)}async callUserModel(e,n={}){return this._callUserModel?.call(this,e,n)}async _setupIframeSandbox(){const e=this._pluginLocal,n=e.id,o=`${n}_lsp_main`,s=new URL(e.options.entry);s.searchParams.set("__v__",e.options.version);const p=document.querySelector(`#${o}`);p&&p.parentElement.removeChild(p);const m=document.createElement("div");m.classList.add("lsp-iframe-sandbox-container"),m.id=o,m.dataset.pid=n;try{const b=(await this._pluginLocal._loadLayoutsData())?.$$0;if(b){m.dataset.inited_layout="true";const{width:q,height:z,left:Z,top:ce}=b;Object.assign(m.style,{width:q+"px",height:z+"px",left:Z+"px",top:ce+"px"})}}catch(b){console.error("[Restore Layout Error]",b)}document.body.appendChild(m);let T,E=new Ht({id:n+"_iframe",container:m,url:s.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}}).sendHandshake();return this._status="pending",new Promise((b,q)=>{T=setTimeout(()=>{q(new Error("handshake Timeout"))},3e3),E.then(z=>{this._parent=z,this._connected=!0,this.emit("connected"),z.on(Ne(e.id),({type:Z,payload:ce})=>{De("[user -> *host] ",Z,ce),this._pluginLocal?.emit(Z,ce||{})}),this._call=async(...Z)=>{await z.call(Ne(e.id),{type:Z[0],payload:Object.assign(Z[1]||{},{$$pid:e.id})})},this._callUserModel=async(Z,ce)=>{if(Z.startsWith(pt))return await z.get(Z.replace(pt,""));z.call(Z,ce)},b(null)}).catch(z=>{q(z)}).finally(()=>{clearTimeout(T)})}).catch(b=>{throw De("[iframe sandbox] error",b),b}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const e=this._pluginLocal,n=this._shadow=new un(e);try{this._status="pending",await n.load(),this._connected=!0,this.emit("connected"),this._call=async(o,s={},p)=>(p&&(s.actor=p),this._pluginLocal?.emit(o,Object.assign(s,{$$pid:e.id})),p?.promise),this._callUserModel=async(...o)=>{let s=o[0];s?.startsWith(pt)&&(s=s.replace(pt,""));const p=o[1]||{},m=this._userModel[s];typeof m=="function"&&await m.call(null,p)}}catch(o){throw De("[shadow sandbox] error",o),o}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(e){this._debugTag=e}async destroy(){let e=null;this._parent&&(e=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(e=this._getSandboxShadowContainer(),this._shadow.destroy()),e?.parentNode.removeChild(e)}}class pn{ctx;constructor(e){this.ctx=e}get ctxId(){return this.ctx.baseInfo.id}setItem(e,n){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,n]})}getItem(e){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e]})}removeItem(e){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(e){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e]})}}class gn{ctx;constructor(e){this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...n){const o=this.ensureHostScope();return e=ut(e)?.toLowerCase(),o.logseq.api["exper_"+e]?.apply(o,n)}async loadScripts(...e){(e=e.map(n=>n?.startsWith("http")?n:this.ctx.resolveResourceFullUrl(n))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,n){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,n)}registerExtensionsEnhancer(e,n){const o=this.ensureHostScope();switch(e){case"katex":o.katex&&n(o.katex).catch(console.error)}return o.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,n)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const fn=Symbol.for("proxy-continue"),jn=kt()("LSPlugin:user");function r(t,e,n){if(typeof n!="function")return!1;const{key:o,label:s,desc:p,palette:m,keybinding:T}=e,E=`SimpleCommandHook${o}${++ee}`;this.Editor["on"+E](n),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:o,label:s,type:t,desc:p,keybinding:T},["editor/hook",E]],m]})}let k=null;const w={async getInfo(t){return k||(k=await this._execCallableAPIAsync("get-app-info")),typeof t=="string"?k[t]:k},registerCommand:r,registerCommandPalette(t,e){const{key:n,label:o,keybinding:s}=t;return r.call(this,"$palette$",{key:n,label:o,palette:!0,keybinding:s},e)},registerCommandShortcut(t,e){const{binding:n}=t,o="$shortcut$",s=o+ut(n);return r.call(this,o,{key:s,palette:!1,keybinding:t},e)},registerUIItem(t,e){const n=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[n,t,e]})},registerPageMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id,o=t;r.call(this,"page-menu-item",{key:n,label:o},e)},setFullScreen(t){const e=(...n)=>this._callWin("setFullScreen",...n);t==="toggle"?this._callWin("isFullScreen").then(n=>{n?e():e(!0)}):t?e(!0):e()}};let ee=0;const ae={registerSlashCommand(t,e){jn("Register slash command #",this.baseInfo.id,t,e),typeof e=="function"&&(e=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e]]),e=e.map(n=>{const[o,...s]=n;switch(o){case"editor/hook":let p=s[0],m=()=>{this.caller?.callUserModel(p)};typeof p=="function"&&(m=p);const T=`SlashCommandHook${o}${++ee}`;n[1]=T,this.Editor["on"+T](m)}return n}),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,e]]})},registerBlockContextMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id,o=t;r.call(this,"block-context-menu-item",{key:n,label:o},e)},scrollToBlockInPage(t,e,n){const o="block-content-"+e;n?.replaceState?this.App.replaceState("page",{name:t},{anchor:o}):this.App.pushState("page",{name:t},{anchor:o})}},ke={onBlockChanged(t,e){const n=this.baseInfo.id,o=`hook:db:${ut(`block:${t}`)}`,s=({block:p,txData:m,txMeta:T})=>{p.uuid===t&&e(p,m,T)};return this.caller.on(o,s),this.App._installPluginHook(n,o),()=>{this.caller.off(o,s),this.App._uninstallPluginHook(n,o)}}},we={},Tt={},Te={};class Ot extends at(){_baseInfo;_caller;_version="0.0.6";_debugTag="";_settingsSchema;_connected=!1;_ui=new Map;_mFileStorage;_mExperiments;_beforeunloadCallback;constructor(e,n){super(),this._baseInfo=e,this._caller=n,n.on("sys:ui:visible",o=>{o?.toggle&&this.toggleMainUI()}),n.on("settings:changed",o=>{const s=Object.assign({},this.settings),p=Object.assign(this._baseInfo.settings,o);this.emit("settings:changed",{...p},s)}),n.on("beforeunload",async o=>{const{actor:s,...p}=o,m=this._beforeunloadCallback;try{m&&await m(p),s?.resolve(null)}catch(T){console.debug(`${n.debugTag} [beforeunload] `,T),s?.reject(T)}})}async ready(e,n){if(!this._connected)try{typeof e=="function"&&(n=e,e={});let o=await this._caller.connectToParent(e);this._connected=!0,o=an(this._baseInfo,o),this._settingsSchema&&(o.settings=function(s,p){const m=(p||[]).reduce((T,E)=>("default"in E&&(T[E.key]=E.default),T),{});return Object.assign(m,s)}(o.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),o?.id&&(this._debugTag=this._caller.debugTag=`#${o.id} [${o.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(s){console.warn(s)}n&&n.call(this,o)}catch(o){console.error(`${this._debugTag} [Ready Error]`,o)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){typeof e=="function"&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){const n="settings:changed";return this.on(n,e),()=>this.off(n,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const n={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}showMainUI(e){const n={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}toggleMainUI(){const e=this._ui.get(0);e&&e.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const e=this._ui.get(0);return Boolean(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),function(n,...o){try{const s=new URL(n);if(!s.origin)throw new Error(null);const p=Bt.join(n.substr(s.origin.length),...o);return s.origin+p}catch{return Bt.join(n,...o)}}(this._baseInfo.lsr,e)}_makeUserProxy(e,n){const o=this,s=this.caller;return new Proxy(e,{get(p,m,T){const E=p[m];return function(...b){if(E){const z=E.apply(o,b.concat(n));if(z!==fn)return z}if(n){const z=m.toString().match(/^(once|off|on)/i);if(z!=null){const Z=z[0].toLowerCase(),ce=z.input.slice(Z.length),Ue=Z==="off",Qe=o.baseInfo.id,se=`hook:${n}:${ut(ce)}`,Ie=b[0];s[Z](se,Ie);const Oe=()=>{s.off(se,Ie),s.listenerCount(se)||o.App._uninstallPluginHook(Qe,se)};return Ue?void Oe():(o.App._installPluginHook(Qe,se),Oe)}}let q=m;return["git","ui","assets"].includes(n)&&(q=n+"_"+q),s.callAsync("api:call",{tag:n,method:q,args:b})}}})}_execCallableAPIAsync(e,...n){return this._caller.callAsync("api:call",{method:e,args:n})}_execCallableAPI(e,...n){this._caller.call("api:call",{method:e,args:n})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(w,"app")}get Editor(){return this._makeUserProxy(ae,"editor")}get DB(){return this._makeUserProxy(ke,"db")}get Git(){return this._makeUserProxy(we,"git")}get UI(){return this._makeUserProxy(Tt,"ui")}get Assets(){return this._makeUserProxy(Te,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new pn(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new gn(this)),e}}function hn(t,e){return new Ot(t,e)}if(window.__LSP__HOST__==null){const t=new ze(null);window.logseq=hn({},t)}})(),me})()})})(Mn,Mn.exports);const Wn={id:"logseq-banners-plugin",title:"Banners",icon:"./logo.png"};var Gn=`@import url("https://fonts.googleapis.com/css2?family=Fira+Sans+Condensed:wght@500&display=swap");

/* Comomon layout */
#main-content-container {
    display: block;
}
.content {
    position: relative;
}
#banner {
    position: relative;
    display: none;
    height: 0;
    margin: 0 auto;
    overflow: hidden;
    background-repeat: no-repeat;
    background-size: cover;
    background-position-x: 50%;
}
.cp__sidebar-main-content {
    margin: 0 auto;
}
.cp__right-sidebar-inner .resizer {
    z-index: 9;
}

/* Banner */
body:is([data-page="page"], [data-page="home"]).is-banner-active #banner {
    height: var(--bannerHeight);
}
body:is([data-page="page"], [data-page="home"]).is-banner-active #banner::before {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    content: "";
    background-repeat: no-repeat;
    background-size: cover;
    background-image: var(--pageBanner);
    background-position-y: var(--bannerAlign);
}

/* Icon */
body[data-page="home"].is-icon-active .journal-item:first-of-type>.page>.flex-col:first-child>.content>.flex-1::before,
body[data-page="page"].is-icon-active .page>.relative>.flex-row>.flex-1::before {
    content: var(--pageIcon);
    font-size: var(--iconWidth);
    font-weight: normal;
    position: absolute;
    left: -7px;
    z-index: 2;
    transform: translateY(-55%);
    line-height: initial;
    opacity: 0.9;
}
body[data-page="home"].is-icon-active .journal-item:first-of-type .journal-title,
body[data-page="page"].is-icon-active .page-title,
body[data-page="page"].is-icon-active .ls-page-title.editing {
    margin-top: 35px;
}
body[data-page="home"].is-icon-active #journals .journal-item:first-child {
    margin-top: 0;
}

/* Small icons for other home journal items */
body[data-page="home"].is-icon-active #journals .journal-item h1.title::before {
    content: var(--pageIcon);
    margin-right: 8px;
    font-size: 0.9em;
    font-weight: normal;
}
body[data-page="home"].is-icon-active #journals .journal-item:first-of-type h1.title::before {
    display: none;
}
.is-icon-active .page-title .page-icon {
    display: none;
}

/* Widgets */
#banner-widgets {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: flex-end;
    justify-content: flex-end;
}
#banner-widgets::before {
    display: none;
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    width: calc(var(--widgetsCalendarWidth) * 0.93);
    height: 100%;
    background-color: rgba(var(--widgetsBgColor), 0.8);
    filter: drop-shadow(0px 1px 10px rgba(var(--widgetsTextColor), 0.4));
}
#banner-widgets.banner-widgets-bg::before {
    display: block;
}
#banner-widgets iframe {
    margin: 0;
}

/* Calendar */
#banner-widgets-calendar {
    position: absolute;
    top: 0;
    left: 2px;
    transform: scale(0.9) translate(-5%, -5%);
}
#banner-widgets-calendar .logseq-block-calendar {
    width: var(--widgetsCalendarWidth);
    overflow: hidden;
    color: rgb(var(--widgetsTextColor));
    background-color: transparent;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif,
     "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    text-shadow: 1px 1px 0px rgba(var(--widgetsBgColor), 0.8);
    font-weight: bold;
}
/* #banner-widgets-calendar .calendar-title {
} */
#banner-widgets-calendar .calendar-month {
    padding-left: 8px;
}
#banner-widgets-calendar .calendar-nav {
    padding: 0 8px 0 0;
}
/* #banner-widgets-calendar .calendar-nav a {
}
#banner-widgets-calendar .calendar-head {
} */
#banner-widgets-calendar .logseq-block-calendar th {
    border: 0;
}
#banner-widgets-calendar .calendar-head td {
    padding: 2px 0;
    font-size: 16px;
    border: 0;
}
#banner-widgets-calendar .calendar-day {
    display: block;
    padding: 0 10px;
    height: 1.8rem;
    opacity: 1;
    transition: none;
}
#banner-widgets-calendar .calendar-day-today {
    background-color: rgba(var(--widgetsBgColor), 0.5);
}
#banner-widgets-calendar .calendar-day:hover {
    background-color: rgba(var(--widgetsBgColor), 0.2);
}

/* Weather */
#banner-widgets-weather {
    position: absolute;
    bottom: 0;
    left: 0;
    display: flex;
    align-items: center;
    width: calc(var(--widgetsCalendarWidth) * 0.93);
    padding: 0 10px;
    text-shadow: 1px 1px 0px rgba(var(--widgetsBgColor), 0.8);
    line-height: 1.2;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
#banner-widgets-weather .weather_dailyForecastContainerWithDots {
    margin-bottom: 32px !important;
}
#banner-widgets-weather .weather_text {
    font-size: 0.8em !important;
    text-align: center;
    word-break: keep-all;
    color: rgba(var(--widgetsTextColor)) !important;
}
#banner-widgets-weather .weather_dailyContainer .weather_text {
    display: inline;
}
#banner-widgets-weather .weather_row {
    align-items: center;
}
#banner-widgets-weather > .weather_currentContainer {
    justify-content: flex-end !important;
    margin-right: 8px !important;
}
#banner-widgets-weather .weather_currentContainer > .weather_currentContainer {
    flex: initial !important;
}
#banner-widgets-weather .weather_degreeRow {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
}
#banner-widgets-weather .col-xl {
    white-space: nowrap;
}
#banner-widgets-weather .col-xl:last-child::before {
    content: "\\00a0(";
}
#banner-widgets-weather .col-xl:last-child::after {
    content: ")";
}
#banner-widgets-weather .weather_dailyContainer .weather_image {
    width: 32px;
    height: 32px;
}
#banner-widgets-weather .weather_text + div {
    overflow: hidden;
    height: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
}
#banner-widgets-weather .weather_currentContainer > .weather_currentContainer .weather_image {
    max-width: 50px !important;
    margin-right: 0px !important;
}


/* Quote */
#banner-widgets-quote {
    position: relative;
    max-width: calc(100% - var(--widgetsCalendarWidth));
    margin: 6px 8px;
    filter: drop-shadow(0px 0px 2px rgba(var(--widgetsTextColor), 0.2)) drop-shadow(-2px -2px 0px rgba(var(--widgetsBgColor), 0.8))
}
#banner-widgets-quote::before {
    --widgetsQuoteIcon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M3.7 6.3C5 4.8 7.2 4 10 4h1v2.8l-.8.2c-1.4.3-2.3.8-2.8 1.6a2.9 2.9 0 0 0-.5 1.4H10a1 1 0 0 1 1 1v7a2 2 0 0 1-2 2H3a1 1 0 0 1-1-1v-8s-.2-2.7 1.7-4.7zM20 20h-6a1 1 0 0 1-1-1v-8s-.2-2.7 1.7-4.7C16 4.8 18.2 4 21 4h1v2.8l-.8.2c-1.4.3-2.3.8-2.8 1.6a2.9 2.9 0 0 0-.5 1.4H21a1 1 0 0 1 1 1v7a2 2 0 0 1-2 2z'/%3E%3C/svg%3E");
    display: block;
    content: "";
    position: absolute;
    top: -18px;
    left: -10px;
    z-index: 1;
    width: 30px;
    height: 30px;
    -webkit-mask: var(--widgetsQuoteIcon) no-repeat 50% 50%;
    mask: var(--widgetsQuoteIcon) no-repeat 50% 50%;
    -webkit-mask-size: cover;
    mask-size: cover;
    background-color: rgba(var(--widgetsTextColor), 0.9);
}
#banner-widgets-quote-block {
    text-overflow: ellipsis;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 7;
    -webkit-box-orient: vertical;
    font-family: "Fira Sans Condensed", sans-serif;
    font-size: calc(var(--widgetsQuoteFS) * 0.8);
    text-align: right;
    border-radius: 6px;
    text-shadow: 1px 1px 0px rgba(var(--widgetsBgColor), 0.8);
    background-color: rgba(var(--widgetsBgColor), 0.7);
}
@media (min-width: 1024px) {
    #banner-widgets-quote-block {
        font-size: var(--widgetsQuoteFS);
    }
}
#banner-widgets-quote-link {
    display: block;
    padding: 6px 12px;
    color: var(--ls-primary-text-color);
}
#banner-widgets-quote-text {
    max-width: var(--widgetsQuoteMaxWidth, 48ch);
    font-size: var(--widgetsQuoteSize, 100%);
    line-height: 1.2em;
}

/* Custom */
/* #banner-widgets-custom {
} */
#banner-widgets-pomo {
    width: 182px;
    height: 110px;
    position: absolute;
    right: 0;
    top: 0;
    border-radius: 0 0 0 6px;
    filter: saturate(0.3) brightness(0.9) opacity(0.6);
    transform: scale(0.8) translate(23px, -14px);
}
`;const Be=Wn.id;let de,je,st,Et,Je,yn,bn,ue,An,Y,Tn,In,Fn,Ln,zn;const Qn=["banner","banner-align","page-icon","icon"],Jn="https://wallpaperaccess.com/full/1146672.jpg",Vn="https://images.unsplash.com/photo-1646026371686-79950ceb6daa?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1034&q=80",Zn='<iframe id="banner-widgets-pomo" src="https://pomofocus.io/app"></iframe>',Kn=[{key:"generalHeading",title:"\u2699 General settings",type:"heading"},{key:"hidePluginProps",title:"",description:"Hide plugin related page props? (will be shown only on edit)",type:"boolean",default:!0},{key:"widgetsCalendarHeading",title:"\u{1F4C5} Widgets: calendar",type:"heading"},{key:"widgetsCalendarEnabled",title:"Show calendar?",description:"\u26A0 check readme for instructions! https://github.com/yoyurec/logseq-banners-plugin",type:"enum",enumPicker:"radio",enumChoices:["off","journals","everywhere"],default:"journals"},{key:"widgetsCalendarWidth",title:"Block calendar widget width (in px)",description:"",type:"string",default:"380px"},{key:"widgetsWeatherHeading",title:"\u26C5 Widgets: weather",type:"heading"},{key:"widgetsWeatherEnabled",title:"Show weather?",description:"\u26A0 check readme for instructions! https://github.com/yoyurec/logseq-banners-plugin",type:"enum",enumPicker:"radio",enumChoices:["off","journals","everywhere"],default:"journals"},{key:"widgetsWeatherID",title:"Weather ID",description:"",type:"string",default:"7QOWaH4IPGGaAr4puql2"},{key:"widgetsQuoteHeading",title:"\u{1F4AC} Widgets: quote",type:"heading"},{key:"widgetsQuoteEnabled",title:"Show random #quote?",description:"\u26A0 check readme for instructions! https://github.com/yoyurec/logseq-banners-plugin",type:"enum",enumPicker:"radio",enumChoices:["off","journals","everywhere"],default:"journals"},{key:"widgetsQuoteTag",title:"Show random quotes with this tag (case sensitive!)",description:"",type:"string",default:"#quote"},{key:"widgetsQuoteMaxWidth",title:"Quote width limit (in chars)",description:"",type:"string",default:"48ch"},{key:"widgetsQuoteSize",title:"Quote font size (relative to default calculated, in %)",description:"",type:"string",default:"100%"},{key:"widgetsQuoteCleanupRegEx",title:"Cleanup RegEx for quote text",description:"",type:"string",default:"(^(TODO|NOW))|(id::.*)|(SCHEDULED:.<.*>)"},{key:"widgetsCustomHeading",title:"\u{1F4CA} Widgets: custom",type:"heading"},{key:"widgetsCustomEnabled",title:"Show custom?",description:"\u26A0 check readme for instructions! https://github.com/yoyurec/logseq-banners-plugin",type:"enum",enumPicker:"radio",enumChoices:["off","journals","everywhere"],default:"everywhere"},{key:"widgetsCustomCode",title:"",description:"Show custom HTML (iframe for ex.) as widget",type:"string",default:Zn},{key:"journalHeading",title:"\u{1F4C6} Journal and home settings",type:"heading"},{key:"defaultJournalBanner",title:"Default banner for journal and home page (set empty to disable)",description:"",type:"string",default:Vn},{key:"journalBannerHeight",title:"Banner height for journal & home page",description:"",type:"string",default:"280px"},{key:"journalBannerAlign",title:"Default banner vertical align for journal and home page",description:"",type:"string",default:"50%"},{key:"defaultJournalIcon",title:"Default icon (emoji) for journal and home page (set empty to disable)",description:"",type:"string",default:"\u{1F4C5}"},{key:"journalIconWidth",title:"Icon width for journal & home page (in px)",description:"",type:"string",default:"50px"},{key:"pageHeading",title:"\u{1F4C4} Common page settings",type:"heading"},{key:"defaultPageBanner",title:"Default banner for common page (set empty to disable)",description:"",type:"string",default:Jn},{key:"pageBannerHeight",title:"Banner height for common page",description:"",type:"string",default:"280px"},{key:"pageBannerAlign",title:"Default banner vertical align for common page",description:"",type:"string",default:"50%"},{key:"defaultPageIcon",title:"Default icon (emoji) for common page (set empty to disable)",description:"",type:"string",default:"\u{1F4C4}"},{key:"pageIconWidth",title:"Icon width for common page (in px)",description:"",type:"string",default:"40px"},{key:"advancedHeading",title:"Advanced settings",type:"heading"},{key:"customPropsConfig",title:"Advanced custom pages banners and icons config",description:"",type:"object",default:{pageType:{evrgrn:{pageIcon:"\u{1F333}",banner:"https://images.unsplash.com/photo-1502082553048-f009c37129b9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",bannerHeight:"200px",bannerAlign:"50%"},seed:{pageIcon:"\u{1F331}",banner:"https://images.unsplash.com/photo-1631949454967-6c6d07fb59cd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",bannerHeight:"200px",bannerAlign:"50%"}},anotherCamalCasedPropName:{}}},{key:"timeout",title:"Banner render timeout",description:"If your Logseq pages too slow and render glitches - try set bigger value...500, 1000, 1500 (milliseconds). Caution! Banners will render slower (but morre stable)!",type:"number",default:"100"}],Yn=()=>{logseq.provideStyle(Gn)},Bn=()=>{jr()},Hn=()=>{In=!1,Fn=!1,Tn={...Y},Y={calendar:{},weather:{},quote:{},custom:{}},ue={page:{},journal:{}},logseq.settings&&({hidePluginProps:zn,widgetsCalendarEnabled:Y.calendar.enabled,widgetsCalendarWidth:Y.calendar.width,widgetsWeatherEnabled:Y.weather.enabled,widgetsWeatherID:Y.weather.id,widgetsQuoteEnabled:Y.quote.enabled,widgetsQuoteTag:Y.quote.tag,widgetsQuoteMaxWidth:Y.quote.maxwidth,widgetsQuoteSize:Y.quote.size,widgetsQuoteCleanupRegEx:Y.quote.cleanup,widgetsCustomEnabled:Y.custom.enabled,widgetsCustomCode:Y.custom.code,defaultPageBanner:ue.page.banner,pageBannerHeight:ue.page.bannerHeight,pageBannerAlign:ue.page.bannerAlign,defaultPageIcon:ue.page.pageIcon,pageIconWidth:ue.page.iconWidth,defaultJournalBanner:ue.journal.banner,journalBannerHeight:ue.journal.bannerHeight,journalBannerAlign:ue.journal.bannerAlign,defaultJournalIcon:ue.journal.pageIcon,journalIconWidth:ue.journal.iconWidth,customPropsConfig:An,timeout:Ln}=logseq.settings),er()},Xn=()=>{Y.custom.code!==Tn.custom.code&&(In=!0),Y.weather.id!==Tn.weather.id&&(Fn=!0)},Rn=async u=>{let j;try{j=await fetch(u)}catch{return""}const J=await j.blob();return new Promise(V=>{const U=new FileReader;U.readAsDataURL(J),U.onloadend=()=>{const me=U.result;V(me)}})},er=async()=>{ue.page.banner&&!ue.page.banner?.includes("source.unsplash.com")&&(ue.page.banner=await Rn(ue.page.banner)),ue.journal.banner&&!ue.journal.banner?.includes("source.unsplash.com")&&(ue.journal.banner=await Rn(ue.journal.banner))},Dn=u=>{const j=document.createElement("canvas");j.height=1,j.width=1;const J=j.getContext("2d");J.fillStyle=u,J.fillRect(0,0,1,1);const V=J.getImageData(0,0,1,1).data;return`${V[0]}, ${V[1]}, ${V[2]}`},$n=()=>{const u=getComputedStyle(top.document.documentElement).getPropertyValue("--ls-primary-text-color").trim();je.style.setProperty("--widgetsTextColor",Dn(u));const j=getComputedStyle(top.document.documentElement).getPropertyValue("--ls-primary-background-color").trim();je.style.setProperty("--widgetsBgColor",Dn(j))},tr=()=>{const u=de.getElementsByClassName("page-property-key");if(u?.length)for(let j=0;j<u.length;j++){const J=u[j].textContent;J&&Qn.includes(J)&&(u[j].parentElement.parentElement.style.display=zn?"none":"block")}},nr=()=>{yn=!1,Je=!1;const u=st.getAttribute("data-page");u==="home"&&(Je=!0,yn=!1),u==="page"&&(yn=!0,Je=!1)},rr=async()=>{let u={...ue.journal},j={};if(Je)return console.info(`#${Be}: Homepage`),u;const J=await or();if(Et=J["journal?"],Et)return console.info(`#${Be}: Journal page`),u;if(console.info(`#${Be}: Trying page props`),j=J.properties,j){const V=ir(j);u={...ue.page,...V,...j}}else console.info(`#${Be}: Default page`),u={...ue.page};return J.name&&(u.title=J.name.split(" ").slice(0,3).join("-").replace(/[\])}[{(]/g,"")),console.info(`#${Be}: pageAssetsData -- `,u),u},or=async()=>{let u=null;if(u=await logseq.Editor.getCurrentPage(),u){const j=u.page?.id;j&&(u=null,u=await logseq.Editor.getPage(j))}return u},ir=u=>{console.info(`#${Be}: Trying custom JSON settings`);let j={};for(const J of Object.keys(An)){const V=u?.[J];if(V){const U=Array.isArray(V)?V[0]:V;U&&(j=An?.[J]?.[U])}}return j},ar=async u=>u.banner?(st.classList.add("is-banner-active"),je.style.setProperty("--bannerHeight",`${u.bannerHeight}`),je.style.setProperty("--bannerAlign",`${u.bannerAlign}`),u.banner=u.banner.replace(/^"(.*)"$/,"$1"),u.banner.startsWith("../")&&(u.banner=encodeURI("assets://"+bn?.path+u.banner.replace("..",""))),je.style.setProperty("--pageBanner",`url(${u.banner})`),!0):(On(),!1),sr=async u=>{const j=u.icon||u.pageIcon;j?(st.classList.add("is-icon-active"),je.style.setProperty("--iconWidth",`${u.iconWidth}`),je.style.setProperty("--pageIcon",`"${j}"`)):En()},On=()=>{st.classList.remove("is-banner-active"),je.style.setProperty("--pageBanner",""),je.style.setProperty("--bannerHeight",""),je.style.setProperty("--bannerAlign","")},En=()=>{st.classList.remove("is-icon-active"),je.style.setProperty("--pageIcon",""),je.style.setProperty("--iconWidth","")};let Nn,Pn;const lr=()=>{Nn={attributes:!0,attributeFilter:["class"],attributeOldValue:!0,subtree:!0};const u=function(j){for(let J=0;J<j.length;J++){if(j[J].oldValue?.includes("pre-block")){console.info(`#${Be}: page props - deleted`),Ut();return}j[J]?.target?.offsetParent?.classList.contains("pre-block")&&j[J].oldValue==="editor-wrapper"&&(console.info(`#${Be}: page props - edited or added`),Ut())}};Pn=new MutationObserver(u)},Un=()=>{const u=de.getElementsByClassName("content")[0]?.firstChild?.firstChild?.firstChild?.firstChild;u&&Pn.observe(u,Nn)},cr=()=>{Pn.disconnect()},ur=()=>{console.info(`#${Be}: page route changed`),cr(),Ut(),setTimeout(()=>{Un()},Ln)},dr=()=>{Hn(),Bn(),Xn(),Ut()},pr=()=>{setTimeout(()=>{$n()},300)},gr=async()=>{bn=await logseq.App.getCurrentGraph()},fr=()=>{top.document.getElementById("banner")?.remove(),st.classList.remove("is-banner-active"),st.classList.remove("is-icon-active")},hr=()=>{if(!de.getElementById("banner")){const u=de.getElementById("main-content-container");u&&u.insertAdjacentHTML("afterbegin",`<div id="banner">
          <div id="banner-widgets">
            <div id="banner-widgets-calendar"></div>
          </div>
        </div>`)}},mr=()=>{de.getElementById("banner").style.display="block"},yr=()=>{de.getElementById("banner").style.display="none"},br=async()=>{const u=vr(),j=await wr();u||j?de.getElementById("banner-widgets")?.classList.add("banner-widgets-bg"):de.getElementById("banner-widgets")?.classList.remove("banner-widgets-bg"),xr(),kr()},vr=()=>{const u=de.getElementById("banner-widgets-calendar");return Y.calendar.enabled==="off"||Y.calendar.enabled==="journals"&&!(Je||Et)?(u.style.display="none",!1):(u.style.display="block",!0)},wr=async()=>{const u=de.getElementById("banner-widgets-weather");if(Y.weather.enabled==="off"||Y.weather.enabled==="journals"&&!(Je||Et))return u?.remove(),!1;if(!u||Fn){u?.remove();const j=await _r();de.getElementById("banner-widgets")?.insertAdjacentHTML("beforeend",`<div id="banner-widgets-weather">${j}</div>`)}return!0},_r=async()=>{const u=`https://indify.co/widgets/live/weather/${Y.weather.id}`;let j="",J=await fetch(u);if(J&&J.status===200){if(j=await J.text(),j){j=j.replace(/src="/g,'src="https://indify.co').replace(/flex-dir/g,"display:flex;flex-dir").replace(/__...../g,"");var V=new DOMParser,U=V.parseFromString(j,"text/html");U.getElementById("weatherTemp")?.remove(),j=U.querySelector("[class^=weather_container]")?.innerHTML||""}}else console.info(`#${Be}: HTTP-Error: ${J.status}`);return j},xr=async()=>{if(Y.quote.enabled==="off"||Y.quote.enabled==="journals"&&!(Je||Et)){de.getElementById("banner-widgets-quote")?.remove();return}const u=await Sr();if(!u){de.getElementById("banner-widgets-quote")?.remove();return}je.style.setProperty("--widgetsQuoteFS",Cr(u.length)),je.style.setProperty("--widgetsQuoteSize",Y.quote.size),je.style.setProperty("--widgetsQuoteMaxWidth",Y.quote.maxwidth);const j=de.getElementById("banner-widgets-quote-text");j?(j.remove(),de.getElementById("banner-widgets-quote-block")?.insertAdjacentHTML("beforeend",`<div id="banner-widgets-quote-text">${u}</div>`)):de.getElementById("banner-widgets")?.insertAdjacentHTML("beforeend",`<div id="banner-widgets-quote"><div id="banner-widgets-quote-block"><div id="banner-widgets-quote-text">${u}</div></div></div>`)},Cr=u=>u>200?"1.2em":u>150?"1.25em":"1.3em",Sr=async()=>{let u=`
    [
      :find ?content ?page-title
      :where
          [?id :block/content ?content]
          (or
              [(clojure.string/starts-with? ?content "${Y.quote.tag} ")]
              [(clojure.string/ends-with? ?content " ${Y.quote.tag}")]
          )
          [?id :block/page ?page-id]
          [?page-id :block/original-name ?page-title]
    ]
  `,j=await logseq.DB.datascriptQuery(u);if(!j.length)return"";const J=j[Math.floor(Math.random()*j.length)];let V=J[0];const U=new RegExp(`${Y.quote.tag}`,"gi");V=V.replace(U,"").replace(/\n/g,"").trim();const me=new RegExp(`${Y.quote.cleanup}`,"g");V=V.replace(me,"").trim(),V=V.replace(/(==)|(\^\^)/g,""),V=V.replace(/\*\*(.*)\*\*/g,"<b>$1</b>").replace(/\*(.*)\*/g,"<i>$1</i>").replace(/_(.*)_/g,"<i>$1</i>");const B=J[1];return V=`<a href=${encodeURI(`logseq://graph/${bn?.name}?page=${B}`)} title="${B}" id="banner-widgets-quote-link">${V}</a>`,V},kr=async()=>{const u=de.getElementById("banner-widgets-custom");if(Y.custom.enabled==="off"||Y.custom.enabled==="journals"&&!(Je||Et)){u?.remove();return}(!u||In)&&de.getElementById("banner-widgets")?.insertAdjacentHTML("beforeend",`<div id="banner-widgets-custom">${Y.custom.code}</div>`)},jr=()=>{setTimeout(()=>{$n()},300),je.style.setProperty("--widgetsCalendarWidth",Y.calendar.width)},Ut=async()=>{if(nr(),!(Je||yn)){On(),En();return}tr();let u=null;if(u=await rr(),u){if(!u.banner||u.banner==="false"||u.banner==="off"||u.banner==="none"||u.banner==='""'||u.banner==="''"){On(),En();return}await ar(u)&&(sr(u),br(),mr())}},Ar=async()=>{console.info(`#${Be}: MAIN`),bn=await logseq.App.getCurrentGraph(),logseq.useSettingsSchema(Kn),de=top.document,je=de.documentElement,st=de.body,Yn(),hr(),yr(),setTimeout(()=>{Hn(),Bn(),Ut()},Ln*2),lr(),setTimeout(()=>{Un(),logseq.App.onRouteChanged(async()=>{ur()}),logseq.onSettingsChanged(()=>{dr()}),logseq.App.onThemeModeChanged(()=>{pr()}),logseq.App.onCurrentGraphChanged(()=>{gr()}),logseq.beforeunload(async()=>{fr()})},4e3)};logseq.ready(Ar).catch(console.error);
//# sourceMappingURL=index.7f615bdf.js.map
