(function(){
shadow$provide[584]=function(va,V,Sa,I){function p(t,A,B){var z,K={},n=null,g=null;void 0!==B&&(n=""+B);void 0!==A.key&&(n=""+A.key);void 0!==A.ref&&(g=A.ref);for(z in A)m.call(A,z)&&!b.hasOwnProperty(z)&&(K[z]=A[z]);if(t&&t.defaultProps)for(z in A=t.defaultProps,A)void 0===K[z]&&(K[z]=A[z]);return{$$typeof:S,type:t,key:n,ref:g,props:K,_owner:w.current}}V(19);va=V(22);var S=60103;I.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(V=Symbol.for,S=V("react.element"),I.Fragment=V("react.fragment"));
var w=va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};I.jsx=p;I.jsxs=p};
shadow$provide[586]=function(va,V,Sa,I){Sa.exports=V(584)};
shadow$provide[587]=function(va,V,Sa,I){function p(mc){for(var Cd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+mc,od=1;od<arguments.length;od++)Cd+="\x26args[]\x3d"+encodeURIComponent(arguments[od]);return"Minified React error #"+mc+"; visit "+Cd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(mc){if(null==mc)return null;if("function"===typeof mc)return mc.displayName||mc.name||null;if("string"===typeof mc)return mc;
switch(mc){case M:return"Fragment";case Z:return"Portal";case C:return"Profiler";case Q:return"StrictMode";case aa:return"Suspense";case G:return"SuspenseList"}if("object"===typeof mc)switch(mc.$$typeof){case R:return(mc.displayName||"Context")+".Consumer";case O:return(mc._context.displayName||"Context")+".Provider";case ba:var Cd=mc.render;Cd=Cd.displayName||Cd.name||"";return mc.displayName||(""!==Cd?"ForwardRef("+Cd+")":"ForwardRef");case fa:return S(mc.type);case ca:return S(mc._render);case N:Cd=
mc._payload;mc=mc._init;try{return S(mc(Cd))}catch(od){}}return null}function w(mc,Cd){for(var od=mc._threadCount|0;od<=Cd;od++)mc[od]=mc._currentValue2,mc._threadCount=od+1}function m(mc,Cd,od,he){if(he&&(he=mc.contextType,"object"===typeof he&&null!==he))return w(he,od),he[od];if(mc=mc.contextTypes){od={};for(var id in mc)od[id]=Cd[id];Cd=od}else Cd=xa;return Cd}function b(mc){if(Da.call(Va,mc))return!0;if(Da.call(Oa,mc))return!1;if(Ta.test(mc))return Va[mc]=!0;Oa[mc]=!0;return!1}function t(mc,
Cd,od,he){if(null!==od&&0===od.type)return!1;switch(typeof Cd){case "function":case "symbol":return!0;case "boolean":if(he)return!1;if(null!==od)return!od.acceptsBooleans;mc=mc.toLowerCase().slice(0,5);return"data-"!==mc&&"aria-"!==mc;default:return!1}}function A(mc,Cd,od,he){if(null===Cd||"undefined"===typeof Cd||t(mc,Cd,od,he))return!0;if(he)return!1;if(null!==od)switch(od.type){case 3:return!Cd;case 4:return!1===Cd;case 5:return isNaN(Cd);case 6:return isNaN(Cd)||1>Cd}return!1}function B(mc,Cd,
od,he,id,Vd,ed){this.acceptsBooleans=2===Cd||3===Cd||4===Cd;this.attributeName=he;this.attributeNamespace=id;this.mustUseProperty=od;this.propertyName=mc;this.type=Cd;this.sanitizeURL=Vd;this.removeEmptyString=ed}function z(mc){return mc[1].toUpperCase()}function K(mc){if("boolean"===typeof mc||"number"===typeof mc)return""+mc;mc=""+mc;var Cd=ab.exec(mc);if(Cd){var od="",he,id=0;for(he=Cd.index;he<mc.length;he++){switch(mc.charCodeAt(he)){case 34:Cd="\x26quot;";break;case 38:Cd="\x26amp;";break;case 39:Cd=
"\x26#x27;";break;case 60:Cd="\x26lt;";break;case 62:Cd="\x26gt;";break;default:continue}id!==he&&(od+=mc.substring(id,he));id=he+1;od+=Cd}mc=id!==he?od+mc.substring(id,he):od}return mc}function n(mc,Cd){var od=Ma.hasOwnProperty(mc)?Ma[mc]:null,he;if(he="style"!==mc)he=null!==od?0===od.type:!(2<mc.length)||"o"!==mc[0]&&"O"!==mc[0]||"n"!==mc[1]&&"N"!==mc[1]?!1:!0;if(he||A(mc,Cd,od,!1))return"";if(null!==od){mc=od.attributeName;he=od.type;if(3===he||4===he&&!0===Cd)return mc+'\x3d""';od.sanitizeURL&&
(Cd=""+Cd);return mc+'\x3d"'+(K(Cd)+'"')}return b(mc)?mc+'\x3d"'+(K(Cd)+'"'):""}function g(mc,Cd){return mc===Cd&&(0!==mc||1/mc===1/Cd)||mc!==mc&&Cd!==Cd}function h(){if(null===na)throw Error(p(321));return na}function c(){if(0<yb)throw Error(p(312));return{memoizedState:null,queue:null,next:null}}function u(){null===qa?null===Aa?(za=!1,Aa=qa=c()):(za=!0,qa=Aa):null===qa.next?(za=!1,qa=qa.next=c()):(za=!0,qa=qa.next);return qa}function v(mc,Cd,od,he){for(;Ia;)Ia=!1,yb+=1,qa=null,od=mc(Cd,he);L();
return od}function L(){na=null;Ia=!1;Aa=null;yb=0;qa=Ra=null}function y(mc,Cd){return"function"===typeof Cd?Cd(mc):Cd}function r(mc,Cd,od){na=h();qa=u();if(za){var he=qa.queue;Cd=he.dispatch;if(null!==Ra&&(od=Ra.get(he),void 0!==od)){Ra.delete(he);he=qa.memoizedState;do he=mc(he,od.action),od=od.next;while(null!==od);qa.memoizedState=he;return[he,Cd]}return[qa.memoizedState,Cd]}mc=mc===y?"function"===typeof Cd?Cd():Cd:void 0!==od?od(Cd):Cd;qa.memoizedState=mc;mc=qa.queue={last:null,dispatch:null};
mc=mc.dispatch=f.bind(null,na,mc);return[qa.memoizedState,mc]}function q(mc,Cd){na=h();qa=u();Cd=void 0===Cd?null:Cd;if(null!==qa){var od=qa.memoizedState;if(null!==od&&null!==Cd){var he=od[1];a:if(null===he)he=!1;else{for(var id=0;id<he.length&&id<Cd.length;id++)if(!Na(Cd[id],he[id])){he=!1;break a}he=!0}if(he)return od[0]}}mc=mc();qa.memoizedState=[mc,Cd];return mc}function f(mc,Cd,od){if(!(25>yb))throw Error(p(301));if(mc===na)if(Ia=!0,mc={action:od,next:null},null===Ra&&(Ra=new Map),od=Ra.get(Cd),
void 0===od)Ra.set(Cd,mc);else{for(Cd=od;null!==Cd.next;)Cd=Cd.next;Cd.next=mc}}function J(){}function X(mc){switch(mc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function E(mc){if(void 0===mc||null===mc)return mc;var Cd="";D.Children.forEach(mc,function(od){null!=od&&(Cd+=od)});return Cd}function ia(mc,Cd){if(void 0===mc)throw Error(p(152,S(Cd)||"Component"));}function P(mc,Cd,od){function he(ed,
Pd){var Rb=Pd.prototype&&Pd.prototype.isReactComponent,gc=m(Pd,Cd,od,Rb),Yb=[],kb=!1,nb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Yb)return null},enqueueReplaceState:function(ue,sd){kb=!0;Yb=[sd]},enqueueSetState:function(ue,sd){if(null===Yb)return null;Yb.push(sd)}};if(Rb){if(Rb=new Pd(ed.props,gc,nb),"function"===typeof Pd.getDerivedStateFromProps){var dc=Pd.getDerivedStateFromProps.call(null,ed.props,Rb.state);null!=dc&&(Rb.state=W({},Rb.state,dc))}}else if(na={},
Rb=Pd(ed.props,gc,nb),Rb=v(Pd,ed.props,Rb,gc),null==Rb||null==Rb.render){mc=Rb;ia(mc,Pd);return}Rb.props=ed.props;Rb.context=gc;Rb.updater=nb;nb=Rb.state;void 0===nb&&(Rb.state=nb=null);if("function"===typeof Rb.UNSAFE_componentWillMount||"function"===typeof Rb.componentWillMount)if("function"===typeof Rb.componentWillMount&&"function"!==typeof Pd.getDerivedStateFromProps&&Rb.componentWillMount(),"function"===typeof Rb.UNSAFE_componentWillMount&&"function"!==typeof Pd.getDerivedStateFromProps&&Rb.UNSAFE_componentWillMount(),
Yb.length){nb=Yb;var uc=kb;Yb=null;kb=!1;if(uc&&1===nb.length)Rb.state=nb[0];else{dc=uc?nb[0]:Rb.state;var Qc=!0;for(uc=uc?1:0;uc<nb.length;uc++){var Yc=nb[uc];Yc="function"===typeof Yc?Yc.call(Rb,dc,ed.props,gc):Yc;null!=Yc&&(Qc?(Qc=!1,dc=W({},dc,Yc)):W(dc,Yc))}Rb.state=dc}}else Yb=null;mc=Rb.render();ia(mc,Pd);if("function"===typeof Rb.getChildContext&&(ed=Pd.childContextTypes,"object"===typeof ed)){var Kd=Rb.getChildContext(),fe;for(fe in Kd)if(!(fe in ed))throw Error(p(108,S(Pd)||"Unknown",fe));
}Kd&&(Cd=W({},Cd,Kd))}for(;D.isValidElement(mc);){var id=mc,Vd=id.type;if("function"!==typeof Vd)break;he(id,Vd)}return{child:mc,context:Cd}}var W=V(19),D=V(22),Z=60106,M=60107,Q=60108,C=60114,O=60109,R=60110,ba=60112,aa=60113,G=60120,fa=60115,N=60116,ca=60121,ha=60117,da=60119,pa=60129,ya=60131;"function"===typeof Symbol&&Symbol.for&&(va=Symbol.for,Z=va("react.portal"),M=va("react.fragment"),Q=va("react.strict_mode"),C=va("react.profiler"),O=va("react.provider"),R=va("react.context"),ba=va("react.forward_ref"),
aa=va("react.suspense"),G=va("react.suspense_list"),fa=va("react.memo"),N=va("react.lazy"),ca=va("react.block"),ha=va("react.fundamental"),da=va("react.scope"),pa=va("react.debug_trace_mode"),ya=va("react.legacy_hidden"));va=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var xa={},Ga=new Uint16Array(16);for(V=0;15>V;V++)Ga[V]=V+1;Ga[15]=0;var Ta=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Da=Object.prototype.hasOwnProperty,Oa={},Va={},Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(mc){Ma[mc]=new B(mc,0,!1,mc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(mc){var Cd=mc[0];Ma[Cd]=new B(Cd,1,!1,mc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(mc){Ma[mc]=
new B(mc,2,!1,mc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(mc){Ma[mc]=new B(mc,2,!1,mc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(mc){Ma[mc]=new B(mc,3,!1,mc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(mc){Ma[mc]=new B(mc,3,!0,mc,null,!1,!1)});["capture","download"].forEach(function(mc){Ma[mc]=new B(mc,4,!1,mc,null,!1,!1)});["cols","rows","size","span"].forEach(function(mc){Ma[mc]=new B(mc,6,!1,mc,null,!1,!1)});["rowSpan","start"].forEach(function(mc){Ma[mc]=new B(mc,5,!1,mc.toLowerCase(),null,!1,!1)});var bb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(mc){var Cd=
mc.replace(bb,z);Ma[Cd]=new B(Cd,1,!1,mc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(mc){var Cd=mc.replace(bb,z);Ma[Cd]=new B(Cd,1,!1,mc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(mc){var Cd=mc.replace(bb,z);Ma[Cd]=new B(Cd,1,!1,mc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(mc){Ma[mc]=new B(mc,1,!1,mc.toLowerCase(),null,!1,!1)});
Ma.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(mc){Ma[mc]=new B(mc,1,!1,mc.toLowerCase(),null,!0,!0)});var ab=/["'&<>]/,Na="function"===typeof Object.is?Object.is:g,na=null,Aa=null,qa=null,za=!1,Ia=!1,Ra=null,yb=0,hb=null,Kb={readContext:function(mc){var Cd=hb.threadID;w(mc,Cd);return mc[Cd]},useContext:function(mc){h();var Cd=hb.threadID;w(mc,Cd);return mc[Cd]},useMemo:q,useReducer:r,useRef:function(mc){na=
h();qa=u();var Cd=qa.memoizedState;return null===Cd?(mc={current:mc},qa.memoizedState=mc):Cd},useState:function(mc){return r(y,mc)},useLayoutEffect:function(){},useCallback:function(mc,Cd){return q(function(){return mc},Cd)},useImperativeHandle:J,useEffect:J,useDebugValue:J,useDeferredValue:function(mc){h();return mc},useTransition:function(){h();return[function(mc){mc()},!1]},useOpaqueIdentifier:function(){return(hb.identifierPrefix||"")+"R:"+(hb.uniqueID++).toString(36)},useMutableSource:function(mc,
Cd){h();return Cd(mc._source)}},Xb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},kc=W({menuitem:!0},Xb),Pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lb=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(mc){lb.forEach(function(Cd){Cd=Cd+mc.charAt(0).toUpperCase()+mc.substring(1);Pa[Cd]=Pa[mc]})});var mb=/([A-Z])/g,ac=/^ms-/,Dc=D.Children.toArray,
Zc=va.ReactCurrentDispatcher,Jc={listing:!0,pre:!0,textarea:!0},Fb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,yc={},Tc={},bd=Object.prototype.hasOwnProperty,Id={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Ed=function(){function mc(od,he,id){D.isValidElement(od)?od.type!==M?od=[od]:(od=od.props.children,od=D.isValidElement(od)?[od]:Dc(od)):od=Dc(od);od={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:od,childIndex:0,context:xa,footer:""};
var Vd=Ga[0];if(0===Vd){var ed=Ga;Vd=ed.length;var Pd=2*Vd;if(!(65536>=Pd))throw Error(p(304));var Rb=new Uint16Array(Pd);Rb.set(ed);Ga=Rb;Ga[0]=Vd+1;for(ed=Vd;ed<Pd-1;ed++)Ga[ed]=ed+1;Ga[Pd-1]=0}else Ga[0]=Ga[Vd];this.threadID=Vd;this.stack=[od];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=he;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=id&&id.identifierPrefix||""}
var Cd=mc.prototype;Cd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var od=this.threadID;Ga[od]=Ga[0];Ga[0]=od}};Cd.pushProvider=function(od){var he=++this.contextIndex,id=od.type._context,Vd=this.threadID;w(id,Vd);var ed=id[Vd];this.contextStack[he]=id;this.contextValueStack[he]=ed;id[Vd]=od.props.value};Cd.popProvider=function(){var od=this.contextIndex,he=this.contextStack[od],id=this.contextValueStack[od];this.contextStack[od]=null;this.contextValueStack[od]=
null;this.contextIndex--;he[this.threadID]=id};Cd.clearProviders=function(){for(var od=this.contextIndex;0<=od;od--)this.contextStack[od][this.threadID]=this.contextValueStack[od]};Cd.read=function(od){if(this.exhausted)return null;var he=hb;hb=this;var id=Zc.current;Zc.current=Kb;try{for(var Vd=[""],ed=!1;Vd[0].length<od;){if(0===this.stack.length){this.exhausted=!0;var Pd=this.threadID;Ga[Pd]=Ga[0];Ga[0]=Pd;break}var Rb=this.stack[this.stack.length-1];if(ed||Rb.childIndex>=Rb.children.length){var gc=
Rb.footer;""!==gc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Rb.type)this.currentSelectValue=null;else if(null!=Rb.type&&null!=Rb.type.type&&Rb.type.type.$$typeof===O)this.popProvider(Rb.type);else if(Rb.type===aa){this.suspenseDepth--;var Yb=Vd.pop();if(ed){ed=!1;var kb=Rb.fallbackFrame;if(!kb)throw Error(p(303));this.stack.push(kb);Vd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Vd[this.suspenseDepth]+=Yb}Vd[this.suspenseDepth]+=gc}else{var nb=Rb.children[Rb.childIndex++],
dc="";try{dc+=this.render(nb,Rb.context,Rb.domNamespace)}catch(uc){if(null!=uc&&"function"===typeof uc.then)throw Error(p(294));throw uc;}finally{}Vd.length<=this.suspenseDepth&&Vd.push("");Vd[this.suspenseDepth]+=dc}}return Vd[0]}finally{Zc.current=id,hb=he,L()}};Cd.render=function(od,he,id){if("string"===typeof od||"number"===typeof od){id=""+od;if(""===id)return"";if(this.makeStaticMarkup)return K(id);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+K(id);this.previousWasTextNode=!0;return K(id)}he=
P(od,he,this.threadID);od=he.child;he=he.context;if(null===od||!1===od)return"";if(!D.isValidElement(od)){if(null!=od&&null!=od.$$typeof){id=od.$$typeof;if(id===Z)throw Error(p(257));throw Error(p(258,id.toString()));}od=Dc(od);this.stack.push({type:null,domNamespace:id,children:od,childIndex:0,context:he,footer:""});return""}var Vd=od.type;if("string"===typeof Vd)return this.renderDOM(od,he,id);switch(Vd){case ya:case pa:case Q:case C:case G:case M:return od=Dc(od.props.children),this.stack.push({type:null,
domNamespace:id,children:od,childIndex:0,context:he,footer:""}),"";case aa:throw Error(p(294));case da:throw Error(p(343));}if("object"===typeof Vd&&null!==Vd)switch(Vd.$$typeof){case ba:na={};var ed=Vd.render(od.props,od.ref);ed=v(Vd.render,od.props,ed,od.ref);ed=Dc(ed);this.stack.push({type:null,domNamespace:id,children:ed,childIndex:0,context:he,footer:""});return"";case fa:return od=[D.createElement(Vd.type,W({ref:od.ref},od.props))],this.stack.push({type:null,domNamespace:id,children:od,childIndex:0,
context:he,footer:""}),"";case O:return Vd=Dc(od.props.children),id={type:od,domNamespace:id,children:Vd,childIndex:0,context:he,footer:""},this.pushProvider(od),this.stack.push(id),"";case R:Vd=od.type;ed=od.props;var Pd=this.threadID;w(Vd,Pd);Vd=Dc(ed.children(Vd[Pd]));this.stack.push({type:od,domNamespace:id,children:Vd,childIndex:0,context:he,footer:""});return"";case ha:throw Error(p(338));case N:return Vd=od.type,ed=Vd._init,Vd=ed(Vd._payload),od=[D.createElement(Vd,W({ref:od.ref},od.props))],
this.stack.push({type:null,domNamespace:id,children:od,childIndex:0,context:he,footer:""}),""}throw Error(p(130,null==Vd?Vd:typeof Vd,""));};Cd.renderDOM=function(od,he,id){var Vd=od.type.toLowerCase();"http://www.w3.org/1999/xhtml"===id&&X(Vd);if(!yc.hasOwnProperty(Vd)){if(!Fb.test(Vd))throw Error(p(65,Vd));yc[Vd]=!0}var ed=od.props;if("input"===Vd)ed=W({type:void 0},ed,{defaultChecked:void 0,defaultValue:void 0,value:null!=ed.value?ed.value:ed.defaultValue,checked:null!=ed.checked?ed.checked:ed.defaultChecked});
else if("textarea"===Vd){var Pd=ed.value;if(null==Pd){Pd=ed.defaultValue;var Rb=ed.children;if(null!=Rb){if(null!=Pd)throw Error(p(92));if(Array.isArray(Rb)){if(!(1>=Rb.length))throw Error(p(93));Rb=Rb[0]}Pd=""+Rb}null==Pd&&(Pd="")}ed=W({},ed,{value:void 0,children:""+Pd})}else if("select"===Vd)this.currentSelectValue=null!=ed.value?ed.value:ed.defaultValue,ed=W({},ed,{value:void 0});else if("option"===Vd){Rb=this.currentSelectValue;var gc=E(ed.children);if(null!=Rb){var Yb=null!=ed.value?ed.value+
"":gc;Pd=!1;if(Array.isArray(Rb))for(var kb=0;kb<Rb.length;kb++){if(""+Rb[kb]===Yb){Pd=!0;break}}else Pd=""+Rb===Yb;ed=W({selected:void 0,children:void 0},ed,{selected:Pd,children:gc})}}if(Pd=ed){if(kc[Vd]&&(null!=Pd.children||null!=Pd.dangerouslySetInnerHTML))throw Error(p(137,Vd));if(null!=Pd.dangerouslySetInnerHTML){if(null!=Pd.children)throw Error(p(60));if(!("object"===typeof Pd.dangerouslySetInnerHTML&&"__html"in Pd.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=Pd.style&&"object"!==
typeof Pd.style)throw Error(p(62));}Pd=ed;Rb=this.makeStaticMarkup;gc=1===this.stack.length;Yb="\x3c"+od.type;a:if(-1===Vd.indexOf("-"))kb="string"===typeof Pd.is;else switch(Vd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":kb=!1;break a;default:kb=!0}for(sd in Pd)if(bd.call(Pd,sd)){var nb=Pd[sd];if(null!=nb){if("style"===sd){var dc=void 0,uc="",Qc="";for(dc in nb)if(nb.hasOwnProperty(dc)){var Yc=
0===dc.indexOf("--"),Kd=nb[dc];if(null!=Kd){if(Yc)var fe=dc;else if(fe=dc,Tc.hasOwnProperty(fe))fe=Tc[fe];else{var ue=fe.replace(mb,"-$1").toLowerCase().replace(ac,"-ms-");fe=Tc[fe]=ue}uc+=Qc+fe+":";Qc=dc;Yc=null==Kd||"boolean"===typeof Kd||""===Kd?"":Yc||"number"!==typeof Kd||0===Kd||Pa.hasOwnProperty(Qc)&&Pa[Qc]?(""+Kd).trim():Kd+"px";uc+=Yc;Qc=";"}}nb=uc||null}dc=null;kb?Id.hasOwnProperty(sd)||(dc=sd,dc=b(dc)&&null!=nb?dc+'\x3d"'+(K(nb)+'"'):""):dc=n(sd,nb);dc&&(Yb+=" "+dc)}}Rb||gc&&(Yb+=' data-reactroot\x3d""');
var sd=Yb;Pd="";Xb.hasOwnProperty(Vd)?sd+="/\x3e":(sd+="\x3e",Pd="\x3c/"+od.type+"\x3e");a:{Rb=ed.dangerouslySetInnerHTML;if(null!=Rb){if(null!=Rb.__html){Rb=Rb.__html;break a}}else if(Rb=ed.children,"string"===typeof Rb||"number"===typeof Rb){Rb=K(Rb);break a}Rb=null}null!=Rb?(ed=[],Jc.hasOwnProperty(Vd)&&"\n"===Rb.charAt(0)&&(sd+="\n"),sd+=Rb):ed=Dc(ed.children);od=od.type;id=null==id||"http://www.w3.org/1999/xhtml"===id?X(od):"http://www.w3.org/2000/svg"===id&&"foreignObject"===od?"http://www.w3.org/1999/xhtml":
id;this.stack.push({domNamespace:id,type:Vd,children:ed,childIndex:0,context:he,footer:Pd});this.previousWasTextNode=!1;return sd};return mc}();I.renderToNodeStream=function(){throw Error(p(207));};I.renderToStaticMarkup=function(mc,Cd){mc=new Ed(mc,!0,Cd);try{return mc.read(Infinity)}finally{mc.destroy()}};I.renderToStaticNodeStream=function(){throw Error(p(208));};I.renderToString=function(mc,Cd){mc=new Ed(mc,!1,Cd);try{return mc.read(Infinity)}finally{mc.destroy()}};I.version="17.0.2"};
shadow$provide[589]=function(va,V,Sa,I){Sa.exports=V(587)};
shadow$provide[590]=function(va,V,Sa,I){function p(){if(!wr&&(wr="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!wr))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wr(zu)}function S(a,d=0){return(sm[a[d+0]]+sm[a[d+1]]+sm[a[d+2]]+sm[a[d+3]]+"-"+sm[a[d+4]]+sm[a[d+5]]+"-"+sm[a[d+6]]+sm[a[d+7]]+"-"+sm[a[d+8]]+sm[a[d+9]]+"-"+sm[a[d+10]]+sm[a[d+11]]+sm[a[d+12]]+sm[a[d+13]]+sm[a[d+14]]+
sm[a[d+15]]).toLowerCase()}function w(a){let d=0;var k=0;for(var F of a)d+=F.w*F.h,k=Math.max(k,F.w);a.sort((oa,Fa)=>Fa.h-oa.h);k=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),k),h:Infinity}];let Y=F=0;for(const oa of a)for(a=k.length-1;0<=a;a--){var ka=k[a];if(!(oa.w>ka.w||oa.h>ka.h)){oa.x=ka.x;oa.y=ka.y;Y=Math.max(Y,oa.y+oa.h);F=Math.max(F,oa.x+oa.w);oa.w===ka.w&&oa.h===ka.h?(ka=k.pop(),a<k.length&&(k[a]=ka)):oa.h===ka.h?(ka.x+=oa.w,ka.w-=oa.w):(oa.w!==ka.w&&k.push({x:ka.x+oa.w,y:ka.y,w:ka.w-
oa.w,h:oa.h}),ka.y+=oa.h,ka.h-=oa.h);break}}return{w:F,h:Y,fill:d/(F*Y)||0}}function m(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function b(a,d,k=0){const F=[a[0]+d[0]/2,a[1]+d[1]/2],Y=Dd.rotWith(a,F,k),ka=Dd.rotWith(Dd.add(a,[d[0],0]),F,k),oa=Dd.rotWith(Dd.add(a,d),F,k);a=Dd.rotWith(Dd.add(a,[0,d[1]]),F,k);return[["top",[Y,ka]],["right",[ka,oa]],["bottom",[oa,a]],["left",[a,Y]]]}function t(a,d,k,F){const [Y,ka]=a,[oa,Fa]=d,[Qa,Wa]=k,[eb,jb]=F;return Fa/oa!==(jb-Wa)/(eb-Qa)&&(d=oa*
(jb-Wa)-Fa*(eb-Qa),0!==d&&(a=((ka-Wa)*(eb-Qa)-(Y-Qa)*(jb-Wa))/d,d=((ka-Wa)*oa-(Y-Qa)*Fa)/d,0<=a&&0<=d&&1>=d))?m("intersection",[Y+a*oa,ka+a*Fa]):m("no intersection")}function A(a,d,k,F,Y=0){return h(k,F,Y,a,d)}function B(a,d,k,F=0){const {minX:Y,minY:ka,width:oa,height:Fa}=k;return A(a,d,[Y,ka],[oa,Fa],F)}function z(a,d,k,F){var Y=Dd.sub(a,k);k=Dd.sub(F,k);d=Dd.sub(d,a);F=k[0]*Y[1]-k[1]*Y[0];Y=d[0]*Y[1]-d[1]*Y[0];k=k[1]*d[0]-k[0]*d[1];return 0===F||0===Y?m("coincident"):0===k?m("parallel"):0!==k&&
(F/=k,Y/=k,0<=F&&1>=F&&0<=Y&&1>=Y)?m("intersection",Dd.add(a,Dd.mul(d,F))):m("no intersection")}function K(a,d,k,F){var Y=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),ka=2*((d[0]-a[0])*(a[0]-k[0])+(d[1]-a[1])*(a[1]-k[1]));k=ka*ka-4*Y*(k[0]*k[0]+k[1]*k[1]+a[0]*a[0]+a[1]*a[1]-2*(k[0]*a[0]+k[1]*a[1])-F*F);if(0>k)return m("outside");if(0===k)return m("tangent");F=Math.sqrt(k);k=(-ka+F)/(2*Y);Y=(-ka-F)/(2*Y);if((0>k||1<k)&&(0>Y||1<Y))return 0>k&&0>Y||1<k&&1<Y?m("outside"):m("inside");ka=[];0<=k&&1>=
k&&ka.push(Dd.lrp(a,d,k));0<=Y&&1>=Y&&ka.push(Dd.lrp(a,d,Y));return m("intersection",...ka)}function n(a,d,k,F,Y,ka=0){if(0===F||0===Y||Dd.isEqual(a,d))return m("no intersection");F=0>F?F:-F;Y=0>Y?Y:-Y;a=Dd.sub(Dd.rotWith(a,k,-ka),k);d=Dd.sub(Dd.rotWith(d,k,-ka),k);var oa=Dd.sub(d,a),Fa=oa[0]*oa[0]/F/F+oa[1]*oa[1]/Y/Y;oa=2*a[0]*oa[0]/F/F+2*a[1]*oa[1]/Y/Y;const Qa=[];F=oa*oa-4*Fa*(a[0]*a[0]/F/F+a[1]*a[1]/Y/Y-1);0===F?Qa.push(-oa/2/Fa):0<F&&(F=Math.sqrt(F),Qa.push((-oa+F)/2/Fa),Qa.push((-oa-F)/2/Fa));
Fa=Qa.filter(Wa=>0<=Wa&&1>=Wa).map(Wa=>Dd.add(k,Dd.add(a,Dd.mul(Dd.sub(d,a),Wa)))).map(Wa=>Dd.rotWith(Wa,k,ka));return m("intersection",...Fa)}function g(a,d,k){const F=[];for(let Y=1;Y<k.length;Y++){const ka=z(a,d,k[Y-1],k[Y]);ka&&F.push(...ka.points)}return 0===F.length?m("no intersection"):m("intersection",...k)}function h(a,d,k,F,Y){return b(a,d,k).reduce((ka,[oa,[Fa,Qa]])=>{(Fa=t(F,Y,Fa,Qa))&&ka.push(m(oa,...Fa.points));return ka},[]).filter(ka=>ka.didIntersect)}function c(a,d,k,F){return b(a,
d).reduce((Y,[ka,[oa,Fa]])=>{(oa=z(k,F,oa,Fa))&&Y.push(m(ka,...oa.points));return Y},[]).filter(Y=>Y.didIntersect)}function u(a,d,k,F){return b(a,d).reduce((Y,[ka,[oa,Fa]])=>{(oa=K(oa,Fa,k,F))&&Y.push(kf(me({},oa),{message:ka}));return Y},[]).filter(Y=>Y.didIntersect)}function v(a,d,k,F,Y,ka=0){return b(a,d).reduce((oa,[Fa,[Qa,Wa]])=>{(Qa=n(Qa,Wa,k,F,Y,ka))&&oa.push(kf(me({},Qa),{message:Fa}));return oa},[]).filter(oa=>oa.didIntersect)}function L(a,d,k){return b(a,d).reduce((F,[Y,[ka,oa]])=>{ka=g(ka,
oa,k);ka.didIntersect&&F.push(m(Y,...ka.points));return F},[]).filter(F=>F.didIntersect)}function y(a,d,k){return b(a,d).reduce((F,[Y,[ka,oa]])=>{{const Fa=[];for(let Qa=1;Qa<k.length+1;Qa++){const Wa=z(ka,oa,k[Qa-1],k[Qa%k.length]);Wa&&Fa.push(...Wa.points)}ka=0===Fa.length?m("no intersection"):m("intersection",...k)}ka.didIntersect&&F.push(m(Y,...ka.points));return F},[]).filter(F=>F.didIntersect)}function r(a,d,k,F=0,Y,ka){return d===k?u(Y,ka,a,d):v(Y,ka,a,d,k,F)}function q(a,d,k){const {minX:F,
minY:Y,width:ka,height:oa}=a;return c([F,Y],[ka,oa],d,k)}function f(a){for(var d=arguments.length,k=Array(1<d?d-1:0),F=1;F<d;F++)k[F-1]=arguments[F];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(k.length?" "+k.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function J(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof va?va:"undefined"!==
typeof self?self:px}function X(){Ca||f("Proxy not available")}function E(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function ia(a){return"function"===typeof a}function P(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function W(a){return null!==a&&"object"===typeof a}function D(a){if(!W(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return"function"===typeof a&&a.toString()===
db}function Z(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function M(a,d,k){Xp(a,d,{enumerable:!1,writable:!0,configurable:!0,value:k})}function Q(a,d,k){Xp(a,d,{enumerable:!1,writable:!1,configurable:!0,value:k})}function C(a,d){var k="isMobX"+a;d.prototype[k]=!0;return function(F){return W(F)&&!0===F[k]}}function O(a){return a instanceof Map}function R(a){return a instanceof Set}function ba(a){var d=Object.keys(a);if(!nc)return d;
var k=Object.getOwnPropertySymbols(a);return k.length?[].concat(d,k.filter(function(F){return sq.propertyIsEnumerable.call(a,F)})):d}function aa(a){return null===a?null:"object"===typeof a?""+a:a}function G(a,d){return sq.hasOwnProperty.call(a,d)}function fa(a,d){for(var k=0;k<d.length;k++){var F=d[k];F.enumerable=F.enumerable||!1;F.configurable=!0;"value"in F&&(F.writable=!0);Object.defineProperty(a,F.key,F)}}function N(a,d,k){d&&fa(a.prototype,d);k&&fa(a,k);Object.defineProperty(a,"prototype",{writable:!1});
return a}function ca(){ca=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],F;for(F in k)Object.prototype.hasOwnProperty.call(k,F)&&(a[F]=k[F])}return a};return ca.apply(this,arguments)}function ha(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;da(a,d)}function da(a,d){da=Object.setPrototypeOf||function(k,F){k.__proto__=F;return k};return da(a,d)}function pa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function ya(a,d){if(a){if("string"===typeof a)return xa(a,d);var k=Object.prototype.toString.call(a).slice(8,-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return xa(a,d)}}function xa(a,d){if(null==d||d>a.length)d=a.length;for(var k=0,F=Array(d);k<d;k++)F[k]=a[k];return F}function Ga(a,d){var k="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=
k.call(a)).next.bind(k);if(Array.isArray(a)||(k=ya(a))||d&&a&&"number"===typeof a.length){k&&(a=k);var F=0;return function(){return F>=a.length?{done:!0}:{done:!1,value:a[F++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ta(a){return Object.assign(function(d,k){Da(d,k,a)},a)}function Da(a,d,k){G(a,Od)||M(a,Od,ca({},a[Od]));k.annotationType_!==$g&&(a[Od][d]=k)}function Oa(a){G(a,
Od)||M(a,Od,ca({},a[Od]));return a[Od]}function Va(a,d,k){void 0===d&&(d=Gb);void 0===k&&(k=Gb);a=new sg(a);d!==Gb&&cd(fE,a,d,void 0);k!==Gb&&Nc(a,k);return a}function Ma(a,d,k){return hd(a)?a:Array.isArray(a)?Te.array(a,{name:k}):D(a)?Te.object(a,void 0,{name:k}):O(a)?Te.map(a,{name:k}):R(a)?Te.set(a,{name:k}):"function"!==typeof a||Yc(a)||Bc(a)?a:Z(a)?Hu(a):Gu(k,a)}function bb(a){return a}function ab(a,d){return{annotationType_:a,options_:d,make_:Na,extend_:na}}function Na(a,d,k,F){var Y;if(null!=
(Y=this.options_)&&Y.bound)return null===this.extend_(a,d,k,!1)?0:1;if(F===a.target_)return null===this.extend_(a,d,k,!1)?0:2;if(Yc(k.value))return 1;a=Aa(a,this,d,k,!1);Xp(F,d,a);return 2}function na(a,d,k,F){k=Aa(a,this,d,k);return a.defineProperty_(d,k,F)}function Aa(a,d,k,F,Y){var ka,oa,Fa,Qa,Wa,eb,jb;void 0===Y&&(Y=Nf.safeDescriptors);F=F.value;if(null!=(ka=d.options_)&&ka.bound){var Mb;F=F.bind(null!=(Mb=a.proxy_)?Mb:a.target_)}return{value:Jc(null!=(oa=null==(Fa=d.options_)?void 0:Fa.name)?
oa:k.toString(),F,null!=(Qa=null==(Wa=d.options_)?void 0:Wa.autoAction)?Qa:!1,null!=(eb=d.options_)&&eb.bound?null!=(jb=a.proxy_)?jb:a.target_:void 0),configurable:Y?a.isPlainObject_:!0,enumerable:!1,writable:Y?!1:!0}}function qa(a,d){return{annotationType_:a,options_:d,make_:za,extend_:Ia}}function za(a,d,k,F){var Y;if(F===a.target_)return null===this.extend_(a,d,k,!1)?0:2;if(null!=(Y=this.options_)&&Y.bound&&(!G(a.target_,d)||!Bc(a.target_[d]))&&null===this.extend_(a,d,k,!1))return 0;if(Bc(k.value))return 1;
a=Ra(a,this,d,k,!1,!1);Xp(F,d,a);return 2}function Ia(a,d,k,F){var Y;k=Ra(a,this,d,k,null==(Y=this.options_)?void 0:Y.bound);return a.defineProperty_(d,k,F)}function Ra(a,d,k,F,Y,ka){void 0===ka&&(ka=Nf.safeDescriptors);d=F.value;Bc(d)||(d=Hu(d));if(Y){var oa;d=d.bind(null!=(oa=a.proxy_)?oa:a.target_);d.isMobXFlow=!0}return{value:d,configurable:ka?a.isPlainObject_:!0,enumerable:!1,writable:ka?!1:!0}}function yb(a,d){return{annotationType_:a,options_:d,make_:hb,extend_:Kb}}function hb(a,d,k){return null===
this.extend_(a,d,k,!1)?0:1}function Kb(a,d,k,F){return a.defineComputedProperty_(d,ca({},this.options_,{get:k.get,set:k.set}),F)}function Xb(a,d){return{annotationType_:a,options_:d,make_:kc,extend_:Pa}}function kc(a,d,k){return null===this.extend_(a,d,k,!1)?0:1}function Pa(a,d,k,F){var Y,ka;return a.defineObservableProperty_(d,k.value,null!=(Y=null==(ka=this.options_)?void 0:ka.enhancer)?Y:Ma,F)}function lb(a){return{annotationType_:"true",options_:a,make_:mb,extend_:ac}}function mb(a,d,k,F){var Y,
ka;if(k.get)return Ef.make_(a,d,k,F);if(k.set){k=Jc(d.toString(),k.set);if(F===a.target_)return null===a.defineProperty_(d,{configurable:Nf.safeDescriptors?a.isPlainObject_:!0,set:k})?0:2;Xp(F,d,{configurable:!0,set:k});return 2}if(F!==a.target_&&"function"===typeof k.value){var oa;if(Z(k.value)){var Fa;return(null!=(Fa=this.options_)&&Fa.autoBind?Hu.bound:Hu).make_(a,d,k,F)}return(null!=(oa=this.options_)&&oa.autoBind?Gu.bound:Gu).make_(a,d,k,F)}oa=!1===(null==(Y=this.options_)?void 0:Y.deep)?Te.ref:
Te;if("function"===typeof k.value&&null!=(ka=this.options_)&&ka.autoBind){var Qa;k.value=k.value.bind(null!=(Qa=a.proxy_)?Qa:a.target_)}return oa.make_(a,d,k,F)}function ac(a,d,k,F){var Y,ka;if(k.get)return Ef.extend_(a,d,k,F);if(k.set)return a.defineProperty_(d,{configurable:Nf.safeDescriptors?a.isPlainObject_:!0,set:Jc(d.toString(),k.set)},F);if("function"===typeof k.value&&null!=(Y=this.options_)&&Y.autoBind){var oa;k.value=k.value.bind(null!=(oa=a.proxy_)?oa:a.target_)}return(!1===(null==(ka=
this.options_)?void 0:ka.deep)?Te.ref:Te).extend_(a,d,k,F)}function Dc(a){if(!0===a.deep)var d=Ma;else{if(!1===a.deep)a=bb;else{a=a.defaultDecorator;var k;a=a?null!=(d=null==(k=a.options_)?void 0:k.enhancer)?d:Ma:Ma}d=a}return d}function Zc(a,d,k){if(P(d))Da(a,d,re);else return hd(a)?a:D(a)?Te.object(a,d,k):Array.isArray(a)?Te.array(a,d):O(a)?Te.map(a,d):R(a)?Te.set(a,d):"object"===typeof a&&null!==a?a:Te.box(a,d)}function Jc(a,d,k,F){function Y(){a:{var ka=F||this,oa=arguments,Fa=Nf.trackingDerivation,
Qa=!k||!Fa;ed();var Wa=Nf.allowStateChanges;Qa&&(mc(),Wa=yc(!0));var eb=Cd(!0),jb=XD++,Mb=Qv;Qv=jb;try{var Ub=d.apply(ka,oa);break a}catch(jc){var Ob=jc;throw jc;}finally{Qv!==jb&&f(30),Qv=Mb,void 0!==Ob&&(Nf.suppressReactionErrors=!0),Nf.allowStateChanges=Wa,Nf.allowStateReads=eb,Pd(),Qa&&(Nf.trackingDerivation=Fa),Nf.suppressReactionErrors=!1}Ub=void 0}return Ub}void 0===k&&(k=!1);Y.isMobxAction=!0;YD&&(Az.value=a,Object.defineProperty(Y,"name",Az));return Y}function Fb(a,d){a=yc(a);try{return d()}finally{Nf.allowStateChanges=
a}}function yc(a){var d=Nf.allowStateChanges;Nf.allowStateChanges=a;return d}function Tc(a){switch(a.dependenciesState_){case ck.UP_TO_DATE_:return!1;case ck.NOT_TRACKING_:case ck.STALE_:return!0;case ck.POSSIBLY_STALE_:for(var d=Cd(!0),k=mc(),F=a.observing_,Y=F.length,ka=0;ka<Y;ka++){var oa=F[ka];if(Fu(oa)){if(Nf.disableErrorBoundaries)oa.get();else try{oa.get()}catch(Fa){return Nf.trackingDerivation=k,Nf.allowStateReads=d,!0}if(a.dependenciesState_===ck.STALE_)return Nf.trackingDerivation=k,Nf.allowStateReads=
d,!0}}od(a);Nf.trackingDerivation=k;Nf.allowStateReads=d;return!1}}function bd(a,d,k){var F=Cd(!0);od(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++Nf.runId;var Y=Nf.trackingDerivation;Nf.trackingDerivation=a;Nf.inBatch++;if(!0===Nf.disableErrorBoundaries)var ka=d.call(k);else try{ka=d.call(k)}catch(eb){ka=new Is(eb)}Nf.inBatch--;Nf.trackingDerivation=Y;var oa=a.observing_;d=a.observing_=a.newObserving_;k=ck.UP_TO_DATE_;Y=0;for(var Fa=a.unboundDepsCount_,Qa=0;Qa<
Fa;Qa++){var Wa=d[Qa];0===Wa.diffValue_&&(Wa.diffValue_=1,Y!==Qa&&(d[Y]=Wa),Y++);Wa.dependenciesState_>k&&(k=Wa.dependenciesState_)}d.length=Y;a.newObserving_=null;for(Fa=oa.length;Fa--;)Qa=oa[Fa],0===Qa.diffValue_&&id(Qa,a),Qa.diffValue_=0;for(;Y--;)oa=d[Y],1===oa.diffValue_&&(oa.diffValue_=0,Fa=a,oa.observers_.add(Fa),oa.lowestObserverState_>Fa.dependenciesState_&&(oa.lowestObserverState_=Fa.dependenciesState_));k!==ck.UP_TO_DATE_&&(a.dependenciesState_=k,a.onBecomeStale_());Nf.allowStateReads=
F;return ka}function Id(a){var d=a.observing_;a.observing_=[];for(var k=d.length;k--;)id(d[k],a);a.dependenciesState_=ck.NOT_TRACKING_}function Ed(a){var d=mc();try{return a()}finally{Nf.trackingDerivation=d}}function mc(){var a=Nf.trackingDerivation;Nf.trackingDerivation=null;return a}function Cd(a){var d=Nf.allowStateReads;Nf.allowStateReads=a;return d}function od(a){if(a.dependenciesState_!==ck.UP_TO_DATE_){a.dependenciesState_=ck.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
ck.UP_TO_DATE_}}function he(){(Nf.pendingReactions.length||Nf.inBatch||Nf.isRunningReactions)&&f(36);Bz=!0;if(Sv){var a=J();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);Nf=new Rv}}function id(a,d){a.observers_["delete"](d);0===a.observers_.size&&Vd(a)}function Vd(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,Nf.pendingUnobservations.push(a))}function ed(){Nf.inBatch++}function Pd(){if(0===--Nf.inBatch){0<Nf.inBatch||Nf.isRunningReactions||Tv(nb);for(var a=Nf.pendingUnobservations,
d=0;d<a.length;d++){var k=a[d];k.isPendingUnobservation_=!1;0===k.observers_.size&&(k.isBeingObserved_&&(k.isBeingObserved_=!1,k.onBUO()),k instanceof Eu&&k.suspend_())}Nf.pendingUnobservations=[]}}function Rb(a){var d=Nf.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&Nf.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<Nf.inBatch&&Vd(a);return!1}
function gc(a){a.lowestObserverState_!==ck.STALE_&&(a.lowestObserverState_=ck.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===ck.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=ck.STALE_}))}function Yb(a){a.lowestObserverState_!==ck.STALE_&&(a.lowestObserverState_=ck.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===ck.POSSIBLY_STALE_?d.dependenciesState_=ck.STALE_:d.dependenciesState_===ck.UP_TO_DATE_&&(a.lowestObserverState_=ck.UP_TO_DATE_)}))}function kb(a){a.lowestObserverState_===
ck.UP_TO_DATE_&&(a.lowestObserverState_=ck.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===ck.UP_TO_DATE_&&(d.dependenciesState_=ck.POSSIBLY_STALE_,d.onBecomeStale_())}))}function nb(){Nf.isRunningReactions=!0;for(var a=Nf.pendingReactions,d=0;0<a.length;){++d===bE&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var k=a.splice(0),F=0,Y=k.length;F<Y;F++)k[F].runReaction_()}Nf.isRunningReactions=!1}function dc(a){var d=Tv;Tv=function(k){return a(function(){return d(k)})}}
function uc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Qc(a){return function(d,k){if(ia(d))return Jc(d.name||"\x3cunnamed action\x3e",d,a);if(ia(k))return Jc(d,k,a);if(P(k))return Da(d,k,a?Ez:Dz);if(P(d))return Ta(ab(a?"autoAction":Cz,{name:d,autoAction:a}))}}function Yc(a){return ia(a)&&!0===a.isMobxAction}function Kd(a,d){function k(){a(Qa)}var F,Y;void 0===d&&(d=la);var ka=null!=(F=null==(Y=d)?void 0:Y.name)?F:"Autorun";if(d.scheduler||d.delay){var oa=
fe(d),Fa=!1;var Qa=new Ct(ka,function(){Fa||(Fa=!0,oa(function(){Fa=!1;Qa.isDisposed_||Qa.track(k)}))},d.onError,d.requiresObservable)}else Qa=new Ct(ka,function(){this.track(k)},d.onError,d.requiresObservable);Qa.schedule_();return Qa.getDisposer_()}function fe(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:eE}function ue(a,d,k){function F(){eb=!1;if(!Ob.isDisposed_){var jc=!1;Ob.track(function(){var vc=Fb(!1,function(){return a(Ob)});jc=Wa||!Ub(jb,vc);Mb=jb;
jb=vc});Wa&&k.fireImmediately?oa(jb,Mb,Ob):!Wa&&jc&&oa(jb,Mb,Ob);Wa=!1}}var Y;void 0===k&&(k=la);var ka=null!=(Y=k.name)?Y:"Reaction",oa=yg(ka,k.onError?sd(k.onError,d):d),Fa=!k.scheduler&&!k.delay,Qa=fe(k),Wa=!0,eb=!1,jb,Mb,Ub=k.compareStructural?of.structural:k.equals||of["default"],Ob=new Ct(ka,function(){Wa||Fa?F():eb||(eb=!0,Qa(F))},k.onError,k.requiresObservable);Ob.schedule_();return Ob.getDisposer_()}function sd(a,d){return function(){try{return d.apply(this,arguments)}catch(k){a.call(this,
k)}}}function Nc(a,d,k){return cd(gE,a,d,k)}function cd(a,d,k,F){var Y="function"===typeof F?Kg(d,k):Kg(d),ka=ia(F)?F:k,oa=a+"L";Y[oa]?Y[oa].add(ka):Y[oa]=new Set([ka]);return function(){var Fa=Y[oa];Fa&&(Fa["delete"](ka),0===Fa.size&&delete Y[oa])}}function Fc(a){!0===a.isolateGlobalState&&he();var d=a.useProxies,k=a.enforceActions;void 0!==d&&(Nf.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(Nf.verifyProxies=!0);void 0!==k&&(d="always"===k?"always":"observed"===
k,Nf.enforceActions=d,Nf.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(F){F in a&&(Nf[F]=!!a[F])});Nf.allowStateReads=!Nf.observableRequiresReaction;a.reactionScheduler&&dc(a.reactionScheduler)}function pc(a,d,k,F){var Y=$c(d),ka=yd(a,F)[ee];ed();try{Hc(Y).forEach(function(oa){ka.extend_(oa,Y[oa],k?oa in k?k[oa]:!0:!0)})}finally{Pd()}return a}function Qf(a){var d=
{name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(Qf));return d}function Wb(){this.message="FLOW_CANCELLED"}function Bc(a){return!0===(null==a?void 0:a.isMobXFlow)}function hd(a,d){return a?void 0!==d?se(a)?a[ee].values_.has(d):!1:se(a)||!!a[ee]||Ph(a)||Uv(a)||Fu(a):!1}function ge(a){if(se(a))return a[ee].ownKeys_();f(38)}function Df(a,d,k){a.set(d,k);return k}function He(a,d){if(null==a||"object"!==typeof a||a instanceof Date||!hd(a))return a;
if($D(a)||Fu(a))return He(a.get(),d);if(d.has(a))return d.get(a);if(ib(a)){var k=Df(d,a,Array(a.length));a.forEach(function(oa,Fa){k[Fa]=He(oa,d)});return k}if(Js(a)){var F=Df(d,a,new Set);a.forEach(function(oa){F.add(He(oa,d))});return F}if(Ir(a)){var Y=Df(d,a,new Map);a.forEach(function(oa,Fa){Y.set(Fa,He(oa,d))});return Y}var ka=Df(d,a,{});ge(a).forEach(function(oa){sq.propertyIsEnumerable.call(a,oa)&&(ka[oa]=He(a[oa],d))});return ka}function Ab(a,d){return He(a,new Map)}function zb(){f("trace() is not available in production builds");
for(var a=!1,d=arguments.length,k=Array(d),F=0;F<d;F++)k[F]=arguments[F];"boolean"===typeof k[k.length-1]&&(a=k.pop());a:{switch(k.length){case 0:d=Nf.trackingDerivation;break a;case 1:d=Kg(k[0]);break a;case 2:d=Kg(k[0],k[1]);break a}d=void 0}if(!d)return f("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===Bt.NONE&&console.log("[mobx.trace] '"+d.name_+"' tracing enabled");d.isTracing_=a?
Bt.BREAK:Bt.LOG}function xd(a,d){void 0===d&&(d=void 0);ed();try{return a.apply(d)}finally{Pd()}}function de(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function Vc(a,d){var k=a.interceptors_||(a.interceptors_=[]);k.push(d);return E(function(){var F=k.indexOf(d);-1!==F&&k.splice(F,1)})}function qc(a,d){var k=mc();try{var F=[].concat(a.interceptors_||[]);a=0;for(var Y=F.length;a<Y&&((d=F[a](d))&&!d.type&&f(14),d);a++);return d}finally{Nf.trackingDerivation=k}}function sf(a){return void 0!==
a.changeListeners_&&0<a.changeListeners_.length}function Sf(a,d){var k=a.changeListeners_||(a.changeListeners_=[]);k.push(d);return E(function(){var F=k.indexOf(d);-1!==F&&k.splice(F,1)})}function Ge(a,d){var k=mc();if(a=a.changeListeners_){a=a.slice();for(var F=0,Y=a.length;F<Y;F++)a[F](d);Nf.trackingDerivation=k}}function Qg(a,d,k){var F=yd(a,k)[ee];ed();try{var Y;null!=(Y=d)?Y:d=Oa(a);Hc(d).forEach(function(ka){return F.make_(ka,d[ka])})}finally{Pd()}return a}function ob(a,d,k,F){void 0===k&&(k=
"ObservableArray");void 0===F&&(F=!1);X();d=new tx(k,d,F,!1);Q(d.values_,ee,d);k=new Proxy(d.values_,kE);d.proxy_=k;a&&a.length&&(F=yc(!0),d.spliceWithArray_(0,0,a),Nf.allowStateChanges=F);return k}function wb(a,d){"function"===typeof Array.prototype[a]&&(Vv[a]=d(a))}function $a(a){return function(){var d=this[ee];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function Db(a){return function(d,k){var F=this,Y=this[ee];Y.atom_.reportObserved();return Y.dehanceValues_(Y.values_)[a](function(ka,
oa){return d.call(k,ka,oa,F)})}}function Cb(a){return function(){var d=this,k=this[ee];k.atom_.reportObserved();k=k.dehanceValues_(k.values_);var F=arguments[0];arguments[0]=function(Y,ka,oa){return F(Y,ka,oa,d)};return k[a].apply(k,arguments)}}function ib(a){return W(a)&&lE(a[ee])}function ad(a){if(O(a)||Ir(a))return a;if(Array.isArray(a))return new Map(a);if(D(a)){var d=new Map,k;for(k in a)d.set(k,a[k]);return d}return f(21,a)}function yd(a,d){var k;if(G(a,ee))return a;var F=null!=(k=null==d?void 0:
d.name)?k:"ObservableObject";k=Jz;var Y=new Map;F=String(F);var ka;var oa=d?null!=(ka=d.defaultDecorator)?ka:lb(d):void 0;d=new k(a,Y,F,oa);M(a,ee,d);return a}function $d(a){return Iz[a]||(Iz[a]={get:function(){return this[ee].getObservablePropValue_(a)},set:function(d){return this[ee].setObservablePropValue_(a,d)}})}function se(a){return W(a)?sE(a[ee]):!1}function cf(a){return{enumerable:!1,configurable:!0,get:function(){return this[ee].get_(a)},set:function(d){this[ee].set_(a,d)}}}function ze(a){if(a>
ux){for(var d=ux;d<a+100;d++)Xp(vx.prototype,""+d,cf(d));ux=a}}function tf(a,d,k){return new vx(a,d,k)}function Kg(a,d){if("object"===typeof a&&null!==a){if(ib(a))return void 0!==d&&f(23),a[ee].atom_;if(Js(a))return a[ee];if(Ir(a)){if(void 0===d)return a.keysAtom_;var k=a.data_.get(d)||a.hasMap_.get(d);k||f(25,d,ub(a));return k}if(se(a)){if(!d)return f(26);(k=a[ee].values_.get(d))||f(27,d,ub(a));return k}if(Ph(a)||Fu(a)||Uv(a))return a}else if(ia(a)&&Uv(a[ee]))return a[ee];f(28)}function tg(a,d){a||
f(29);if(void 0!==d)return tg(Kg(a,d));if(Ph(a)||Fu(a)||Uv(a)||Ir(a)||Js(a))return a;if(a[ee])return a[ee];f(24,a)}function ub(a,d){if(void 0!==d)a=Kg(a,d);else{if(Yc(a))return a.name;a=se(a)||Ir(a)||Js(a)?tg(a):Kg(a)}return a.name_}function ta(a,d,k){void 0===k&&(k=-1);return ra(a,d,k)}function ra(a,d,k,F,Y){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var ka=typeof a;if("function"!==ka&&"object"!==ka&&"object"!=typeof d)return!1;ka=Lz.call(a);if(ka!==Lz.call(d))return!1;
switch(ka){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=k&&k++}a=Ha(a);d=Ha(d);ka="[object Array]"===ka;if(!ka){if("object"!=typeof a||"object"!=typeof d)return!1;var oa=a.constructor,Fa=d.constructor;if(oa!==
Fa&&!(ia(oa)&&oa instanceof oa&&ia(Fa)&&Fa instanceof Fa)&&"constructor"in a&&"constructor"in d)return!1}if(0===k)return!1;0>k&&(k=-1);F=F||[];Y=Y||[];for(oa=F.length;oa--;)if(F[oa]===a)return Y[oa]===d;F.push(a);Y.push(d);if(ka){oa=a.length;if(oa!==d.length)return!1;for(;oa--;)if(!ra(a[oa],d[oa],k-1,F,Y))return!1}else{ka=Object.keys(a);oa=ka.length;if(Object.keys(d).length!==oa)return!1;for(;oa--;)if(Fa=ka[oa],!G(d,Fa)||!ra(a[Fa],d[Fa],k-1,F,Y))return!1}F.pop();Y.pop();return!0}function Ha(a){return ib(a)?
a.slice():O(a)||Ir(a)||R(a)||Js(a)?Array.from(a.entries()):a}function Za(a){a[Symbol.iterator]=Hb;return a}function Hb(){return this}function sc(a,d){const k=new Set(d),F=Object.values(a),Y=new Set(F.filter(ka=>k.has(ka.toId)||k.has(ka.fromId)));a=Y.size;for(d=-1;0!==d;)Y.forEach(ka=>{ka=ka.fromId;for(const oa of F)oa.fromId===ka&&Y.add(oa),oa.toId===ka&&Y.add(oa)}),d=Y.size-a,a=Y.size;return Array.from(Y.values())}function Oc(a,d,k,F,Y,ka,oa,Fa){if(Y=d.getBindingPoint(Y,ka,oa,Fa))return{id:F,type:"line",
fromId:a.id,toId:d.id,handleId:k,point:je.toFixed(Y.point),distance:Y.distance}}function fd(a,d){const k=a.getCenter(),F=d.getCenter();var Y=Uk();Y=kf(me({},Iu.defaultProps),{id:Y,type:Iu.id,parentId:a.props.parentId,point:k});a=Oc(Y,a,"start",Uk(),k,k,je.uni(je.sub(F,k)),!1);d=Oc(Y,d,"end",Uk(),F,F,je.uni(je.sub(k,F)),!1);return a&&d?(Y.handles.start.point=[0,0],Y.handles.end.point=je.sub(F,k),Y.handles.start.bindingId=a.id,Y.handles.end.bindingId=d.id,[Y,[a,d]]):null}function Ce(){return new BE}
function df(){return new WeakMap}function Le(a){if(!a)return Dx(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:Dx(a);if(~zE.call(d).indexOf("[native code]"))try{return new d}catch(k){}return Dx(a)}function ng(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function Xf(a){return a.flags}function Ng(a){a=AE.call(a);return a.substring(8,a.length-1)}function Yf(a){return a[Symbol.toStringTag]||Ng(a)}function gh(a){return xA(a).concat(Ex(a))}
function Ai(a,d,k){for(var F=IE(a),Y=0,ka=F.length,oa,Fa;Y<ka;++Y)if(oa=F[Y],"callee"!==oa&&"caller"!==oa)if(Fa=GE(a,oa)){Fa.get||Fa.set||(Fa.value=k.copier(Fa.value,k));try{FE(d,oa,Fa)}catch(Qa){d[oa]=Fa.value}}else d[oa]=k.copier(a[oa],k);return d}function zh(a,d){var k=new d.Constructor;d.cache.set(a,k);a.forEach(function(F,Y){k.set(Y,d.copier(F,d))});return k}function og(a,d){var k=Le(d.prototype);d.cache.set(a,k);for(var F in a)zA.call(a,F)&&(k[F]=d.copier(a[F],d));return k}function qi(a,d){var k=
Le(d.prototype);d.cache.set(a,k);for(var F in a)zA.call(a,F)&&(k[F]=d.copier(a[F],d));F=Ex(a);for(var Y=0,ka=F.length,oa;Y<ka;++Y)oa=F[Y],HE.call(a,oa)&&(k[oa]=d.copier(a[oa],d));return k}function sk(a,d){return new d.Constructor(a.valueOf())}function ij(a,d){return a}function ik(a,d){var k=new d.Constructor;d.cache.set(a,k);a.forEach(function(F){k.add(d.copier(F,d))});return k}function Bi(a){function d(ka,oa){oa.prototype=oa.Constructor=void 0;if(!ka||"object"!==typeof ka)return ka;if(oa.cache.has(ka))return oa.cache.get(ka);
oa.prototype=ka.__proto__||KE(ka);oa.Constructor=oa.prototype&&oa.prototype.constructor;if(!oa.Constructor||oa.Constructor===Object)return Y(ka,oa);if(JE(ka))return F(ka,oa);var Fa=k[EE(ka)];return Fa?Fa(ka,oa):"function"===typeof ka.then?ka:Y(ka,oa)}a=Fx({},BA,a);var k={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,Boolean:sk,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,
Int32Array:a.arrayBuffer,Map:a.map,Number:sk,Object:a.object,Promise:ij,RegExp:a.regExp,Set:a.set,String:sk,WeakMap:ij,WeakSet:ij,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},F=k.Array,Y=k.Object;return function(ka){return d(ka,{Constructor:void 0,cache:CE(),copier:d,prototype:void 0})}}function $k(a,d){return(0,OE.default)(a,d,{arrayMerge:(k,F,Y)=>F})}function Zl(a,d,k,F=!1){const [Y,ka]=d,[oa,Fa]=k;a=oa+(a-
Y)/(ka-Y)*(Fa-oa);return F?oa<Fa?Math.max(Math.min(a,Fa),oa):Math.max(Math.min(a,oa),Fa):a}function oj(a,d){return new Promise((k,F)=>{if("video"===d){const Y=document.createElement("video");Y.addEventListener("loadedmetadata",function(){k([this.videoWidth,this.videoHeight])},!1);Y.src=a}else if("image"===d){const Y=new Image;Y.onload=()=>k([Y.width,Y.height]);Y.src=a;Y.onerror=ka=>F(ka)}else"pdf"===d&&k([595,842])})}function $i(a){return Object.values(os).includes(a)}function bh(a,d){return $i(a)||
null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:a}function ul(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",
font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);return a}function Oj(a,d,k=0){var F,Y,ka;if(!a)return[16,32];let oa;oa="string"===typeof d?d:`${null!=(F=d.fontStyle)?F:"normal"} ${null!=(Y=d.fontVariant)?Y:"normal"} ${null!=(ka=d.fontWeight)?ka:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!Gx.has(`${a}-${oa}-${k}`)){if(!Lr)return[10,10];Lr.parentNode||document.body.appendChild(Lr);Lr.innerHTML=`${a}&#8203;`;Lr.style.font=oa;Lr.style.padding=
k+"px";d=Lr.getBoundingClientRect();Gx.set(`${a}-${oa}-${k}`,[Math.ceil(d.width||1),Math.ceil(d.height||1)])}return Gx.get(`${a}-${oa}-${k}`)}function Mk(a){try{if("string"!==typeof a||!Hg.test(a))throw TypeError("Invalid UUID");let d;const k=new Uint8Array(16);k[0]=(d=parseInt(a.slice(0,8),16))>>>24;k[1]=d>>>16&255;k[2]=d>>>8&255;k[3]=d&255;k[4]=(d=parseInt(a.slice(9,13),16))>>>8;k[5]=d&255;k[6]=(d=parseInt(a.slice(14,18),16))>>>8;k[7]=d&255;k[8]=(d=parseInt(a.slice(19,23),16))>>>8;k[9]=d&255;k[10]=
(d=parseInt(a.slice(24,36),16))/1099511627776&255;k[11]=d/4294967296&255;k[12]=d>>>24&255;k[13]=d>>>16&255;k[14]=d>>>8&255;k[15]=d&255;return!0}catch(d){return!1}}function bl(a,d=0,k){let F;return function(...Y){null==k?void 0:k(...Y);clearTimeout(F);F=setTimeout(()=>a.apply(Y),d)}}function Kh(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function If(){var a,d,k;return(null==(k=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:
k.call(d,"ui/developer-mode?"))||!1}function ig(a){return!!a}function Ql(a=0){return new Promise(d=>setTimeout(d,a))}function dn(a="noid"){Hx[a]||(Hx[a]=EA.createContext({}));return Hx[a]}function nh(a="noid"){return EA.useContext(dn(a))}function Xj(a){const {callbacks:d}=nh(),k=DA.useRef(-1);return DA.useMemo(()=>{const F=Y=>{var ka,oa;const {order:Fa=0}=Y;if(!Fa){var Qa=Y.target;Qa.removeEventListener("pointerup",F);Qa.releasePointerCapture(Y.pointerId);null==(ka=d.onPointerUp)?void 0:ka.call(d,
{type:"selection",handle:a,order:Fa},Y);ka=Date.now();Qa=ka-k.current;300<Qa?k.current=ka:300>=Qa&&(null==(oa=d.onDoubleClick)?void 0:oa.call(d,{type:"selection",handle:a,order:Fa},Y),k.current=-1);Y.order=Fa+1}};return{onPointerDown:Y=>{var ka;const {order:oa=0}=Y;if(!oa){var Fa=Ok(Y.currentTarget);Fa.setPointerCapture(Y.pointerId);Fa.addEventListener("pointerup",F);null==(ka=d.onPointerDown)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},Y);Y.order=oa+1}},onPointerMove:Y=>{var ka;const {order:oa=
0}=Y;oa||(null==(ka=d.onPointerMove)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},Y),Y.order=oa+1)},onPointerEnter:Y=>{var ka;const {order:oa=0}=Y;oa||(null==(ka=d.onPointerEnter)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},Y),Y.order=oa+1)},onPointerLeave:Y=>{var ka;const {order:oa=0}=Y;oa||(null==(ka=d.onPointerLeave)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},Y),Y.order=oa+1)},onKeyDown:Y=>{var ka;null==(ka=d.onKeyDown)?void 0:ka.call(d,{type:"selection",handle:a,
order:-1},Y)},onKeyUp:Y=>{var ka;null==(ka=d.onKeyUp)?void 0:ka.call(d,{type:"selection",handle:a,order:-1},Y)}}},[d])}function Ok(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return Ok(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function Pk(a,d,k){const F=Ku.useRef(!1),Y=Ku.useCallback(()=>{var ka;if(F.current){const oa=null==(ka=a.current)?void 0:ka.getBoundingClientRect();oa&&(ka={minX:oa.left,maxX:oa.left+oa.width,
minY:oa.top,maxY:oa.top+oa.height,width:oa.width,height:oa.height},d.updateBounds(ka),null==k?void 0:k(ka))}else F.current=!0},[a,k]);Ku.useEffect(()=>{const ka=a.current?RE(a.current):document,oa=bl(Y,100);ka.addEventListener("scroll",oa);window.addEventListener("resize",oa);return()=>{ka.removeEventListener("scroll",oa);window.removeEventListener("resize",oa)}},[]);Ku.useLayoutEffect(()=>{const ka=new ResizeObserver(oa=>{oa[0].contentRect&&Y()});a.current&&ka.observe(a.current);return()=>{ka.disconnect()}},
[a]);Ku.useEffect(()=>{Y();setTimeout(()=>{var ka,oa;null==(oa=null==(ka=a.current)?void 0:ka.querySelector(".tl-canvas"))?void 0:oa.focus()})},[a])}function $l(a,d){return Object.keys(d).reduce((k,F)=>{const Y=d[F];return Y?k+`${`--${a}-${F}`}: ${Y};
`:k},"")}function ri(a,d,k=".logseq-tldraw"){Ix.useLayoutEffect(()=>{const F=document.createElement("style"),Y=$l(a,d);F.setAttribute("id",`${a}-theme`);F.setAttribute("data-selector",k);F.innerHTML=`
        ${k} {
          ${Y}
        }
      `;document.head.appendChild(F);return()=>{F&&document.head.contains(F)&&document.head.removeChild(F)}},[a,d,k])}function wl(a,d){Ix.useLayoutEffect(()=>{if(Jx.get(a))return()=>{};const k=document.createElement("style");k.innerHTML=d;k.setAttribute("id",a);document.head.appendChild(k);Jx.set(a,k);return()=>{k&&document.head.contains(k)&&(document.head.removeChild(k),Jx.delete(a))}},[a,d])}function tk(a,d){const k=Ix.useMemo(()=>me(me({},SE),a),[a]);ri("tl",k,d);wl("tl-canvas",TE)}function uk(a=
"noid"){Kx[a]||(Kx[a]=GA.createContext({}));return Kx[a]}function ef(a="noid"){return GA.useContext(uk(a))}function ug(){const a=ef(),{callbacks:d}=nh(),k=FA.useRef(-1);return FA.useMemo(()=>({onPointerDown:F=>{var Y,ka,oa;const {order:Fa=0}=F;Fa||(null==(Y=F.currentTarget)?void 0:Y.setPointerCapture(F.pointerId));F.isPrimary&&(null==(ka=d.onPointerDown)?void 0:ka.call(d,{type:"canvas",order:Fa},F),Y=Date.now(),ka=Y-k.current,300<ka?k.current=Y:300>=ka&&(null==(oa=d.onDoubleClick)?void 0:oa.call(d,
{type:"canvas",order:Fa},F),k.current=-1))},onPointerMove:F=>{var Y;const {order:ka=0}=F;null==(Y=d.onPointerMove)?void 0:Y.call(d,{type:"canvas",order:ka},F)},onPointerUp:F=>{var Y,ka;const {order:oa=0}=F;oa||(null==(Y=F.currentTarget)?void 0:Y.releasePointerCapture(F.pointerId));null==(ka=d.onPointerUp)?void 0:ka.call(d,{type:"canvas",order:oa},F)},onPointerEnter:F=>{var Y;const {order:ka=0}=F;null==(Y=d.onPointerEnter)?void 0:Y.call(d,{type:"canvas",order:ka},F)},onPointerLeave:F=>{var Y;const {order:ka=
0}=F;null==(Y=d.onPointerLeave)?void 0:Y.call(d,{type:"canvas",order:ka},F)},onDrop:F=>vi(this,null,function*(){F.preventDefault();"clientX"in F&&a.drop(F.dataTransfer,[F.clientX,F.clientY])}),onDragOver:F=>{F.preventDefault()},onTouchEnd:F=>{let Y=a.selectedTool.id;"pencil"!==Y&&"highlighter"!==Y||F.preventDefault()}}),[d])}function pj(a,d,k){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*k):a*d*k/(d+k*a)}function Th(a,d,k,F=.15){return 0===F?Math.max(d,Math.min(a,k)):a<d?-pj(d-a,k-d,F)+d:a>k?
+pj(a-k,k-d,F)+k:a}function aj(a,[d,k],[F,Y]){const [[ka,oa],[Fa,Qa]]=a;return[Th(d,ka,oa,F),Th(k,Fa,Qa,Y)]}function ei(a,d,k){d in a?Object.defineProperty(a,d,{value:k,enumerable:!0,configurable:!0,writable:!0}):a[d]=k;return a}function jk(a,d){var k=Object.keys(a);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(a);d&&(F=F.filter(function(Y){return Object.getOwnPropertyDescriptor(a,Y).enumerable}));k.push.apply(k,F)}return k}function Lg(a){for(var d=1;d<arguments.length;d++){var k=
null!=arguments[d]?arguments[d]:{};d%2?jk(Object(k),!0).forEach(function(F){ei(a,F,k[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(k)):jk(Object(k)).forEach(function(F){Object.defineProperty(a,F,Object.getOwnPropertyDescriptor(k,F))})}return a}function Uh(a){return a?a[0].toUpperCase()+a.slice(1):""}function Dj(a=!1,d){return a&&!UE.includes(d)}function Qk(a,d="",k=!1){const F=HA[a];d=F?F[d]||d:d;return"on"+Uh(a)+Uh(d)+(Dj(k,d)?"Capture":"")}function wf(a){a=
a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var k=VE.includes(a)?"capturecapture":"capture";(k=!!~a.indexOf(k))&&(a=a.replace("capture",""));return{device:a,capture:k,passive:d}}function Si(a,d=""){const k=HA[a];return a+(k?k[d]||d:d)}function Lh(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function cl(a){return Array.from(a.touches).filter(d=>{var k,F;return d.target===a.currentTarget||(null===(k=a.currentTarget)||void 0===
k?void 0:null===(F=k.contains)||void 0===F?void 0:F.call(k,d.target))})}function vk(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function Rl(a,d){const k=d.clientX-a.clientX,F=d.clientY-a.clientY;return{angle:-(180*Math.atan2(k,F))/Math.PI,distance:Math.hypot(k,F),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function Rm(a){return cl(a).map(d=>d.identifier)}function Ti(a,d){const [k,F]=Array.from(a.touches).filter(Y=>d.includes(Y.identifier));
return Rl(k,F)}function Sl(a){const d=vk(a);return"touches"in a?d.identifier:d.pointerId}function Pj(a){a=vk(a);return[a.clientX,a.clientY]}function Ci(a){let {deltaX:d,deltaY:k,deltaMode:F}=a;1===F?(d*=40,k*=40):2===F&&(d*=800,k*=800);return[d,k]}function oh(a,...d){return"function"===typeof a?a(...d):a}function Ui(){}function qj(...a){return 0===a.length?Ui:1===a.length?a[0]:function(){let d;for(const k of a)d=k.apply(this,arguments)||d;return d}}function dl([a,d],k){a=Math.abs(a);d=Math.abs(d);
if(a>d&&a>k)return"x";if(d>a&&d>k)return"y"}function Lm(a){const [d,k]=a.overflow,[F,Y]=a._delta,[ka,oa]=a._direction;if(0>d&&0<F&&0>ka||0<d&&0>F&&0<ka)a._movement[0]=a._movementBound[0];if(0>k&&0<Y&&0>oa||0<k&&0>Y&&0<oa)a._movement[1]=a._movementBound[1]}function Ei(a){Lx.set(a.key,a.engine);Mx.set(a.key,a.resolver)}function bj(a={},d){const k={};for(const [F,Y]of Object.entries(d))switch(typeof Y){case "function":k[F]=Y.call(k,a[F],F,a);break;case "object":k[F]=bj(a[F],Y);break;case "boolean":Y&&
(k[F]=a[F])}return k}function cj(a,d,k={}){const {target:F,eventOptions:Y,window:ka,enabled:oa,transform:Fa}=a;var Qa=rF;if(null==a)a={};else{if(null==a)var Wa={};else{Wa={};var eb=Object.keys(a),jb;for(jb=0;jb<eb.length;jb++){var Mb=eb[jb];0<=Qa.indexOf(Mb)||(Wa[Mb]=a[Mb])}}if(Object.getOwnPropertySymbols)for(jb=Object.getOwnPropertySymbols(a),Mb=0;Mb<jb.length;Mb++)eb=jb[Mb],0<=Qa.indexOf(eb)||Object.prototype.propertyIsEnumerable.call(a,eb)&&(Wa[eb]=a[eb]);a=Wa}k.shared=bj({target:F,eventOptions:Y,
window:ka,enabled:oa,transform:Fa},qF);if(d){var Ub=Mx.get(d);k[d]=bj(Lg({shared:k.shared},a),Ub)}else for(Ub in a)(d=Mx.get(Ub))&&(k[Ub]=bj(Lg({shared:k.shared},a[Ub]),d));return k}function jj(a,d){a.gestures.add(d);a.gestureEventStores[d]=new PA(a,d);a.gestureTimeoutStores[d]=new sF}function si(a,d,k,F,Y,ka){if(a.has(k)&&Lx.has(F)){var oa=k+"Start",Fa=k+"End";Y[F]=Qa=>{let Wa=void 0;if(Qa.first&&oa in d)d[oa](Qa);k in d&&(Wa=d[k](Qa));if(Qa.last&&Fa in d)d[Fa](Qa);return Wa};ka[F]=ka[F]||{}}}function Ak(a,
d={},k,F){const Y=Nx.default.useMemo(()=>new tF(a),[]);Y.applyHandlers(a,F);Y.applyConfig(d,k);Nx.default.useEffect(Y.effect.bind(Y));Nx.default.useEffect(()=>Y.clean.bind(Y),[]);if(void 0===d.target)return Y.bind.bind(Y)}function fi(a){a.forEach(Ei);return function(d,k){k=k||{};const F={},Y={},ka=new Set;for(let Mb in d)uF.test(Mb)?(ka.add(RegExp.lastMatch),Y[Mb]=d[Mb]):F[Mb]=d[Mb];const [oa,Fa,Qa]=[Y,F,ka];d={};si(Qa,oa,"onDrag","drag",d,k);si(Qa,oa,"onWheel","wheel",d,k);si(Qa,oa,"onScroll","scroll",
d,k);si(Qa,oa,"onPinch","pinch",d,k);si(Qa,oa,"onMove","move",d,k);si(Qa,oa,"onHover","hover",d,k);const {handlers:Wa,nativeHandlers:eb,config:jb}={handlers:d,config:k,nativeHandlers:Fa};return Ak(Wa,jb,void 0,eb)}}function dj(a,d){return fi([kF,nF,oF,pF,mF,lF])(a,d||{})}function zj(a){const {viewport:d,inputs:k,callbacks:F}=nh(),Y=$v.useRef(void 0),ka=$v.useRef([0,0]),oa=$v.useRef(0),Fa=$v.useMemo(()=>({onWheel:Qa=>{var Wa;({event:Qa}=Qa);Qa.preventDefault();const {deltaY:eb,deltaX:jb}=Qa;var Mb=
0;if(Qa.ctrlKey||Qa.metaKey){Mb=Math.sign(Qa.deltaY);let vc=eb;10<Math.abs(Qa.deltaY)&&(vc=10*Mb);Mb=vc}const [Ub,Ob,jc]=[jb,eb,Mb];"pinching"===k.state||oa.current>=Qa.timeStamp||(oa.current=Qa.timeStamp,(Qa.altKey||Qa.ctrlKey||Qa.metaKey)&&0===Qa.buttons?(Mb=d.bounds,Qa=null!=(Wa=k.currentScreenPoint)?Wa:[Mb.width/2,Mb.height/2],Wa=d.camera.zoom,d.onZoom(Qa,Wa-jc/100*Wa)):(Wa=je.mul(Qa.shiftKey&&!Kh()?[Ob,0]:[Ub,Ob],.8),je.isEqual(Wa,[0,0])||d.panCamera(Wa)))},onPinchStart:({event:Qa,delta:Wa,offset:eb,
origin:jb})=>{var Mb;const Ub=a.current;Qa instanceof WheelEvent||!(Qa.target===Ub||null!=Ub&&Ub.contains(Qa.target))||(null==(Mb=F.onPinchStart)?void 0:Mb.call(F,{type:"canvas",order:0,delta:[...Wa,eb[0]],offset:eb,point:je.sub(jb,k.containerOffset)},Qa),Y.current=jb,ka.current=[0,0])},onPinchEnd:({event:Qa,offset:Wa,origin:eb})=>{var jb;const Mb=a.current;Qa instanceof WheelEvent||!(Qa.target===Mb||null!=Mb&&Mb.contains(Qa.target))||"pinching"!==k.state||(null==(jb=F.onPinchEnd)?void 0:jb.call(F,
{type:"canvas",order:0,delta:[0,0,Wa[0]],offset:Wa,point:je.sub(eb,k.containerOffset)},Qa),ka.current=[0,0])},onPinch:({event:Qa,offset:Wa,origin:eb})=>{var jb,Mb=a.current;if(!(Qa instanceof WheelEvent)&&(Qa.target===Mb||null!=Mb&&Mb.contains(Qa.target))){Y.current||(Y.current=eb);Mb=je.sub(Y.current,eb);var Ub=je.sub(Mb,ka.current);null==(jb=F.onPinch)?void 0:jb.call(F,{type:"canvas",order:0,delta:[...Ub,Wa[0]],offset:Wa,point:je.sub(eb,k.containerOffset)},Qa);ka.current=Mb}}}),[F]);dj(Fa,{target:a,
eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:zp.maxZoom,min:zp.minZoom})}})}function xl(a,d,k,F){Ox.useLayoutEffect(()=>{a.current.style.transform=`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,k,d.rotation]);Ox.useLayoutEffect(()=>{const Y=a.current;Y.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;Y.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);Ox.useLayoutEffect(()=>{const Y=a.current;void 0!==F&&(Y.style.zIndex=F.toString())},[F])}function fl(a,d){const {onPersist:k,onError:F,onMount:Y,onCreateAssets:ka,onCreateShapes:oa,onDeleteAssets:Fa,onDeleteShapes:Qa,onDrop:Wa,
onPaste:eb,onCopy:jb,onCanvasDBClick:Mb}=d;RA.useLayoutEffect(()=>{const Ub=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,Y&&Y(a,null),()=>{Ub.forEach(Ob=>Ob());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);RA.useLayoutEffect(()=>{const Ub=[];k&&Ub.push(a.subscribe("persist",k));F&&Ub.push(a.subscribe("error",F));oa&&Ub.push(a.subscribe("create-shapes",oa));ka&&Ub.push(a.subscribe("create-assets",ka));Qa&&Ub.push(a.subscribe("delete-shapes",Qa));Fa&&Ub.push(a.subscribe("delete-assets",
Fa));Wa&&Ub.push(a.subscribe("drop",Wa));eb&&Ub.push(a.subscribe("paste",eb));jb&&Ub.push(a.subscribe("copy",jb));Mb&&Ub.push(a.subscribe("canvas-dbclick",Mb));return()=>Ub.forEach(Ob=>Ob())},[a,k,F])}function ao(a){if("app"in a)return a.app;const [d]=SA.useState(()=>new PE(a.model,a.Shapes,a.Tools,a.readOnly));SA.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function Rk(a,d){vF.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function en(a){const d=nh(),{viewport:{bounds:k}}=
d;wF.useEffect(()=>{const F=oa=>{oa.preventDefault()},Y=oa=>{if(0!==oa.touches.length){var Fa=oa.touches[0].pageX,Qa=oa.touches[0].radiusX||0;(10>Fa-Qa||Fa+Qa>k.width-10)&&oa.preventDefault()}},ka=a.current;if(!ka)return()=>{};ka.addEventListener("touchstart",F,{passive:!0});ka.addEventListener("gestureend",F,{passive:!0});ka.addEventListener("gesturechange",F,{passive:!0});ka.addEventListener("gesturestart",F,{passive:!0});ka.addEventListener("touchstart",Y,{passive:!0});return()=>{ka&&(ka.removeEventListener("touchstart",
F),ka.removeEventListener("gestureend",F),ka.removeEventListener("gesturechange",F),ka.removeEventListener("gesturestart",F),ka.removeEventListener("touchstart",Y))}},[a,k.width])}function xn(a,d){const {inputs:k,callbacks:F}=nh();return xF.useMemo(()=>({onPointerDown:Y=>{var ka,oa;const {order:Fa=0}=Y;Fa||(null==(ka=Y.currentTarget)?void 0:ka.setPointerCapture(Y.pointerId));ka=a.props.handles[d];null==(oa=F.onPointerDown)?void 0:oa.call(F,{type:"handle",shape:a,handle:ka,id:d,order:Fa},Y);Y.order=
Fa+1},onPointerMove:Y=>{var ka;const {order:oa=0}=Y,Fa=a.props.handles[d];null==(ka=F.onPointerMove)?void 0:ka.call(F,{type:"handle",shape:a,handle:Fa,id:d,order:oa},Y);Y.order=oa+1},onPointerUp:Y=>{var ka,oa;const {order:Fa=0}=Y;Fa||(null==(ka=Y.currentTarget)?void 0:ka.releasePointerCapture(Y.pointerId));ka=a.props.handles[d];null==(oa=F.onPointerUp)?void 0:oa.call(F,{type:"handle",shape:a,handle:ka,id:d,order:Fa},Y);Y.order=Fa+1},onPointerEnter:Y=>{var ka;const {order:oa=0}=Y,Fa=a.props.handles[d];
null==(ka=F.onPointerEnter)?void 0:ka.call(F,{type:"handle",shape:a,handle:Fa,id:d,order:oa},Y);Y.order=oa+1},onPointerLeave:Y=>{var ka;const {order:oa=0}=Y,Fa=a.props.handles[d];null==(ka=F.onPointerLeave)?void 0:ka.call(F,{type:"handle",shape:a,handle:Fa,id:d,order:oa},Y);Y.order=oa+1},onKeyUp:Y=>{var ka;const oa=a.props.handles[d];null==(ka=F.onKeyUp)?void 0:ka.call(F,{type:"handle",shape:a,handle:oa,id:d,order:-1},Y)},onKeyDown:Y=>{var ka;const oa=a.props.handles[d];null==(ka=F.onKeyDown)?void 0:
ka.call(F,{type:"handle",shape:a,handle:oa,id:d,order:-1},Y)}}),[a.id,k,F])}function Jj(a,d,k=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${k?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function yn(a,d,k=0){yF.useEffect(()=>{const F=a.current;F&&(F.style.cursor=zF[d](an.radiansToDegrees(k)))},
[d,k])}function Ck(a){const {viewport:d}=nh(),k=ef();AF.useLayoutEffect(()=>Kd(()=>{const F=bl(()=>{var Y;null==(Y=a.current)?void 0:Y.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==k.inputs.state&&null!=d.camera.zoom&&F()}),[])}function fn(a,d=0){const [k,F]=(0,TA.useState)(a);(0,TA.useEffect)(()=>{let Y=!1;const ka=setTimeout(()=>{Y||F(a)},d);return()=>{Y=!0;clearTimeout(ka)}},[a,d]);return k}function kk(){const a=ef();UA.useEffect(()=>{ue(()=>me({},a.viewport.camera),
()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);UA.useEffect(()=>{var d;const k=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");k?a.viewport.update(k):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function zn(a){a()}function Bk(a){return Qf(Kg(a,void 0))}function xi(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+
CF}}function gi(a){var d=new Map,k=1,F=new a(function(Y){var ka=d.get(Y);ka&&(ka.reaction.dispose(),d.delete(Y))});return{addReactionToTrack:function(Y,ka,oa){var Fa=k++;F.register(oa,Fa,Y);Y.current=xi(ka);Y.current.finalizationRegistryCleanupToken=Fa;d.set(Fa,Y.current);return Y.current},recordReactionAsCommitted:function(Y){F.unregister(Y);Y.current&&Y.current.finalizationRegistryCleanupToken&&d.delete(Y.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function An(){function a(){void 0===F&&(F=setTimeout(d,1E4))}function d(){F=void 0;var Y=Date.now();k.forEach(function(ka){var oa=ka.current;oa&&Y>=oa.cleanAt&&(oa.reaction.dispose(),ka.current=null,k.delete(ka))});0<k.size&&a()}var k=new Set,F;return{addReactionToTrack:function(Y,ka,oa){Y.current=xi(ka);k.add(Y);a();return Y.current},recordReactionAsCommitted:function(Y){k.delete(Y)},forceCleanupTimerToRunNowForTests:function(){F&&(clearTimeout(F),d())},
resetCleanupScheduleForTests:function(){var Y;if(0<k.size){try{for(var ka=DF(k),oa=ka.next();!oa.done;oa=ka.next()){var Fa=oa.value,Qa=Fa.current;Qa&&(Qa.reaction.dispose(),Fa.current=null)}}catch(eb){var Wa={error:eb}}finally{try{oa&&!oa.done&&(Y=ka.return)&&Y.call(ka)}finally{if(Wa)throw Wa.error;}}k.clear()}F&&(clearTimeout(F),F=void 0)}}}function ph(){return new GF}function Aj(a,d){void 0===d&&(d="observed");var k=XA(Nu.default.useState(ph),1)[0],F=XA(Nu.default.useState(),2)[1],Y=Nu.default.useRef(null);
if(!Y.current)var ka=new Ct("observer".concat(d),function(){oa.mounted?F([]):oa.changedBeforeMount=!0}),oa=EF(Y,ka,k);k=Y.current.reaction;Nu.default.useDebugValue(k,Bk);Nu.default.useEffect(function(){FF(Y);Y.current?(Y.current.mounted=!0,Y.current.changedBeforeMount&&(Y.current.changedBeforeMount=!1,F([]))):(Y.current={reaction:new Ct("observer".concat(d),function(){F([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},F([]));return function(){Y.current.reaction.dispose();Y.current=null}},
[]);var Fa,Qa;k.track(function(){try{Fa=a()}catch(Wa){Qa=Wa}});if(Qa)throw Qa;return Fa}function Ze(a,d){var k;if($A&&a.$$typeof===$A)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(k=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==k?k:!1;var F=a,Y=a.displayName||a.name;if(ZA&&a.$$typeof===ZA&&(d=!0,F=a.render,"function"!==typeof F))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
k=function(ka,oa){return Aj(function(){return F(ka,oa)},Y)};""!==Y&&(k.displayName=Y);a.contextTypes&&(k.contextTypes=a.contextTypes);d&&(k=(0,Lt.forwardRef)(k));k=(0,Lt.memo)(k);Kj(a,k);return k}function Kj(a,d){Object.keys(a).forEach(function(k){HF[k]||Object.defineProperty(d,k,Object.getOwnPropertyDescriptor(a,k))})}function wk(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:Aj(a)}function Bn(a){const d=ef(),{callbacks:k}=nh(),F=aB.useRef(!1);aB.useEffect(()=>{const Y=Qa=>{var Wa,
eb;if(null==(Wa=a.current)?0:Wa.contains(document.activeElement))null==(eb=k.onKeyDown)?void 0:eb.call(k,{type:"canvas",order:-1},Qa),F.current=Qa.shiftKey},ka=Qa=>{var Wa,eb;if(null==(Wa=a.current)?0:Wa.contains(document.activeElement))null==(eb=k.onKeyUp)?void 0:eb.call(k,{type:"canvas",order:-1},Qa),F.current=Qa.shiftKey},oa=Qa=>{var Wa,eb,jb;!d.editingShape&&(null==(Wa=a.current)?0:Wa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(jb=null==(eb=document.activeElement)?
void 0:eb.tagName)?jb:"")&&(Qa.preventDefault(),d.paste(Qa,F.current))},Fa=Qa=>{var Wa,eb,jb;!d.editingShape&&0<d.selectedShapes.size&&(null==(Wa=a.current)?0:Wa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(jb=null==(eb=document.activeElement)?void 0:eb.tagName)?jb:"")&&(Qa.preventDefault(),d.copy())};window.addEventListener("keydown",Y);window.addEventListener("keyup",ka);document.addEventListener("paste",oa);document.addEventListener("copy",Fa);return()=>{window.removeEventListener("keydown",
Y);window.removeEventListener("keyup",ka);document.removeEventListener("paste",oa);document.removeEventListener("copy",Fa)}},[])}function tm(a){const {inputs:d,callbacks:k}=nh(),F=fB.useRef(-1);return fB.useMemo(()=>({onPointerDown:Y=>{var ka,oa;const {order:Fa=0}=Y;Fa||(null==(ka=Y.currentTarget)?void 0:ka.setPointerCapture(Y.pointerId));null==(oa=k.onPointerDown)?void 0:oa.call(k,{type:"shape",shape:a,order:Fa},Y);Y.order=Fa+1},onPointerMove:Y=>{var ka;const {order:oa=0}=Y;null==(ka=k.onPointerMove)?
void 0:ka.call(k,{type:"shape",shape:a,order:oa},Y);Y.order=oa+1},onPointerUp:Y=>{var ka,oa,Fa;const {order:Qa=0}=Y;Qa||(null==(ka=Y.currentTarget)?void 0:ka.releasePointerCapture(Y.pointerId));null==(oa=k.onPointerUp)?void 0:oa.call(k,{type:"shape",shape:a,order:Qa},Y);ka=Date.now();oa=ka-F.current;300<oa?F.current=ka:300>=oa&&(null==(Fa=k.onDoubleClick)?void 0:Fa.call(k,{type:"shape",shape:a,order:Qa},Y),F.current=-1);Y.order=Qa+1},onPointerEnter:Y=>{var ka;const {order:oa=0}=Y;null==(ka=k.onPointerEnter)?
void 0:ka.call(k,{type:"shape",shape:a,order:oa},Y);Y.order=oa+1},onPointerLeave:Y=>{var ka;const {order:oa=0}=Y;null==(ka=k.onPointerLeave)?void 0:ka.call(k,{type:"shape",shape:a,order:oa},Y);Y.order=oa+1},onKeyUp:Y=>{var ka;null==(ka=k.onKeyUp)?void 0:ka.call(k,{type:"shape",shape:a,order:-1},Y)},onKeyDown:Y=>{var ka;null==(ka=k.onKeyDown)?void 0:ka.call(k,{type:"shape",shape:a,order:-1},Y)}}),[a.id,d,k])}function Gg(a){var {viewport:d,inputs:k,callbacks:F,components:Y}=a;a=Jf(a,["viewport","inputs",
"callbacks","components"]);return(0,xB.jsx)(aG,{id:a.id,viewport:d,inputs:k,callbacks:F,components:Y,meta:a.meta,children:(0,xB.jsx)(XF,me({},a))})}function $e(){$e=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],F;for(F in k)Object.prototype.hasOwnProperty.call(k,F)&&(a[F]=k[F])}return a};return $e.apply(this,arguments)}function Wf(a,d,{checkForDefaultPrevented:k=!0}={}){return function(F){null===a||void 0===a||a(F);if(!1===k||!F.defaultPrevented)return null===
d||void 0===d?void 0:d(F)}}function Pg(...a){return d=>a.forEach(k=>{"function"===typeof k?k(d):null!==k&&void 0!==k&&(k.current=d)})}function ih(...a){return(0,fG.useCallback)(Pg(...a),a)}function mk(a,d=[]){let k=[];const F=()=>{const Y=k.map(ka=>(0,Qs.createContext)(ka));return function(ka){const oa=(null===ka||void 0===ka?void 0:ka[a])||Y;return(0,Qs.useMemo)(()=>({[`__scope${a}`]:kf(me({},ka),{[a]:oa})}),[ka,oa])}};F.scopeName=a;return[function(Y,ka){function oa(Wa){const {scope:eb,children:jb}=
Wa,Mb=Jf(Wa,["scope","children"]);Wa=(null===eb||void 0===eb?void 0:eb[a][Qa])||Fa;const Ub=(0,Qs.useMemo)(()=>Mb,Object.values(Mb));return(0,Qs.createElement)(Wa.Provider,{value:Ub},jb)}const Fa=(0,Qs.createContext)(ka),Qa=k.length;k=[...k,ka];oa.displayName=Y+"Provider";return[oa,function(Wa,eb){if(eb=(0,Qs.useContext)((null===eb||void 0===eb?void 0:eb[a][Qa])||Fa))return eb;if(void 0!==ka)return ka;throw Error(`\`${Wa}\` must be used within \`${Y}\``);}]},Sk(F,...d)]}function Sk(...a){const d=
a[0];if(1===a.length)return d;const k=()=>{const F=a.map(Y=>({useScope:Y(),scopeName:Y.scopeName}));return function(Y){const ka=F.reduce((oa,{useScope:Fa,scopeName:Qa})=>{Fa=Fa(Y)[`__scope${Qa}`];return me(me({},oa),Fa)},{});return(0,Qs.useMemo)(()=>({[`__scope${d.scopeName}`]:ka}),[ka])}};k.scopeName=d.scopeName;return k}function zg(a){return(0,Un.isValidElement)(a)&&a.type===yB}function Lj(a,d){const k=me({},d);for(const F in d){const Y=a[F],ka=d[F];/^on[A-Z]/.test(F)?Y&&ka?k[F]=(...oa)=>{ka(...oa);
Y(...oa)}:Y&&(k[F]=Y):"style"===F?k[F]=me(me({},Y),ka):"className"===F&&(k[F]=[Y,ka].filter(Boolean).join(" "))}return me(me({},a),k)}function bm(a,d){a&&(0,gG.flushSync)(()=>a.dispatchEvent(d))}function Hf(a){const d=(0,Zx.useRef)(a);(0,Zx.useEffect)(()=>{d.current=a});return(0,Zx.useMemo)(()=>(...k)=>{var F;return null===(F=d.current)||void 0===F?void 0:F.call(d,...k)},[])}function Fk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Hf(a);(0,hG.useEffect)(()=>{const F=
Y=>{"Escape"===Y.key&&k(Y)};d.addEventListener("keydown",F);return()=>d.removeEventListener("keydown",F)},[k,d])}function Yj(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Hf(a),F=(0,Lo.useRef)(!1),Y=(0,Lo.useRef)(()=>{});(0,Lo.useEffect)(()=>{const ka=Fa=>{if(Fa.target&&!F.current){let Qa=function(){Sm("dismissableLayer.pointerDownOutside",k,Wa,{discrete:!0})};const Wa={originalEvent:Fa};"touch"===Fa.pointerType?(d.removeEventListener("click",Y.current),Y.current=
Qa,d.addEventListener("click",Y.current,{once:!0})):Qa()}F.current=!1},oa=window.setTimeout(()=>{d.addEventListener("pointerdown",ka)},0);return()=>{window.clearTimeout(oa);d.removeEventListener("pointerdown",ka);d.removeEventListener("click",Y.current)}},[d,k]);return{onPointerDownCapture:()=>F.current=!0}}function am(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Hf(a),F=(0,Lo.useRef)(!1);(0,Lo.useEffect)(()=>{const Y=ka=>{ka.target&&!F.current&&Sm("dismissableLayer.focusOutside",
k,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",Y);return()=>d.removeEventListener("focusin",Y)},[d,k]);return{onFocusCapture:()=>F.current=!0,onBlurCapture:()=>F.current=!1}}function el(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function Sm(a,d,k,{discrete:F}){const Y=k.originalEvent.target;k=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:k});d&&Y.addEventListener(a,d,{once:!0});F?bm(Y,k):Y.dispatchEvent(k)}function hi(a){const [d,k]=AB.useState(kG());
Fn(()=>{a||k(F=>null!==F&&void 0!==F?F:String(lG++))},[a]);return a||(d?`radix-${d}`:"")}function ej(a){return a.split("-")[0]}function hl(a){return["top","bottom"].includes(ej(a))?"x":"y"}function Gk(a){return"y"===a?"height":"width"}function yl(a,d,k){let {reference:F,floating:Y}=a;var ka=F.x+F.width/2-Y.width/2;const oa=F.y+F.height/2-Y.height/2;a=hl(d);var Fa=Gk(a);Fa=F[Fa]/2-Y[Fa]/2;const Qa="x"===a;switch(ej(d)){case "top":ka={x:ka,y:F.y-Y.height};break;case "bottom":ka={x:ka,y:F.y+F.height};
break;case "right":ka={x:F.x+F.width,y:oa};break;case "left":ka={x:F.x-Y.width,y:oa};break;default:ka={x:F.x,y:F.y}}switch(d.split("-")[1]){case "start":ka[a]-=Fa*(k&&Qa?-1:1);break;case "end":ka[a]+=Fa*(k&&Qa?-1:1)}return ka}function co(a){return"number"!=typeof a?me({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function Cn(a){return kf(me({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function qm(a,d){return vi(this,null,function*(){var k;void 0===d&&(d={});
const {x:F,y:Y,platform:ka,rects:oa,elements:Fa,strategy:Qa}=a,{boundary:Wa="clippingAncestors",rootBoundary:eb="viewport",elementContext:jb="floating",altBoundary:Mb=!1,padding:Ub=0}=d,Ob=co(Ub),jc=Fa[Mb?"floating"===jb?"reference":"floating":jb],vc=Cn(yield ka.getClippingRect({element:null==(k=yield null==ka.isElement?void 0:ka.isElement(jc))||k?jc:jc.contextElement||(yield null==ka.getDocumentElement?void 0:ka.getDocumentElement(Fa.floating)),boundary:Wa,rootBoundary:eb,strategy:Qa}));k=Cn(ka.convertOffsetParentRelativeRectToViewportRelativeRect?
yield ka.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===jb?kf(me({},oa.floating),{x:F,y:Y}):oa.reference,offsetParent:yield null==ka.getOffsetParent?void 0:ka.getOffsetParent(Fa.floating),strategy:Qa}):oa[jb]);return{top:vc.top-k.top+Ob.top,bottom:k.bottom-vc.bottom+Ob.bottom,left:vc.left-k.left+Ob.left,right:k.right-vc.right+Ob.right}})}function hn(a){return a.replace(/left|right|bottom|top/g,d=>nG[d])}function cm(a,d,k){void 0===k&&(k=!1);const F=a.split("-")[1],Y=hl(a);
a=Gk(Y);k="x"===Y?F===(k?"end":"start")?"right":"left":"start"===F?"bottom":"top";return d.reference[a]>d.floating[a]&&(k=hn(k)),{main:k,cross:hn(k)}}function Hk(a){return a.replace(/start|end/g,d=>oG[d])}function Tl(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function kl(a){return CB.some(d=>0<=a[d])}function jl(a){return null==a?window:a&&a.document&&a.location&&a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function em(a){return jl(a).getComputedStyle(a)}
function Rj(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||"").toLowerCase():""}function sj(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function Al(a){return a instanceof jl(a).HTMLElement}function Tk(a){return a instanceof jl(a).Element}function Qj(a){return"undefined"==typeof ShadowRoot?!1:a instanceof jl(a).ShadowRoot||a instanceof ShadowRoot}function rj(a){const {overflow:d,overflowX:k,
overflowY:F}=em(a);return/auto|scroll|overlay|hidden/.test(d+F+k)}function Mm(a){const d=/firefox/i.test(sj());a=em(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function ll(){return!/^((?!chrome|android).)*safari/i.test(sj())}function Zj(a,d,k){var F,Y,ka,oa;void 0===d&&(d=!1);void 0===k&&(k=!1);var Fa=a.getBoundingClientRect();let Qa=1,Wa=1;d&&Al(a)&&(Qa=
0<a.offsetWidth&&hw(Fa.width)/a.offsetWidth||1,Wa=0<a.offsetHeight&&hw(Fa.height)/a.offsetHeight||1);a=Tk(a)?jl(a):window;d=!ll()&&k;k=(Fa.left+(d&&null!=(F=null==(Y=a.visualViewport)?void 0:Y.offsetLeft)?F:0))/Qa;F=(Fa.top+(d&&null!=(ka=null==(oa=a.visualViewport)?void 0:oa.offsetTop)?ka:0))/Wa;ka=Fa.width/Qa;Fa=Fa.height/Wa;return{width:ka,height:Fa,top:F,right:k+ka,bottom:F+Fa,left:k,x:k,y:F}}function nk(a){return(d=a,(d instanceof jl(d).Node?a.ownerDocument:a.document)||window.document).documentElement;
var d}function xk(a){return Tk(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function ok(a){return Zj(nk(a)).left+xk(a).scrollLeft}function Rh(a){return"html"===Rj(a)?a:a.assignedSlot||a.parentNode||(Qj(a)?a.host:null)||nk(a)}function Ij(a){return Al(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}function tj(a){for(var d=jl(a),k=Ij(a);k&&["table","td","th"].includes(Rj(k))&&"static"===getComputedStyle(k).position;)k=Ij(k);if(!k||
"html"!==Rj(k)&&("body"!==Rj(k)||"static"!==getComputedStyle(k).position||Mm(k))){if(!k)a:{a=Rh(a);for(Qj(a)&&(a=a.host);Al(a)&&!["html","body"].includes(Rj(a));){if(Mm(a)){k=a;break a}a=a.parentNode}k=null}d=k||d}return d}function Nk(a){if(Al(a))return{width:a.offsetWidth,height:a.offsetHeight};a=Zj(a);return{width:a.width,height:a.height}}function vl(a){const d=Rh(a);return["html","body","#document"].includes(Rj(d))?a.ownerDocument.body:Al(d)&&rj(d)?d:vl(d)}function li(a,d){var k;void 0===d&&(d=
[]);var F=vl(a);a=F===(null==(k=a.ownerDocument)?void 0:k.body);k=jl(F);F=a?[k].concat(k.visualViewport||[],rj(F)?F:[]):F;d=d.concat(F);return a?d:d.concat(li(F))}function ti(a,d,k){return"viewport"===d?Cn(function(F,Y){var ka=jl(F),oa=nk(F);ka=ka.visualViewport;F=oa.clientWidth;oa=oa.clientHeight;let Fa=0,Qa=0;if(ka){F=ka.width;oa=ka.height;const Wa=ll();(Wa||!Wa&&"fixed"===Y)&&(Fa=ka.offsetLeft,Qa=ka.offsetTop)}return{width:F,height:oa,x:Fa,y:Qa}}(a,k)):Tk(d)?function(F,Y){var ka=Zj(F,!1,"fixed"===
Y);Y=ka.top+F.clientTop;ka=ka.left+F.clientLeft;return{top:Y,left:ka,x:ka,y:Y,right:ka+F.clientWidth,bottom:Y+F.clientHeight,width:F.clientWidth,height:F.clientHeight}}(d,k):Cn(function(F){var Y;const ka=nk(F);var oa=xk(F);const Fa=null==(Y=F.ownerDocument)?void 0:Y.body;Y=Pu(ka.scrollWidth,ka.clientWidth,Fa?Fa.scrollWidth:0,Fa?Fa.clientWidth:0);const Qa=Pu(ka.scrollHeight,ka.clientHeight,Fa?Fa.scrollHeight:0,Fa?Fa.clientHeight:0);F=-oa.scrollLeft+ok(F);oa=-oa.scrollTop;return"rtl"===em(Fa||ka).direction&&
(F+=Pu(ka.clientWidth,Fa?Fa.clientWidth:0)-Y),{width:Y,height:Qa,x:F,y:oa}}(nk(a)))}function pm(a){const d=li(a),k=["absolute","fixed"].includes(em(a).position)&&Al(a)?tj(a):a;return Tk(k)?d.filter(F=>{var Y;if(Y=Tk(F))a:if(Y=null==k.getRootNode?void 0:k.getRootNode(),F.contains(k))Y=!0;else{if(Y&&Qj(Y)){Y=k;do{if(Y&&F===Y){Y=!0;break a}Y=Y.parentNode||Y.host}while(Y)}Y=!1}return Y&&"body"!==Rj(F)}):[]}function Ri(a,d,k,F){void 0===F&&(F={});const {ancestorScroll:Y=!0,ancestorResize:ka=!0,elementResize:oa=
!0,animationFrame:Fa=!1}=F,Qa=Y&&!Fa,Wa=ka&&!Fa,eb=Qa||Wa?[...(Tk(a)?li(a):[]),...li(d)]:[];eb.forEach(Ob=>{Qa&&Ob.addEventListener("scroll",k,{passive:!0});Wa&&Ob.addEventListener("resize",k)});let jb,Mb=null;if(oa){let Ob=!0;Mb=new ResizeObserver(()=>{Ob||k();Ob=!1});Tk(a)&&!Fa&&Mb.observe(a);Mb.observe(d)}let Ub=Fa?Zj(a):null;return Fa&&function jc(){const vc=Zj(a);!Ub||vc.x===Ub.x&&vc.y===Ub.y&&vc.width===Ub.width&&vc.height===Ub.height||k();Ub=vc;jb=requestAnimationFrame(jc)}(),k(),()=>{var jc;
eb.forEach(vc=>{Qa&&vc.removeEventListener("scroll",k);Wa&&vc.removeEventListener("resize",k)});null==(jc=Mb)||jc.disconnect();Mb=null;Fa&&cancelAnimationFrame(jb)}}function Ik(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let k,F;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var Y=a.length;if(Y!=d.length)return!1;for(k=Y;0!==k--;)if(!Ik(a[k],d[k]))return!1;return!0}F=Object.keys(a);Y=F.length;if(Y!==Object.keys(d).length)return!1;
for(k=Y;0!==k--;)if(!Object.prototype.hasOwnProperty.call(d,F[k]))return!1;for(k=Y;0!==k--;)if(Y=F[k],!("_owner"===Y&&a.$$typeof||Ik(a[Y],d[Y])))return!1;return!0}return a!==a&&d!==d}function mi(a){const d=Zo.useRef(a);by(()=>{d.current=a});return d}function lg(a){let {middleware:d,placement:k="bottom",strategy:F="absolute",whileElementsMounted:Y}=void 0===a?{}:a;const ka=Zo.useRef(null),oa=Zo.useRef(null),Fa=mi(Y),Qa=Zo.useRef(null),[Wa,eb]=Zo.useState({x:null,y:null,strategy:F,placement:k,middlewareData:{}}),
[jb,Mb]=Zo.useState(d);Ik(null==jb?void 0:jb.map(lc=>{({options:lc}=lc);return lc}),null==d?void 0:d.map(lc=>{({options:lc}=lc);return lc}))||Mb(d);const Ub=Zo.useCallback(()=>{ka.current&&oa.current&&rG(ka.current,oa.current,{middleware:jb,placement:k,strategy:F}).then(lc=>{Ob.current&&sG.flushSync(()=>{eb(lc)})})},[jb,k,F]);by(()=>{Ob.current&&Ub()},[Ub]);const Ob=Zo.useRef(!1);by(()=>{Ob.current=!0;return()=>{Ob.current=!1}},[]);const jc=Zo.useCallback(()=>{"function"===typeof Qa.current&&(Qa.current(),
Qa.current=null);if(ka.current&&oa.current)if(Fa.current){const lc=Fa.current(ka.current,oa.current,Ub);Qa.current=lc}else Ub()},[Ub,Fa]),vc=Zo.useCallback(lc=>{ka.current=lc;jc()},[jc]),Zb=Zo.useCallback(lc=>{oa.current=lc;jc()},[jc]),oc=Zo.useMemo(()=>({reference:ka,floating:oa}),[]);return Zo.useMemo(()=>kf(me({},Wa),{update:Ub,refs:oc,reference:vc,floating:Zb}),[Wa,Ub,oc,vc,Zb])}function Eh(a){const [d,k]=(0,uG.useState)(void 0);Fn(()=>{if(a){k({width:a.offsetWidth,height:a.offsetHeight});const F=
new ResizeObserver(Y=>{if(Array.isArray(Y)&&Y.length){Y=Y[0];if("borderBoxSize"in Y){Y=Y.borderBoxSize;var ka=Array.isArray(Y)?Y[0]:Y;Y=ka.inlineSize;ka=ka.blockSize}else Y=a.offsetWidth,ka=a.offsetHeight;k({width:Y,height:ka})}});F.observe(a,{box:"border-box"});return()=>F.unobserve(a)}k(void 0)},[a]);return d}function ch(a){return void 0!==a}function Cg(a){return null!==a}function yi(a){const [d,k="center"]=a.split("-");return[d,k]}function Zh(a,d){return(0,br.useReducer)((k,F)=>{F=d[k][F];return null!==
F&&void 0!==F?F:k},a)}function Ig(a){const [d,k]=(0,br.useState)(),F=(0,br.useRef)({}),Y=(0,br.useRef)(a),ka=(0,br.useRef)("none"),[oa,Fa]=Zh(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,br.useEffect)(()=>{const Qa=Vh(F.current);ka.current="mounted"===oa?Qa:"none"},[oa]);Fn(()=>{const Qa=F.current,Wa=Y.current;if(Wa!==a){const eb=ka.current,jb=Vh(Qa);a?Fa("MOUNT"):
"none"===jb||"none"===(null===Qa||void 0===Qa?void 0:Qa.display)?Fa("UNMOUNT"):Wa&&eb!==jb?Fa("ANIMATION_OUT"):Fa("UNMOUNT");Y.current=a}},[a,Fa]);Fn(()=>{if(d){const Qa=eb=>{const jb=Vh(F.current).includes(eb.animationName);eb.target===d&&jb&&(0,EG.flushSync)(()=>Fa("ANIMATION_END"))},Wa=eb=>{eb.target===d&&(ka.current=Vh(F.current))};d.addEventListener("animationstart",Wa);d.addEventListener("animationcancel",Qa);d.addEventListener("animationend",Qa);return()=>{d.removeEventListener("animationstart",
Wa);d.removeEventListener("animationcancel",Qa);d.removeEventListener("animationend",Qa)}}Fa("ANIMATION_END")},[d,Fa]);return{isPresent:["mounted","unmountSuspended"].includes(oa),ref:(0,br.useCallback)(Qa=>{Qa&&(F.current=getComputedStyle(Qa));k(Qa)},[])}}function Vh(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}function $h({prop:a,defaultProp:d,onChange:k=()=>{}}){const [F,Y]=Bj({defaultProp:d,onChange:k}),ka=void 0!==a;d=ka?a:F;const oa=Hf(k);k=(0,iw.useCallback)(Fa=>{ka?(Fa="function"===
typeof Fa?Fa(a):Fa,Fa!==a&&oa(Fa)):Y(Fa)},[ka,a,Y,oa]);return[d,k]}function Bj({defaultProp:a,onChange:d}){a=(0,iw.useState)(a);const [k]=a,F=(0,iw.useRef)(k),Y=Hf(d);(0,iw.useEffect)(()=>{F.current!==k&&(Y(k),F.current=k)},[k,F,Y]);return a}function Nj(a,d){const k=Math.abs(d.top-a.y),F=Math.abs(d.bottom-a.y),Y=Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(k,F,Y,a)){case a:return"left";case Y:return"right";case k:return"top";case F:return"bottom";default:return null}}function Qb(a){a=
a.slice();a.sort((d,k)=>d.x<k.x?-1:d.x>k.x?1:d.y<k.y?-1:d.y>k.y?1:0);return ic(a)}function ic(a){if(1>=a.length)return a.slice();const d=[];for(var k=0;k<a.length;k++){for(var F=a[k];2<=d.length;){var Y=d[d.length-1],ka=d[d.length-2];if((Y.x-ka.x)*(F.y-ka.y)>=(Y.y-ka.y)*(F.x-ka.x))d.pop();else break}d.push(F)}d.pop();k=[];for(F=a.length-1;0<=F;F--){for(Y=a[F];2<=k.length;){ka=k[k.length-1];const oa=k[k.length-2];if((ka.x-oa.x)*(Y.y-oa.y)>=(ka.y-oa.y)*(Y.x-oa.x))k.pop();else break}k.push(Y)}k.pop();
return 1===d.length&&1===k.length&&d[0].x===k[0].x&&d[0].y===k[0].y?d:d.concat(k)}function fc(a){var {side:d,content:k,sideOffset:F=10}=a;a=Jf(a,["side","content","sideOffset"]);return k?(0,Nr.jsx)(QG,{delayDuration:300,children:(0,Nr.jsxs)(RG,{children:[(0,Nr.jsx)(SG,{asChild:!0,children:a.children}),(0,Nr.jsx)(TG,{children:(0,Nr.jsxs)(UG,kf(me({className:"tl-tooltip-content",sideOffset:F,side:d},a),{children:[k,(0,Nr.jsx)(VG,{className:"tl-tooltip-arrow"})]}))})]})}):(0,Nr.jsx)(Nr.Fragment,{children:a.children})}
function ja(a){var {className:d,tooltip:k,tooltipSide:F}=a;a=Jf(a,["className","tooltip","tooltipSide"]);return(0,QB.jsx)(fc,{content:k,side:F,children:(0,QB.jsx)("button",me({className:"tl-button "+(null!=d?d:"")},a))})}function Bb(a){var {toggle:d=!0,pressed:k,onPressedChange:F,className:Y,tooltip:ka}=a;a=Jf(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,jy.jsx)(fc,{content:ka,children:(0,jy.jsx)("div",{className:"inline-block",children:(0,jy.jsx)(XG,kf(me({},a),{"data-toggle":d,
className:"tl-toggle-input"+(Y?" "+Y:""),pressed:k,onPressedChange:F}))})})}function Vb(a){var d=a+"CollectionProvider";const [k,F]=mk(d),[Y,ka]=k(d,{collectionRef:{current:null},itemMap:new Map}),oa=eb=>{const {scope:jb,children:Mb}=eb;eb=Cq.default.useRef(null);const Ub=Cq.default.useRef(new Map).current;return Cq.default.createElement(Y,{scope:jb,itemMap:Ub,collectionRef:eb},Mb)};Object.assign(oa,{displayName:d});const Fa=a+"CollectionSlot";d=Cq.default.forwardRef((eb,jb)=>{const {scope:Mb,children:Ub}=
eb;eb=ka(Fa,Mb);jb=ih(jb,eb.collectionRef);return Cq.default.createElement(Bq,{ref:jb},Ub)});Object.assign(d,{displayName:Fa});const Qa=a+"CollectionItemSlot",Wa=Cq.default.forwardRef((eb,jb)=>{const {scope:Mb,children:Ub}=eb,Ob=Jf(eb,["scope","children"]),jc=Cq.default.useRef(null);eb=ih(jb,jc);const vc=ka(Qa,Mb);Cq.default.useEffect(()=>{vc.itemMap.set(jc,me({ref:jc},Ob));return()=>void vc.itemMap.delete(jc)});return Cq.default.createElement(Bq,{["data-radix-collection-item"]:"",ref:eb},Ub)});Object.assign(Wa,
{displayName:Qa});return[{Provider:oa,Slot:d,ItemSlot:Wa},function(eb){const jb=ka(a+"CollectionConsumer",eb);return Cq.default.useCallback(()=>{const Mb=jb.collectionRef.current;if(!Mb)return[];const Ub=Array.from(Mb.querySelectorAll("[data-radix-collection-item]"));return Array.from(jb.itemMap.values()).sort((Ob,jc)=>Ub.indexOf(Ob.ref.current)-Ub.indexOf(jc.ref.current))},[jb.collectionRef,jb.itemMap])},F]}function sb(a){const d=(0,TB.useContext)(YG);return a||d||"ltr"}function xb(){(0,ZG.useEffect)(()=>
{var a,d;const k=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=k[0])&&void 0!==a?a:Sb());document.body.insertAdjacentElement("beforeend",null!==(d=k[1])&&void 0!==d?d:Sb());ky++;return()=>{1===ky&&document.querySelectorAll("[data-radix-focus-guard]").forEach(F=>F.remove());ky--}},[])}function Sb(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";
return a}function rb(a,{select:d=!1}={}){const k=document.activeElement;for(const F of a)if(Kc(F,{select:d}),document.activeElement!==k)break}function Pb(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:k=>{const F="INPUT"===k.tagName&&"hidden"===k.type;return k.disabled||k.hidden||F?NodeFilter.FILTER_SKIP:0<=k.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function $b(a,d){for(const k of a)if(!Cc(k,{upTo:d}))return k}
function Cc(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Kc(a,{select:d=!1}={}){if(a&&a.focus){const k=document.activeElement;a.focus({preventScroll:!0});a!==k&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function Pc(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function rd(a){return a.filter(d=>"A"!==d.tagName)}function Rd(a,d,k){a=
a.key;k="rtl"!==k?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(k))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(k))return fH[k]}function Bd(a){const d=document.activeElement;for(const k of a){if(k===d)break;k.focus();if(document.activeElement!==d)break}}function Ad(a,d){return a.map((k,F)=>a[(d+F)%a.length])}function Jd(a,d){var k=(0,jH.useState)(function(){return{value:a,callback:d,facade:{get current(){return k.value},
set current(F){var Y=k.value;Y!==F&&(k.value=F,k.callback(F,Y))}}}})[0];k.callback=d;return k.facade}function Be(a,d){return Jd(d||null,function(k){return a.forEach(function(F){"function"===typeof F?F(k):F&&(F.current=k);return F})})}function hg(a){return a}function ye(a,d){void 0===d&&(d=hg);var k=[],F=!1;return{read:function(){if(F)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return k.length?k[k.length-1]:a},useMedium:function(Y){var ka=
d(Y,F);k.push(ka);return function(){k=k.filter(function(oa){return oa!==ka})}},assignSyncMedium:function(Y){for(F=!0;k.length;){var ka=k;k=[];ka.forEach(Y)}k={push:function(oa){return Y(oa)},filter:function(){return k}}},assignMedium:function(Y){F=!0;var ka=[];if(k.length){var oa=k;k=[];oa.forEach(Y);ka=k}var Fa=function(){var Qa=ka;ka=[];Qa.forEach(Y)};Promise.resolve().then(Fa);k={push:function(Qa){ka.push(Qa);Promise.resolve().then(Fa)},filter:function(Qa){ka=ka.filter(Qa);return k}}}}}function gf(a){const d=
document.activeElement;for(const k of a){if(k===d)break;k.focus();if(document.activeElement!==d)break}}function Ue(a,d){return a.map((k,F)=>a[(d+F)%a.length])}function Ye(a,d,k){const F=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,Y=k?a.indexOf(k):-1;a=Ue(a,Math.max(Y,0));1===F.length&&(a=a.filter(ka=>ka!==k));a=a.find(ka=>ka.toLowerCase().startsWith(F.toLowerCase()));return a!==k?a:void 0}function Mg(a){return d=>"mouse"===d.pointerType?a(d):void 0}function jg(a,[d,k]){return Math.min(k,
Math.max(d,a))}function Mj(a){const d=(0,By.useRef)({value:a,previous:a});return(0,By.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function eg(a=[],d,k){a=[...a];a[k]=d;return a.sort((F,Y)=>F-Y)}function Zg(a,d,k){return 100/(k-d)*(a-d)}function Mi(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function Nh(a,d){if(1===a.length)return 0;a=a.map(F=>Math.abs(F-d));const k=Math.min(...a);return a.indexOf(k)}
function hh(a,d,k){a/=2;const F=Og([0,50],[0,a]);return(a-F(d)*k)*k}function Gh(a){return a.slice(0,-1).map((d,k)=>a[k+1]-d)}function Og(a,d){return k=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(k-a[0])}function Fg(a,d){d=Math.pow(10,d);return Math.round(a*d)/d}function Ah(a){function d(Wa){return Wa?(0,Il.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Wa},children:(0,Il.jsx)("div",{className:`w-full h-full bg-${Wa}-500`})}):(0,Il.jsx)("div",{className:"tl-color-bg",children:(0,Il.jsx)(Ih,
{name:"color-swatch"})})}var {color:k,opacity:F,popoverSide:Y,setColor:ka,setOpacity:oa}=a;a=Jf(a,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:Fa}}=Ne.default.useContext(vj),Qa=Ne.default.useMemo(()=>{let Wa="";return bl(eb=>{ka(Wa)},100,eb=>{Wa=eb.target.value})},[]);return(0,Il.jsx)(to,kf(me({},a),{border:!0,arrow:!0,side:Y,label:(0,Il.jsx)(fc,{content:Fa("whiteboard/color"),side:Y,sideOffset:14,children:d(k)}),children:(0,Il.jsxs)("div",{className:"p-1",children:[(0,Il.jsx)("div",
{className:"tl-color-palette",children:Object.values(os).map(Wa=>(0,Il.jsx)("button",{className:`tl-color-drip m-1${Wa===k?" active":""}`,onClick:()=>ka(Wa),children:d(Wa)},Wa))}),(0,Il.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,Il.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${$i(k)?"":"active"}`,children:(0,Il.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,Il.jsx)("input",me({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",
value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(k)?k:"#000000",onChange:Qa,style:{opacity:$i(k)?0:1}},a))})}),(0,Il.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:Fa("whiteboard/select-custom-color")})]}),oa&&(0,Il.jsx)("div",{className:"mx-1 my-2",children:(0,Il.jsxs)(zm,{defaultValue:[null!=F?F:0],onValueCommit:Wa=>oa(Wa[0]),max:1,step:.1,"aria-label":Fa("whiteboard/opacity"),className:"tl-slider-root",children:[(0,Il.jsx)(bv,{className:"tl-slider-track",children:(0,Il.jsx)(nl,
{className:"tl-slider-range"})}),(0,Il.jsx)(Fq,{className:"tl-slider-thumb"})]})})]})}))}function ag(a,d){a&&(0,uo.flushSync)(()=>a.dispatchEvent(d))}function Vj(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Hf(a),F=(0,Pm.useRef)(!1),Y=(0,Pm.useRef)(()=>{});(0,Pm.useEffect)(()=>{const ka=Fa=>{if(Fa.target&&!F.current){let Qa=function(){Yk("dismissableLayer.pointerDownOutside",k,Wa,{discrete:!0})};const Wa={originalEvent:Fa};"touch"===Fa.pointerType?(d.removeEventListener("click",
Y.current),Y.current=Qa,d.addEventListener("click",Y.current,{once:!0})):Qa()}F.current=!1},oa=window.setTimeout(()=>{d.addEventListener("pointerdown",ka)},0);return()=>{window.clearTimeout(oa);d.removeEventListener("pointerdown",ka);d.removeEventListener("click",Y.current)}},[d,k]);return{onPointerDownCapture:()=>F.current=!0}}function ci(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Hf(a),F=(0,Pm.useRef)(!1);(0,Pm.useEffect)(()=>{const Y=ka=>{ka.target&&!F.current&&
Yk("dismissableLayer.focusOutside",k,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",Y);return()=>d.removeEventListener("focusin",Y)},[d,k]);return{onFocusCapture:()=>F.current=!0,onBlurCapture:()=>F.current=!1}}function Ni(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function Yk(a,d,k,{discrete:F}){const Y=k.originalEvent.target;k=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:k});d&&Y.addEventListener(a,d,{once:!0});F?ag(Y,k):Y.dispatchEvent(k)}
function nj(a,{select:d=!1}={}){const k=document.activeElement;for(const F of a)if(km(F,{select:d}),document.activeElement!==k)break}function Gm(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:k=>{const F="INPUT"===k.tagName&&"hidden"===k.type;return k.disabled||k.hidden||F?NodeFilter.FILTER_SKIP:0<=k.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function Jm(a,d){for(const k of a)if(!Ul(k,{upTo:d}))return k}
function Ul(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function km(a,{select:d=!1}={}){if(a&&a.focus){const k=document.activeElement;a.focus({preventScroll:!0});a!==k&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function Nn(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function Jg(a){return a.filter(d=>"A"!==d.tagName)}function jo(a){return void 0!==
a}function Eo(a){return null!==a}function On(a){const [d,k="center"]=a.split("-");return[d,k]}function Xl(a){const d=Hf(a),k=(0,Af.useRef)(""),F=(0,Af.useRef)(0);a=(0,Af.useCallback)(ka=>{ka=k.current+ka;d(ka);(function Qa(Fa){k.current=Fa;window.clearTimeout(F.current);""!==Fa&&(F.current=window.setTimeout(()=>Qa(""),1E3))})(ka)},[d]);const Y=(0,Af.useCallback)(()=>{k.current="";window.clearTimeout(F.current)},[]);(0,Af.useEffect)(()=>()=>window.clearTimeout(F.current),[]);return[k,a,Y]}function Hm(a,
d,k){const F=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,Y=k?a.indexOf(k):-1;a=lm(a,Math.max(Y,0));1===F.length&&(a=a.filter(ka=>ka!==k));a=a.find(ka=>ka.textValue.toLowerCase().startsWith(F.toLowerCase()));return a!==k?a:void 0}function lm(a,d){return a.map((k,F)=>a[(d+F)%a.length])}function Oi(a){var {options:d,tooltip:k,popoverSide:F,chevron:Y=!0,value:ka,onValueChange:oa}=a;a=Jf(a,"options tooltip popoverSide chevron value onValueChange".split(" "));const [Fa,Qa]=oC.useState(!1);return(0,lh.jsx)("div",
kf(me({},a),{className:"tl-select-input",children:(0,lh.jsxs)(Zr,{open:Fa,onOpenChange:Qa,value:ka,onValueChange:oa,children:[(0,lh.jsx)(fc,{content:k,side:F,children:(0,lh.jsxs)(yC,{className:"tl-select-input-trigger",children:[(0,lh.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,lh.jsx)(AC,{})}),Y&&(0,lh.jsx)(BC,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,lh.jsx)(Ih,{name:Fa?"chevron-up":"chevron-down"})})]})}),(0,lh.jsx)(Gn,{className:"tl-select-input-portal",
children:(0,lh.jsxs)(Ny,{className:"tl-select-input-content",side:F,position:"popper",sideOffset:14,align:"center",onKeyDown:Wa=>Wa.stopPropagation(),children:[(0,lh.jsx)(CC,{}),(0,lh.jsx)(zC,{className:"tl-select-input-viewport",children:d.map(Wa=>(0,lh.jsx)(Mo,{className:"tl-select-input-select-item",value:Wa.value,children:(0,lh.jsx)(Gd,{children:Wa.label})},Wa.value))}),(0,lh.jsx)(oi,{})]})})]})}))}function Wj(a){var {scaleLevel:d,compact:k,popoverSide:F}=a;Jf(a,["scaleLevel","compact","popoverSide"]);
const Y=ef();({handlers:{t:a}}=DC.default.useContext(vj));const ka=[{label:k?"XS":a("whiteboard/extra-small"),value:"xs"},{label:k?"SM":a("whiteboard/small"),value:"sm"},{label:k?"MD":a("whiteboard/medium"),value:"md"},{label:k?"LG":a("whiteboard/large"),value:"lg"},{label:k?"XL":a("whiteboard/extra-large"),value:"xl"},{label:k?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,iv.jsx)(Oi,{tooltip:a("whiteboard/scale-level"),options:ka,value:d,popoverSide:F,chevron:!k,onValueChange:oa=>{Y.api.setScaleLevel(oa)}})}
function mm(a,d){return function(k){return a(d(k))}}function rn(a,d){return d(a)}function yj(a,d){return function(k){return a(d,k)}}function Im(a,d){return function(){return a(d)}}function Lk(a,d){d(a);return a}function Xi(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return d}function Fo(a){a()}function Ml(a){return function(){return a}}function cn(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(){d.map(Fo)}}function Zi(){}function yh(a,
d){return a(1,d)}function nm(a,d){a(0,d)}function Vo(a){a(2)}function Vp(a){return a(4)}function Vf(a,d){return yh(a,yj(d,0))}function ek(a,d){var k=a(1,function(F){k();d(F)});return k}function Tg(){var a=[];return function(d,k){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(k),function(){var F=a.indexOf(k);-1<F&&a.splice(F,1)};case 0:a.slice().forEach(function(F){F(k)});break;default:throw Error("unrecognized action "+d);}}}function $f(a){var d=a,k=Tg();return function(F,Y){switch(F){case 1:Y(d);
break;case 0:d=Y;break;case 4:return d}return k(F,Y)}}function sn(a){var d,k;return function(F,Y){switch(F){case 1:if(Y){if(k===Y)break;d&&d();k=Y;return d=a(1,Y)}d&&d();return Zi;case 2:d&&d();k=null;break;default:throw Error("unrecognized action "+F);}}}function rk(a){return Lk(Tg(),function(d){return Vf(a,d)})}function Pi(a,d){return Lk($f(d),function(k){return Vf(a,k)})}function Yi(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(F){return d.reduceRight(rn,
F)}}function nf(a){for(var d=arguments.length,k=Array(1<d?d-1:0),F=1;F<d;F++)k[F-1]=arguments[F];var Y=Yi.apply(void 0,k);return function(ka,oa){switch(ka){case 1:return yh(a,Y(oa));case 2:a(2);break;default:throw Error("unrecognized action "+ka);}}}function di(a,d){return a===d}function Fi(a){void 0===a&&(a=di);var d;return function(k){return function(F){a(d,F)||(d=F,k(F))}}}function Jh(a){return function(d){return function(k){a(k)&&d(k)}}}function gg(a){return function(d){return mm(d,a)}}function Km(a){return function(d){return function(){return d(a)}}}
function vm(a,d){return function(k){return function(F){return k(d=a(d,F))}}}function Ej(a){return function(d){return function(k){0<a?a--:d(k)}}}function wm(a){var d,k;return function(F){return function(Y){d=Y;k||=setTimeout(function(){k=void 0;F(d)},a)}}}function Tm(a){var d,k;return function(F){return function(Y){d=Y;k&&clearTimeout(k);k=setTimeout(function(){F(d)},a)}}}function Bg(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];var F=Array(d.length),Y=0,ka=null,oa=Math.pow(2,
d.length)-1;d.forEach(function(Fa,Qa){var Wa=Math.pow(2,Qa);yh(Fa,function(eb){var jb=Y;Y|=Wa;F[Qa]=eb;jb!==oa&&Y===oa&&ka&&(ka(),ka=null)})});return function(Fa){return function(Qa){var Wa=function(){return Fa([Qa].concat(F))};Y===oa?Wa():ka=Wa}}}function qo(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(F,Y){switch(F){case 1:return cn.apply(void 0,d.map(function(ka){return ka(1,Y)}));case 2:break;default:throw Error("unrecognized action "+F);}}}function Qh(a,
d){void 0===d&&(d=di);return nf(a,Fi(d))}function Fj(){for(var a=Tg(),d=arguments.length,k=Array(d),F=0;F<d;F++)k[F]=arguments[F];var Y=Array(k.length),ka=0,oa=Math.pow(2,k.length)-1;k.forEach(function(Fa,Qa){var Wa=Math.pow(2,Qa);yh(Fa,function(eb){Y[Qa]=eb;ka|=Wa;ka===oa&&a(0,Y)})});return function(Fa,Qa){switch(Fa){case 1:return ka===oa&&Qa(Y),a(1,Qa);case 2:a(2);break;default:throw Error("unrecognized action "+Fa);}}}function Xh(a,d,k){void 0===d&&(d=[]);k=(void 0===k?{singleton:!0}:k).singleton;
return{id:Symbol(),constructor:a,dependencies:d,singleton:k}}function Ko(a){var d=new Map;return function Y(F){var ka=F.id,oa=F.constructor,Fa=F.dependencies;if((F=F.singleton)&&d.has(ka))return d.get(ka);oa=oa(Fa.map(function(Qa){return Y(Qa)}));F&&d.set(ka,oa);return oa}(a)}function mq(a,d){if(null==a)return{};var k={},F=Object.keys(a),Y;for(Y=0;Y<F.length;Y++){var ka=F[Y];0<=d.indexOf(ka)||(k[ka]=a[ka])}return k}function Wp(a,d){if(a){if("string"===typeof a)return Go(a,d);var k=Object.prototype.toString.call(a).slice(8,
-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return Go(a,d)}}function Go(a,d){if(null==d||d>a.length)d=a.length;for(var k=0,F=Array(d);k<d;k++)F[k]=a[k];return F}function Qn(a,d){var k="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=k.call(a)).next.bind(k);if(Array.isArray(a)||(k=Wp(a))||d&&a&&"number"===typeof a.length){k&&(a=k);var F=0;return function(){return F>=
a.length?{done:!0}:{done:!1,value:a[F++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function lo(a,d){for(var k={},F={},Y=0,ka=a.length;Y<ka;)F[a[Y]]=1,Y+=1;for(var oa in d)F.hasOwnProperty(oa)||(k[oa]=d[oa]);return k}function ak(a,d,k){function F(jb,Mb){jb.propsReady&&(0,jb.propsReady)(0,!1);for(var Ub=Qn(oa),Ob;!(Ob=Ub()).done;)Ob=Ob.value,(0,jb[d.required[Ob]])(0,Mb[Ob]);for(Ub=Qn(Fa);!(Ob=
Ub()).done;)if(Ob=Ob.value,Ob in Mb)(0,jb[d.optional[Ob]])(0,Mb[Ob]);jb.propsReady&&(0,jb.propsReady)(0,!0)}function Y(jb){return Qa.reduce(function(Mb,Ub){Mb[Ub]=function(Ob){(0,jb[d.methods[Ub]])(0,Ob)};return Mb},{})}function ka(jb){return Wa.reduce(function(Mb,Ub){Mb[Ub]=sn(jb[d.events[Ub]]);return Mb},{})}var oa=Object.keys(d.required||{}),Fa=Object.keys(d.optional||{}),Qa=Object.keys(d.methods||{}),Wa=Object.keys(d.events||{}),eb=(0,vo.createContext)({});return{Component:(0,vo.forwardRef)(function(jb,
Mb){var Ub=jb.children,Ob=mq(jb,HC),jc=(0,vo.useState)(function(){return Lk(Ko(a),function(Zb){return F(Zb,Ob)})})[0],vc=(0,vo.useState)(Im(ka,jc))[0];cu(function(){for(var Zb=Qn(Wa),oc;!(oc=Zb()).done;)if(oc=oc.value,oc in Ob)(0,vc[oc])(1,Ob[oc]);return function(){Object.values(vc).map(Vo)}},[Ob,vc,jc]);cu(function(){F(jc,Ob)});(0,vo.useImperativeHandle)(Mb,Ml(Y(jc)));return(0,vo.createElement)(eb.Provider,{value:jc},k?(0,vo.createElement)(k,lo([].concat(oa,Fa,Wa),Ob),Ub):Ub)}),usePublisher:function(jb){return(0,vo.useCallback)(yj(nm,
(0,vo.useContext)(eb)[jb]),[jb])},useEmitterValue:function(jb){var Mb=(0,vo.useContext)(eb)[jb];jb=(0,vo.useState)(Im(Vp,Mb));var Ub=jb[0],Ob=jb[1];cu(function(){return yh(Mb,function(jc){jc!==Ub&&Ob(Ml(jc))})},[Mb,Ub]);return Ub},useEmitter:function(jb,Mb){var Ub=(0,vo.useContext)(eb)[jb];cu(function(){return Ub(1,Mb)},[Mb,Ub])}}}function Bh(){return Bh=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],F;for(F in k)Object.prototype.hasOwnProperty.call(k,F)&&(a[F]=
k[F])}return a},Bh.apply(this,arguments)}function tn(a,d){if(null==a)return{};var k,F,Y={},ka=Object.keys(a);for(F=0;F<ka.length;F++)0<=d.indexOf(k=ka[F])||(Y[k]=a[k]);return Y}function eo(a,d){(null==d||d>a.length)&&(d=a.length);for(var k=0,F=Array(d);k<d;k++)F[k]=a[k];return F}function gk(a,d){var k="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=k.call(a)).next.bind(k);if(Array.isArray(a)||(k=function(Y,ka){if(Y){if("string"==typeof Y)return eo(Y,ka);var oa=Object.prototype.toString.call(Y).slice(8,
-1);return"Object"===oa&&Y.constructor&&(oa=Y.constructor.name),"Map"===oa||"Set"===oa?Array.from(Y):"Arguments"===oa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(oa)?eo(Y,ka):void 0}}(a))||d&&a&&"number"==typeof a.length){k&&(a=k);var F=0;return function(){return F>=a.length?{done:!0}:{done:!1,value:a[F++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Gi(a,d){void 0===d&&
(d=!0);var k=(0,ai.useRef)(null),F=function(ka){};if("undefined"!=typeof ResizeObserver){var Y=new ResizeObserver(function(ka){ka=ka[0].target;null!==ka.offsetParent&&a(ka)});F=function(ka){ka&&d?(Y.observe(ka),k.current=ka):(k.current&&Y.unobserve(k.current),k.current=null)}}return{ref:k,callbackRef:F}}function Ji(a,d){return void 0===d&&(d=!0),Gi(a,d).callbackRef}function qq(a,d,k,F,Y,ka,oa){return Gi(function(Fa){for(var Qa=function(jb,Mb,Ub,Ob){Ub=jb.length;if(0===Ub)return null;for(var jc=[],
vc=0;vc<Ub;vc++){var Zb=jb.item(vc);if(Zb&&void 0!==Zb.dataset.index){var oc=parseInt(Zb.dataset.index),lc=parseFloat(Zb.dataset.knownSize),Ic=Mb(Zb,"offsetHeight");if(0===Ic&&Ob("Zero-sized element, this should not happen",{child:Zb},Qm.ERROR),Ic!==lc)Zb=jc[jc.length-1],0===jc.length||Zb.size!==Ic||Zb.endIndex!==oc-1?jc.push({startIndex:oc,endIndex:oc,size:Ic}):jc[jc.length-1].endIndex++}}return jc}(Fa.children,d,0,Y),Wa=Fa.parentElement;!Wa.dataset.virtuosoScroller;)Wa=Wa.parentElement;var eb="window"===
Wa.firstElementChild.dataset.viewportType;F({scrollTop:Math.max(oa?oa.scrollTop:eb?window.pageYOffset||document.documentElement.scrollTop:Wa.scrollTop,0),scrollHeight:oa?oa.scrollHeight:eb?document.documentElement.scrollHeight:Wa.scrollHeight,viewportHeight:oa?oa.offsetHeight:eb?window.innerHeight:Wa.offsetHeight});null==ka||ka(function(jb,Mb,Ub){return"normal"===Mb||null!=Mb&&Mb.endsWith("px")||Ub("row-gap was not resolved to pixel value correctly",Mb,Qm.WARN),"normal"===Mb?0:parseInt(null!=Mb?Mb:
"0",10)}(0,getComputedStyle(Fa).rowGap,Y));null!==Qa&&a(Qa)},k)}function Yl(a,d){return Math.round(a.getBoundingClientRect()[d])}function x(a,d,k,F,Y){void 0===F&&(F=Zi);var ka=(0,ai.useRef)(null),oa=(0,ai.useRef)(null),Fa=(0,ai.useRef)(null),Qa=(0,ai.useRef)(!1),Wa=(0,ai.useCallback)(function(eb){eb=eb.target;var jb=eb===window||eb===document,Mb=jb?window.pageYOffset||document.documentElement.scrollTop:eb.scrollTop,Ub=jb?document.documentElement.scrollHeight:eb.scrollHeight,Ob=jb?window.innerHeight:
eb.offsetHeight;eb=function(){a({scrollTop:Math.max(Mb,0),scrollHeight:Ub,viewportHeight:Ob})};Qa.current?(0,IC.flushSync)(eb):eb();Qa.current=!1;null!==oa.current&&(Mb===oa.current||0>=Mb||Mb===Ub-Ob)&&(oa.current=null,d(!0),Fa.current&&(clearTimeout(Fa.current),Fa.current=null))},[a,d]);return(0,ai.useEffect)(function(){var eb=Y||ka.current;return F(Y||ka.current),Wa({target:eb}),eb.addEventListener("scroll",Wa,{passive:!0}),function(){F(null);eb.removeEventListener("scroll",Wa)}},[ka,Wa,k,F,Y]),
{scrollerRef:ka,scrollByCallback:function(eb){Qa.current=!0;ka.current.scrollBy(eb)},scrollToCallback:function(eb){var jb=ka.current;if(jb&&!("offsetHeight"in jb&&0===jb.offsetHeight)){var Mb,Ub,Ob,jc="smooth"===eb.behavior;if(jb===window?(Ub=Math.max(Yl(document.documentElement,"height"),document.documentElement.scrollHeight),Mb=window.innerHeight,Ob=document.documentElement.scrollTop):(Ub=jb.scrollHeight,Mb=Yl(jb,"height"),Ob=jb.scrollTop),eb.top=Math.ceil(Math.max(Math.min(Ub-Mb,eb.top),0)),1.01>
Math.abs(Mb-Ub)||eb.top===Ob)return a({scrollTop:Ob,scrollHeight:Ub,viewportHeight:Mb}),void(jc&&d(!0));jc?(oa.current=eb.top,Fa.current&&clearTimeout(Fa.current),Fa.current=setTimeout(function(){Fa.current=null;oa.current=null;d(!0)},1E3)):oa.current=null;jb.scrollTo(eb)}}}}function U(a,d,k,F,Y){return void 0===F&&(F=mj),void 0===Y&&(Y=mj),{k:a,v:d,lvl:k,l:F,r:Y}}function wa(a,d){if(a===mj)return mj;var k=a.k,F=a.l,Y=a.r;if(d===k){if(F===mj)return Y;if(Y===mj)return F;d=tb(F);return Fd(Ac(a,{k:d[0],
v:d[1],l:bc(F)}))}return Fd(Ac(a,d<k?{l:wa(F,d)}:{r:wa(Y,d)}))}function sa(a,d,k){return(void 0===k&&(k="k"),a===mj)?[-Infinity,void 0]:a[k]===d?[a.k,a.v]:a[k]<d?(d=sa(a.r,d,k),-Infinity===d[0]?[a.k,a.v]:d):sa(a.l,d,k)}function Ea(a,d,k){return a===mj?U(d,k,1):d===a.k?Ac(a,{k:d,v:k}):De(Rf(Ac(a,d<a.k?{l:Ea(a.l,d,k)}:{r:Ea(a.r,d,k)})))}function Ya(a,d,k){if(a===mj)return[];var F=a.k,Y=a.v,ka=a.r,oa=[];return F>d&&(oa=oa.concat(Ya(a.l,d,k))),F>=d&&F<=k&&oa.push({k:F,v:Y}),F<=k&&(oa=oa.concat(Ya(ka,
d,k))),oa}function pb(a){return a===mj?[]:[].concat(pb(a.l),[{k:a.k,v:a.v}],pb(a.r))}function tb(a){return a.r===mj?[a.k,a.v]:tb(a.r)}function bc(a){return a.r===mj?a.l:Fd(Ac(a,{r:bc(a.r)}))}function Ac(a,d){return U(void 0!==d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==d.r?d.r:a.r)}function Sc(a){return a===mj||a.lvl>a.r.lvl}function Fd(a){var d=a.l,k=a.r,F=a.lvl;if(k.lvl>=F-1&&d.lvl>=F-1)return a;if(F>k.lvl+1){if(Sc(d))return Rf(Ac(a,{lvl:F-1}));if(d===
mj||d.r===mj)throw Error("Unexpected empty nodes");return Ac(d.r,{l:Ac(d,{r:d.r.l}),r:Ac(a,{l:d.r.r,lvl:F-1}),lvl:F})}if(Sc(a))return De(Ac(a,{lvl:F-1}));if(k===mj||k.l===mj)throw Error("Unexpected empty nodes");d=k.l;var Y=Sc(d)?k.lvl-1:k.lvl;return Ac(d,{l:Ac(a,{r:d.l,lvl:F-1}),r:De(Ac(k,{l:d.r,lvl:Y})),lvl:d.lvl+1})}function Ld(a,d,k){return a===mj?[]:Nd(Ya(a,sa(a,d)[0],k),function(F){return{index:F.k,value:F.v}})}function Nd(a,d){var k=a.length;if(0===k)return[];var F=d(a[0]),Y=F.index;F=F.value;
for(var ka=[],oa=1;oa<k;oa++){var Fa=d(a[oa]),Qa=Fa.index;Fa=Fa.value;ka.push({start:Y,end:Qa-1,value:F});Y=Qa;F=Fa}return ka.push({start:Y,end:Infinity,value:F}),ka}function De(a){var d=a.r,k=a.lvl;return d===mj||d.r===mj||d.lvl!==k||d.r.lvl!==k?a:Ac(d,{l:Ac(a,{r:d.l}),lvl:k+1})}function Rf(a){var d=a.l;return d===mj||d.lvl!==a.lvl?a:Ac(d,{r:Ac(a,{l:d.r})})}function Ug(a,d,k,F){void 0===F&&(F=0);for(var Y=a.length-1;F<=Y;){var ka=Math.floor((F+Y)/2),oa=k(a[ka],d);if(0===oa)return ka;if(-1===oa){if(2>
Y-F)return ka-1;Y=ka-1}else{if(Y===F)return ka;F=ka+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);}function yk(a){var d=a.size,k=a.startIndex,F=a.endIndex;return function(Y){return Y.start===k&&(Y.end===F||Infinity===Y.end)&&Y.value===d}}function Dg(a,d){a=a.index;return d===a?0:d<a?-1:1}function Oh(a,d){a=a.offset;return d===a?0:d<a?-1:1}function Qi(a){return{index:a.index,value:a}}function hj(a,d,k,F){var Y=0,ka=0,oa=0,Fa;0!==d?(oa=a[Fa=Ug(a,d-1,Dg)].offset,
ka=sa(k,d-1),Y=ka[0],ka=ka[1],a.length&&a[Fa].size===sa(k,d)[1]&&--Fa,a=a.slice(0,Fa+1)):a=[];for(d=gk(Ld(k,d,Infinity));!(k=d()).done;)Fa=k.value,k=Fa.start,Fa=Fa.value,Y=k-Y,oa=Y*ka+oa+Y*F,a.push({offset:oa,size:Fa,index:k}),Y=k,ka=Fa;return{offsetTree:a,lastIndex:Y,lastOffset:oa,lastSize:ka}}function Ii(a,d){var k=d[0],F=d[1],Y=d[3];0<k.length&&(0,d[2])("received item sizes",k,Qm.DEBUG);var ka=a.sizeTree;d=ka;var oa=0;if(0<F.length&&ka===mj&&2===k.length){var Fa=k[0].size,Qa=k[1].size;d=F.reduce(function(eb,
jb){return Ea(Ea(eb,jb,Fa),jb+1,Qa)},d)}else k=function(eb,jb){var Mb,Ub=eb===mj?0:Infinity;for(jb=gk(jb);!(Mb=jb()).done;){var Ob=Mb.value;Mb=Ob.size;var jc=Ob.startIndex,vc=Ob.endIndex;if(Ub=Math.min(Ub,jc),eb===mj)eb=Ea(eb,0,Mb);else{var Zb=Ld(eb,jc-1,vc+1);if(!Zb.some(yk(Ob))){var oc,lc=Ob=!1;for(Zb=gk(Zb);!(oc=Zb()).done;){var Ic=oc.value;oc=Ic.start;var Lc=Ic.end;Ic=Ic.value;Ob?(vc>=oc||Mb===Ic)&&(eb=wa(eb,oc)):(lc=Ic!==Mb,Ob=!0);Lc>vc&&vc>=oc&&Ic!==Mb&&(eb=Ea(eb,vc+1,Ic))}lc&&(eb=Ea(eb,jc,
Mb))}}}return[eb,Ub]}(d,k),d=k[0],oa=k[1];if(d===ka)return a;a=hj(a.offsetTree,oa,d,Y);var Wa=a.offsetTree;return{sizeTree:d,offsetTree:Wa,lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:F.reduce(function(eb,jb){return Ea(eb,jb,Xg(jb,Wa,Y))},mj),groupIndices:F}}function Xg(a,d,k){if(0===d.length)return 0;d=d[Ug(d,a,Dg)];a-=d.index;a=d.size*a+(a-1)*k+d.offset;return 0<a?a+k:a}function cg(a,d,k){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+1;a=ji("LAST"===
a.index?k:a.index,d);return Math.max(0,a,Math.min(k,a))}function ji(a,d){if(d.groupOffsetTree===mj)return a;for(var k=0;d.groupIndices[k]<=a+k;)k++;return a+k}function sh(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&yH||(a.behavior="auto"),a.offset||(a.offset=0),a}function Vk(a){return!!a&&("smooth"===a?"smooth":"auto")}function Ek(a){return a.reduce(function(d,k){return d.groupIndices.push(d.totalCount),d.totalCount+=k+1,d},{totalCount:0,groupIndices:[]})}function fk(a,
d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function bn(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function fm(a,d,k){return"number"==typeof a?"up"===k&&"top"===d||"down"===k&&"bottom"===d?a:0:"up"===k?"top"===d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function Jo(a,d,k){if(0===a.length)return[];if(d.groupOffsetTree===mj)return a.map(function(Qa){return Bh({},Qa,{index:Qa.index+k,originalIndex:Qa.index})});var F,Y=[],ka=Ld(d.groupOffsetTree,a[0].index,a[a.length-1].index),
oa=void 0,Fa=0;for(a=gk(a);!(F=a()).done;)F=F.value,(!oa||oa.end<F.index)&&(oa=ka.shift(),Fa=d.groupIndices.indexOf(oa.start)),Y.push(Bh({},F.index===oa.start?{type:"group",index:Fa}:{index:F.index-(Fa+1)+k,groupIndex:Fa},{size:F.size,offset:F.offset,originalIndex:F.index,data:F.data}));return Y}function Up(a,d,k,F,Y,ka){var oa=0,Fa=0;0<a.length&&(oa=a[0].offset,Fa=a[a.length-1],Fa=Fa.offset+Fa.size);var Qa=k-Y.lastIndex,Wa=oa;F=Y.lastOffset+Qa*Y.lastSize+(Qa-1)*F-Fa;return{items:Jo(a,Y,ka),topItems:Jo(d,
Y,ka),topListHeight:d.reduce(function(eb,jb){return jb.size+eb},0),offsetTop:oa,offsetBottom:F,top:Wa,bottom:Fa,totalCount:k,firstItemIndex:ka}}function Io(a){var d,k=!1;return function(){return k||(k=!0,d=a()),d}}function th(a,d){var k=(0,ai.useRef)(null),F=(0,ai.useCallback)(function(Qa){if(null!==Qa&&Qa.offsetParent){var Wa=Qa.getBoundingClientRect();Qa=Wa.width;if(d){var eb=d.getBoundingClientRect();Wa=Wa.top-eb.top;eb=eb.height-Math.max(0,Wa);Wa+=d.scrollTop}else eb=window.innerHeight-Math.max(0,
Wa.top),Wa=Wa.top+window.pageYOffset;k.current={offsetTop:Wa,visibleHeight:eb,visibleWidth:Qa};a(k.current)}},[a,d]),Y=Gi(F),ka=Y.callbackRef,oa=Y.ref,Fa=(0,ai.useCallback)(function(){F(oa.current)},[F,oa]);return(0,ai.useEffect)(function(){if(d){d.addEventListener("scroll",Fa);var Qa=new ResizeObserver(Fa);return Qa.observe(d),function(){d.removeEventListener("scroll",Fa);Qa.unobserve(d)}}return window.addEventListener("scroll",Fa),window.addEventListener("resize",Fa),function(){window.removeEventListener("scroll",
Fa);window.removeEventListener("resize",Fa)}},[Fa,d]),ka}function ro(a){return a}function Zk(a,d){var k=Tg();return yh(k,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),Vf(k,a),k}function hk(a,d){if("string"!=typeof a)return{context:d}}function ko(a){var d=a.usePublisher,k=a.useEmitter,F=a.useEmitterValue;return xh.memo(function(Y){var ka=Y.style,oa=Y.children;Y=tn(Y,Yy);var Fa=d("scrollContainerState"),Qa=
F("ScrollerComponent"),Wa=d("smoothScrollTargetReached"),eb=F("scrollerRef"),jb=F("context");Fa=x(Fa,Wa,Qa,eb);Wa=Fa.scrollerRef;eb=Fa.scrollByCallback;return k("scrollTo",Fa.scrollToCallback),k("scrollBy",eb),(0,ai.createElement)(Qa,Bh({ref:Wa,style:Bh({},CH,ka),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},Y,hk(Qa,jb)),oa)})}function lp(a){var d=a.usePublisher,k=a.useEmitter,F=a.useEmitterValue;return xh.memo(function(Y){var ka=Y.style,oa=Y.children;Y=tn(Y,QC);var Fa=
d("windowScrollContainerState"),Qa=F("ScrollerComponent"),Wa=d("smoothScrollTargetReached"),eb=F("totalListHeight"),jb=F("deviation"),Mb=F("customScrollParent"),Ub=F("context");Wa=x(Fa,Wa,Qa,Zi,Mb);var Ob=Wa.scrollerRef;Fa=Wa.scrollByCallback;Wa=Wa.scrollToCallback;return wH(function(){return Ob.current=Mb||window,function(){Ob.current=null}},[Ob,Mb]),k("windowScrollTo",Wa),k("scrollBy",Fa),(0,ai.createElement)(Qa,Bh({style:Bh({position:"relative"},ka,0!==eb?{height:eb+jb}:{}),"data-virtuoso-scroller":!0},
Y,hk(Qa,Ub)),oa)})}function mp(a,d,k){return Array.from({length:d-a+1}).map(function(F,Y){return{index:Y+a,data:null==k?void 0:k[Y+a]}})}function Pn(a,d){return a&&a.column===d.column&&a.row===d.row}function mo(a,d,k,F){var Y=k.height;return void 0===Y||0===F.length?{top:0,bottom:0}:{top:Nl(a,d,k,F[0].index),bottom:Nl(a,d,k,F[F.length-1].index)+Y}}function Nl(a,d,k,F){var Y=d.column;a=wj(1,qv((a.width+Y)/(k.width+Y)));F=qv(F/a);k=F*k.height+wj(0,F-1)*d.row;return 0<k?k+d.row:k}function om(a,d,k){return"normal"===
d||null!=d&&d.endsWith("px")||k(a+" was not resolved to pixel value correctly",d,Qm.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function un(a,d){un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,F){k.__proto__=F;return k};return un(a,d)}function rp(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;un(a,d)}function bo(a){bo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return bo(a)}function vr(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function Np(a,d,k){Np=vr()?Reflect.construct.bind():function(F,Y,ka){var oa=[null];oa.push.apply(oa,Y);F=new (Function.bind.apply(F,oa));ka&&un(F,ka.prototype);return F};return Np.apply(null,arguments)}function Pp(a){var d="function"===typeof Map?new Map:void 0;Pp=function(k){function F(){return Np(k,
arguments,bo(this).constructor)}if(null===k||-1===Function.toString.call(k).indexOf("[native code]"))return k;if("function"!==typeof k)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof d){if(d.has(k))return d.get(k);d.set(k,F)}F.prototype=Object.create(k.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}});return un(F,k)};return Pp(a)}function ns(a,d,k){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*k)}function tp(a,
d,k,F){void 0===F&&(F=ns);if(0===d)return F(k,k,k);a=(a%360+360)%360/60;var Y=(1-Math.abs(2*k-1))*d,ka=Y*(1-Math.abs(a%2-1)),oa=d=0,Fa=0;0<=a&&1>a?(d=Y,oa=ka):1<=a&&2>a?(d=ka,oa=Y):2<=a&&3>a?(oa=Y,Fa=ka):3<=a&&4>a?(oa=ka,Fa=Y):4<=a&&5>a?(d=ka,Fa=Y):5<=a&&6>a&&(d=Y,Fa=ka);k-=Y/2;return F(d+k,oa+k,Fa+k)}function Vq(a){if("string"!==typeof a)throw new Yn(3);if("string"===typeof a){var d=a.toLowerCase();a=Qw[d]?"#"+Qw[d]:a}if(a.match(bD))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],
16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(cD))return d=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};if(a.match(cz))return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(gp))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],
16),alpha:d};if(d=at.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)};if(d=pn.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var k=Rw.exec(a);if(k){d=parseInt(""+k[1],10);var F=parseInt(""+k[2],10)/100;k=parseInt(""+k[3],10)/100;d="rgb("+tp(d,F,k)+")";F=at.exec(d);if(!F)throw new Yn(4,a,d);return{red:parseInt(""+F[1],10),
green:parseInt(""+F[2],10),blue:parseInt(""+F[3],10)}}if(d=tv.exec(a.substring(0,50))){F=parseInt(""+d[1],10);k=parseInt(""+d[2],10)/100;var Y=parseInt(""+d[3],10)/100;F="rgb("+tp(F,k,Y)+")";k=at.exec(F);if(!k)throw new Yn(4,a,F);return{red:parseInt(""+k[1],10),green:parseInt(""+k[2],10),blue:parseInt(""+k[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new Yn(5);}function no(a){a=a.toString(16);return 1===a.length?"0"+a:a}function np(a,d,k){return Qo("#"+no(Math.round(255*
a))+no(Math.round(255*d))+no(Math.round(255*k)))}function Mp(a,d,k){if("number"===typeof a&&"number"===typeof d&&"number"===typeof k)return Qo("#"+no(a)+no(d)+no(k));if("object"===typeof a&&void 0===d&&void 0===k)return Qo("#"+no(a.red)+no(a.green)+no(a.blue));throw new Yn(6);}function Pq(a){if("object"!==typeof a)throw new Yn(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?Mp(a.red,a.green,a.blue):
"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new Yn(7);return a}if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return Mp(a);if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?tp(a.hue,a.saturation,a.lightness,np):"rgba("+tp(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new Yn(2);
return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=tp(a.hue,a.saturation,a.lightness,np);else throw new Yn(1);return a}throw new Yn(8);}function nq(a,d,k){return function(){var F=k.concat(Array.prototype.slice.call(arguments));return F.length>=d?a.apply(this,F):nq(a,d,F)}}function oq(a,d){if("transparent"===d)return d;d=Vq(d);var k=d.red/255,F=d.green/255,Y=d.blue/255,
ka=Math.max(k,F,Y),oa=Math.min(k,F,Y),Fa=(ka+oa)/2;if(ka===oa)d=void 0!==d.alpha?{hue:0,saturation:0,lightness:Fa,alpha:d.alpha}:{hue:0,saturation:0,lightness:Fa};else{var Qa=ka-oa;oa=.5<Fa?Qa/(2-ka-oa):Qa/(ka+oa);switch(ka){case k:k=(F-Y)/Qa+(F<Y?6:0);break;case F:k=(Y-k)/Qa+2;break;default:k=(k-F)/Qa+4}k*=60;d=void 0!==d.alpha?{hue:k,saturation:oa,lightness:Fa,alpha:d.alpha}:{hue:k,saturation:oa,lightness:Fa}}Fa=$e;a=d.lightness-parseFloat(a);return Pq(Fa({},d,{lightness:Math.max(0,Math.min(1,a))}))}
function jn(a,d){var k;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let F=null!=(k=d.fill)?k:a.props.fill;void 0===F||$i(F)||"var(--ls-secondary-background-color)"===F||d.noFill||!LH.includes(a.props.type)||(a=dk(.3,F),d.stroke=a);return d}function Uq({strokeWidth:a,size:d,mode:k}){return"svg"===k?(0,mu.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,
d[1]-2*a),strokeWidth:4*a}):(0,mu.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function vn(){const a=ef();return"panning"===a.inputs.state||"pinching"===a.inputs.state}function Op({left:a,middle:d,right:k,stroke:F,strokeWidth:Y}){return(0,Vw.jsxs)("g",{children:[(0,Vw.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${k}`}),(0,Vw.jsx)("path",{d:`M ${a} L ${d} ${k}`,fill:"none",
stroke:F,strokeWidth:Y,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Qp(a,d,k){d=K(a,d,a,k).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(k=d[0])?je.rotWith(k,a,Math.PI/6):a;a=k?je.rotWith(k,a,-Math.PI/6):a;return{left:d,right:a}}function Wq(a,d,k){const {left:F,right:Y}=Qp(a,d,k);return`M ${F} L ${a} ${Y}`}function rm(a,d,k,F,Y){a=a.strokeWidth;var ka=je.dist(d,k);a=Math.min(ka/3,16*a);ka=[];ka.push(`M ${d} L ${k}`);
F&&ka.push(Wq(d,k,a));Y&&ka.push(Wq(k,d,a));return ka.join(" ")}function Rq({id:a,bounds:d,labelSize:k,offset:F,scale:Y=1}){return(0,xv.jsx)("defs",{children:(0,xv.jsxs)("mask",{id:a+"_clip",children:[(0,xv.jsx)("rect",{x:-100,y:-100,width:d.width+200,height:d.height+200,fill:"white"}),(0,xv.jsx)("rect",{x:d.width/2-k[0]/2*Y+((null==F?void 0:F[0])||0),y:d.height/2-k[1]/2*Y+((null==F?void 0:F[1])||0),width:k[0]*Y,height:k[1]*Y,rx:4*Y,ry:4*Y,fill:"black"})]})})}function op(a,d,k,F=Y=>Y){return a*F(.5-
d*(.5-k))}function pp(a){return[-a[0],-a[1]]}function Pl(a,d){return[a[0]+d[0],a[1]+d[1]]}function Ol(a,d){return[a[0]-d[0],a[1]-d[1]]}function al(a,d){return[a[0]*d,a[1]*d]}function qp(a){return[a[1],-a[0]]}function pq(a,d){return a[0]===d[0]&&a[1]===d[1]}function Rp(a){return a[0]*a[0]+a[1]*a[1]}function La(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function Xa(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function Ka(a,d,k){let F=Math.sin(k);k=Math.cos(k);let Y=a[0]-d[0];a=a[1]-d[1];return[Y*
k-a*F+d[0],Y*F+a*k+d[1]]}function fb(a,d,k){return Pl(a,al(Ol(d,a),k))}function Jb(a,d,k){return Pl(a,al(d,k))}function tc(a,d={}){let {size:k=16,smoothing:F=.5,thinning:Y=.5,simulatePressure:ka=!0,easing:oa=Yd=>Yd,start:Fa={},end:Qa={},last:Wa=!1}=d,{cap:eb=!0,easing:jb=Yd=>Yd*(2-Yd)}=Fa,{cap:Mb=!0,easing:Ub=Yd=>--Yd*Yd*Yd+1}=Qa;if(0===a.length||0>=k)return[];var Ob=a[a.length-1].runningLength;let jc=!1===Fa.taper?0:!0===Fa.taper?Math.max(k,Ob):Fa.taper,vc=!1===Qa.taper?0:!0===Qa.taper?Math.max(k,
Ob):Qa.taper;var Zb=Math.pow(k*F,2);d=[];let oc=[];var lc=a.slice(0,10).reduce((Yd,ld)=>{var Hd=ld.pressure;ka&&(ld=eq(1,ld.distance/k),Hd=eq(1,1-ld),Hd=eq(1,Yd+.275*(Hd-Yd)*ld));return(Yd+Hd)/2},a[0].pressure),Ic=op(k,Y,a[a.length-1].pressure,oa),Lc;let wd=a[0].vector;var Td=a[0].point;let We=Td;var ne=Td;let Ke=We;var Bf=!1;for(var Se=0;Se<a.length;Se++){var {pressure:Xe}=a[Se];let {point:Yd,vector:ld,distance:Hd,runningLength:Oe}=a[Se];if(Se<a.length-1&&3>Ob-Oe)continue;Y?(ka&&(Ic=eq(1,Hd/k),Xe=
eq(1,1-Ic),Xe=eq(1,lc+.275*(Xe-lc)*Ic)),Ic=op(k,Y,Xe,oa)):Ic=k/2;void 0===Lc&&(Lc=Ic);var Xd=Oe<jc?jb(Oe/jc):1,nd=Ob-Oe<vc?Ub((Ob-Oe)/vc):1;Ic=Math.max(.01,Ic*Math.min(Xd,nd));nd=(Se<a.length-1?a[Se+1]:a[Se]).vector;let mf=Se<a.length-1?ld[0]*nd[0]+ld[1]*nd[1]:1;Xd=null!==mf&&0>mf;if(0>ld[0]*wd[0]+ld[1]*wd[1]&&!Bf||Xd){Td=al(qp(wd),Ic);for(let Pf=1/13,Cf=0;1>=Cf;Cf+=Pf)ne=Ka(Ol(Yd,Td),Yd,mr*Cf),d.push(ne),Ke=Ka(Pl(Yd,Td),Yd,mr*-Cf),oc.push(Ke);Td=ne;We=Ke;Xd&&(Bf=!0)}else(Bf=!1,Se===a.length-1)?(Xe=
al(qp(ld),Ic),d.push(Ol(Yd,Xe)),oc.push(Pl(Yd,Xe))):(lc=al(qp(fb(nd,ld,mf)),Ic),ne=Ol(Yd,lc),(1>=Se||Rp(Ol(Td,ne))>Zb)&&(d.push(ne),Td=ne),Ke=Pl(Yd,lc),(1>=Se||Rp(Ol(We,Ke))>Zb)&&(oc.push(Ke),We=Ke),lc=Xe,wd=ld)}Ob=a[0].point.slice(0,2);Zb=1<a.length?a[a.length-1].point.slice(0,2):Pl(a[0].point,[1,1]);ne=[];Bf=[];if(1===a.length){if(!jc&&!vc||Wa){a=Jb(Ob,La(qp(Ol(Ob,Zb))),-(Lc||Ic));d=[];for(let Yd=1/13,ld=Yd;1>=ld;ld+=Yd)d.push(Ka(a,Ob,2*mr*ld));return d}}else{if(!(jc||vc&&1===a.length))if(eb)for(let Yd=
1/13,ld=Yd;1>=ld;ld+=Yd)Lc=Ka(oc[0],Ob,mr*ld),ne.push(Lc);else Se=Ol(d[0],oc[0]),Lc=al(Se,.5),Se=al(Se,.51),ne.push(Ol(Ob,Lc),Ol(Ob,Se),Pl(Ob,Se),Pl(Ob,Lc));Lc=qp(pp(a[a.length-1].vector));if(vc||jc&&1===a.length)Bf.push(Zb);else if(Mb){a=Jb(Zb,Lc,Ic);for(let Yd=1/29,ld=Yd;1>ld;ld+=Yd)Bf.push(Ka(a,Zb,3*mr*ld))}else Bf.push(Pl(Zb,al(Lc,Ic)),Pl(Zb,al(Lc,.99*Ic)),Ol(Zb,al(Lc,.99*Ic)),Ol(Zb,al(Lc,Ic)))}return d.concat(Bf,oc.reverse(),ne)}function Wc(a,d={}){var k;let {streamline:F=.5,size:Y=16,last:ka=
!1}=d;if(0===a.length)return[];d=.15+.85*(1-F);a=Array.isArray(a[0])?a:a.map(({x:jb,y:Mb,pressure:Ub=.5})=>[jb,Mb,Ub]);if(2===a.length){var oa=a[1];a=a.slice(0,-1);for(var Fa=1;5>Fa;Fa++)a.push(fb(a[0],oa,Fa/4))}1===a.length&&(a=[...a,[...Pl(a[0],[1,1]),...a[0].slice(2)]]);oa=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Fa=!1;let Qa=0,Wa=oa[0],eb=a.length-1;for(let jb=1;jb<a.length;jb++){let Mb=ka&&jb===eb?a[jb].slice(0,2):fb(Wa.point,a[jb],d);
if(pq(Wa.point,Mb))continue;let Ub=Xa(Mb,Wa.point);if(Qa+=Ub,jb<eb&&!Fa){if(Qa<Y)continue;Fa=!0}Wa={point:Mb,pressure:0<=a[jb][2]?a[jb][2]:.5,vector:La(Ol(Wa.point,Mb)),distance:Ub,runningLength:Qa};oa.push(Wa)}return oa[0].vector=(null==(k=oa[1])?void 0:k.vector)||[0,0],oa}function Md(a,d=4/3){return(new Wh(a)).exportAsSVG(d)}function le(a,d=4/3){return(new Wh(a)).generatePreviewJsx(void 0,d)}function Ie({id:a,type:d,onRemove:k,showContent:F}){const Y=ef(),{handlers:ka}=Py.default.useContext(vj),
oa=ka.t;return(0,gj.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,gj.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,gj.jsx)(Qy,{id:a,showReferenceContent:F})}),(0,gj.jsx)("div",{className:"flex-1"}),ka.getBlockPageName(a)!==Y.currentPage.name&&(0,gj.jsx)(ja,{tooltip:oa("whiteboard/open-page"),type:"button",onClick:()=>null==ka?void 0:ka.redirectToPage(a),children:(0,gj.jsx)(Ih,{name:"open-as-page"})}),(0,gj.jsx)(ja,
{tooltip:oa("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==ka?void 0:ka.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,gj.jsx)(Ih,{name:"move-to-sidebar-right"})}),k&&(0,gj.jsx)(ja,{className:"tl-shape-links-panel-item-remove-button",tooltip:oa("whiteboard/remove-link"),type:"button",onClick:k,children:(0,gj.jsx)(Ih,{name:"x",className:"!translate-y-0"})})]})}function ea({options:a,value:d,onValueChange:k}){return(0,qr.jsx)(oD,{className:"tl-toggle-group-input",type:"single",
value:d,onValueChange:k,children:a.map(F=>(0,qr.jsx)(fc,{content:F.tooltip,children:(0,qr.jsx)("div",{className:"inline-block",children:(0,qr.jsx)(pD,{className:"tl-toggle-group-input-button",value:F.value,disabled:F.value===d,children:(0,qr.jsx)(Ih,{name:F.icon})})})},F.value))})}function ua({options:a,value:d,onValueChange:k}){return(0,qr.jsx)(oD,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:k,children:a.map(F=>(0,qr.jsx)(pD,{className:"tl-toggle-group-input-button",value:F.value,
children:(0,qr.jsx)(Ih,{name:F.icon})},F.value))})}function Ua(a){return ef().selectedShapesArray.filter(d=>!d.props.isLocked).filter(d=>{var k;return null==(k=mz[d.props.type])?void 0:k.includes(a)})}function vb(a){return d=>"mouse"!==d.pointerType?a(d):void 0}function ec(a){var d;a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";const k=a[0].toLowerCase();[a]=null!=(d=Object.entries(sr).find(([,F])=>F.includes(k)))?d:["unknown",null];return a}function xc(...a){return(...d)=>vi(this,null,function*(){for(const k of a){const F=
yield k(...d);if(F&&0<F.length)return F}return null})}function Uc(a,d){return vi(this,null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():null})}function jd(){const {handlers:a}=wD.useContext(vj);return wD.useCallback((d,k)=>vi(this,null,function*(){if(k.shiftKey&&1===d.selectedShapesArray.length){var F=yield navigator.clipboard.read();let Y;0<F.length&&(F=(yield(yield F[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(F)&&
40===F.length?(F=F.slice(2,-2),Mk(F)&&(Y=F)):/^\[\[.*\]\]$/.test(F)&&(Y=F.slice(2,-2)));if(Y){d.selectedShapesArray[0].update({refs:[Y]});d.persist();return}}xD(d,k,a)}),[])}function vd(){const a=jd();return aI.useCallback((d,k)=>vi(this,[d,k],function*(F,{dataTransfer:Y,point:ka}){a(F,{point:ka,shiftKey:!1,dataTransfer:Y,fromDrop:!0})}),[])}function Sd(){const {handlers:a}=dx.useContext(vj);return dx.useCallback((d,{text:k,html:F})=>{a.copyToClipboard(k,F)},[])}function Ae(){return ex.default.useCallback(a=>
vi(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var ff=Object.create,vf=Object.defineProperty,Rg=Object.defineProperties,Wg=Object.getOwnPropertyDescriptor,Vi=Object.getOwnPropertyDescriptors,gl=Object.getOwnPropertyNames,Dk=Object.getOwnPropertySymbols,ui=Object.getPrototypeOf,lk=Object.prototype.hasOwnProperty,dm=Object.prototype.propertyIsEnumerable,oo=(a,d,k)=>d in a?vf(a,d,{enumerable:!0,configurable:!0,writable:!0,value:k}):
a[d]=k,me=(a,d)=>{for(var k in d||={})lk.call(d,k)&&oo(a,k,d[k]);if(Dk)for(k of Dk(d))dm.call(d,k)&&oo(a,k,d[k]);return a},kf=(a,d)=>Rg(a,Vi(d)),Jf=(a,d)=>{var k={},F;for(F in a)lk.call(a,F)&&0>d.indexOf(F)&&(k[F]=a[F]);if(null!=a&&Dk)for(F of Dk(a))0>d.indexOf(F)&&dm.call(a,F)&&(k[F]=a[F]);return k},Fh=(a,d)=>function(){return d||(0,a[gl(a)[0]])((d={exports:{}}).exports,d),d.exports},wn=(a,d,k,F)=>{if(d&&"object"===typeof d||"function"===typeof d)for(let Y of gl(d))lk.call(a,Y)||Y===k||vf(a,Y,{get:()=>
d[Y],enumerable:!(F=Wg(d,Y))||F.enumerable});return a},uf=(a,d,k)=>(k=null!=a?ff(ui(a)):{},wn(!d&&a&&a.__esModule?k:vf(k,"default",{value:a,enumerable:!0}),a)),ie=(a,d,k,F)=>{for(var Y=1<F?void 0:F?Wg(d,k):d,ka=a.length-1,oa;0<=ka;ka--)if(oa=a[ka])Y=(F?oa(d,k,Y):oa(Y))||Y;F&&Y&&vf(d,k,Y);return Y},gb=(a,d,k)=>{oo(a,"symbol"!==typeof d?d+"":d,k);return k},vi=(a,d,k)=>new Promise((F,Y)=>{var ka=Qa=>{try{Fa(k.next(Qa))}catch(Wa){Y(Wa)}},oa=Qa=>{try{Fa(k.throw(Qa))}catch(Wa){Y(Wa)}},Fa=Qa=>Qa.done?F(Qa.value):
Promise.resolve(Qa.value).then(ka,oa);Fa((k=k.apply(a,d)).next())}),gn=Fh({["../../node_modules/rbush/rbush.min.js"](a,d){!function(k,F){"object"==typeof a&&"undefined"!=typeof d?d.exports=F():"function"==typeof define&&define.amd?define(F):(k=k||self).RBush=F()}(a,function(){function k(Zb,oc,lc,Ic,Lc){!function Se(Td,We,ne,Ke,Bf){for(;Ke>ne;){if(600<Ke-ne){var Xe=Ke-ne+1,Xd=We-ne+1,nd=Math.log(Xe),Yd=.5*Math.exp(2*nd/3);nd=.5*Math.sqrt(nd*Yd*(Xe-Yd)/Xe)*(0>Xd-Xe/2?-1:1);Se(Td,We,Math.max(ne,Math.floor(We-
Xd*Yd/Xe+nd)),Math.min(Ke,Math.floor(We+(Xe-Xd)*Yd/Xe+nd)),Bf)}Xe=Td[We];Xd=ne;Yd=Ke;F(Td,ne,We);for(0<Bf(Td[Ke],Xe)&&F(Td,ne,Ke);Xd<Yd;){F(Td,Xd,Yd);Xd++;for(Yd--;0>Bf(Td[Xd],Xe);)Xd++;for(;0<Bf(Td[Yd],Xe);)Yd--}0===Bf(Td[ne],Xe)?F(Td,ne,Yd):F(Td,++Yd,Ke);Yd<=We&&(ne=Yd+1);We<=Yd&&(Ke=Yd-1)}}(Zb,oc,lc||0,Ic||Zb.length-1,Lc||Y)}function F(Zb,oc,lc){var Ic=Zb[oc];Zb[oc]=Zb[lc];Zb[lc]=Ic}function Y(Zb,oc){return Zb<oc?-1:Zb>oc?1:0}function ka(Zb,oc){oa(Zb,0,Zb.children.length,oc,Zb)}function oa(Zb,
oc,lc,Ic,Lc){Lc||=Ob(null);Lc.minX=1/0;Lc.minY=1/0;Lc.maxX=-1/0;for(Lc.maxY=-1/0;oc<lc;oc++){var wd=Zb.children[oc];Fa(Lc,Zb.leaf?Ic(wd):wd)}return Lc}function Fa(Zb,oc){return Zb.minX=Math.min(Zb.minX,oc.minX),Zb.minY=Math.min(Zb.minY,oc.minY),Zb.maxX=Math.max(Zb.maxX,oc.maxX),Zb.maxY=Math.max(Zb.maxY,oc.maxY),Zb}function Qa(Zb,oc){return Zb.minX-oc.minX}function Wa(Zb,oc){return Zb.minY-oc.minY}function eb(Zb){return(Zb.maxX-Zb.minX)*(Zb.maxY-Zb.minY)}function jb(Zb){return Zb.maxX-Zb.minX+(Zb.maxY-
Zb.minY)}function Mb(Zb,oc){return Zb.minX<=oc.minX&&Zb.minY<=oc.minY&&oc.maxX<=Zb.maxX&&oc.maxY<=Zb.maxY}function Ub(Zb,oc){return oc.minX<=Zb.maxX&&oc.minY<=Zb.maxY&&oc.maxX>=Zb.minX&&oc.maxY>=Zb.minY}function Ob(Zb){return{children:Zb,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function jc(Zb,oc,lc,Ic,Lc){for(var wd=[oc,lc];wd.length;)if(!((lc=wd.pop())-(oc=wd.pop())<=Ic)){var Td=oc+Math.ceil((lc-oc)/Ic/2)*Ic;k(Zb,Td,oc,lc,Lc);wd.push(oc,Td,Td,lc)}}var vc=function(Zb){void 0===Zb&&
(Zb=9);this._maxEntries=Math.max(4,Zb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return vc.prototype.all=function(){return this._all(this.data,[])},vc.prototype.search=function(Zb){var oc=this.data,lc=[];if(!Ub(Zb,oc))return lc;for(var Ic=this.toBBox,Lc=[];oc;){for(var wd=0;wd<oc.children.length;wd++){var Td=oc.children[wd],We=oc.leaf?Ic(Td):Td;Ub(Zb,We)&&(oc.leaf?lc.push(Td):Mb(Zb,We)?this._all(Td,lc):Lc.push(Td))}oc=Lc.pop()}return lc},vc.prototype.collides=function(Zb){var oc=
this.data;if(!Ub(Zb,oc))return!1;for(var lc=[];oc;){for(var Ic=0;Ic<oc.children.length;Ic++){var Lc=oc.children[Ic],wd=oc.leaf?this.toBBox(Lc):Lc;if(Ub(Zb,wd)){if(oc.leaf||Mb(Zb,wd))return!0;lc.push(Lc)}}oc=lc.pop()}return!1},vc.prototype.load=function(Zb){if(!Zb||!Zb.length)return this;if(Zb.length<this._minEntries){for(var oc=0;oc<Zb.length;oc++)this.insert(Zb[oc]);return this}Zb=this._build(Zb.slice(),0,Zb.length-1,0);this.data.children.length?this.data.height===Zb.height?this._splitRoot(this.data,
Zb):(this.data.height<Zb.height&&(oc=this.data,this.data=Zb,Zb=oc),this._insert(Zb,this.data.height-Zb.height-1,!0)):this.data=Zb;return this},vc.prototype.insert=function(Zb){return Zb&&this._insert(Zb,this.data.height-1),this},vc.prototype.clear=function(){return this.data=Ob([]),this},vc.prototype.remove=function(Zb,oc){if(!Zb)return this;for(var lc,Ic,Lc,wd=this.data,Td=this.toBBox(Zb),We=[],ne=[];wd||We.length;){if(wd||(wd=We.pop(),Ic=We[We.length-1],lc=ne.pop(),Lc=!0),wd.leaf){a:{var Ke=Zb;
var Bf=wd.children,Se=oc;if(Se){for(var Xe=0;Xe<Bf.length;Xe++)if(Se(Ke,Bf[Xe])){Ke=Xe;break a}Ke=-1}else Ke=Bf.indexOf(Ke)}if(-1!==Ke)return wd.children.splice(Ke,1),We.push(wd),this._condense(We),this}Lc||wd.leaf||!Mb(wd,Td)?Ic?(lc++,wd=Ic.children[lc],Lc=!1):wd=null:(We.push(wd),ne.push(lc),lc=0,Ic=wd,wd=wd.children[0])}return this},vc.prototype.toBBox=function(Zb){return Zb},vc.prototype.compareMinX=function(Zb,oc){return Zb.minX-oc.minX},vc.prototype.compareMinY=function(Zb,oc){return Zb.minY-
oc.minY},vc.prototype.toJSON=function(){return this.data},vc.prototype.fromJSON=function(Zb){return this.data=Zb,this},vc.prototype._all=function(Zb,oc){for(var lc=[];Zb;)Zb.leaf?oc.push.apply(oc,Zb.children):lc.push.apply(lc,Zb.children),Zb=lc.pop();return oc},vc.prototype._build=function(Zb,oc,lc,Ic){var Lc,wd=lc-oc+1,Td=this._maxEntries;if(wd<=Td)return ka(Lc=Ob(Zb.slice(oc,lc+1)),this.toBBox),Lc;Ic||(Ic=Math.ceil(Math.log(wd)/Math.log(Td)),Td=Math.ceil(wd/Math.pow(Td,Ic-1)));(Lc=Ob([])).leaf=
!1;Lc.height=Ic;wd=Math.ceil(wd/Td);Td=wd*Math.ceil(Math.sqrt(Td));for(jc(Zb,oc,lc,Td,this.compareMinX);oc<=lc;oc+=Td){var We=Math.min(oc+Td-1,lc);jc(Zb,oc,We,wd,this.compareMinY);for(var ne=oc;ne<=We;ne+=wd)Lc.children.push(this._build(Zb,ne,Math.min(ne+wd-1,We),Ic-1))}return ka(Lc,this.toBBox),Lc},vc.prototype._chooseSubtree=function(Zb,oc,lc,Ic){for(;Ic.push(oc),!oc.leaf&&Ic.length-1!==lc;){for(var Lc=1/0,wd=1/0,Td=void 0,We=0;We<oc.children.length;We++){var ne=oc.children[We],Ke=eb(ne),Bf=(Se=
Zb,Xe=ne,(Math.max(Xe.maxX,Se.maxX)-Math.min(Xe.minX,Se.minX))*(Math.max(Xe.maxY,Se.maxY)-Math.min(Xe.minY,Se.minY))-Ke);Bf<wd?(wd=Bf,Lc=Ke<Lc?Ke:Lc,Td=ne):Bf===wd&&Ke<Lc&&(Lc=Ke,Td=ne)}oc=Td||oc.children[0]}var Se,Xe;return oc},vc.prototype._insert=function(Zb,oc,lc){lc=lc?Zb:this.toBBox(Zb);var Ic=[],Lc=this._chooseSubtree(lc,this.data,oc,Ic);Lc.children.push(Zb);for(Fa(Lc,lc);0<=oc&&Ic[oc].children.length>this._maxEntries;)this._split(Ic,oc),oc--;this._adjustParentBBoxes(lc,Ic,oc)},vc.prototype._split=
function(Zb,oc){var lc=Zb[oc],Ic=lc.children.length,Lc=this._minEntries;this._chooseSplitAxis(lc,Lc,Ic);Ic=this._chooseSplitIndex(lc,Lc,Ic);Ic=Ob(lc.children.splice(Ic,lc.children.length-Ic));Ic.height=lc.height;Ic.leaf=lc.leaf;ka(lc,this.toBBox);ka(Ic,this.toBBox);oc?Zb[oc-1].children.push(Ic):this._splitRoot(lc,Ic)},vc.prototype._splitRoot=function(Zb,oc){this.data=Ob([Zb,oc]);this.data.height=Zb.height+1;this.data.leaf=!1;ka(this.data,this.toBBox)},vc.prototype._chooseSplitIndex=function(Zb,oc,
lc){for(var Ic,Lc,wd,Td,We,ne,Ke,Bf=1/0,Se=1/0,Xe=oc;Xe<=lc-oc;Xe++){var Xd=oa(Zb,0,Xe,this.toBBox),nd=oa(Zb,Xe,lc,this.toBBox),Yd=(Lc=Xd,wd=nd,Td=void 0,We=void 0,ne=void 0,Ke=void 0,Td=Math.max(Lc.minX,wd.minX),We=Math.max(Lc.minY,wd.minY),ne=Math.min(Lc.maxX,wd.maxX),Ke=Math.min(Lc.maxY,wd.maxY),Math.max(0,ne-Td)*Math.max(0,Ke-We));Xd=eb(Xd)+eb(nd);Yd<Bf?(Bf=Yd,Ic=Xe,Se=Xd<Se?Xd:Se):Yd===Bf&&Xd<Se&&(Se=Xd,Ic=Xe)}return Ic||lc-oc},vc.prototype._chooseSplitAxis=function(Zb,oc,lc){var Ic=Zb.leaf?
this.compareMinX:Qa,Lc=Zb.leaf?this.compareMinY:Wa;this._allDistMargin(Zb,oc,lc,Ic)<this._allDistMargin(Zb,oc,lc,Lc)&&Zb.children.sort(Ic)},vc.prototype._allDistMargin=function(Zb,oc,lc,Ic){Zb.children.sort(Ic);Ic=this.toBBox;for(var Lc=oa(Zb,0,oc,Ic),wd=oa(Zb,lc-oc,lc,Ic),Td=jb(Lc)+jb(wd),We=oc;We<lc-oc;We++){var ne=Zb.children[We];Fa(Lc,Zb.leaf?Ic(ne):ne);Td+=jb(Lc)}for(lc=lc-oc-1;lc>=oc;lc--)Lc=Zb.children[lc],Fa(wd,Zb.leaf?Ic(Lc):Lc),Td+=jb(wd);return Td},vc.prototype._adjustParentBBoxes=function(Zb,
oc,lc){for(;0<=lc;lc--)Fa(oc[lc],Zb)},vc.prototype._condense=function(Zb){for(var oc=Zb.length-1,lc=void 0;0<=oc;oc--)0===Zb[oc].children.length?0<oc?(lc=Zb[oc-1].children).splice(lc.indexOf(Zb[oc]),1):this.clear():ka(Zb[oc],this.toBBox)},vc})}}),mt=Fh({["../../node_modules/fast-deep-equal/index.js"](a,d){d.exports=function ka(F,Y){if(F===Y)return!0;if(F&&Y&&"object"==typeof F&&"object"==typeof Y){if(F.constructor!==Y.constructor)return!1;var oa;if(Array.isArray(F)){var Fa=F.length;if(Fa!=Y.length)return!1;
for(oa=Fa;0!==oa--;)if(!ka(F[oa],Y[oa]))return!1;return!0}if(F.constructor===RegExp)return F.source===Y.source&&F.flags===Y.flags;if(F.valueOf!==Object.prototype.valueOf)return F.valueOf()===Y.valueOf();if(F.toString!==Object.prototype.toString)return F.toString()===Y.toString();var Qa=Object.keys(F);Fa=Qa.length;if(Fa!==Object.keys(Y).length)return!1;for(oa=Fa;0!==oa--;)if(!Object.prototype.hasOwnProperty.call(Y,Qa[oa]))return!1;for(oa=Fa;0!==oa--;)if(Fa=Qa[oa],!ka(F[Fa],Y[Fa]))return!1;return!0}return F!==
F&&Y!==Y}}}),xr=Fh({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function k(jb,Mb){return!1!==Mb.clone&&Mb.isMergeableObject(jb)?Qa(Array.isArray(jb)?[]:{},jb,Mb):jb}function F(jb,Mb,Ub){return jb.concat(Mb).map(function(Ob){return k(Ob,Ub)})}function Y(jb){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(jb).filter(function(Mb){return jb.propertyIsEnumerable(Mb)}):[]}function ka(jb){return Object.keys(jb).concat(Y(jb))}function oa(jb,Mb){try{return Mb in jb}catch(Ub){return!1}}
function Fa(jb,Mb,Ub){var Ob={};Ub.isMergeableObject(jb)&&ka(jb).forEach(function(jc){Ob[jc]=k(jb[jc],Ub)});ka(Mb).forEach(function(jc){if(!oa(jb,jc)||Object.hasOwnProperty.call(jb,jc)&&Object.propertyIsEnumerable.call(jb,jc))if(oa(jb,jc)&&Ub.isMergeableObject(Mb[jc])){if(Ub.customMerge){var vc=Ub.customMerge(jc);vc="function"===typeof vc?vc:Qa}else vc=Qa;Ob[jc]=vc(jb[jc],Mb[jc],Ub)}else Ob[jc]=k(Mb[jc],Ub)});return Ob}function Qa(jb,Mb,Ub){Ub=Ub||{};Ub.arrayMerge=Ub.arrayMerge||F;Ub.isMergeableObject=
Ub.isMergeableObject||Wa;Ub.cloneUnlessOtherwiseSpecified=k;var Ob=Array.isArray(Mb),jc=Array.isArray(jb);return Ob!==jc?k(Mb,Ub):Ob?Ub.arrayMerge(jb,Mb,Ub):Fa(jb,Mb,Ub)}var Wa=function(jb){var Mb;if(Mb=!!jb&&"object"===typeof jb)Mb=Object.prototype.toString.call(jb),Mb=!("[object RegExp]"===Mb||"[object Date]"===Mb||jb.$$typeof===eb);return Mb},eb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Qa.all=function(jb,Mb){if(!Array.isArray(jb))throw Error("first argument should be an array");
return jb.reduce(function(Ub,Ob){return Qa(Ub,Ob,Mb)},{})};d.exports=Qa}}),ms=Fh({["../../node_modules/tslib/tslib.js"](a,d){var k,F,Y,ka,oa,Fa,Qa,Wa,eb,jb,Mb,Ub,Ob,jc,vc,Zb,oc,lc,Ic,Lc,wd,Td,We,ne,Ke;(function(Bf){function Se(Xd,nd){Xd!==Xe&&("function"===typeof Object.create?Object.defineProperty(Xd,"__esModule",{value:!0}):Xd.__esModule=!0);return function(Yd,ld){return Xd[Yd]=nd?nd(Yd,ld):ld}}var Xe="object"===typeof va?va:"object"===typeof self?self:"object"===typeof this?this:{};"function"===
typeof define&&define.amd?define("tslib",["exports"],function(Xd){Bf(Se(Xe,Se(Xd)))}):"object"===typeof d&&"object"===typeof d.exports?Bf(Se(Xe,Se(d.exports))):Bf(Se(Xe))})(function(Bf){var Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xd,nd){Xd.__proto__=nd}||function(Xd,nd){for(var Yd in nd)Object.prototype.hasOwnProperty.call(nd,Yd)&&(Xd[Yd]=nd[Yd])};k=function(Xd,nd){function Yd(){this.constructor=Xd}if("function"!==typeof nd&&null!==nd)throw new TypeError("Class extends value "+
String(nd)+" is not a constructor or null");Se(Xd,nd);Xd.prototype=null===nd?Object.create(nd):(Yd.prototype=nd.prototype,new Yd)};F=Object.assign||function(Xd){for(var nd,Yd=1,ld=arguments.length;Yd<ld;Yd++){nd=arguments[Yd];for(var Hd in nd)Object.prototype.hasOwnProperty.call(nd,Hd)&&(Xd[Hd]=nd[Hd])}return Xd};Y=function(Xd,nd){var Yd={},ld;for(ld in Xd)Object.prototype.hasOwnProperty.call(Xd,ld)&&0>nd.indexOf(ld)&&(Yd[ld]=Xd[ld]);if(null!=Xd&&"function"===typeof Object.getOwnPropertySymbols){var Hd=
0;for(ld=Object.getOwnPropertySymbols(Xd);Hd<ld.length;Hd++)0>nd.indexOf(ld[Hd])&&Object.prototype.propertyIsEnumerable.call(Xd,ld[Hd])&&(Yd[ld[Hd]]=Xd[ld[Hd]])}return Yd};ka=function(Xd,nd,Yd,ld){var Hd=arguments.length,Oe=3>Hd?nd:null===ld?ld=Object.getOwnPropertyDescriptor(nd,Yd):ld,mf;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)Oe=Reflect.decorate(Xd,nd,Yd,ld);else for(var Pf=Xd.length-1;0<=Pf;Pf--)if(mf=Xd[Pf])Oe=(3>Hd?mf(Oe):3<Hd?mf(nd,Yd,Oe):mf(nd,Yd))||Oe;return 3<Hd&&
Oe&&Object.defineProperty(nd,Yd,Oe),Oe};oa=function(Xd,nd){return function(Yd,ld){nd(Yd,ld,Xd)}};Fa=function(Xd,nd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Xd,nd)};Qa=function(Xd,nd,Yd,ld){function Hd(Oe){return Oe instanceof Yd?Oe:new Yd(function(mf){mf(Oe)})}return new (Yd||=Promise)(function(Oe,mf){function Pf(fh){try{dg(ld.next(fh))}catch(Lf){mf(Lf)}}function Cf(fh){try{dg(ld["throw"](fh))}catch(Lf){mf(Lf)}}function dg(fh){fh.done?Oe(fh.value):
Hd(fh.value).then(Pf,Cf)}dg((ld=ld.apply(Xd,nd||[])).next())})};Wa=function(Xd,nd){function Yd(dg){return function(fh){return ld([dg,fh])}}function ld(dg){if(Oe)throw new TypeError("Generator is already executing.");for(;Hd;)try{if(Oe=1,mf&&(Pf=dg[0]&2?mf["return"]:dg[0]?mf["throw"]||((Pf=mf["return"])&&Pf.call(mf),0):mf.next)&&!(Pf=Pf.call(mf,dg[1])).done)return Pf;if(mf=0,Pf)dg=[dg[0]&2,Pf.value];switch(dg[0]){case 0:case 1:Pf=dg;break;case 4:return Hd.label++,{value:dg[1],done:!1};case 5:Hd.label++;
mf=dg[1];dg=[0];continue;case 7:dg=Hd.ops.pop();Hd.trys.pop();continue;default:if(!(Pf=Hd.trys,Pf=0<Pf.length&&Pf[Pf.length-1])&&(6===dg[0]||2===dg[0])){Hd=0;continue}if(3===dg[0]&&(!Pf||dg[1]>Pf[0]&&dg[1]<Pf[3]))Hd.label=dg[1];else if(6===dg[0]&&Hd.label<Pf[1])Hd.label=Pf[1],Pf=dg;else if(Pf&&Hd.label<Pf[2])Hd.label=Pf[2],Hd.ops.push(dg);else{Pf[2]&&Hd.ops.pop();Hd.trys.pop();continue}}dg=nd.call(Xd,Hd)}catch(fh){dg=[6,fh],mf=0}finally{Oe=Pf=0}if(dg[0]&5)throw dg[1];return{value:dg[0]?dg[1]:void 0,
done:!0}}var Hd={label:0,sent:function(){if(Pf[0]&1)throw Pf[1];return Pf[1]},trys:[],ops:[]},Oe,mf,Pf,Cf;return Cf={next:Yd(0),"throw":Yd(1),"return":Yd(2)},"function"===typeof Symbol&&(Cf[Symbol.iterator]=function(){return this}),Cf};eb=function(Xd,nd){for(var Yd in Xd)"default"===Yd||Object.prototype.hasOwnProperty.call(nd,Yd)||Ke(nd,Xd,Yd)};Ke=Object.create?function(Xd,nd,Yd,ld){void 0===ld&&(ld=Yd);var Hd=Object.getOwnPropertyDescriptor(nd,Yd);if(!Hd||("get"in Hd?!nd.__esModule:Hd.writable||
Hd.configurable))Hd={enumerable:!0,get:function(){return nd[Yd]}};Object.defineProperty(Xd,ld,Hd)}:function(Xd,nd,Yd,ld){void 0===ld&&(ld=Yd);Xd[ld]=nd[Yd]};jb=function(Xd){var nd="function"===typeof Symbol&&Symbol.iterator,Yd=nd&&Xd[nd],ld=0;if(Yd)return Yd.call(Xd);if(Xd&&"number"===typeof Xd.length)return{next:function(){Xd&&ld>=Xd.length&&(Xd=void 0);return{value:Xd&&Xd[ld++],done:!Xd}}};throw new TypeError(nd?"Object is not iterable.":"Symbol.iterator is not defined.");};Mb=function(Xd,nd){var Yd=
"function"===typeof Symbol&&Xd[Symbol.iterator];if(!Yd)return Xd;Xd=Yd.call(Xd);var ld,Hd=[];try{for(;(void 0===nd||0<nd--)&&!(ld=Xd.next()).done;)Hd.push(ld.value)}catch(mf){var Oe={error:mf}}finally{try{ld&&!ld.done&&(Yd=Xd["return"])&&Yd.call(Xd)}finally{if(Oe)throw Oe.error;}}return Hd};Ub=function(){for(var Xd=[],nd=0;nd<arguments.length;nd++)Xd=Xd.concat(Mb(arguments[nd]));return Xd};Ob=function(){for(var Xd=0,nd=0,Yd=arguments.length;nd<Yd;nd++)Xd+=arguments[nd].length;Xd=Array(Xd);var ld=
0;for(nd=0;nd<Yd;nd++)for(var Hd=arguments[nd],Oe=0,mf=Hd.length;Oe<mf;Oe++,ld++)Xd[ld]=Hd[Oe];return Xd};jc=function(Xd,nd,Yd){if(Yd||2===arguments.length)for(var ld=0,Hd=nd.length,Oe;ld<Hd;ld++)!Oe&&ld in nd||(Oe||=Array.prototype.slice.call(nd,0,ld),Oe[ld]=nd[ld]);return Xd.concat(Oe||Array.prototype.slice.call(nd))};vc=function(Xd){return this instanceof vc?(this.v=Xd,this):new vc(Xd)};Zb=function(Xd,nd,Yd){function ld(Lf){Cf[Lf]&&(dg[Lf]=function(ah){return new Promise(function(Ch,Hj){1<fh.push([Lf,
ah,Ch,Hj])||Hd(Lf,ah)})})}function Hd(Lf,ah){try{var Ch=Cf[Lf](ah);Ch.value instanceof vc?Promise.resolve(Ch.value.v).then(Oe,mf):Pf(fh[0][2],Ch)}catch(Hj){Pf(fh[0][3],Hj)}}function Oe(Lf){Hd("next",Lf)}function mf(Lf){Hd("throw",Lf)}function Pf(Lf,ah){(Lf(ah),fh.shift(),fh.length)&&Hd(fh[0][0],fh[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Cf=Yd.apply(Xd,nd||[]),dg,fh=[];return dg={},ld("next"),ld("throw"),ld("return"),dg[Symbol.asyncIterator]=
function(){return this},dg};oc=function(Xd){function nd(Hd,Oe){Yd[Hd]=Xd[Hd]?function(mf){return(ld=!ld)?{value:vc(Xd[Hd](mf)),done:"return"===Hd}:Oe?Oe(mf):mf}:Oe}var Yd,ld;return Yd={},nd("next"),nd("throw",function(Hd){throw Hd;}),nd("return"),Yd[Symbol.iterator]=function(){return this},Yd};lc=function(Xd){function nd(Oe){Hd[Oe]=Xd[Oe]&&function(mf){return new Promise(function(Pf,Cf){mf=Xd[Oe](mf);Yd(Pf,Cf,mf.done,mf.value)})}}function Yd(Oe,mf,Pf,Cf){Promise.resolve(Cf).then(function(dg){Oe({value:dg,
done:Pf})},mf)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ld=Xd[Symbol.asyncIterator],Hd;return ld?ld.call(Xd):(Xd="function"===typeof jb?jb(Xd):Xd[Symbol.iterator](),Hd={},nd("next"),nd("throw"),nd("return"),Hd[Symbol.asyncIterator]=function(){return this},Hd)};Ic=function(Xd,nd){Object.defineProperty?Object.defineProperty(Xd,"raw",{value:nd}):Xd.raw=nd;return Xd};var Xe=Object.create?function(Xd,nd){Object.defineProperty(Xd,"default",{enumerable:!0,
value:nd})}:function(Xd,nd){Xd["default"]=nd};Lc=function(Xd){if(Xd&&Xd.__esModule)return Xd;var nd={};if(null!=Xd)for(var Yd in Xd)"default"!==Yd&&Object.prototype.hasOwnProperty.call(Xd,Yd)&&Ke(nd,Xd,Yd);Xe(nd,Xd);return nd};wd=function(Xd){return Xd&&Xd.__esModule?Xd:{"default":Xd}};Td=function(Xd,nd,Yd,ld){if("a"===Yd&&!ld)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof nd?Xd!==nd||!ld:!nd.has(Xd))throw new TypeError("Cannot read private member from an object whose class did not declare it");
return"m"===Yd?ld:"a"===Yd?ld.call(Xd):ld?ld.value:nd.get(Xd)};We=function(Xd,nd,Yd,ld,Hd){if("m"===ld)throw new TypeError("Private method is not writable");if("a"===ld&&!Hd)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof nd?Xd!==nd||!Hd:!nd.has(Xd))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===ld?Hd.call(Xd,Yd):Hd?Hd.value=Yd:nd.set(Xd,Yd),Yd};ne=function(Xd,nd){if(null===nd||"object"!==typeof nd&&
"function"!==typeof nd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Xd?nd===Xd:Xd.has(nd)};Bf("__extends",k);Bf("__assign",F);Bf("__rest",Y);Bf("__decorate",ka);Bf("__param",oa);Bf("__metadata",Fa);Bf("__awaiter",Qa);Bf("__generator",Wa);Bf("__exportStar",eb);Bf("__createBinding",Ke);Bf("__values",jb);Bf("__read",Mb);Bf("__spread",Ub);Bf("__spreadArrays",Ob);Bf("__spreadArray",jc);Bf("__await",vc);Bf("__asyncGenerator",Zb);Bf("__asyncDelegator",oc);Bf("__asyncValues",
lc);Bf("__makeTemplateObject",Ic);Bf("__importStar",Lc);Bf("__importDefault",wd);Bf("__classPrivateFieldGet",Td);Bf("__classPrivateFieldSet",We);Bf("__classPrivateFieldIn",ne)})}}),Qq={};((a,d)=>{for(var k in d)vf(a,k,{get:d[k],enumerable:!0})})(Qq,{App:()=>CD,PreviewManager:()=>Wh,generateJSXFromModel:()=>le,generateSVGFromModel:()=>Md});Sa.exports=(a=>wn(vf({},"__esModule",{value:!0}),a))(Qq);var os=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";
a.Gray="gray";a.Default="";return a})(os||{}),yr=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(yr||{}),wr,zu=new Uint8Array(16),Hg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,sm=[];for(let a=0;256>a;++a)sm.push((a+256).toString(16).slice(1));var lt,Ho,sp=0,Sq=0,Uk=function(a,d,k){k=d&&k||0;const F=d||Array(16);a=a||{};let Y=a.node||lt;var ka=void 0!==a.clockseq?a.clockseq:Ho;if(null==Y||null==ka){var oa=
a.random||(a.rng||p)();null==Y&&(Y=lt=[oa[0]|1,oa[1],oa[2],oa[3],oa[4],oa[5]]);null==ka&&(ka=Ho=(oa[6]<<8|oa[7])&16383)}oa=void 0!==a.msecs?a.msecs:Date.now();let Fa=void 0!==a.nsecs?a.nsecs:Sq+1;const Qa=oa-sp+(Fa-Sq)/1E4;0>Qa&&void 0===a.clockseq&&(ka=ka+1&16383);(0>Qa||oa>sp)&&void 0===a.nsecs&&(Fa=0);if(1E4<=Fa)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");sp=oa;Sq=Fa;Ho=ka;oa+=122192928E5;a=(1E4*(oa&268435455)+Fa)%4294967296;F[k++]=a>>>24&255;F[k++]=a>>>16&255;F[k++]=a>>>8&255;
F[k++]=a&255;a=oa/4294967296*1E4&268435455;F[k++]=a>>>8&255;F[k++]=a&255;F[k++]=a>>>24&15|16;F[k++]=a>>>16&255;F[k++]=ka>>>8|128;F[k++]=ka&255;for(ka=0;6>ka;++ka)F[k+ka]=Y[ka];return d||S(F)},Dh=class{static clamp(a,d,k){return Math.max(d,"undefined"!==typeof k?Math.min(a,k):a)}static clampV(a,d,k){return a.map(F=>k?Dh.clamp(F,d,k):Dh.clamp(F,d))}static cross(a,d,k){return(d[0]-a[0])*(k[1]-a[1])-(k[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},Dd=Dh;Dd.neg=
a=>[-a[0],-a[1]];Dd.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];Dd.addScalar=(a,d)=>[a[0]+d,a[1]+d];Dd.sub=(a,d)=>[a[0]-d[0],a[1]-d[1]];Dd.subScalar=(a,d)=>[a[0]-d,a[1]-d];Dd.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];Dd.mul=(a,d)=>[a[0]*d,a[1]*d];Dd.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];Dd.div=(a,d)=>[a[0]/d,a[1]/d];Dd.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];Dd.per=a=>[a[1],-a[0]];Dd.dpr=(a,d)=>a[0]*d[0]+a[1]*d[1];Dd.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];Dd.len2=a=>a[0]*a[0]+a[1]*a[1];Dd.len=a=>Math.hypot(a[0],a[1]);Dd.pry=(a,d)=>Dh.dpr(a,
d)/Dh.len(d);Dd.uni=a=>Dh.div(a,Dh.len(a));Dd.normalize=a=>Dh.uni(a);Dd.tangent=(a,d)=>Dh.uni(Dh.sub(a,d));Dd.dist2=(a,d)=>Dh.len2(Dh.sub(a,d));Dd.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);Dd.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let k=1/Math.max(d[0],d[1]);k*=1.29289-(d[0]+d[1])*k*.29289;return[a[0]*k,a[1]*k]};Dd.ang=(a,d)=>Math.atan2(Dh.cpr(a,d),Dh.dpr(a,d));Dd.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);Dd.med=(a,d)=>Dh.mul(Dh.add(a,d),.5);Dd.rot=(a,d=0)=>
[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];Dd.rotWith=(a,d,k=0)=>{if(0===k)return a;const F=Math.sin(k);k=Math.cos(k);const Y=a[0]-d[0];a=a[1]-d[1];return[Y*k-a*F+d[0],Y*F+a*k+d[1]]};Dd.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];Dd.lrp=(a,d,k)=>Dh.add(a,Dh.mul(Dh.sub(d,a),k));Dd.int=(a,d,k,F,Y=1)=>{k=(Dh.clamp(k,F)-k)/(F-k);return Dh.add(Dh.mul(a,1-k),Dh.mul(d,Y))};Dd.ang3=(a,d,k)=>{a=Dh.vec(d,a);d=Dh.vec(d,k);return Dh.ang(a,d)};Dd.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];Dd.rescale=
(a,d)=>{const k=Dh.len(a);return[d*a[0]/k,d*a[1]/k]};Dd.isLeft=(a,d,k)=>(d[0]-a[0])*(k[1]-a[1])-(k[0]-a[0])*(d[1]-a[1]);Dd.clockwise=(a,d,k)=>0<Dh.isLeft(a,d,k);Dd.toFixed=a=>a.map(d=>Math.round(100*d)/100);Dd.nearestPointOnLineThroughPoint=(a,d,k)=>Dh.add(a,Dh.mul(d,Dh.pry(Dh.sub(k,a),d)));Dd.distanceToLineThroughPoint=(a,d,k)=>Dh.dist(k,Dh.nearestPointOnLineThroughPoint(a,d,k));Dd.nearestPointOnLineSegment=(a,d,k,F=!0)=>{const Y=Dh.uni(Dh.sub(d,a));k=Dh.add(a,Dh.mul(Y,Dh.pry(Dh.sub(k,a),Y)));if(F){if(k[0]<
Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(k[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(k[1]<Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(k[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return k};Dd.distanceToLineSegment=(a,d,k,F=!0)=>Dh.dist(k,Dh.nearestPointOnLineSegment(a,d,k,F));Dd.nudge=(a,d,k)=>Dh.isEqual(a,d)?a:Dh.add(a,Dh.mul(Dh.uni(Dh.sub(d,a)),k));Dd.nudgeAtAngle=(a,d,k)=>[Math.cos(d)*k+a[0],Math.sin(d)*k+a[1]];Dd.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];Dd.pointsBetween=
(a,d,k=6)=>Array.from(Array(k)).map((F,Y)=>{F=Y/(k-1);Y=Math.min(1,.5+Math.abs(.5-F));return[...Dh.lrp(a,d,F),Y]});Dd.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);Dd.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};Dd.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];Dd.min=(...a)=>[Math.min(...a.map(d=>d[0])),Math.min(...a.map(d=>d[1]))];var je=Dd,xf=class{static getRectangleSides(a,d,k=0){const F=[a[0]+d[0]/2,a[1]+d[1]/2],Y=Dd.rotWith(a,F,k),ka=Dd.rotWith(Dd.add(a,
[d[0],0]),F,k),oa=Dd.rotWith(Dd.add(a,d),F,k);a=Dd.rotWith(Dd.add(a,[0,d[1]]),F,k);return[["top",[Y,ka]],["right",[ka,oa]],["bottom",[oa,a]],["left",[a,Y]]]}static getBoundsSides(a){return xf.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+2*d,height:a.height+2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?
a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return xf.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let k=Infinity,F=Infinity,Y=-Infinity,ka=-Infinity;if(2>a.length)F=k=0,ka=Y=1;else for(const oa of a)k=Math.min(oa[0],k),F=Math.min(oa[1],F),Y=Math.max(oa[0],Y),ka=Math.max(oa[1],ka);return 0!==d?xf.getBoundsFromPoints(a.map(oa=>
Dd.rotWith(oa,[(k+Y)/2,(F+ka)/2],d))):{minX:k,minY:F,maxX:Y,maxY:ka,width:Math.max(1,Y-k),height:Math.max(1,ka-F)}}static centerBounds(a,d){const k=xf.getBoundsCenter(a);return xf.translateBounds(a,[d[0]-k[0],d[1]-k[1]])}static snapBoundsToGrid(a,d){const k=Math.round(a.minX/d)*d,F=Math.round(a.minY/d)*d,Y=Math.round(a.maxX/d)*d;a=Math.round(a.maxY/d)*d;return{minX:k,minY:F,maxX:Y,maxY:a,width:Math.max(1,Y-k),height:Math.max(1,a-F)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+
d[1],maxX:a.maxX+d[0],maxY:a.maxY+d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const k=xf.getBoundsCenter(a);return xf.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[k[0]*d,k[1]*d])}static divideBounds(a,d){const k=xf.getBoundsCenter(a);return xf.centerBounds({minX:a.minX/d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[k[0]/d,k[1]/d])}static getRotatedBounds(a,d=0){a=xf.getRotatedCorners(a,
d);let k=d=Infinity,F=-Infinity,Y=-Infinity;for(const ka of a)d=Math.min(ka[0],d),k=Math.min(ka[1],k),F=Math.max(ka[0],F),Y=Math.max(ka[1],Y);return{minX:d,minY:k,maxX:F,maxY:Y,width:Math.max(1,F-d),height:Math.max(1,Y-k),rotation:0}}static getRotatedEllipseBounds(a,d,k,F,Y=0){var ka=Math.cos(Y);const oa=Math.sin(Y);Y=Math.hypot(k*ka,F*oa);ka=Math.hypot(k*oa,F*ka);return{minX:a+k-Y,minY:d+F-ka,maxX:a+k+Y,maxY:d+F+ka,width:2*Y,height:2*ka}}static getExpandedBounds(a,d){const k=Math.min(a.minX,d.minX),
F=Math.min(a.minY,d.minY),Y=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:k,minY:F,maxX:Y,maxY:a,width:Math.abs(Y-k),height:Math.abs(a-F)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let k=1;k<a.length;k++)d=xf.getExpandedBounds(d,a[k]);return d}static getRotatedCorners(a,d=0){const k=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(F=>Dd.rotWith(F,k,d)):a}static getTransformedBoundingBox(a,
d,k,F=0,Y=!1){const [ka,oa]=[a.minX,a.minY],[Fa,Qa]=[a.maxX,a.maxY];let [Wa,eb]=[a.minX,a.minY],[jb,Mb]=[a.maxX,a.maxY];if("center"===d)return{minX:Wa+k[0],minY:eb+k[1],maxX:jb+k[0],maxY:Mb+k[1],width:jb-Wa,height:Mb-eb,scaleX:1,scaleY:1};const [Ub,Ob]=Dd.rot(k,-F);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":eb+=Ob;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Mb+=Ob}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":Wa+=
Ub;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":jb+=Ub}var jc=Fa-ka;const vc=Qa-oa;var Zb=(jb-Wa)/jc,oc=(Mb-eb)/vc;a=0>Zb;k=0>oc;var lc=Math.abs(jb-Wa),Ic=Math.abs(Mb-eb);if(Y)switch(Y=jc/vc,jc=Y<lc/Ic,oc=1/Y*(0>oc?1:-1)*lc,Zb=Ic*(0>Zb?1:-1)*Y,d){case "top_left_corner":jc?eb=Mb+oc:Wa=jb+Zb;break;case "top_right_corner":jc?eb=Mb+oc:jb=Wa-Zb;break;case "bottom_right_corner":jc?Mb=eb-oc:jb=Wa-Zb;break;case "bottom_left_corner":jc?Mb=eb-oc:Wa=jb+Zb;break;case "bottom_edge":case "top_edge":lc=
(Wa+jb)/2;Ic*=Y;Wa=lc-Ic/2;jb=lc+Ic/2;break;case "left_edge":case "right_edge":Ic=(eb+Mb)/2,lc/=Y,eb=Ic-lc/2,Mb=Ic+lc/2}if(0!==F%(2*Math.PI)){lc=[0,0];Ic=Dd.med([ka,oa],[Fa,Qa]);Zb=Dd.med([Wa,eb],[jb,Mb]);switch(d){case "top_left_corner":lc=Dd.sub(Dd.rotWith([jb,Mb],Zb,F),Dd.rotWith([Fa,Qa],Ic,F));break;case "top_right_corner":lc=Dd.sub(Dd.rotWith([Wa,Mb],Zb,F),Dd.rotWith([ka,Qa],Ic,F));break;case "bottom_right_corner":lc=Dd.sub(Dd.rotWith([Wa,eb],Zb,F),Dd.rotWith([ka,oa],Ic,F));break;case "bottom_left_corner":lc=
Dd.sub(Dd.rotWith([jb,eb],Zb,F),Dd.rotWith([Fa,oa],Ic,F));break;case "top_edge":lc=Dd.sub(Dd.rotWith(Dd.med([Wa,Mb],[jb,Mb]),Zb,F),Dd.rotWith(Dd.med([ka,Qa],[Fa,Qa]),Ic,F));break;case "left_edge":lc=Dd.sub(Dd.rotWith(Dd.med([jb,eb],[jb,Mb]),Zb,F),Dd.rotWith(Dd.med([Fa,oa],[Fa,Qa]),Ic,F));break;case "bottom_edge":lc=Dd.sub(Dd.rotWith(Dd.med([Wa,eb],[jb,eb]),Zb,F),Dd.rotWith(Dd.med([ka,oa],[Fa,oa]),Ic,F));break;case "right_edge":lc=Dd.sub(Dd.rotWith(Dd.med([Wa,eb],[Wa,Mb]),Zb,F),Dd.rotWith(Dd.med([ka,
oa],[ka,Qa]),Ic,F))}[Wa,eb]=Dd.sub([Wa,eb],lc);[jb,Mb]=Dd.sub([jb,Mb],lc)}jb<Wa&&([jb,Wa]=[Wa,jb]);Mb<eb&&([Mb,eb]=[eb,Mb]);return{minX:Wa,minY:eb,maxX:jb,maxY:Mb,width:jb-Wa,height:Mb-eb,scaleX:(jb-Wa)/(Fa-ka||1)*(a?-1:1),scaleY:(Mb-eb)/(Qa-oa||1)*(k?-1:1)}}static getTransformAnchor(a,d,k){let F=a;switch(a){case "top_left_corner":F=d&&k?"bottom_right_corner":d?"top_right_corner":k?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":F=d&&k?"bottom_left_corner":d?"top_left_corner":
k?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":F=d&&k?"top_left_corner":d?"bottom_left_corner":k?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":F=d&&k?"top_right_corner":d?"bottom_right_corner":k?"top_left_corner":"top_right_corner"}return F}static getRelativeTransformedBoundingBox(a,d,k,F,Y){F=a.minX+(F?d.maxX-k.maxX:k.minX-d.minX)/d.width*a.width;Y=a.minY+(Y?d.maxY-k.maxY:k.minY-d.minY)/d.height*a.height;const ka=k.width/d.width*a.width;a=k.height/
d.height*a.height;return{minX:F,minY:Y,maxX:F+ka,maxY:Y+a,width:ka,height:a}}static getRotatedSize(a,d){const k=Dd.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(F=>Dd.rotWith(F,k,d));a=xf.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=xf.getBoundsCenter(a);return kf(me({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=[Infinity,Infinity];a.forEach(k=>{d[0]=Math.min(d[0],k[0]);d[1]=
Math.min(d[1],k[1])});return d}static getTLSnapPoints(a,d,k){const F=me({},a);a=[0,0];const Y=[],ka={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},oa=["midX","minX","maxX"],Fa=["midY","minY","maxY"];d=d.map(Mb=>{const Ub=oa.flatMap((jc,vc)=>oa.map((Zb,oc)=>{const lc=F[jc]-Mb[Zb];return{f:jc,t:Zb,gap:lc,distance:Math.abs(lc),isCareful:0===vc||3===vc+oc}})),Ob=Fa.flatMap((jc,
vc)=>Fa.map((Zb,oc)=>{const lc=F[jc]-Mb[Zb];return{f:jc,t:Zb,gap:lc,distance:Math.abs(lc),isCareful:0===vc||3===vc+oc}}));return[Mb,Ub,Ob]});let Qa=Infinity,Wa=Infinity,eb=Infinity,jb=Infinity;d.forEach(([,Mb,Ub])=>{Mb.forEach(Ob=>{Ob.distance<k&&Ob.distance<eb&&(eb=Ob.distance,Qa=Ob.gap)});Ub.forEach(Ob=>{Ob.distance<k&&Ob.distance<jb&&(jb=Ob.distance,Wa=Ob.gap)})});d.forEach(([Mb,Ub,Ob])=>{Infinity!==Qa&&Ub.forEach(jc=>{2>Math.abs(jc.gap-Qa)&&(ka[jc.f]=kf(me({},ka[jc.f]),{isSnapped:!0,to:Mb[jc.t],
B:Mb,distance:jc.distance}))});Infinity!==Wa&&Ob.forEach(jc=>{2>Math.abs(jc.gap-Wa)&&(ka[jc.f]=kf(me({},ka[jc.f]),{isSnapped:!0,to:Mb[jc.t],B:Mb,distance:jc.distance}))})});a[0]=Infinity===Qa?0:Qa;a[1]=Infinity===Wa?0:Wa;F.minX-=a[0];F.midX-=a[0];F.maxX-=a[0];F.minY-=a[1];F.midY-=a[1];F.maxY-=a[1];oa.forEach(Mb=>{Mb=ka[Mb];if(Mb.isSnapped){var {id:Ub,B:Ob}=Mb;Mb=F[Ub];Y.push("minX"===Ub?[[Mb,F.midY],[Mb,Ob.minY],[Mb,Ob.maxY]]:[[Mb,F.minY],[Mb,F.maxY],[Mb,Ob.minY],[Mb,Ob.maxY]])}});Fa.forEach(Mb=>
{Mb=ka[Mb];if(Mb.isSnapped){var {id:Ub,B:Ob}=Mb;Mb=F[Ub];Y.push("midY"===Ub?[[F.midX,Mb],[Ob.minX,Mb],[Ob.maxX,Mb]]:[[F.minX,Mb],[F.maxX,Mb],[Ob.minX,Mb],[Ob.maxX,Mb]])}});return{offset:a,snapLines:Y}}static ensureRatio(a,d){const {width:k,height:F}=a,Y=me({},a);k/F<d?(Y.width=F*d,Y.maxX+=k-a.width):(Y.height=k/d,Y.maxY+=F-a.height);return Y}static getDistributions(a,d){var k=a.map(ka=>{const oa=ka.getBounds();return{id:ka.id,point:[oa.minX,oa.minY],bounds:oa,center:ka.getCenter()}});a=k.length;var F=
xf.getCommonBounds(k.map(({bounds:ka})=>ka));const Y=[];switch(d){case "horizontal":d=k.reduce((ka,oa)=>ka+oa.bounds.width,0);if(d>F.width){const ka=k.sort((Wa,eb)=>Wa.bounds.minX-eb.bounds.minX)[0],oa=k.sort((Wa,eb)=>eb.bounds.maxX-Wa.bounds.maxX)[0];F=k.filter(Wa=>Wa!==ka&&Wa!==oa).sort((Wa,eb)=>Wa.center[0]-eb.center[0]);const Fa=(oa.center[0]-ka.center[0])/(a-1),Qa=ka.center[0]+Fa;F.forEach(({id:Wa,point:eb,bounds:jb},Mb)=>{Y.push({id:Wa,prev:eb,next:[Qa+Fa*Mb-jb.width/2,jb.minY]})})}else{k=k.sort((Fa,
Qa)=>Fa.center[0]-Qa.center[0]);let ka=F.minX;const oa=(F.width-d)/(a-1);k.forEach(({id:Fa,point:Qa,bounds:Wa})=>{Y.push({id:Fa,prev:Qa,next:[ka,Wa.minY]});ka+=Wa.width+oa})}break;case "vertical":if(d=k.reduce((ka,oa)=>ka+oa.bounds.height,0),d>F.height){const ka=k.sort((Wa,eb)=>Wa.bounds.minY-eb.bounds.minY)[0],oa=k.sort((Wa,eb)=>eb.bounds.maxY-Wa.bounds.maxY)[0];F=k.filter(Wa=>Wa!==ka&&Wa!==oa).sort((Wa,eb)=>Wa.center[1]-eb.center[1]);const Fa=(oa.center[1]-ka.center[1])/(a-1),Qa=ka.center[1]+Fa;
F.forEach(({id:Wa,point:eb,bounds:jb},Mb)=>{Y.push({id:Wa,prev:eb,next:[jb.minX,Qa+Fa*Mb-jb.height/2]})})}else{k=k.sort((Fa,Qa)=>Fa.center[1]-Qa.center[1]);let ka=F.minY;const oa=(F.height-d)/(a-1);k.forEach(({id:Fa,point:Qa,bounds:Wa})=>{Y.push({id:Fa,prev:Qa,next:[Wa.minX,ka]});ka+=Wa.height+oa})}}return Y}static getPackedDistributions(a){const d=xf.getCommonBounds(a.map(({bounds:Y})=>Y)),k=[d.minX,d.minY],F=Object.fromEntries(a.map(Y=>[Y.id,[Y.bounds.minX,Y.bounds.minY]]));a=a.filter(Y=>{var ka,
oa,Fa,Qa;return!((null==(oa=null==(ka=Y.props.handles)?void 0:ka.start)?0:oa.bindingId)||(null==(Qa=null==(Fa=Y.props.handles)?void 0:Fa.end)?0:Qa.bindingId))}).map(Y=>{const ka=Y.getBounds();return{id:Y.id,w:ka.width+16,h:ka.height+16,x:ka.minX,y:ka.minY}});w(a);return a.map(({id:Y,x:ka,y:oa})=>({id:Y,prev:F[Y],next:[ka+k[0],oa+k[1]]}))}},Tp=class{static pointInCircle(a,d,k){return Dd.dist(a,d)<=k}static pointInEllipse(a,d,k,F,Y=0){Y=Y||0;var ka=Math.cos(Y);Y=Math.sin(Y);d=Dd.sub(a,d);a=ka*d[0]+
Y*d[1];ka=Y*d[0]-ka*d[1];return 1>=a*a/(k*k)+ka*ka/(F*F)}static pointInRect(a,d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let k=0;d.forEach((F,Y)=>{Y=d[(Y+1)%d.length];F[1]<=a[1]?Y[1]>a[1]&&0<Dd.cross(F,Y,a)&&(k+=1):Y[1]<=a[1]&&0>Dd.cross(F,Y,a)&&--k});return 0!==k}static pointInBounds(a,d){return!(a[0]<d.minX||a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,k=3){for(let F=1;F<d.length;F++)if(Dd.distanceToLineSegment(d[F-1],d[F],a)<
k)return!0;return!1}static _getSqSegDist(a,d,k){let F=d[0];d=d[1];let Y=k[0]-F,ka=k[1]-d;if(0!==Y||0!==ka){const oa=((a[0]-F)*Y+(a[1]-d)*ka)/(Y*Y+ka*ka);1<oa?(F=k[0],d=k[1]):0<oa&&(F+=Y*oa,d+=ka*oa)}Y=a[0]-F;ka=a[1]-d;return Y*Y+ka*ka}static _simplifyStep(a,d,k,F,Y){let ka=F,oa=-1;for(let Fa=d+1;Fa<k;Fa++){const Qa=Tp._getSqSegDist(a[Fa],a[d],a[k]);Qa>ka&&(oa=Fa,ka=Qa)}-1<oa&&ka>F&&(1<oa-d&&Tp._simplifyStep(a,d,oa,F,Y),Y.push(a[oa]),1<k-oa&&Tp._simplifyStep(a,oa,k,F,Y))}static simplify2(a,d=1){if(2>=
a.length)return a;d*=d;var k=a[0],F=a[1];const Y=[k];for(let ka=1,oa=a.length;ka<oa;ka++)F=a[ka],(F[0]-k[0])*(F[0]-k[0])+(F[1]-k[1])*(F[1]-k[1])>d&&(Y.push(F),k=F);k!==F&&Y.push(F);k=Y.length-1;F=[Y[0]];Tp._simplifyStep(Y,0,k,d,F);F.push(Y[k],a[a.length-1]);return F}static pointNearToPolyline(a,d,k=8){const F=d.length;for(let Y=1;Y<F;Y++)if(Dd.distanceToLineSegment(d[Y-1],d[Y],a)<k)return!0;return!1}},il=Tp;gb(il,"simplify",(a,d=1)=>{var k=a.length;const F=a[0],Y=a[k-1],[ka,oa]=F,[Fa,Qa]=Y;if(2<k){let Wa=
0,eb=0;const jb=Dd.len2([Qa-oa,Fa-ka]);for(let Mb=1;Mb<k-1;Mb++){const [Ub,Ob]=a[Mb],jc=Math.pow(Ub*(Qa-oa)+ka*(Ob-Qa)+Fa*(oa-Ob),2)/jb;Wa>jc||(Wa=jc,eb=Mb)}if(Wa>d)return k=Tp.simplify(a.slice(0,eb+1),d),a=Tp.simplify(a.slice(eb+1),d),k.concat(a.slice(1))}return[F,Y]});var um=Math.PI,po=um/2,zl=2*um,Tq={},nt={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",
bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},an=class{static circleFromThreePoints(a,d,k){const [F,Y]=a,[ka,oa]=d,[Fa,Qa]=k;d=F*(oa-Qa)-Y*(ka-Fa)+ka*Qa-Fa*oa;a=-((F*F+Y*Y)*(Qa-oa)+(ka*ka+oa*oa)*(Y-Qa)+(Fa*Fa+Qa*Qa)*(oa-Y))/(2*d);d=-((F*F+Y*Y)*(ka-Fa)+(ka*ka+oa*oa)*(Fa-F)+(Fa*Fa+Qa*Qa)*(F-ka))/(2*d);return[a,d,Math.hypot(a-F,d-Y)]}static perimeterOfEllipse(a,
d){const k=Math.pow(a-d,2)/Math.pow(a+d,2);return um*(a+d)*(1+3*k/(10+Math.sqrt(4-3*k)))}static shortAngleDist(a,d){a=(d-a)%zl;return 2*a%zl-a}static longAngleDist(a,d){return zl-an.shortAngleDist(a,d)}static lerpAngles(a,d,k){return a+an.shortAngleDist(a,d)*k}static angleDelta(a,d){return an.shortAngleDist(a,d)}static getSweep(a,d,k){return an.angleDelta(je.angle(a,d),je.angle(a,k))}static clampRadians(a){return(zl+a)%zl}static snapAngleToSegments(a,d){d=zl/d;a=Math.floor((an.clampRadians(a)+d/2)/
d)*d%zl;a<um&&(a+=zl);a>um&&(a-=zl);return a}static isAngleBetween(a,d,k){if(k===a||k===d)return!0;d=(d-a+po)%po;return d<=um!==(k-a+po)%po>d}static degreesToRadians(a){return a*um/180}static radiansToDegrees(a){return 180*a/um}static getArcLength(a,d,k,F){a=an.getSweep(a,k,F);return a/zl*zl*d}static getSweepFlag(a,d,k){k=je.angle(a,k);return 0<(je.angle(a,d)-k+3*um)%zl-um?0:1}static getLargeArcFlag(a,d,k){a=je.angle(k,a);d=(je.angle(k,d)-a+3*um)%zl-um;return Math.abs(d)>po?0:1}static getArcDashOffset(a,
d,k,F,Y){const ka=an.getSweepFlag(a,k,F);d=an.getArcLength(a,d,k,F);return-(0>ka?d:zl*a[2]-d)/2+Y}static getEllipseDashOffset(a,d){return-(zl*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},Wl=class{static getPolygonCentroid(a){var d=a.map(k=>k[0]);a=a.map(k=>k[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+Math.max(...a);return[d?d/2:0,a?a/2:0]}};gb(Wl,"getEdges",a=>{const d=a.length;return a.map((k,
F)=>[k,a[(F+1)%d]])});gb(Wl,"getEdgeOutwardNormal",(a,d)=>je.per(je.uni(je.sub(d,a))));gb(Wl,"getEdgeInwardNormal",(a,d)=>je.neg(Wl.getEdgeOutwardNormal(a,d)));gb(Wl,"getOffsetEdge",(a,d,k)=>{k=je.mul(je.per(je.uni(je.sub(d,a))),k);return[je.add(a,k),je.add(d,k)]});gb(Wl,"getOffsetEdges",(a,d)=>a.map(([k,F])=>Wl.getOffsetEdge(k,F,d)));gb(Wl,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[je.add(a,[-d,-d]),je.add(a,[d,-d]),je.add(a,
[d,d]),je.add(a,[-d,d])];if(2===a.length){const [k,F]=a;return[...Wl.getOffsetEdge(k,F,d),...Wl.getOffsetEdge(F,k,d)]}return Wl.getOffsetEdges(Wl.getEdges(a),d).flatMap((k,F,Y)=>{{F=Y[(F+1)%Y.length];const ka=Dd.slope(k[0],k[1]);Y=Dd.slope(F[0],F[1]);ka!==Y?Number.isNaN(ka)&&!Number.isNaN(Y)?k=[k[0][0],(k[0][0]-F[0][0])*Y+F[0][1]]:Number.isNaN(Y)&&!Number.isNaN(ka)?k=[F[0][0],(F[0][0]-k[0][0])*ka+k[0][1]]:(k=(ka*k[0][0]-Y*F[0][0]+F[0][1]-k[0][1])/(ka-Y),k=[k,Y*(k-F[0][0])+F[0][1]]):k=void 0}if(void 0===
k)throw Error("Expected an intersection");return k})});gb(Wl,"getPolygonVertices",(a,d,k=0,F=1)=>{a=je.div(a,2);const [Y,ka]=[Math.max(1,a[0]-k),Math.max(1,a[1]-k)];k=[];for(let Wa=0,eb=zl/d;Wa<d;Wa++){var oa=(-po+Wa*eb)%zl,Fa=(-po+(Wa+1)*eb)%zl;oa=je.add(a,[Y*Math.cos(oa),ka*Math.sin(oa)]);Fa=je.add(a,[Y*Math.cos(Fa),ka*Math.sin(Fa)]);var Qa=je.med(oa,Fa);Qa=je.nudge(Qa,a,je.dist(a,Qa)*(1-F));k.push(oa,Qa,Fa)}return k});gb(Wl,"getTriangleVertices",(a,d=0,k=1)=>{const [F,Y]=a;var ka=1-k;a=[F/2,d/
2];k=[F-d,Y-d];d=[d/2,Y-d];const oa=Wl.getPolygonCentroid([a,k,d]),Fa=je.med(a,k),Qa=je.med(k,d),Wa=je.med(d,a),eb=je.dist(Fa,oa)*ka,jb=je.dist(Qa,oa)*ka;ka*=je.dist(Wa,oa);return[a,eb?je.nudge(Fa,oa,eb):Fa,k,jb?je.nudge(Qa,oa,jb):Qa,d,ka?je.nudge(Wa,oa,ka):Wa]});gb(Wl,"getStarVertices",(a,d,k,F=1)=>{const Y=je.div(d,2),ka=je.mul(Y,F/2),oa=zl/k/2;return Array.from(Array(2*k)).map((Fa,Qa)=>{Fa=-po+Qa*oa;const [Wa,eb]=Qa%2?ka:Y;return je.add(a,[Wa*Math.cos(Fa),eb*Math.sin(Fa)])})});var yu=class{static getCurvedPathForPolygon(a){if(3>
a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],k=a.length;for(let F=1;F<k;F++){const [Y,ka]=a[F],[oa,Fa]=a[(F+1)%k];d.push(Y,ka,(Y+oa)/2,(ka+Fa)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],k=a.length;for(let F=1;F<k-1;F++){const [Y,ka]=a[F],[oa,Fa]=a[F+1];d.push(Y,ka,(Y+oa)/2,(ka+Fa)/2)}return d.join(" ")}static getSvgPathFromStroke(a,
d=!0){const k=a.length;if(4>k)return"";let F=a[0],Y=a[1];var ka=a[2];ka=`M${F[0].toFixed(2)},${F[1].toFixed(2)} Q${Y[0].toFixed(2)},${Y[1].toFixed(2)} ${((Y[0]+ka[0])/2).toFixed(2)},${((Y[1]+ka[1])/2).toFixed(2)} T`;for(let oa=2,Fa=k-1;oa<Fa;oa++)F=a[oa],Y=a[oa+1],ka+=`${((F[0]+Y[0])/2).toFixed(2)},${((F[1]+Y[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}static getSvgPathFromStrokePoints(a,d=!1){const k=a.length;if(4>k)return"";let F=a[0].point,Y=a[1].point;var ka=a[2].point;ka=`M${F[0].toFixed(2)},${F[1].toFixed(2)} Q${Y[0].toFixed(2)},${Y[1].toFixed(2)} ${((Y[0]+
ka[0])/2).toFixed(2)},${((Y[1]+ka[1])/2).toFixed(2)} T`;for(let oa=2,Fa=k-1;oa<Fa;oa++)F=a[oa].point,Y=a[oa+1].point,ka+=`${((F[0]+Y[0])/2).toFixed(2)},${((F[1]+Y[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}};gb(yu,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var px={},qx=Object.assign,rq=Object.getOwnPropertyDescriptor,Xp=Object.defineProperty,sq=Object.prototype,T=[];Object.freeze(T);var la={};Object.freeze(la);var Ca="undefined"!==typeof Proxy,db=Object.toString(),Gb=function(){},
nc="undefined"!==typeof Object.getOwnPropertySymbols,Hc="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:nc?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,$c=Object.getOwnPropertyDescriptors||function(a){var d={};Hc(a).forEach(function(k){d[k]=rq(a,k)});return d},Od=Symbol("mobx-stored-annotations"),ee=Symbol("mobx administration"),sg=function(){function a(k){void 0===k&&(k="Atom");this.name_=void 0;this.isBeingObserved_=
this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=ck.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=k}var d=a.prototype;d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(k){return k()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(k){return k()})};d.reportObserved=function(){return Rb(this)};d.reportChanged=function(){ed();gc(this);Pd()};d.toString=function(){return this.name_};return a}(),Ph=C("Atom",
sg),of={identity:function(a,d){return a===d},structural:function(a,d){return ta(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,d){return ta(a,d,1)}},$g="override",Sh=lb(),qh={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(qh);var re=Xb("observable"),Zd=Xb("observable.ref",{enhancer:bb}),pe=Xb("observable.shallow",{enhancer:function(a,d,k){if(void 0===a||null===a||se(a)||ib(a)||Ir(a)||Js(a))return a;if(Array.isArray(a))return Te.array(a,
{name:k,deep:!1});if(D(a))return Te.object(a,void 0,{name:k,deep:!1});if(O(a))return Te.map(a,{name:k,deep:!1});if(R(a))return Te.set(a,{name:k,deep:!1})}}),hf=Xb("observable.struct",{enhancer:function(a,d){return ta(a,d)?d:a}}),rf=Ta(re);Object.assign(Zc,rf);var ki={box:function(a,d){d=d||qh;return new Hs(a,Dc(d),d.name,!0,d.equals)},array:function(a,d){d=d||qh;return(!1===Nf.useProxies||!1===d.proxy?tf:ob)(a,Dc(d),d.name)},map:function(a,d){d=d||qh;return new Gz(a,Dc(d),d.name)},set:function(a,
d){d=d||qh;return new Hz(a,Dc(d),d.name)},object:function(a,d,k){if(!1===Nf.useProxies||!1===(null==k?void 0:k.proxy))k=yd({},k);else{var F={},Y,ka;X();F=yd(F,k);k=null!=(ka=(Y=F[ee]).proxy_)?ka:Y.proxy_=new Proxy(F,jE)}return pc(k,a,d)},ref:Ta(Zd),shallow:Ta(pe),deep:rf,struct:Ta(hf)},Te=qx(Zc,ki),Yh=yb("computed"),Ki=yb("computed.struct",{equals:of.structural}),Ef=function(a,d){if(P(d))return Da(a,d,Yh);if(D(a))return Ta(yb("computed",a));d=D(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new Eu(d)};
Object.assign(Ef,Yh);Ef.struct=Ta(Ki);var Sp,Nv,Qv=0,XD=1,YD=null!=(Sp=null==(Nv=rq(function(){},"name"))?void 0:Nv.configurable)?Sp:!1,Az={value:"action",configurable:!0,writable:!1,enumerable:!1};var ZD=Symbol.toPrimitive;var Hs=function(a){function d(F,Y,ka,oa,Fa){void 0===ka&&(ka="ObservableValue");void 0===Fa&&(Fa=of["default"]);oa=a.call(this,ka)||this;oa.enhancer=void 0;oa.hasUnreportedChange_=!1;oa.interceptors_=void 0;oa.changeListeners_=void 0;oa.value_=void 0;oa.dehancer=void 0;oa.enhancer=
Y;oa.name_=ka;oa.equals=Fa;oa.value_=Y(F,void 0,ka);return oa}ha(d,a);var k=d.prototype;k.dehanceValue=function(F){return void 0!==this.dehancer?this.dehancer(F):F};k.set=function(F){F=this.prepareNewValue_(F);F!==Nf.UNCHANGED&&this.setNewValue_(F)};k.prepareNewValue_=function(F){if(de(this)){F=qc(this,{object:this,type:Aq,newValue:F});if(!F)return Nf.UNCHANGED;F=F.newValue}F=this.enhancer(F,this.value_,this.name_);return this.equals(this.value_,F)?Nf.UNCHANGED:F};k.setNewValue_=function(F){var Y=
this.value_;this.value_=F;this.reportChanged();sf(this)&&Ge(this,{type:Aq,object:this,newValue:F,oldValue:Y})};k.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};k.intercept_=function(F){return Vc(this,F)};k.observe_=function(F,Y){Y&&F({observableKind:"value",debugObjectName:this.name_,object:this,type:Aq,newValue:this.value_,oldValue:void 0});return Sf(this,F)};k.raw=function(){return this.value_};k.toJSON=function(){return this.get()};k.toString=function(){return this.name_+
"["+this.value_+"]"};k.valueOf=function(){return aa(this.get())};k[ZD]=function(){return this.valueOf()};return d}(sg),$D=C("ObservableValue",Hs);var aE=Symbol.toPrimitive;var Eu=function(){function a(k){this.dependenciesState_=ck.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=ck.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Is(null);
this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=Bt.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;k.get||f(31);this.derivation=k.get;this.name_=k.name||"ComputedValue";k.set&&(this.setter_=Jc("ComputedValue-setter",k.set));this.equals_=k.equals||(k.compareStructural||k.struct?of.structural:of["default"]);this.scope_=k.context;this.requiresReaction_=k.requiresReaction;
this.keepAlive_=!!k.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){kb(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(k){return k()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(k){return k()})};d.get=function(){this.isComputing_&&f(32,this.name_,this.derivation);if(0!==Nf.inBatch||0!==this.observers_.size||this.keepAlive_){if(Rb(this),Tc(this)){var k=Nf.trackingContext;this.keepAlive_&&!k&&(Nf.trackingContext=this);this.trackAndCompute()&&Yb(this);Nf.trackingContext=
k}}else Tc(this)&&(this.warnAboutUntrackedRead_(),ed(),this.value_=this.computeValue_(!1),Pd());k=this.value_;if(k instanceof Is)throw k.cause;return k};d.set=function(k){if(this.setter_){this.isRunningSetter_&&f(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,k)}finally{this.isRunningSetter_=!1}}else f(34,this.name_)};d.trackAndCompute=function(){var k=this.value_,F=this.dependenciesState_===ck.NOT_TRACKING_,Y=this.computeValue_(!0);if(k=F||k instanceof Is||Y instanceof
Is||!this.equals_(k,Y))this.value_=Y;return k};d.computeValue_=function(k){this.isComputing_=!0;var F=yc(!1);if(k)var Y=bd(this,this.derivation,this.scope_);else if(!0===Nf.disableErrorBoundaries)Y=this.derivation.call(this.scope_);else try{Y=this.derivation.call(this.scope_)}catch(ka){Y=new Is(ka)}Nf.allowStateChanges=F;this.isComputing_=!1;return Y};d.suspend_=function(){this.keepAlive_||(Id(this),this.value_=void 0)};d.observe_=function(k,F){var Y=this,ka=!0,oa=void 0;return Kd(function(){var Fa=
Y.get();if(!ka||F){var Qa=mc();k({observableKind:"computed",debugObjectName:Y.name_,type:Aq,object:Y,newValue:Fa,oldValue:oa});Nf.trackingDerivation=Qa}ka=!1;oa=Fa})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};d.valueOf=function(){return aa(this.get())};d[aE]=function(){return this.valueOf()};return a}(),Fu=C("ComputedValue",Eu),ck;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=
1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(ck||={});var Bt;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(Bt||={});var Is=function(a){this.cause=void 0;this.cause=a},Rv=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];
this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},Sv=!0,Bz=!1,Nf=function(){var a=J();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&(Sv=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new Rv).version&&(Sv=!1);if(Sv){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED=
{}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new Rv}setTimeout(function(){Bz||f(35)},1);return new Rv}(),Ct=function(){function a(k,F,Y,ka){void 0===k&&(k="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=ck.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=Bt.NONE;
this.name_=k;this.onInvalidate_=F;this.errorHandler_=Y;this.requiresObservable_=ka}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Nf.pendingReactions.push(this),0<Nf.inBatch||Nf.isRunningReactions||Tv(nb))};d.isScheduled=function(){return this.isScheduled_};d.runReaction_=function(){if(!this.isDisposed_){ed();this.isScheduled_=!1;var k=Nf.trackingContext;Nf.trackingContext=this;if(Tc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(F){this.reportExceptionInDerivation_(F)}}Nf.trackingContext=
k;Pd()}};d.track=function(k){if(!this.isDisposed_){ed();this.isRunning_=!0;var F=Nf.trackingContext;Nf.trackingContext=this;k=bd(this,k,void 0);Nf.trackingContext=F;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Id(this);k instanceof Is&&this.reportExceptionInDerivation_(k.cause);Pd()}};d.reportExceptionInDerivation_=function(k){var F=this;if(this.errorHandler_)this.errorHandler_(k,this);else{if(Nf.disableErrorBoundaries)throw k;Nf.suppressReactionErrors||console.error("[mobx] uncaught error in '"+
this+"'",k);Nf.globalReactionErrorHandlers.forEach(function(Y){return Y(k,F)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(ed(),Id(this),Pd()))};d.getDisposer_=function(){var k=this.dispose.bind(this);k[ee]=this;return k};d.toString=function(){return"Reaction["+this.name_+"]"};d.trace=function(k){void 0===k&&(k=!1);zb(this,k)};return a}(),bE=100,Tv=function(a){return a()},Uv=C("Reaction",Ct),Cz="action",Dz=ab(Cz),cE=ab("action.bound",{bound:!0}),Ez=ab("autoAction",
{autoAction:!0}),dE=ab("autoAction.bound",{autoAction:!0,bound:!0}),yg=Qc(!1);Object.assign(yg,Dz);var Gu=Qc(!0);Object.assign(Gu,Ez);yg.bound=Ta(cE);Gu.bound=Ta(dE);var eE=function(a){return a()},fE="onBO",gE="onBUO",hE=0;Wb.prototype=Object.create(Error.prototype);var Fz=qa("flow"),iE=qa("flow.bound",{bound:!0}),Hu=Object.assign(function(a,d){if(P(d))return Da(a,d,Fz);var k=a.name||"\x3cunnamed flow\x3e";d=function(){var F=arguments,Y=++hE,ka=yg(k+" - runid: "+Y+" - init",a).apply(this,F),oa,Fa=
void 0;F=new Promise(function(Qa,Wa){function eb(Ob){Fa=void 0;try{var jc=yg(k+" - runid: "+Y+" - yield "+Ub++,ka.next).call(ka,Ob)}catch(vc){return Wa(vc)}Mb(jc)}function jb(Ob){Fa=void 0;try{var jc=yg(k+" - runid: "+Y+" - yield "+Ub++,ka["throw"]).call(ka,Ob)}catch(vc){return Wa(vc)}Mb(jc)}function Mb(Ob){if(ia(null==Ob?void 0:Ob.then))Ob.then(Mb,Wa);else{if(Ob.done)return Qa(Ob.value);Fa=Promise.resolve(Ob.value);return Fa.then(eb,jb)}}var Ub=0;oa=Wa;eb(void 0)});F.cancel=yg(k+" - runid: "+Y+" - cancel",
function(){try{if(Fa){var Qa=Fa;ia(Qa.cancel)&&Qa.cancel()}var Wa=ka["return"](void 0),eb=Promise.resolve(Wa.value);eb.then(Gb,Gb);ia(eb.cancel)&&eb.cancel();oa(new Wb)}catch(jb){oa(jb)}});return F};d.isMobXFlow=!0;return d},Fz);Hu.bound=Ta(iE);var jE={has:function(a,d){return a[ee].has_(d)},get:function(a,d){return a[ee].get_(d)},set:function(a,d,k){var F;return P(d)?null!=(F=a[ee].set_(d,k,!0))?F:!0:!1},deleteProperty:function(a,d){var k;return P(d)?null!=(k=a[ee].delete_(d,!0))?k:!0:!1},defineProperty:function(a,
d,k){var F;return null!=(F=a[ee].defineProperty_(d,k))?F:!0},ownKeys:function(a){return a[ee].ownKeys_()},preventExtensions:function(a){f(13)}},Aq="update",kE={get:function(a,d){var k=a[ee];return d===ee?k:"length"===d?k.getArrayLength_():"string"!==typeof d||isNaN(d)?G(Vv,d)?Vv[d]:a[d]:k.get_(parseInt(d))},set:function(a,d,k){var F=a[ee];"length"===d&&F.setArrayLength_(k);"symbol"===typeof d||isNaN(d)?a[d]=k:F.set_(parseInt(d),k);return!0},preventExtensions:function(){f(15)}},tx=function(){function a(k,
F,Y,ka){void 0===k&&(k="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=Y;this.legacyMode_=ka;this.atom_=new sg(k);this.enhancer_=function(oa,Fa){return F(oa,Fa,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.dehanceValues_=function(k){return void 0!==this.dehancer&&0<
k.length?k.map(this.dehancer):k};d.intercept_=function(k){return Vc(this,k)};d.observe_=function(k,F){void 0===F&&(F=!1);F&&k({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Sf(this,k)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(k){("number"!==typeof k||isNaN(k)||0>k)&&f("Out of range: "+
k);var F=this.values_.length;if(k!==F)if(k>F){for(var Y=Array(k-F),ka=0;ka<k-F;ka++)Y[ka]=void 0;this.spliceWithArray_(F,0,Y)}else this.spliceWithArray_(k,F-k)};d.updateArrayLength_=function(k,F){k!==this.lastKnownLength_&&f(16);this.lastKnownLength_+=F;this.legacyMode_&&0<F&&ze(k+F+1)};d.spliceWithArray_=function(k,F,Y){var ka=this,oa=this.values_.length;void 0===k?k=0:k>oa?k=oa:0>k&&(k=Math.max(0,oa+k));F=1===arguments.length?oa-k:void 0===F||null===F?0:Math.max(0,Math.min(F,oa-k));void 0===Y&&
(Y=T);if(de(this)){var Fa=qc(this,{object:this.proxy_,type:"splice",index:k,removedCount:F,added:Y});if(!Fa)return T;F=Fa.removedCount;Y=Fa.added}Y=0===Y.length?Y:Y.map(function(Qa){return ka.enhancer_(Qa,void 0)});this.legacyMode_&&this.updateArrayLength_(oa,Y.length-F);oa=this.spliceItemsIntoValues_(k,F,Y);0===F&&0===Y.length||this.notifyArraySplice_(k,Y,oa);return this.dehanceValues_(oa)};d.spliceItemsIntoValues_=function(k,F,Y){if(1E4>Y.length){var ka;return(ka=this.values_).splice.apply(ka,[k,
F].concat(Y))}ka=this.values_.slice(k,k+F);var oa=this.values_.slice(k+F);this.values_.length+=Y.length-F;for(F=0;F<Y.length;F++)this.values_[k+F]=Y[F];for(F=0;F<oa.length;F++)this.values_[k+Y.length+F]=oa[F];return ka};d.notifyArrayChildUpdate_=function(k,F,Y){var ka=!this.owned_&&!1,oa=sf(this);k=oa||ka?{observableKind:"array",object:this.proxy_,type:Aq,debugObjectName:this.atom_.name_,index:k,newValue:F,oldValue:Y}:null;this.atom_.reportChanged();oa&&Ge(this,k)};d.notifyArraySplice_=function(k,
F,Y){var ka=!this.owned_&&!1,oa=sf(this);k=oa||ka?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:k,removed:Y,added:F,removedCount:Y.length,addedCount:F.length}:null;this.atom_.reportChanged();oa&&Ge(this,k)};d.get_=function(k){if(this.legacyMode_&&k>=this.values_.length)console.warn("[mobx] Out of bounds read: "+k);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[k])};d.set_=function(k,F){var Y=this.values_;this.legacyMode_&&
k>Y.length&&f(17,k,Y.length);if(k<Y.length){var ka=Y[k];if(de(this)){F=qc(this,{type:Aq,object:this.proxy_,index:k,newValue:F});if(!F)return;F=F.newValue}F=this.enhancer_(F,ka);F!==ka&&(Y[k]=F,this.notifyArrayChildUpdate_(k,F,ka))}else{k=Array(k+1-Y.length);for(ka=0;ka<k.length-1;ka++)k[ka]=void 0;k[k.length-1]=F;this.spliceWithArray_(Y.length,0,k)}};return a}(),Vv={clear:function(){return this.splice(0)},replace:function(a){var d=this[ee];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},
splice:function(a,d){for(var k=arguments.length,F=Array(2<k?k-2:0),Y=2;Y<k;Y++)F[Y-2]=arguments[Y];k=this[ee];switch(arguments.length){case 0:return[];case 1:return k.spliceWithArray_(a);case 2:return k.spliceWithArray_(a,d)}return k.spliceWithArray_(a,d,F)},spliceWithArray:function(a,d,k){return this[ee].spliceWithArray_(a,d,k)},push:function(){for(var a=this[ee],d=arguments.length,k=Array(d),F=0;F<d;F++)k[F]=arguments[F];a.spliceWithArray_(a.values_.length,0,k);return a.values_.length},pop:function(){return this.splice(Math.max(this[ee].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var a=this[ee],d=arguments.length,k=Array(d),F=0;F<d;F++)k[F]=arguments[F];a.spliceWithArray_(0,0,k);return a.values_.length},reverse:function(){Nf.trackingDerivation&&f(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){Nf.trackingDerivation&&f(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[ee];a=d.dehanceValues_(d.values_).indexOf(a);
return-1<a?(this.splice(a,1),!0):!1}};wb("concat",$a);wb("flat",$a);wb("includes",$a);wb("indexOf",$a);wb("join",$a);wb("lastIndexOf",$a);wb("slice",$a);wb("toString",$a);wb("toLocaleString",$a);wb("every",Db);wb("filter",Db);wb("find",Db);wb("findIndex",Db);wb("flatMap",Db);wb("forEach",Db);wb("map",Db);wb("some",Db);wb("reduce",Cb);wb("reduceRight",Cb);var lE=C("ObservableArrayAdministration",tx),mE={};var nE=Symbol.iterator;var oE=Symbol.toStringTag;var Gz=function(){function a(k,F,Y){var ka=this;
void 0===F&&(F=Ma);void 0===Y&&(Y="ObservableMap");this.name_=this.enhancer_=void 0;this[ee]=mE;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=F;this.name_=Y;ia(Map)||f(18);this.keysAtom_=Va("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Fb(!0,function(){ka.merge(k)})}var d=a.prototype;d.has_=function(k){return this.data_.has(k)};d.has=function(k){var F=this;if(!Nf.trackingDerivation)return this.has_(k);var Y=this.hasMap_.get(k);
if(!Y){var ka=Y=new Hs(this.has_(k),bb,"ObservableMap.key?",!1);this.hasMap_.set(k,ka);Nc(ka,function(){return F.hasMap_["delete"](k)})}return Y.get()};d.set=function(k,F){var Y=this.has_(k);if(de(this)){F=qc(this,{type:Y?Aq:"add",object:this,newValue:F,name:k});if(!F)return this;F=F.newValue}Y?this.updateValue_(k,F):this.addValue_(k,F);return this};d["delete"]=function(k){var F=this;if(de(this)&&!qc(this,{type:"delete",object:this,name:k}))return!1;if(this.has_(k)){var Y=sf(this),ka=Y?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(k).value_,name:k}:null;xd(function(){var oa;F.keysAtom_.reportChanged();null==(oa=F.hasMap_.get(k))?void 0:oa.setNewValue_(!1);F.data_.get(k).setNewValue_(void 0);F.data_["delete"](k)});Y&&Ge(this,ka);return!0}return!1};d.updateValue_=function(k,F){var Y=this.data_.get(k);F=Y.prepareNewValue_(F);if(F!==Nf.UNCHANGED){var ka=sf(this);k=ka?{observableKind:"map",debugObjectName:this.name_,type:Aq,object:this,oldValue:Y.value_,
name:k,newValue:F}:null;Y.setNewValue_(F);ka&&Ge(this,k)}};d.addValue_=function(k,F){var Y=this;xd(function(){var Fa,Qa=new Hs(F,Y.enhancer_,"ObservableMap.key",!1);Y.data_.set(k,Qa);F=Qa.value_;null==(Fa=Y.hasMap_.get(k))?void 0:Fa.setNewValue_(!0);Y.keysAtom_.reportChanged()});var ka=sf(this),oa=ka?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:k,newValue:F}:null;ka&&Ge(this,oa)};d.get=function(k){return this.has(k)?this.dehanceValue_(this.data_.get(k).get()):this.dehanceValue_(void 0)};
d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var k=this,F=this.keys();return Za({next:function(){var Y=F.next(),ka=Y.done;Y=Y.value;return{done:ka,value:ka?void 0:k.get(Y)}}})};d.entries=function(){var k=this,F=this.keys();return Za({next:function(){var Y=F.next(),ka=Y.done;Y=Y.value;return{done:ka,value:ka?void 0:[Y,k.get(Y)]}}})};d[nE]=function(){return this.entries()};
d.forEach=function(k,F){for(var Y=Ga(this),ka;!(ka=Y()).done;)ka=ka.value,k.call(F,ka[1],ka[0],this)};d.merge=function(k){var F=this;Ir(k)&&(k=new Map(k));xd(function(){D(k)?ba(k).forEach(function(Y){return F.set(Y,k[Y])}):Array.isArray(k)?k.forEach(function(Y){return F.set(Y[0],Y[1])}):O(k)?(k.constructor!==Map&&f(19,k),k.forEach(function(Y,ka){return F.set(ka,Y)})):null!==k&&void 0!==k&&f(20,k)});return this};d.clear=function(){var k=this;xd(function(){Ed(function(){for(var F=Ga(k.keys()),Y;!(Y=
F()).done;)k["delete"](Y.value)})})};d.replace=function(k){var F=this;xd(function(){for(var Y=ad(k),ka=new Map,oa=!1,Fa=Ga(F.data_.keys()),Qa;!(Qa=Fa()).done;)if(Qa=Qa.value,!Y.has(Qa))if(F["delete"](Qa))oa=!0;else{var Wa=F.data_.get(Qa);ka.set(Qa,Wa)}for(Y=Ga(Y.entries());!(Fa=Y()).done;)Qa=Fa.value,Fa=Qa[0],Wa=Qa[1],Qa=F.data_.has(Fa),F.set(Fa,Wa),F.data_.has(Fa)&&(Wa=F.data_.get(Fa),ka.set(Fa,Wa),Qa||(oa=!0));if(!oa)if(F.data_.size!==ka.size)F.keysAtom_.reportChanged();else for(oa=F.data_.keys(),
Y=ka.keys(),Fa=oa.next(),Qa=Y.next();!Fa.done;){if(Fa.value!==Qa.value){F.keysAtom_.reportChanged();break}Fa=oa.next();Qa=Y.next()}F.data_=ka});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(k,F){return Sf(this,k)};d.intercept_=function(k){return Vc(this,k)};N(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:oE,get:function(){return"Map"}}]);return a}(),Ir=C("ObservableMap",
Gz),pE={};var qE=Symbol.iterator;var rE=Symbol.toStringTag;var Hz=function(){function a(k,F,Y){void 0===F&&(F=Ma);void 0===Y&&(Y="ObservableSet");this.name_=void 0;this[ee]=pE;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=Y;ia(Set)||f(22);this.atom_=Va(this.name_);this.enhancer_=function(ka,oa){return F(ka,oa,Y)};k&&this.replace(k)}var d=a.prototype;d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};
d.clear=function(){var k=this;xd(function(){Ed(function(){for(var F=Ga(k.data_.values()),Y;!(Y=F()).done;)k["delete"](Y.value)})})};d.forEach=function(k,F){for(var Y=Ga(this),ka;!(ka=Y()).done;)ka=ka.value,k.call(F,ka,ka,this)};d.add=function(k){var F=this;if(de(this)&&!qc(this,{type:"add",object:this,newValue:k}))return this;if(!this.has(k)){xd(function(){F.data_.add(F.enhancer_(k,void 0));F.atom_.reportChanged()});var Y=sf(this),ka=Y?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:k}:null;Y&&Ge(this,ka)}return this};d["delete"]=function(k){var F=this;if(de(this)&&!qc(this,{type:"delete",object:this,oldValue:k}))return!1;if(this.has(k)){var Y=sf(this),ka=Y?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:k}:null;xd(function(){F.atom_.reportChanged();F.data_["delete"](k)});Y&&Ge(this,ka);return!0}return!1};d.has=function(k){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(k))};d.entries=function(){var k=0,F=Array.from(this.keys()),
Y=Array.from(this.values());return Za({next:function(){var ka=k;k+=1;return ka<Y.length?{value:[F[ka],Y[ka]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var k=this,F=0,Y=Array.from(this.data_.values());return Za({next:function(){return F<Y.length?{value:k.dehanceValue_(Y[F++]),done:!1}:{done:!0}}})};d.replace=function(k){var F=this;Js(k)&&(k=new Set(k));xd(function(){Array.isArray(k)?(F.clear(),k.forEach(function(Y){return F.add(Y)})):
R(k)?(F.clear(),k.forEach(function(Y){return F.add(Y)})):null!==k&&void 0!==k&&f("Cannot initialize set from "+k)});return this};d.observe_=function(k,F){return Sf(this,k)};d.intercept_=function(k){return Vc(this,k)};d.toJSON=function(){return Array.from(this)};d.toString=function(){return"[object ObservableSet]"};d[qE]=function(){return this.values()};N(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:rE,get:function(){return"Set"}}]);return a}(),Js=C("ObservableSet",
Hz),Iz=Object.create(null),Jz=function(){function a(k,F,Y,ka){void 0===F&&(F=new Map);void 0===ka&&(ka=Sh);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=k;this.values_=F;this.name_=Y;this.defaultAnnotation_=ka;this.keysAtom_=new sg("ObservableObject.keys");this.isPlainObject_=D(this.target_)}var d=a.prototype;d.getObservablePropValue_=function(k){return this.values_.get(k).get()};
d.setObservablePropValue_=function(k,F){var Y=this.values_.get(k);if(Y instanceof Eu)return Y.set(F),!0;if(de(this)){F=qc(this,{type:Aq,object:this.proxy_||this.target_,name:k,newValue:F});if(!F)return null;F=F.newValue}F=Y.prepareNewValue_(F);if(F!==Nf.UNCHANGED){var ka=sf(this);k=ka?{type:Aq,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Y.value_,name:k,newValue:F}:null;Y.setNewValue_(F);ka&&Ge(this,k)}return!0};d.get_=function(k){Nf.trackingDerivation&&
!G(this.target_,k)&&this.has_(k);return this.target_[k]};d.set_=function(k,F,Y){void 0===Y&&(Y=!1);if(G(this.target_,k)){if(this.values_.has(k))return this.setObservablePropValue_(k,F);if(Y)return Reflect.set(this.target_,k,F);this.target_[k]=F;return!0}return this.extend_(k,{value:F,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Y)};d.has_=function(k){if(!Nf.trackingDerivation)return k in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var F=this.pendingKeys_.get(k);
F||(F=new Hs(k in this.target_,bb,"ObservableObject.key?",!1),this.pendingKeys_.set(k,F));return F.get()};d.make_=function(k,F){!0===F&&(F=this.defaultAnnotation_);if(!1!==F){if(!(k in this.target_)){var Y;if(null!=(Y=this.target_[Od])&&Y[k])return;f(1,F.annotationType_,this.name_+"."+k.toString())}for(Y=this.target_;Y&&Y!==sq;){var ka=rq(Y,k);if(ka){ka=F.make_(this,k,ka,Y);if(0===ka)return;if(1===ka)break}Y=Object.getPrototypeOf(Y)}var oa;null==(oa=this.target_[Od])?!0:delete oa[k]}};d.extend_=function(k,
F,Y,ka){void 0===ka&&(ka=!1);!0===Y&&(Y=this.defaultAnnotation_);if(!1===Y)return this.defineProperty_(k,F,ka);if(F=Y.extend_(this,k,F,ka)){var oa;null==(oa=this.target_[Od])?!0:delete oa[k]}return F};d.defineProperty_=function(k,F,Y){void 0===Y&&(Y=!1);try{ed();var ka=this.delete_(k);if(!ka)return ka;if(de(this)){var oa=qc(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:F.value});if(!oa)return null;var Fa=oa.newValue;F.value!==Fa&&(F=ca({},F,{value:Fa}))}if(Y){if(!Reflect.defineProperty(this.target_,
k,F))return!1}else Xp(this.target_,k,F);this.notifyPropertyAddition_(k,F.value)}finally{Pd()}return!0};d.defineObservableProperty_=function(k,F,Y,ka){void 0===ka&&(ka=!1);try{ed();var oa=this.delete_(k);if(!oa)return oa;if(de(this)){var Fa=qc(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:F});if(!Fa)return null;F=Fa.newValue}var Qa=$d(k),Wa={configurable:Nf.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Qa.get,set:Qa.set};if(ka){if(!Reflect.defineProperty(this.target_,
k,Wa))return!1}else Xp(this.target_,k,Wa);var eb=new Hs(F,Y,"ObservableObject.key",!1);this.values_.set(k,eb);this.notifyPropertyAddition_(k,eb.value_)}finally{Pd()}return!0};d.defineComputedProperty_=function(k,F,Y){void 0===Y&&(Y=!1);try{ed();var ka=this.delete_(k);if(!ka)return ka;if(de(this)&&!qc(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:void 0}))return null;F.name||(F.name="ObservableObject.key");F.context=this.proxy_||this.target_;var oa=$d(k),Fa={configurable:Nf.safeDescriptors?
this.isPlainObject_:!0,enumerable:!1,get:oa.get,set:oa.set};if(Y){if(!Reflect.defineProperty(this.target_,k,Fa))return!1}else Xp(this.target_,k,Fa);this.values_.set(k,new Eu(F));this.notifyPropertyAddition_(k,void 0)}finally{Pd()}return!0};d.delete_=function(k,F){void 0===F&&(F=!1);if(!G(this.target_,k))return!0;if(de(this)&&!qc(this,{object:this.proxy_||this.target_,name:k,type:"remove"}))return null;try{var Y,ka;ed();var oa=sf(this),Fa=this.values_.get(k),Qa=void 0;if(!Fa&&oa){var Wa;Qa=null==(Wa=
rq(this.target_,k))?void 0:Wa.value}if(F){if(!Reflect.deleteProperty(this.target_,k))return!1}else delete this.target_[k];Fa&&(this.values_["delete"](k),Fa instanceof Hs&&(Qa=Fa.value_),gc(Fa));this.keysAtom_.reportChanged();null==(Y=this.pendingKeys_)?void 0:null==(ka=Y.get(k))?void 0:ka.set(k in this.target_);if(oa){var eb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Qa,name:k};oa&&Ge(this,eb)}}finally{Pd()}return!0};d.observe_=function(k,
F){return Sf(this,k)};d.intercept_=function(k){return Vc(this,k)};d.notifyPropertyAddition_=function(k,F){var Y,ka,oa=sf(this);oa&&(F=oa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:k,newValue:F}:null,oa&&Ge(this,F));null==(Y=this.pendingKeys_)?void 0:null==(ka=Y.get(k))?void 0:ka.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=function(){this.keysAtom_.reportObserved();return Hc(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();
return Object.keys(this.target_)};return a}(),sE=C("ObservableObjectAdministration",Jz),tE=cf(0),ux=0,Kz=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,d):void 0!==a.prototype.__proto__?a.prototype.__proto__=d:a.prototype=d})(Kz,Array.prototype);var vx=function(a,d,k){function F(ka,oa,Fa,Qa){void 0===Fa&&(Fa="ObservableArray");void 0===Qa&&(Qa=!1);var Wa=a.call(this)||this;oa=new tx(Fa,oa,Qa,!0);oa.proxy_=pa(Wa);Q(pa(Wa),ee,oa);ka&&ka.length&&(oa=yc(!0),Wa.spliceWithArray(0,
0,ka),Nf.allowStateChanges=oa);Object.defineProperty(pa(Wa),"0",tE);return Wa}ha(F,a);var Y=F.prototype;Y.concat=function(){this[ee].atom_.reportObserved();for(var ka=arguments.length,oa=Array(ka),Fa=0;Fa<ka;Fa++)oa[Fa]=arguments[Fa];return Array.prototype.concat.apply(this.slice(),oa.map(function(Qa){return ib(Qa)?Qa.slice():Qa}))};Y[k]=function(){var ka=this,oa=0;return Za({next:function(){return oa<ka.length?{value:ka[oa++],done:!1}:{done:!0,value:void 0}}})};N(F,[{key:"length",get:function(){return this[ee].getArrayLength_()},
set:function(ka){this[ee].setArrayLength_(ka)}},{key:d,get:function(){return"Array"}}]);return F}(Kz,Symbol.toStringTag,Symbol.iterator);Object.entries(Vv).forEach(function(a){var d=a[0];a=a[1];"concat"!==d&&M(vx.prototype,d,a)});ze(1E3);var Lz=sq.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof J()[a]&&f("MobX requires global '"+a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:uc,extras:{getDebugName:ub},
$mobx:ee});var uE=V(586),ln=class{constructor(a){gb(this,"props");gb(this,"aspectRatio");gb(this,"type");gb(this,"hideCloneHandles",!1);gb(this,"hideResizeHandles",!1);gb(this,"hideRotateHandle",!1);gb(this,"hideContextBar",!1);gb(this,"hideSelectionDetail",!1);gb(this,"hideSelection",!1);gb(this,"canChangeAspectRatio",!0);gb(this,"canUnmount",!0);gb(this,"canResize",[!0,!0]);gb(this,"canScale",!0);gb(this,"canFlip",!0);gb(this,"canEdit",!1);gb(this,"canBind",!1);gb(this,"nonce");gb(this,"bindingDistance",
4);gb(this,"isDirty",!1);gb(this,"lastSerialized");gb(this,"getCenter",()=>xf.getBoundsCenter(this.bounds));gb(this,"getRotatedBounds",()=>{const {bounds:ka,props:{rotation:oa}}=this;return oa?xf.getBoundsFromPoints(xf.getRotatedCorners(ka,oa)):ka});gb(this,"hitTestPoint",ka=>{var oa=this.rotatedBounds;if(!this.props.rotation)return il.pointInBounds(ka,oa);oa=xf.getRotatedCorners(oa,this.props.rotation);return il.pointInPolygon(ka,oa)});gb(this,"hitTestLineSegment",(ka,oa)=>{const Fa=xf.getBoundsFromPoints([ka,
oa]),{rotatedBounds:Qa,props:{rotation:Wa=0}}=this;return xf.boundsContain(Qa,Fa)||Wa?g(ka,oa,xf.getRotatedCorners(this.bounds)).didIntersect:0<q(Qa,ka,oa).length});gb(this,"hitTestBounds",ka=>{const {rotatedBounds:oa,props:{rotation:Fa=0}}=this,Qa=xf.getRotatedCorners(this.bounds,Fa);return xf.boundsContain(ka,oa)||0<y([ka.minX,ka.minY],[ka.width,ka.height],Qa).length});gb(this,"getExpandedBounds",()=>xf.expandBounds(this.getBounds(),this.bindingDistance));gb(this,"getBindingPoint",(ka,oa,Fa,Qa)=>
{var Wa=this.getBounds(),eb=this.getExpandedBounds();if(il.pointInBounds(ka,eb)){var jb=B(oa,Fa,eb).filter(Mb=>Mb.didIntersect).map(Mb=>Mb.points[0]);if(jb.length)return Fa=this.getCenter(),jb=jb.sort((Mb,Ub)=>je.dist(Ub,oa)-je.dist(Mb,oa))[0],jb=je.med(ka,jb),Qa?(Qa=2>je.dist(ka,Fa)?Fa:ka,Wa=0):(Qa=2>je.distanceToLineSegment(ka,jb,Fa)?Fa:jb,Wa=il.pointInBounds(ka,Wa)?this.bindingDistance:Math.max(this.bindingDistance,xf.getBoundsSides(Wa).map(Mb=>je.distanceToLineSegment(Mb[1][0],Mb[1][1],ka)).sort((Mb,
Ub)=>Mb-Ub)[0])),eb=je.divV(je.sub(Qa,[eb.minX,eb.minY]),[eb.width,eb.height]),{point:je.clampV(eb,0,1),distance:Wa}}});gb(this,"getSerialized",()=>Ab(kf(me({},this.props),{type:this.type,nonce:this.nonce})));gb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||xd(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});gb(this,"validateProps",ka=>ka);gb(this,
"update",(ka,oa=!1,Fa=!1)=>{oa||this.isDirty||this.setIsDirty(!0);oa||Fa||this.incNonce();Object.assign(this.props,this.validateProps(ka));return this});gb(this,"clone",()=>new this.constructor(this.serialized));gb(this,"onResetBounds",ka=>this);gb(this,"scale",[1,1]);gb(this,"onResizeStart",ka=>{var oa;this.scale=[...(null!=(oa=this.props.scale)?oa:[1,1])];return this});gb(this,"onResize",(ka,oa)=>{const {bounds:Fa,rotation:Qa,scale:[Wa,eb]}=oa;ka=[...this.scale];0>Wa&&(ka[0]*=-1);0>eb&&(ka[1]*=
-1);this.update({point:[Fa.minX,Fa.minY],scale:ka,rotation:Qa});return this});gb(this,"onHandleChange",(ka,{id:oa,delta:Fa})=>{if(void 0!==ka.handles){var Qa=Ms(ka.handles);Qa[oa]=kf(me({},Qa[oa]),{point:je.add(Fa,ka.handles[oa].point)});var Wa=xf.getCommonTopLeft(Object.values(Qa).map(eb=>eb.point));Object.values(Qa).forEach(eb=>{eb.point=je.sub(eb.point,Wa)});this.update({point:je.add(ka.point,Wa),handles:Qa})}});var d,k;const F=this.constructor.id,Y=null!=(d=this.constructor.defaultProps)?d:{};
this.type=F;this.props=me(me({scale:[1,1]},Y),a);this.nonce=null!=(k=a.nonce)?k:Date.now();Qg(this)}get id(){return this.props.id}setNonce(a){this.nonce=a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=this.getBounds();const {stroke:d,strokeWidth:k,strokeType:F,
opacity:Y,fill:ka,noFill:oa,borderRadius:Fa}=this.props;return(0,uE.jsx)("rect",{fill:oa?"none":bh(ka,"background"),stroke:bh(d,"stroke"),strokeWidth:null!=k?k:2,strokeDasharray:"dashed"===F?"8 2":void 0,fillOpacity:null!=Y?Y:.2,width:a.width,height:a.height,rx:Fa,ry:Fa})}};gb(ln,"type");ie([Te],ln.prototype,"props",2);ie([Te],ln.prototype,"canResize",2);ie([Te],ln.prototype,"nonce",2);ie([Te],ln.prototype,"isDirty",2);ie([Te],ln.prototype,"lastSerialized",2);ie([Ef],ln.prototype,"id",1);ie([yg],
ln.prototype,"setNonce",1);ie([yg],ln.prototype,"incNonce",1);ie([yg],ln.prototype,"setIsDirty",1);ie([yg],ln.prototype,"setLastSerialized",1);ie([Ef],ln.prototype,"center",1);ie([Ef],ln.prototype,"bounds",1);ie([Ef],ln.prototype,"rotatedBounds",1);ie([Ef],ln.prototype,"serialized",1);ie([yg],ln.prototype,"update",2);var fo=class extends ln{constructor(a={}){super(a);gb(this,"canBind",!0);gb(this,"getBounds",()=>{const [d,k]=this.props.point,[F,Y]=this.props.size;return{minX:d,minY:k,maxX:d+F,maxY:k+
Y,width:F,height:Y}});gb(this,"getRotatedBounds",()=>xf.getBoundsFromPoints(xf.getRotatedCorners(this.bounds,this.props.rotation)));gb(this,"onResize",(d,k)=>{const {bounds:F,rotation:Y,scale:[ka,oa]}=k;d=[...this.scale];0>ka&&(d[0]*=-1);0>oa&&(d[1]*=-1);this.update({point:[F.minX,F.minY],scale:d,rotation:Y});return this.update({rotation:Y,point:[F.minX,F.minY],size:[Math.max(1,F.width),Math.max(1,F.height)],scale:d})});gb(this,"validateProps",d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),
d.size[1]=Math.max(d.size[1],1));return d});Qg(this)}};gb(fo,"id","box");gb(fo,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var Dt=class extends ln{constructor(a={}){super(a);gb(this,"getBounds",()=>{const {pointBounds:d,props:{point:k}}=this;return xf.translateBounds(d,k)});gb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:k},bounds:F,rotatedPoints:Y}=this;return d?xf.translateBounds(xf.getBoundsFromPoints(Y),k):F});gb(this,"normalizedPoints",[]);
gb(this,"isResizeFlippedX",!1);gb(this,"isResizeFlippedY",!1);gb(this,"onResizeStart",()=>{var d;const {bounds:k,props:{points:F}}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const Y=[k.width,k.height];this.normalizedPoints=F.map(ka=>Dd.divV(ka,Y));return this});gb(this,"onResize",(d,k)=>{const {bounds:F,scale:[Y,ka]}=k,oa=[F.width,F.height];d=[...this.scale];0>Y&&(d[0]*=-1);0>ka&&(d[1]*=-1);return this.update(Y||ka?{point:[F.minX,F.minY],points:this.normalizedPoints.map(Fa=>Dd.mulV(Fa,
oa).concat(Fa[2])),scale:d}:{point:[F.minX,F.minY],points:this.normalizedPoints.map(Fa=>Dd.mulV(Fa,oa).concat(Fa[2]))})});gb(this,"hitTestPoint",d=>{const {props:{points:k,point:F}}=this;return il.pointNearToPolyline(Dd.sub(d,F),k)});gb(this,"hitTestLineSegment",(d,k)=>{const {bounds:F,props:{points:Y,point:ka}}=this;if(il.pointInBounds(d,F)||il.pointInBounds(k,F)||0<q(F,d,k).length){const oa=Dd.sub(d,ka),Fa=Dd.sub(k,ka);return g(oa,Fa,Y).didIntersect||!!Y.find(Qa=>5>Dd.dist(oa,Qa)||5>Dd.dist(Fa,
Qa))}return!1});gb(this,"hitTestBounds",d=>{const {rotatedBounds:k,props:{points:F,point:Y}}=this,ka=xf.translateBounds(d,Dd.neg(Y));return xf.boundsContain(d,k)||F.every(oa=>il.pointInBounds(oa,ka))||xf.boundsCollide(d,k)&&0<L([ka.minX,ka.minY],[ka.width,ka.height],F).length});Qg(this)}get pointBounds(){const {props:{points:a}}=this;return xf.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:k},center:F}=this;if(!k)return d;const Y=Dd.sub(F,a);return d.map(ka=>Dd.rotWith(ka,
Y,k))}};gb(Dt,"id","draw");gb(Dt,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});ie([Ef],Dt.prototype,"pointBounds",1);ie([Ef],Dt.prototype,"rotatedPoints",1);var wx=class extends fo{constructor(a={}){super(a);gb(this,"getBounds",()=>{const {props:{point:[d,k],size:[F,Y]}}=this;return xf.getRotatedEllipseBounds(d,k,F/2,Y/2,0)});gb(this,"getRotatedBounds",()=>{const {props:{point:[d,k],size:[F,Y],rotation:ka}}=this;return xf.getRotatedEllipseBounds(d,k,F/
2,Y/2,ka)});gb(this,"hitTestPoint",d=>{const {props:{size:k,rotation:F},center:Y}=this;return il.pointInEllipse(d,Y,k[0],k[1],F||0)});gb(this,"hitTestLineSegment",(d,k)=>{const {props:{size:[F,Y],rotation:ka=0},center:oa}=this;return n(d,k,oa,F,Y,ka).didIntersect});gb(this,"hitTestBounds",d=>{const {props:{size:[k,F],rotation:Y=0},rotatedBounds:ka}=this;var oa;if(!(oa=xf.boundsContain(d,ka))){const {minX:Fa,minY:Qa,width:Wa,height:eb}=d;oa=0<r(this.center,k/2,F/2,Y,[Fa,Qa],[Wa,eb]).length}return oa});
Qg(this)}};gb(wx,"id","ellipse");gb(wx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var xx=class extends fo{constructor(a={}){super(a);gb(this,"onResetBounds",d=>{const {clipping:k,size:F,point:Y}=this.props;if(k){const [ka,oa,Fa,Qa]=Array.isArray(k)?k:[k,k,k,k];return this.update({clipping:0,point:[Y[0]-Qa,Y[1]-ka],size:[F[0]+(Qa-oa),F[1]+(ka-Fa)]})}if(d.asset){const {size:[ka,oa]}=d.asset;this.update({clipping:0,point:[Y[0]+F[0]/2-ka/2,Y[1]+F[1]/2-oa/
2],size:[ka,oa]})}return this});gb(this,"onResize",(d,k)=>{const {bounds:F,clip:Y,scale:ka}=k;({clipping:k}=this.props);const {clipping:oa}=d;if(Y){const {point:[Fa,Qa],size:[Wa,eb]}=d,[jb,Mb,Ub,Ob]=oa?Array.isArray(oa)?oa:[oa,oa,oa,oa]:[0,0,0,0];k=[jb+(F.minY-Qa),Mb+(F.maxX-(Fa+Wa)),Ub+(F.maxY-(Qa+eb)),Ob+(F.minX-Fa)]}else void 0!==oa&&(k=Array.isArray(oa)?oa:[oa,oa,oa,oa],k=[k[0]*ka[1],k[1]*ka[0],k[2]*ka[1],k[3]*ka[0]]);if(k&&Array.isArray(k)){const Fa=k;Fa.every((Qa,Wa)=>0===Wa||Qa===Fa[Wa-1])&&
(k=Fa[0])}return this.update({point:[F.minX,F.minY],size:[Math.max(1,F.width),Math.max(1,F.height)],clipping:k})});Qg(this)}};gb(xx,"id","ellipse");gb(xx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Mz=class extends ln{constructor(a={}){super(a);gb(this,"getBounds",()=>{const {points:d,props:{point:k}}=this;return xf.translateBounds(xf.getBoundsFromPoints(d),k)});gb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,
props:{point:k}}=this;return xf.translateBounds(xf.getBoundsFromPoints(d),k)});gb(this,"normalizedHandles",[]);gb(this,"onResizeStart",()=>{var d;const {props:{handles:k},bounds:F}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const Y=[F.width,F.height];this.normalizedHandles=Object.values(k).map(ka=>Dd.divV(ka.point,Y));return this});gb(this,"onResize",(d,k)=>{const {bounds:F,scale:[Y,ka]}=k,{props:{handles:oa},normalizedHandles:Fa}=this,Qa=[F.width,F.height];d=[...this.scale];0>Y&&(d[0]*=
-1);0>ka&&(d[1]*=-1);return this.update({point:[F.minX,F.minY],handles:Object.values(oa).map((Wa,eb)=>kf(me({},Wa),{point:Dd.mulV(Fa[eb],Qa)})),scale:d})});gb(this,"hitTestPoint",d=>{const {points:k}=this;return il.pointNearToPolyline(Dd.sub(d,this.props.point),k)});gb(this,"hitTestLineSegment",(d,k)=>{const {bounds:F,points:Y,props:{point:ka}}=this;if(il.pointInBounds(d,F)||il.pointInBounds(k,F)||0<q(F,d,k).length){const oa=Dd.sub(d,ka),Fa=Dd.sub(k,ka);return g(oa,Fa,Y).didIntersect||!!Y.find(Qa=>
5>Dd.dist(oa,Qa)||5>Dd.dist(Fa,Qa))}return!1});gb(this,"hitTestBounds",d=>{const {rotatedBounds:k,points:F,props:{point:Y}}=this,ka=xf.translateBounds(d,Dd.neg(Y));return xf.boundsContain(d,k)||F.every(oa=>il.pointInBounds(oa,ka))||xf.boundsCollide(d,k)&&0<L([ka.minX,ka.minY],[ka.width,ka.height],F).length});gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Mz.defaultProps.handles);return d});Qg(this)}get points(){return Object.values(this.props.handles).map(a=>
a.point)}get centroid(){const {points:a}=this;return Wl.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,rotation:k}}=this;return k?Object.values(d).map(F=>Dd.rotWith(F.point,a,k)):this.points}},Et=Mz;gb(Et,"id","polyline");gb(Et,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});ie([Ef],Et.prototype,"points",1);ie([Ef],Et.prototype,"centroid",1);ie([Ef],Et.prototype,"rotatedPoints",1);var Nz=class extends Et{constructor(a={}){super(a);
gb(this,"hideResizeHandles",!0);gb(this,"hideRotateHandle",!0);gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Nz.defaultProps.handles);return d});gb(this,"getHandlesChange",(d,k)=>{var F=$k(d.handles,k);F=$k(F,{start:{point:je.toFixed(F.start.point)},end:{point:je.toFixed(F.end.point)}});if(!je.isEqual(F.start.point,F.end.point)){k={point:d.point,handles:Ms(F)};d=d.point;F=xf.translateBounds(xf.getBoundsFromPoints(Object.values(F).map(ka=>
ka.point)),k.point);var Y=je.sub([F.minX,F.minY],d);je.isEqual(Y,[0,0])||(Object.values(k.handles).forEach(ka=>{ka.point=je.toFixed(je.sub(ka.point,Y))}),k.point=je.toFixed(je.add(k.point,Y)));return k}});Qg(this)}},Iu=Nz;gb(Iu,"id","line");gb(Iu,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Jr=class extends fo{constructor(a={}){super(a);gb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,
props:{point:k},offset:F}=this;return xf.translateBounds(xf.getBoundsFromPoints(d),Dd.add(k,F))});gb(this,"hitTestPoint",d=>{const {vertices:k}=this;return il.pointInPolygon(Dd.add(d,this.props.point),k)});gb(this,"hitTestLineSegment",(d,k)=>{const {vertices:F,props:{point:Y}}=this;return g(Dd.sub(d,Y),Dd.sub(k,Y),F).didIntersect});gb(this,"hitTestBounds",d=>{const {rotatedBounds:k,offset:F,rotatedVertices:Y,props:{point:ka}}=this,oa=xf.translateBounds(d,Dd.neg(Dd.add(ka,F)));return xf.boundsContain(d,
k)||Y.every(Fa=>il.pointInBounds(Fa,oa))||0<y([oa.minX,oa.minY],[oa.width,oa.height],Y).length});gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});Qg(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},vertices:d}=this;return d.map(k=>Dd.add(k,a))}get centroid(){const {vertices:a}=this;return Wl.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:k}}=this;return k?a.map(F=>
Dd.rotWith(F,d,k)):a}get offset(){const {props:{size:[a,d]}}=this,k=xf.getBoundsCenter(xf.getBoundsFromPoints(this.vertices));return Dd.sub(Dd.div([a,d],2),k)}getVertices(a=0){const {ratio:d,sides:k,size:F}=this.props;return 3===k?Wl.getTriangleVertices(F,a,d):Wl.getPolygonVertices(F,k,a,d)}};gb(Jr,"id","polygon");gb(Jr,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});ie([Ef],Jr.prototype,"vertices",1);ie([Ef],Jr.prototype,"pageVertices",
1);ie([Ef],Jr.prototype,"centroid",1);ie([Ef],Jr.prototype,"rotatedVertices",1);ie([Ef],Jr.prototype,"offset",1);var yx=class extends fo{constructor(a={}){super(a);gb(this,"canEdit",!0);gb(this,"canFlip",!1);Qg(this)}};gb(yx,"id","text");gb(yx,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Wv=class extends fo{constructor(a={}){super(a);gb(this,"canEdit",!1);gb(this,"canFlip",!1);gb(this,"getBounds",()=>0===this.shapes.length?(ef().deleteShapes([this.id]),
{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):xf.getCommonBounds(this.shapes.map(d=>d.getBounds())));Qg(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};gb(Wv,"id","group");gb(Wv,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});ie([Ef],Wv.prototype,"shapes",1);var Ft=class{constructor(){gb(this,"_id");gb(this,"_initial");gb(this,"_states");gb(this,"_isActive",!1);gb(this,"cursor");
gb(this,"_disposables",[]);gb(this,"children",new Map([]));gb(this,"registerStates",k=>{k.forEach(F=>this.children.set(F.id,new F(this,this)));return this});gb(this,"deregisterStates",k=>{k.forEach(F=>{var Y;null==(Y=this.children.get(F.id))?void 0:Y.dispose();this.children.delete(F.id)});return this});gb(this,"currentState",{});gb(this,"transition",(k,F={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${k}.`);const Y=this.children.get(k),ka=this.currentState;
if(!Y)throw Error(`Could not find a state named ${k}.`);xd(()=>{this.currentState?(ka._events.onExit(kf(me({},F),{toId:k})),ka.dispose(),this.setCurrentState(Y),this._events.onTransition(kf(me({},F),{fromId:ka.id,toId:k})),Y._events.onEnter(kf(me({},F),{fromId:ka.id}))):(this.currentState=Y,Y._events.onEnter(kf(me({},F),{fromId:""})))});return this});gb(this,"isIn",k=>{k=k.split(".").reverse();let F=this;for(;0<k.length;){const Y=k.pop();if(!Y)return!0;if(F.currentState.id===Y){if(0===k.length)return!0;
F=F.currentState}else break}return!1});gb(this,"isInAny",(...k)=>k.some(this.isIn));gb(this,"forwardEvent",(k,...F)=>{var Y,ka;(null==(ka=null==(Y=this.currentState)?void 0:Y._events)?0:ka[k])&&xd(()=>{var oa;return null==(oa=this.currentState._events)?void 0:oa[k](...F)})});gb(this,"_events",{onTransition:k=>{var F;null==(F=this.onTransition)?void 0:F.call(this,k)},onEnter:k=>{var F;this._isActive=!0;this.initial&&this.transition(this.initial,k);null==(F=this.onEnter)?void 0:F.call(this,k)},onExit:k=>
{var F,Y,ka;this._isActive=!1;null==(Y=null==(F=this.currentState)?void 0:F.onExit)?void 0:Y.call(F,{toId:"parent"});null==(ka=this.onExit)?void 0:ka.call(this,k)},onPointerDown:(k,F)=>{var Y;null==(Y=this.onPointerDown)?void 0:Y.call(this,k,F);this.forwardEvent("onPointerDown",k,F)},onPointerUp:(k,F)=>{var Y;null==(Y=this.onPointerUp)?void 0:Y.call(this,k,F);this.forwardEvent("onPointerUp",k,F)},onPointerMove:(k,F)=>{var Y;null==(Y=this.onPointerMove)?void 0:Y.call(this,k,F);this.forwardEvent("onPointerMove",
k,F)},onPointerEnter:(k,F)=>{var Y;null==(Y=this.onPointerEnter)?void 0:Y.call(this,k,F);this.forwardEvent("onPointerEnter",k,F)},onPointerLeave:(k,F)=>{var Y;null==(Y=this.onPointerLeave)?void 0:Y.call(this,k,F);this.forwardEvent("onPointerLeave",k,F)},onDoubleClick:(k,F)=>{var Y;null==(Y=this.onDoubleClick)?void 0:Y.call(this,k,F);this.forwardEvent("onDoubleClick",k,F)},onKeyDown:(k,F)=>{var Y;this._events.onModifierKey(k,F);null==(Y=this.onKeyDown)?void 0:Y.call(this,k,F);this.forwardEvent("onKeyDown",
k,F)},onKeyUp:(k,F)=>{var Y;this._events.onModifierKey(k,F);null==(Y=this.onKeyUp)?void 0:Y.call(this,k,F);this.forwardEvent("onKeyUp",k,F)},onPinchStart:(k,F)=>{var Y;null==(Y=this.onPinchStart)?void 0:Y.call(this,k,F);this.forwardEvent("onPinchStart",k,F)},onPinch:(k,F)=>{var Y;null==(Y=this.onPinch)?void 0:Y.call(this,k,F);this.forwardEvent("onPinch",k,F)},onPinchEnd:(k,F)=>{var Y;null==(Y=this.onPinchEnd)?void 0:Y.call(this,k,F);this.forwardEvent("onPinchEnd",k,F)},onModifierKey:(k,F)=>{switch(F.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(k,
F)}}});gb(this,"onEnter");gb(this,"onExit");gb(this,"onTransition");gb(this,"onPointerDown");gb(this,"onPointerUp");gb(this,"onPointerMove");gb(this,"onPointerEnter");gb(this,"onPointerLeave");gb(this,"onDoubleClick");gb(this,"onKeyDown");gb(this,"onKeyUp");gb(this,"onPinchStart");gb(this,"onPinch");gb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=a}};gb(Ft,"id");gb(Ft,"shortcuts");ie([Te],Ft.prototype,"currentState",2);ie([yg],Ft.prototype,"setCurrentState",1);var zx=class extends Ft{constructor(a,d){var k,F;super();gb(this,"_root");gb(this,
"_parent");gb(this,"children",new Map([]));gb(this,"registerStates",Y=>{Y.forEach(ka=>this.children.set(ka.id,new ka(this,this._root)));return this});gb(this,"deregisterStates",Y=>{Y.forEach(ka=>{var oa;null==(oa=this.children.get(ka.id))?void 0:oa.dispose();this.children.delete(ka.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(k=this.initial)?k:this.states[0].id,k=this.children.get(a))&&(this.setCurrentState(k),null==
(F=this.currentState)?void 0:F._events.onEnter({fromId:"initial"}));Qg(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};gb(zx,"cursor");var Kr=class extends zx{constructor(){super(...arguments);gb(this,"isLocked",!1);gb(this,"previous");gb(this,"onEnter",({fromId:a})=>{this.previous=a;this.cursor&&this.app.cursors.setCursor(this.cursor)});gb(this,"onTransition",
a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},fj=class extends zx{get app(){return this.root}get tool(){return this.parent}},Oz=class extends fj{constructor(){super(...arguments);gb(this,"cursor","crosshair");gb(this,"creatingShape");gb(this,"aspectRatio");gb(this,"initialBounds",{});gb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:k}}=
this.app;var {Shape:F}=this.tool;F=new F({id:Uk(),type:F.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:je.abs(je.sub(k,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};F.canChangeAspectRatio||(F.aspectRatio?(this.aspectRatio=F.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);
this.creatingShape=F;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(F);this.app.setSelectedShapes([F])});gb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:d}=this,{currentPoint:k,originPoint:F,shiftKey:Y}=this.app.inputs;a=Y||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio;d=xf.getTransformedBoundingBox(d,"bottom_right_corner",je.sub(k,F),
0,a);this.app.settings.snapToGrid&&!a&&(d=xf.snapBoundsToGrid(d,8));this.creatingShape.update({point:[d.minX,d.minY],size:[d.width,d.height]})}});gb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);
this.tool.transition("idle")}})}};gb(Oz,"id","creating");var Pz=class extends fj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(Pz,"id","idle");var Qz=class extends fj{constructor(){super(...arguments);
gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});gb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};gb(Qz,"id","pointing");var $q=class extends Kr{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb($q,"id","box");gb($q,"states",[Pz,Qz,Oz]);gb($q,"initial","idle");var Rz=class extends fj{constructor(){super(...arguments);
gb(this,"shape",{});gb(this,"points",[[0,0,.5]]);gb(this,"persistDebounced",bl(this.app.persist,200));gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:k}=this.tool;var {originPoint:F}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&k){this.shape=k;var {shape:Y}=this;var ka=Y.props.points[Y.props.points.length-1];const Fa=Dd.sub(F,Y.props.point).concat(null!=(a=F[2])?a:.5);this.points=
[...Y.props.points,ka,ka];const Qa=Math.ceil(Dd.dist(ka,F)/16);for(let Wa=0,eb=Wa/(Qa-1);Wa<Qa;Wa++){a=this.points;F=a.push;Y=Dd.lrp(ka,Fa,eb);var oa=ka[2];F.call(a,Y.concat.call(Y,oa+(Fa[2]-oa)*eb))}this.addNextPoint(Fa)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ka=F[2])?ka:.5]],this.shape=new d({id:Uk(),type:d.id,parentId:this.app.currentPage.id,point:F.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),
this.app.currentPage.addShapes(this.shape)});gb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:k}=this.app.inputs;Dd.isEqual(k,d)||this.addNextPoint(Dd.sub(d,a.props.point).concat(d[2]))});gb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?il.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;
this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,k=Dd.min(a,[0,0]);this.points.push(a);0>k[0]||0>k[1]?(this.points=this.points.map(F=>Dd.sub(F,k).concat(F[2])),d.update({point:Dd.add(d.props.point,
k),points:this.points})):d.update({points:this.points})}};gb(Rz,"id","creating");var Sz=class extends fj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(Sz,"id","idle");var Tz=class extends fj{constructor(){super(...arguments);gb(this,"origin",
[0,0]);gb(this,"prevDelta",[0,0]);gb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};gb(Tz,"id","pinching");var Ju=class extends Kr{constructor(){super(...arguments);gb(this,"cursor","crosshair");gb(this,"simplify",!0);gb(this,"simplifyTolerance",1);gb(this,"previousShape");gb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,
event:d})})}};gb(Ju,"id","draw");gb(Ju,"states",[Sz,Rz,Tz]);gb(Ju,"initial","idle");var Uz=class extends fj{constructor(){super(...arguments);gb(this,"points",[[0,0,.5]]);gb(this,"hitShapes",new Set);gb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});gb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;Dd.isEqual(d,a)||(this.points.push(a),this.app.shapesInViewport.filter(k=>k.hitTestLineSegment(d,a)).forEach(k=>this.hitShapes.add(k)),
this.app.setErasingShapes(Array.from(this.hitShapes.values())))});gb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};gb(Uz,"id","erasing");var Vz=class extends fj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",
{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(Vz,"id","idle");var Wz=class extends fj{constructor(){super(...arguments);gb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>d.hitTestPoint(a)))});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;
5<Dd.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});gb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};gb(Wz,"id","pointing");var Xv=class extends Kr{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(Xv,"id","erase");gb(Xv,"states",[Vz,Wz,Uz]);gb(Xv,"initial","idle");var Ax=class extends fj{constructor(){super(...arguments);gb(this,"handle",{});gb(this,
"handleId","end");gb(this,"currentShape",{});gb(this,"initialShape",{});gb(this,"bindableShapeIds",[]);gb(this,"startBindingShapeId");gb(this,"newStartBindingId","");gb(this,"draggedBindingId","");gb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:k,currentPoint:F,modKey:Y,altKey:ka},settings:{snapToGrid:oa}}=this.app;var Fa=this.app.getShapeById(this.initialShape.id),{handles:Qa}=this.initialShape,Wa=this.handleId,eb="start"===this.handleId?"end":"start";if(!je.isEqual(d,
F)){var jb=je.sub(F,k);if(a){var Mb=Qa[eb].point,Ub=je.add(Qa[Wa].point,jb),Ob=je.angle(Mb,Ub);Mb=je.rotWith(Ub,Mb,an.snapAngleToSegments(Ob,24)-Ob);jb=je.add(jb,je.sub(Mb,Ub))}jb=je.add(Qa[Wa].point,jb);Qa={[Wa]:kf(me({},Qa[Wa]),{point:oa?je.snap(jb,8):je.toFixed(jb),bindingId:void 0})};var jc=this.currentShape.getHandlesChange(this.initialShape,Qa);if(jc){Qa=$k(Fa.props,jc);var vc={},Zb;Wa=Qa.handles[Wa];eb=Qa.handles[eb];if(this.startBindingShapeId){var oc;if(jb=this.app.getShapeById(this.startBindingShapeId)){Ub=
jb.getCenter();Mb=Qa.handles.end;var lc=je.add(Qa.handles.start.point,Qa.point);je.isEqual(lc,Ub)&&lc[1]++;Ob=jb.hitTestPoint(F);lc=je.uni(je.sub(lc,Ub));const Ic=void 0!==this.app.currentPage.bindings[this.newStartBindingId];Y||jb.hitTestPoint(je.add(Qa.point,Mb.point))||(oc=Oc(Fa.props,jb,"start",this.newStartBindingId,Ub,Ub,lc,Ob));oc&&!Ic?(vc[this.newStartBindingId]=oc,Qa.handles.start.bindingId=oc.id):!oc&&Ic&&(console.log("removing start binding"),delete vc[this.newStartBindingId],Qa.handles.start.bindingId=
void 0)}}if(!Y){oc=je.add(eb.point,Qa.point);eb=je.add(Wa.point,Qa.point);Wa=je.uni(je.sub(eb,oc));const Ic=je.add(Qa.point,Qa.handles.start.point),Lc=je.add(Qa.point,Qa.handles.end.point);jb=this.bindableShapeIds.map(wd=>this.app.getShapeById(wd)).sort((wd,Td)=>Td.nonce-wd.nonce).filter(wd=>![Ic,Lc].every(Td=>wd.hitTestPoint(Td)));for(const wd of jb)if(Zb=Oc(Fa.props,wd,this.handleId,this.draggedBindingId,eb,oc,Wa,ka))break}Zb?(vc[this.draggedBindingId]=Zb,Qa=$k(Qa,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):
(Fa=Fa.props.handles[this.handleId].bindingId,void 0!==Fa&&(delete vc[Fa],Qa=$k(Qa,{handles:{[this.handleId]:{bindingId:void 0}}})));jc=this.currentShape.getHandlesChange(Qa,Qa.handles);xd(()=>{var Ic;if(jc){this.currentShape.update(jc);this.app.currentPage.updateBindings(vc);const Lc=Object.values(null!=(Ic=jc.handles)?Ic:{}).map(wd=>wd.bindingId).map(wd=>this.app.currentPage.bindings[wd]).filter(Boolean).flatMap(wd=>[wd.toId,wd.fromId].filter(Boolean));this.app.setBindingShapes(Lc)}})}}});gb(this,
"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});gb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};gb(Ax,"id","creating");var Xz=class extends Ax{constructor(){super(...arguments);gb(this,"onEnter",()=>{var a;
this.app.history.pause();this.newStartBindingId=Uk();this.draggedBindingId=Uk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:k}=this.app.inputs;d=new d(kf(me({},d.defaultProps),{id:Uk(),type:d.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?je.snap(k,8):k,fill:this.app.settings.color,stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=Ab(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);
this.app.setSelectedShapes([d]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(F=>this.app.getShapeById(F)).filter(F=>il.pointInBounds(k,F.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};gb(Xz,"id","creating");var Yz=class extends fj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",
(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});gb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});gb(this,"onPointerLeave",a=>{a.order||
"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};gb(Yz,"id","idle");var Zz=class extends fj{constructor(){super(...arguments);gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};gb(Zz,"id","pointing");var Yv=class extends Kr{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(Yv,"id","line");gb(Yv,
"states",[Yz,Zz,Xz]);gb(Yv,"initial","idle");var $z=class extends fj{constructor(){super(...arguments);gb(this,"cursor","crosshair");gb(this,"creatingShape");gb(this,"aspectRatio");gb(this,"initialBounds",{});gb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:k}=this.tool,F=new k({id:Uk(),type:k.id,parentId:a.id,point:[...d],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=F;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);
xd(()=>{this.app.currentPage.addShapes(F);const Y=this.app.settings.snapToGrid?je.snap([...d],8):d,{bounds:ka}=F;F.update({point:je.sub(Y,[ka.width/2,ka.height/2])});this.app.transition("select");this.app.setSelectedShapes([F]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};gb($z,"id","creating");var aA=class extends fj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});
gb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(aA,"id","idle");var Zv=class extends Kr{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(Zv,"id","box");gb(Zv,"states",[aA,$z]);gb(Zv,"initial","idle");var vE=uf(gn()),wE=class extends vE.default{constructor(){super(...arguments);
gb(this,"toBBox",a=>a.rotatedBounds)}},bA=class extends fj{constructor(){super(...arguments);gb(this,"initialSelectedIds",[]);gb(this,"initialSelectedShapes",[]);gb(this,"tree",new wE);gb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:k}=this.app;this.initialSelectedIds=Array.from(k.values());this.initialSelectedShapes=Array.from(a.values());this.tree.load(d.shapes)});gb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});gb(this,"onPointerMove",
()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:k,currentPoint:F}}=this.app,Y=xf.getBoundsFromPoints([F,k],0);this.app.setBrush(Y);const ka=[...(new Set(this.tree.search(Y).filter(oa=>d?xf.boundsContain(Y,oa.rotatedBounds):oa.hitTestBounds(Y)).filter(oa=>"group"!==oa.type).map(oa=>{var Fa;return null!=(Fa=this.app.getParentGroup(oa))?Fa:oa})))];a?ka.every(oa=>this.initialSelectedShapes.includes(oa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(oa=>!ka.includes(oa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,
...ka]))]):this.app.setSelectedShapes(ka);this.app.viewport.panToPointWhenNearBounds(F)});gb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});gb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};gb(bA,"id","brushing");var cA=class extends fj{constructor(){super(...arguments);gb(this,"onEnter",a=>{var d;const {selectedIds:k,inputs:{shiftKey:F}}=
this.app;if("shape"===a.type&&!k.has(a.shape.id)){const Y=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;F?this.app.setSelectedShapes([...Array.from(k.values()),Y.id]):this.app.setSelectedShapes([Y])}});gb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};gb(cA,"id","contextMenu");var dA=class extends fj{constructor(){super(...arguments);gb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});gb(this,"onExit",()=>{});gb(this,"onPointerEnter",
a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});gb(this,"onPointerDown",(a,d)=>{const {selectedShapes:k,inputs:{ctrlKey:F}}=this.app;if(2===d.button)this.tool.transition("contextMenu",a);else if(F)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;
case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(k.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:Y,inputs:ka}=this.app;Y&&il.pointInBounds(ka.currentPoint,Y)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",
a);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",me(me({},d),a))}});gb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});gb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};gb(dA,"id","idle");var eA=class extends fj{constructor(){super(...arguments);gb(this,"onEnter",
a=>{var d;const {selectedIds:k,inputs:{shiftKey:F}}=this.app,Y=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;F?this.app.setSelectedShapes([...Array.from(k.values()),Y.id]):this.app.setSelectedShapes([Y])});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};
gb(eA,"id","pointingShape");var fA=class extends fj{constructor(){super(...arguments);gb(this,"cursor","move");gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(fA,"id","pointingBoundsBackground");var gA=class extends fj{constructor(){super(...arguments);
gb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&this.tool.transition("brushing")});gb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,
event:d})});gb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};gb(gA,"id","pointingCanvas");var hA=class extends fj{constructor(){super(...arguments);gb(this,"cursor","move");gb(this,"isCloning",!1);gb(this,"didClone",!1);gb(this,"initialPoints",{});gb(this,"initialShapePoints",{});gb(this,"initialClonePoints",{});gb(this,"clones",[]);gb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,inputs:k}=this.app;this.initialPoints=
this.initialShapePoints=Object.fromEntries(d.map(({id:F,props:{point:Y}})=>[F,Y.slice()]));document.querySelectorAll("input,textarea").forEach(F=>F.blur());null==(a=document.getSelection())?void 0:a.empty();k.altKey?this.startCloning():this.moveSelectedShapesToPointer()});gb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});gb(this,"onPointerMove",()=>{const {inputs:{currentPoint:a}}=
this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});gb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(k=>{k.update({point:this.initialPoints[k.id]})}),this.tool.transition("idle")}});
gb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:k,allSelectedShapes:F}=this.app;k.removeShapes(...F);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:k}}=this.app,{initialPoints:F}=this,Y=Dd.sub(k,d);a&&(Math.abs(Y[0])<Math.abs(Y[1])?
Y[0]=0:Y[1]=0);xd(()=>{this.app.allSelectedShapesArray.filter(ka=>!ka.props.isLocked).forEach(ka=>{let oa=Dd.add(F[ka.id],Y);this.app.settings.snapToGrid&&(oa=Dd.snap(oa,8));ka.update({point:oa})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d(kf(me({},a.serialized),{id:Uk(),type:a.type,point:this.initialPoints[a.id],rotation:a.props.rotation,isLocked:!1}))}),
this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};gb(hA,"id","translating");var iA=class extends fj{constructor(){super(...arguments);gb(this,
"pointedSelectedShape");gb(this,"onEnter",a=>{this.pointedSelectedShape=a.shape});gb(this,"onExit",()=>{this.pointedSelectedShape=void 0});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:k}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:k}=
this.app),k=Array.from(k.values()),k.splice(k.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(k);else{if(1===k.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof fo&&il.pointInBounds(d,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});
gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(iA,"id","pointingSelectedShape");var jA=class extends fj{constructor(){super(...arguments);gb(this,"info",{});gb(this,"onEnter",a=>{this.info=a;this.updateCursor()});gb(this,"onExit",()=>{this.app.cursors.reset()});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&this.tool.transition("resizing",this.info)});gb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",
this.info)});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(nt[this.info.handle],this.app.selectionBounds.rotation)}};gb(jA,"id","pointingResizeHandle");var kA=class extends fj{constructor(){super(...arguments);gb(this,"isSingle",!1);gb(this,"handle","bottom_right_corner");gb(this,"snapshots",{});gb(this,"initialCommonBounds",{});gb(this,"selectionRotation",0);gb(this,"resizeType","corner");gb(this,"onEnter",a=>{var d,k;
const {history:F,selectedShapesArray:Y,selectionBounds:ka}=this.app;if(!ka)throw Error("Expected a selected bounds.");this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";this.app.cursors.setCursor(kA.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);F.pause();const oa=xf.getBoundsFromPoints(Y.map(Fa=>xf.getBoundsCenter(Fa.bounds)));this.selectionRotation=
(this.isSingle=1===Y.length)?null!=(k=Y[0].props.rotation)?k:0:0;this.initialCommonBounds=me({},ka);this.snapshots=Object.fromEntries(Y.map(Fa=>{const Qa=me({},Fa.bounds),[Wa,eb]=xf.getBoundsCenter(Qa);return[Fa.id,{props:Fa.serialized,bounds:Qa,transformOrigin:[(Wa-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(eb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(Wa-oa.minX)/oa.width,(eb-oa.minY)/oa.height],isAspectRatioLocked:Fa.props.isAspectRatioLocked||
!(Fa.canChangeAspectRatio&&!Fa.props.rotation)}]}));Y.forEach(Fa=>{var Qa;null==(Qa=Fa.onResizeStart)?void 0:Qa.call(Fa,{isSingle:this.isSingle})})});gb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});gb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:k,originPoint:F,currentPoint:Y}}=this.app,{handle:ka,snapshots:oa,initialCommonBounds:Fa}=this;let Qa=Dd.sub(Y,F);a&&(Qa=Dd.mul(Qa,2));
const Wa=this.app.selectedShapes.values().next().value;let eb=xf.getTransformedBoundingBox(Fa,ka,Qa,this.selectionRotation,d||this.isSingle&&(k?!("clipping"in Wa.props):!Wa.canChangeAspectRatio||Wa.props.isAspectRatioLocked));a&&(eb=me(me({},eb),xf.centerBounds(eb,xf.getBoundsCenter(Fa))));const {scaleX:jb,scaleY:Mb}=eb;this.app.selectedShapes.forEach(Ub=>{var Ob,jc;const {isAspectRatioLocked:vc,props:Zb,bounds:oc,transformOrigin:lc}=oa[Ub.id];let Ic=xf.getRelativeTransformedBoundingBox(eb,Fa,oc,
0>jb,0>Mb);if(Ub.canResize.some(Td=>Td)||Ub.props.isSizeLocked||!this.isSingle){var Lc=[jb,Mb],wd=null!=(Ob=Zb.rotation)?Ob:0;Ob=xf.getBoundsCenter(Ic);Ub.canFlip||(Lc=Dd.abs(Lc));Ub.canScale||(Lc=null!=(jc=Zb.scale)?jc:[1,1]);if(wd&&0>jb&&0<=Mb||0>Mb&&0<=jb)wd*=-1;this.app.settings.snapToGrid&&!vc&&(Ic=xf.snapBoundsToGrid(Ic,8));Ub.onResize(Zb,{center:Ob,rotation:wd,scale:Lc,bounds:Ic,type:ka,clip:k,transformOrigin:lc})}});this.updateCursor(jb,Mb);this.app.viewport.panToPointWhenNearBounds(Y)});
gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(k=>{k.update(me({},this.snapshots[k.id].props))}),this.tool.transition("idle")}})}updateCursor(a,d){var k,F,Y,ka;const oa=0>a&&0<=d;a=0>d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":oa||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(k=
this.app.selectionBounds)?void 0:k.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(F=this.app.selectionBounds)?void 0:F.rotation);break;case "top_right_corner":case "bottom_left_corner":oa||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(Y=this.app.selectionBounds)?void 0:Y.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ka=this.app.selectionBounds)?void 0:
ka.rotation)}}},Bx=kA;gb(Bx,"id","resizing");gb(Bx,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var lA=class extends fj{constructor(){super(...arguments);gb(this,"cursor","rotate");gb(this,"handle","");gb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});gb(this,"onPointerMove",
()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(nt[this.handle],this.app.selectionRotation)}};gb(lA,"id","pointingRotateHandle");var mA=class extends fj{constructor(){super(...arguments);gb(this,
"info",{});gb(this,"onEnter",a=>{this.info=a});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})})}};gb(mA,"id","pointingShapeBehindBounds");var Cx=class extends fj{constructor(){super(...arguments);gb(this,"cursor","rotate");gb(this,"snapshot",{});gb(this,"initialCommonCenter",[0,0]);gb(this,"initialCommonBounds",{});gb(this,"initialAngle",0);gb(this,"initialSelectionRotation",0);gb(this,"handle","");gb(this,"onEnter",a=>{const {history:d,selectedShapesArray:k,selectionBounds:F}=this.app;if(!F)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=
this.app.selectionRotation;this.initialCommonBounds=me({},F);this.initialCommonCenter=xf.getBoundsCenter(F);this.initialAngle=Dd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(k.map(Y=>[Y.id,{point:[...Y.props.point],center:[...Y.center],rotation:Y.props.rotation,handles:"handles"in Y?Ms(Y.handles):void 0}]));this.updateCursor()});gb(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});gb(this,"onPointerMove",()=>{const {selectedShapes:a,inputs:{shiftKey:d,
currentPoint:k}}=this.app,{snapshot:F,initialCommonCenter:Y,initialAngle:ka,initialSelectionRotation:oa}=this;let Fa=Dd.angle(Y,k)-ka;d&&(Fa=an.snapAngleToSegments(Fa,24));a.forEach(Wa=>{var eb=F[Wa.id];let jb=0;if(d){var {rotation:Mb=0}=eb;jb=an.snapAngleToSegments(Mb,24)-Mb}const Ub=Dd.sub(eb.center,eb.point);Mb=Dd.rotWith(eb.center,Y,Fa);if("handles"in Wa){eb=eb.handles;const Ob=eb.map(vc=>Dd.rotWith(vc.point,Ub,Fa)),jc=xf.getCommonTopLeft(Ob);Wa.update({point:Dd.add(jc,Dd.sub(Mb,Ub)),handles:eb.map((vc,
Zb)=>kf(me({},vc),{point:Dd.sub(Ob[Zb],jc)}))})}else Wa.update({point:Dd.sub(Mb,Ub),rotation:an.clampRadians((eb.rotation||0)+Fa+jb)})});const Qa=an.clampRadians(oa+Fa);this.app.setSelectionRotation(d?an.snapAngleToSegments(Qa,24):Qa);this.updateCursor()});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(k=>{k.update(this.snapshot[k.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(nt[this.handle],
this.app.selectionRotation)}};gb(Cx,"id","rotating");var nA=class extends fj{constructor(){super(...arguments);gb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")});gb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};gb(nA,"id","pinching");var oA=class extends Ax{constructor(){super(...arguments);gb(this,"cursor","grabbing");gb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=Uk();this.draggedBindingId=
Uk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=Ab(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};gb(oA,"id","translatingHandle");var pA=class extends fj{constructor(){super(...arguments);gb(this,"cursor","grabbing");gb(this,"info",{});gb(this,"onEnter",a=>{this.info=a});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&this.tool.transition("translatingHandle",
this.info)});gb(this,"onPointerUp",()=>{this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(pA,"id","pointingHandle");var qA=class extends fj{constructor(){super(...arguments);gb(this,"handle");gb(this,"onEnter",a=>{var d;this.app.cursors.setCursor(nt[a.handle],null!=(d=this.app.selectionBounds.rotation)?d:0);this.handle=a.handle});gb(this,"onExit",()=>{this.app.cursors.reset()});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})});gb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",a);break;default:this.tool.transition("pointingResizeHandle",a)}}});gb(this,"onPointerLeave",()=>{this.tool.transition("idle")});gb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var k=
this.app.selectedShapes.values().next().value;if(!k.canEdit||this.app.readOnly||k.props.isLocked)k.onResetBounds({asset:k.props.assetId?this.app.assets[k.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":null==(d=k.onResetBounds)?void 0:d.call(k,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",
target:k})}}})}};gb(qA,"id","hoveringSelectionHandle");var rA=class extends fj{constructor(){super(...arguments);gb(this,"editingShape",{});gb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});gb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=this.editingShape.props.text.trim();""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();
this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",a);break;case "canvas":a.order||this.tool.transition("idle",a)}});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":xd(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};
gb(rA,"id","editingShape");var sA=class extends fj{constructor(){super(...arguments);gb(this,"minimapZoom",1);gb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});gb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");var k=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(d&&k){const F=d.getBoundingClientRect();this.minimapRect.height=F.height;this.minimapRect.width=F.width;this.minimapRect.minX=F.left;this.minimapRect.minY=F.top;
this.minimapRect.maxX=F.right;this.minimapRect.maxY=F.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=Dd.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);k=k.getBoundingClientRect();k=Dd.mul(Dd.sub(a,[k.left+k.width/2,k.top+k.height/2]),this.minimapZoom);return Dd.sub(this.app.viewport.camera.point,k)}});gb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});gb(this,"onPointerMove",(a,
d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});gb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};gb(sA,"id","pointingMinimap");var Gt=class extends Kr{constructor(){super(...arguments);gb(this,"returnTo","");gb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};gb(Gt,"id","select");gb(Gt,"initial","idle");gb(Gt,"shortcut","whiteboard/select");gb(Gt,"states",[dA,bA,cA,gA,eA,mA,iA,fA,qA,jA,lA,sA,pA,oA,hA,Bx,Cx,Cx,nA,rA]);
var tA=class extends fj{constructor(){super(...arguments);gb(this,"cursor","grabbing");gb(this,"originalScreenPoint",[]);gb(this,"originalCameraPoint",[]);gb(this,"prevState","idle");gb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});gb(this,"onPointerMove",(a,d)=>{a=je.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:je.sub(this.originalCameraPoint,
je.div(a,this.app.viewport.camera.zoom))})});gb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};gb(tA,"id","panning");var uA=class extends fj{constructor(){super(...arguments);gb(this,"onEnter",a=>{this.parent.prevTool&&a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};gb(uA,
"id","idle");var vA=class extends fj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(vA,"id","idleHold");var wA=class extends fj{constructor(){super(...arguments);gb(this,"origin",[0,0]);gb(this,"prevDelta",[0,0]);gb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,
a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};gb(wA,"id","pinching");var Ht=class extends Kr{constructor(){super(...arguments);gb(this,"cursor","grab");gb(this,"prevTool",null);gb(this,"onEnter",a=>{this.prevTool=null==a?void 0:a.prevTool});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});gb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};gb(Ht,"id","move");gb(Ht,"shortcut","whiteboard/pan");gb(Ht,
"states",[uA,vA,tA,wA]);gb(Ht,"initial","idle");var mn=class{constructor(a,d={}){gb(this,"lastShapesNounces",null);gb(this,"app");gb(this,"id");gb(this,"name");gb(this,"shapes",[]);gb(this,"bindings",{});gb(this,"nonce",0);gb(this,"bringForward",Fa=>{const Qa=this.parseShapesArg(Fa);Qa.sort((Wa,eb)=>this.shapes.indexOf(eb)-this.shapes.indexOf(Wa)).map(Wa=>this.shapes.indexOf(Wa)).forEach(Wa=>{if(Wa!==this.shapes.length-1&&!Qa.includes(this.shapes[Wa+1])){var eb=this.shapes[Wa];this.shapes[Wa]=this.shapes[Wa+
1];this.shapes[Wa+1]=eb}});this.app.persist();return this});gb(this,"sendBackward",Fa=>{const Qa=this.parseShapesArg(Fa);Qa.sort((Wa,eb)=>this.shapes.indexOf(Wa)-this.shapes.indexOf(eb)).map(Wa=>this.shapes.indexOf(Wa)).forEach(Wa=>{if(0!==Wa&&!Qa.includes(this.shapes[Wa-1])){var eb=this.shapes[Wa];this.shapes[Wa]=this.shapes[Wa-1];this.shapes[Wa-1]=eb}});this.app.persist();return this});gb(this,"bringToFront",Fa=>{const Qa=this.parseShapesArg(Fa);this.shapes=this.shapes.filter(Wa=>!Qa.includes(Wa)).concat(Qa);
this.app.persist();return this});gb(this,"sendToBack",Fa=>{const Qa=this.parseShapesArg(Fa);this.shapes=Qa.concat(this.shapes.filter(Wa=>!Qa.includes(Wa)));this.app.persist();return this});gb(this,"flip",(Fa,Qa)=>{Fa=this.parseShapesArg(Fa);const Wa=xf.getCommonBounds(Fa.map(eb=>eb.bounds));Fa.forEach(eb=>{var jb;const Mb=xf.getRelativeTransformedBoundingBox(Wa,Wa,eb.bounds,"horizontal"===Qa,"vertical"===Qa);if(eb.serialized)eb.onResize(eb.serialized,{bounds:Mb,center:xf.getBoundsCenter(Mb),rotation:null!=
(jb=eb.props.rotation)?jb:-0,type:"top_left_corner",scale:eb.canFlip&&eb.props.scale?"horizontal"===Qa?[-eb.props.scale[0],1]:[1,-eb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});gb(this,"getShapeById",Fa=>this.shapes.find(Qa=>Qa.id===Fa));gb(this,"cleanup",Fa=>{Fa=sc(this.bindings,Fa);const Qa=new Set;let Wa=!1,eb=!1;const jb=Ms(this.bindings);Fa.forEach(Mb=>{var Ub;if(this.bindings[Mb.id]){var Ob=this.getShapeById(Mb.toId),jc=this.getShapeById(Mb.fromId);
Ob&&jc?Qa.has(jc.id)||(Mb=this.updateArrowBindings(jc),Qa.add(jc.id),Mb&&(Ob=me(me({},jc.props),Mb),Wa=!0,null==(Ub=this.getShapeById(Ob.id))?void 0:Ub.update(Ob,!1,(0,NE.default)(null==Mb?void 0:Mb.handles,null==jc?void 0:jc.props.handles)))):(delete jb[Mb.id],eb=!0)}});Object.keys(jb).forEach(Mb=>{const Ub=this.bindings[Mb];0===this.shapes.filter(Ob=>Ob.id===Ub.fromId||Ob.id===Ub.toId).length&&(delete jb[Mb],eb=!0)});eb&&this.update({bindings:jb});(Wa||eb)&&this.app.persist(!0)});gb(this,"updateArrowBindings",
Fa=>{var Qa,Wa,eb,jb={start:Ms(Fa.props.handles.start),end:Ms(Fa.props.handles.end)},Mb={isBound:!1,handle:Fa.props.handles.start,point:je.add(Fa.props.handles.start.point,Fa.props.point)},Ub={isBound:!1,handle:Fa.props.handles.end,point:je.add(Fa.props.handles.end.point,Fa.props.point)};if(Fa.props.handles.start.bindingId){var Ob=void 0!==(null==(Qa=Fa.props.decorations)?void 0:Qa.start);Qa=Fa.props.handles.start;var jc=this.bindings[Fa.props.handles.start.bindingId],vc=this.getShapeById(null==jc?
void 0:jc.toId);if(vc){Mb=vc.getBounds();var Zb=vc.getExpandedBounds(),oc=xf.expandBounds(Mb,Ob?jc.distance:1);const {minX:lc,minY:Ic,width:Lc,height:wd}=Zb,Td=je.add([lc,Ic],je.mulV([Lc,wd],je.rotWith(jc.point,[.5,.5],vc.props.rotation||0)));Mb={isBound:!0,hasDecoration:Ob,binding:jc,handle:Qa,point:Td,target:vc,bounds:Mb,expandedBounds:Zb,intersectBounds:oc,center:vc.getCenter()}}}if(Fa.props.handles.end.bindingId&&(Ob=void 0!==(null==(Wa=Fa.props.decorations)?void 0:Wa.end),Wa=Fa.props.handles.end,
Qa=this.bindings[Fa.props.handles.end.bindingId],jc=this.getShapeById(null==Qa?void 0:Qa.toId))){Ub=jc.getBounds();vc=jc.getExpandedBounds();Zb=Ob?xf.expandBounds(Ub,Qa.distance):Ub;const {minX:lc,minY:Ic,width:Lc,height:wd}=vc;oc=je.add([lc,Ic],je.mulV([Lc,wd],je.rotWith(Qa.point,[.5,.5],jc.props.rotation||0)));Ub={isBound:!0,hasDecoration:Ob,binding:Qa,handle:Wa,point:oc,target:jc,bounds:Ub,expandedBounds:vc,intersectBounds:Zb,center:jc.getCenter()}}for(const lc of["end","start"]){Wa="start"===
lc?Mb:Ub;const Ic="start"===lc?Ub:Mb;if(Wa.isBound)if(Wa.binding.distance){if(Ob=je.uni(je.sub(Wa.point,Ic.point)),Qa=B(Ic.point,Ob,Wa.intersectBounds,Wa.target.props.rotation).filter(Lc=>Lc.didIntersect).map(Lc=>Lc.points[0]).sort((Lc,wd)=>je.dist(Lc,Ic.point)-je.dist(wd,Ic.point)),Qa[0])if(jc=void 0,Ic.isBound&&(jc=B(Ic.point,Ob,Ic.intersectBounds,Ic.target.props.rotation).filter(Lc=>Lc.didIntersect).map(Lc=>Lc.points[0]).sort((Lc,wd)=>je.dist(Lc,Ic.point)-je.dist(wd,Ic.point))[0]),Ic.isBound&&
(2>Qa.length||jc&&Qa[0]&&10>Math.ceil(je.dist(Qa[0],jc))||xf.boundsContain(Wa.expandedBounds,Ic.expandedBounds)||xf.boundsCollide(Wa.expandedBounds,Ic.expandedBounds)))Ob=je.uni(je.sub(Ic.point,Wa.point)),Qa=B(Wa.point,Ob,Wa.bounds,Wa.target.props.rotation).filter(Lc=>Lc.didIntersect).map(Lc=>Lc.points[0]),Qa[0]&&(jb[lc].point=je.toFixed(je.sub(Qa[0],Fa.props.point)),jb["start"===lc?"end":"start"].point=je.toFixed(je.add(je.sub(Qa[0],Fa.props.point),je.mul(Ob,Math.min(je.dist(Qa[0],Ic.point),10*(xf.boundsContain(Ic.bounds,
Wa.intersectBounds)?-1:1))))));else{if(!Ic.isBound&&(Qa[0]&&10>je.dist(Qa[0],Ic.point)||il.pointInBounds(Ic.point,Wa.intersectBounds)))return jb=je.uni(je.sub(Wa.center,Ic.point)),null==(eb=Fa.getHandlesChange)?void 0:eb.call(Fa,Fa.props,{[lc]:kf(me({},Fa.props.handles[lc]),{point:je.toFixed(je.add(je.sub(Ic.point,Fa.props.point),je.mul(jb,10)))})});Qa[0]&&(jb[lc].point=je.toFixed(je.sub(Qa[0],Fa.props.point)))}}else jb[lc].point=je.sub(Wa.point,Fa.props.point)}return Fa.getHandlesChange(Fa.props,
jb)});const {id:k,name:F,shapes:Y=[],bindings:ka={},nonce:oa}=d;this.id=k;this.name=F;this.bindings=Object.assign({},ka);this.app=a;this.nonce=oa||0;this.addShapes(...Y);Qg(this);Kd(()=>{const Fa=0<this.shapes.length?Object.fromEntries(this.shapes.map(Qa=>[Qa.id,Qa.nonce])):null;if(this.lastShapesNounces&&Fa){const Qa=this.lastShapesNounces,Wa=[...(new Set([...Object.keys(Fa),...Object.keys(Qa)]))].filter(eb=>Qa[eb]!==Fa[eb]);requestAnimationFrame(()=>{this.cleanup(Wa)})}Fa&&(this.lastShapesNounces=
Fa)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>Ab(a)),bindings:Ms(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,k)=>a.indexOf(d.id)-a.indexOf(k.id));return this}addShapes(...a){if(0!==a.length)return a="getBounds"in a[0]?a:a.map(d=>
new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(k=>!d.includes(k));return d}getBindableShapes(){return this.shapes.filter(a=>a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};ie([Te],mn.prototype,"id",2);ie([Te],mn.prototype,"name",2);ie([Te],mn.prototype,"shapes",2);ie([Te],mn.prototype,"bindings",2);ie([Ef],
mn.prototype,"serialized",1);ie([Ef],mn.prototype,"shapesById",1);ie([Te],mn.prototype,"nonce",2);ie([yg],mn.prototype,"update",1);ie([yg],mn.prototype,"updateBindings",1);ie([yg],mn.prototype,"updateShapesIndex",1);ie([yg],mn.prototype,"addShapes",1);ie([yg],mn.prototype,"removeShapes",1);ie([yg],mn.prototype,"bringForward",2);ie([yg],mn.prototype,"sendBackward",2);ie([yg],mn.prototype,"bringToFront",2);ie([yg],mn.prototype,"sendToBack",2);ie([yg],mn.prototype,"cleanup",2);var Dl=class{constructor(){gb(this,
"shiftKey",!1);gb(this,"ctrlKey",!1);gb(this,"modKey",!1);gb(this,"altKey",!1);gb(this,"spaceKey",!1);gb(this,"isPinching",!1);gb(this,"currentScreenPoint",[0,0]);gb(this,"currentPoint",[0,0]);gb(this,"previousScreenPoint",[0,0]);gb(this,"previousPoint",[0,0]);gb(this,"originScreenPoint",[0,0]);gb(this,"originPoint",[0,0]);gb(this,"pointerIds",new Set);gb(this,"state","idle");gb(this,"containerOffset",[0,0]);gb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);this.updateModifiers(d);
this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});gb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});gb(this,"onPointerUp",(a,d)=>{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});gb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});gb(this,"onKeyUp",a=>{this.updateModifiers(a);
switch(a.key){case " ":this.spaceKey=!1}});gb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});gb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});gb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});Qg(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=je.sub([a.clientX,
a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=Kh()?a.metaKey:a.ctrlKey))}};ie([Te],Dl.prototype,"shiftKey",2);ie([Te],Dl.prototype,"ctrlKey",2);ie([Te],Dl.prototype,"modKey",2);ie([Te],Dl.prototype,"altKey",2);ie([Te],Dl.prototype,"spaceKey",2);ie([Te],Dl.prototype,"isPinching",2);ie([Te],Dl.prototype,"currentScreenPoint",2);ie([Te],Dl.prototype,"currentPoint",2);ie([Te],Dl.prototype,"previousScreenPoint",2);ie([Te],
Dl.prototype,"previousPoint",2);ie([Te],Dl.prototype,"originScreenPoint",2);ie([Te],Dl.prototype,"originPoint",2);ie([Te],Dl.prototype,"state",2);ie([Te],Dl.prototype,"containerOffset",2);ie([yg],Dl.prototype,"updateContainerOffset",1);ie([yg],Dl.prototype,"updateModifiers",1);ie([yg],Dl.prototype,"onPointerDown",2);ie([yg],Dl.prototype,"onPointerMove",2);ie([yg],Dl.prototype,"onPointerUp",2);ie([yg],Dl.prototype,"onKeyDown",2);ie([yg],Dl.prototype,"onKeyUp",2);ie([yg],Dl.prototype,"onPinchStart",
2);ie([yg],Dl.prototype,"onPinch",2);ie([yg],Dl.prototype,"onPinchEnd",2);var xE=(a,d=100)=>-(Math.cos(Math.PI*Dd.clamp(a/d,0,1))-1)/2,Ks=class{constructor(){gb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});gb(this,"camera",{point:[0,0],zoom:1});gb(this,"updateBounds",a=>{this.bounds=a;return this});gb(this,"panCamera",a=>this.update({point:Dd.sub(this.camera.point,Dd.div(a,this.camera.zoom))}));gb(this,"panToPointWhenNearBounds",a=>{const d=Dd.div([Ks.panThreshold,Ks.panThreshold],
this.camera.zoom),k=Dd.sub([this.currentView.maxX,this.currentView.maxY],Dd.add(a,d));a=Dd.sub([this.currentView.minX,this.currentView.minY],Dd.sub(a,d));this.panCamera(Dd.mul([0>k[0]?k[0]:0<a[0]?a[0]:0,0>k[1]?k[1]:0<a[1]?a[1]:0],-Ks.panMultiplier*this.camera.zoom))});gb(this,"update",({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});gb(this,"getPagePoint",a=>{const {camera:d,bounds:k}=
this;return Dd.sub(Dd.div(Dd.sub(a,[k.minX,k.minY]),d.zoom),d.point)});gb(this,"getScreenPoint",a=>{const {camera:d}=this;return Dd.mul(Dd.add(a,d.point),d.zoom)});gb(this,"onZoom",(a,d,k=!1)=>this.pinchZoom(a,[0,0],d,k));gb(this,"pinchZoom",(a,d,k,F=!1)=>{var {camera:Y}=this;d=Dd.sub(Y.point,Dd.div(d,Y.zoom));k=Dd.clamp(k,Ks.minZoom,Ks.maxZoom);Y=Dd.div(a,Y.zoom);a=Dd.div(a,k);a=Dd.toFixed(Dd.add(d,Dd.sub(a,Y)));F?this.animateCamera({point:a,zoom:k}):this.update({point:a,zoom:k});return this});gb(this,
"setZoom",(a,d=!1)=>{const {bounds:k}=this;this.onZoom([k.width/2,k.height/2],a,d)});gb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});gb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});gb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});gb(this,"animateCamera",({point:a,zoom:d})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/d}));gb(this,
"animateToViewport",a=>{const d=performance.now(),k=me({},this.currentView),F=()=>{var Y=performance.now()-d;Y=xE(Y);var ka=k.minX+(a.minX-k.minX)*Y;this.update({point:[-ka,-(k.minY+(a.minY-k.minY)*Y)],zoom:this.bounds.width/(k.maxX+(a.maxX-k.maxX)*Y-ka)});1>Y&&requestAnimationFrame(F)};F()});gb(this,"zoomToBounds",({width:a,height:d,minX:k,minY:F})=>{const {bounds:Y,camera:ka}=this;let oa=Math.min((Y.width-100)/a,(Y.height-100)/d);oa=Math.min(1,Math.max(Ks.minZoom,ka.zoom===oa||1>ka.zoom?Math.min(1,
oa):oa));a=Dd.add([-k,-F],[(Y.width-a*oa)/2/oa,(Y.height-d*oa)/2/oa]);this.animateCamera({point:a,zoom:oa})});Qg(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:k}}=this,F=a.width/k,Y=a.height/k;return{minX:-d[0],minY:-d[1],maxX:F-d[0],maxY:Y-d[1],width:F,height:Y}}},zp=Ks;gb(zp,"minZoom",.1);gb(zp,"maxZoom",4);gb(zp,"panMultiplier",.05);gb(zp,"panThreshold",100);ie([Te],zp.prototype,"bounds",2);ie([Te],zp.prototype,"camera",2);ie([yg],zp.prototype,"updateBounds",2);ie([yg],zp.prototype,
"update",2);ie([Ef],zp.prototype,"currentView",1);var yE=class{constructor(a){gb(this,"app");gb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});gb(this,"hoverShape",d=>{this.app.setHoveredShape(d);return this});gb(this,"createShapes",(...d)=>{this.app.createShapes(d);return this});gb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);return this});gb(this,"deleteShapes",(...d)=>{this.app.deleteShapes(d.length?
d:this.app.selectedShapesArray);return this});gb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});gb(this,"deselectShapes",(...d)=>{const k="string"===typeof d[0]?d:d.map(F=>F.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(F=>!k.includes(F.id)));return this});gb(this,"flipHorizontal",(...d)=>{this.app.flipHorizontal(d);return this});gb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);return this});gb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>
!this.app.shapesInGroups().includes(d)));return this});gb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});gb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});gb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});gb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});gb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=xf.getCommonBounds(d.map(k=>k.bounds));this.app.viewport.zoomToBounds(d);return this});
gb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=xf.getCommonBounds(d.map(k=>k.bounds));this.app.viewport.update({point:je.add(je.neg(xf.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});gb(this,"zoomToSelection",()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);return this});gb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,
point:je.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});gb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});gb(this,"toggleSnapToGrid",()=>{const {settings:d}=this.app;d.update({snapToGrid:!d.snapToGrid});return this});gb(this,"setColor",d=>{const {settings:k}=this.app;k.update({color:d});this.app.selectedShapesArray.forEach(F=>{F.props.isLocked||F.update({fill:d,stroke:d})});this.app.persist();return this});gb(this,
"setScaleLevel",d=>{const {settings:k}=this.app;k.update({scaleLevel:d});this.app.selectedShapes.forEach(F=>{F.props.isLocked||F.setScaleLevel(d)});this.app.persist();return this});gb(this,"undo",()=>{this.app.undo();return this});gb(this,"redo",()=>{this.app.redo();return this});gb(this,"persist",()=>{this.app.persist();return this});gb(this,"createNewLineBinding",(d,k)=>this.app.createNewLineBinding(d,k));gb(this,"cloneShapes",({shapes:d,assets:k,bindings:F,point:Y=[0,0]})=>{const ka=xf.getCommonBounds(d.filter(Qa=>
"group"!==Qa.type).map(Qa=>{var Wa,eb,jb,Mb,Ub,Ob,jc,vc,Zb,oc,lc,Ic,Lc,wd,Td,We;return{minX:null!=(eb=null==(Wa=Qa.point)?void 0:Wa[0])?eb:Y[0],minY:null!=(Mb=null==(jb=Qa.point)?void 0:jb[1])?Mb:Y[1],width:null!=(Ob=null==(Ub=Qa.size)?void 0:Ub[0])?Ob:4,height:null!=(vc=null==(jc=Qa.size)?void 0:jc[1])?vc:4,maxX:(null!=(oc=null==(Zb=Qa.point)?void 0:Zb[0])?oc:Y[0])+(null!=(Ic=null==(lc=Qa.size)?void 0:lc[0])?Ic:4),maxY:(null!=(wd=null==(Lc=Qa.point)?void 0:Lc[1])?wd:Y[1])+(null!=(We=null==(Td=Qa.size)?
void 0:Td[1])?We:4)}})),oa=d.map(Qa=>kf(me({},Qa),{id:Uk(),point:[Y[0]+Qa.point[0]-ka.minX,Y[1]+Qa.point[1]-ka.minY]}));oa.forEach(Qa=>{var Wa;Qa.children&&0<(null==(Wa=Qa.children)?void 0:Wa.length)&&(Qa.children=Qa.children.map(eb=>{var jb;return null==(jb=oa[d.findIndex(Mb=>Mb.id===eb)])?void 0:jb.id}).filter(ig))});const Fa=[];oa.flatMap(Qa=>{var Wa;return Object.values(null!=(Wa=Qa.handles)?Wa:{})}).forEach(Qa=>{if(Qa.bindingId){var Wa=F[Qa.bindingId];if(Wa){var eb=d.findIndex(Mb=>Mb.id===Wa.fromId);
const jb=d.findIndex(Mb=>Mb.id===Wa.toId);Wa&&-1!==eb&&-1!==jb?(eb=kf(me({},Wa),{id:Uk(),fromId:oa[eb].id,toId:oa[jb].id}),Fa.push(eb),Qa.bindingId=eb.id):Qa.bindingId=void 0}else console.warn("binding not found",Qa.bindingId)}});k=k.filter(Qa=>oa.some(Wa=>Wa.assetId===Qa.id));return{shapes:oa,assets:k,bindings:Fa}});gb(this,"getClonedShapesFromTldrString",(d,k)=>{try{{var F;const Wa=null==(F=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:F[1];if(Wa){try{var Y=JSON.parse(Wa)}catch(eb){Y=
null}var ka=Y}else ka=void 0}d=ka;if(!d)return null;const {shapes:oa,bindings:Fa,assets:Qa}=d;return this.cloneShapes({shapes:oa,bindings:Fa,assets:Qa,point:k})}catch(oa){console.log(oa)}return null});gb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});gb(this,"addClonedShapes",d=>{const {shapes:k,assets:F,bindings:Y}=d;0<F.length&&this.app.createAssets(F);0<k.length&&this.app.createShapes(k);this.app.currentPage.updateBindings(Object.fromEntries(Y.map(ka=>
[ka.id,ka])));this.app.selectedTool.transition("idle");return this});gb(this,"addClonedShapesFromTldrString",(d,k)=>{(d=this.getClonedShapesFromTldrString(d,k))&&this.addClonedShapes(d);return this});gb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var k=[...d.filter(F=>"group"===F.type),...d.map(F=>this.app.getParentGroup(F))].filter(ig);this.app.currentPage.removeShapes(...k);d=d.filter(F=>"group"!==F.type);1<d.length&&(k=this.app.getShapeClass("group"),k=new k({id:Uk(),
type:k.id,parentId:this.app.currentPage.id,children:d.map(F=>F.id)}),this.app.currentPage.addShapes(k),this.app.setSelectedShapes([k]),this.app.bringForward(d));this.app.persist()}});gb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(F=>"group"===F.type),...d.map(F=>this.app.getParentGroup(F))].filter(ig);var k=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),this.app.persist(),this.app.setSelectedShapes(k))}});gb(this,"convertShapes",
(d,k=this.app.allSelectedShapesArray)=>{const F=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...k);k=k.map(Y=>new F(kf(me({},Y.serialized),{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...k);this.app.persist();this.app.setSelectedShapes(k)});gb(this,"setCollapsed",(d,k=this.app.allSelectedShapesArray)=>{k.forEach(F=>{"logseq-portal"===F.props.type&&F.setCollapsed(d)});this.app.persist()});this.app=a}},It=class{constructor(){gb(this,"cursor","default");gb(this,"rotation",
0);gb(this,"reset",()=>{this.cursor="default"});gb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});gb(this,"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});Qg(this)}};ie([Te],It.prototype,"cursor",2);ie([Te],It.prototype,"rotation",2);ie([yg],It.prototype,"reset",2);ie([yg],It.prototype,"setCursor",2);ie([yg],It.prototype,"setRotation",2);var Jt=class{constructor(a){gb(this,"app");gb(this,"stack",[]);gb(this,"isPaused",!0);gb(this,"pause",()=>
{this.isPaused||(this.isPaused=!0)});gb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});gb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:d})});gb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});gb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});gb(this,"instantiateShape",d=>new (this.app.getShapeClass(d.type))(d));
gb(this,"deserialize",d=>{xd(()=>{var k,{pages:F}=d;const Y=this.isPaused;this.pause();const ka=[...this.app.selectedIds];try{const oa=new Map(this.app.pages),Fa=[];for(const Qa of F){const Wa=oa.get(Qa.id);if(void 0!==Wa){const eb=new Map(Wa.shapes.map(jb=>[jb.props.id,jb]));F=[];for(const jb of Qa.shapes){const Mb=eb.get(jb.id);void 0!==Mb?(Mb.nonce!==jb.nonce&&(Mb.update(jb,!0),Mb.nonce=jb.nonce,Mb.setLastSerialized(jb)),eb.delete(jb.id)):F.push(this.instantiateShape(jb))}0<eb.size&&!this.app.selectedTool.isInAny("creating",
"editingShape")&&Wa.removeShapes(...eb.values());0<F.length&&Wa.addShapes(...F);oa.delete(Qa.id);Wa.updateBindings(Qa.bindings);Wa.nonce=null!=(k=Qa.nonce)?k:0}else{const {id:eb,name:jb,shapes:Mb,bindings:Ub,nonce:Ob}=Qa;Fa.push(new mn(this.app,{id:eb,name:jb,nonce:Ob,bindings:Ub,shapes:Mb.map(jc=>this.instantiateShape(jc))}))}}0<Fa.length&&this.app.addPages(Fa);0<oa.size&&this.app.removePages(Array.from(oa.values()));this.app.setSelectedShapes(ka).setErasingShapes([])}catch(oa){console.warn(oa)}Y||
this.resume()})});this.app=a;Qg(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};ie([Te],Jt.prototype,"stack",2);ie([yg],Jt.prototype,"persist",2);ie([yg],Jt.prototype,"undo",2);ie([yg],Jt.prototype,"redo",2);ie([yg],Jt.prototype,"deserialize",2);var Ls=class{constructor(){gb(this,"mode","light");gb(this,"showGrid",!0);gb(this,"snapToGrid",!0);gb(this,"scaleLevel","md");gb(this,"color","");Qg(this)}update(a){Object.assign(this,a)}};ie([Te],Ls.prototype,"mode",2);ie([Te],
Ls.prototype,"showGrid",2);ie([Te],Ls.prototype,"snapToGrid",2);ie([Te],Ls.prototype,"scaleLevel",2);ie([Te],Ls.prototype,"color",2);ie([yg],Ls.prototype,"update",1);var vh=class extends Ft{constructor(a,d,k,F){var Y,ka;super();gb(this,"uuid",Uk());gb(this,"readOnly");gb(this,"api");gb(this,"inputs",new Dl);gb(this,"cursors",new It);gb(this,"viewport",new zp);gb(this,"settings",new Ls);gb(this,"Tools",[]);gb(this,"history",new Jt(this));gb(this,"persist",this.history.persist);gb(this,"undo",this.history.undo);
gb(this,"redo",this.history.redo);gb(this,"saving",!1);gb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});gb(this,"load",()=>{this.notify("load",null);return this});gb(this,"save",()=>{this.notify("save",null);return this});gb(this,"pages",new Map([["page",new mn(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));gb(this,"getPageById",oa=>{const Fa=this.pages.get(oa);if(!Fa)throw Error(`Could not find a page named ${oa}.`);
return Fa});gb(this,"getShapeById",(oa,Fa=this.currentPage.id)=>{var Qa;return null==(Qa=this.getPageById(Fa))?void 0:Qa.shapesById[oa]});gb(this,"createShapes",oa=>{if(this.readOnly)return this;(oa=this.currentPage.addShapes(...oa))&&this.notify("create-shapes",oa);this.persist();return this});gb(this,"updateShapes",oa=>{if(this.readOnly)return this;oa.forEach(Fa=>{const Qa=this.getShapeById(Fa.id);null==Qa?void 0:Qa.update(Fa);Fa.type!==(null==Qa?void 0:Qa.type)&&this.api.convertShapes(Fa.type,
[Qa])});this.persist();return this});gb(this,"deleteShapes",oa=>{if(0===oa.length||this.readOnly)return this;oa=oa.map(eb=>"string"===typeof eb?this.getShapeById(eb):eb).filter(ig).filter(eb=>!eb.props.isLocked);const Fa=this.shapesInGroups(oa);oa.forEach(eb=>{this.getParentGroup(eb)&&Fa.push(eb)});let Qa=new Set([...oa,...Fa].map(eb=>eb.id));Fa.forEach(eb=>{var jb;const Mb=this.getParentGroup(eb);if(Mb){const Ub=null==(jb=Mb.props.children)?void 0:jb.filter(Ob=>Ob!==eb.id);!Ub||1>=(null==Ub?void 0:
Ub.length)?Qa.add(Mb.id):Mb.update({children:Ub})}});const Wa=(eb,jb)=>{var Mb;[...Qa].includes(eb)&&"line"===(null==(Mb=this.getShapeById(jb))?void 0:Mb.type)&&Qa.add(jb)};this.currentPage.shapes.filter(eb=>!eb.props.isLocked).flatMap(eb=>{var jb;return Object.values(null!=(jb=eb.props.handles)?jb:{})}).flatMap(eb=>eb.bindingId).filter(ig).map(eb=>{var jb,Mb;const Ub=null==(jb=this.currentPage.bindings[eb])?void 0:jb.toId;eb=null==(Mb=this.currentPage.bindings[eb])?void 0:Mb.fromId;Ub&&eb&&(Wa(Ub,
eb),Wa(eb,Ub))});oa=[...Qa].map(eb=>this.getShapeById(eb));this.setSelectedShapes(this.selectedShapesArray.filter(eb=>!Qa.has(eb.id)));(oa=this.currentPage.removeShapes(...oa))&&this.notify("delete-shapes",oa);this.persist();return this});gb(this,"bringForward",(oa=this.selectedShapesArray)=>{0<oa.length&&!this.readOnly&&this.currentPage.bringForward(oa);return this});gb(this,"sendBackward",(oa=this.selectedShapesArray)=>{0<oa.length&&!this.readOnly&&this.currentPage.sendBackward(oa);return this});
gb(this,"sendToBack",(oa=this.selectedShapesArray)=>{0<oa.length&&!this.readOnly&&this.currentPage.sendToBack(oa);return this});gb(this,"bringToFront",(oa=this.selectedShapesArray)=>{0<oa.length&&!this.readOnly&&this.currentPage.bringToFront(oa);return this});gb(this,"flipHorizontal",(oa=this.selectedShapesArray)=>{this.currentPage.flip(oa,"horizontal");return this});gb(this,"flipVertical",(oa=this.selectedShapesArray)=>{this.currentPage.flip(oa,"vertical");return this});gb(this,"align",(oa,Fa=this.selectedShapesArray)=>
{if(2>Fa.length||this.readOnly)return this;const Qa=Fa.map(Ub=>{const Ob=Ub.getBounds();return{id:Ub.id,point:[Ob.minX,Ob.minY],bounds:Ob}}),Wa=xf.getCommonBounds(Qa.map(({bounds:Ub})=>Ub)),eb=Wa.minX+Wa.width/2,jb=Wa.minY+Wa.height/2,Mb=Object.fromEntries(Qa.map(({id:Ub,point:Ob,bounds:jc})=>[Ub,{prev:Ob,next:{top:[Ob[0],Wa.minY],centerVertical:[Ob[0],jb-jc.height/2],bottom:[Ob[0],Wa.maxY-jc.height],left:[Wa.minX,Ob[1]],centerHorizontal:[eb-jc.width/2,Ob[1]],right:[Wa.maxX-jc.width,Ob[1]]}[oa]}]));
Fa.forEach(Ub=>{Mb[Ub.id]&&Ub.update({point:Mb[Ub.id].next})});this.persist();return this});gb(this,"distribute",(oa,Fa=this.selectedShapesArray)=>{if(2>Fa.length||this.readOnly)return this;const Qa=Object.fromEntries(xf.getDistributions(Fa,oa).map(Wa=>[Wa.id,Wa]));Fa.forEach(Wa=>{Qa[Wa.id]&&Wa.update({point:Qa[Wa.id].next})});this.persist();return this});gb(this,"packIntoRectangle",(oa=this.selectedShapesArray)=>{if(2>oa.length||this.readOnly)return this;const Fa=Object.fromEntries(xf.getPackedDistributions(oa).map(Qa=>
[Qa.id,Qa]));oa.forEach(Qa=>{Fa[Qa.id]&&Qa.update({point:Fa[Qa.id].next})});this.persist();return this});gb(this,"setLocked",oa=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(Fa=>{Fa.update({isLocked:oa})});this.persist();return this});gb(this,"assets",{});gb(this,"removeUnusedAssets",()=>{const oa=this.getCleanUpAssets();Object.keys(this.assets).forEach(Fa=>{oa.some(Qa=>Qa.id===Fa)||delete this.assets[Fa]});this.persist();return this});gb(this,
"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const Fa=this.allSelectedShapesArray;var oa=JSON.stringify({shapes:Fa.map(Wa=>Wa.serialized),assets:this.getCleanUpAssets().filter(Wa=>Fa.some(eb=>eb.props.assetId===Wa.id)),bindings:Ab(this.currentPage.bindings)});oa=encodeURIComponent(`<whiteboard-tldr>${oa}</whiteboard-tldr>`);const Qa=this.selectedShapesArray.map(Wa=>`((${Wa.props.id}))`).join(" ");this.notify("copy",{text:Qa,html:oa})}});gb(this,"paste",(oa,Fa)=>{var Qa;this.editingShape||
this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!Fa,dataTransfer:null!=(Qa=null==oa?void 0:oa.clipboardData)?Qa:void 0})});gb(this,"cut",()=>{this.copy();this.api.deleteShapes()});gb(this,"drop",(oa,Fa)=>{this.notify("drop",{dataTransfer:oa,point:Fa?this.viewport.getPagePoint(Fa):xf.getBoundsCenter(this.viewport.currentView)})});gb(this,"selectTool",(oa,Fa={})=>{this.readOnly&&!["select","move"].includes(oa)||this.transition(oa,Fa)});gb(this,"editingId");gb(this,"setEditingShape",
oa=>{this.editingId="string"===typeof oa?oa:null==oa?void 0:oa.id;return this});gb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});gb(this,"hoveredId");gb(this,"setHoveredShape",oa=>{this.hoveredId="string"===typeof oa?oa:null==oa?void 0:oa.id;return this});gb(this,"selectedIds",new Set);gb(this,"selectedShapes",new Set);gb(this,"selectionRotation",0);gb(this,"setSelectedShapes",oa=>{var Fa;const {selectedIds:Qa,selectedShapes:Wa}=this;Qa.clear();
Wa.clear();oa[0]&&"string"===typeof oa[0]?oa.forEach(jb=>Qa.add(jb)):oa.forEach(jb=>Qa.add(jb.id));const eb=this.currentPage.shapes.filter(jb=>Qa.has(jb.id));eb.forEach(jb=>Wa.add(jb));this.selectionRotation=1===eb.length?null!=(Fa=eb[0].props.rotation)?Fa:0:0;0===oa.length&&this.setEditingShape();return this});gb(this,"erasingIds",new Set);gb(this,"erasingShapes",new Set);gb(this,"setErasingShapes",oa=>{const {erasingIds:Fa,erasingShapes:Qa}=this;Fa.clear();Qa.clear();oa[0]&&"string"===typeof oa[0]?
oa.forEach(Wa=>Fa.add(Wa)):oa.forEach(Wa=>Fa.add(Wa.id));this.currentPage.shapes.filter(Wa=>Fa.has(Wa.id)).forEach(Wa=>Qa.add(Wa));return this});gb(this,"bindingIds");gb(this,"setBindingShapes",oa=>{this.bindingIds=oa;return this});gb(this,"clearBindingShape",()=>this.setBindingShapes());gb(this,"createNewLineBinding",(oa,Fa)=>{oa="string"===typeof oa?this.getShapeById(oa):oa;Fa="string"===typeof Fa?this.getShapeById(Fa):Fa;if((null==oa?0:oa.canBind)&&(null==Fa?0:Fa.canBind)&&(Fa=fd(oa,Fa))){const [Qa,
Wa]=Fa;this.createShapes([Qa]);this.currentPage.updateBindings(Object.fromEntries(Wa.map(eb=>[eb.id,eb])));this.persist();return!0}return!1});gb(this,"brush");gb(this,"setBrush",oa=>{this.brush=oa;return this});gb(this,"setCamera",(oa,Fa)=>{this.viewport.update({point:oa,zoom:Fa});return this});gb(this,"getPagePoint",oa=>{const {camera:Fa}=this.viewport;return Dd.sub(Dd.div(oa,Fa.zoom),Fa.point)});gb(this,"getScreenPoint",oa=>{const {camera:Fa}=this.viewport;return Dd.mul(Dd.add(oa,Fa.point),Fa.zoom)});
gb(this,"Shapes",new Map);gb(this,"registerShapes",oa=>{oa.forEach(Fa=>{if("group"===Fa.id){const Qa=this;Fa.prototype.getShapes=function(){var Wa,eb;return null!=(eb=null==(Wa=this.props.children)?void 0:Wa.map(jb=>Qa.getShapeById(jb)).filter(Boolean))?eb:[]}}return this.Shapes.set(Fa.id,Fa)})});gb(this,"deregisterShapes",oa=>{oa.forEach(Fa=>this.Shapes.delete(Fa.id))});gb(this,"getShapeClass",oa=>{if(!oa)throw Error("No shape type provided.");const Fa=this.Shapes.get(oa);if(!Fa)throw Error(`Could not find shape class for ${oa}`);
return Fa});gb(this,"wrapUpdate",oa=>{xd(()=>{const Fa=!this.history.isPaused;Fa&&this.history.pause();oa();Fa&&(this.history.resume(),this.persist())})});gb(this,"subscriptions",new Set([]));gb(this,"subscribe",(oa,Fa)=>{if(void 0===Fa)throw Error("Callback is required.");const Qa={event:oa,callback:Fa};this.subscriptions.add(Qa);return()=>this.unsubscribe(Qa)});gb(this,"unsubscribe",oa=>{this.subscriptions.delete(oa);return this});gb(this,"notify",(oa,Fa)=>{this.subscriptions.forEach(Qa=>{Qa.event===
oa&&Qa.callback(this,Fa)});return this});gb(this,"onTransition",()=>{});gb(this,"onPointerDown",(oa,Fa)=>{if(!this.editingShape&&1===Fa.button&&!this.isIn("move"))this.temporaryTransitionToMove(Fa);else if(2===Fa.button&&!this.editingShape)Fa.preventDefault(),this.transition("select");else if("clientX"in Fa)this.inputs.onPointerDown([...this.viewport.getPagePoint([Fa.clientX,Fa.clientY]),.5],Fa)});gb(this,"onPointerUp",(oa,Fa)=>{if(!this.editingShape&&1===Fa.button&&this.isIn("move"))this.selectedTool.transition("idle",
{exit:!0}),Fa.stopPropagation(),Fa.preventDefault();else if("clientX"in Fa)this.inputs.onPointerUp([...this.viewport.getPagePoint([Fa.clientX,Fa.clientY]),.5],Fa)});gb(this,"onPointerMove",(oa,Fa)=>{if("clientX"in Fa)this.inputs.onPointerMove([...this.viewport.getPagePoint([Fa.clientX,Fa.clientY]),.5],Fa)});gb(this,"onKeyDown",(oa,Fa)=>{if(this.editingShape||" "!==Fa.key||this.isIn("move"))this.inputs.onKeyDown(Fa);else this.temporaryTransitionToMove(Fa)});gb(this,"onKeyUp",(oa,Fa)=>{if(!this.editingShape&&
" "===Fa.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Fa.stopPropagation(),Fa.preventDefault();else this.inputs.onKeyUp(Fa)});gb(this,"onPinchStart",(oa,Fa)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(oa.point),.5],Fa)});gb(this,"onPinch",(oa,Fa)=>{this.inputs.onPinch([...this.viewport.getPagePoint(oa.point),.5],Fa)});gb(this,"onPinchEnd",(oa,Fa)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(oa.point),.5],Fa)});this._states=[Gt,Ht];this.readOnly=F;
this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),F=null!=(Y=this.initial)?Y:this.states[0].id,Y=this.children.get(F))&&(this.currentState=Y,null==(ka=this.currentState)?void 0:ka._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);k&&this.registerTools(k);this.history.resume();a&&this.history.deserialize(a);this.api=new yE(this);Qg(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);
return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>d.props.children).filter(ig).map(d=>this.getShapeById(d)).filter(ig)}getParentGroup(a){return this.shapes.find(d=>{var k;return null==(k=
d.props.children)?void 0:k.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):a.forEach(d=>delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(k=>{k.props.assetId&&this.assets[k.props.assetId]&&a.add(this.assets[k.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});
this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=this;return a?d.shapes.find(k=>k.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(k=>k.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=this;return a?this.shapes.find(d=>{var k;return"group"===d.type&&(null==(k=d.props.children)?void 0:k.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,
selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(F=>{var Y;return Object.values(null!=
(Y=F.props.handles)?Y:{})}).flatMap(F=>F.bindingId).filter(ig).flatMap(F=>{var Y,ka;return[null==(Y=this.currentPage.bindings[F])?void 0:Y.fromId,null==(ka=this.currentPage.bindings[F])?void 0:ka.toId]}).filter(ig):[],k=[...(null!=(a=this.bindingIds)?a:[]),...d];return k?this.currentPage.shapes.filter(F=>null==k?void 0:k.includes(F.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,
currentPage:d,viewport:{currentView:k}}=this;return d.shapes.filter(F=>!F.canUnmount||a.has(F)||xf.boundsContain(k,F.rotatedBounds)||xf.boundsCollide(k,F.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!xf.boundsContain(d,a)&&!xf.boundsCollide(d,a)){var k=xf.getBoundsCenter(a);return Dd.clampV([(k[0]-d.minX-d.width/2)/d.width,(k[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===
a.length?kf(me({},a[0].bounds),{rotation:a[0].props.rotation}):xf.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>
a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle",
"select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}temporaryTransitionToMove(a){a.stopPropagation();a.preventDefault();this.transition("move",{prevTool:this.selectedTool});
this.selectedTool.transition("idleHold")}};gb(vh,"id","app");gb(vh,"initial","select");ie([Ef],vh.prototype,"serialized",1);ie([Te],vh.prototype,"pages",2);ie([Ef],vh.prototype,"currentPageId",1);ie([Ef],vh.prototype,"currentPage",1);ie([yg],vh.prototype,"addPages",1);ie([yg],vh.prototype,"removePages",1);ie([yg],vh.prototype,"createShapes",2);ie([yg],vh.prototype,"updateShapes",2);ie([yg],vh.prototype,"deleteShapes",2);ie([Te],vh.prototype,"assets",2);ie([yg],vh.prototype,"addAssets",1);ie([yg],
vh.prototype,"removeAssets",1);ie([yg],vh.prototype,"removeUnusedAssets",2);ie([Ef],vh.prototype,"selectedTool",1);ie([Te],vh.prototype,"editingId",2);ie([Ef],vh.prototype,"editingShape",1);ie([yg],vh.prototype,"setEditingShape",2);ie([Te],vh.prototype,"hoveredId",2);ie([Ef],vh.prototype,"hoveredShape",1);ie([Ef],vh.prototype,"hoveredGroup",1);ie([yg],vh.prototype,"setHoveredShape",2);ie([Te],vh.prototype,"selectedIds",2);ie([Te],vh.prototype,"selectedShapes",2);ie([Te],vh.prototype,"selectionRotation",
2);ie([Ef],vh.prototype,"selectedShapesArray",1);ie([Ef],vh.prototype,"allSelectedShapes",1);ie([Ef],vh.prototype,"allSelectedShapesArray",1);ie([yg],vh.prototype,"setSelectedShapes",2);ie([yg],vh.prototype,"setSelectionRotation",1);ie([Te],vh.prototype,"erasingIds",2);ie([Te],vh.prototype,"erasingShapes",2);ie([Ef],vh.prototype,"erasingShapesArray",1);ie([yg],vh.prototype,"setErasingShapes",2);ie([Te],vh.prototype,"bindingIds",2);ie([Ef],vh.prototype,"bindingShapes",1);ie([yg],vh.prototype,"setBindingShapes",
2);ie([yg],vh.prototype,"createNewLineBinding",2);ie([Te],vh.prototype,"brush",2);ie([yg],vh.prototype,"setBrush",2);ie([yg],vh.prototype,"setCamera",2);ie([Ef],vh.prototype,"currentGrid",1);ie([Ef],vh.prototype,"shapes",1);ie([Ef],vh.prototype,"shapesInViewport",1);ie([Ef],vh.prototype,"selectionDirectionHint",1);ie([Ef],vh.prototype,"selectionBounds",1);ie([Ef],vh.prototype,"showSelection",1);ie([Ef],vh.prototype,"showSelectionDetail",1);ie([Ef],vh.prototype,"showSelectionRotation",1);ie([Ef],vh.prototype,
"showContextBar",1);ie([Ef],vh.prototype,"showRotateHandles",1);ie([Ef],vh.prototype,"showResizeHandles",1);var zE=Function.prototype.toString,Dx=Object.create,AE=Object.prototype.toString,BE=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,k){this._keys.push(d);this._values.push(k)};return a}(),CE="undefined"!==typeof WeakMap?df:Ce,DE=
"g"===/test/g.flags?Xf:ng,EE="undefined"!==typeof Symbol?Yf:Ng,FE=Object.defineProperty,GE=Object.getOwnPropertyDescriptor,xA=Object.getOwnPropertyNames,Ex=Object.getOwnPropertySymbols,yA=Object.prototype,zA=yA.hasOwnProperty,HE=yA.propertyIsEnumerable,AA="function"===typeof Ex,IE=AA?gh:xA,JE=Array.isArray,Fx=Object.assign,KE=Object.getPrototypeOf,BA={array:function(a,d){var k=new d.Constructor;d.cache.set(a,k);for(var F=0,Y=a.length;F<Y;++F)k[F]=d.copier(a[F],d);return k},arrayBuffer:function(a,
d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,d){return new d.Constructor(a.getTime())},error:ij,map:zh,object:AA?qi:og,regExp:function(a,d){d=new d.Constructor(a.source,DE(a));d.lastIndex=a.lastIndex;return d},set:ik},LE=Fx({},BA,{array:function(a,d){var k=new d.Constructor;d.cache.set(a,k);return Ai(a,k,d)},map:function(a,d){return Ai(a,zh(a,d),d)},object:function(a,d){var k=Le(d.prototype);
d.cache.set(a,k);return Ai(a,k,d)},set:function(a,d){return Ai(a,ik(a,d),d)}});Bi(Fx({},LE,{}));var ME=Bi({}),NE=uf(mt()),OE=uf(xr()),Ms=ME,Xo=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const k=a.ownerDocument,F=k.activeElement;F!==a&&a.focus();k.execCommand("insertText",!1,d)||Xo.insertTextFirefox(a,d);F===k.body?a.blur():F instanceof HTMLElement&&
F!==a&&F.focus()}static set(a,d){a.select();Xo.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:k}=a;return a.value.slice(d?d:void 0,k?k:void 0)}static wrapSelection(a,d,k){const {selectionStart:F,selectionEnd:Y}=a,ka=Xo.getSelection(a);Xo.insert(a,d+ka+(null!=k?k:d));a.selectionStart=(F||0)+d.length;a.selectionEnd=(Y||0)+d.length}static replace(a,d,k){let F=0;a.value.replace(d,(...Y)=>{const ka=F+Y[Y.length-2],oa=Y[0].length;a.selectionStart=ka;a.selectionEnd=ka+oa;Y="string"===
typeof k?k:k(...Y);Xo.insert(a,Y);a.selectionStart=ka;F+=Y.length-oa;return Y})}static findLineEnd(a,d){const k=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(k)?d:k+1}static indent(a){var d;const {selectionStart:k,selectionEnd:F,value:Y}=a;var ka=Y.slice(k,F);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=Y.lastIndexOf("\n",k-1)+1;var oa=a.value.slice(d,F-1);ka=oa.replace(/^|\n/g,`$&${Xo.INDENT}`);oa=ka.length-oa.length;a.setSelectionRange(d,F-1);Xo.insert(a,ka);a.setSelectionRange(k+
1,F+oa)}else Xo.insert(a,Xo.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:k,value:F}=a;var Y=F.lastIndexOf("\n",d-1)+1;const ka=Xo.findLineEnd(F,k);var oa=a.value.slice(Y,ka);const Fa=oa.replace(/(^|\n)(\t| {1,2})/g,"$1");oa=oa.length-Fa.length;a.setSelectionRange(Y,ka);Xo.insert(a,Fa);Y=(Y=/\t| {1,2}/.exec(F.slice(Y,d)))?Y[0].length:0;a.setSelectionRange(d-Y,Math.max(d-Y,k-oa))}static normalizeText(a){return a.replace(Xo.fixNewLines,"\n")}},Kt=Xo;gb(Kt,"fixNewLines",/\r?\n|\r/g);
gb(Kt,"INDENT","  ");var Lr;"undefined"!==typeof window&&(Lr=ul());var Gx=new Map,CA=Kh()?"⌘":"ctrl",PE=class extends vh{},DA=uf(V(22)),QE=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var EA=uf(V(22)),Hx={},Ku=uf(V(22)),RE=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},Ix=uf(V(22)),Jx=new Map,SE={accent:"rgb(255, 0, 0)",
brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},TE=((a,...d)=>a.reduce((k,F,Y)=>k+F+(Y<d.length?d[Y]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,FA=uf(V(22)),GA=uf(V(22)),Kx={},El={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},HA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},UE=["enter","leave"],VE=["gotpointercapture","lostpointercapture"],
IA=class{constructor(a,d,k){this.ctrl=a;this.args=d;this.key=k;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:k,args:F}=this;d[k]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=F;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,k=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=k.from?oh(k.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:k,shared:F}=this;d.args=this.args;var Y=0;if(a){d.event=a;k.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;F.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;F.locked=!!document.pointerLockElement;Y=Object;var ka=Y.assign,oa={};"buttons"in a&&(oa.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:Ic,altKey:Lc,metaKey:wd,ctrlKey:Td}=a;Object.assign(oa,{shiftKey:Ic,altKey:Lc,metaKey:wd,ctrlKey:Td})}ka.call(Y,F,oa);F.down=F.pressed=1===F.buttons%2||0<F.touches;Y=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(ka=d._delta.map(Math.abs),El.addTo(d._distance,ka));this.axisIntent&&this.axisIntent(a);
const [Fa,Qa]=d._movement,[Wa,eb]=k.threshold,{_step:jb,values:Mb}=d;k.hasCustomTransform?(!1===jb[0]&&(jb[0]=Math.abs(Fa)>=Wa&&Mb[0]),!1===jb[1]&&(jb[1]=Math.abs(Qa)>=eb&&Mb[1])):(!1===jb[0]&&(jb[0]=Math.abs(Fa)>=Wa&&Math.sign(Fa)*Wa),!1===jb[1]&&(jb[1]=Math.abs(Qa)>=eb&&Math.sign(Qa)*eb));d.intentional=!1!==jb[0]||!1!==jb[1];if(d.intentional){ka=[0,0];if(k.hasCustomTransform){const [Ic,Lc]=Mb;ka[0]=!1!==jb[0]?Ic-jb[0]:0;ka[1]=!1!==jb[1]?Lc-jb[1]:0}else ka[0]=!1!==jb[0]?Fa-jb[0]:0,ka[1]=!1!==jb[1]?
Qa-jb[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(ka);oa=d.offset;var Ub=d._active&&!d._blocked||d.active;Ub&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=F[this.ingKey]=d._active,a&&(d.first&&("bounds"in k&&(d._bounds=oh(k.bounds,d)),this.setup&&this.setup()),d.movement=ka,this.computeOffset()));var [Ob,jc]=d.offset,[[vc,Zb],[oc,lc]]=d._bounds;d.overflow=[Ob<vc?-1:Ob>Zb?1:0,jc<oc?-1:jc>lc?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?d._movement[0]:
d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=aj(d._bounds,d.offset,d._active?k.rubberband||[0,0]:[0,0]);d.delta=El.sub(d.offset,oa);this.computeMovement();Ub&&(!d.last||32<Y)&&(d.delta=El.sub(d.offset,oa),a=d.delta.map(Math.abs),El.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<Y&&(d.velocity=[a[0]/Y,a[1]/Y]))}}emit(){const a=this.state;var d=this.shared;const k=
this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||k.triggerAllEvents)d=this.handler(Lg(Lg(Lg({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Lu=class extends IA{constructor(...a){super(...a);ei(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=El.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
El.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,k=this.config;!d.axis&&a&&(a="object"===typeof k.axisThreshold?k.axisThreshold[Lh(a)]:k.axisThreshold,d.axis=dl(d._movement,a));d._blocked=(k.lockDirection||!!k.axis)&&!d.axis||!!k.axis&&k.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},WE=a=>a,JA={enabled(a=!0){return a},eventOptions(a,d,k){return Lg(Lg({},k.shared.eventOptions),
a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return El.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return El.toVector(a)},transform(a,d,k){a=a||k.shared.transform;this.hasCustomTransform=!!a;return a||WE},threshold(a){return El.toVector(a,0)}},Ns=Lg(Lg({},JA),{},{axis(a,d,{axis:k}){this.lockDirection="lock"===k;if(!this.lockDirection)return k},axisThreshold(a=0){return a},bounds(a=
{}){if("function"===typeof a)return ka=>Ns.bounds(a(ka));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:k=Infinity,top:F=-Infinity,bottom:Y=Infinity}=a;return[[d,k],[F,Y]]}}),KA={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},XE=class extends Lu{constructor(...a){super(...a);ei(this,"ingKey","dragging")}reset(){super.reset();const a=this.state;a._pointerId=
void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),k=a.currentTarget.getBoundingClientRect();a._bounds=Ns.bounds({left:d.left-k.left+a.offset[0],right:d.right-k.right+a.offset[0],top:d.top-k.top+a.offset[1],bottom:d.bottom-k.bottom+a.offset[1]})}}cancel(){const a=this.state;a.canceled||(a.canceled=
!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,k=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var F=this.ctrl.setEventIds(a);d.pointerCapture&&a.target.setPointerCapture(a.pointerId);
F&&1<F.size&&k._pointerActive||(this.start(a),this.setupPointer(a),k._pointerId=Sl(a),k._pointerActive=!0,this.computeValues(Pj(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==Lh(a)?(k._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);this.emit()}pointerMove(a){const d=this.state,k=
this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var F=Sl(a);if(void 0===d._pointerId||F===d._pointerId)F=Pj(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=El.sub(F,d._values),this.computeValues(F)),El.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):k.preventScrollAxis&&!d._preventScroll?d.axis&&(d.axis===k.preventScrollAxis||"xy"===
k.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(oa){}const d=this.state,k=this.config;if(d._active&&d._pointerActive){var F=Sl(a);if(void 0===d._pointerId||F===d._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(a);var [Y,ka]=d._distance;
d.tap=Y<=k.tapsThreshold&&ka<=k.tapsThreshold;if(d.tap&&k.filterTaps)d._force=!0;else{const [oa,Fa]=d.direction,[Qa,Wa]=d.velocity,[eb,jb]=d.movement,[Mb,Ub]=k.swipe.velocity,[Ob,jc]=k.swipe.distance;d.elapsedTime<k.swipe.duration&&(Math.abs(Qa)>Mb&&Math.abs(eb)>Ob&&(d.swipe[0]=oa),Math.abs(Wa)>Ub&&Math.abs(jb)>jc&&(d.swipe[1]=Fa))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,k=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();
d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,k,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,k,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,k,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=
!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=KA[a.key];if(d){const k=this.state,F=a.shiftKey?10:a.altKey?.1:1;this.start(a);k._delta=d(F);k._keyboardActive=!0;El.addTo(k._movement,k._delta);this.compute(a);this.emit()}}keyUp(a){a.key in KA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),
a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Os="undefined"!==typeof window&&window.document&&window.document.createElement;try{var LA="constructor"in GestureEvent}catch(a){LA=!1}var YE=LA,Mu=Os&&"ontouchstart"in window||Os&&1<window.navigator.maxTouchPoints,MA=Os&&
"ontouchstart"in window||Os&&1<window.navigator.maxTouchPoints,NA=Os&&"onpointerdown"in window,ZE=Os&&"exitPointerLock"in window.document,OA={mouse:0,touch:0,pen:8},$E=Lg(Lg({},Ns),{},{device(a,d,{pointer:{touch:k=!1,lock:F=!1,mouse:Y=!1}={}}){this.pointerLock=F&&ZE;return Mu&&k?"touch":this.pointerLock?"mouse":NA&&!Y?"pointer":Mu?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:k}){this.preventScrollDelay="number"===typeof k?k:k||void 0===k&&a?250:void 0;if(MA&&!1!==k)return a?a:void 0!==k?
"y":void 0},pointerCapture(a,d,{pointer:{capture:k=!0,buttons:F=1,keys:Y=!0}={}}){this.pointerButtons=F;this.keys=Y;return!this.pointerLock&&"pointer"===this.device&&k},threshold(a,d,{filterTaps:k=!1,tapsThreshold:F=3,axis:Y}){a=El.toVector(a,k?F:Y?1:0);this.filterTaps=k;this.tapsThreshold=F;return a},swipe({velocity:a=.5,distance:d=50,duration:k=250}={}){return{velocity:this.transform(El.toVector(a)),distance:this.transform(El.toVector(d)),duration:k}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;
default:return a}},axisThreshold(a){return a?Lg(Lg({},OA),a):OA}}),aF=class extends IA{constructor(...a){super(...a);ei(this,"ingKey","pinching");ei(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:k}=this.state;this.state.offset="wheel"===a?El.add(d,k):[(1+d[0])*k[0],d[1]+
k[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,k]=a._movement;if(!a.axis){const F=30*Math.abs(d)-Math.abs(k);0>F?a.axis="angle":0<F&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);
var d=this.state;const k=this.ctrl.touchIds;d._active&&d._touchIds.every(F=>k.has(F))||2>k.size||(this.start(a),d._touchIds=Array.from(k).slice(0,2),d=Ti(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,k=d._pointerEvents,F=this.ctrl.pointerIds;d._active&&Array.from(k.keys()).every(Y=>F.has(Y))||(2>k.size&&k.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=Rl(...Array.from(k.values())),
this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=Ti(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=Rl(...Array.from(d.values())),this.pinchMove(a,d))}pinchMove(a,d){const k=this.state,F=d.angle-k._values[1];let Y=0;270<Math.abs(F)&&(Y+=Math.sign(F));
this.computeValues([d.distance,d.angle-360*Y]);k.origin=d.origin;k.turns=Y;k._movement=[k._values[0]/k._initial[0]-1,k._values[1]-k._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);try{a.target.releasePointerCapture(a.pointerId)}catch(k){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);
d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,a.rotation]);d.origin=[a.clientX,a.clientY];var k=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=El.sub(d._movement,
k);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();const d=this.state;d._delta=[-Ci(a)[1]/100*d.offset[0],0];El.addTo(d._movement,d._delta);Lm(d);this.state.origin=
[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),{passive:!1})}},bF=Lg(Lg({},JA),{},{device(a,d,{shared:k,pointer:{touch:F=!1}={}}){if(k.target&&!Mu&&YE)return"gesture";
if(Mu&&F)return"touch";if(MA){if(NA)return"pointer";if(Mu)return"touch"}},bounds(a,d,{scaleBounds:k={},angleBounds:F={}}){const Y=oa=>{oa=oh(k,oa);oa=Object.assign({},{min:-Infinity,max:Infinity},oa||{});return[oa.min,oa.max]},ka=oa=>{oa=oh(F,oa);oa=Object.assign({},{min:-Infinity,max:Infinity},oa||{});return[oa.min,oa.max]};return"function"!==typeof k&&"function"!==typeof F?[Y(),ka()]:oa=>[Y(oa),ka(oa)]},threshold(a,d,k){this.lockDirection="lock"===k.axis;return El.toVector(a,this.lockDirection?
[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),cF=class extends Lu{constructor(...a){super(...a);ei(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(Pj(a));this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=Pj(a),k=this.state;
k._delta=El.sub(d,k._values);El.addTo(k._movement,k._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},dF=Lg(Lg({},Ns),{},{mouseOnly:(a=!0)=>a}),eF=class extends Lu{constructor(...a){super(...a);ei(this,"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var k,F;const {scrollX:Y,scrollY:ka,scrollLeft:oa,scrollTop:Fa}=a.currentTarget;var Qa=[null!==(k=null!==Y&&void 0!==Y?Y:oa)&&void 0!==k?k:0,null!==(F=null!==ka&&void 0!==ka?ka:Fa)&&void 0!==F?F:0];d._delta=El.sub(Qa,d._values);El.addTo(d._movement,d._delta);this.computeValues(Qa);this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll",
"",this.scroll.bind(this))}},fF=Ns,gF=class extends Lu{constructor(...a){super(...a);ei(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=Ci(a);El.addTo(d._movement,d._delta);Lm(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},hF=Ns,iF=class extends Lu{constructor(...a){super(...a);
ei(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(Pj(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var k=Pj(a);d._movement=d._delta=El.sub(k,d._values);this.computeValues(k);this.compute(a);d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},jF=Lg(Lg({},Ns),{},{mouseOnly:(a=
!0)=>a}),Lx=new Map,Mx=new Map,kF={key:"drag",engine:XE,resolver:$E},lF={key:"hover",engine:iF,resolver:jF},mF={key:"move",engine:cF,resolver:dF},nF={key:"pinch",engine:aF,resolver:bF},oF={key:"scroll",engine:eF,resolver:fF},pF={key:"wheel",engine:gF,resolver:hF},Nx=uf(V(22)),qF={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=!0){return a},window(a=Os?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},rF=["target",
"eventOptions","window","enabled","transform"],PA=class{constructor(a,d){ei(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,k,F,Y){const ka=this._listeners,oa=Si(d,k),Fa=Lg(Lg({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),Y);a.addEventListener(oa,F,Fa);const Qa=()=>{a.removeEventListener(oa,F,Fa);ka.delete(Qa)};ka.add(Qa);return Qa}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},sF=class{constructor(){ei(this,"_timeouts",new Map)}add(a,
d,k=140,...F){this.remove(a);this._timeouts.set(a,window.setTimeout(d,k,...F))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},tF=class{constructor(a){ei(this,"gestures",new Set);ei(this,"_targetEventStore",new PA(this));ei(this,"gestureEventStores",{});ei(this,"gestureTimeoutStores",{});ei(this,"handlers",{});ei(this,"config",{});ei(this,"pointerIds",new Set);ei(this,"touchIds",new Set);ei(this,"state",
{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&jj(this,"drag");a.wheel&&jj(this,"wheel");a.scroll&&jj(this,"scroll");a.move&&jj(this,"move");a.pinch&&jj(this,"pinch");a.hover&&jj(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(Rm(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=
d}applyConfig(a,d){this.config=cj(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const k={};let F;if(d.target&&(F=d.target(),!F))return;if(d.enabled){for(const Y of this.gestures){const ka=this.config[Y],oa=QA(k,ka.eventOptions,!!F);ka.enabled&&(new (Lx.get(Y))(this,
a,Y)).bind(oa)}d=QA(k,d.eventOptions,!!F);for(const Y in this.nativeHandlers)d(Y,"",ka=>this.nativeHandlers[Y](Lg(Lg({},this.state.shared),{},{event:ka,args:a})),void 0,!0)}for(const Y in k)k[Y]=qj(...k[Y]);if(!F)return k;for(const Y in k){const {device:ka,capture:oa,passive:Fa}=wf(Y);this._targetEventStore.add(F,ka,"",k[Y],{capture:oa,passive:Fa})}}},QA=(a,d,k)=>(F,Y,ka,oa={},Fa=!1)=>{var Qa,Wa;const eb=null!==(Qa=oa.capture)&&void 0!==Qa?Qa:d.capture;oa=null!==(Wa=oa.passive)&&void 0!==Wa?Wa:d.passive;
F=Fa?F:Qk(F,Y,eb);k&&oa&&(F+="Passive");a[F]=a[F]||[];a[F].push(ka)},uF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,$v=uf(V(22)),Ox=uf(V(22)),RA=uf(V(22)),SA=uf(V(22)),vF=uf(V(22)),wF=uf(V(22)),xF=uf(V(22)),yF=uf(V(22)),zF={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>Jj('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>Jj("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>Jj("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>Jj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>Jj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>Jj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>Jj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>Jj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>Jj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>Jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>Jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>Jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>Jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>Jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},AF=uf(V(22));uf(V(22));var TA=V(22),UA=uf(V(22));if(!V(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!Qg)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var BF=V(31),Nu=uf(V(22)),VA="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,CF=1E4,DF=function(a){var d="function"===typeof Symbol&&Symbol.iterator,k=d&&a[d],F=0;if(k)return k.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&F>=
a.length&&(a=void 0);return{value:a&&a[F++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},WA=VA?gi(VA):An(),EF=WA.addReactionToTrack,FF=WA.recordReactionAsCommitted,XA=function(a,d){var k="function"===typeof Symbol&&a[Symbol.iterator];if(!k)return a;a=k.call(a);var F,Y=[];try{for(;(void 0===d||0<d--)&&!(F=a.next()).done;)Y.push(F.value)}catch(oa){var ka={error:oa}}finally{try{F&&!F.done&&(k=a["return"])&&k.call(a)}finally{if(ka)throw ka.error;}}return Y},
GF=function(){return function(){}}(),Lt=V(22),YA="function"===typeof Symbol&&Symbol.for,ZA=YA?Symbol.for("react.forward_ref"):"function"===typeof Lt.forwardRef&&(0,Lt.forwardRef)(function(a){return null}).$$typeof,$A=YA?Symbol.for("react.memo"):"function"===typeof Lt.memo&&(0,Lt.memo)(function(a){return null}).$$typeof,HF={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};wk.displayName="Observer";V(22);V(22);V(22);(function(a){a||=zn;Fc({reactionScheduler:a})})(BF.unstable_batchedUpdates);
var IF=uf(V(22)),Px=V(586),Yo=IF.forwardRef(function(a,d){var {children:k,opacity:F,centered:Y,className:ka=""}=a,oa=Jf(a,["children","opacity","centered","className"]);return(0,Px.jsx)(wk,{children:()=>(0,Px.jsx)("div",{ref:d,className:`tl-positioned-div ${ka}`,style:F?{opacity:F}:void 0,draggable:!1,children:(0,Px.jsx)("div",kf(me({className:`tl-positioned-inner ${Y?"tl-centered":""}`},oa),{children:k}))})})}),JF=uf(V(22)),Qx=V(586),Ap=JF.forwardRef(function(a,d){var {id:k,className:F="",style:Y,
children:ka}=a,oa=Jf(a,["id","className","style","children"]);return(0,Qx.jsx)(wk,{children:()=>(0,Qx.jsx)("svg",{ref:d,style:Y,className:`tl-positioned-svg ${F}`,children:(0,Qx.jsx)("g",kf(me({id:k,className:"tl-centered-g"},oa),{children:ka}))})})}),Ou=uf(V(22)),aB=uf(V(22)),aw=uf(V(22)),KF=V(586),Mr=Ze(function(a){var {id:d,bounds:k,zIndex:F,rotation:Y=0,className:ka="",children:oa}=a;a=Jf(a,"id bounds zIndex rotation className children".split(" "));const Fa=aw.useRef(null);aw.useLayoutEffect(()=>
{Fa.current.style.transform=`translate(
        calc(${k.minX}px - var(--tl-padding)),
        calc(${k.minY}px - var(--tl-padding)))
        rotate(${Y+(k.rotation||0)}rad)`},[k.minX,k.minY,Y,k.rotation]);aw.useLayoutEffect(()=>{const Qa=Fa.current;Qa.style.width=`calc(${Math.floor(k.width)}px + (var(--tl-padding) * 2))`;Qa.style.height=`calc(${Math.floor(k.height)}px + (var(--tl-padding) * 2))`},[k.width,k.height]);aw.useLayoutEffect(()=>{const Qa=Fa.current;void 0!==F&&(Qa.style.zIndex=F.toString())},[F]);return(0,KF.jsx)("div",kf(me({id:d,ref:Fa,className:`tl-positioned ${ka}`,"aria-label":"container"},a),{children:oa}))}),
LF=uf(V(22)),bB=V(586),MF=Ze(function({shapes:a,hidden:d,bounds:k,rotation:F=0}){const {components:{ContextBar:Y},viewport:{bounds:ka,camera:{point:[oa,Fa],zoom:Qa}}}=nh(),Wa=LF.useRef(null);var eb=xf.getRotatedBounds(k,F);eb=xf.multiplyBounds(eb,Qa);xl(Wa,k,F,10005);if(!Y)throw Error("Expected a ContextBar component.");const jb=xf.translateBounds(eb,[oa*Qa,Fa*Qa]);return(0,bB.jsx)("div",{ref:Wa,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,bB.jsx)(Y,{hidden:d,shapes:a,bounds:k,offsets:{left:jb.minX,right:ka.width-jb.maxX,top:jb.minY,bottom:ka.height-jb.maxY,width:jb.width,height:jb.height},scaledBounds:eb,rotation:F})})}),cB=uf(V(22)),NF=V(586),dB=Ze(function({children:a}){const d=cB.useRef(null),{viewport:k}=nh(),F=d.current,{zoom:Y,point:ka}=k.camera;cB.useEffect(()=>{F&&(F.style.transform=`scale(${Y}) translate3d(${ka[0]}px, ${ka[1]}px, 0)`)},[Y,ka,F]);return(0,NF.jsx)("div",{ref:d,className:"tl-absolute tl-layer",children:a})}),
bw=V(586),eB=Ze(function({shape:a,isHovered:d=!1,isSelected:k=!1,isBinding:F=!1,isEditing:Y=!1,isLocked:ka=!1,meta:oa}){const {bounds:Fa,props:{scale:Qa,rotation:Wa=0},ReactIndicator:eb}=a;return(0,bw.jsx)(Mr,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:Fa,rotation:Wa,scale:Qa,zIndex:Y?1E3:1E4,children:(0,bw.jsx)(Ap,{children:(0,bw.jsx)("g",{className:`tl-indicator-container ${k?"tl-selected":"tl-hovered"} ${ka?"tl-locked":""}`,children:(0,bw.jsx)(eb,{isEditing:Y,isBinding:F,isHovered:d,
isLocked:ka,isSelected:k,isErasing:!1,meta:oa})})})})}),fB=uf(V(22)),cw=V(586),OF=Ze(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:k}},components:{QuickLinks:F}}=nh();var Y=ef();const ka=tm(d);if(!F)throw Error("Expected a QuickLinks component.");Y=50>a.height*k||!Y.selectedShapesArray.includes(d);return(0,cw.jsx)(Mr,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,cw.jsx)(Yo,{children:(0,cw.jsx)("span",kf(me({style:{position:"absolute",top:"100%",
pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},ka),{onPointerDown:oa=>oa.stopPropagation(),children:(0,cw.jsx)(F,{className:"tl-backlinks-count "+(Y?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})}),dw=V(586),PF=Ze(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:k}},components:{BacklinksCount:F}}=nh();var Y=ef();if(!F)throw Error("Expected a BacklinksCount component.");const ka=oa=>oa.stopPropagation();Y=50>
a.height*k||!Y.selectedShapesArray.includes(d)||d.hideSelection;return(0,dw.jsx)(Mr,{bounds:a,className:"tl-backlinks-count-container",children:(0,dw.jsx)(Yo,{children:(0,dw.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:ka,onWheelCapture:ka,onKeyDown:ka,title:"Shape Backlinks",children:(0,dw.jsx)(F,{className:"tl-backlinks-count "+(Y?"tl-backlinks-count-rounded":""),id:d.id,shape:d})})})})}),
QF=uf(V(22)),gB=V(586),RF=Ze(function({bounds:a,hidden:d,shapes:k,rotation:F=0,detail:Y="size"}){const {components:{SelectionDetail:ka},viewport:{camera:{zoom:oa}}}=nh(),Fa=QF.useRef(null),Qa=xf.multiplyBounds(a,oa);xl(Fa,a,F,10003);if(!ka)throw Error("Expected a SelectionDetail component.");return(0,gB.jsx)("div",{ref:Fa,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,gB.jsx)(ka,{shapes:k,bounds:a,
scaledBounds:Qa,zoom:oa,rotation:F,detail:Y})})}),hB=V(586),SF=Ze(function({shape:a,isHovered:d=!1,isSelected:k=!1,isBinding:F=!1,isErasing:Y=!1,isEditing:ka=!1,onEditingEnd:oa,asset:Fa,meta:Qa,zIndex:Wa}){const {bounds:eb,props:{rotation:jb,scale:Mb},ReactComponent:Ub}=a,Ob=ef(),jc=tm(a);var vc=Ob.getParentGroup(a);vc=Ob.selectedIds.has(null==vc?void 0:vc.id);return(0,hB.jsx)(Mr,{"data-shape-id":a.id,"data-html2canvas-ignore":!k&&!vc&&0!==Ob.selectedShapes.size||null,zIndex:Wa,"data-type":"Shape",
bounds:eb,rotation:jb,scale:Mb,children:(0,hB.jsx)(Ub,{meta:Qa,isEditing:ka,isBinding:F,isHovered:d,isSelected:k,isErasing:Y,events:jc,asset:Fa,onEditingEnd:oa})})}),Mt=V(586),iB=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],TF=Ze(function({size:a}){const {viewport:{camera:{point:d,zoom:k}}}=nh();return(0,Mt.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,Mt.jsx)("defs",{children:iB.map(([F,Y,ka],oa)=>{ka=ka*a*k;var Fa=
d[0]*k,Qa=d[1]*k;Fa=0<Fa?Fa%ka:ka+Fa%ka;Qa=0<Qa?Qa%ka:ka+Qa%ka;F=Zl(k,[F,Y],[0,1]);return(0,Mt.jsx)("pattern",{id:`grid-${oa}`,width:ka,height:ka,patternUnits:"userSpaceOnUse",children:!(2<F||.1>F)&&(0,Mt.jsx)("circle",{className:"tl-grid-dot",cx:Fa,cy:Qa,r:1.5,opacity:Math.max(0,Math.min(F,1))})},`grid-pattern-${oa}`)})}),iB.map((F,Y)=>(0,Mt.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${Y})`},`grid-rect-${Y}`))]})}),jB=Ze(function({size:a}){return(0,Mt.jsx)(TF,{size:a})}),kB=V(586),lB=
Ze(function({bounds:a}){const d=Xj("background");return(0,kB.jsx)(Ap,kf(me({"data-html2canvas-ignore":"true"},d),{children:(0,kB.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});V(22);var mB=V(586),nB=Ze(function({scaledBounds:a,shapes:d,detail:k="size",rotation:F=0}){var Y;const ka=1===d.length?F:null!=(Y=a.rotation)?Y:0;return(0,mB.jsx)(Yo,{centered:!0,children:(0,mB.jsx)("div",{className:"tl-bounds-detail",style:{transform:ka<
po||ka>3*po?`rotate(${ka}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+ka}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${je.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===k?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${an.radiansToDegrees(an.clampRadians(F)).toFixed()}\xB0`})})}),Rx=V(586),UF={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",
bottom_left_corner:"tl-cursor-nesw"},ew=Ze(function({cx:a,cy:d,size:k,targetSize:F,corner:Y,isHidden:ka}){const oa=Xj(Y);return(0,Rx.jsxs)("g",kf(me({opacity:ka?0:1},oa),{children:[(0,Rx.jsx)("rect",{className:"tl-transparent "+(ka?"":UF[Y]),"aria-label":`${Y} target`,x:a-1.25*F,y:d-1.25*F,width:2.5*F,height:2.5*F,pointerEvents:ka?"none":"all"}),(0,Rx.jsx)("rect",{className:"tl-corner-handle","aria-label":`${Y} handle`,x:a-k/2,y:d-k/2,width:k,height:k,pointerEvents:"none"})]}))}),VF=V(586),WF={top_edge:"tl-cursor-ns",
right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},fw=Ze(function({x:a,y:d,width:k,height:F,targetSize:Y,edge:ka,disabled:oa,isHidden:Fa}){const Qa=Xj(ka);return(0,VF.jsx)("rect",me({pointerEvents:Fa||oa?"none":"all",className:"tl-transparent tl-edge-handle "+(Fa?"":WF[ka]),"aria-label":`${ka} target`,opacity:Fa?0:1,x:a-Y,y:d-Y,width:Math.max(1,k+2*Y),height:Math.max(1,F+2*Y)},Qa))}),Sx=V(586);Ze(function({cx:a,cy:d,size:k,targetSize:F,isHidden:Y}){const ka=Xj("rotate");
return(0,Sx.jsxs)("g",kf(me({opacity:Y?0:1},ka),{children:[(0,Sx.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:F,pointerEvents:Y?"none":"all"}),(0,Sx.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:k/2,pointerEvents:"none"})]}))});V(22);var oB=V(586),gw=Ze(function({cx:a,cy:d,targetSize:k,corner:F,isHidden:Y}){const ka=Xj(F);return(0,oB.jsx)("g",kf(me({opacity:Y?0:1},ka),{children:(0,oB.jsx)("rect",{className:"tl-transparent",
"aria-label":`${F} target`,x:a-2.5*k,y:d-2.5*k,width:3*k,height:3*k,pointerEvents:Y?"none":"all"})}))}),En=V(586),pB=Ze(function({bounds:a,showResizeHandles:d,showRotateHandles:k,shapes:F}){var Y,ka;const oa=ef();let {width:Fa,height:Qa}=a;var Wa=oa.viewport.camera.zoom;a=8/Wa;Wa=6/Wa;const eb=1===F.length?F[0].canResize:[!0,!0],jb=null!=(ka=null==(Y=oa.editingShape)?void 0:Y.props.borderRadius)?ka:0;return(0,En.jsx)(En.Fragment,{children:0<F.length&&(0,En.jsxs)(Ap,{children:[!oa.editingShape&&(0,En.jsx)("rect",
{className:"tl-bounds-fg",width:Math.max(Fa,1),height:Math.max(Qa,1),rx:jb,ry:jb,pointerEvents:"none"}),(0,En.jsx)(fw,{x:2*Wa,y:0,width:Fa-4*Wa,height:0,targetSize:Wa,edge:"top_edge",disabled:!eb[1],isHidden:!d}),(0,En.jsx)(fw,{x:Fa,y:2*Wa,width:0,height:Qa-4*Wa,targetSize:Wa,edge:"right_edge",disabled:!eb[0],isHidden:!d}),(0,En.jsx)(fw,{x:2*Wa,y:Qa,width:Fa-4*Wa,height:0,targetSize:Wa,edge:"bottom_edge",disabled:!eb[1],isHidden:!d}),(0,En.jsx)(fw,{x:0,y:2*Wa,width:0,height:Qa-4*Wa,targetSize:Wa,
edge:"left_edge",disabled:!eb[0],isHidden:!d}),(0,En.jsx)(gw,{cx:0,cy:0,targetSize:Wa,corner:"top_left_resize_corner",isHidden:!k}),(0,En.jsx)(gw,{cx:Fa+2*Wa,cy:0,targetSize:Wa,corner:"top_right_resize_corner",isHidden:!k}),(0,En.jsx)(gw,{cx:Fa+2*Wa,cy:Qa+2*Wa,targetSize:Wa,corner:"bottom_right_resize_corner",isHidden:!k}),(0,En.jsx)(gw,{cx:0,cy:Qa+2*Wa,targetSize:Wa,corner:"bottom_left_resize_corner",isHidden:!k}),(null==eb?void 0:eb.every(Mb=>Mb))&&(0,En.jsxs)(En.Fragment,{children:[(0,En.jsx)(ew,
{cx:0,cy:0,size:a,targetSize:Wa,corner:"top_left_corner",isHidden:!d}),(0,En.jsx)(ew,{cx:Fa,cy:0,size:a,targetSize:Wa,corner:"top_right_corner",isHidden:!d}),(0,En.jsx)(ew,{cx:Fa,cy:Qa,size:a,targetSize:Wa,corner:"bottom_right_corner",isHidden:!d}),(0,En.jsx)(ew,{cx:0,cy:Qa,size:a,targetSize:Wa,corner:"bottom_left_corner",isHidden:!d})]})]})})}),Tx=V(586),qB=Ze(function({bounds:a}){return(0,Tx.jsx)(Mr,{bounds:a,zIndex:10001,children:(0,Tx.jsx)(Ap,{children:(0,Tx.jsx)("rect",{className:"tl-brush",
x:0,y:0,width:a.width,height:a.height})})})}),rB=V(586);Ze(function(){return(0,rB.jsx)(rB.Fragment,{})});var Ux=V(586),sB=Ze(function({shape:a,handle:d,id:k}){a=xn(a,k);const [F,Y]=d.point;return(0,Ux.jsxs)("g",kf(me({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${F}, ${Y})`,children:[(0,Ux.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,Ux.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),tB=uf(V(22)),Vx=V(586),Wx=Ze(function({direction:a}){const {viewport:{bounds:d}}=
nh(),k=tB.useRef(null);tB.useLayoutEffect(()=>{const F=k.current;if(F){var Y=[d.width/2,d.height/2],ka=xf.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[oa,Fa]]of ka)ka=t(Y,a,oa,Fa),ka.didIntersect&&(ka=ka.points[0],F.style.transform=`translate(${ka[0]-6}px,${ka[1]-6}px) rotate(${je.toAngle(a)}rad)`)}},[a,d]);return(0,Vx.jsx)("div",{ref:k,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,Vx.jsx)("svg",{height:12,width:12,children:(0,Vx.jsx)("polygon",
{points:"0,0 12,6 0,12"})})})}),Fl=V(586),XF=Ze(function({id:a,className:d,brush:k,shapes:F,assets:Y,bindingShapes:ka,editingShape:oa,hoveredShape:Fa,hoveredGroup:Qa,selectionBounds:Wa,selectedShapes:eb,erasingShapes:jb,selectionDirectionHint:Mb,cursor:Ub="default",cursorRotation:Ob=0,selectionRotation:jc=0,showSelection:vc=!0,showHandles:Zb=!0,showSelectionRotation:oc=!1,showResizeHandles:lc=!0,showRotateHandles:Ic=!0,showSelectionDetail:Lc=!0,showContextBar:wd=!0,showGrid:Td=!0,gridSize:We=8,onEditingEnd:ne=
QE,theme:Ke=Tq,children:Bf}){var Se;const Xe=Ou.useRef(null),{viewport:Xd,components:nd,meta:Yd}=nh(),ld=ef(),Hd=Ou.useCallback(Cf=>{ld.inputs.updateContainerOffset([Cf.minX,Cf.minY])},[]);tk(Ke,a);en(Xe);Pk(Xe,Xd,Hd);zj(Xe);kk();yn(Xe,Ub,Ob);Ck(Xe);Bn(Xe);a=ug();const Oe=(Ub=1===(null==eb?void 0:eb.length)&&eb[0])&&"handles"in Ub.props?null==eb?void 0:eb[0]:void 0,mf=Ou.useMemo(()=>new Set(eb||[]),[eb]),Pf=Ou.useMemo(()=>new Set(jb||[]),[jb]);Ub=1===(null==eb?void 0:eb.length)?eb[0]:void 0;Qa=[...(new Set([Qa,
Fa]))].filter(ig);return(0,Fl.jsxs)("div",{ref:Xe,className:`tl-container ${null!=d?d:""}`,children:[(0,Fl.jsxs)("div",kf(me({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[Td&&nd.Grid&&(0,Fl.jsx)(nd.Grid,{size:We}),(0,Fl.jsxs)(dB,{children:[nd.SelectionBackground&&eb&&Wa&&vc&&(0,Fl.jsx)(Mr,{"data-type":"SelectionBackground",bounds:Wa,zIndex:2,"data-html2canvas-ignore":"true",children:(0,Fl.jsx)(nd.SelectionBackground,{shapes:eb,bounds:Wa,showResizeHandles:lc,showRotateHandles:Ic})}),
F&&F.map((Cf,dg)=>(0,Fl.jsx)(SF,{shape:Cf,asset:Y&&Cf.props.assetId?Y[Cf.props.assetId]:void 0,isEditing:Cf===oa,isHovered:Cf===Fa,isBinding:null==ka?void 0:ka.includes(Cf),isSelected:mf.has(Cf),isErasing:Pf.has(Cf),meta:Yd,zIndex:1E3+dg,onEditingEnd:ne},"shape_"+Cf.id)),!ld.isIn("select.pinching")&&(null==eb?void 0:eb.map(Cf=>(0,Fl.jsx)(eB,{shape:Cf,isEditing:Cf===oa,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:Cf.props.isLocked},"selected_indicator_"+Cf.id))),Qa.map(Cf=>Cf!==oa&&(0,Fl.jsx)(eB,
{shape:Cf},"hovered_indicator_"+Cf.id)),Ub&&nd.BacklinksCount&&(0,Fl.jsx)(PF,{hidden:!1,bounds:Ub.bounds,shape:Ub}),Fa&&Fa!==Ub&&nd.QuickLinks&&(0,Fl.jsx)(OF,{hidden:!1,bounds:Fa.bounds,shape:Fa}),k&&nd.Brush&&(0,Fl.jsx)(nd.Brush,{bounds:k}),eb&&Wa&&(0,Fl.jsxs)(Fl.Fragment,{children:[vc&&nd.SelectionForeground&&(0,Fl.jsx)(Mr,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:Wa,zIndex:oa&&eb.includes(oa)?1002:10002,children:(0,Fl.jsx)(nd.SelectionForeground,{shapes:eb.filter(Cf=>
!Cf.props.isLocked),bounds:Wa,showResizeHandles:lc,showRotateHandles:Ic})}),Zb&&Oe&&nd.Handle&&(0,Fl.jsx)(Mr,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:Wa,zIndex:10003,children:(0,Fl.jsx)(Ap,{children:Object.entries(null!=(Se=Oe.props.handles)?Se:{}).map(([Cf,dg])=>Ou.createElement(nd.Handle,{key:`${dg.id}_handle_${dg.id}`,shape:Oe,handle:dg,id:Cf}))})}),eb&&nd.SelectionDetail&&(0,Fl.jsx)(RF,{"data-html2canvas-ignore":"true",shapes:eb,bounds:Wa,detail:oc?"rotation":
"size",hidden:!Lc,rotation:jc},"detail"+eb.map(Cf=>Cf.id).join(""))]})]}),Mb&&Wa&&eb&&(0,Fl.jsx)(Wx,{direction:Mb,bounds:Wa,shapes:eb}),(0,Fl.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,Fl.jsx)(dB,{children:eb&&Wa&&(0,Fl.jsx)(Fl.Fragment,{children:eb&&nd.ContextBar&&(0,Fl.jsx)(MF,{shapes:eb.filter(Cf=>!Cf.props.isLocked),hidden:!wd,bounds:Ub?Ub.bounds:Wa,rotation:Ub?Ub.props.rotation:0},"context"+eb.map(Cf=>Cf.id).join(""))})}),Bf]})}),uB=uf(V(22)),vB=uf(V(22)),
wB=V(586);Ze(function({children:a}){const d=vB.useRef(null),{viewport:k}=nh();vB.useEffect(()=>Kd(()=>{const F=d.current;if(F){var {zoom:Y,point:ka}=k.camera;F.style.transform=`scale(${Y}) translateX(${ka[0]}px) translateY(${ka[1]}px)`}}),[]);return(0,wB.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,wB.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});var YF=V(586),ZF=Ze(function(a){const d=ao(a),k=uk(a.id);Rk(d,a);fl(d,a);return(0,YF.jsx)(k.Provider,{value:d,
children:a.children})}),$F=V(586),aG=Ze(function({id:a="noid",viewport:d,inputs:k,callbacks:F=Tq,meta:Y=Tq,components:ka=Tq,children:oa}){const [Fa,Qa]=uB.useState(()=>{const {Brush:eb,ContextBar:jb,DirectionIndicator:Mb,Grid:Ub,Handle:Ob,SelectionBackground:jc,SelectionDetail:vc,SelectionForeground:Zb}=ka,oc=Jf(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:a,viewport:d,inputs:k,callbacks:F,meta:Y,components:kf(me({},
oc),{Brush:null===eb?void 0:qB,ContextBar:jb,DirectionIndicator:null===Mb?void 0:Wx,Grid:null===Ub?void 0:jB,Handle:null===Ob?void 0:sB,SelectionBackground:null===jc?void 0:lB,SelectionDetail:null===vc?void 0:nB,SelectionForeground:null===Zb?void 0:pB})}});uB.useLayoutEffect(()=>{const {Brush:eb,ContextBar:jb,DirectionIndicator:Mb,Grid:Ub,Handle:Ob,SelectionBackground:jc,SelectionDetail:vc,SelectionForeground:Zb}=ka,oc=Jf(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));
return Kd(()=>{Qa({id:a,viewport:d,inputs:k,callbacks:F,meta:Y,components:kf(me({},oc),{Brush:null===eb?void 0:qB,ContextBar:jb,DirectionIndicator:null===Mb?void 0:Wx,Grid:null===Ub?void 0:jB,Handle:null===Ob?void 0:sB,SelectionBackground:null===jc?void 0:lB,SelectionDetail:null===vc?void 0:nB,SelectionForeground:null===Zb?void 0:pB})})})},[]);const Wa=dn(a);return(0,$F.jsx)(Wa.Provider,{value:Fa,children:oa})}),xB=V(586),bG=V(586),cG=Ze(function(a){const d=ef();return(0,bG.jsx)(Gg,me({viewport:d.viewport,
inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,
showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},a))});V(586);var Nt=uf(V(22)),Ps=uf(V(22)),dG=V(586),eG="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),
Ih=a=>{var {name:d,className:k}=a;a=Jf(a,["name","className"]);const F=eG.includes(d)?"tie tie-":"ti ti-";return(0,dG.jsx)("i",me({className:[F+d,k].join(" ")},a))},wh=V(22),fG=V(22),Qs=V(22),Lo=V(22),Xx=V(22),gG=V(31),Un=V(22),Bq=(0,Un.forwardRef)((a,d)=>{var {children:k}=a;a=Jf(a,["children"]);const F=Un.Children.toArray(k),Y=F.find(zg);if(Y){const ka=Y.props.children;k=F.map(oa=>oa===Y?1<Un.Children.count(ka)?Un.Children.only(null):(0,Un.isValidElement)(ka)?ka.props.children:null:oa);return(0,Un.createElement)(Yx,
$e({},a,{ref:d}),(0,Un.isValidElement)(ka)?(0,Un.cloneElement)(ka,void 0,k):null)}return(0,Un.createElement)(Yx,$e({},a,{ref:d}),k)});Bq.displayName="Slot";var Yx=(0,Un.forwardRef)((a,d)=>{const {children:k}=a;a=Jf(a,["children"]);return(0,Un.isValidElement)(k)?(0,Un.cloneElement)(k,kf(me({},Lj(a,k.props)),{ref:Pg(d,k.ref)})):1<Un.Children.count(k)?Un.Children.only(null):null});Yx.displayName="SlotClone";var yB=({children:a})=>(0,Un.createElement)(Un.Fragment,null,a),Vl="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,
d)=>{const k=(0,Xx.forwardRef)((F,Y)=>{var {asChild:ka}=F;F=Jf(F,["asChild"]);ka=ka?Bq:d;(0,Xx.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Xx.createElement)(ka,$e({},F,{ref:Y}))});k.displayName=`Primitive.${d}`;return kf(me({},a),{[d]:k})},{}),Zx=V(22),hG=V(22),zB,iG=(0,Lo.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$x=(0,Lo.forwardRef)((a,d)=>{var k;const {disableOutsidePointerEvents:F=!1,onEscapeKeyDown:Y,onPointerDownOutside:ka,
onFocusOutside:oa,onInteractOutside:Fa,onDismiss:Qa}=a,Wa=Jf(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),eb=(0,Lo.useContext)(iG),[jb,Mb]=(0,Lo.useState)(null),Ub=null!==(k=null===jb||void 0===jb?void 0:jb.ownerDocument)&&void 0!==k?k:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Ob]=(0,Lo.useState)({});d=ih(d,lc=>Mb(lc));k=Array.from(eb.layers);var [jc]=[...eb.layersWithOutsidePointerEventsDisabled].slice(-1);
jc=k.indexOf(jc);const vc=jb?k.indexOf(jb):-1;k=0<eb.layersWithOutsidePointerEventsDisabled.size;const Zb=vc>=jc;jc=Yj(lc=>{const Ic=lc.target,Lc=[...eb.branches].some(wd=>wd.contains(Ic));Zb&&!Lc&&(null===ka||void 0===ka||ka(lc),null===Fa||void 0===Fa||Fa(lc),lc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Ub);const oc=am(lc=>{const Ic=lc.target;[...eb.branches].some(Lc=>Lc.contains(Ic))||(null===oa||void 0===oa||oa(lc),null===Fa||void 0===Fa||Fa(lc),lc.defaultPrevented||null===Qa||void 0===
Qa||Qa())},Ub);Fk(lc=>{vc===eb.layers.size-1&&(null===Y||void 0===Y||Y(lc),!lc.defaultPrevented&&Qa&&(lc.preventDefault(),Qa()))},Ub);(0,Lo.useEffect)(()=>{if(jb)return F&&(0===eb.layersWithOutsidePointerEventsDisabled.size&&(zB=Ub.body.style.pointerEvents,Ub.body.style.pointerEvents="none"),eb.layersWithOutsidePointerEventsDisabled.add(jb)),eb.layers.add(jb),el(),()=>{F&&1===eb.layersWithOutsidePointerEventsDisabled.size&&(Ub.body.style.pointerEvents=zB)}},[jb,Ub,F,eb]);(0,Lo.useEffect)(()=>()=>
{jb&&(eb.layers.delete(jb),eb.layersWithOutsidePointerEventsDisabled.delete(jb),el())},[jb,eb]);(0,Lo.useEffect)(()=>{const lc=()=>Ob({});document.addEventListener("dismissableLayer.update",lc);return()=>document.removeEventListener("dismissableLayer.update",lc)},[]);return(0,Lo.createElement)(Vl.div,$e({},Wa,{ref:d,style:me({pointerEvents:k?Zb?"auto":"none":void 0},a.style),onFocusCapture:Wf(a.onFocusCapture,oc.onFocusCapture),onBlurCapture:Wf(a.onBlurCapture,oc.onBlurCapture),onPointerDownCapture:Wf(a.onPointerDownCapture,
jc.onPointerDownCapture)}))}),AB=uf(V(22)),jG=V(22),Fn=(null===globalThis||void 0===globalThis?0:globalThis.document)?jG.useLayoutEffect:()=>{},kG=AB["useId".toString()]||(()=>{}),lG=0,Wm=V(22),mG=(a,d,k)=>vi(void 0,null,function*(){const {placement:F="bottom",strategy:Y="absolute",middleware:ka=[],platform:oa}=k,Fa=yield null==oa.isRTL?void 0:oa.isRTL(d);let Qa=yield oa.getElementRects({reference:a,floating:d,strategy:Y}),{x:Wa,y:eb}=yl(Qa,F,Fa),jb=F,Mb={},Ub=0;for(let Ob=0;Ob<ka.length;Ob++){const {name:jc,
fn:vc}=ka[Ob],{x:Zb,y:oc,data:lc,reset:Ic}=yield vc({x:Wa,y:eb,initialPlacement:F,placement:jb,strategy:Y,middlewareData:Mb,rects:Qa,platform:oa,elements:{reference:a,floating:d}});Wa=null!=Zb?Zb:Wa;eb=null!=oc?oc:eb;Mb=kf(me({},Mb),{[jc]:me(me({},Mb[jc]),lc)});Ic&&50>=Ub&&(Ub++,"object"==typeof Ic&&(Ic.placement&&(jb=Ic.placement),Ic.rects&&(Qa=!0===Ic.rects?yield oa.getElementRects({reference:a,floating:d,strategy:Y}):Ic.rects),{x:Wa,y:eb}=yl(Qa,jb,Fa)),Ob=-1)}return{x:Wa,y:eb,placement:jb,strategy:Y,
middlewareData:Mb}}),ay=Math.min,ar=Math.max,BB=a=>({name:"arrow",options:a,fn(d){return vi(this,null,function*(){const {element:k,padding:F=0}=null!=a?a:{},{x:Y,y:ka,placement:oa,rects:Fa,platform:Qa}=d;if(null==k)return{};const Wa=co(F),eb={x:Y,y:ka},jb=hl(oa),Mb=oa.split("-")[1],Ub=Gk(jb);var Ob=yield Qa.getDimensions(k);const jc="y"===jb?"top":"left",vc="y"===jb?"bottom":"right";var Zb=Fa.reference[Ub]+Fa.reference[jb]-eb[jb]-Fa.floating[Ub];const oc=eb[jb]-Fa.reference[jb];var lc=yield null==
Qa.getOffsetParent?void 0:Qa.getOffsetParent(k);let Ic=lc?"y"===jb?lc.clientHeight||0:lc.clientWidth||0:0;0===Ic&&(Ic=Fa.floating[Ub]);lc=Wa[jc];const Lc=Ic-Ob[Ub]-Wa[vc];Ob=Ic/2-Ob[Ub]/2+(Zb/2-oc/2);Zb=ar(lc,ay(Ob,Lc));return{[jb]:eb[jb]-(0<("start"===Mb?Wa[jc]:Wa[vc])&&Ob!==Zb&&Fa.reference[Ub]<=Fa.floating[Ub]?Ob<lc?lc-Ob:Lc-Ob:0),data:{[jb]:Zb,centerOffset:Ob-Zb}}})}}),nG={left:"right",right:"left",bottom:"top",top:"bottom"},oG={start:"end",end:"start"},CB=["top","right","bottom","left"];CB.reduce((a,
d)=>a.concat(d,d+"-start",d+"-end"),[]);var DB=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return vi(this,null,function*(){var k;const {placement:F,middlewareData:Y,rects:ka,initialPlacement:oa,platform:Fa,elements:Qa}=d;var Wa=a;const {mainAxis:eb=!0,crossAxis:jb=!0,fallbackPlacements:Mb,fallbackStrategy:Ub="bestFit",flipAlignment:Ob=!0}=Wa;Wa=Jf(Wa,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const jc=ej(F);var vc=Mb||(jc!==oa&&Ob?function(wd){const Td=
hn(wd);return[Hk(wd),Td,Hk(Td)]}(oa):[hn(oa)]);vc=[oa,...vc];const Zb=yield qm(d,Wa),oc=[];Wa=(null==(k=Y.flip)?void 0:k.overflows)||[];if(eb&&oc.push(Zb[jc]),jb){const {main:wd,cross:Td}=cm(F,ka,yield null==Fa.isRTL?void 0:Fa.isRTL(Qa.floating));oc.push(Zb[wd],Zb[Td])}if(Wa=[...Wa,{placement:F,overflows:oc}],!oc.every(wd=>0>=wd)){var lc,Ic;k=(null!=(lc=null==(Ic=Y.flip)?void 0:Ic.index)?lc:0)+1;if(lc=vc[k])return{data:{index:k,overflows:Wa},reset:{placement:lc}};lc="bottom";switch(Ub){case "bestFit":var Lc;
(Ic=null==(Lc=Wa.map(wd=>[wd,wd.overflows.filter(Td=>0<Td).reduce((Td,We)=>Td+We,0)]).sort((wd,Td)=>wd[1]-Td[1])[0])?void 0:Lc[0].placement)&&(lc=Ic);break;case "initialPlacement":lc=oa}if(F!==lc)return{reset:{placement:lc}}}return{}})}}},EB=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,k=Jf(a,["strategy"]);return{name:"hide",fn(F){return vi(this,null,function*(){var {rects:Y}=F;switch(d){case "referenceHidden":return Y=Tl(yield qm(F,kf(me({},k),{elementContext:"reference"})),
Y.reference),{data:{referenceHiddenOffsets:Y,referenceHidden:kl(Y)}};case "escaped":return Y=Tl(yield qm(F,kf(me({},k),{altBoundary:!0})),Y.floating),{data:{escapedOffsets:Y,escaped:kl(Y)}};default:return{}}})}}},FB=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return vi(this,null,function*(){const {x:k,y:F}=d,Y=yield function(ka,oa){return vi(this,null,function*(){const {placement:Fa,platform:Qa,elements:Wa}=ka;var eb=yield null==Qa.isRTL?void 0:Qa.isRTL(Wa.floating),jb=ej(Fa);
const Mb=Fa.split("-")[1],Ub="x"===hl(Fa);jb=["left","top"].includes(jb)?-1:1;eb=eb&&Ub?-1:1;const Ob="function"==typeof oa?oa(ka):oa;let {mainAxis:jc,crossAxis:vc,alignmentAxis:Zb}="number"==typeof Ob?{mainAxis:Ob,crossAxis:0,alignmentAxis:null}:me({mainAxis:0,crossAxis:0,alignmentAxis:null},Ob);return Mb&&"number"==typeof Zb&&(vc="end"===Mb?-1*Zb:Zb),Ub?{x:vc*eb,y:jc*jb}:{x:jc*jb,y:vc*eb}})}(d,a);return{x:k+Y.x,y:F+Y.y,data:Y}})}}},GB=function(a){return void 0===a&&(a={}),{name:"shift",options:a,
fn(d){return vi(this,null,function*(){const {x:k,y:F,placement:Y}=d;var ka=a;const {mainAxis:oa=!0,crossAxis:Fa=!1,limiter:Qa={fn:Ub=>{let {x:Ob,y:jc}=Ub;return{x:Ob,y:jc}}}}=ka;var Wa=Jf(ka,["mainAxis","crossAxis","limiter"]);ka={x:k,y:F};Wa=yield qm(d,Wa);const eb=hl(ej(Y)),jb="x"===eb?"y":"x";let Mb=ka[eb];ka=ka[jb];oa&&(Mb=ar(Mb+Wa["y"===eb?"top":"left"],ay(Mb,Mb-Wa["y"===eb?"bottom":"right"])));Fa&&(ka=ar(ka+Wa["y"===jb?"top":"left"],ay(ka,ka-Wa["y"===jb?"bottom":"right"])));ka=Qa.fn(kf(me({},
d),{[eb]:Mb,[jb]:ka}));return kf(me({},ka),{data:{x:ka.x-k,y:ka.y-F}})})}}},HB=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:k,y:F,placement:Y,rects:ka,middlewareData:oa}=d,{offset:Fa=0,mainAxis:Qa=!0,crossAxis:Wa=!0}=a;var eb={x:k,y:F};d=hl(Y);const jb="x"===d?"y":"x";let Mb=eb[d];eb=eb[jb];var Ub="function"==typeof Fa?Fa(kf(me({},ka),{placement:Y})):Fa;Ub="number"==typeof Ub?{mainAxis:Ub,crossAxis:0}:me({mainAxis:0,crossAxis:0},Ub);if(Qa){var Ob="y"===d?"height":"width",jc=ka.reference[d]-
ka.floating[Ob]+Ub.mainAxis;Ob=ka.reference[d]+ka.reference[Ob]-Ub.mainAxis;Mb<jc?Mb=jc:Mb>Ob&&(Mb=Ob)}if(Wa){var vc,Zb,oc,lc;const Ic="y"===d?"width":"height";jc=["top","left"].includes(ej(Y));Ob=ka.reference[jb]-ka.floating[Ic]+(jc&&null!=(vc=null==(Zb=oa.offset)?void 0:Zb[jb])?vc:0)+(jc?0:Ub.crossAxis);vc=ka.reference[jb]+ka.reference[Ic]+(jc?0:null!=(oc=null==(lc=oa.offset)?void 0:lc[jb])?oc:0)-(jc?Ub.crossAxis:0);eb<Ob?eb=Ob:eb>vc&&(eb=vc)}return{[d]:Mb,[jb]:eb}}}},pG=function(a){return void 0===
a&&(a={}),{name:"size",options:a,fn(d){return vi(this,null,function*(){const {placement:k,rects:F,platform:Y,elements:ka}=d;var oa=a,{apply:Fa}=oa;oa=Jf(oa,["apply"]);oa=yield qm(d,oa);var Qa=ej(k),Wa=k.split("-")[1],eb,jb;"top"===Qa||"bottom"===Qa?(eb=Qa,jb=Wa===((yield null==Y.isRTL?void 0:Y.isRTL(ka.floating))?"start":"end")?"left":"right"):(jb=Qa,eb="end"===Wa?"top":"bottom");Qa=ar(oa.left,0);Wa=ar(oa.right,0);const Mb=ar(oa.top,0),Ub=ar(oa.bottom,0);jb={availableHeight:F.floating.height-(["left",
"right"].includes(k)?2*(0!==Mb||0!==Ub?Mb+Ub:ar(oa.top,oa.bottom)):oa[eb]),availableWidth:F.floating.width-(["top","bottom"].includes(k)?2*(0!==Qa||0!==Wa?Qa+Wa:ar(oa.left,oa.right)):oa[jb])};eb=yield Y.getDimensions(ka.floating);null==Fa||Fa(me(me({},d),jb));Fa=yield Y.getDimensions(ka.floating);return eb.width!==Fa.width||eb.height!==Fa.height?{reset:{rects:!0}}:{}})}}},IB=Math.min,Pu=Math.max,hw=Math.round,qG={getClippingRect:function(a){let {element:d,boundary:k,rootBoundary:F,strategy:Y}=a;a=
[...("clippingAncestors"===k?pm(d):[].concat(k)),F];a=a.reduce((ka,oa)=>{oa=ti(d,oa,Y);return ka.top=Pu(oa.top,ka.top),ka.right=IB(oa.right,ka.right),ka.bottom=IB(oa.bottom,ka.bottom),ka.left=Pu(oa.left,ka.left),ka},ti(d,a[0],Y));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,offsetParent:k,strategy:F}=a;var Y=Al(k);const ka=nk(k);if(k===ka)return d;a={scrollLeft:0,scrollTop:0};var oa=0,Fa=0;(Y||!Y&&
"fixed"!==F)&&(("body"!==Rj(k)||rj(ka))&&(a=xk(k)),Al(k))&&(Y=Zj(k,!0),oa=Y.x+k.clientLeft,Fa=Y.y+k.clientTop);return kf(me({},d),{x:d.x-a.scrollLeft+oa,y:d.y-a.scrollTop+Fa})},isElement:Tk,getDimensions:Nk,getOffsetParent:tj,getDocumentElement:nk,getElementRects:a=>{let {reference:d,floating:k,strategy:F}=a;a=tj(k);var Y=Al(a);const ka=nk(a);var oa;if(oa=Y)oa=Zj(a),oa=hw(oa.width)!==a.offsetWidth||hw(oa.height)!==a.offsetHeight;oa=Zj(d,oa,"fixed"===F);let Fa={scrollLeft:0,scrollTop:0};var Qa=0,Wa=
0;if(Y||!Y&&"fixed"!==F)(("body"!==Rj(a)||rj(ka))&&(Fa=xk(a)),Al(a))?(Y=Zj(a,!0),Qa=Y.x+a.clientLeft,Wa=Y.y+a.clientTop):ka&&(Qa=ok(ka));return{reference:{x:oa.left+Fa.scrollLeft-Qa,y:oa.top+Fa.scrollTop-Wa,width:oa.width,height:oa.height},floating:kf(me({},Nk(k)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===em(a).direction},rG=(a,d,k)=>mG(a,d,me({platform:qG},k)),Zo=uf(V(22),1),JB=V(22),sG=uf(V(31),1),by="undefined"!==typeof document?JB.useLayoutEffect:JB.useEffect,
KB=a=>{const {element:d,padding:k}=a;return{name:"arrow",options:a,fn(F){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=d.current)return BB({element:d.current,padding:k}).fn(F)}else if(d)return BB({element:d,padding:k}).fn(F);return{}}}},cy=V(22),tG=(0,cy.forwardRef)((a,d)=>{const {children:k,width:F=10,height:Y=5}=a,ka=Jf(a,["children","width","height"]);return(0,cy.createElement)(Vl.svg,$e({},ka,{ref:d,width:F,height:Y,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?k:
(0,cy.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),uG=V(22),[dy,Ot]=mk("Popper"),[vG,LB]=dy("Popper"),ey=(0,Wm.forwardRef)((a,d)=>{const {__scopePopper:k,virtualRef:F}=a;a=Jf(a,["__scopePopper","virtualRef"]);const Y=LB("PopperAnchor",k),ka=(0,Wm.useRef)(null);d=ih(d,ka);(0,Wm.useEffect)(()=>{Y.onAnchorChange((null===F||void 0===F?void 0:F.current)||ka.current)});return F?null:(0,Wm.createElement)(Vl.div,$e({},a,{ref:d}))}),[wG,xG]=dy("PopperContent"),[yG,zG]=dy("PopperContent",{hasParent:!1,
positionUpdateFns:new Set}),fy=(0,Wm.forwardRef)((a,d)=>{var k,F,Y,ka,oa,Fa,Qa,Wa;const {__scopePopper:eb,side:jb="bottom",sideOffset:Mb=0,align:Ub="center",alignOffset:Ob=0,arrowPadding:jc=0,collisionBoundary:vc=[],collisionPadding:Zb=0,sticky:oc="partial",hideWhenDetached:lc=!1,avoidCollisions:Ic=!0}=a;a=Jf(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Lc=LB("PopperContent",eb),[wd,Td]=
(0,Wm.useState)(null);d=ih(d,Ll=>Td(Ll));const [We,ne]=(0,Wm.useState)(null);var Ke=Eh(We),Bf=null!==(k=null===Ke||void 0===Ke?void 0:Ke.width)&&void 0!==k?k:0;k=null!==(F=null===Ke||void 0===Ke?void 0:Ke.height)&&void 0!==F?F:0;F=jb+("center"!==Ub?"-"+Ub:"");Ke="number"===typeof Zb?Zb:me({top:0,right:0,bottom:0,left:0},Zb);const Se=Array.isArray(vc)?vc:[vc],Xe=0<Se.length;Ke={padding:Ke,boundary:Se.filter(Cg),altBoundary:Xe};const {reference:Xd,floating:nd,strategy:Yd,x:ld,y:Hd,placement:Oe,middlewareData:mf,
update:Pf}=lg({strategy:"fixed",placement:F,whileElementsMounted:Ri,middleware:[FB({mainAxis:Mb+k,alignmentAxis:Ob}),Ic?GB(me({mainAxis:!0,crossAxis:!1,limiter:"partial"===oc?HB():void 0},Ke)):void 0,We?KB({element:We,padding:jc}):void 0,Ic?DB(me({},Ke)):void 0,BG({arrowWidth:Bf,arrowHeight:k}),lc?EB({strategy:"referenceHidden"}):void 0].filter(ch)});Fn(()=>{Xd(Lc.anchor)},[Xd,Lc.anchor]);const Cf=null!==ld&&null!==Hd,[dg,fh]=yi(Oe);Bf=null===(Y=mf.arrow)||void 0===Y?void 0:Y.x;Y=null===(ka=mf.arrow)||
void 0===ka?void 0:ka.y;ka=0!==(null===(oa=mf.arrow)||void 0===oa?void 0:oa.centerOffset);const [Lf,ah]=(0,Wm.useState)();Fn(()=>{wd&&ah(window.getComputedStyle(wd).zIndex)},[wd]);const {hasParent:Ch,positionUpdateFns:Hj}=zG("PopperContent",eb),tl=!Ch;(0,Wm.useLayoutEffect)(()=>{if(!tl)return Hj.add(Pf),()=>{Hj.delete(Pf)}},[tl,Hj,Pf]);(0,Wm.useLayoutEffect)(()=>{tl&&Cf&&Array.from(Hj).reverse().forEach(Ll=>requestAnimationFrame(Ll))},[tl,Cf,Hj]);oa=kf(me({"data-side":dg,"data-align":fh},a),{ref:d,
style:kf(me({},a.style),{animation:Cf?void 0:"none",opacity:null!==(Fa=mf.hide)&&void 0!==Fa&&Fa.referenceHidden?0:void 0})});return(0,Wm.createElement)("div",{ref:nd,"data-radix-popper-content-wrapper":"",style:{position:Yd,left:0,top:0,transform:Cf?`translate3d(${Math.round(ld)}px, ${Math.round(Hd)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Lf,["--radix-popper-transform-origin"]:[null===(Qa=mf.transformOrigin)||void 0===Qa?void 0:Qa.x,null===(Wa=mf.transformOrigin)||void 0===
Wa?void 0:Wa.y].join(" ")}},(0,Wm.createElement)(wG,{scope:eb,placedSide:dg,onArrowChange:ne,arrowX:Bf,arrowY:Y,shouldHideArrow:ka},tl?(0,Wm.createElement)(yG,{scope:eb,hasParent:!0,positionUpdateFns:Hj},(0,Wm.createElement)(Vl.div,oa)):(0,Wm.createElement)(Vl.div,oa)))}),AG={top:"bottom",right:"left",bottom:"top",left:"right"},MB=(0,Wm.forwardRef)(function(a,d){var {__scopePopper:k}=a;a=Jf(a,["__scopePopper"]);k=xG("PopperArrow",k);return(0,Wm.createElement)("span",{ref:k.onArrowChange,style:{position:"absolute",
left:k.arrowX,top:k.arrowY,[AG[k.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[k.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[k.placedSide],visibility:k.shouldHideArrow?"hidden":void 0}},(0,Wm.createElement)(tG,$e({},a,{ref:d,style:kf(me({},a.style),{display:"block"})})))}),BG=a=>({name:"transformOrigin",options:a,fn(d){var k,
F,Y,ka,oa;const {placement:Fa,rects:Qa,middlewareData:Wa}=d,eb=(d=0!==(null===(k=Wa.arrow)||void 0===k?void 0:k.centerOffset))?0:a.arrowWidth;k=d?0:a.arrowHeight;const [jb,Mb]=yi(Fa),Ub={start:"0%",center:"50%",end:"100%"}[Mb],Ob=(null!==(F=null===(Y=Wa.arrow)||void 0===Y?void 0:Y.x)&&void 0!==F?F:0)+eb/2;F=(null!==(ka=null===(oa=Wa.arrow)||void 0===oa?void 0:oa.y)&&void 0!==ka?ka:0)+k/2;oa=ka="";"bottom"===jb?(ka=d?Ub:`${Ob}px`,oa=`${-k}px`):"top"===jb?(ka=d?Ub:`${Ob}px`,oa=`${Qa.floating.height+
k}px`):"right"===jb?(ka=`${-k}px`,oa=d?Ub:`${F}px`):"left"===jb&&(ka=`${Qa.floating.width+k}px`,oa=d?Ub:`${F}px`);return{data:{x:ka,y:oa}}}}),gy=a=>{const {__scopePopper:d,children:k}=a,[F,Y]=(0,Wm.useState)(null);return(0,Wm.createElement)(vG,{scope:d,anchor:F,onAnchorChange:Y},k)},NB=V(22),CG=uf(V(31)),DG=(0,NB.forwardRef)((a,d)=>{var k;const {container:F=null===globalThis||void 0===globalThis?void 0:null===(k=globalThis.document)||void 0===k?void 0:k.body}=a;a=Jf(a,["container"]);return F?CG.default.createPortal((0,NB.createElement)(Vl.div,
$e({},a,{ref:d})),F):null}),br=V(22),EG=V(31),Qu=a=>{const {present:d,children:k}=a;a=Ig(d);const F="function"===typeof k?k({present:a.isPresent}):br.Children.only(k),Y=ih(a.ref,F.ref);return"function"===typeof k||a.isPresent?(0,br.cloneElement)(F,{ref:Y}):null};Qu.displayName="Presence";var iw=V(22),OB=V(22),FG=(0,OB.forwardRef)((a,d)=>(0,OB.createElement)(Vl.span,$e({},a,{ref:d,style:me({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",
whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[jw]=mk("Tooltip",[Ot]),kw=Ot(),[GG,hy]=jw("TooltipProvider"),[HG,Ru]=jw("Tooltip"),IG=(0,wh.forwardRef)((a,d)=>{var {__scopeTooltip:k}=a;const F=Jf(a,["__scopeTooltip"]),Y=Ru("TooltipTrigger",k),ka=hy("TooltipTrigger",k);k=kw(k);const oa=(0,wh.useRef)(null);d=ih(d,oa,Y.onTriggerChange);const Fa=(0,wh.useRef)(!1),Qa=(0,wh.useRef)(!1),Wa=(0,wh.useCallback)(()=>Fa.current=!1,[]);(0,wh.useEffect)(()=>()=>document.removeEventListener("pointerup",Wa),
[Wa]);return(0,wh.createElement)(ey,$e({asChild:!0},k),(0,wh.createElement)(Vl.button,$e({"aria-describedby":Y.open?Y.contentId:void 0,"data-state":Y.stateAttribute},F,{ref:d,onPointerMove:Wf(a.onPointerMove,eb=>{"touch"===eb.pointerType||Qa.current||ka.isPointerInTransitRef.current||(Y.onTriggerEnter(),Qa.current=!0)}),onPointerLeave:Wf(a.onPointerLeave,()=>{Y.onTriggerLeave();Qa.current=!1}),onPointerDown:Wf(a.onPointerDown,()=>{Fa.current=!0;document.addEventListener("pointerup",Wa,{once:!0})}),
onFocus:Wf(a.onFocus,()=>{if(!Fa.current)Y.onOpen()}),onBlur:Wf(a.onBlur,Y.onClose),onClick:Wf(a.onClick,Y.onClose)})))}),[JG,KG]=jw("TooltipPortal",{forceMount:void 0}),LG=(0,wh.forwardRef)((a,d)=>{var k=KG("TooltipContent",a.__scopeTooltip);const {forceMount:F=k.forceMount,side:Y="top"}=a;k=Jf(a,["forceMount","side"]);a=Ru("TooltipContent",a.__scopeTooltip);return(0,wh.createElement)(Qu,{present:F||a.open},a.disableHoverableContent?(0,wh.createElement)(PB,$e({side:Y},k,{ref:d})):(0,wh.createElement)(MG,
$e({side:Y},k,{ref:d})))}),MG=(0,wh.forwardRef)((a,d)=>{const k=Ru("TooltipContent",a.__scopeTooltip),F=hy("TooltipContent",a.__scopeTooltip),Y=(0,wh.useRef)(null);d=ih(d,Y);const [ka,oa]=(0,wh.useState)(null),{trigger:Fa,onClose:Qa}=k,Wa=Y.current,{onPointerInTransitChange:eb}=F,jb=(0,wh.useCallback)(()=>{oa(null);eb(!1)},[eb]),Mb=(0,wh.useCallback)((Ub,Ob)=>{const jc=Nj({x:Ub.clientX,y:Ub.clientY},Ub.currentTarget.getBoundingClientRect()),vc="right"===jc||"bottom"===jc?-5:5;Ub="right"===jc||"left"===
jc?{x:Ub.clientX+vc,y:Ub.clientY}:{x:Ub.clientX,y:Ub.clientY+vc};Ob=Ob.getBoundingClientRect();const {top:Zb,right:oc,bottom:lc,left:Ic}=Ob;Ob=Qb([Ub,{x:Ic,y:Zb},{x:oc,y:Zb},{x:oc,y:lc},{x:Ic,y:lc}]);oa(Ob);eb(!0)},[eb]);(0,wh.useEffect)(()=>()=>jb(),[jb]);(0,wh.useEffect)(()=>{if(Fa&&Wa){const Ub=jc=>Mb(jc,Wa),Ob=jc=>Mb(jc,Fa);Fa.addEventListener("pointerleave",Ub);Wa.addEventListener("pointerleave",Ob);return()=>{Fa.removeEventListener("pointerleave",Ub);Wa.removeEventListener("pointerleave",Ob)}}},
[Fa,Wa,Mb,jb]);(0,wh.useEffect)(()=>{if(ka){const Ub=Ob=>{var jc=Ob.target;Ob={x:Ob.clientX,y:Ob.clientY};jc=(null===Fa||void 0===Fa?void 0:Fa.contains(jc))||(null===Wa||void 0===Wa?void 0:Wa.contains(jc));const {x:vc,y:Zb}=Ob;Ob=!1;for(let oc=0,lc=ka.length-1;oc<ka.length;lc=oc++){const Ic=ka[oc].x,Lc=ka[oc].y,wd=ka[lc].x,Td=ka[lc].y;Lc>Zb!==Td>Zb&&vc<(wd-Ic)*(Zb-Lc)/(Td-Lc)+Ic&&(Ob=!Ob)}Ob=!Ob;jc?jb():Ob&&(jb(),Qa())};document.addEventListener("pointermove",Ub);return()=>document.removeEventListener("pointermove",
Ub)}},[Fa,Wa,ka,Qa,jb]);return(0,wh.createElement)(PB,$e({},a,{ref:d}))}),[NG,OG]=jw("Tooltip",{isInside:!1}),PB=(0,wh.forwardRef)((a,d)=>{const {__scopeTooltip:k,children:F,"aria-label":Y,onEscapeKeyDown:ka,onPointerDownOutside:oa}=a;a=Jf(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Fa=Ru("TooltipContent",k),Qa=kw(k),{onClose:Wa}=Fa;(0,wh.useEffect)(()=>{document.addEventListener("tooltip.open",Wa);return()=>document.removeEventListener("tooltip.open",
Wa)},[Wa]);(0,wh.useEffect)(()=>{if(Fa.trigger){const eb=jb=>{jb=jb.target;null!==jb&&void 0!==jb&&jb.contains(Fa.trigger)&&Wa()};window.addEventListener("scroll",eb,{capture:!0});return()=>window.removeEventListener("scroll",eb,{capture:!0})}},[Fa.trigger,Wa]);return(0,wh.createElement)($x,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ka,onPointerDownOutside:oa,onFocusOutside:eb=>eb.preventDefault(),onDismiss:Wa},(0,wh.createElement)(fy,$e({"data-state":Fa.stateAttribute},Qa,a,{ref:d,
style:kf(me({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,wh.createElement)(yB,null,F),(0,wh.createElement)(NG,{scope:k,isInside:!0},(0,wh.createElement)(FG,{id:Fa.contentId,role:"tooltip"},Y||F))))}),PG=(0,wh.forwardRef)((a,d)=>{const {__scopeTooltip:k}=a;a=Jf(a,["__scopeTooltip"]);const F=kw(k);return OG("TooltipArrow",k).isInside?null:(0,wh.createElement)(MB,$e({},F,a,{ref:d}))}),QG=a=>{const {__scopeTooltip:d,delayDuration:k=700,skipDelayDuration:F=
300,disableHoverableContent:Y=!1,children:ka}=a,[oa,Fa]=(0,wh.useState)(!0),Qa=(0,wh.useRef)(!1),Wa=(0,wh.useRef)(0);(0,wh.useEffect)(()=>{const eb=Wa.current;return()=>window.clearTimeout(eb)},[]);return(0,wh.createElement)(GG,{scope:d,isOpenDelayed:oa,delayDuration:k,onOpen:(0,wh.useCallback)(()=>{window.clearTimeout(Wa.current);Fa(!1)},[]),onClose:(0,wh.useCallback)(()=>{window.clearTimeout(Wa.current);Wa.current=window.setTimeout(()=>Fa(!0),F)},[F]),isPointerInTransitRef:Qa,onPointerInTransitChange:(0,wh.useCallback)(eb=>
{Qa.current=eb},[]),disableHoverableContent:Y},ka)},RG=a=>{const {__scopeTooltip:d,children:k,open:F,defaultOpen:Y=!1,onOpenChange:ka,disableHoverableContent:oa,delayDuration:Fa}=a,Qa=hy("Tooltip",a.__scopeTooltip);a=kw(d);const [Wa,eb]=(0,wh.useState)(null),jb=hi(),Mb=(0,wh.useRef)(0),Ub=null!==oa&&void 0!==oa?oa:Qa.disableHoverableContent,Ob=null!==Fa&&void 0!==Fa?Fa:Qa.delayDuration,jc=(0,wh.useRef)(!1),[vc=!1,Zb]=$h({prop:F,defaultProp:Y,onChange:wd=>{if(wd)Qa.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));
else Qa.onClose();null===ka||void 0===ka||ka(wd)}}),oc=(0,wh.useMemo)(()=>vc?jc.current?"delayed-open":"instant-open":"closed",[vc]),lc=(0,wh.useCallback)(()=>{window.clearTimeout(Mb.current);jc.current=!1;Zb(!0)},[Zb]),Ic=(0,wh.useCallback)(()=>{window.clearTimeout(Mb.current);Zb(!1)},[Zb]),Lc=(0,wh.useCallback)(()=>{window.clearTimeout(Mb.current);Mb.current=window.setTimeout(()=>{jc.current=!0;Zb(!0)},Ob)},[Ob,Zb]);(0,wh.useEffect)(()=>()=>window.clearTimeout(Mb.current),[]);return(0,wh.createElement)(gy,
a,(0,wh.createElement)(HG,{scope:d,contentId:jb,open:vc,stateAttribute:oc,trigger:Wa,onTriggerChange:eb,onTriggerEnter:(0,wh.useCallback)(()=>{Qa.isOpenDelayed?Lc():lc()},[Qa.isOpenDelayed,Lc,lc]),onTriggerLeave:(0,wh.useCallback)(()=>{Ub?Ic():window.clearTimeout(Mb.current)},[Ic,Ub]),onOpen:lc,onClose:Ic,disableHoverableContent:Ub},k))},SG=IG,TG=a=>{const {__scopeTooltip:d,forceMount:k,children:F,container:Y}=a;a=Ru("TooltipPortal",d);return(0,wh.createElement)(JG,{scope:d,forceMount:k},(0,wh.createElement)(Qu,
{present:k||a.open},(0,wh.createElement)(DG,{asChild:!0,container:Y},F)))},UG=LG,VG=PG,Nr=V(586),QB=V(586),iy=V(586),WG=({style:a,icon:d,onClick:k})=>(0,iy.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:k,children:(0,iy.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,iy.jsx)(Ih,{name:d})})}),RB=V(22),SB=(0,RB.forwardRef)((a,d)=>{const {pressed:k,defaultPressed:F=!1,onPressedChange:Y}=a,ka=Jf(a,["pressed","defaultPressed","onPressedChange"]),
[oa=!1,Fa]=$h({prop:k,onChange:Y,defaultProp:F});return(0,RB.createElement)(Vl.button,$e({type:"button","aria-pressed":oa,"data-state":oa?"on":"off","data-disabled":a.disabled?"":void 0},ka,{ref:d,onClick:Wf(a.onClick,()=>{a.disabled||Fa(!oa)})}))}),XG=SB,jy=V(586),Bp=V(22),kh=V(22),Cq=uf(V(22)),TB=V(22),YG=(0,TB.createContext)(void 0),ZG=V(22),ky=0,Or=V(22),UB={bubbles:!1,cancelable:!0},VB=(0,Or.forwardRef)((a,d)=>{const {loop:k=!1,trapped:F=!1,onMountAutoFocus:Y,onUnmountAutoFocus:ka}=a;a=Jf(a,
["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [oa,Fa]=(0,Or.useState)(null),Qa=Hf(Y),Wa=Hf(ka),eb=(0,Or.useRef)(null);d=ih(d,Ub=>Fa(Ub));const jb=(0,Or.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Or.useEffect)(()=>{if(F){let Ub=function(jc){!jb.paused&&oa&&(jc=jc.target,oa.contains(jc)?eb.current=jc:Kc(eb.current,{select:!0}))},Ob=function(jc){!jb.paused&&oa&&(oa.contains(jc.relatedTarget)||Kc(eb.current,{select:!0}))};document.addEventListener("focusin",
Ub);document.addEventListener("focusout",Ob);return()=>{document.removeEventListener("focusin",Ub);document.removeEventListener("focusout",Ob)}}},[F,oa,jb.paused]);(0,Or.useEffect)(()=>{if(oa){WB.add(jb);const Ub=document.activeElement;if(!oa.contains(Ub)){const Ob=new CustomEvent("focusScope.autoFocusOnMount",UB);oa.addEventListener("focusScope.autoFocusOnMount",Qa);oa.dispatchEvent(Ob);Ob.defaultPrevented||(rb(rd(Pb(oa)),{select:!0}),document.activeElement===Ub&&Kc(oa))}return()=>{oa.removeEventListener("focusScope.autoFocusOnMount",
Qa);setTimeout(()=>{const Ob=new CustomEvent("focusScope.autoFocusOnUnmount",UB);oa.addEventListener("focusScope.autoFocusOnUnmount",Wa);oa.dispatchEvent(Ob);Ob.defaultPrevented||Kc(null!==Ub&&void 0!==Ub?Ub:document.body,{select:!0});oa.removeEventListener("focusScope.autoFocusOnUnmount",Wa);WB.remove(jb)},0)}}},[oa,Qa,Wa,jb]);const Mb=(0,Or.useCallback)(Ub=>{if((k||F)&&!jb.paused){var Ob=document.activeElement;if("Tab"===Ub.key&&!Ub.altKey&&!Ub.ctrlKey&&!Ub.metaKey&&Ob){const vc=Ub.currentTarget;
var jc=vc;const Zb=Pb(jc),oc=$b(Zb,jc);jc=$b(Zb.reverse(),jc);const [lc,Ic]=[oc,jc];lc&&Ic?Ub.shiftKey||Ob!==Ic?Ub.shiftKey&&Ob===lc&&(Ub.preventDefault(),k&&Kc(Ic,{select:!0})):(Ub.preventDefault(),k&&Kc(lc,{select:!0})):Ob===vc&&Ub.preventDefault()}}},[k,F,jb.paused]);return(0,Or.createElement)(Vl.div,$e({tabIndex:-1},a,{ref:d,onKeyDown:Mb}))}),WB=function(){let a=[];return{add(d){const k=a[0];d===k||null!==k&&void 0!==k&&k.pause();a=Pc(a,d);a.unshift(d)},remove(d){var k;a=Pc(a,d);null===(k=a[0])||
void 0===k||k.resume()}}}(),Xm=V(22),$G={bubbles:!1,cancelable:!0},[ly,XB,aH]=Vb("RovingFocusGroup"),[bH,lw]=mk("RovingFocusGroup",[aH]),[cH,dH]=bH("RovingFocusGroup"),YB=(0,Xm.forwardRef)((a,d)=>(0,Xm.createElement)(ly.Provider,{scope:a.__scopeRovingFocusGroup},(0,Xm.createElement)(ly.Slot,{scope:a.__scopeRovingFocusGroup},(0,Xm.createElement)(eH,$e({},a,{ref:d}))))),eH=(0,Xm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:k,orientation:F,loop:Y=!1,dir:ka,currentTabStopId:oa,defaultCurrentTabStopId:Fa,
onCurrentTabStopIdChange:Qa,onEntryFocus:Wa}=a,eb=Jf(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),jb=(0,Xm.useRef)(null);d=ih(d,jb);const Mb=sb(ka),[Ub=null,Ob]=$h({prop:oa,defaultProp:Fa,onChange:Qa}),[jc,vc]=(0,Xm.useState)(!1),Zb=Hf(Wa),oc=XB(k),lc=(0,Xm.useRef)(!1),[Ic,Lc]=(0,Xm.useState)(0);(0,Xm.useEffect)(()=>{const wd=jb.current;if(wd)return wd.addEventListener("rovingFocusGroup.onEntryFocus",Zb),
()=>wd.removeEventListener("rovingFocusGroup.onEntryFocus",Zb)},[Zb]);return(0,Xm.createElement)(cH,{scope:k,orientation:F,dir:Mb,loop:Y,currentTabStopId:Ub,onItemFocus:(0,Xm.useCallback)(wd=>Ob(wd),[Ob]),onItemShiftTab:(0,Xm.useCallback)(()=>vc(!0),[]),onFocusableItemAdd:(0,Xm.useCallback)(()=>Lc(wd=>wd+1),[]),onFocusableItemRemove:(0,Xm.useCallback)(()=>Lc(wd=>wd-1),[])},(0,Xm.createElement)(Vl.div,$e({tabIndex:jc||0===Ic?-1:0,"data-orientation":F},eb,{ref:d,style:me({outline:"none"},a.style),onMouseDown:Wf(a.onMouseDown,
()=>{lc.current=!0}),onFocus:Wf(a.onFocus,wd=>{var Td=!lc.current;if(wd.target===wd.currentTarget&&Td&&!jc&&(Td=new CustomEvent("rovingFocusGroup.onEntryFocus",$G),wd.currentTarget.dispatchEvent(Td),!Td.defaultPrevented)){wd=oc().filter(ne=>ne.focusable);Td=wd.find(ne=>ne.active);const We=wd.find(ne=>ne.id===Ub);wd=[Td,We,...wd].filter(Boolean).map(ne=>ne.ref.current);Bd(wd)}lc.current=!1}),onBlur:Wf(a.onBlur,()=>vc(!1))})))}),ZB=(0,Xm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:k,focusable:F=
!0,active:Y=!1}=a,ka=Jf(a,["__scopeRovingFocusGroup","focusable","active"]),oa=hi(),Fa=dH("RovingFocusGroupItem",k),Qa=Fa.currentTabStopId===oa,Wa=XB(k),{onFocusableItemAdd:eb,onFocusableItemRemove:jb}=Fa;(0,Xm.useEffect)(()=>{if(F)return eb(),()=>jb()},[F,eb,jb]);return(0,Xm.createElement)(ly.ItemSlot,{scope:k,id:oa,focusable:F,active:Y},(0,Xm.createElement)(Vl.span,$e({tabIndex:Qa?0:-1,"data-orientation":Fa.orientation},ka,{ref:d,onMouseDown:Wf(a.onMouseDown,Mb=>{if(F)Fa.onItemFocus(oa);else Mb.preventDefault()}),
onFocus:Wf(a.onFocus,()=>Fa.onItemFocus(oa)),onKeyDown:Wf(a.onKeyDown,Mb=>{if("Tab"===Mb.key&&Mb.shiftKey)Fa.onItemShiftTab();else if(Mb.target===Mb.currentTarget){var Ub=Rd(Mb,Fa.orientation,Fa.dir);if(void 0!==Ub){Mb.preventDefault();let Ob=Wa().filter(jc=>jc.focusable).map(jc=>jc.ref.current);if("last"===Ub)Ob.reverse();else if("prev"===Ub||"next"===Ub)"prev"===Ub&&Ob.reverse(),Mb=Ob.indexOf(Mb.currentTarget),Ob=Fa.loop?Ad(Ob,Mb+1):Ob.slice(Mb+1);setTimeout(()=>Bd(Ob))}}})})))}),fH={ArrowLeft:"prev",
ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},gH=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},Pt=new WeakMap,mw=new WeakMap,nw={},my=0,ny=function(a,d,k){void 0===d&&(d=gH(a));void 0===k&&(k="data-aria-hidden");var F=Array.isArray(a)?a:[a];nw[k]||(nw[k]=new WeakMap);var Y=nw[k],ka=[],oa=new Set,Fa=function(Wa){Wa&&!oa.has(Wa)&&(oa.add(Wa),Fa(Wa.parentNode))};F.forEach(Fa);var Qa=function(Wa){!Wa||
0<=F.indexOf(Wa)||Array.prototype.forEach.call(Wa.children,function(eb){if(oa.has(eb))Qa(eb);else{var jb=eb.getAttribute("aria-hidden");jb=null!==jb&&"false"!==jb;var Mb=(Pt.get(eb)||0)+1,Ub=(Y.get(eb)||0)+1;Pt.set(eb,Mb);Y.set(eb,Ub);ka.push(eb);1===Mb&&jb&&mw.set(eb,!0);1===Ub&&eb.setAttribute(k,"true");jb||eb.setAttribute("aria-hidden","true")}})};Qa(d);oa.clear();my++;return function(){ka.forEach(function(Wa){var eb=Pt.get(Wa)-1,jb=Y.get(Wa)-1;Pt.set(Wa,eb);Y.set(Wa,jb);eb||(mw.has(Wa)||Wa.removeAttribute("aria-hidden"),
mw.delete(Wa));jb||Wa.removeAttribute(k)});my--;my||(Pt=new WeakMap,Pt=new WeakMap,mw=new WeakMap,nw={})}},hH=uf(ms(),1),{__assign:Pr,__rest:$B,__spreadArray:iH}=hH.default,Cp=uf(V(22)),cr=uf(V(22)),jH=V(22),kH=uf(V(22)),oy=function(a){var d=a.sideCar;a=$B(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");d=d.read();if(!d)throw Error("Sidecar medium not found");return kH.createElement(d,Pr({},a))};oy.isSideCarExport=!0;var Rn=function(a){void 0===
a&&(a={});var d=ye(null);d.options=Pr({async:!0,ssr:!1},a);return d}(),so=function(){},ot=cr.forwardRef(function(a,d){var k=cr.useRef(null),F=cr.useState({onScrollCapture:so,onWheelCapture:so,onTouchMoveCapture:so}),Y=F[0];F=F[1];var ka=a.forwardProps,oa=a.children,Fa=a.className,Qa=a.removeScrollBar,Wa=a.enabled,eb=a.shards,jb=a.sideCar,Mb=a.noIsolation,Ub=a.inert,Ob=a.allowPinchZoom,jc=a.as;jc=void 0===jc?"div":jc;a=$B(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));
d=Be([k,d]);Y=Pr(Pr({},a),Y);return cr.createElement(cr.Fragment,null,Wa&&cr.createElement(jb,{sideCar:Rn,removeScrollBar:Qa,shards:eb,noIsolation:Mb,inert:Ub,setCallbacks:F,allowPinchZoom:!!Ob,lockRef:k}),ka?cr.cloneElement(cr.Children.only(oa),Pr(Pr({},Y),{ref:d})):cr.createElement(jc,Pr({},Y,{className:Fa,ref:d}),oa))});ot.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ot.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var kn=uf(V(22)),yz=uf(V(22)),
zz=uf(V(22)),WD=function(){var a=0,d=null;return{add:function(k){if(0==a){if(document){var F=document.createElement("style");F.type="text/css";var Y="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;Y&&F.setAttribute("nonce",Y)}else F=null;if(d=F)F=d,F.styleSheet?F.styleSheet.cssText=k:F.appendChild(document.createTextNode(k)),k=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(k)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),d=null)}}},
pt=function(){var a=WD();return function(d,k){zz.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&k])}},Ov=function(){var a=pt();return function(d){a(d.styles,d.dynamic);return null}},lH={left:0,top:0,right:0,gap:0},aC=Ov(),bC=function(a,d,k,F){var Y=a.left,ka=a.top,oa=a.right;a=a.gap;void 0===k&&(k="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(F,";\n   padding-right: ").concat(a,"px ").concat(F,";\n  }\n  body {\n    overflow: hidden ").concat(F,
";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(F,";"),"margin"===k&&"\n    padding-left: ".concat(Y,"px;\n    padding-top: ").concat(ka,"px;\n    padding-right: ").concat(oa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(F,";\n    "),"padding"===k&&"padding-right: ".concat(a,"px ").concat(F,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(F,
";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(F,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(F,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(F,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},cC=function(a){var d=a.noRelative,k=a.noImportant;
a=a.gapMode;var F=void 0===a?"margin":a;a=yz.useMemo(function(){var Y=F;void 0===Y&&(Y="margin");if("undefined"===typeof window)Y=lH;else{var ka=window.getComputedStyle(document.body),oa=ka["padding"===Y?"paddingTop":"marginTop"],Fa=ka["padding"===Y?"paddingRight":"marginRight"];Y=[parseInt(ka["padding"===Y?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(oa||"",10)||0,parseInt(Fa||"",10)||0];Y={left:Y[0],top:Y[1],right:Y[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+Y[2]-
Y[0])}}return Y},[F]);return yz.createElement(aC,{styles:bC(a,!d,F,k?"":"!important")})},ow=!1;if("undefined"!==typeof window)try{var Pv=Object.defineProperty({},"passive",{get:function(){return ow=!0}});window.addEventListener("test",Pv,Pv);window.removeEventListener("test",Pv,Pv)}catch(a){ow=!1}var Zq=ow?{passive:!1}:!1,sx=function(a,d){var k=window.getComputedStyle(a);return"hidden"!==k[d]&&!(k.overflowY===k.overflowX&&"TEXTAREA"!==a.tagName&&"visible"===k[d])},rx=function(a,d){do{"undefined"!==
typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(dC(a,d)){var k=eC(a,d);if(k[1]>k[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},dC=function(a,d){return"v"===a?sx(d,"overflowY"):sx(d,"overflowX")},eC=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},pw=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},py=function(a){return a&&"current"in a?a.current:a},
qy=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},Gl=0,go=[];Rn.useMedium(function(a){var d=kn.useRef([]),k=kn.useRef([0,0]),F=kn.useRef(),Y=kn.useState(Gl++)[0],ka=kn.useState(function(){return Ov()})[0],oa=kn.useRef(a);kn.useEffect(function(){oa.current=a},[a]);kn.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(Y));var Ob=iH([a.lockRef.current],(a.shards||
[]).map(py),!0).filter(Boolean);Ob.forEach(function(jc){return jc.classList.add("allow-interactivity-".concat(Y))});return function(){document.body.classList.remove("block-interactivity-".concat(Y));Ob.forEach(function(jc){return jc.classList.remove("allow-interactivity-".concat(Y))})}}},[a.inert,a.lockRef.current,a.shards]);var Fa=kn.useCallback(function(Ob,jc){if("touches"in Ob&&2===Ob.touches.length)return!oa.current.allowPinchZoom;var vc=pw(Ob),Zb=k.current,oc="deltaX"in Ob?Ob.deltaX:Zb[0]-vc[0];
Zb="deltaY"in Ob?Ob.deltaY:Zb[1]-vc[1];var lc=Ob.target,Ic=Math.abs(oc)>Math.abs(Zb)?"h":"v";if("touches"in Ob&&"h"===Ic&&"range"===lc.type)return!1;var Lc=rx(Ic,lc);if(!Lc)return!0;Lc?vc=Ic:(vc="v"===Ic?"h":"v",Lc=rx(Ic,lc));if(!Lc)return!1;!F.current&&"changedTouches"in Ob&&(oc||Zb)&&(F.current=vc);if(!vc)return!0;vc=F.current||vc;Zb="h"===vc?oc:Zb;oc=window.getComputedStyle(jc).direction;oc="h"===vc&&"rtl"===oc?-1:1;Ic=oc*Zb;Ob=Ob.target;Zb=jc.contains(Ob);lc=!1;Ic=0<Ic;var wd=Lc=0;do{var Td=eC(vc,
Ob),We=Td[0];Td=Td[1]-Td[2]-oc*We;(We||Td)&&dC(vc,Ob)&&(Lc+=Td,wd+=We);Ob=Ob.parentNode}while(!Zb&&Ob!==document.body||Zb&&(jc.contains(Ob)||jc===Ob));Ic&&0===Lc?lc=!0:Ic||0!==wd||(lc=!0);return lc},[]),Qa=kn.useCallback(function(Ob){if(go.length&&go[go.length-1]===ka){var jc="deltaY"in Ob?[Ob.deltaX,Ob.deltaY]:pw(Ob),vc=d.current.filter(function(Zb){var oc;if(oc=Zb.name===Ob.type&&Zb.target===Ob.target)Zb=Zb.delta,oc=Zb[0]===jc[0]&&Zb[1]===jc[1];return oc})[0];vc&&vc.should?Ob.cancelable&&Ob.preventDefault():
vc||(vc=(oa.current.shards||[]).map(py).filter(Boolean).filter(function(Zb){return Zb.contains(Ob.target)}),(0<vc.length?Fa(Ob,vc[0]):!oa.current.noIsolation)&&Ob.cancelable&&Ob.preventDefault())}},[]),Wa=kn.useCallback(function(Ob,jc,vc,Zb){var oc={name:Ob,delta:jc,target:vc,should:Zb};d.current.push(oc);setTimeout(function(){d.current=d.current.filter(function(lc){return lc!==oc})},1)},[]),eb=kn.useCallback(function(Ob){k.current=pw(Ob);F.current=void 0},[]),jb=kn.useCallback(function(Ob){Wa(Ob.type,
[Ob.deltaX,Ob.deltaY],Ob.target,Fa(Ob,a.lockRef.current))},[]),Mb=kn.useCallback(function(Ob){Wa(Ob.type,pw(Ob),Ob.target,Fa(Ob,a.lockRef.current))},[]);kn.useEffect(function(){go.push(ka);a.setCallbacks({onScrollCapture:jb,onWheelCapture:jb,onTouchMoveCapture:Mb});document.addEventListener("wheel",Qa,Zq);document.addEventListener("touchmove",Qa,Zq);document.addEventListener("touchstart",eb,Zq);return function(){go=go.filter(function(Ob){return Ob!==ka});document.removeEventListener("wheel",Qa,Zq);
document.removeEventListener("touchmove",Qa,Zq);document.removeEventListener("touchstart",eb,Zq)}},[]);var Ub=a.removeScrollBar;return kn.createElement(kn.Fragment,null,a.inert?kn.createElement(ka,{styles:qy(Y)}):null,Ub?kn.createElement(cC,{gapMode:"margin"}):null)});var Hl=Cp.forwardRef(function(a,d){return Cp.createElement(ot,Pr({},a,{ref:d,sideCar:oy}))});Hl.classNames=ot.classNames;var dr=["Enter"," "],nn=["ArrowUp","PageDown","End"],$o=["ArrowDown","PageUp","Home",...nn];[...dr];[...dr];var [uj,
fC,qw]=Vb("Menu"),[Dq,Qt]=mk("Menu",[qw,Ot,lw]),rw=Ot(),sw=lw(),[Gj,Rt]=Dq("Menu"),[ry,Su]=Dq("Menu"),Rs=(0,kh.forwardRef)((a,d)=>{var {__scopeMenu:k}=a;a=Jf(a,["__scopeMenu"]);k=rw(k);return(0,kh.createElement)(ey,$e({},k,a,{ref:d}))}),[,gC]=Dq("MenuPortal",{forceMount:void 0}),[Ss,hC]=Dq("MenuContent"),Tu=(0,kh.forwardRef)((a,d)=>{var k=gC("MenuContent",a.__scopeMenu);({forceMount:k=k.forceMount}=a);const F=Jf(a,["forceMount"]),Y=Rt("MenuContent",a.__scopeMenu),ka=Su("MenuContent",a.__scopeMenu);
return(0,kh.createElement)(uj.Provider,{scope:a.__scopeMenu},(0,kh.createElement)(Qu,{present:k||Y.open},(0,kh.createElement)(uj.Slot,{scope:a.__scopeMenu},ka.modal?(0,kh.createElement)(tw,$e({},F,{ref:d})):(0,kh.createElement)(sy,$e({},F,{ref:d})))))}),tw=(0,kh.forwardRef)((a,d)=>{const k=Rt("MenuContent",a.__scopeMenu),F=(0,kh.useRef)(null);d=ih(d,F);(0,kh.useEffect)(()=>{const Y=F.current;if(Y)return ny(Y)},[]);return(0,kh.createElement)(St,$e({},a,{ref:d,trapFocus:k.open,disableOutsidePointerEvents:k.open,
disableOutsideScroll:!0,onFocusOutside:Wf(a.onFocusOutside,Y=>Y.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>k.onOpenChange(!1)}))}),sy=(0,kh.forwardRef)((a,d)=>{const k=Rt("MenuContent",a.__scopeMenu);return(0,kh.createElement)(St,$e({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>k.onOpenChange(!1)}))}),St=(0,kh.forwardRef)((a,d)=>{const {__scopeMenu:k,loop:F=!1,trapFocus:Y,onOpenAutoFocus:ka,onCloseAutoFocus:oa,disableOutsidePointerEvents:Fa,
onEscapeKeyDown:Qa,onPointerDownOutside:Wa,onFocusOutside:eb,onInteractOutside:jb,onDismiss:Mb,disableOutsideScroll:Ub}=a,Ob=Jf(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),jc=Rt("MenuContent",k),vc=Su("MenuContent",k),Zb=rw(k),oc=sw(k),lc=fC(k),[Ic,Lc]=(0,kh.useState)(null),wd=(0,kh.useRef)(null);d=ih(d,wd,jc.onContentChange);const Td=(0,kh.useRef)(0),
We=(0,kh.useRef)(""),ne=(0,kh.useRef)(0),Ke=(0,kh.useRef)(null),Bf=(0,kh.useRef)("right"),Se=(0,kh.useRef)(0),Xe=Ub?Hl:kh.Fragment,Xd=Ub?{as:Bq,allowPinchZoom:!0}:void 0,nd=ld=>{var Hd,Oe;ld=We.current+ld;const mf=lc().filter(Lf=>!Lf.disabled),Pf=document.activeElement,Cf=null===(Hd=mf.find(Lf=>Lf.ref.current===Pf))||void 0===Hd?void 0:Hd.textValue;Hd=mf.map(Lf=>Lf.textValue);const dg=Ye(Hd,ld,Cf),fh=null===(Oe=mf.find(Lf=>Lf.textValue===dg))||void 0===Oe?void 0:Oe.ref.current;(function Ch(ah){We.current=
ah;window.clearTimeout(Td.current);""!==ah&&(Td.current=window.setTimeout(()=>Ch(""),1E3))})(ld);fh&&setTimeout(()=>fh.focus())};(0,kh.useEffect)(()=>()=>window.clearTimeout(Td.current),[]);xb();const Yd=(0,kh.useCallback)(ld=>{var Hd,Oe,mf;if(mf=Bf.current===(null===(Hd=Ke.current)||void 0===Hd?void 0:Hd.side)){if(Hd=null===(Oe=Ke.current)||void 0===Oe?void 0:Oe.area){const {x:Pf,y:Cf}={x:ld.clientX,y:ld.clientY};ld=!1;for(let dg=0,fh=Hd.length-1;dg<Hd.length;fh=dg++){Oe=Hd[dg].x;mf=Hd[dg].y;const Lf=
Hd[fh].x,ah=Hd[fh].y;mf>Cf!==ah>Cf&&Pf<(Lf-Oe)*(Cf-mf)/(ah-mf)+Oe&&(ld=!ld)}Hd=ld}else Hd=!1;mf=Hd}return mf},[]);return(0,kh.createElement)(Ss,{scope:k,searchRef:We,onItemEnter:(0,kh.useCallback)(ld=>{Yd(ld)&&ld.preventDefault()},[Yd]),onItemLeave:(0,kh.useCallback)(ld=>{var Hd;Yd(ld)||(null===(Hd=wd.current)||void 0===Hd||Hd.focus(),Lc(null))},[Yd]),onTriggerLeave:(0,kh.useCallback)(ld=>{Yd(ld)&&ld.preventDefault()},[Yd]),pointerGraceTimerRef:ne,onPointerGraceIntentChange:(0,kh.useCallback)(ld=>
{Ke.current=ld},[])},(0,kh.createElement)(Xe,Xd,(0,kh.createElement)(VB,{asChild:!0,trapped:Y,onMountAutoFocus:Wf(ka,ld=>{var Hd;ld.preventDefault();null===(Hd=wd.current)||void 0===Hd||Hd.focus()}),onUnmountAutoFocus:oa},(0,kh.createElement)($x,{asChild:!0,disableOutsidePointerEvents:Fa,onEscapeKeyDown:Qa,onPointerDownOutside:Wa,onFocusOutside:eb,onInteractOutside:jb,onDismiss:Mb},(0,kh.createElement)(YB,$e({asChild:!0},oc,{dir:vc.dir,orientation:"vertical",loop:F,currentTabStopId:Ic,onCurrentTabStopIdChange:Lc,
onEntryFocus:ld=>{vc.isUsingKeyboardRef.current||ld.preventDefault()}}),(0,kh.createElement)(fy,$e({role:"menu","aria-orientation":"vertical","data-state":jc.open?"open":"closed","data-radix-menu-content":"",dir:vc.dir},Zb,Ob,{ref:d,style:me({outline:"none"},Ob.style),onKeyDown:Wf(Ob.onKeyDown,ld=>{var Hd=ld.target.closest("[data-radix-menu-content]")===ld.currentTarget;const Oe=ld.ctrlKey||ld.altKey||ld.metaKey,mf=1===ld.key.length;Hd&&("Tab"===ld.key&&ld.preventDefault(),!Oe&&mf&&nd(ld.key));ld.target===
wd.current&&$o.includes(ld.key)&&(ld.preventDefault(),Hd=lc().filter(Pf=>!Pf.disabled).map(Pf=>Pf.ref.current),nn.includes(ld.key)&&Hd.reverse(),gf(Hd))}),onBlur:Wf(a.onBlur,ld=>{ld.currentTarget.contains(ld.target)||(window.clearTimeout(Td.current),We.current="")}),onPointerMove:Wf(a.onPointerMove,Mg(ld=>{const Hd=Se.current!==ld.clientX;ld.currentTarget.contains(ld.target)&&Hd&&(Bf.current=ld.clientX>Se.current?"right":"left",Se.current=ld.clientX)}))})))))))}),uw=(0,kh.forwardRef)((a,d)=>{const {disabled:k=
!1,onSelect:F}=a,Y=Jf(a,["disabled","onSelect"]),ka=(0,kh.useRef)(null),oa=Su("MenuItem",a.__scopeMenu),Fa=hC("MenuItem",a.__scopeMenu);d=ih(d,ka);const Qa=(0,kh.useRef)(!1);return(0,kh.createElement)(Uu,$e({},Y,{ref:d,disabled:k,onClick:Wf(a.onClick,()=>{const Wa=ka.current;if(!k&&Wa){const eb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});Wa.addEventListener("menu.itemSelect",jb=>null===F||void 0===F?void 0:F(jb),{once:!0});bm(Wa,eb);if(eb.defaultPrevented)Qa.current=!1;else oa.onClose()}}),
onPointerDown:Wa=>{var eb;null===(eb=a.onPointerDown)||void 0===eb||eb.call(a,Wa);Qa.current=!0},onPointerUp:Wf(a.onPointerUp,Wa=>{var eb;Qa.current||null===(eb=Wa.currentTarget)||void 0===eb||eb.click()}),onKeyDown:Wf(a.onKeyDown,Wa=>{const eb=""!==Fa.searchRef.current;k||eb&&" "===Wa.key||!dr.includes(Wa.key)||(Wa.currentTarget.click(),Wa.preventDefault())})}))}),Uu=(0,kh.forwardRef)((a,d)=>{const {__scopeMenu:k,disabled:F=!1,textValue:Y}=a,ka=Jf(a,["__scopeMenu","disabled","textValue"]),oa=hC("MenuItem",
k),Fa=sw(k),Qa=(0,kh.useRef)(null);d=ih(d,Qa);const [Wa,eb]=(0,kh.useState)(!1),[jb,Mb]=(0,kh.useState)("");(0,kh.useEffect)(()=>{const Ub=Qa.current;if(Ub){var Ob;Mb((null!==(Ob=Ub.textContent)&&void 0!==Ob?Ob:"").trim())}},[ka.children]);return(0,kh.createElement)(uj.ItemSlot,{scope:k,disabled:F,textValue:null!==Y&&void 0!==Y?Y:jb},(0,kh.createElement)(ZB,$e({asChild:!0},Fa,{focusable:!F}),(0,kh.createElement)(Vl.div,$e({role:"menuitem","data-highlighted":Wa?"":void 0,"aria-disabled":F||void 0,
"data-disabled":F?"":void 0},ka,{ref:d,onPointerMove:Wf(a.onPointerMove,Mg(Ub=>{if(F)oa.onItemLeave(Ub);else oa.onItemEnter(Ub),Ub.defaultPrevented||Ub.currentTarget.focus()})),onPointerLeave:Wf(a.onPointerLeave,Mg(Ub=>oa.onItemLeave(Ub))),onFocus:Wf(a.onFocus,()=>eb(!0)),onBlur:Wf(a.onBlur,()=>eb(!1))}))))});Dq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Dq("MenuItemIndicator",{checked:!1});var iC=(0,kh.forwardRef)((a,d)=>{a=Jf(a,["__scopeMenu"]);return(0,kh.createElement)(Vl.div,$e({role:"separator",
"aria-orientation":"horizontal"},a,{ref:d}))});Dq("MenuSub");var ty=a=>{const {__scopeMenu:d,open:k=!1,children:F,dir:Y,onOpenChange:ka,modal:oa=!0}=a;a=rw(d);const [Fa,Qa]=(0,kh.useState)(null),Wa=(0,kh.useRef)(!1),eb=Hf(ka),jb=sb(Y);(0,kh.useEffect)(()=>{const Mb=()=>{Wa.current=!0;document.addEventListener("pointerdown",Ub,{capture:!0,once:!0});document.addEventListener("pointermove",Ub,{capture:!0,once:!0})},Ub=()=>Wa.current=!1;document.addEventListener("keydown",Mb,{capture:!0});return()=>{document.removeEventListener("keydown",
Mb,{capture:!0});document.removeEventListener("pointerdown",Ub,{capture:!0});document.removeEventListener("pointermove",Ub,{capture:!0})}},[]);return(0,kh.createElement)(gy,a,(0,kh.createElement)(Gj,{scope:d,open:k,onOpenChange:eb,content:Fa,onContentChange:Qa},(0,kh.createElement)(ry,{scope:d,onClose:(0,kh.useCallback)(()=>eb(!1),[eb]),isUsingKeyboardRef:Wa,dir:jb,modal:oa},F)))},[mH]=mk("DropdownMenu",[Qt]),er=Qt(),[Vu,Wu]=mH("DropdownMenu"),vw=(0,Bp.forwardRef)((a,d)=>{const {__scopeDropdownMenu:k,
disabled:F=!1}=a,Y=Jf(a,["__scopeDropdownMenu","disabled"]),ka=Wu("DropdownMenuTrigger",k),oa=er(k);return(0,Bp.createElement)(Rs,$e({asChild:!0},oa),(0,Bp.createElement)(Vl.button,$e({type:"button",id:ka.triggerId,"aria-haspopup":"menu","aria-expanded":ka.open,"aria-controls":ka.open?ka.contentId:void 0,"data-state":ka.open?"open":"closed","data-disabled":F?"":void 0,disabled:F},Y,{ref:Pg(d,ka.triggerRef),onPointerDown:Wf(a.onPointerDown,Fa=>{F||0!==Fa.button||!1!==Fa.ctrlKey||(ka.onOpenToggle(),
ka.open||Fa.preventDefault())}),onKeyDown:Wf(a.onKeyDown,Fa=>{if(!F){if(["Enter"," "].includes(Fa.key))ka.onOpenToggle();if("ArrowDown"===Fa.key)ka.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Fa.key)&&Fa.preventDefault()}})})))}),jC=(0,Bp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:k}=a;const F=Jf(a,["__scopeDropdownMenu"]),Y=Wu("DropdownMenuContent",k);k=er(k);const ka=(0,Bp.useRef)(!1);return(0,Bp.createElement)(Tu,$e({id:Y.contentId,"aria-labelledby":Y.triggerId},k,F,{ref:d,onCloseAutoFocus:Wf(a.onCloseAutoFocus,
oa=>{var Fa;ka.current||null===(Fa=Y.triggerRef.current)||void 0===Fa||Fa.focus();ka.current=!1;oa.preventDefault()}),onInteractOutside:Wf(a.onInteractOutside,oa=>{oa=oa.detail.originalEvent;const Fa=0===oa.button&&!0===oa.ctrlKey;oa=2===oa.button||Fa;if(!Y.modal||oa)ka.current=!0}),style:kf(me({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Qr=(0,Bp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:k}=a;a=Jf(a,["__scopeDropdownMenu"]);k=er(k);
return(0,Bp.createElement)(uw,$e({},k,a,{ref:d}))}),nH=a=>{const {__scopeDropdownMenu:d,children:k,dir:F,open:Y,defaultOpen:ka,onOpenChange:oa,modal:Fa=!0}=a;a=er(d);const Qa=(0,Bp.useRef)(null),[Wa=!1,eb]=$h({prop:Y,defaultProp:ka,onChange:oa});return(0,Bp.createElement)(Vu,{scope:d,triggerId:hi(),triggerRef:Qa,contentId:hi(),open:Wa,onOpenChange:eb,onOpenToggle:(0,Bp.useCallback)(()=>eb(jb=>!jb),[eb]),modal:Fa},(0,Bp.createElement)(ty,$e({},a,{open:Wa,onOpenChange:eb,dir:F,modal:Fa}),k))},vj=uf(V(22)).default.createContext({}),
oH=uf(V(22)),uy=V(586),Vn=a=>{var {action:d}=a;a=Jf(a,["action"]);var {renderers:k}=oH.useContext(vj);k=null==k?void 0:k.KeyboardShortcut;return(0,uy.jsx)("div",kf(me({className:"tl-menu-right-slot"},a),{children:(0,uy.jsx)(k,{action:d})}))};V(22);var Wn=V(586),Ts=Ze(function(){const a=ef(),d=k=>{k.preventDefault()};return(0,Wn.jsxs)(nH,{children:[(0,Wn.jsx)(vw,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,Wn.jsxs)(jC,{onCloseAutoFocus:k=>
k.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,Wn.jsxs)(Qr,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,Wn.jsx)(Vn,{action:"whiteboard/zoom-to-fit"})]}),(0,Wn.jsxs)(Qr,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,children:["Zoom to fit selection",(0,Wn.jsx)(Vn,{action:"whiteboard/zoom-to-selection"})]}),(0,Wn.jsxs)(Qr,{className:"tl-menu-item",onSelect:d,
onClick:a.api.zoomIn,children:["Zoom in",(0,Wn.jsx)(Vn,{action:"whiteboard/zoom-in"})]}),(0,Wn.jsxs)(Qr,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,Wn.jsx)(Vn,{action:"whiteboard/zoom-out"})]}),(0,Wn.jsxs)(Qr,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,Wn.jsx)(Vn,{action:"whiteboard/reset-zoom"})]})]})]})}),vy=V(22),ww=["horizontal","vertical"],Rr=(0,vy.forwardRef)((a,d)=>{const {decorative:k,orientation:F="horizontal"}=
a;a=Jf(a,["decorative","orientation"]);const Y=ww.includes(F)?F:"horizontal";return(0,vy.createElement)(Vl.div,$e({"data-orientation":Y},k?{role:"none"}:{"aria-orientation":"vertical"===Y?Y:void 0,role:"separator"},a,{ref:d}))});Rr.propTypes={orientation(a,d,k){a=a[d];d=String(a);return a&&!ww.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${k}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var Om=V(586),kC=Ze(function(){const a=ef(),{handlers:{t:d}}=Ps.useContext(vj),k=Ps.useCallback(()=>{a.api.undo()},[a]),F=Ps.useCallback(()=>{a.api.redo()},[a]),Y=Ps.useCallback(()=>{a.api.zoomIn()},[a]),ka=Ps.useCallback(()=>{a.api.zoomOut()},[a]),oa=Ps.useCallback(()=>{a.api.toggleGrid()},[a]),Fa=Ps.useCallback(()=>{a.api.toggleSnapToGrid()},[a]);return(0,Om.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",children:[!a.readOnly&&
(0,Om.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,Om.jsx)(ja,{tooltip:d("whiteboard/undo"),onClick:k,children:(0,Om.jsx)(Ih,{name:"arrow-back-up"})}),(0,Om.jsx)(ja,{tooltip:d("whiteboard/redo"),onClick:F,children:(0,Om.jsx)(Ih,{name:"arrow-forward-up"})})]}),(0,Om.jsxs)("div",{className:`tl-toolbar tl-zoom-bar ${a.readOnly?"":"ml-4"}`,children:[(0,Om.jsx)(ja,{tooltip:d("whiteboard/zoom-in"),onClick:Y,id:"tl-zoom-in",children:(0,Om.jsx)(Ih,{name:"plus"})}),(0,Om.jsx)(ja,{tooltip:d("whiteboard/zoom-out"),
onClick:ka,id:"tl-zoom-out",children:(0,Om.jsx)(Ih,{name:"minus"})}),(0,Om.jsx)(Rr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Om.jsx)(Ts,{})]}),(0,Om.jsxs)("div",{className:"tl-toolbar tl-grid-bar ml-4",children:[(0,Om.jsx)(Bb,{tooltip:d("whiteboard/toggle-grid"),className:"tl-button",pressed:a.settings.showGrid,id:"tl-show-grid",onPressedChange:oa,children:(0,Om.jsx)(Ih,{name:"grid-dots"})}),!a.readOnly&&(0,Om.jsx)(Bb,{tooltip:d("whiteboard/snap-to-grid"),className:"tl-button",
pressed:a.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:Fa,children:(0,Om.jsx)(Ih,{name:a.settings.snapToGrid?"magnet":"magnet-off"})})]})]})}),xw=uf(V(22)),Xu=uf(V(31)),Yu=V(586),Zu=a=>`[${a.map(d=>{var k;return null!=(k=null==d?void 0:d.toFixed(2))?k:"-"}).join(", ")}]`,ap=Ze(()=>{var a;const {viewport:{bounds:d,camera:{point:k,zoom:F}},inputs:Y}=nh(),ka=xw.default.useRef();xw.default.useEffect(()=>{const Fa=document.getElementById("tl-statusbar-anchor");ka.current=Fa},[]);const oa=[["Z",
null!=(a=null==F?void 0:F.toFixed(2))?a:"null"],["MP",Zu(Y.currentPoint)],["MS",Zu(Y.currentScreenPoint)],["VP",Zu(k)],["VBR",Zu([d.maxX,d.maxY])]].map(Fa=>Fa.join("")).join("|");a=ka.current?Xu.default.createPortal((0,Yu.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:oa}),ka.current):null;return(0,Yu.jsx)(Yu.Fragment,{children:a})}),on=uf(V(22)),bp=V(586),$p=Ze(a=>{var {id:d,icon:k,tooltip:F,tooltipSide:Y="left",handleClick:ka}=a;a=Jf(a,["id","icon","tooltip","tooltipSide",
"handleClick"]);var oa;const Fa=ef(),Qa=null==(oa=[...Fa.Tools,Gt,Ht])?void 0:oa.find(Wa=>Wa.id===d);oa=(oa=null==Qa?void 0:Qa.shortcut)&&F?(0,bp.jsxs)("div",{className:"flex",children:[F,(0,bp.jsx)(Vn,{action:oa})]}):F;return(0,bp.jsx)(ja,kf(me({},a),{tooltipSide:Y,tooltip:oa,"data-tool":d,"data-selected":d===Fa.selectedTool.id,onClick:ka,children:"string"===typeof k?(0,bp.jsx)(Ih,{name:k}):k}))}),pk=V(22),[wy]=mk("Popover",[Ot]),$u=Ot(),[xy,Us]=wy("Popover"),yw=(0,pk.forwardRef)((a,d)=>{var {__scopePopover:k}=
a;const F=Jf(a,["__scopePopover"]),Y=Us("PopoverTrigger",k);k=$u(k);d=ih(d,Y.triggerRef);a=(0,pk.createElement)(Vl.button,$e({type:"button","aria-haspopup":"dialog","aria-expanded":Y.open,"aria-controls":Y.contentId,"data-state":Y.open?"open":"closed"},F,{ref:d,onClick:Wf(a.onClick,Y.onOpenToggle)}));return Y.hasCustomAnchor?a:(0,pk.createElement)(ey,$e({asChild:!0},k),a)}),[,lC]=wy("PopoverPortal",{forceMount:void 0}),zw=(0,pk.forwardRef)((a,d)=>{var k=lC("PopoverContent",a.__scopePopover);({forceMount:k=
k.forceMount}=a);const F=Jf(a,["forceMount"]);a=Us("PopoverContent",a.__scopePopover);return(0,pk.createElement)(Qu,{present:k||a.open},a.modal?(0,pk.createElement)(mC,$e({},F,{ref:d})):(0,pk.createElement)(Tt,$e({},F,{ref:d})))}),mC=(0,pk.forwardRef)((a,d)=>{const k=Us("PopoverContent",a.__scopePopover),F=(0,pk.useRef)(null);d=ih(d,F);const Y=(0,pk.useRef)(!1);(0,pk.useEffect)(()=>{const ka=F.current;if(ka)return ny(ka)},[]);return(0,pk.createElement)(Hl,{as:Bq,allowPinchZoom:!0},(0,pk.createElement)(yy,
$e({},a,{ref:d,trapFocus:k.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wf(a.onCloseAutoFocus,ka=>{var oa;ka.preventDefault();Y.current||null===(oa=k.triggerRef.current)||void 0===oa||oa.focus()}),onPointerDownOutside:Wf(a.onPointerDownOutside,ka=>{ka=ka.detail.originalEvent;const oa=0===ka.button&&!0===ka.ctrlKey;Y.current=2===ka.button||oa},{checkForDefaultPrevented:!1}),onFocusOutside:Wf(a.onFocusOutside,ka=>ka.preventDefault(),{checkForDefaultPrevented:!1})})))}),Tt=(0,pk.forwardRef)((a,
d)=>{const k=Us("PopoverContent",a.__scopePopover),F=(0,pk.useRef)(!1);return(0,pk.createElement)(yy,$e({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Y=>{var ka;null===(ka=a.onCloseAutoFocus)||void 0===ka||ka.call(a,Y);if(!Y.defaultPrevented){var oa;F.current||null===(oa=k.triggerRef.current)||void 0===oa||oa.focus();Y.preventDefault()}F.current=!1},onInteractOutside:Y=>{var ka,oa;null===(ka=a.onInteractOutside)||void 0===ka||ka.call(a,Y);Y.defaultPrevented||(F.current=
!0);ka=Y.target;(null===(oa=k.triggerRef.current)||void 0===oa?0:oa.contains(ka))&&Y.preventDefault()}}))}),yy=(0,pk.forwardRef)((a,d)=>{const {__scopePopover:k,trapFocus:F,onOpenAutoFocus:Y,onCloseAutoFocus:ka,disableOutsidePointerEvents:oa,onEscapeKeyDown:Fa,onPointerDownOutside:Qa,onFocusOutside:Wa,onInteractOutside:eb}=a;a=Jf(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));
const jb=Us("PopoverContent",k),Mb=$u(k);xb();return(0,pk.createElement)(VB,{asChild:!0,loop:!0,trapped:F,onMountAutoFocus:Y,onUnmountAutoFocus:ka},(0,pk.createElement)($x,{asChild:!0,disableOutsidePointerEvents:oa,onInteractOutside:eb,onEscapeKeyDown:Fa,onPointerDownOutside:Qa,onFocusOutside:Wa,onDismiss:()=>jb.onOpenChange(!1)},(0,pk.createElement)(fy,$e({"data-state":jb.open?"open":"closed",role:"dialog",id:jb.contentId},Mb,a,{ref:d,style:kf(me({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),
nC=(0,pk.forwardRef)((a,d)=>{var {__scopePopover:k}=a;a=Jf(a,["__scopePopover"]);k=$u(k);return(0,pk.createElement)(MB,$e({},k,a,{ref:d}))}),Vs=a=>{const {__scopePopover:d,children:k,open:F,defaultOpen:Y,onOpenChange:ka,modal:oa=!1}=a;a=$u(d);const Fa=(0,pk.useRef)(null),[Qa,Wa]=(0,pk.useState)(!1),[eb=!1,jb]=$h({prop:F,defaultProp:Y,onChange:ka});return(0,pk.createElement)(gy,a,(0,pk.createElement)(xy,{scope:d,contentId:hi(),triggerRef:Fa,open:eb,onOpenChange:jb,onOpenToggle:(0,pk.useCallback)(()=>
jb(Mb=>!Mb),[jb]),hasCustomAnchor:Qa,onCustomAnchorAdd:(0,pk.useCallback)(()=>Wa(!0),[]),onCustomAnchorRemove:(0,pk.useCallback)(()=>Wa(!1),[]),modal:oa},k))},zy=uf(V(22)),Eq=V(586),Ay=Ze(function(a){var {popoverSide:d="left",setGeometry:k,activeGeometry:F,chevron:Y=!0}=a;a=Jf(a,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:ka}}=zy.default.useContext(vj);const oa=[{id:"box",icon:"square",tooltip:ka("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:ka("whiteboard/circle")},
{id:"polygon",icon:"triangle",tooltip:ka("whiteboard/triangle")}];ka={id:"shapes",icon:"triangle-square-circle",tooltip:ka("whiteboard/shape")};ka=F?oa.find(Fa=>Fa.id===F):ka;return(0,Eq.jsxs)(Vs,{children:[(0,Eq.jsx)(yw,{asChild:!0,children:(0,Eq.jsxs)("div",kf(me({},a),{className:"tl-geometry-tools-pane-anchor",children:[(0,Eq.jsx)($p,kf(me({},ka),{tooltipSide:d})),Y&&(0,Eq.jsx)(Ih,{"data-selected":F,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,Eq.jsxs)(zw,{className:"tl-popover-content",
side:d,sideOffset:15,children:[(0,Eq.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":"flex-row"}`,children:oa.map(Fa=>(0,Eq.jsx)($p,{id:Fa.id,icon:Fa.icon,tooltip:F?Fa.tooltip:"",handleClick:k,tooltipSide:d},Fa.id))}),(0,Eq.jsx)(nC,{className:"tl-popover-arrow"})]})]})}),Hi=V(22),By=V(22),Cy=["PageUp","PageDown"],Dy=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],av={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown",
"ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[Aw,pH,qH]=Vb("Slider"),[Ey]=mk("Slider",[qH]),[fr,Dp]=Ey("Slider"),Ut=(0,Hi.forwardRef)((a,d)=>{function k(Se){const Xe=Nh(ne,Se);ka(Se,Xe)}function F(Se){ka(Se,wd.current)}function Y(){ne[wd.current]!==Bf.current[wd.current]&&vc(ne)}function ka(Se,Xe,{commit:Xd}={commit:!1}){const nd=(String(Wa).split(".")[1]||"").length;Se=Fg(Math.round((Se-Fa)/Wa)*Wa+Fa,nd);
const Yd=jg(Se,[Fa,Qa]);Ke((ld=[])=>{const Hd=eg(ld,Yd,Xe);var Oe=Mb*Wa;if(0<Oe){const mf=Gh(Hd);Oe=Math.min(...mf)>=Oe}else Oe=!0;return Oe?(wd.current=Hd.indexOf(Yd),(Oe=String(Hd)!==String(ld))&&Xd&&vc(Hd),Oe?Hd:ld):ld})}const {name:oa,min:Fa=0,max:Qa=100,step:Wa=1,orientation:eb="horizontal",disabled:jb=!1,minStepsBetweenThumbs:Mb=0,defaultValue:Ub=[Fa],value:Ob,onValueChange:jc=()=>{},onValueCommit:vc=()=>{},inverted:Zb=!1}=a,oc=Jf(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),
[lc,Ic]=(0,Hi.useState)(null);d=ih(d,Se=>Ic(Se));const Lc=(0,Hi.useRef)(new Set),wd=(0,Hi.useRef)(0);var Td="horizontal"===eb;const We=lc?!!lc.closest("form"):!0;Td=Td?rH:sH;const [ne=[],Ke]=$h({prop:Ob,defaultProp:Ub,onChange:Se=>{var Xe;null===(Xe=[...Lc.current][wd.current])||void 0===Xe||Xe.focus();jc(Se)}}),Bf=(0,Hi.useRef)(ne);return(0,Hi.createElement)(fr,{scope:a.__scopeSlider,disabled:jb,min:Fa,max:Qa,valueIndexToChangeRef:wd,thumbs:Lc.current,values:ne,orientation:eb},(0,Hi.createElement)(Aw.Provider,
{scope:a.__scopeSlider},(0,Hi.createElement)(Aw.Slot,{scope:a.__scopeSlider},(0,Hi.createElement)(Td,$e({"aria-disabled":jb,"data-disabled":jb?"":void 0},oc,{ref:d,onPointerDown:Wf(oc.onPointerDown,()=>{jb||(Bf.current=ne)}),min:Fa,max:Qa,inverted:Zb,onSlideStart:jb?void 0:k,onSlideMove:jb?void 0:F,onSlideEnd:jb?void 0:Y,onHomeKeyDown:()=>!jb&&ka(Fa,0,{commit:!0}),onEndKeyDown:()=>!jb&&ka(Qa,ne.length-1,{commit:!0}),onStepKeyDown:({event:Se,direction:Xe})=>{if(!jb){Se=Cy.includes(Se.key)||Se.shiftKey&&
Dy.includes(Se.key);const Xd=wd.current;ka(ne[Xd]+Wa*(Se?10:1)*Xe,Xd,{commit:!0})}}})))),We&&ne.map((Se,Xe)=>(0,Hi.createElement)(cp,{key:Xe,name:oa?oa+(1<ne.length?"[]":""):void 0,value:Se})))}),[Sr,Fy]=Ey("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),rH=(0,Hi.forwardRef)((a,d)=>{function k(oc){const lc=Ob.current||Mb.getBoundingClientRect(),Ic=Og([0,lc.width],Zb?[F,Y]:[Y,F]);Ob.current=lc;return Ic(oc-lc.left)}const {min:F,max:Y,dir:ka,inverted:oa,onSlideStart:Fa,onSlideMove:Qa,
onSlideEnd:Wa,onStepKeyDown:eb}=a,jb=Jf(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Mb,Ub]=(0,Hi.useState)(null);d=ih(d,oc=>Ub(oc));const Ob=(0,Hi.useRef)(),jc=sb(ka),vc="ltr"===jc,Zb=vc&&!oa||!vc&&oa;return(0,Hi.createElement)(Sr,{scope:a.__scopeSlider,startEdge:Zb?"left":"right",endEdge:Zb?"right":"left",direction:Zb?1:-1,size:"width"},(0,Hi.createElement)(Gy,$e({dir:jc,"data-orientation":"horizontal"},jb,{ref:d,style:kf(me({},jb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),
onSlideStart:oc=>{oc=k(oc.clientX);null===Fa||void 0===Fa||Fa(oc)},onSlideMove:oc=>{oc=k(oc.clientX);null===Qa||void 0===Qa||Qa(oc)},onSlideEnd:()=>{Ob.current=void 0;null===Wa||void 0===Wa||Wa()},onStepKeyDown:oc=>{const lc=av[Zb?"from-left":"from-right"].includes(oc.key);null===eb||void 0===eb||eb({event:oc,direction:lc?-1:1})}})))}),sH=(0,Hi.forwardRef)((a,d)=>{function k(Ob){const jc=Mb.current||jb.current.getBoundingClientRect(),vc=Og([0,jc.height],Ub?[Y,F]:[F,Y]);Mb.current=jc;return vc(Ob-
jc.top)}const {min:F,max:Y,inverted:ka,onSlideStart:oa,onSlideMove:Fa,onSlideEnd:Qa,onStepKeyDown:Wa}=a,eb=Jf(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),jb=(0,Hi.useRef)(null);d=ih(d,jb);const Mb=(0,Hi.useRef)(),Ub=!ka;return(0,Hi.createElement)(Sr,{scope:a.__scopeSlider,startEdge:Ub?"bottom":"top",endEdge:Ub?"top":"bottom",size:"height",direction:Ub?1:-1},(0,Hi.createElement)(Gy,$e({"data-orientation":"vertical"},eb,{ref:d,style:kf(me({},eb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),
onSlideStart:Ob=>{Ob=k(Ob.clientY);null===oa||void 0===oa||oa(Ob)},onSlideMove:Ob=>{Ob=k(Ob.clientY);null===Fa||void 0===Fa||Fa(Ob)},onSlideEnd:()=>{Mb.current=void 0;null===Qa||void 0===Qa||Qa()},onStepKeyDown:Ob=>{const jc=av[Ub?"from-bottom":"from-top"].includes(Ob.key);null===Wa||void 0===Wa||Wa({event:Ob,direction:jc?-1:1})}})))}),Gy=(0,Hi.forwardRef)((a,d)=>{const {__scopeSlider:k,onSlideStart:F,onSlideMove:Y,onSlideEnd:ka,onHomeKeyDown:oa,onEndKeyDown:Fa,onStepKeyDown:Qa}=a,Wa=Jf(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
eb=Dp("Slider",k);return(0,Hi.createElement)(Vl.span,$e({},Wa,{ref:d,onKeyDown:Wf(a.onKeyDown,jb=>{"Home"===jb.key?(oa(jb),jb.preventDefault()):"End"===jb.key?(Fa(jb),jb.preventDefault()):Cy.concat(Dy).includes(jb.key)&&(Qa(jb),jb.preventDefault())}),onPointerDown:Wf(a.onPointerDown,jb=>{const Mb=jb.target;Mb.setPointerCapture(jb.pointerId);jb.preventDefault();eb.thumbs.has(Mb)?Mb.focus():F(jb)}),onPointerMove:Wf(a.onPointerMove,jb=>{jb.target.hasPointerCapture(jb.pointerId)&&Y(jb)}),onPointerUp:Wf(a.onPointerUp,
jb=>{const Mb=jb.target;Mb.hasPointerCapture(jb.pointerId)&&(Mb.releasePointerCapture(jb.pointerId),ka(jb))})}))}),bf=(0,Hi.forwardRef)((a,d)=>{var {__scopeSlider:k}=a;a=Jf(a,["__scopeSlider"]);k=Dp("SliderTrack",k);return(0,Hi.createElement)(Vl.span,$e({"data-disabled":k.disabled?"":void 0,"data-orientation":k.orientation},a,{ref:d}))}),qg=(0,Hi.forwardRef)((a,d)=>{var {__scopeSlider:k}=a;const F=Jf(a,["__scopeSlider"]),Y=Dp("SliderRange",k);k=Fy("SliderRange",k);var ka=(0,Hi.useRef)(null);d=ih(d,
ka);var oa=Y.values.length;ka=Y.values.map(Fa=>Zg(Fa,Y.min,Y.max));oa=1<oa?Math.min(...ka):0;ka=100-Math.max(...ka);return(0,Hi.createElement)(Vl.span,$e({"data-orientation":Y.orientation,"data-disabled":Y.disabled?"":void 0},F,{ref:d,style:kf(me({},a.style),{[k.startEdge]:oa+"%",[k.endEdge]:ka+"%"})}))}),jf=(0,Hi.forwardRef)((a,d)=>{const k=pH(a.__scopeSlider),[F,Y]=(0,Hi.useState)(null);d=ih(d,oa=>Y(oa));const ka=(0,Hi.useMemo)(()=>F?k().findIndex(oa=>oa.ref.current===F):-1,[k,F]);return(0,Hi.createElement)(Tf,
$e({},a,{ref:d,index:ka}))}),Tf=(0,Hi.forwardRef)((a,d)=>{const {__scopeSlider:k,index:F}=a,Y=Jf(a,["__scopeSlider","index"]),ka=Dp("SliderThumb",k),oa=Fy("SliderThumb",k),[Fa,Qa]=(0,Hi.useState)(null);d=ih(d,Ub=>Qa(Ub));var Wa=Eh(Fa);const eb=ka.values[F],jb=void 0===eb?0:Zg(eb,ka.min,ka.max),Mb=Mi(F,ka.values.length);Wa=(Wa=null===Wa||void 0===Wa?void 0:Wa[oa.size])?hh(Wa,jb,oa.direction):0;(0,Hi.useEffect)(()=>{if(Fa)return ka.thumbs.add(Fa),()=>{ka.thumbs.delete(Fa)}},[Fa,ka.thumbs]);return(0,Hi.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[oa.startEdge]:`calc(${jb}% + ${Wa}px)`}},(0,Hi.createElement)(Aw.ItemSlot,{scope:a.__scopeSlider},(0,Hi.createElement)(Vl.span,$e({role:"slider","aria-label":a["aria-label"]||Mb,"aria-valuemin":ka.min,"aria-valuenow":eb,"aria-valuemax":ka.max,"aria-orientation":ka.orientation,"data-orientation":ka.orientation,"data-disabled":ka.disabled?"":void 0,tabIndex:ka.disabled?void 0:0},Y,{ref:d,style:void 0===eb?{display:"none"}:
a.style,onFocus:Wf(a.onFocus,()=>{ka.valueIndexToChangeRef.current=F})}))))}),cp=a=>{const {value:d}=a;a=Jf(a,["value"]);const k=(0,Hi.useRef)(null),F=Mj(d);(0,Hi.useEffect)(()=>{const Y=k.current,ka=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(F!==d&&ka){const oa=new Event("input",{bubbles:!0});ka.call(Y,d);Y.dispatchEvent(oa)}},[F,d]);return(0,Hi.createElement)("input",$e({style:{display:"none"}},a,{ref:k,defaultValue:d}))},zm=Ut,bv=bf,nl=qg,Fq=jf,Qe=uf(V(22)),
Zf=V(586),to=Ze(a=>{var {side:d,align:k,alignOffset:F,label:Y,arrow:ka,children:oa,border:Fa}=a;a=Jf(a,"side align alignOffset label arrow children border".split(" "));const Qa=Qe.useRef(null),[Wa,eb]=Qe.useState(!1),{viewport:{bounds:jb,camera:{point:Mb,zoom:Ub}}}=ef(),[Ob,jc]=Qe.useState(0);Qe.useEffect(()=>{if(Qa.current&&Wa){var vc=Qa.current.getBoundingClientRect();xf.boundsContain(jb,{minX:vc.x,minY:vc.y,maxX:vc.right,maxY:vc.bottom,width:vc.width,height:vc.height})||jc(Zb=>Zb+1)}},[Mb[0],Mb[1],
Ub,Wa]);return(0,Zf.jsxs)(Vs,{onOpenChange:vc=>eb(vc),children:[(0,Zf.jsx)(yw,kf(me({},a),{"data-border":Fa,className:"tl-button tl-popover-trigger-button",children:Y})),(0,Zf.jsxs)(zw,{ref:Qa,className:"tl-popover-content",align:k,alignOffset:F,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[oa,ka&&(0,Zf.jsx)(nC,{className:"tl-popover-arrow"})]},"popover-content-"+Ob)]})}),Ne=uf(V(22)),Il=V(586),oC=uf(V(22)),Af=V(22),Vt=V(31),jm=uf(V(22)),Pm=V(22),cv=V(22),
uo=V(31),Am="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const k=(0,cv.forwardRef)((F,Y)=>{var {asChild:ka}=F;F=Jf(F,["asChild"]);ka=ka?Bq:d;(0,cv.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,cv.createElement)(ka,$e({},F,{ref:Y}))});k.displayName=`Primitive.${d}`;return kf(me({},a),{[d]:k})},{}),gr,aq=(0,Pm.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vg=(0,Pm.forwardRef)((a,d)=>{var k;
const {disableOutsidePointerEvents:F=!1,onEscapeKeyDown:Y,onPointerDownOutside:ka,onFocusOutside:oa,onInteractOutside:Fa,onDismiss:Qa}=a,Wa=Jf(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),eb=(0,Pm.useContext)(aq),[jb,Mb]=(0,Pm.useState)(null),Ub=null!==(k=null===jb||void 0===jb?void 0:jb.ownerDocument)&&void 0!==k?k:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Ob]=(0,Pm.useState)({});d=ih(d,lc=>Mb(lc));
k=Array.from(eb.layers);var [jc]=[...eb.layersWithOutsidePointerEventsDisabled].slice(-1);jc=k.indexOf(jc);const vc=jb?k.indexOf(jb):-1;k=0<eb.layersWithOutsidePointerEventsDisabled.size;const Zb=vc>=jc;jc=Vj(lc=>{const Ic=lc.target,Lc=[...eb.branches].some(wd=>wd.contains(Ic));Zb&&!Lc&&(null===ka||void 0===ka||ka(lc),null===Fa||void 0===Fa||Fa(lc),lc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Ub);const oc=ci(lc=>{const Ic=lc.target;[...eb.branches].some(Lc=>Lc.contains(Ic))||(null===oa||void 0===
oa||oa(lc),null===Fa||void 0===Fa||Fa(lc),lc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Ub);Fk(lc=>{vc===eb.layers.size-1&&(null===Y||void 0===Y||Y(lc),!lc.defaultPrevented&&Qa&&(lc.preventDefault(),Qa()))},Ub);(0,Pm.useEffect)(()=>{if(jb)return F&&(0===eb.layersWithOutsidePointerEventsDisabled.size&&(gr=Ub.body.style.pointerEvents,Ub.body.style.pointerEvents="none"),eb.layersWithOutsidePointerEventsDisabled.add(jb)),eb.layers.add(jb),Ni(),()=>{F&&1===eb.layersWithOutsidePointerEventsDisabled.size&&
(Ub.body.style.pointerEvents=gr)}},[jb,Ub,F,eb]);(0,Pm.useEffect)(()=>()=>{jb&&(eb.layers.delete(jb),eb.layersWithOutsidePointerEventsDisabled.delete(jb),Ni())},[jb,eb]);(0,Pm.useEffect)(()=>{const lc=()=>Ob({});document.addEventListener("dismissableLayer.update",lc);return()=>document.removeEventListener("dismissableLayer.update",lc)},[]);return(0,Pm.createElement)(Am.div,$e({},Wa,{ref:d,style:me({pointerEvents:k?Zb?"auto":"none":void 0},a.style),onFocusCapture:Wf(a.onFocusCapture,oc.onFocusCapture),
onBlurCapture:Wf(a.onBlurCapture,oc.onBlurCapture),onPointerDownCapture:Wf(a.onPointerDownCapture,jc.onPointerDownCapture)}))}),Bm=V(22),Gq={bubbles:!1,cancelable:!0},pC=(0,Bm.forwardRef)((a,d)=>{const {loop:k=!1,trapped:F=!1,onMountAutoFocus:Y,onUnmountAutoFocus:ka}=a;a=Jf(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [oa,Fa]=(0,Bm.useState)(null),Qa=Hf(Y),Wa=Hf(ka),eb=(0,Bm.useRef)(null);d=ih(d,Ub=>Fa(Ub));const jb=(0,Bm.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,Bm.useEffect)(()=>{if(F){let Ub=function(jc){!jb.paused&&oa&&(jc=jc.target,oa.contains(jc)?eb.current=jc:km(eb.current,{select:!0}))},Ob=function(jc){!jb.paused&&oa&&(oa.contains(jc.relatedTarget)||km(eb.current,{select:!0}))};document.addEventListener("focusin",Ub);document.addEventListener("focusout",Ob);return()=>{document.removeEventListener("focusin",Ub);document.removeEventListener("focusout",Ob)}}},[F,oa,jb.paused]);(0,Bm.useEffect)(()=>{if(oa){Tr.add(jb);const Ub=document.activeElement;
if(!oa.contains(Ub)){const Ob=new CustomEvent("focusScope.autoFocusOnMount",Gq);oa.addEventListener("focusScope.autoFocusOnMount",Qa);oa.dispatchEvent(Ob);Ob.defaultPrevented||(nj(Jg(Gm(oa)),{select:!0}),document.activeElement===Ub&&km(oa))}return()=>{oa.removeEventListener("focusScope.autoFocusOnMount",Qa);setTimeout(()=>{const Ob=new CustomEvent("focusScope.autoFocusOnUnmount",Gq);oa.addEventListener("focusScope.autoFocusOnUnmount",Wa);oa.dispatchEvent(Ob);Ob.defaultPrevented||km(null!==Ub&&void 0!==
Ub?Ub:document.body,{select:!0});oa.removeEventListener("focusScope.autoFocusOnUnmount",Wa);Tr.remove(jb)},0)}}},[oa,Qa,Wa,jb]);const Mb=(0,Bm.useCallback)(Ub=>{if((k||F)&&!jb.paused){var Ob=document.activeElement;if("Tab"===Ub.key&&!Ub.altKey&&!Ub.ctrlKey&&!Ub.metaKey&&Ob){const vc=Ub.currentTarget;var jc=vc;const Zb=Gm(jc),oc=Jm(Zb,jc);jc=Jm(Zb.reverse(),jc);const [lc,Ic]=[oc,jc];lc&&Ic?Ub.shiftKey||Ob!==Ic?Ub.shiftKey&&Ob===lc&&(Ub.preventDefault(),k&&km(Ic,{select:!0})):(Ub.preventDefault(),k&&
km(lc,{select:!0})):Ob===vc&&Ub.preventDefault()}}},[k,F,jb.paused]);return(0,Bm.createElement)(Am.div,$e({tabIndex:-1},a,{ref:d,onKeyDown:Mb}))}),Tr=function(){let a=[];return{add(d){const k=a[0];d===k||null!==k&&void 0!==k&&k.pause();a=Nn(a,d);a.unshift(d)},remove(d){var k;a=Nn(a,d);null===(k=a[0])||void 0===k||k.resume()}}}(),mg=V(22),[Bw,Hq]=mk("Popper"),[eh,Wt]=Bw("Popper"),Xk=(0,mg.forwardRef)((a,d)=>{const {__scopePopper:k,virtualRef:F}=a;a=Jf(a,["__scopePopper","virtualRef"]);const Y=Wt("PopperAnchor",
k),ka=(0,mg.useRef)(null);d=ih(d,ka);(0,mg.useEffect)(()=>{Y.onAnchorChange((null===F||void 0===F?void 0:F.current)||ka.current)});return F?null:(0,mg.createElement)(Am.div,$e({},a,{ref:d}))}),[Cm]=Bw("PopperContent"),[Xt,dv]=Bw("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Hy=(0,mg.forwardRef)((a,d)=>{var k,F,Y,ka,oa,Fa,Qa,Wa;const {__scopePopper:eb,side:jb="bottom",sideOffset:Mb=0,align:Ub="center",alignOffset:Ob=0,arrowPadding:jc=0,collisionBoundary:vc=[],collisionPadding:Zb=0,sticky:oc=
"partial",hideWhenDetached:lc=!1,avoidCollisions:Ic=!0,onPlaced:Lc}=a,wd=Jf(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),Td=Wt("PopperContent",eb),[We,ne]=(0,mg.useState)(null);d=ih(d,Nq=>ne(Nq));const [Ke,Bf]=(0,mg.useState)(null);var Se=Eh(Ke),Xe=null!==(k=null===Se||void 0===Se?void 0:Se.width)&&void 0!==k?k:0;k=null!==(F=null===Se||void 0===Se?void 0:Se.height)&&void 0!==F?F:0;F=
jb+("center"!==Ub?"-"+Ub:"");Se="number"===typeof Zb?Zb:me({top:0,right:0,bottom:0,left:0},Zb);const Xd=Array.isArray(vc)?vc:[vc],nd=0<Xd.length;Se={padding:Se,boundary:Xd.filter(Eo),altBoundary:nd};const {reference:Yd,floating:ld,strategy:Hd,x:Oe,y:mf,placement:Pf,middlewareData:Cf,update:dg}=lg({strategy:"fixed",placement:F,whileElementsMounted:Ri,middleware:[Yt(),FB({mainAxis:Mb+k,alignmentAxis:Ob}),Ic?GB(me({mainAxis:!0,crossAxis:!1,limiter:"partial"===oc?HB():void 0},Se)):void 0,Ke?KB({element:Ke,
padding:jc}):void 0,Ic?DB(me({},Se)):void 0,pG(kf(me({},Se),{apply:({elements:Nq,availableWidth:vu,availableHeight:DD})=>{Nq.floating.style.setProperty("--radix-popper-available-width",`${vu}px`);Nq.floating.style.setProperty("--radix-popper-available-height",`${DD}px`)}})),Ym({arrowWidth:Xe,arrowHeight:k}),lc?EB({strategy:"referenceHidden"}):void 0].filter(jo)});Fn(()=>{Yd(Td.anchor)},[Yd,Td.anchor]);const fh=null!==Oe&&null!==mf,[Lf,ah]=On(Pf),Ch=Hf(Lc);Fn(()=>{fh&&(null===Ch||void 0===Ch||Ch())},
[fh,Ch]);Xe=null===(Y=Cf.arrow)||void 0===Y?void 0:Y.x;Y=null===(ka=Cf.arrow)||void 0===ka?void 0:ka.y;ka=0!==(null===(oa=Cf.arrow)||void 0===oa?void 0:oa.centerOffset);const [Hj,tl]=(0,mg.useState)();Fn(()=>{We&&tl(window.getComputedStyle(We).zIndex)},[We]);const {hasParent:Ll,positionUpdateFns:lq}=dv("PopperContent",eb),tr=!Ll;(0,mg.useLayoutEffect)(()=>{if(!tr)return lq.add(dg),()=>{lq.delete(dg)}},[tr,lq,dg]);Fn(()=>{tr&&fh&&Array.from(lq).reverse().forEach(Nq=>requestAnimationFrame(Nq))},[tr,
fh,lq]);oa=kf(me({"data-side":Lf,"data-align":ah},wd),{ref:d,style:kf(me({},wd.style),{animation:fh?void 0:"none",opacity:null!==(Fa=Cf.hide)&&void 0!==Fa&&Fa.referenceHidden?0:void 0})});return(0,mg.createElement)("div",{ref:ld,"data-radix-popper-content-wrapper":"",style:{position:Hd,left:0,top:0,transform:fh?`translate3d(${Math.round(Oe)}px, ${Math.round(mf)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Hj,["--radix-popper-transform-origin"]:[null===(Qa=Cf.transformOrigin)||
void 0===Qa?void 0:Qa.x,null===(Wa=Cf.transformOrigin)||void 0===Wa?void 0:Wa.y].join(" ")},dir:a.dir},(0,mg.createElement)(Cm,{scope:eb,placedSide:Lf,onArrowChange:Bf,arrowX:Xe,arrowY:Y,shouldHideArrow:ka},tr?(0,mg.createElement)(Xt,{scope:eb,hasParent:!0,positionUpdateFns:lq},(0,mg.createElement)(Am.div,oa)):(0,mg.createElement)(Am.div,oa)))}),Yt=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:k}=a,{width:F,height:Y}=d.reference;k.floating.style.setProperty("--radix-popper-anchor-width",
`${F}px`);k.floating.style.setProperty("--radix-popper-anchor-height",`${Y}px`);return{}}}),Ym=a=>({name:"transformOrigin",options:a,fn(d){var k,F,Y,ka,oa;const {placement:Fa,rects:Qa,middlewareData:Wa}=d,eb=(d=0!==(null===(k=Wa.arrow)||void 0===k?void 0:k.centerOffset))?0:a.arrowWidth;k=d?0:a.arrowHeight;const [jb,Mb]=On(Fa),Ub={start:"0%",center:"50%",end:"100%"}[Mb],Ob=(null!==(F=null===(Y=Wa.arrow)||void 0===Y?void 0:Y.x)&&void 0!==F?F:0)+eb/2;F=(null!==(ka=null===(oa=Wa.arrow)||void 0===oa?void 0:
oa.y)&&void 0!==ka?ka:0)+k/2;oa=ka="";"bottom"===jb?(ka=d?Ub:`${Ob}px`,oa=`${-k}px`):"top"===jb?(ka=d?Ub:`${Ob}px`,oa=`${Qa.floating.height+k}px`):"right"===jb?(ka=`${-k}px`,oa=d?Ub:`${F}px`):"left"===jb&&(ka=`${Qa.floating.width+k}px`,oa=d?Ub:`${F}px`);return{data:{x:ka,y:oa}}}}),qC=a=>{const {__scopePopper:d,children:k}=a,[F,Y]=(0,mg.useState)(null);return(0,mg.createElement)(eh,{scope:d,anchor:F,onAnchorChange:Y},k)},rC=V(22),tH=uf(V(31)),uH=(0,rC.forwardRef)((a,d)=>{var k;const {container:F=null===
globalThis||void 0===globalThis?void 0:null===(k=globalThis.document)||void 0===k?void 0:k.body}=a;a=Jf(a,["container"]);return F?tH.default.createPortal((0,rC.createElement)(Am.div,$e({},a,{ref:d})),F):null}),hr=V(22),Ur=(0,hr.forwardRef)((a,d)=>(0,hr.createElement)(Am.span,$e({},a,{ref:d,style:me({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),Kk=[" ","Enter","ArrowUp","ArrowDown"],sC=
[" ","Enter"],[Zt,Cw,Vr]=function(a){var d=a+"CollectionProvider";const [k,F]=mk(d),[Y,ka]=k(d,{collectionRef:{current:null},itemMap:new Map}),oa=eb=>{const {scope:jb,children:Mb}=eb;eb=jm.default.useRef(null);const Ub=jm.default.useRef(new Map).current;return jm.default.createElement(Y,{scope:jb,itemMap:Ub,collectionRef:eb},Mb)};Object.assign(oa,{displayName:d});const Fa=a+"CollectionSlot";d=jm.default.forwardRef((eb,jb)=>{const {scope:Mb,children:Ub}=eb;eb=ka(Fa,Mb);jb=ih(jb,eb.collectionRef);return jm.default.createElement(Bq,
{ref:jb},Ub)});Object.assign(d,{displayName:Fa});const Qa=a+"CollectionItemSlot",Wa=jm.default.forwardRef((eb,jb)=>{const {scope:Mb,children:Ub}=eb,Ob=Jf(eb,["scope","children"]),jc=jm.default.useRef(null);eb=ih(jb,jc);const vc=ka(Qa,Mb);jm.default.useEffect(()=>{vc.itemMap.set(jc,me({ref:jc},Ob));return()=>void vc.itemMap.delete(jc)});return jm.default.createElement(Bq,{["data-radix-collection-item"]:"",ref:eb},Ub)});Object.assign(Wa,{displayName:Qa});return[{Provider:oa,Slot:d,ItemSlot:Wa},function(eb){const jb=
ka(a+"CollectionConsumer",eb);return jm.default.useCallback(()=>{const Mb=jb.collectionRef.current;if(!Mb)return[];const Ub=Array.from(Mb.querySelectorAll("[data-radix-collection-item]"));return Array.from(jb.itemMap.values()).sort((Ob,jc)=>Ub.indexOf(Ob.ref.current)-Ub.indexOf(jc.ref.current))},[jb.collectionRef,jb.itemMap])},F]}("Select"),[$t]=mk("Select",[Vr,Hq]),au=Hq(),[vH,Iq]=$t("Select"),[Iy,Jy]=$t("Select"),Ky=(0,Af.forwardRef)((a,d)=>{const {__scopeSelect:k,disabled:F=!1}=a;a=Jf(a,["__scopeSelect",
"disabled"]);const Y=au(k),ka=Iq("SelectTrigger",k),oa=ka.disabled||F;d=ih(d,ka.onTriggerChange);const Fa=Cw(k),[Qa,Wa,eb]=Xl(jb=>{const Mb=Fa().filter(Ob=>!Ob.disabled),Ub=Mb.find(Ob=>Ob.value===ka.value);jb=Hm(Mb,jb,Ub);if(void 0!==jb)ka.onValueChange(jb.value)});return(0,Af.createElement)(Xk,$e({asChild:!0},Y),(0,Af.createElement)(Am.button,$e({type:"button",role:"combobox","aria-controls":ka.contentId,"aria-expanded":ka.open,"aria-required":ka.required,"aria-autocomplete":"none",dir:ka.dir,"data-state":ka.open?
"open":"closed",disabled:oa,"data-disabled":oa?"":void 0,"data-placeholder":void 0===ka.value?"":void 0},a,{ref:d,onClick:Wf(a.onClick,jb=>{jb.currentTarget.focus()}),onPointerDown:Wf(a.onPointerDown,jb=>{const Mb=jb.target;Mb.hasPointerCapture(jb.pointerId)&&Mb.releasePointerCapture(jb.pointerId);0===jb.button&&!1===jb.ctrlKey&&(oa||(ka.onOpenChange(!0),eb()),ka.triggerPointerDownPosRef.current={x:Math.round(jb.pageX),y:Math.round(jb.pageY)},jb.preventDefault())}),onKeyDown:Wf(a.onKeyDown,jb=>{const Mb=
""!==Qa.current;jb.ctrlKey||jb.altKey||jb.metaKey||1!==jb.key.length||Wa(jb.key);Mb&&" "===jb.key||!Kk.includes(jb.key)||(oa||(ka.onOpenChange(!0),eb()),jb.preventDefault())})})))}),tC=(0,Af.forwardRef)((a,d)=>{const {__scopeSelect:k,children:F,placeholder:Y}=a;a=Jf(a,["__scopeSelect","className","style","children","placeholder"]);const ka=Iq("SelectValue",k),{onValueNodeHasChildrenChange:oa}=ka,Fa=void 0!==F;d=ih(d,ka.onValueNodeChange);Fn(()=>{oa(Fa)},[oa,Fa]);return(0,Af.createElement)(Am.span,
$e({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===ka.value&&void 0!==Y?Y:F)}),uC=(0,Af.forwardRef)((a,d)=>{const {children:k}=a;a=Jf(a,["__scopeSelect","children"]);return(0,Af.createElement)(Am.span,$e({"aria-hidden":!0},a,{ref:d}),k||"▼")}),vC=(0,Af.forwardRef)((a,d)=>{const k=Iq("SelectContent",a.__scopeSelect),[F,Y]=(0,Af.useState)();Fn(()=>{Y(new DocumentFragment)},[]);return k.open?(0,Af.createElement)(Ly,$e({},a,{ref:d})):F?(0,Vt.createPortal)((0,Af.createElement)(Wr,{scope:a.__scopeSelect},
(0,Af.createElement)(Zt.Slot,{scope:a.__scopeSelect},(0,Af.createElement)("div",null,a.children))),F):null}),[Wr,dp]=$t("SelectContent"),Ly=(0,Af.forwardRef)((a,d)=>{const {__scopeSelect:k,position:F="item-aligned",onCloseAutoFocus:Y,onEscapeKeyDown:ka,onPointerDownOutside:oa,side:Fa,sideOffset:Qa,align:Wa,alignOffset:eb,arrowPadding:jb,collisionBoundary:Mb,collisionPadding:Ub,sticky:Ob,hideWhenDetached:jc,avoidCollisions:vc}=a;a=Jf(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));
const Zb=Iq("SelectContent",k),[oc,lc]=(0,Af.useState)(null),[Ic,Lc]=(0,Af.useState)(null);d=ih(d,Lf=>lc(Lf));const [wd,Td]=(0,Af.useState)(null),[We,ne]=(0,Af.useState)(null),Ke=Cw(k),[Bf,Se]=(0,Af.useState)(!1),Xe=(0,Af.useRef)(!1);(0,Af.useEffect)(()=>{if(oc)return ny(oc)},[oc]);xb();const Xd=(0,Af.useCallback)(Lf=>{const [ah,...Ch]=Ke().map(Ll=>Ll.ref.current),[Hj]=Ch.slice(-1),tl=document.activeElement;for(const Ll of Lf){if(Ll===tl)break;null===Ll||void 0===Ll||Ll.scrollIntoView({block:"nearest"});
Ll===ah&&Ic&&(Ic.scrollTop=0);Ll===Hj&&Ic&&(Ic.scrollTop=Ic.scrollHeight);null===Ll||void 0===Ll||Ll.focus();if(document.activeElement!==tl)break}},[Ke,Ic]),nd=(0,Af.useCallback)(()=>Xd([wd,oc]),[Xd,wd,oc]);(0,Af.useEffect)(()=>{Bf&&nd()},[Bf,nd]);const {onOpenChange:Yd,triggerPointerDownPosRef:ld}=Zb;(0,Af.useEffect)(()=>{if(oc){var Lf=0,ah=0;const Ch=tl=>{var Ll,lq,tr,Nq;Lf=Math.abs(Math.round(tl.pageX)-(null!==(Ll=null===(lq=ld.current)||void 0===lq?void 0:lq.x)&&void 0!==Ll?Ll:0));ah=Math.abs(Math.round(tl.pageY)-
(null!==(tr=null===(Nq=ld.current)||void 0===Nq?void 0:Nq.y)&&void 0!==tr?tr:0))},Hj=tl=>{10>=Lf&&10>=ah?tl.preventDefault():oc.contains(tl.target)||Yd(!1);document.removeEventListener("pointermove",Ch);ld.current=null};null!==ld.current&&(document.addEventListener("pointermove",Ch),document.addEventListener("pointerup",Hj,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Ch);document.removeEventListener("pointerup",Hj,{capture:!0})}}},[oc,Yd,ld]);(0,Af.useEffect)(()=>{const Lf=
()=>Yd(!1);window.addEventListener("blur",Lf);window.addEventListener("resize",Lf);return()=>{window.removeEventListener("blur",Lf);window.removeEventListener("resize",Lf)}},[Yd]);const [Hd,Oe]=Xl(Lf=>{const ah=Ke().filter(tl=>!tl.disabled),Ch=ah.find(tl=>tl.ref.current===document.activeElement),Hj=Hm(ah,Lf,Ch);Hj&&setTimeout(()=>Hj.ref.current.focus())}),mf=(0,Af.useCallback)((Lf,ah,Ch)=>{Ch=!Xe.current&&!Ch;if(void 0!==Zb.value&&Zb.value===ah||Ch)Td(Lf),Ch&&(Xe.current=!0)},[Zb.value]),Pf=(0,Af.useCallback)(()=>
null===oc||void 0===oc?void 0:oc.focus(),[oc]),Cf=(0,Af.useCallback)((Lf,ah,Ch)=>{Ch=!Xe.current&&!Ch;(void 0!==Zb.value&&Zb.value===ah||Ch)&&ne(Lf)},[Zb.value]),dg="popper"===F?My:wC,fh=dg===My?{side:Fa,sideOffset:Qa,align:Wa,alignOffset:eb,arrowPadding:jb,collisionBoundary:Mb,collisionPadding:Ub,sticky:Ob,hideWhenDetached:jc,avoidCollisions:vc}:{};return(0,Af.createElement)(Wr,{scope:k,content:oc,viewport:Ic,onViewportChange:Lc,itemRefCallback:mf,selectedItem:wd,onItemLeave:Pf,itemTextRefCallback:Cf,
focusSelectedItem:nd,selectedItemText:We,position:F,isPositioned:Bf,searchRef:Hd},(0,Af.createElement)(Hl,{as:Bq,allowPinchZoom:!0},(0,Af.createElement)(pC,{asChild:!0,trapped:Zb.open,onMountAutoFocus:Lf=>{Lf.preventDefault()},onUnmountAutoFocus:Wf(Y,Lf=>{var ah;null===(ah=Zb.trigger)||void 0===ah||ah.focus({preventScroll:!0});Lf.preventDefault()})},(0,Af.createElement)(Vg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:ka,onPointerDownOutside:oa,onFocusOutside:Lf=>Lf.preventDefault(),
onDismiss:()=>Zb.onOpenChange(!1)},(0,Af.createElement)(dg,$e({role:"listbox",id:Zb.contentId,"data-state":Zb.open?"open":"closed",dir:Zb.dir,onContextMenu:Lf=>Lf.preventDefault()},a,fh,{onPlaced:()=>Se(!0),ref:d,style:me({display:"flex",flexDirection:"column",outline:"none"},a.style),onKeyDown:Wf(a.onKeyDown,Lf=>{var ah=Lf.ctrlKey||Lf.altKey||Lf.metaKey;"Tab"===Lf.key&&Lf.preventDefault();ah||1!==Lf.key.length||Oe(Lf.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Lf.key)){let Ch=Ke().filter(Hj=>
!Hj.disabled).map(Hj=>Hj.ref.current);["ArrowUp","End"].includes(Lf.key)&&(Ch=Ch.slice().reverse());["ArrowUp","ArrowDown"].includes(Lf.key)&&(ah=Ch.indexOf(Lf.target),Ch=Ch.slice(ah+1));setTimeout(()=>Xd(Ch));Lf.preventDefault()}})}))))))}),wC=(0,Af.forwardRef)((a,d)=>{const {__scopeSelect:k,onPlaced:F}=a;a=Jf(a,["__scopeSelect","onPlaced"]);const Y=Iq("SelectContent",k);var ka=dp("SelectContent",k);const [oa,Fa]=(0,Af.useState)(null),[Qa,Wa]=(0,Af.useState)(null);d=ih(d,Ic=>Wa(Ic));const eb=Cw(k),
jb=(0,Af.useRef)(!1),Mb=(0,Af.useRef)(!0),{viewport:Ub,selectedItem:Ob,selectedItemText:jc,focusSelectedItem:vc}=ka,Zb=(0,Af.useCallback)(()=>{if(Y.trigger&&Y.valueNode&&oa&&Qa&&Ub&&Ob&&jc){var Ic=Y.trigger.getBoundingClientRect(),Lc=Qa.getBoundingClientRect(),wd=Y.valueNode.getBoundingClientRect(),Td=jc.getBoundingClientRect();"rtl"!==Y.dir?(Td=wd.left-(Td.left-Lc.left),wd=Ic.width+(Ic.left-Td),Lc=jg(Td,[10,window.innerWidth-10-Math.max(wd,Lc.width)]),oa.style.minWidth=wd+"px",oa.style.left=Lc+"px"):
(Td=window.innerWidth-wd.right-(Lc.right-Td.right),wd=Ic.width+(window.innerWidth-Ic.right-Td),Lc=jg(Td,[10,window.innerWidth-10-Math.max(wd,Lc.width)]),oa.style.minWidth=wd+"px",oa.style.right=Lc+"px");const Xe=eb();Lc=window.innerHeight-20;var We=Ub.scrollHeight,ne=window.getComputedStyle(Qa);wd=parseInt(ne.borderTopWidth,10);var Ke=parseInt(ne.paddingTop,10);Td=parseInt(ne.borderBottomWidth,10);ne=parseInt(ne.paddingBottom,10);var Bf=wd+Ke+We+ne+Td;We=Math.min(5*Ob.offsetHeight,Bf);var Se=window.getComputedStyle(Ub);
ne=parseInt(Se.paddingTop,10);Se=parseInt(Se.paddingBottom,10);const Xd=Ic.top+Ic.height/2-10,nd=Lc-Xd;Ic=Ob.offsetHeight/2;Ke=wd+Ke+(Ob.offsetTop+Ic);Bf-=Ke;Ke<=Xd?(wd=Ob===Xe[Xe.length-1].ref.current,oa.style.bottom="0px",oa.style.height=Ke+Math.max(nd,Ic+(wd?Se:0)+(Qa.clientHeight-Ub.offsetTop-Ub.offsetHeight)+Td)+"px"):(Td=Ob===Xe[0].ref.current,oa.style.top="0px",oa.style.height=Math.max(Xd,wd+Ub.offsetTop+(Td?ne:0)+Ic)+Bf+"px",Ub.scrollTop=Ke-Xd+Ub.offsetTop);oa.style.margin="10px 0";oa.style.minHeight=
We+"px";oa.style.maxHeight=Lc+"px";null===F||void 0===F||F();requestAnimationFrame(()=>jb.current=!0)}},[eb,Y.trigger,Y.valueNode,oa,Qa,Ub,Ob,jc,Y.dir,F]);Fn(()=>Zb(),[Zb]);const [oc,lc]=(0,Af.useState)();Fn(()=>{Qa&&lc(window.getComputedStyle(Qa).zIndex)},[Qa]);ka=(0,Af.useCallback)(Ic=>{Ic&&!0===Mb.current&&(Zb(),null===vc||void 0===vc||vc(),Mb.current=!1)},[Zb,vc]);return(0,Af.createElement)(bu,{scope:k,contentWrapper:oa,shouldExpandOnScrollRef:jb,onScrollButtonChange:ka},(0,Af.createElement)("div",
{ref:Fa,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:oc}},(0,Af.createElement)(Am.div,$e({},a,{ref:d,style:me({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),My=(0,Af.forwardRef)((a,d)=>{const {__scopeSelect:k,align:F="start",collisionPadding:Y=10}=a;a=Jf(a,["__scopeSelect","align","collisionPadding"]);const ka=au(k);return(0,Af.createElement)(Hy,$e({},ka,a,{ref:d,align:F,collisionPadding:Y,style:kf(me({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)",
"--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[bu,Xr]=$t("SelectContent",{}),ev=(0,Af.forwardRef)((a,d)=>{const {__scopeSelect:k}=a;a=Jf(a,["__scopeSelect"]);const F=dp("SelectViewport",k),Y=Xr("SelectViewport",k);d=ih(d,F.onViewportChange);const ka=
(0,Af.useRef)(0);return(0,Af.createElement)(Af.Fragment,null,(0,Af.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,Af.createElement)(Zt.Slot,{scope:k},(0,Af.createElement)(Am.div,$e({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:me({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:Wf(a.onScroll,
oa=>{oa=oa.currentTarget;const {contentWrapper:Fa,shouldExpandOnScrollRef:Qa}=Y;if(null!==Qa&&void 0!==Qa&&Qa.current&&Fa){var Wa=Math.abs(ka.current-oa.scrollTop);if(0<Wa){var eb=window.innerHeight-20,jb=parseFloat(Fa.style.minHeight);const Mb=parseFloat(Fa.style.height);jb=Math.max(jb,Mb);jb<eb&&(Wa=jb+Wa,eb=Math.min(eb,Wa),Wa-=eb,Fa.style.height=eb+"px","0px"===Fa.style.bottom&&(oa.scrollTop=0<Wa?Wa:0,Fa.style.justifyContent="flex-end"))}}ka.current=oa.scrollTop})}))))});$t("SelectGroup");var [fv,
gv]=$t("SelectItem"),Yr=(0,Af.forwardRef)((a,d)=>{const {__scopeSelect:k,value:F,disabled:Y=!1,textValue:ka}=a;a=Jf(a,["__scopeSelect","value","disabled","textValue"]);const oa=Iq("SelectItem",k),Fa=dp("SelectItem",k),Qa=oa.value===F,[Wa,eb]=(0,Af.useState)(null!==ka&&void 0!==ka?ka:""),[jb,Mb]=(0,Af.useState)(!1);d=ih(d,jc=>{var vc;return null===(vc=Fa.itemRefCallback)||void 0===vc?void 0:vc.call(Fa,jc,F,Y)});const Ub=hi(),Ob=()=>{Y||(oa.onValueChange(F),oa.onOpenChange(!1))};return(0,Af.createElement)(fv,
{scope:k,value:F,disabled:Y,textId:Ub,isSelected:Qa,onItemTextChange:(0,Af.useCallback)(jc=>{eb(vc=>{var Zb;return vc||(null!==(Zb=null===jc||void 0===jc?void 0:jc.textContent)&&void 0!==Zb?Zb:"").trim()})},[])},(0,Af.createElement)(Zt.ItemSlot,{scope:k,value:F,disabled:Y,textValue:Wa},(0,Af.createElement)(Am.div,$e({role:"option","aria-labelledby":Ub,"data-highlighted":jb?"":void 0,"aria-selected":Qa&&jb,"data-state":Qa?"checked":"unchecked","aria-disabled":Y||void 0,"data-disabled":Y?"":void 0,
tabIndex:Y?void 0:-1},a,{ref:d,onFocus:Wf(a.onFocus,()=>Mb(!0)),onBlur:Wf(a.onBlur,()=>Mb(!1)),onPointerUp:Wf(a.onPointerUp,Ob),onPointerMove:Wf(a.onPointerMove,jc=>{if(Y){var vc;null===(vc=Fa.onItemLeave)||void 0===vc||vc.call(Fa)}else jc.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Wf(a.onPointerLeave,jc=>{if(jc.currentTarget===document.activeElement){var vc;null===(vc=Fa.onItemLeave)||void 0===vc||vc.call(Fa)}}),onKeyDown:Wf(a.onKeyDown,jc=>{var vc;if(""===(null===(vc=Fa.searchRef)||
void 0===vc?void 0:vc.current)||" "!==jc.key)sC.includes(jc.key)&&Ob()," "===jc.key&&jc.preventDefault()})}))))}),Ep=(0,Af.forwardRef)((a,d)=>{var {__scopeSelect:k}=a;a=Jf(a,["__scopeSelect","className","style"]);const F=Iq("SelectItemText",k),Y=dp("SelectItemText",k),ka=gv("SelectItemText",k);k=Jy("SelectItemText",k);const [oa,Fa]=(0,Af.useState)(null);d=ih(d,Mb=>Fa(Mb),ka.onItemTextChange,Mb=>{var Ub;return null===(Ub=Y.itemTextRefCallback)||void 0===Ub?void 0:Ub.call(Y,Mb,ka.value,ka.disabled)});
const Qa=null===oa||void 0===oa?void 0:oa.textContent,Wa=(0,Af.useMemo)(()=>(0,Af.createElement)("option",{key:ka.value,value:ka.value,disabled:ka.disabled},Qa),[ka.disabled,ka.value,Qa]),{onNativeOptionAdd:eb,onNativeOptionRemove:jb}=k;Fn(()=>{eb(Wa);return()=>jb(Wa)},[eb,jb,Wa]);return(0,Af.createElement)(Af.Fragment,null,(0,Af.createElement)(Am.span,$e({id:ka.textId},a,{ref:d})),ka.isSelected&&F.valueNode&&!F.valueNodeHasChildren?(0,Vt.createPortal)(a.children,F.valueNode):null)}),xC=(0,Af.forwardRef)((a,
d)=>{const k=dp("SelectScrollUpButton",a.__scopeSelect),F=Xr("SelectScrollUpButton",a.__scopeSelect),[Y,ka]=(0,Af.useState)(!1);d=ih(d,F.onScrollButtonChange);Fn(()=>{if(k.viewport&&k.isPositioned){let oa=function(){ka(0<Fa.scrollTop)};const Fa=k.viewport;oa();Fa.addEventListener("scroll",oa);return()=>Fa.removeEventListener("scroll",oa)}},[k.viewport,k.isPositioned]);return Y?(0,Af.createElement)(Ws,$e({},a,{ref:d,onAutoScroll:()=>{const {viewport:oa,selectedItem:Fa}=k;oa&&Fa&&(oa.scrollTop-=Fa.offsetHeight)}})):
null}),ep=(0,Af.forwardRef)((a,d)=>{const k=dp("SelectScrollDownButton",a.__scopeSelect),F=Xr("SelectScrollDownButton",a.__scopeSelect),[Y,ka]=(0,Af.useState)(!1);d=ih(d,F.onScrollButtonChange);Fn(()=>{if(k.viewport&&k.isPositioned){let oa=function(){ka(Math.ceil(Fa.scrollTop)<Fa.scrollHeight-Fa.clientHeight)};const Fa=k.viewport;oa();Fa.addEventListener("scroll",oa);return()=>Fa.removeEventListener("scroll",oa)}},[k.viewport,k.isPositioned]);return Y?(0,Af.createElement)(Ws,$e({},a,{ref:d,onAutoScroll:()=>
{const {viewport:oa,selectedItem:Fa}=k;oa&&Fa&&(oa.scrollTop+=Fa.offsetHeight)}})):null}),Ws=(0,Af.forwardRef)((a,d)=>{const {__scopeSelect:k,onAutoScroll:F}=a;a=Jf(a,["__scopeSelect","onAutoScroll"]);const Y=dp("SelectScrollButton",k),ka=(0,Af.useRef)(null),oa=Cw(k),Fa=(0,Af.useCallback)(()=>{null!==ka.current&&(window.clearInterval(ka.current),ka.current=null)},[]);(0,Af.useEffect)(()=>()=>Fa(),[Fa]);Fn(()=>{var Qa;const Wa=oa().find(eb=>eb.ref.current===document.activeElement);null===Wa||void 0===
Wa||null===(Qa=Wa.ref.current)||void 0===Qa||Qa.scrollIntoView({block:"nearest"})},[oa]);return(0,Af.createElement)(Am.div,$e({"aria-hidden":!0},a,{ref:d,style:me({flexShrink:0},a.style),onPointerMove:Wf(a.onPointerMove,()=>{var Qa;null===(Qa=Y.onItemLeave)||void 0===Qa||Qa.call(Y);null===ka.current&&(ka.current=window.setInterval(F,50))}),onPointerLeave:Wf(a.onPointerLeave,()=>{Fa()})}))}),hv=(0,Af.forwardRef)((a,d)=>{const {value:k}=a;a=Jf(a,["value"]);const F=(0,Af.useRef)(null);d=ih(d,F);const Y=
Mj(k);(0,Af.useEffect)(()=>{const ka=F.current,oa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(Y!==k&&oa){const Fa=new Event("change",{bubbles:!0});oa.call(ka,k);ka.dispatchEvent(Fa)}},[Y,k]);return(0,Af.createElement)(Ur,{asChild:!0},(0,Af.createElement)("select",$e({},a,{ref:d,defaultValue:k})))});hv.displayName="BubbleSelect";var Zr=a=>{const {__scopeSelect:d,children:k,open:F,defaultOpen:Y,onOpenChange:ka,value:oa,defaultValue:Fa,onValueChange:Qa,dir:Wa,name:eb,
autoComplete:jb,disabled:Mb,required:Ub}=a,Ob=au(d),[jc,vc]=(0,Af.useState)(null),[Zb,oc]=(0,Af.useState)(null),[lc,Ic]=(0,Af.useState)(!1),Lc=sb(Wa),[wd=!1,Td]=$h({prop:F,defaultProp:Y,onChange:ka}),[We,ne]=$h({prop:oa,defaultProp:Fa,onChange:Qa}),Ke=(0,Af.useRef)(null),Bf=jc?!!jc.closest("form"):!0,[Se,Xe]=(0,Af.useState)(new Set),Xd=Array.from(Se).map(nd=>nd.props.value).join(";");return(0,Af.createElement)(qC,Ob,(0,Af.createElement)(vH,{required:Ub,scope:d,trigger:jc,onTriggerChange:vc,valueNode:Zb,
onValueNodeChange:oc,valueNodeHasChildren:lc,onValueNodeHasChildrenChange:Ic,contentId:hi(),value:We,onValueChange:ne,open:wd,onOpenChange:Td,dir:Lc,triggerPointerDownPosRef:Ke,disabled:Mb},(0,Af.createElement)(Zt.Provider,{scope:d},(0,Af.createElement)(Iy,{scope:a.__scopeSelect,onNativeOptionAdd:(0,Af.useCallback)(nd=>{Xe(Yd=>(new Set(Yd)).add(nd))},[]),onNativeOptionRemove:(0,Af.useCallback)(nd=>{Xe(Yd=>{Yd=new Set(Yd);Yd.delete(nd);return Yd})},[])},k)),Bf?(0,Af.createElement)(hv,{key:Xd,"aria-hidden":!0,
required:Ub,tabIndex:-1,name:eb,autoComplete:jb,value:We,onChange:nd=>ne(nd.target.value),disabled:Mb},void 0===We?(0,Af.createElement)("option",{value:""}):null,Array.from(Se)):null))},yC=Ky,AC=tC,BC=uC,Gn=a=>(0,Af.createElement)(uH,$e({asChild:!0},a)),Ny=vC,zC=ev,Mo=Yr,Gd=Ep,CC=xC,oi=ep,lh=V(586),DC=uf(V(22)),iv=V(586),Hn=V(586),EC=Ze(function(){const a=ef(),{handlers:{t:d}}=on.useContext(vj),k=on.useCallback(oa=>{a.api.setColor(oa)},[]),F=on.useCallback(oa=>{(oa=oa.currentTarget.dataset.tool)&&
a.selectTool(oa)},[]),[Y,ka]=on.useState(()=>{var oa;return null!=(oa=Object.values(yr).find(Fa=>Fa===a.selectedTool.id))?oa:Object.values(yr)[0]});on.useEffect(()=>{ka(oa=>{var Fa;return null!=(Fa=Object.values(yr).find(Qa=>Qa===a.selectedTool.id))?Fa:oa})},[a.selectedTool.id]);return(0,Hn.jsx)("div",{className:"tl-primary-tools","data-html2canvas-ignore":"true",children:(0,Hn.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,Hn.jsx)($p,{handleClick:()=>a.selectTool("select"),
tooltip:d("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,Hn.jsx)($p,{handleClick:()=>a.selectTool("move"),tooltip:d("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,Hn.jsx)(Rr,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,Hn.jsx)($p,{handleClick:()=>a.selectTool("logseq-portal"),tooltip:d("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,Hn.jsx)($p,{handleClick:()=>a.selectTool("pencil"),tooltip:d("whiteboard/draw"),
id:"pencil",icon:"ballpen"}),(0,Hn.jsx)($p,{handleClick:()=>a.selectTool("highlighter"),tooltip:d("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,Hn.jsx)($p,{handleClick:()=>a.selectTool("erase"),tooltip:d("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,Hn.jsx)($p,{handleClick:()=>a.selectTool("line"),tooltip:d("whiteboard/connector"),id:"line",icon:"connector"}),(0,Hn.jsx)($p,{handleClick:()=>a.selectTool("text"),tooltip:d("whiteboard/text"),id:"text",icon:"text"}),(0,Hn.jsx)(Ay,
{activeGeometry:Y,setGeometry:F}),(0,Hn.jsx)(Rr,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,Hn.jsx)(Ah,{popoverSide:"left",color:a.settings.color,setColor:k}),(0,Hn.jsx)(Wj,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),Oy=V(586),Dw=Ze(function(){const a=ef();return(0,Oy.jsxs)("div",{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,Oy.jsx)("div",{style:{flex:1}}),
(0,Oy.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),Xs=V(586),FC=Ze(function(){const a=ef();return(0,Xs.jsxs)(Xs.Fragment,{children:[If()&&(0,Xs.jsx)(Dw,{}),If()&&(0,Xs.jsx)(ap,{}),!a.readOnly&&(0,Xs.jsx)(EC,{}),(0,Xs.jsx)(kC,{})]})}),fp=uf(V(22)),Zm=uf(V(22)),Py=uf(V(22)),GC=uf(V(22)),ir=V(586),Qy=({id:a,showReferenceContent:d=!1})=>{var k;const {handlers:{isWhiteboardPage:F,redirectToPage:Y,sidebarAddBlock:ka,queryBlockByUUID:oa},renderers:{Breadcrumb:Fa,PageName:Qa}}=GC.default.useContext(vj);
var Wa="";let eb=Mk(a)?"B":"P",jb="";if(Mk(a)){Wa=oa(a);if(!Wa)return(0,ir.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});jb=Wa.content;Wa="whiteboard-shape"===(null==(k=Wa.properties)?void 0:k["ls-type"])?"link-to-whiteboard":"link-to-block"}else Wa=F(a)?"link-to-whiteboard":"link-to-page";k=jb&&23<jb.length?jb.slice(0,20)+"...":jb;return(0,ir.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Mb=>{Mb.stopPropagation();Mb.shiftKey?ka(a,
"B"===eb?"block":"page"):Y(a)},children:[(0,ir.jsx)(Ih,{name:Wa}),(0,ir.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===eb?(0,ir.jsx)(Qa,{pageName:a}):(0,ir.jsxs)(ir.Fragment,{children:[(0,ir.jsx)(Fa,{levelLimit:1,blockId:a,endSeparator:d}),d&&k]})})]})},Jl=uf(V(22)),vo=V(22),HC=["children"],cu="undefined"!==typeof document?vo.useLayoutEffect:vo.useEffect,xh=uf(V(22)),ai=V(22),IC=V(31),jv,Qm,wH="undefined"!=typeof document?ai.useLayoutEffect:ai.useEffect;!function(a){a[a.DEBUG=
0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(Qm||={});var JC=((jv={})[Qm.DEBUG]="debug",jv[Qm.INFO]="log",jv[Qm.WARN]="warn",jv[Qm.ERROR]="error",jv),jr=Xh(function(){var a=$f(Qm.ERROR);return{log:$f(function(d,k,F){var Y;void 0===F&&(F=Qm.INFO);F>=(null!=(Y=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?Y:a(4))&&console[JC[F]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",d,k)}),logLevel:a}},[],{singleton:!0}),wo=
Xh(function(){var a=Tg(),d=Tg(),k=$f(0),F=Tg(),Y=$f(0),ka=Tg(),oa=Tg(),Fa=$f(0),Qa=$f(0),Wa=$f(0),eb=$f(0),jb=Tg(),Mb=Tg(),Ub=$f(!1),Ob=$f(!1);return Vf(nf(a,gg(function(jc){return jc.scrollTop})),d),Vf(nf(a,gg(function(jc){return jc.scrollHeight})),oa),Vf(d,Y),{scrollContainerState:a,scrollTop:d,viewportHeight:ka,headerHeight:Fa,fixedHeaderHeight:Qa,fixedFooterHeight:Wa,footerHeight:eb,scrollHeight:oa,smoothScrollTargetReached:F,react18ConcurrentRendering:Ob,scrollTo:jb,scrollBy:Mb,statefulScrollTop:Y,
deviation:k,scrollingInProgress:Ub}},[],{singleton:!0}),mj={lvl:0},Ry=Xh(function(){return{recalcInProgress:$f(!1)}},[],{singleton:!0}),xH={offsetHeight:"height",offsetWidth:"width"},kr=Xh(function(a){var d=a[0].log,k=a[1].recalcInProgress;a=Tg();var F=Tg(),Y=Pi(F,0),ka=Tg(),oa=Tg(),Fa=$f(0),Qa=$f([]),Wa=$f(void 0),eb=$f(void 0),jb=$f(function(oc,lc){return Yl(oc,xH[lc])}),Mb=$f(void 0),Ub=$f(0),Ob={offsetTree:[],sizeTree:mj,groupOffsetTree:mj,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},
jc=Pi(nf(a,Bg(Qa,d,Ub),vm(Ii,Ob),Fi()),Ob);Vf(nf(Qa,Jh(function(oc){return 0<oc.length}),Bg(jc,Ub),gg(function(oc){var lc=oc[0],Ic=oc[1],Lc=oc[2];oc=lc.reduce(function(wd,Td,We){return Ea(wd,Td,Xg(Td,Ic.offsetTree,Lc)||We)},mj);return Bh({},Ic,{groupIndices:lc,groupOffsetTree:oc})})),jc);Vf(nf(F,Bg(jc),Jh(function(oc){return oc[0]<oc[1].lastIndex}),gg(function(oc){var lc=oc[1];return[{startIndex:oc[0],endIndex:lc.lastIndex,size:lc.lastSize}]})),a);Vf(Wa,eb);var vc=Pi(nf(Wa,gg(function(oc){return void 0===
oc})),!0);Vf(nf(eb,Jh(function(oc){return void 0!==oc&&jc(4).sizeTree===mj}),gg(function(oc){return[{startIndex:0,endIndex:0,size:oc}]})),a);Ob=rk(nf(a,Bg(jc),vm(function(oc,lc){lc=lc[1];return{changed:lc!==oc.sizes,sizes:lc}},{changed:!1,sizes:Ob}),gg(function(oc){return oc.changed})));yh(nf(Fa,vm(function(oc,lc){return{diff:oc.prev-lc,prev:lc}},{diff:0,prev:0}),gg(function(oc){return oc.diff})),function(oc){0<oc?(k(0,!0),ka(0,oc)):0>oc&&oa(0,oc)});yh(nf(Fa,Bg(d)),function(oc){0>oc[0]&&(0,oc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",
{firstItemIndex:Fa},Qm.ERROR)});d=rk(ka);Vf(nf(ka,Bg(jc),gg(function(oc){var lc=oc[0];oc=oc[1];if(0<oc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return pb(oc.sizeTree).reduce(function(Ic,Lc){var wd=Lc.k;Lc=Lc.v;return{ranges:[].concat(Ic.ranges,[{startIndex:Ic.prevIndex,endIndex:wd+lc-1,size:Ic.prevSize}]),prevIndex:wd+lc,prevSize:Lc}},{ranges:[],prevIndex:0,prevSize:oc.lastSize}).ranges})),a);var Zb=rk(nf(oa,Bg(jc,Ub),gg(function(oc){return Xg(-oc[0],
oc[1].offsetTree,oc[2])})));return Vf(nf(oa,Bg(jc,Ub),gg(function(oc){var lc=oc[0],Ic=oc[1];oc=oc[2];if(0<Ic.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Lc=pb(Ic.sizeTree).reduce(function(wd,Td){return Ea(wd,Math.max(0,Td.k+lc),Td.v)},mj);return Bh({},Ic,{sizeTree:Lc},hj(Ic.offsetTree,0,Lc,oc))})),jc),{data:Mb,totalCount:F,sizeRanges:a,groupIndices:Qa,defaultItemSize:eb,fixedItemSize:Wa,unshiftWith:ka,shiftWith:oa,shiftWithOffset:Zb,beforeUnshiftWith:d,
firstItemIndex:Fa,gap:Ub,sizes:jc,listRefresh:Ob,statefulTotalCount:Y,trackItemSizes:vc,itemSize:jb}},Xi(jr,Ry),{singleton:!0}),yH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,kv=Xh(function(a){function d(){vc&&(vc(),vc=null);oc&&(oc(),oc=null);Zb&&(clearTimeout(Zb),Zb=null);Fa(0,!1)}var k=a[0],F=k.sizes,Y=k.totalCount,ka=k.listRefresh;k=k.gap;var oa=a[1],Fa=oa.scrollingInProgress,Qa=oa.viewportHeight,Wa=oa.scrollTo,eb=oa.smoothScrollTargetReached,jb=oa.headerHeight,
Mb=oa.footerHeight,Ub=oa.fixedHeaderHeight;oa=oa.fixedFooterHeight;a=a[2].log;var Ob=Tg(),jc=$f(0),vc=null,Zb=null,oc=null;return Vf(nf(Ob,Bg(F,Qa,Y,jc,jb,Mb,a),Bg(k,Ub,oa),gg(function(lc){var Ic=lc[0],Lc=Ic[0],wd=Ic[1],Td=Ic[2],We=Ic[3],ne=Ic[4],Ke=Ic[5],Bf=Ic[6],Se=Ic[7],Xe=lc[1];Ic=lc[2];lc=lc[3];var Xd=sh(Lc),nd=Xd.align,Yd=Xd.behavior,ld=Xd.offset;--We;Xd=cg(Xd,wd,We);Ke=Xg(Xd,wd.offsetTree,Xe)+Ke;"end"===nd?(Ke+=Ic+sa(wd.sizeTree,Xd)[1]-Td+lc,Xd===We&&(Ke+=Bf)):"center"===nd?Ke+=(Ic+sa(wd.sizeTree,
Xd)[1]-Td+lc)/2:Ke-=ne;ld&&(Ke+=ld);var Hd=function(mf){d();mf?(Se("retrying to scroll to",{location:Lc},Qm.DEBUG),Ob(0,Lc)):Se("list did not change, scroll successful",{},Qm.DEBUG)};if(d(),"smooth"===Yd){var Oe=!1;oc=yh(ka,function(mf){Oe=Oe||mf});vc=ek(eb,function(){Hd(Oe)})}else vc=ek(nf(ka,function(mf){var Pf=setTimeout(function(){mf(!1)},150);return function(Cf){Cf&&(mf(!0),clearTimeout(Pf))}}),Hd);Zb=setTimeout(function(){d()},1200);Fa(0,!0);return Se("scrolling from index to",{index:Xd,top:Ke,
behavior:Yd},Qm.DEBUG),{top:Ke,behavior:Yd}})),Wa),{scrollToIndex:Ob,topListHeight:jc}},Xi(kr,wo,jr),{singleton:!0}),zH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},lv=Xh(function(a){var d=a[0],k=d.scrollContainerState;a=d.scrollTop;var F=d.viewportHeight,Y=d.headerHeight,ka=d.footerHeight,oa=d.scrollBy;d=$f(!1);var Fa=$f(!0),Qa=Tg(),Wa=Tg(),eb=$f(4),jb=$f(0),Mb=Pi(nf(qo(nf(Qh(a),Ej(1),Km(!0)),nf(Qh(a),Ej(1),Km(!1),Tm(100))),
Fi()),!1),Ub=Pi(nf(qo(nf(oa,Km(!0)),nf(oa,Km(!1),Tm(200))),Fi()),!1);Vf(nf(Fj(Qh(a),Qh(jb)),gg(function(Ob){return Ob[0]<=Ob[1]}),Fi()),Fa);Vf(nf(Fa,wm(50)),Wa);F=rk(nf(Fj(k,Qh(F),Qh(Y),Qh(ka),Qh(eb)),vm(function(Ob,jc){var vc,Zb,oc=jc[0],lc=oc.scrollTop;oc=oc.scrollHeight;var Ic=jc[1],Lc={viewportHeight:Ic,scrollTop:lc,scrollHeight:oc};return lc+Ic-oc>-jc[4]?(lc>Ob.state.scrollTop?(vc="SCROLLED_DOWN",Zb=Ob.state.scrollTop-lc):(vc="SIZE_DECREASED",Zb=Ob.state.scrollTop-lc||Ob.scrollTopDelta),{atBottom:!0,
state:Lc,atBottomBecause:vc,scrollTopDelta:Zb}):{atBottom:!1,notAtBottomBecause:Lc.scrollHeight>Ob.state.scrollHeight?"SIZE_INCREASED":Ic<Ob.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":lc<Ob.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Lc}},zH),Fi(function(Ob,jc){return Ob&&Ob.atBottom===jc.atBottom})));Y=Pi(nf(k,vm(function(Ob,jc){var vc=jc.scrollTop,Zb=jc.scrollHeight;jc=jc.viewportHeight;return 1.01>Math.abs(Ob.scrollHeight-Zb)?{scrollTop:vc,scrollHeight:Zb,
jump:0,changed:!1}:Ob.scrollTop!==vc&&1>Zb-(vc+jc)?{scrollHeight:Zb,scrollTop:vc,jump:Ob.scrollTop-vc,changed:!0}:{scrollHeight:Zb,scrollTop:vc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Jh(function(Ob){return Ob.changed}),gg(function(Ob){return Ob.jump})),0);Vf(nf(F,gg(function(Ob){return Ob.atBottom})),d);Vf(nf(d,wm(50)),Qa);ka=$f("down");Vf(nf(k,gg(function(Ob){return Ob.scrollTop}),Fi(),vm(function(Ob,jc){return Ub(4)?{direction:Ob.direction,prevScrollTop:jc}:{direction:jc<
Ob.prevScrollTop?"up":"down",prevScrollTop:jc}},{direction:"down",prevScrollTop:0}),gg(function(Ob){return Ob.direction})),ka);Vf(nf(k,wm(50),Km("none")),ka);k=$f(0);return Vf(nf(Mb,Jh(function(Ob){return!Ob}),Km(0)),k),Vf(nf(a,wm(100),Bg(Mb),Jh(function(Ob){return!!Ob[1]}),vm(function(Ob,jc){return[Ob[1],jc[0]]},[0,0]),gg(function(Ob){return Ob[1]-Ob[0]})),k),{isScrolling:Mb,isAtTop:Fa,isAtBottom:d,atBottomState:F,atTopStateChange:Wa,atBottomStateChange:Qa,scrollDirection:ka,atBottomThreshold:eb,
atTopThreshold:jb,scrollVelocity:k,lastJumpDueToItemResize:Y}},Xi(wo)),Ys=Xh(function(a){var d=a[0].log;a=$f(!1);var k=rk(nf(a,Jh(function(F){return F}),Fi()));return yh(a,function(F){F&&d(4)("props updated",{},Qm.DEBUG)}),{propsReady:a,didMount:k}},Xi(jr),{singleton:!0}),Ew=Xh(function(a){var d=a[0],k=d.sizes,F=d.listRefresh;d=d.defaultItemSize;var Y=a[1].scrollTop,ka=a[2].scrollToIndex;a=a[3].didMount;var oa=$f(!0),Fa=$f(0);return Vf(nf(a,Bg(Fa),Jh(function(Qa){return!!Qa[1]}),Km(!1)),oa),yh(nf(Fj(F,
a),Bg(oa,k,d),Jh(function(Qa){var Wa=Qa[1],eb=Qa[3];return Qa[0][1]&&(Qa[2].sizeTree!==mj||void 0!==eb)&&!Wa}),Bg(Fa)),function(Qa){var Wa=Qa[1];setTimeout(function(){ek(Y,function(){oa(0,!0)});ka(0,Wa)})}),{scrolledToInitialItem:oa,initialTopMostItemIndex:Fa}},Xi(kr,wo,kv,Ys),{singleton:!0}),KC=Xh(function(a){function d(jc){Qa(0,{index:"LAST",align:"end",behavior:jc})}function k(jc){var vc=ek(Fa,function(Zb){!jc||Zb.atBottom||"SIZE_INCREASED"!==Zb.notAtBottomBecause||Ob||(jb(4)("scrolling to bottom due to increased size",
{},Qm.DEBUG),d("auto"))});setTimeout(vc,100)}var F=a[0],Y=F.totalCount,ka=F.listRefresh,oa=a[1];F=oa.isAtBottom;var Fa=oa.atBottomState,Qa=a[2].scrollToIndex;oa=a[3].scrolledToInitialItem;var Wa=a[4],eb=Wa.propsReady;Wa=Wa.didMount;var jb=a[5].log;a=a[6].scrollingInProgress;var Mb=$f(!1),Ub=Tg(),Ob=null;return yh(nf(Fj(nf(Qh(Y),Ej(1)),Wa),Bg(Qh(Mb),F,oa,a),gg(function(jc){var vc=jc[0],Zb=vc[0];vc=vc[1]&&jc[3];var oc="auto";vc&&(oc=jc[1],jc=jc[2]||jc[4],oc="function"==typeof oc?Vk(oc(jc)):jc&&Vk(oc),
vc=vc&&!!oc);return{totalCount:Zb,shouldFollow:vc,followOutputBehavior:oc}}),Jh(function(jc){return jc.shouldFollow})),function(jc){var vc=jc.totalCount,Zb=jc.followOutputBehavior;Ob&&(Ob(),Ob=null);Ob=ek(ka,function(){jb(4)("following output to ",{totalCount:vc},Qm.DEBUG);d(Zb);Ob=null})}),yh(nf(Fj(Qh(Mb),Y,eb),Jh(function(jc){return jc[0]&&jc[2]}),vm(function(jc,vc){vc=vc[1];return{refreshed:jc.value===vc,value:vc}},{refreshed:!1,value:0}),Jh(function(jc){return jc.refreshed}),Bg(Mb,Y)),function(jc){k(!1!==
jc[1])}),yh(Ub,function(){k(!1!==Mb(4))}),yh(Fj(Qh(Mb),Fa),function(jc){var vc=jc[1];jc[0]&&!vc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===vc.notAtBottomBecause&&d("auto")}),{followOutput:Mb,autoscrollToBottom:Ub}},Xi(kr,lv,kv,Ew,Ys,jr,wo)),Sy=Xh(function(a){var d=a[0],k=d.totalCount,F=d.groupIndices;d=d.sizes;var Y=a[1];a=Y.scrollTop;Y=Y.headerHeight;var ka=Tg(),oa=Tg(),Fa=rk(nf(ka,gg(Ek)));return Vf(nf(Fa,gg(function(Qa){return Qa.totalCount})),k),Vf(nf(Fa,gg(function(Qa){return Qa.groupIndices})),
F),Vf(nf(Fj(a,d,Y),Jh(function(Qa){return Qa[1].groupOffsetTree!==mj}),gg(function(Qa){return sa(Qa[1].groupOffsetTree,Math.max(Qa[0]-Qa[2],0),"v")[0]}),Fi(),gg(function(Qa){return[Qa]})),oa),{groupCounts:ka,topItemsIndexes:oa}},Xi(kr,wo)),Ty=Xh(function(a){var d=a[0];a=d.scrollTop;var k=d.viewportHeight,F=d.deviation,Y=d.headerHeight,ka=d.fixedHeaderHeight;d=Tg();var oa=$f(0),Fa=$f(0),Qa=$f(0);a=Pi(nf(Fj(Qh(a),Qh(k),Qh(Y),Qh(d,fk),Qh(Qa),Qh(oa),Qh(ka),Qh(F),Qh(Fa)),gg(function(Wa){var eb=Wa[0],jb=
Wa[1],Mb=Wa[2],Ub=Wa[3],Ob=Ub[0];Ub=Ub[1];var jc=Wa[4],vc=Wa[6],Zb=Wa[7],oc=Wa[8],lc=eb-Zb;Wa=Wa[5]+vc;var Ic=Math.max(Mb-lc,0),Lc="none",wd="number"==typeof oc?oc:oc.top||0;oc="number"==typeof oc?oc:oc.bottom||0;return Ob-=Zb,Ub+=Mb+vc,Ob+(Mb+vc)>eb+Wa-wd&&(Lc="up"),Ub-Zb<eb-Ic+jb+oc&&(Lc="down"),"none"!==Lc?[Math.max(lc-Mb-fm(jc,"top",Lc)-wd,0),lc-Ic-vc+jb+fm(jc,"bottom",Lc)+oc]:null}),Jh(function(Wa){return null!=Wa}),Fi(fk)),[0,0]);return{listBoundary:d,overscan:Qa,topListHeight:oa,increaseViewportBy:Fa,
visibleRange:a}},Xi(wo),{singleton:!0}),LC={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},du=Xh(function(a){var d=a[0],k=d.sizes,F=d.totalCount,Y=d.data,ka=d.firstItemIndex,oa=d.gap,Fa=a[1],Qa=a[2],Wa=Qa.visibleRange;d=Qa.listBoundary;Qa=Qa.topListHeight;var eb=a[3],jb=eb.scrolledToInitialItem,Mb=eb.initialTopMostItemIndex;eb=a[4].topListHeight;var Ub=a[5],Ob=a[6].didMount,jc=a[7].recalcInProgress;a=$f([]);var vc=Tg();Vf(Fa.topItemsIndexes,
a);k=Pi(nf(Fj(Ob,jc,Qh(Wa,fk),Qh(F),Qh(k),Qh(Mb),jb,Qh(a),Qh(ka),Qh(oa),Y),Jh(function(Zb){return Zb[0]&&!Zb[1]}),gg(function(Zb){var oc=Zb[2],lc=oc[0],Ic=oc[1];oc=Zb[3];var Lc=Zb[5],wd=Zb[6],Td=Zb[7],We=Zb[8],ne=Zb[9],Ke=Zb[10];Zb=Zb[4];var Bf=Zb.sizeTree,Se=Zb.offsetTree;if(0===oc||0===lc&&0===Ic)return Bh({},LC,{totalCount:oc});if(Bf===mj)return Up(function(Cf,dg,fh){return dg.groupOffsetTree!==mj?(Cf=ji(Cf,dg),[{index:sa(dg.groupOffsetTree,Cf)[0],size:0,offset:0},{index:Cf,size:0,offset:0,data:fh&&
fh[0]}]):[{index:Cf,size:0,offset:0,data:fh&&fh[0]}]}("number"==typeof Lc?Lc:"LAST"===Lc.index?oc-1:Lc.index,Zb,Ke),[],oc,ne,Zb,We);Lc=[];if(0<Td.length){var Xe,Xd=Td[0],nd=Td[Td.length-1],Yd=0;for(Bf=gk(Ld(Bf,Xd,nd));!(Xe=Bf()).done;){var ld=Xe.value;Xe=ld.value;var Hd=Math.min(ld.end,nd);for(ld=Math.max(ld.start,Xd);ld<=Hd;ld++)Lc.push({index:ld,size:Xe,offset:Yd,data:Ke&&Ke[ld]}),Yd+=Xe}}if(!wd)return Up([],Lc,oc,ne,Zb,We);var Oe=0<Td.length?Td[Td.length-1]+1:0,mf=function(Cf,dg,fh,Lf){return void 0===
Lf&&(Lf=0),0<Lf&&(dg=Math.max(dg,Cf[Ug(Cf,Lf,Dg)].offset)),Nd((Ch=fh,tl=Ug(ah=Cf,dg,Hj=Oh),Ll=Ug(ah,Ch,Hj,tl),ah.slice(tl,Ll+1)),Qi);var ah,Ch,Hj,tl,Ll}(Se,lc,Ic,Oe);if(0===mf.length)return null;var Pf=oc-1;return Up(Lk([],function(Cf){for(var dg,fh=gk(mf);!(dg=fh()).done;){var Lf=dg.value,ah=Lf.value;dg=ah.offset;var Ch=Lf.start,Hj=ah.size;ah.offset<lc&&(ah=(Ch+=Math.floor((lc-ah.offset+ne)/(Hj+ne)))-Lf.start,dg+=ah*Hj+ah*ne);Ch<Oe&&(dg+=(Oe-Ch)*Hj,Ch=Oe);for(Lf=Math.min(Lf.end,Pf);Ch<=Lf&&!(dg>=
Ic);Ch++)Cf.push({index:Ch,size:Hj,offset:dg,data:Ke&&Ke[Ch]}),dg+=Hj+ne}}),Lc,oc,ne,Zb,We)}),Jh(function(Zb){return null!==Zb}),Fi()),LC);return Vf(nf(Y,Jh(function(Zb){return void 0!==Zb}),gg(function(Zb){return Zb.length})),F),Vf(nf(k,gg(function(Zb){return Zb.topListHeight})),eb),Vf(eb,Qa),Vf(nf(k,gg(function(Zb){return[Zb.top,Zb.bottom]})),d),Vf(nf(k,gg(function(Zb){return Zb.items})),vc),Bh({listState:k,topItemsIndexes:a,endReached:rk(nf(k,Jh(function(Zb){return 0<Zb.items.length}),Bg(F,Y),
Jh(function(Zb){var oc=Zb[0].items;return oc[oc.length-1].originalIndex===Zb[1]-1}),gg(function(Zb){return[Zb[1]-1,Zb[2]]}),Fi(fk),gg(function(Zb){return Zb[0]}))),startReached:rk(nf(k,wm(200),Jh(function(Zb){var oc=Zb.items;return 0<oc.length&&oc[0].originalIndex===Zb.topItems.length}),gg(function(Zb){return Zb.items[0].index}),Fi())),rangeChanged:rk(nf(k,Jh(function(Zb){return 0<Zb.items.length}),gg(function(Zb){Zb=Zb.items;for(var oc=0,lc=Zb.length-1;"group"===Zb[oc].type&&oc<lc;)oc++;for(;"group"===
Zb[lc].type&&lc>oc;)lc--;return{startIndex:Zb[oc].index,endIndex:Zb[lc].index}}),Fi(bn))),itemsRendered:vc},Ub)},Xi(kr,Sy,Ty,Ew,kv,lv,Ys,Ry),{singleton:!0}),AH=Xh(function(a){var d=a[0],k=d.sizes,F=d.firstItemIndex,Y=d.data;d=d.gap;var ka=a[1].listState;a=a[2].didMount;var oa=$f(0);return Vf(nf(a,Bg(oa),Jh(function(Fa){return 0!==Fa[1]}),Bg(k,F,d,Y),gg(function(Fa){var Qa=Fa[0][1],Wa=Fa[1],eb=Fa[2],jb=Fa[3];Fa=Fa[4];var Mb=void 0===Fa?[]:Fa;Fa=0;if(0<Wa.groupIndices.length)for(var Ub,Ob=gk(Wa.groupIndices);!((Ub=
Ob()).done||Ub.value-Fa>=Qa);)Fa++;Qa+=Fa;return Up(Array.from({length:Qa}).map(function(jc,vc){return{index:vc,size:0,offset:0,data:Mb[vc]}}),[],Qa,jb,Wa,eb)})),ka),{initialItemCount:oa}},Xi(kr,du,Ys),{singleton:!0}),Jq=Xh(function(a){a=a[0].scrollVelocity;var d=$f(!1),k=Tg(),F=$f(!1);return Vf(nf(a,Bg(F,d,k),Jh(function(Y){return!!Y[1]}),gg(function(Y){var ka=Y[0],oa=Y[1],Fa=Y[2];Y=Y[3];var Qa=oa.enter;if(Fa){if((0,oa.exit)(ka,Y))return!1}else if(Qa(ka,Y))return!0;return Fa}),Fi()),d),yh(nf(Fj(d,
a,k),Bg(F)),function(Y){var ka=Y[0];Y=Y[1];return ka[0]&&Y&&Y.change&&Y.change(ka[1],ka[2])}),{isSeeking:d,scrollSeekConfiguration:F,scrollVelocity:a,scrollSeekRangeChanged:k}},Xi(lv),{singleton:!0}),Uy=Xh(function(a){a=a[0].topItemsIndexes;var d=$f(0);return Vf(nf(d,Jh(function(k){return 0<k}),gg(function(k){return Array.from({length:k}).map(function(F,Y){return Y})})),a),{topItemCount:d}},Xi(du)),eu=Xh(function(a){var d=a[0],k=d.footerHeight,F=d.headerHeight,Y=d.fixedHeaderHeight;d=d.fixedFooterHeight;
var ka=a[1].listState;a=Tg();k=Pi(nf(Fj(k,d,F,Y,ka),gg(function(oa){var Fa=oa[4];return oa[0]+oa[1]+oa[2]+oa[3]+Fa.offsetBottom+Fa.bottom})),0);return Vf(Qh(k),a),{totalListHeight:k,totalListHeightChanged:a}},Xi(wo,du),{singleton:!0}),Fw=Io(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),Vy=Xh(function(a){function d(vc){0<vc?(F(0,{top:-vc,behavior:"auto"}),ka(0,0)):(ka(0,0),F(0,{top:-vc,behavior:"auto"}))}var k=a[0],F=k.scrollBy,Y=k.scrollTop,ka=k.deviation,
oa=k.scrollingInProgress,Fa=a[1];k=Fa.isScrolling;var Qa=Fa.isAtBottom,Wa=Fa.scrollDirection,eb=a[3],jb=eb.beforeUnshiftWith,Mb=eb.shiftWithOffset,Ub=eb.sizes;eb=eb.gap;var Ob=a[4].log,jc=a[5].recalcInProgress;a=rk(nf(a[2].listState,Bg(Fa.lastJumpDueToItemResize),vm(function(vc,Zb){var oc=vc[1],lc=Zb[0],Ic=lc.items,Lc=lc.totalCount;lc=lc.bottom+lc.offsetBottom;var wd=0;return vc[2]===Lc&&0<oc.length&&0<Ic.length&&(0===Ic[0].originalIndex&&0===oc[0].originalIndex||0!=(wd=lc-vc[3])&&(wd+=Zb[1])),[wd,
Ic,Lc,lc]},[0,[],0,0]),Jh(function(vc){return 0!==vc[0]}),Bg(Y,Wa,oa,Qa,Ob),Jh(function(vc){return!vc[3]&&0!==vc[1]&&"up"===vc[2]}),gg(function(vc){var Zb=vc[0][0];return(0,vc[5])("Upward scrolling compensation",{amount:Zb},Qm.DEBUG),Zb})));return yh(nf(a,Bg(ka,k)),function(vc){var Zb=vc[0],oc=vc[1];vc[2]&&Fw()?ka(0,oc-Zb):d(-Zb)}),yh(nf(Fj(Pi(k,!1),ka,jc),Jh(function(vc){return!vc[0]&&!vc[2]&&0!==vc[1]}),gg(function(vc){return vc[1]}),wm(1)),d),Vf(nf(Mb,gg(function(vc){return{top:-vc}})),F),yh(nf(jb,
Bg(Ub,eb),gg(function(vc){var Zb=vc[0];return Zb*vc[1].lastSize+Zb*vc[2]})),function(vc){ka(0,vc);requestAnimationFrame(function(){nm(F,{top:vc});requestAnimationFrame(function(){ka(0,0);jc(0,!1)})})}),{deviation:ka}},Xi(wo,lv,du,kr,jr,Ry)),MC=Xh(function(a){var d=a[0].totalListHeight,k=a[1].didMount,F=a[2].scrollTo;a=$f(0);return yh(nf(k,Bg(a),Jh(function(Y){return 0!==Y[1]}),gg(function(Y){return{top:Y[1]}})),function(Y){ek(nf(d,Jh(function(ka){return 0!==ka})),function(){setTimeout(function(){F(0,
Y)})})}),{initialScrollTop:a}},Xi(eu,Ys,wo),{singleton:!0}),Wy=Xh(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var k=$f(!1);return{alignToBottom:k,paddingTopAddition:Pi(nf(Fj(k,d,a),Jh(function(F){return F[0]}),gg(function(F){return Math.max(0,F[1]-F[2])}),Fi()),0)}},Xi(wo,eu),{singleton:!0}),Gw=Xh(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var k=Tg(),F=Tg(),Y=Tg(),ka=$f(!1),oa=$f(void 0);return Vf(nf(Fj(k,F),gg(function(Fa){var Qa=Fa[0];return{scrollTop:Math.max(0,
Qa.scrollTop-Fa[1].offsetTop),scrollHeight:Qa.scrollHeight,viewportHeight:Qa.viewportHeight}})),d),Vf(nf(a,Bg(F),gg(function(Fa){var Qa=Fa[0];return Bh({},Qa,{top:Qa.top+Fa[1].offsetTop})})),Y),{useWindowScroll:ka,customScrollParent:oa,windowScrollContainerState:k,windowViewportRect:F,windowScrollTo:Y}},Xi(wo)),Zs=["done","behavior","align"],$r=Xh(function(a){var d=a[0],k=d.sizes,F=d.totalCount;d=d.gap;var Y=a[1],ka=Y.scrollTop,oa=Y.viewportHeight,Fa=Y.headerHeight,Qa=Y.fixedHeaderHeight,Wa=Y.fixedFooterHeight,
eb=Y.scrollingInProgress;a=a[2].scrollToIndex;Y=Tg();return Vf(nf(Y,Bg(k,oa,F,Fa,Qa,Wa,ka),Bg(d),gg(function(jb){var Mb=jb[0],Ub=Mb[0],Ob=Mb[1],jc=Mb[2],vc=Mb[3],Zb=Mb[4],oc=Mb[5],lc=Mb[6];Mb=Mb[7];var Ic=jb[1];jb=Ub.done;var Lc=Ub.behavior,wd=Ub.align,Td=tn(Ub,Zs),We=null;Ub=cg(Ub,Ob,vc-1);Zb=Xg(Ub,Ob.offsetTree,Ic)+Zb+oc;return Zb<Mb+oc?We=Bh({},Td,{behavior:Lc,align:null!=wd?wd:"start"}):Zb+sa(Ob.sizeTree,Ub)[1]>Mb+jc-lc&&(We=Bh({},Td,{behavior:Lc,align:null!=wd?wd:"end"})),We?jb&&ek(nf(eb,Ej(1),
Jh(function(ne){return!1===ne})),jb):jb&&jb(),We}),Jh(function(jb){return null!==jb})),a),{scrollIntoView:Y}},Xi(kr,wo,kv,du,jr),{singleton:!0}),Xy=["listState","topItemsIndexes"],NC=Xh(function(a){return Bh({},a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},Xi(Ty,AH,Ys,Jq,eu,MC,Wy,Gw,$r)),fu=Xh(function(a){var d=a[0],k=d.totalCount,F=d.sizeRanges,Y=d.fixedItemSize,ka=d.defaultItemSize,oa=d.trackItemSizes,Fa=d.itemSize,Qa=d.data,Wa=d.firstItemIndex,eb=d.groupIndices,jb=d.statefulTotalCount;d=d.gap;
var Mb=a[1],Ub=Mb.initialTopMostItemIndex;Mb=Mb.scrolledToInitialItem;var Ob=a[2],jc=a[3],vc=a[4],Zb=vc.listState,oc=vc.topItemsIndexes;vc=tn(vc,Xy);var lc=a[5].scrollToIndex,Ic=a[7].topItemCount,Lc=a[8].groupCounts,wd=a[9];a=a[10];return Vf(vc.rangeChanged,wd.scrollSeekRangeChanged),Vf(nf(wd.windowViewportRect,gg(function(Td){return Td.visibleHeight})),Ob.viewportHeight),Bh({totalCount:k,data:Qa,firstItemIndex:Wa,sizeRanges:F,initialTopMostItemIndex:Ub,scrolledToInitialItem:Mb,topItemsIndexes:oc,
topItemCount:Ic,groupCounts:Lc,fixedItemHeight:Y,defaultItemHeight:ka,gap:d},jc,{statefulTotalCount:jb,listState:Zb,scrollToIndex:lc,trackItemSizes:oa,itemSize:Fa,groupIndices:eb},vc,wd,Ob,a)},Xi(kr,Ew,wo,KC,du,kv,Vy,Uy,Sy,NC,jr)),OC=Io(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),mv=xh.createContext(void 0),bq=xh.createContext(void 0),PC=["placeholder"],
Yy=["style","children"],QC=["style","children"],RC=Xh(function(){var a=$f(function(Qa){return"Item "+Qa}),d=$f(null),k=$f(function(Qa){return"Group "+Qa}),F=$f({}),Y=$f(ro),ka=$f("div"),oa=$f(Zi),Fa=function(Qa,Wa){return void 0===Wa&&(Wa=null),Pi(nf(F,gg(function(eb){return eb[Qa]}),Fi()),Wa)};return{context:d,itemContent:a,groupContent:k,components:F,computeItemKey:Y,headerFooterTag:ka,scrollerRef:oa,FooterComponent:Fa("Footer"),HeaderComponent:Fa("Header"),TopItemListComponent:Fa("TopItemList"),
ListComponent:Fa("List","div"),ItemComponent:Fa("Item","div"),GroupComponent:Fa("Group","div"),ScrollerComponent:Fa("Scroller","div"),EmptyPlaceholder:Fa("EmptyPlaceholder"),ScrollSeekPlaceholder:Fa("ScrollSeekPlaceholder")}}),Hw=Xh(function(a){function d(Y,ka,oa){Vf(nf(Y,Bg(F.components),gg(function(Fa){var Qa,Wa=Fa[0];Fa=Fa[1];return console.warn("react-virtuoso: "+oa+" property is deprecated. Pass components."+ka+" instead."),Bh({},Fa,((Qa={})[ka]=Wa,Qa))})),F.components)}var k=a[0],F=a[1];a={item:Zk(F.itemContent,
"Rename the %citem%c prop to %citemContent."),group:Zk(F.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Zk(k.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Zk(k.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Zk(k.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Tg(),maxHeightCacheSize:Tg(),footer:Tg(),header:Tg(),HeaderContainer:Tg(),FooterContainer:Tg(),
ItemContainer:Tg(),ScrollContainer:Tg(),GroupContainer:Tg(),ListContainer:Tg(),emptyComponent:Tg(),scrollSeek:Tg()};return yh(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),yh(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
yh(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),yh(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),yh(a.scrollSeek,function(Y){var ka=Y.placeholder;
Y=tn(Y,PC);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=Bh({},(0,F.components)(4),{ScrollSeekPlaceholder:ka});(0,F.components)(0,ka);(0,k.scrollSeekConfiguration)(0,Y)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),d(a.emptyComponent,
"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),Bh({},k,F,a)},Xi(fu,RC)),SC=function(a){return xh.createElement("div",{style:{height:a.height}})},xo={position:OC(),zIndex:1,overflowAnchor:"none"},BH={overflowAnchor:"none"},gu=xh.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=Di("listState"),k=No("sizeRanges"),F=Di("useWindowScroll"),Y=Di("customScrollParent"),ka=No("windowScrollContainerState"),oa=No("scrollContainerState");F=Y||F?ka:oa;var Fa=Di("itemContent"),
Qa=Di("context"),Wa=Di("groupContent");ka=Di("trackItemSizes");oa=Di("itemSize");var eb=Di("log"),jb=No("gap");k=qq(k,oa,ka,a?Zi:F,eb,jb,Y).callbackRef;Y=xh.useState(0);var Mb=Y[0],Ub=Y[1];Cj("deviation",function(Ic){Mb!==Ic&&Ub(Ic)});Y=Di("EmptyPlaceholder");var Ob=Di("ScrollSeekPlaceholder")||SC;F=Di("ListComponent");var jc=Di("ItemComponent"),vc=Di("GroupComponent"),Zb=Di("computeItemKey"),oc=Di("isSeeking"),lc=0<Di("groupIndices").length;ka=Di("paddingTopAddition");ka=a?{}:{boxSizing:"border-box",
paddingTop:d.offsetTop+ka,paddingBottom:d.offsetBottom,marginTop:Mb};return!a&&0===d.totalCount&&Y?(0,ai.createElement)(Y,hk(Y,Qa)):(0,ai.createElement)(F,Bh({},hk(F,Qa),{ref:k,style:ka,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function(Ic){var Lc=Ic.originalIndex,wd=Zb(Lc+d.firstItemIndex,Ic.data,Qa);return oc?(0,ai.createElement)(Ob,Bh({},hk(Ob,Qa),{key:wd,index:Ic.index,height:Ic.size,type:Ic.type||"item"},"group"===Ic.type?{}:{groupIndex:Ic.groupIndex})):
"group"===Ic.type?(0,ai.createElement)(vc,Bh({},hk(vc,Qa),{key:wd,"data-index":Lc,"data-known-size":Ic.size,"data-item-index":Ic.index,style:xo}),Wa(Ic.index)):(0,ai.createElement)(jc,Bh({},hk(jc,Qa),{key:wd,"data-index":Lc,"data-known-size":Ic.size,"data-item-index":Ic.index,"data-item-group-index":Ic.groupIndex,style:BH}),lc?Fa(Ic.index,Ic.groupIndex,Ic.data,Qa):Fa(Ic.index,Ic.data,Qa))}))}),CH={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},hu=
{width:"100%",height:"100%",position:"absolute",top:0},TC={width:"100%",position:OC(),top:0},Iw=xh.memo(function(){var a=Di("HeaderComponent"),d=No("headerHeight"),k=Di("headerFooterTag"),F=Ji(function(ka){return d(Yl(ka,"height"))}),Y=Di("context");return a?(0,ai.createElement)(k,{ref:F},(0,ai.createElement)(a,hk(a,Y))):null}),Jw=xh.memo(function(){var a=Di("FooterComponent"),d=No("footerHeight"),k=Di("headerFooterTag"),F=Ji(function(ka){return d(Yl(ka,"height"))}),Y=Di("context");return a?(0,ai.createElement)(k,
{ref:F},(0,ai.createElement)(a,hk(a,Y))):null}),DH=function(a){a=a.children;var d=(0,ai.useContext)(mv),k=No("viewportHeight"),F=No("fixedItemHeight"),Y=Ji(mm(k,function(ka){return Yl(ka,"height")}));return xh.useEffect(function(){d&&(k(d.viewportHeight),F(d.itemHeight))},[d,k,F]),xh.createElement("div",{style:hu,ref:Y,"data-viewport-type":"element"},a)},UC=function(a){a=a.children;var d=(0,ai.useContext)(mv),k=No("windowViewportRect"),F=No("fixedItemHeight"),Y=Di("customScrollParent");Y=th(k,Y);
return xh.useEffect(function(){d&&(F(d.itemHeight),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,k,F]),xh.createElement("div",{ref:Y,style:hu,"data-viewport-type":"window"},a)},VC=function(a){a=a.children;var d=Di("TopItemListComponent"),k=Di("headerHeight");k=Bh({},TC,{marginTop:k+"px"});var F=Di("context");return(0,ai.createElement)(d||"div",{style:k,context:F},a)},nv=ak(Hw,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},xh.memo(function(a){var d=Di("useWindowScroll"),k=0<Di("topItemsIndexes").length,F=Di("customScrollParent"),Y=F||d?UC:DH;return xh.createElement(F||d?ov:as,Bh({},a),xh.createElement(Y,null,xh.createElement(Iw,null),xh.createElement(gu,null),xh.createElement(Jw,
null)),k&&xh.createElement(VC,null,xh.createElement(gu,{showTopList:!0})))})),Zy=nv.Component,No=nv.usePublisher,Di=nv.useEmitterValue,Cj=nv.useEmitter,as=ko({usePublisher:No,useEmitterValue:Di,useEmitter:Cj}),ov=lp({usePublisher:No,useEmitterValue:Di,useEmitter:Cj}),pv={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Oo={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},$y=Math.round,Kw=Math.ceil,qv=Math.floor,az=Math.min,wj=Math.max,
iu=Xh(function(a){var d=a[0],k=d.overscan,F=d.visibleRange,Y=d.listBoundary,ka=a[1];d=ka.scrollTop;var oa=ka.viewportHeight,Fa=ka.scrollBy,Qa=ka.scrollTo,Wa=ka.smoothScrollTargetReached,eb=ka.scrollContainerState,jb=ka.footerHeight;ka=ka.headerHeight;var Mb=a[2],Ub=a[3],Ob=a[4],jc=Ob.propsReady,vc=Ob.didMount,Zb=a[5];Ob=Zb.windowViewportRect;var oc=Zb.windowScrollTo,lc=Zb.useWindowScroll,Ic=Zb.customScrollParent;Zb=Zb.windowScrollContainerState;a=a[6];var Lc=$f(0),wd=$f(0),Td=$f(pv),We=$f({height:0,
width:0}),ne=$f({height:0,width:0}),Ke=Tg(),Bf=Tg(),Se=$f(0),Xe=$f(void 0),Xd=$f({row:0,column:0});Vf(nf(Fj(vc,wd,Xe),Jh(function(nd){return 0!==nd[1]}),gg(function(nd){return{items:mp(0,nd[1]-1,nd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Td);Vf(nf(Fj(Qh(Lc),F,Qh(Xd,Pn),Qh(ne,function(nd,Yd){return nd&&nd.width===Yd.width&&nd.height===Yd.height}),Xe),Bg(We),gg(function(nd){var Yd=nd[0],ld=Yd[0],Hd=Yd[1],Oe=Hd[0],mf=Hd[1],Pf=Yd[2],Cf=Yd[3],dg=Yd[4],fh=nd[1];nd=Pf.row;
var Lf=Pf.column;Yd=Cf.height;Hd=Cf.width;var ah=fh.width;if(0===ld||0===ah)return pv;if(0===Hd)return Bh({},Oo,{items:mp(0,0,dg)});Lf=wj(1,qv((ah+Lf)/(Hd+Lf)));Oe=Lf*qv((Oe+nd)/(Yd+nd));mf=Lf*Kw((mf+nd)/(Yd+nd))-1;mf=az(ld-1,wj(mf,Lf-1));Oe=mp(az(mf,wj(0,Oe)),mf,dg);Cf=mo(fh,Pf,Cf,Oe);Pf=Cf.top;Cf=Cf.bottom;ld=Kw(ld/Lf);return{items:Oe,offsetTop:Pf,offsetBottom:ld*Yd+(ld-1)*nd-Cf,top:Pf,bottom:Cf,itemHeight:Yd,itemWidth:Hd}})),Td);Vf(nf(Xe,Jh(function(nd){return void 0!==nd}),gg(function(nd){return nd.length})),
Lc);Vf(nf(We,gg(function(nd){return nd.height})),oa);Vf(nf(Fj(We,ne,Td,Xd),gg(function(nd){nd=mo(nd[0],nd[3],nd[1],nd[2].items);return[nd.top,nd.bottom]}),Fi(fk)),Y);F=rk(nf(Qh(Td),Jh(function(nd){return 0<nd.items.length}),Bg(Lc),Jh(function(nd){var Yd=nd[0].items;return Yd[Yd.length-1].index===nd[1]-1}),gg(function(nd){return nd[1]-1}),Fi()));Y=rk(nf(Qh(Td),Jh(function(nd){nd=nd.items;return 0<nd.length&&0===nd[0].index}),Km(0),Fi()));oa=rk(nf(Qh(Td),Jh(function(nd){return 0<nd.items.length}),gg(function(nd){nd=
nd.items;return{startIndex:nd[0].index,endIndex:nd[nd.length-1].index}}),Fi(bn)));Vf(oa,Ub.scrollSeekRangeChanged);Vf(nf(Ke,Bg(We,ne,Lc,Xd),gg(function(nd){var Yd=nd[1],ld=nd[2],Hd=nd[3],Oe=nd[4],mf=sh(nd[0]);nd=mf.align;var Pf=mf.behavior,Cf=mf.offset;mf=mf.index;"LAST"===mf&&(mf=Hd-1);Hd=Nl(Yd,Oe,ld,wj(0,mf,az(Hd-1,mf)));return"end"===nd?Hd=$y(Hd-Yd.height+ld.height):"center"===nd&&(Hd=$y(Hd-Yd.height/2+ld.height/2)),Cf&&(Hd+=Cf),{top:Hd,behavior:Pf}})),Qa);vc=Pi(nf(Td,gg(function(nd){return nd.offsetBottom+
nd.bottom})),0);return Vf(nf(Ob,gg(function(nd){return{width:nd.visibleWidth,height:nd.visibleHeight}})),We),Bh({data:Xe,totalCount:Lc,viewportDimensions:We,itemDimensions:ne,scrollTop:d,scrollHeight:Bf,overscan:k,scrollBy:Fa,scrollTo:Qa,scrollToIndex:Ke,smoothScrollTargetReached:Wa,windowViewportRect:Ob,windowScrollTo:oc,useWindowScroll:lc,customScrollParent:Ic,windowScrollContainerState:Zb,deviation:Se,scrollContainerState:eb,footerHeight:jb,headerHeight:ka,initialItemCount:wd,gap:Xd},Ub,{gridState:Td,
totalListHeight:vc},Mb,{startReached:Y,endReached:F,rangeChanged:oa,propsReady:jc},a)},Xi(Ty,wo,lv,Jq,Ys,Gw,jr)),rv=["placeholder"],EH=Xh(function(){var a=$f(function(Wa){return"Item "+Wa}),d=$f({}),k=$f(null),F=$f("virtuoso-grid-item"),Y=$f("virtuoso-grid-list"),ka=$f(ro),oa=$f("div"),Fa=$f(Zi),Qa=function(Wa,eb){return void 0===eb&&(eb=null),Pi(nf(d,gg(function(jb){return jb[Wa]}),Fi()),eb)};return{context:k,itemContent:a,components:d,computeItemKey:ka,itemClassName:F,listClassName:Y,headerFooterTag:oa,
scrollerRef:Fa,FooterComponent:Qa("Footer"),HeaderComponent:Qa("Header"),ListComponent:Qa("List","div"),ItemComponent:Qa("Item","div"),ScrollerComponent:Qa("Scroller","div"),ScrollSeekPlaceholder:Qa("ScrollSeekPlaceholder","div")}}),ol=Xh(function(a){function d(Y,ka,oa){Vf(nf(Y,Bg(F.components),gg(function(Fa){var Qa,Wa=Fa[0];Fa=Fa[1];return console.warn("react-virtuoso: "+oa+" property is deprecated. Pass components."+ka+" instead."),Bh({},Fa,((Qa={})[ka]=Wa,Qa))})),F.components)}var k=a[0],F=a[1];
a={item:Zk(F.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Tg(),ScrollContainer:Tg(),ListContainer:Tg(),emptyComponent:Tg(),scrollSeek:Tg()};return yh(a.scrollSeek,function(Y){var ka=Y.placeholder;Y=tn(Y,rv);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=Bh({},(0,F.components)(4),{ScrollSeekPlaceholder:ka});(0,F.components)(0,ka);(0,k.scrollSeekConfiguration)(0,
Y)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),Bh({},k,F,a)},Xi(iu,EH)),$s=xh.memo(function(){var a=pl("gridState"),d=pl("listClassName"),k=pl("itemClassName"),F=pl("itemContent"),Y=pl("computeItemKey"),ka=pl("isSeeking"),oa=Xn("scrollHeight"),Fa=pl("ItemComponent"),Qa=pl("ListComponent"),Wa=pl("ScrollSeekPlaceholder"),eb=pl("context"),jb=Xn("itemDimensions"),Mb=Xn("gap"),Ub=pl("log"),Ob=Ji(function(jc){oa(jc.parentElement.parentElement.scrollHeight);
var vc=jc.firstChild;vc&&jb(vc.getBoundingClientRect());Mb({row:om("row-gap",getComputedStyle(jc).rowGap,Ub),column:om("column-gap",getComputedStyle(jc).columnGap,Ub)})});return(0,ai.createElement)(Qa,Bh({ref:Ob,className:d},hk(Qa,eb),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(jc){var vc=Y(jc.index,jc.data,eb);return ka?(0,ai.createElement)(Wa,Bh({key:vc},hk(Wa,eb),{index:jc.index,height:a.itemHeight,width:a.itemWidth})):(0,ai.createElement)(Fa,Bh({},hk(Fa,
eb),{className:k,"data-index":jc.index,key:vc}),F(jc.index,jc.data,eb))}))}),WC=xh.memo(function(){var a=pl("HeaderComponent"),d=Xn("headerHeight"),k=pl("headerFooterTag"),F=Ji(function(ka){return d(Yl(ka,"height"))}),Y=pl("context");return a?(0,ai.createElement)(k,{ref:F},(0,ai.createElement)(a,hk(a,Y))):null}),XC=xh.memo(function(){var a=pl("FooterComponent"),d=Xn("footerHeight"),k=pl("headerFooterTag"),F=Ji(function(ka){return d(Yl(ka,"height"))}),Y=pl("context");return a?(0,ai.createElement)(k,
{ref:F},(0,ai.createElement)(a,hk(a,Y))):null}),mh=function(a){a=a.children;var d=(0,ai.useContext)(bq),k=Xn("itemDimensions"),F=Xn("viewportDimensions"),Y=Ji(function(ka){F(ka.getBoundingClientRect())});return xh.useEffect(function(){d&&(F({height:d.viewportHeight,width:d.viewportWidth}),k({height:d.itemHeight,width:d.itemWidth}))},[d,F,k]),xh.createElement("div",{style:hu,ref:Y},a)},Lw=function(a){a=a.children;var d=(0,ai.useContext)(bq),k=Xn("windowViewportRect"),F=Xn("itemDimensions"),Y=pl("customScrollParent");
Y=th(k,Y);return xh.useEffect(function(){d&&(F({height:d.itemHeight,width:d.itemWidth}),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,k,F]),xh.createElement("div",{ref:Y,style:hu},a)},Po=ak(ol,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},xh.memo(function(a){a=Bh({},a);var d=pl("useWindowScroll"),k=pl("customScrollParent"),F=k||d?Lw:mh;return xh.createElement(k||d?ju:YC,Bh({},a),xh.createElement(F,null,xh.createElement(WC,null),xh.createElement($s,null),xh.createElement(XC,null)))})),Xn=Po.usePublisher,pl=Po.useEmitterValue,Mw=Po.useEmitter,YC=ko({usePublisher:Xn,useEmitterValue:pl,useEmitter:Mw}),ju=lp({usePublisher:Xn,useEmitterValue:pl,useEmitter:Mw}),Nw=Xh(function(){var a=$f(function(Qa){return xh.createElement("td",
null,"Item $",Qa)}),d=$f(null),k=$f(null),F=$f(null),Y=$f({}),ka=$f(ro),oa=$f(Zi),Fa=function(Qa,Wa){return void 0===Wa&&(Wa=null),Pi(nf(Y,gg(function(eb){return eb[Qa]}),Fi()),Wa)};return{context:d,itemContent:a,fixedHeaderContent:k,fixedFooterContent:F,components:Y,computeItemKey:ka,scrollerRef:oa,TableComponent:Fa("Table","table"),TableHeadComponent:Fa("TableHead","thead"),TableFooterComponent:Fa("TableFoot","tfoot"),TableBodyComponent:Fa("TableBody","tbody"),TableRowComponent:Fa("TableRow","tr"),
ScrollerComponent:Fa("Scroller","div"),EmptyPlaceholder:Fa("EmptyPlaceholder"),ScrollSeekPlaceholder:Fa("ScrollSeekPlaceholder"),FillerRow:Fa("FillerRow")}}),ku=Xh(function(a){return Bh({},a[0],a[1])},Xi(fu,Nw)),ZC=function(a){return xh.createElement("tr",null,xh.createElement("td",{style:{height:a.height}}))},$C=function(a){return xh.createElement("tr",null,xh.createElement("td",{style:{height:a.height,padding:0,border:0}}))},yo=xh.memo(function(){var a=qk("listState"),d=Fp("sizeRanges"),k=qk("useWindowScroll"),
F=qk("customScrollParent"),Y=Fp("windowScrollContainerState"),ka=Fp("scrollContainerState");k=F||k?Y:ka;var oa=qk("itemContent");Y=qk("trackItemSizes");F=qq(d,qk("itemSize"),Y,k,qk("log"),void 0,F);d=F.callbackRef;var Fa=F.ref;F=xh.useState(0);var Qa=F[0],Wa=F[1];Pw("deviation",function(Zb){Qa!==Zb&&(Fa.current.style.marginTop=Zb+"px",Wa(Zb))});Y=qk("EmptyPlaceholder");var eb=qk("ScrollSeekPlaceholder")||ZC;k=qk("FillerRow")||$C;F=qk("TableBodyComponent");var jb=qk("TableRowComponent"),Mb=qk("computeItemKey"),
Ub=qk("isSeeking");ka=qk("paddingTopAddition");var Ob=qk("firstItemIndex"),jc=qk("statefulTotalCount"),vc=qk("context");if(0===jc&&Y)return(0,ai.createElement)(Y,hk(Y,vc));Y=a.offsetTop+ka+Qa;ka=a.offsetBottom;Y=0<Y?xh.createElement(k,{height:Y,key:"padding-top"}):null;k=0<ka?xh.createElement(k,{height:ka,key:"padding-bottom"}):null;a=a.items.map(function(Zb){var oc=Zb.originalIndex,lc=Mb(oc+Ob,Zb.data,vc);return Ub?(0,ai.createElement)(eb,Bh({},hk(eb,vc),{key:lc,index:Zb.index,height:Zb.size,type:Zb.type||
"item"})):(0,ai.createElement)(jb,Bh({},hk(jb,vc),{key:lc,"data-index":oc,"data-known-size":Zb.size,"data-item-index":Zb.index,style:{overflowAnchor:"none"}}),oa(Zb.index,Zb.data,vc))});return(0,ai.createElement)(F,Bh({ref:d,"data-test-id":"virtuoso-item-list"},hk(F,vc)),[Y].concat(a,[k]))}),Ow=function(a){a=a.children;var d=(0,ai.useContext)(mv),k=Fp("viewportHeight"),F=Fp("fixedItemHeight"),Y=Ji(mm(k,function(ka){return Yl(ka,"height")}));return xh.useEffect(function(){d&&(k(d.viewportHeight),F(d.itemHeight))},
[d,k,F]),xh.createElement("div",{style:hu,ref:Y,"data-viewport-type":"element"},a)},bz=function(a){a=a.children;var d=(0,ai.useContext)(mv),k=Fp("windowViewportRect"),F=Fp("fixedItemHeight"),Y=qk("customScrollParent");Y=th(k,Y);return xh.useEffect(function(){d&&(F(d.itemHeight),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,k,F]),xh.createElement("div",{ref:Y,style:hu,"data-viewport-type":"window"},a)},sv=ak(ku,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},xh.memo(function(a){var d=qk("useWindowScroll"),k=qk("customScrollParent"),F=Fp("fixedHeaderHeight"),Y=Fp("fixedFooterHeight"),ka=qk("fixedHeaderContent"),oa=qk("fixedFooterContent"),Fa=qk("context");F=Ji(mm(F,function(jb){return Yl(jb,
"height")}));var Qa=Ji(mm(Y,function(jb){return Yl(jb,"height")}));Y=k||d?aD:FH;d=k||d?bz:Ow;k=qk("TableComponent");var Wa=qk("TableHeadComponent"),eb=qk("TableFooterComponent");ka=ka?xh.createElement(Wa,Bh({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:F},hk(Wa,Fa)),ka()):null;oa=oa?xh.createElement(eb,Bh({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Qa},hk(eb,Fa)),oa()):null;return xh.createElement(Y,Bh({},a),xh.createElement(d,null,xh.createElement(k,Bh({style:{borderSpacing:0}},
hk(k,Fa)),[ka,xh.createElement(yo,{key:"TableBody"}),oa])))})),Fp=sv.usePublisher,qk=sv.useEmitterValue,Pw=sv.useEmitter,FH=ko({usePublisher:Fp,useEmitterValue:qk,useEmitter:Pw}),aD=lp({usePublisher:Fp,useEmitterValue:qk,useEmitter:Pw}),lu=uf(V(22)),Yn=function(a){function d(k){k=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+k+" for more information.")||this;if(void 0===k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return k}rp(d,a);return d}(Pp(Error)),Qw={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",
darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",
gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",
olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},bD=/^#[a-fA-F0-9]{6}$/,cD=/^#[a-fA-F0-9]{8}$/,cz=/^#[a-fA-F0-9]{3}$/,gp=/^#[a-fA-F0-9]{4}$/,at=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,pn=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,
Rw=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,tv=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Qo=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},dk=nq(oq,oq.length,[]),mu=V(586),In=uf(V(22)),Ro=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||
0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const k=a.ownerDocument,F=k.activeElement;F!==a&&a.focus();k.execCommand("insertText",!1,d)||Ro.insertTextFirefox(a,d);F===k.body?a.blur():F instanceof HTMLElement&&F!==a&&F.focus()}static set(a,d){a.select();Ro.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:k}=a;return a.value.slice(d?d:void 0,k?k:void 0)}static wrapSelection(a,d,k){const {selectionStart:F,
selectionEnd:Y}=a,ka=Ro.getSelection(a);Ro.insert(a,d+ka+(null!=k?k:d));a.selectionStart=(F||0)+d.length;a.selectionEnd=(Y||0)+d.length}static replace(a,d,k){let F=0;a.value.replace(d,(...Y)=>{const ka=F+Y[Y.length-2],oa=Y[0].length;a.selectionStart=ka;a.selectionEnd=ka+oa;Y="string"===typeof k?k:k(...Y);Ro.insert(a,Y);a.selectionStart=ka;F+=Y.length-oa;return Y})}static findLineEnd(a,d){const k=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(k)?d:k+1}static indent(a){var d;const {selectionStart:k,
selectionEnd:F,value:Y}=a;var ka=Y.slice(k,F);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=Y.lastIndexOf("\n",k-1)+1;var oa=a.value.slice(d,F-1);ka=oa.replace(/^|\n/g,"$\x26  ");oa=ka.length-oa.length;a.setSelectionRange(d,F-1);Ro.insert(a,ka);a.setSelectionRange(k+1,F+oa)}else Ro.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:k,value:F}=a;var Y=F.lastIndexOf("\n",d-1)+1;const ka=Ro.findLineEnd(F,k);var oa=a.value.slice(Y,ka);const Fa=oa.replace(/(^|\n)(\t| {1,2})/g,
"$1");oa=oa.length-Fa.length;a.setSelectionRange(Y,ka);Ro.insert(a,Fa);Y=(Y=/\t| {1,2}/.exec(F.slice(Y,d)))?Y[0].length:0;a.setSelectionRange(d-Y,Math.max(d-Y,k-oa))}},Sw=V(586),nu=a=>a.stopPropagation(),ou=In.memo(function({font:a,text:d,color:k,fontStyle:F,fontSize:Y,fontWeight:ka,offsetX:oa=0,offsetY:Fa=0,scale:Qa=1,isEditing:Wa=!1,pointerEvents:eb=!1,onBlur:jb,onChange:Mb}){const Ub=In.useRef(null),Ob=In.useRef(!1),jc=In.useCallback(Lc=>{Mb(Kt.normalizeText(Lc.currentTarget.value))},[Mb]),vc=
In.useCallback(Lc=>{if("Escape"!==Lc.key)if("Tab"===Lc.key&&0===d.length)Lc.preventDefault();else{if("Meta"!==Lc.key&&!Lc.metaKey)Lc.stopPropagation();else if("z"===Lc.key&&Lc.metaKey){document.execCommand(Lc.shiftKey?"redo":"undo",!1);Lc.stopPropagation();Lc.preventDefault();return}"Tab"===Lc.key&&(Lc.preventDefault(),Lc.shiftKey?Ro.unindent(Lc.currentTarget):Ro.indent(Lc.currentTarget),null==Mb?void 0:Mb(Kt.normalizeText(Lc.currentTarget.value)))}},[Mb]),Zb=In.useCallback(Lc=>{Wa&&(Lc.currentTarget.setSelectionRange(0,
0),null==jb?void 0:jb())},[jb]),oc=In.useCallback(Lc=>{Wa&&Ob.current&&document.activeElement===Lc.currentTarget&&Lc.currentTarget.select()},[Wa]),lc=In.useCallback(Lc=>{Wa&&Lc.stopPropagation()},[Wa]);In.useEffect(()=>{Wa&&requestAnimationFrame(()=>{Ob.current=!0;const Lc=Ub.current;Lc&&(Lc.focus(),Lc.select())})},[Wa,jb]);const Ic=In.useRef(null);In.useLayoutEffect(()=>{const Lc=Ic.current;if(Lc){var wd=Oj(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:Y,lineHeight:1,fontWeight:ka},
4);Lc.style.transform=`scale(${Qa}, ${Qa}) translate(${oa}px, ${Fa}px)`;Lc.style.width=wd[0]+1+"px";Lc.style.height=wd[1]+1+"px"}},[d,ka,Y,Fa,oa,Qa]);return(0,Sw.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Sw.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Ic,style:{font:a,fontStyle:F,fontSize:Y,fontWeight:ka,color:k,pointerEvents:eb?"all":"none",userSelect:Wa?"text":"none"},children:[Wa?(0,Sw.jsx)("textarea",{ref:Ub,style:{font:a,color:k,fontStyle:F,fontSize:Y,fontWeight:ka},
className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:k,onFocus:oc,onChange:jc,onKeyDown:vc,onBlur:Zb,onPointerDown:lc,onContextMenu:nu,onCopy:nu,onPaste:nu,onCut:nu}):d,"​"]})})}),Gp=V(586),So={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},zo=class extends fo{constructor(){super(...arguments);gb(this,"canEdit",
!0);gb(this,"ReactComponent",Ze(({events:a,isErasing:d,isBinding:k,isSelected:F,isEditing:Y,onEditingEnd:ka})=>{const {props:{size:[oa,Fa],stroke:Qa,fill:Wa,noFill:eb,strokeWidth:jb,strokeType:Mb,borderRadius:Ub,opacity:Ob,label:jc,italic:vc,fontWeight:Zb,fontSize:oc}}=this;var lc=jc||Y?Oj(jc,{fontFamily:"var(--ls-font-family)",fontSize:oc,lineHeight:1,fontWeight:Zb},4):[0,0];const Ic=je.mul(this.props.size,.5);lc=Math.max(.5,Math.min(1,oa/lc[0],Fa/lc[1]));const Lc=this.getBounds(),wd=lu.useMemo(()=>
je.sub(Ic,je.toFixed([Lc.width/2,Lc.height/2])),[Lc,lc,Ic]),Td=lu.useCallback(We=>{var ne;null==(ne=this.update)?void 0:ne.call(this,{label:We})},[jc]);return(0,Gp.jsxs)("div",kf(me({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,Gp.jsx)(ou,{font:"20px / 1 var(--ls-font-family)",text:jc,color:bh(Qa,"text"),offsetX:wd[0],offsetY:wd[1],fontSize:oc,scale:lc,isEditing:Y,onChange:Td,onBlur:ka,fontStyle:vc?"italic":"normal",fontWeight:Zb,pointerEvents:!!jc}),
(0,Gp.jsxs)(Ap,{opacity:d?.2:Ob,children:[k&&(0,Gp.jsx)(Uq,{mode:"svg",strokeWidth:jb,size:[oa,Fa]}),(0,Gp.jsx)("rect",{className:F||!eb?"tl-hitarea-fill":"tl-hitarea-stroke",x:jb/2,y:jb/2,rx:Ub,ry:Ub,width:Math.max(.01,oa-jb),height:Math.max(.01,Fa-jb),pointerEvents:"all"}),(0,Gp.jsx)("rect",{x:jb/2,y:jb/2,rx:Ub,ry:Ub,width:Math.max(.01,oa-jb),height:Math.max(.01,Fa-jb),strokeWidth:jb,stroke:bh(Qa,"stroke"),strokeDasharray:"dashed"===Mb?"8 2":void 0,fill:eb?"none":bh(Wa,"background")})]})]}))}));
gb(this,"setScaleLevel",a=>vi(this,null,function*(){this.update({scaleLevel:a,fontSize:So[null!=a?a:"md"],strokeWidth:So[null!=a?a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",Ze(()=>{const {props:{size:[a,d],borderRadius:k,isLocked:F}}=this;return(0,Gp.jsx)("g",{children:(0,Gp.jsx)("rect",{width:a,height:d,rx:k,ry:k,fill:"transparent",strokeDasharray:F?"8 2":void 0})})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));
void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return jn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};gb(zo,"id","box");gb(zo,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});ie([Ef],zo.prototype,"scaleLevel",1);ie([yg],zo.prototype,"setScaleLevel",2);var Tw=uf(V(22)),Hp=V(586),uv=
{xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},bt=class extends wx{constructor(){super(...arguments);gb(this,"canEdit",!0);gb(this,"ReactComponent",Ze(({isSelected:a,isErasing:d,events:k,isEditing:F,onEditingEnd:Y})=>{const {size:[ka,oa],stroke:Fa,fill:Qa,noFill:Wa,strokeWidth:eb,strokeType:jb,opacity:Mb,label:Ub,italic:Ob,fontWeight:jc,fontSize:vc}=this.props;var Zb=Ub||F?Oj(Ub,{fontFamily:"var(--ls-font-family)",fontSize:vc,lineHeight:1,fontWeight:jc},4):[0,0];const oc=je.mul(this.props.size,.5);Zb=Math.max(.5,
Math.min(1,ka/Zb[0],oa/Zb[1]));const lc=this.getBounds(),Ic=Tw.useMemo(()=>je.sub(oc,je.toFixed([lc.width/2,lc.height/2])),[lc,Zb,oc]),Lc=Tw.useCallback(wd=>{var Td;null==(Td=this.update)?void 0:Td.call(this,{label:wd})},[Ub]);return(0,Hp.jsxs)("div",kf(me({},k),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,Hp.jsx)(ou,{font:"18px / 1 var(--ls-font-family)",text:Ub,color:bh(Fa,"text"),offsetX:Ic[0],offsetY:Ic[1],scale:Zb,isEditing:F,onChange:Lc,
onBlur:Y,fontStyle:Ob?"italic":"normal",fontSize:vc,fontWeight:jc,pointerEvents:!!Ub}),(0,Hp.jsxs)(Ap,kf(me({},k),{opacity:d?.2:Mb,children:[(0,Hp.jsx)("ellipse",{className:a||!Wa?"tl-hitarea-fill":"tl-hitarea-stroke",cx:ka/2,cy:oa/2,rx:Math.max(.01,(ka-eb)/2),ry:Math.max(.01,(oa-eb)/2)}),(0,Hp.jsx)("ellipse",{cx:ka/2,cy:oa/2,rx:Math.max(.01,(ka-eb)/2),ry:Math.max(.01,(oa-eb)/2),strokeWidth:eb,stroke:bh(Fa,"stroke"),strokeDasharray:"dashed"===jb?"8 2":void 0,fill:Wa?"none":bh(Qa,"background")})]}))]}))}));
gb(this,"setScaleLevel",a=>vi(this,null,function*(){this.update({scaleLevel:a,fontSize:uv[null!=a?a:"md"],strokeWidth:uv[null!=a?a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",Ze(()=>{const {size:[a,d],isLocked:k}=this.props;return(0,Hp.jsx)("g",{children:(0,Hp.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],
1));return jn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,k],stroke:F,fill:Y,noFill:ka,strokeWidth:oa,strokeType:Fa,opacity:Qa}=this.props;return(0,Hp.jsxs)("g",{opacity:Qa,children:[(0,Hp.jsx)("ellipse",{className:ka?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:k/2,rx:Math.max(.01,(d-oa)/2),ry:Math.max(.01,(k-oa)/2)}),(0,Hp.jsx)("ellipse",{cx:d/2,cy:k/2,rx:Math.max(.01,(d-oa)/2),ry:Math.max(.01,(k-oa)/2),strokeWidth:oa,stroke:bh(F,
"stroke"),strokeDasharray:"dashed"===Fa?"8 2":void 0,fill:ka?"none":bh(Y,"background")})]})}};gb(bt,"id","ellipse");gb(bt,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});ie([Ef],bt.prototype,"scaleLevel",1);ie([yg],bt.prototype,"setScaleLevel",2);var bs=V(586),Uw=class extends Wv{constructor(){super(...arguments);gb(this,"ReactComponent",Ze(({events:a})=>
{const d=this.getBounds(),k=ef(),F=k.selectedShapesArray.some(ka=>k.shapesInGroups([this]).includes(ka)),Y=this.ReactIndicator;return(0,bs.jsxs)(Ap,kf(me({},a),{className:"tl-group-container",children:[(0,bs.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),F&&(0,bs.jsx)("g",{stroke:"var(--color-selectedFill)",children:(0,bs.jsx)(Y,{})})]}))}));gb(this,"ReactIndicator",Ze(()=>{const a=this.getBounds();return(0,bs.jsx)("rect",
{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};gb(Uw,"id","group");gb(Uw,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var vv=V(586),dz={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},cs=class extends Dt{constructor(a={}){super(a);gb(this,"ReactComponent",Ze(({events:d,isErasing:k})=>{const {pointsPath:F,props:{stroke:Y,strokeWidth:ka,opacity:oa}}=this;return(0,vv.jsx)(Ap,kf(me({},d),{opacity:k?.2:1,children:(0,vv.jsx)("path",
{d:F,strokeWidth:16*ka,stroke:bh(Y,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:oa})}))}));gb(this,"setScaleLevel",d=>vi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:dz[null!=d?d:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",Ze(()=>{const {pointsPath:d,props:k}=this;return(0,vv.jsx)("path",{d,fill:"none",strokeDasharray:k.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",d=>{d=jn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=
Math.max(d.strokeWidth,1));return d});Qg(this)}get pointsPath(){const {points:a}=this.props;return yu.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:k,opacity:F}}=this;return(0,vv.jsx)("path",{d:a,strokeWidth:16*k,stroke:bh(d,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:F})}};gb(cs,"id","highlighter");gb(cs,"defaultProps",{id:"highlighter",
parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});ie([Ef],cs.prototype,"pointsPath",1);ie([Ef],cs.prototype,"scaleLevel",1);ie([yg],cs.prototype,"setScaleLevel",2);var ct=uf(V(22)),lf=V(586),dh={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},cq=class extends fo{constructor(){super(...arguments);gb(this,"canChangeAspectRatio",!0);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"htmlAnchorRef",ct.createRef());gb(this,
"setScaleLevel",a=>vi(this,null,function*(){var d;const k=je.mul(this.props.size,dh[null!=a?a:"md"]/dh[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield Ql();this.update({size:k})}));gb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const k=this.htmlAnchorRef.current.getBoundingClientRect(),[F,Y]=je.div([k.width,k.height],null!=(d=null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(F||400,1400),10),Math.max(Math.min(Y||400,1400),10)]})}return this});
gb(this,"ReactComponent",Ze(({events:a,isErasing:d,isEditing:k})=>{const {props:{html:F,scaleLevel:Y}}=this,ka=vn(),oa=ef(),Fa=oa.selectedIds.has(this.id),Qa=ka||Fa&&!k||"select"!==oa.selectedTool.id,Wa=ct.useCallback(jb=>{Qa||jb.stopPropagation()},[Qa]),eb=dh[null!=Y?Y:"md"];ct.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:oa.viewport.camera.zoom}),oa.persist(!0))},[]);return(0,lf.jsx)(Yo,kf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,lf.jsx)("div",
{onWheelCapture:Wa,onPointerDown:Wa,onPointerUp:Wa,className:"tl-html-container",style:{pointerEvents:ka||!k&&!Fa?"none":"all",overflow:k?"auto":"hidden",width:`calc(100% / ${eb})`,height:`calc(100% / ${eb})`,transform:`scale(${eb})`},children:(0,lf.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:F.trim()}})})}))}));gb(this,"ReactIndicator",Ze(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,lf.jsx)("rect",{width:a,height:d,fill:"transparent",
strokeDasharray:k?"8 2":"undefined"})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return jn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};gb(cq,"id","html");gb(cq,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});ie([Ef],cq.prototype,"scaleLevel",1);ie([yg],cq.prototype,"setScaleLevel",2);var ez=uf(V(22)),pu=V(586),ds=class extends fo{constructor(){super(...arguments);
gb(this,"frameRef",ez.createRef());gb(this,"canEdit",!0);gb(this,"onIFrameSourceChange",a=>{this.update({url:a})});gb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});gb(this,"ReactComponent",Ze(({events:a,isErasing:d,isEditing:k})=>{ez.useRef(null);const F=ef();return(0,pu.jsx)(Yo,kf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,pu.jsx)("div",{className:"tl-iframe-container",
style:{pointerEvents:k||F.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,pu.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,pu.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));gb(this,"ReactIndicator",Ze(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,pu.jsx)("rect",
{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}))}};gb(ds,"id","iframe");gb(ds,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});ie([yg],ds.prototype,"onIFrameSourceChange",2);ie([yg],ds.prototype,"reload",2);var fz=uf(V(22)),dt=V(586),wv=class extends xx{constructor(){super(...arguments);gb(this,"ReactComponent",Ze(({events:a,isErasing:d,isBinding:k,asset:F})=>{const {props:{opacity:Y,objectFit:ka,clipping:oa,size:[Fa,
Qa]}}=this,[Wa,eb,jb,Mb]=Array.isArray(oa)?oa:[oa,oa,oa,oa],{handlers:Ub}=fz.useContext(vj);return(0,dt.jsxs)(Yo,kf(me({},a),{opacity:d?.2:Y,children:[k&&(0,dt.jsx)(Uq,{mode:"html",strokeWidth:4,size:[Fa,Qa]}),(0,dt.jsx)("div",{"data-asset-loaded":!!F,className:"tl-image-shape-container",children:F?(0,dt.jsx)("img",{src:Ub?Ub.makeAssetUrl(F.src):F.src,draggable:!1,style:{position:"relative",top:-Wa,left:-Mb,width:Fa+(Mb-eb),height:Qa+(Wa-jb),objectFit:ka}}):"Asset is missing"})]}))}));gb(this,"ReactIndicator",
Ze(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,dt.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,k;const F=this.getBounds(),{assetId:Y,clipping:ka}=this.props;if(a=a.find(oa=>oa.id===Y)){Array.isArray(ka);const oa=null==(k=null==(d=window.logseq)?void 0:d.api)?void 0:k.make_asset_url;return(0,dt.jsx)("image",{width:F.width,height:F.height,href:oa?oa(a.src):a.src})}return super.getShapeSVGJsx({})}};gb(wv,"id",
"image");gb(wv,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var xj=uf(V(22)),dD=uf(V(22)),Vw=V(586),lr=V(586),eD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},qu=dD.memo(function({style:a,start:d,end:k,decorationStart:F,decorationEnd:Y,scaleLevel:ka}){const oa=je.dist(d,k);if(2>oa)return null;const {strokeWidth:Fa}=a,Qa=1+Fa*eD[null!=ka?ka:"md"]/10,Wa="M"+je.toFixed(d)+"L"+je.toFixed(k);ka=Math.min(oa/
3,Fa*eD[null!=ka?ka:"md"]);F=F?Qp(d,k,ka):null;Y=Y?Qp(k,d,ka):null;return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("path",{className:"tl-stroke-hitarea",d:Wa}),(0,lr.jsx)("path",{d:Wa,strokeWidth:Qa,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),F&&(0,lr.jsx)(Op,{left:F.left,middle:d,right:F.right,stroke:a.stroke,strokeWidth:Qa}),Y&&(0,lr.jsx)(Op,{left:Y.left,middle:k,right:Y.right,stroke:a.stroke,strokeWidth:Qa})]})}),
xv=V(586),Ao=V(586),es={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},et=class extends Iu{constructor(){super(...arguments);gb(this,"hideSelection",!0);gb(this,"canEdit",!0);gb(this,"ReactComponent",Ze(({events:a,isErasing:d,isEditing:k,onEditingEnd:F})=>{const {stroke:Y,handles:{start:ka,end:oa},opacity:Fa,label:Qa,italic:Wa,fontWeight:eb,fontSize:jb,id:Mb}=this.props,Ub=Qa||k?Oj(Qa||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:jb,lineHeight:1,fontWeight:eb},6):[0,0],Ob=je.med(ka.point,oa.point);
var jc=je.dist(ka.point,oa.point);jc=Math.max(.5,Math.min(1,Math.max(jc/(Ub[1]+128),jc/(Ub[0]+128))));const vc=this.getBounds(),Zb=xj.useMemo(()=>je.sub(Ob,je.toFixed([vc.width/2,vc.height/2])),[vc,jc,Ob]),oc=xj.useCallback(lc=>{var Ic;null==(Ic=this.update)?void 0:Ic.call(this,{label:lc})},[Qa]);return(0,Ao.jsxs)("div",kf(me({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-line-container",children:[(0,Ao.jsx)(ou,{font:"20px / 1 var(--ls-font-family)",text:Qa,fontSize:jb,
color:bh(Y,"text"),offsetX:Zb[0],offsetY:Zb[1],scale:jc,isEditing:k,onChange:oc,onBlur:F,fontStyle:Wa?"italic":"normal",fontWeight:eb,pointerEvents:!!Qa}),(0,Ao.jsxs)(Ap,{opacity:d?.2:Fa,id:Mb+"_svg",children:[(0,Ao.jsx)(Rq,{id:Mb,bounds:vc,labelSize:Ub,offset:Zb,scale:jc}),(0,Ao.jsx)("g",{pointerEvents:"none",mask:Qa||k?`url(#${Mb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));gb(this,"setScaleLevel",a=>vi(this,null,function*(){this.update({scaleLevel:a,fontSize:es[null!=a?a:"md"]});
this.onResetBounds()}));gb(this,"ReactIndicator",Ze(({isEditing:a})=>{const {id:d,decorations:k,label:F,strokeWidth:Y,fontSize:ka,fontWeight:oa,handles:{start:Fa,end:Qa},isLocked:Wa}=this.props,eb=this.getBounds(),jb=F||a?Oj(F,{fontFamily:"var(--ls-font-family)",fontSize:ka,lineHeight:1,fontWeight:oa},6):[0,0],Mb=je.med(Fa.point,Qa.point);var Ub=je.dist(Fa.point,Qa.point);Ub=Math.max(.5,Math.min(1,Math.max(Ub/(jb[1]+128),Ub/(jb[0]+128))));const Ob=xj.useMemo(()=>je.sub(Mb,je.toFixed([eb.width/2,eb.height/
2])),[eb,Ub,Mb]);return(0,Ao.jsxs)("g",{children:[(0,Ao.jsx)("path",{mask:F?`url(#${d}_clip)`:"",d:rm({strokeWidth:Y},Fa.point,Qa.point,null==k?void 0:k.start,null==k?void 0:k.end),strokeDasharray:Wa?"8 2":"undefined"}),F&&!a&&(0,Ao.jsx)("rect",{x:eb.width/2-jb[0]/2*Ub+Ob[0],y:eb.height/2-jb[1]/2*Ub+Ob[1],width:jb[0]*Ub,height:jb[1]*Ub,rx:4*Ub,ry:4*Ub,fill:"transparent"})]})}));gb(this,"validateProps",a=>jn(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,
fill:k,strokeWidth:F,strokeType:Y,decorations:ka,label:oa,scaleLevel:Fa,handles:{start:Qa,end:Wa}}=this.props,eb=je.med(Qa.point,Wa.point);return(0,Ao.jsxs)(Ao.Fragment,{children:[(0,Ao.jsx)(qu,{style:{stroke:bh(d,"text"),fill:k,strokeWidth:F,strokeType:Y},scaleLevel:Fa,start:Qa.point,end:Wa.point,decorationStart:null==ka?void 0:ka.start,decorationEnd:null==ka?void 0:ka.end}),a&&(0,Ao.jsx)(Ao.Fragment,{children:(0,Ao.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${eb[0]}, ${eb[1]})`,
textAnchor:"middle",fill:bh(d,"text"),stroke:bh(d,"text"),children:oa})})]})}};gb(et,"id","line");gb(et,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});ie([Ef],et.prototype,"scaleLevel",1);ie([yg],et.prototype,"setScaleLevel",2);var Bo=uf(V(22)),Uj=
V(586),Ip={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},dq=Ze(({type:a,fill:d,opacity:k,children:F})=>{const Y="var(--ls-secondary-background-color)"!==d?bh(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?$i(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,Uj.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,Uj.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",
style:{opacity:k,background:"P"===a?Y:`linear-gradient(0deg, ${d}, ${Y})`}}),(0,Uj.jsx)("div",{className:"relative",children:F})]})}),Kl=class extends fo{constructor(a={}){var d;super(a);gb(this,"hideRotateHandle",!0);gb(this,"canChangeAspectRatio",!0);gb(this,"canFlip",!0);gb(this,"canEdit",!0);gb(this,"persist",null);gb(this,"initialHeightCalculated",!0);gb(this,"getInnerHeight",null);gb(this,"setCollapsed",k=>vi(this,null,function*(){var F;if("B"===this.props.blockType){if(this.update({compact:k}),
this.canResize[1]=!k,!k)this.onResetBounds()}else{const Y=this.props.size[1];this.canResize[1]=!k;this.update({isAutoResizing:!k,collapsed:k,size:[this.props.size[0],k?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:k?Y:this.props.collapsedHeight})}null==(F=this.persist)?void 0:F.call(this)}));gb(this,"setScaleLevel",k=>vi(this,null,function*(){var F;const Y=je.mul(this.props.size,Ip[null!=k?k:"md"]/Ip[null!=(F=this.props.scaleLevel)?F:"md"]);this.update({scaleLevel:k});yield Ql();
this.update({size:Y})}));gb(this,"onResetBounds",k=>{k=this.getAutoResizeHeight();null!==k&&1<Math.abs(k-this.props.size[1])&&(this.update({size:[this.props.size[0],k]}),this.initialHeightCalculated=!0);return this});gb(this,"onResize",(k,F)=>{var Y;const {bounds:ka,rotation:oa,scale:[Fa,Qa]}=F;k=[...this.scale];0>Fa&&(k[0]*=-1);0>Qa&&(k[1]*=-1);F=ka.height;this.props.isAutoResizing&&(F=null!=(Y=this.getAutoResizeHeight())?Y:F);return this.update({point:[ka.minX,ka.minY],size:[Math.max(1,ka.width),
Math.max(1,F)],scale:k,rotation:oa})});gb(this,"PortalComponent",Ze(({})=>{const {props:{pageId:k,fill:F,opacity:Y}}=this,{renderers:ka}=Bo.useContext(vj),oa=ef(),Fa=Bo.useRef(null),[,Qa]=this.useComponentSize(Fa,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==ka||!ka.Page)return null;const {Page:Wa,Block:eb}=ka,[jb,Mb]=Bo.useState(!1);Bo.useEffect(()=>{var Ub,Ob;if(this.props.isAutoResizing){const jc=(null!=(Ob=null==(Ub=this.getInnerHeight)?
void 0:Ub.call(this))?Ob:Qa)+this.getHeaderHeight();Qa&&1<Math.abs(jc-this.props.size[1])&&(this.update({size:[this.props.size[0],jc]}),jb&&oa.persist(!0))}},[Qa,this.props.isAutoResizing]);Bo.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();oa.persist(!0)})},[this.initialHeightCalculated]);Bo.useEffect(()=>{setTimeout(function(){Mb(!0)})},[]);return(0,Uj.jsxs)(Uj.Fragment,{children:[(0,Uj.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>
oa.viewport.camera.zoom?"optimizeSpeed":"auto",background:F&&"var(--ls-secondary-background-color)"!==F?$i(F)?`var(--ls-highlight-color-${F})`:F:"var(--ls-secondary-background-color)",opacity:Y}}),(0,Uj.jsx)("div",{ref:Fa,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(jb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,Uj.jsx)(eb,{blockId:k}):(0,Uj.jsx)(Wa,{pageName:k}))})]})}));gb(this,"ReactComponent",
Ze(k=>{var F;const {events:Y,isErasing:ka,isEditing:oa,isBinding:Fa}=k,{props:{opacity:Qa,pageId:Wa,fill:eb,scaleLevel:jb,strokeWidth:Mb,size:Ub}}=this,Ob=ef(),{renderers:jc,handlers:vc}=Bo.useContext(vj);this.persist=()=>Ob.persist();const Zb=vn(),oc=Ob.selectedIds.has(this.id)&&1===Ob.selectedIds.size,lc=Ob.isIn("logseq-portal.creating")&&!Wa,Ic=(Zb||oc&&!oa||"select"!==Ob.selectedTool.id)&&!lc,Lc=Bo.useCallback(nd=>{Ic||nd.stopPropagation()},[Ic]),wd=1===Ob.selectedShapesArray.length&&Ob.selectedShapesArray.some(nd=>
"logseq-portal"===nd.type&&nd.props.id!==this.props.id&&Wa&&nd.props.pageId===Wa),Td=Ip[null!=jb?jb:"md"];Bo.useEffect(()=>this.props.collapsed&&oa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[oa,this.props.collapsed]);Bo.useEffect(()=>{if(lc){const nd=[Ob.viewport.bounds.width,Ob.viewport.bounds.height],Yd=Ob.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(Yd[0]>nd[0]-400||Yd[1]>nd[1]-
240||1.5<Ob.viewport.camera.zoom||.5>Ob.viewport.camera.zoom)&&Ob.viewport.zoomToBounds(kf(me({},this.bounds),{minY:this.bounds.maxY+25}))}},[Ob.viewport.bounds.height.toFixed(2)]);const We=Bo.useCallback(nd=>{this.initialHeightCalculated=!1;const Yd=Mk(nd)?"B":"P";this.update({pageId:nd,size:[400,320],blockType:Yd,compact:"B"===Yd});Ob.selectTool("select");Ob.history.resume();Ob.history.persist()},[]),ne=this.PortalComponent;var Ke=Bo.useMemo(()=>{var nd;if(Wa&&"B"===this.props.blockType)return null==
(nd=null==vc?void 0:vc.queryBlockByUUID(Wa))?void 0:nd.content},[null==vc?void 0:vc.queryBlockByUUID,Wa]);Ke="B"===this.props.blockType&&"string"!==typeof Ke;const Bf=(!this.props.collapsed||oa)&&!Ke;if(null==jc||!jc.Page)return null;const {Breadcrumb:Se,PageName:Xe}=jc,Xd={width:`calc(100% / ${Td})`,height:`calc(100% / ${Td})`,opacity:ka?.2:1};1!==Td&&(Xd.transform=`scale(${Td})`);return(0,Uj.jsxs)(Yo,kf(me({style:{pointerEvents:"all"}},Y),{children:[Fa&&(0,Uj.jsx)(Uq,{mode:"html",strokeWidth:Mb,
size:Ub}),(0,Uj.jsx)("div",{"data-inner-events":!Ic,onWheelCapture:Lc,onPointerDown:Lc,onPointerUp:Lc,style:{width:"100%",height:"100%",pointerEvents:Zb||!oa&&!oc?"none":"all"},children:lc?(0,Uj.jsx)(jt,{onChange:We,onAddBlock:nd=>{setTimeout(()=>{var Yd,ld,Hd;Ob.api.editShape(this);null==(Hd=null==(ld=null==(Yd=window.logseq)?void 0:Yd.api)?void 0:ld.edit_block)?void 0:Hd.call(ld,nd)})},placeholder:"Create or search your graph..."}):(0,Uj.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,
"data-page-id":Wa,"data-portal-selected":wd,"data-editing":oa,style:Xd,children:[!this.props.compact&&!Ke&&(0,Uj.jsx)(dq,{type:null!=(F=this.props.blockType)?F:"P",fill:eb,opacity:Qa,children:"P"===this.props.blockType?(0,Uj.jsx)(Xe,{pageName:Wa}):(0,Uj.jsx)(Se,{blockId:Wa})}),Ke&&(0,Uj.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),Bf&&(0,Uj.jsx)(ne,me({},k))]})})]}))}));gb(this,"ReactIndicator",Ze(()=>{const k=this.getBounds();return(0,Uj.jsx)("rect",{width:k.width,height:k.height,
fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",k=>{var F;if(void 0!==k.size){const Y=Ip[null!=(F=this.props.scaleLevel)?F:"md"];k.size[0]=Math.max(k.size[0],60*Y);k.size[1]=Math.max(k.size[1],40*Y)}return jn(this,k)});Qg(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===
this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [k,F]=Bo.useState([0,0]),Y=ef();Bo.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const ka=d?a.current.querySelector(d):a.current;if(ka){const oa=()=>{const {width:Qa,height:Wa}=ka.getBoundingClientRect(),eb=je.div([Qa,Wa],Y.viewport.camera.zoom);F(eb);return eb};oa();this.getInnerHeight=()=>oa()[1];const Fa=new ResizeObserver(()=>
{oa()});Fa.observe(ka);return()=>{Fa.disconnect()}}}return()=>{}},10)},[a,d]);return k}getHeaderHeight(){var a;const d=Ip[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,k;const F=this.getBounds();return(0,Uj.jsxs)(Uj.Fragment,{children:[(0,Uj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?$i(this.props.fill)?
`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:bh(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:F.width,rx:8,ry:8,height:F.height}),!this.props.compact&&(0,Uj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?bh(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(k=this.props.opacity)?
k:.2,x:1,y:1,width:F.width-2,height:38,rx:8,ry:8}),(0,Uj.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${F.width/2}, ${10+F.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};gb(Kl,"id","logseq-portal");gb(Kl,"defaultSearchQuery","");gb(Kl,"defaultSearchFilter",null);gb(Kl,"defaultProps",{id:"logseq-portal",
type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});ie([Ef],Kl.prototype,"collapsed",1);ie([yg],Kl.prototype,"setCollapsed",2);ie([Ef],Kl.prototype,"scaleLevel",1);ie([yg],Kl.prototype,"setScaleLevel",2);var {min:eq,PI:fD}=Math,mr=fD+1E-4,yv=V(586),fq={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},ft={easing:a=>Math.sin(a*Math.PI/
2),simulatePressure:!0},gz={easing:a=>a*a,simulatePressure:!1},Eg=class extends Dt{constructor(a={}){super(a);gb(this,"ReactComponent",Ze(({events:d,isErasing:k})=>{const {props:{opacity:F}}=this;return(0,yv.jsx)(Ap,kf(me({},d),{opacity:k?.2:F,children:this.getShapeSVGJsx()}))}));gb(this,"setScaleLevel",d=>vi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:fq[null!=d?d:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",Ze(()=>{const {pointsPath:d}=this;return(0,yv.jsx)("path",{d,
strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",d=>{d=jn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});Qg(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=kf(me({size:1+1.5*a.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?ft:gz),{last:a.isComplete}),a=Wc(a.points,d),d=yu.getSvgPathFromStroke(tc(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?
a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:k,strokeType:F}}=this;return(0,yv.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:k/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:bh(d,"text"),fill:bh(d,"text"),strokeDasharray:"dashed"===F?"12 4":void 0})}};gb(Eg,"id","pencil");gb(Eg,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});ie([Ef],Eg.prototype,
"pointsPath",1);ie([Ef],Eg.prototype,"scaleLevel",1);ie([yg],Eg.prototype,"setScaleLevel",2);var zv=uf(V(22)),hp=V(586),nr={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ip=class extends Jr{constructor(){super(...arguments);gb(this,"canEdit",!0);gb(this,"ReactComponent",Ze(({events:a,isErasing:d,isSelected:k,isEditing:F,onEditingEnd:Y})=>{const {offset:[ka,oa],props:{stroke:Fa,fill:Qa,noFill:Wa,strokeWidth:eb,opacity:jb,strokeType:Mb,label:Ub,italic:Ob,fontWeight:jc,fontSize:vc}}=this,Zb=this.getVertices(eb/
2).join();var oc=Ub||F?Oj(Ub,{fontFamily:"var(--ls-font-family)",fontSize:vc,lineHeight:1,fontWeight:jc},4):[0,0];const lc=[this.props.size[0]/2,2*this.props.size[1]/3];oc=Math.max(.5,Math.min(1,this.props.size[0]/(2*oc[0]),this.props.size[1]/(2*oc[1])));const Ic=this.getBounds(),Lc=zv.useMemo(()=>je.sub(lc,je.toFixed([Ic.width/2,Ic.height/2])),[Ic,oc,lc]),wd=zv.useCallback(Td=>{var We;null==(We=this.update)?void 0:We.call(this,{label:Td})},[Ub]);return(0,hp.jsxs)("div",kf(me({},a),{style:{width:"100%",
height:"100%",overflow:"hidden"},children:[(0,hp.jsx)(ou,{font:"20px / 1 var(--ls-font-family)",text:Ub,fontSize:vc,color:bh(Fa,"text"),offsetX:Lc[0],offsetY:Lc[1]/oc,scale:oc,isEditing:F,onChange:wd,onBlur:Y,fontStyle:Ob?"italic":"normal",fontWeight:jc,pointerEvents:!!Ub}),(0,hp.jsx)(Ap,{opacity:d?.2:jb,children:(0,hp.jsxs)("g",{transform:`translate(${ka}, ${oa})`,children:[(0,hp.jsx)("polygon",{className:k||!Wa?"tl-hitarea-fill":"tl-hitarea-stroke",points:Zb}),(0,hp.jsx)("polygon",{points:Zb,stroke:bh(Fa,
"stroke"),fill:Wa?"none":bh(Qa,"background"),strokeWidth:eb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Mb?"8 2":void 0})]})})]}))}));gb(this,"setScaleLevel",a=>vi(this,null,function*(){this.update({scaleLevel:a,fontSize:nr[null!=a?a:"md"],strokeWidth:nr[null!=a?a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",Ze(()=>{const {offset:[a,d],props:{strokeWidth:k,isLocked:F}}=this;return(0,hp.jsx)("g",{children:(0,hp.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(k/
2).join(),strokeDasharray:F?"8 2":"undefined"})})}));gb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return jn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,k],props:{stroke:F,fill:Y,noFill:ka,strokeWidth:oa,opacity:Fa,strokeType:Qa}}=this;a=this.getVertices(oa/2).join();return(0,hp.jsxs)("g",{transform:`translate(${d}, ${k})`,opacity:Fa,children:[(0,hp.jsx)("polygon",{className:ka?"tl-hitarea-stroke":
"tl-hitarea-fill",points:a}),(0,hp.jsx)("polygon",{points:a,stroke:bh(F,"stroke"),fill:ka?"none":bh(Y,"background"),strokeWidth:oa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Qa?"8 2":void 0})]})}};gb(ip,"id","polygon");gb(ip,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});ie([Ef],ip.prototype,"scaleLevel",
1);ie([yg],ip.prototype,"setScaleLevel",2);var Jp=uf(V(22)),Jn=V(586),gD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Zn=class extends yx{constructor(){super(...arguments);gb(this,"ReactComponent",Ze(({events:a,isErasing:d,isEditing:k,onEditingEnd:F})=>{const {props:{opacity:Y,fontFamily:ka,fontSize:oa,fontWeight:Fa,italic:Qa,lineHeight:Wa,text:eb,stroke:jb,padding:Mb}}=this,Ub=Jp.useRef(null),Ob=Jp.useRef(!1),jc=Jp.useRef(null),vc=Jp.useCallback(Lc=>{const {isSizeLocked:wd}=this.props;Lc=Kt.normalizeText(Lc.currentTarget.value);
wd?this.update({text:Lc,size:this.getAutoSizedBoundingBox({text:Lc})}):this.update({text:Lc})},[]),Zb=Jp.useCallback(Lc=>{if("Escape"!==Lc.key)if("Tab"===Lc.key&&0===eb.length)Lc.preventDefault();else{if("Meta"!==Lc.key&&!Lc.metaKey)Lc.stopPropagation();else if("z"===Lc.key&&Lc.metaKey){Lc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Lc.stopPropagation();Lc.preventDefault();return}"Tab"===Lc.key&&(Lc.preventDefault(),Lc.shiftKey?Ro.unindent(Lc.currentTarget):Ro.indent(Lc.currentTarget),
this.update({text:Kt.normalizeText(Lc.currentTarget.value)}))}},[]),oc=Jp.useCallback(Lc=>{k&&(null==F?void 0:F())},[F]),lc=Jp.useCallback(Lc=>{k&&Ob.current&&document.activeElement===Lc.currentTarget&&Lc.currentTarget.select()},[k]),Ic=Jp.useCallback(Lc=>{k&&Lc.stopPropagation()},[k]);Jp.useEffect(()=>{k&&requestAnimationFrame(()=>{Ob.current=!0;const Lc=Ub.current;Lc&&(Lc.focus(),Lc.select())})},[k,F]);Jp.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},
[]);return(0,Jn.jsx)(Yo,kf(me({},a),{opacity:d?.2:Y,children:(0,Jn.jsx)("div",{ref:jc,className:"tl-text-shape-wrapper","data-hastext":!!eb,"data-isediting":k,style:{fontFamily:ka,fontStyle:Qa?"italic":"normal",fontSize:oa,fontWeight:Fa,padding:Mb,lineHeight:Wa,color:bh(jb,"text")},children:k?(0,Jn.jsx)("textarea",{ref:Ub,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",
dir:"auto",datatype:"wysiwyg",defaultValue:eb,onFocus:lc,onChange:vc,onKeyDown:Zb,onBlur:oc,onPointerDown:Ic}):(0,Jn.jsxs)(Jn.Fragment,{children:[eb,"​"]})})}))}));gb(this,"setScaleLevel",a=>vi(this,null,function*(){this.update({scaleLevel:a,fontSize:gD[null!=a?a:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",Ze(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:k},bounds:F}=this;return a?null:(0,Jn.jsx)("rect",{width:F.width,height:F.height,rx:d,ry:d,fill:"transparent",strokeDasharray:k?
"8 2":"undefined"})}));gb(this,"validateProps",a=>jn(this,a));gb(this,"getBounds",()=>{const [a,d]=this.props.point,[k,F]=this.props.size;return{minX:a,minY:d,maxX:a+k,maxY:d+F,width:k,height:F}});gb(this,"onResizeStart",({isSingle:a})=>{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});gb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=
(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:k=this.props.fontFamily,fontSize:F=this.props.fontSize,fontWeight:Y=this.props.fontWeight,lineHeight:ka=this.props.lineHeight,padding:oa=this.props.padding}=a,[Fa,Qa]=Oj(d,{fontFamily:k,fontSize:F,lineHeight:ka,fontWeight:Y},oa);return[Fa,Qa]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:d,
stroke:k,fontSize:F,fontFamily:Y}}=this;a=this.getBounds();return(0,Jn.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,Jn.jsx)("div",{style:{color:bh(k,"text"),fontSize:F,fontFamily:Y,display:"contents"},children:d})})}};gb(Zn,"id","text");gb(Zn,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,
strokeType:"line",strokeWidth:2,opacity:1});ie([Ef],Zn.prototype,"scaleLevel",1);ie([yg],Zn.prototype,"setScaleLevel",2);var gt=uf(V(22)),ru=V(586),fs=class extends fo{constructor(){super(...arguments);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"canChangeAspectRatio",!1);gb(this,"ReactComponent",Ze(({events:a,isErasing:d,asset:k,isEditing:F})=>{const {props:{opacity:Y}}=this,ka=vn();var oa=ef();const Fa=oa.selectedIds.has(this.id),Qa=ka||Fa&&!F||"select"!==oa.selectedTool.id;oa=gt.useCallback(eb=>
{Qa||eb.stopPropagation()},[Qa]);const {handlers:Wa}=gt.useContext(vj);return(0,ru.jsx)(Yo,kf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:Y}},a),{children:(0,ru.jsx)("div",{onWheelCapture:oa,onPointerDown:oa,onPointerUp:oa,className:"tl-video-container",style:{pointerEvents:ka||!F&&!Fa?"none":"all",overflow:F?"auto":"hidden"},children:k&&(0,ru.jsx)("video",{controls:!0,src:Wa?Wa.makeAssetUrl(k.src):k.src})})}))}));gb(this,"ReactIndicator",Ze(()=>{const {props:{size:[a,d],isLocked:k}}=
this;return(0,ru.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}))}};gb(fs,"id","video");gb(fs,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});var $m=V(586),Av=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,Ww=class extends fo{constructor(){super(...arguments);gb(this,"aspectRatio",480/853);gb(this,
"canChangeAspectRatio",!1);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:Ww.defaultProps.size})});gb(this,"ReactComponent",Ze(({events:a,isErasing:d,isEditing:k})=>{const F=ef();return(0,$m.jsx)(Yo,kf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,$m.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:k||F.readOnly?"all":"none",userSelect:"none",
background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,$m.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,$m.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):
(0,$m.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,$m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,$m.jsxs)("g",{children:[(0,$m.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,$m.jsx)("g",{children:(0,$m.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,$m.jsxs)("g",{fill:"#fff",children:[(0,$m.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,$m.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));gb(this,"ReactIndicator",Ze(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,$m.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return jn(this,a)})}get embedId(){var a,d;const k=this.props.url,
F=k.match(Av);return null!=(d=null!=(a=null==F?void 0:F[1])?a:k)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,$m.jsxs)("g",{children:[(0,$m.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,$m.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,$m.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},or=Ww;gb(or,"id","youtube");gb(or,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});ie([Ef],or.prototype,"embedId",1);ie([yg],or.prototype,"onYoutubeLinkChange",2);var gs=uf(V(22)),Kq=V(586),Xw=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,hz=class extends fo{constructor(){super(...arguments);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"initialHeightCalculated",
!0);gb(this,"getInnerHeight",null);gb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:hz.defaultProps.size})});gb(this,"ReactComponent",Ze(({events:a,isErasing:d,isEditing:k})=>{const {renderers:{Tweet:F}}=gs.useContext(vj),Y=ef(),ka=gs.useRef(null),[,oa]=this.useComponentSize(ka);gs.useEffect(()=>{var Fa,Qa;const Wa=null!=(Qa=null==(Fa=this.getInnerHeight)?void 0:Fa.call(this))?Qa:oa;oa&&1<Math.abs(Wa-this.props.size[1])&&(this.update({size:[this.props.size[0],Wa]}),Y.persist(!0))},[oa]);
gs.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();Y.persist(!0)})},[this.initialHeightCalculated]);return(0,Kq.jsx)(Yo,kf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Kq.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:k||Y.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,Kq.jsx)("div",{ref:ka,children:(0,Kq.jsx)(F,{tweetId:this.embedId})}):null})}))}));
gb(this,"ReactIndicator",Ze(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,Kq.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}));gb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});gb(this,"onResize",(a,d)=>{var k;const {bounds:F,rotation:Y,scale:[ka,oa]}=d;a=[...this.scale];0>ka&&(a[0]*=-1);0>oa&&(a[1]*=
-1);d=null!=(k=this.getAutoResizeHeight())?k:F.height;return this.update({point:[F.minX,F.minY],size:[Math.max(1,F.width),Math.max(1,d)],scale:a,rotation:Y})});gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return jn(this,a)})}get embedId(){var a,d;const k=this.props.url,F=k.match(Xw);return null!=(d=null!=(a=null==F?void 0:F[1])?a:k)?d:""}useComponentSize(a,d=""){const [k,F]=gs.useState([0,0]),Y=ef();gs.useEffect(()=>
{if(null==a?0:a.current){const ka=d?a.current.querySelector(d):a.current;if(ka){const oa=()=>{const {width:Qa,height:Wa}=ka.getBoundingClientRect(),eb=je.div([Qa,Wa],Y.viewport.camera.zoom);F(eb);return eb};oa();this.getInnerHeight=()=>oa()[1];const Fa=new ResizeObserver(()=>{oa()});Fa.observe(ka);return()=>{Fa.disconnect()}}}return()=>{}},[a,d]);return k}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,Kq.jsxs)("g",
{children:[(0,Kq.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,Kq.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Kq.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},ht=hz;gb(ht,"id","tweet");gb(ht,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});ie([Ef],ht.prototype,"embedId",1);ie([yg],ht.prototype,"onTwitterLinkChange",2);var Yw=uf(V(22)),Bv=V(586),gq=class extends fo{constructor(){super(...arguments);gb(this,"frameRef",Yw.createRef());gb(this,"canChangeAspectRatio",!0);gb(this,"canFlip",!0);gb(this,"canEdit",!0);gb(this,"ReactComponent",
Ze(({events:a,asset:d,isErasing:k,isEditing:F})=>{Yw.useRef(null);const {handlers:Y}=Yw.useContext(vj);ef();const ka=vn();return(0,Bv.jsx)(Yo,kf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:k?.2:1}},a),{children:d?(0,Bv.jsx)("embed",{src:Y?Y.inflateAsset(d.src).url:d.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!ka&&F?"all":"none"}}):null}))}));gb(this,"ReactIndicator",Ze(()=>{const {props:{size:[a,
d],isLocked:k}}=this;return(0,Bv.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}))}};gb(gq,"id","pdf");gb(gq,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});V(586);var Zw=[zo,bt,cs,wv,fs,et,Eg,ip,Zn,or,ht,ds,cq,gq,Kl,Uw],Kn=class extends $q{constructor(){super(...arguments);gb(this,"Shape",zo)}};gb(Kn,"id","box");gb(Kn,"shortcut","whiteboard/rectangle");var it=class extends $q{constructor(){super(...arguments);
gb(this,"Shape",bt)}};gb(it,"id","ellipse");gb(it,"shortcut","whiteboard/ellipse");var $n=class extends Xv{};gb($n,"id","erase");gb($n,"shortcut","whiteboard/eraser");var iz=class extends Ju{constructor(){super(...arguments);gb(this,"Shape",cs);gb(this,"simplify",!0);gb(this,"simplifyTolerance",.618)}};gb(iz,"id","highlighter");gb(iz,"shortcut","whiteboard/highlighter");var Ln=class extends Yv{constructor(){super(...arguments);gb(this,"Shape",et)}};gb(Ln,"id","line");gb(Ln,"shortcut","whiteboard/connector");
var Kp=class extends Ju{constructor(){super(...arguments);gb(this,"Shape",Eg);gb(this,"simplify",!1)}};gb(Kp,"id","pencil");gb(Kp,"shortcut","whiteboard/pencil");var jz=class extends $q{constructor(){super(...arguments);gb(this,"Shape",ip)}};gb(jz,"id","polygon");var kz=class extends Zv{constructor(){super(...arguments);gb(this,"Shape",Zn)}};gb(kz,"id","text");gb(kz,"shortcut","whiteboard/text");var hD=class extends $q{constructor(){super(...arguments);gb(this,"Shape",or)}};gb(hD,"id","youtube");
var Dm=class extends fj{constructor(){super(...arguments);gb(this,"creatingShape");gb(this,"offset",[0,0]);gb(this,"onEnter",()=>{this.app.history.pause();xd(()=>{var a=je.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(a=je.snap(a,8));this.creatingShape=a=new Kl({id:Uk(),parentId:this.app.currentPage.id,point:a,size:Kl.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});
gb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});gb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};gb(Dm,"id","creating");var pr=class extends fj{constructor(){super(...arguments);
gb(this,"cursor","crosshair");gb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};gb(pr,"id","idle");var ho=class extends Kr{constructor(){super(...arguments);gb(this,"Shape",Kl);gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};gb(ho,"id","logseq-portal");gb(ho,"shortcut","whiteboard/portal");gb(ho,"states",[pr,Dm]);gb(ho,"initial","idle");var $w=class extends $q{constructor(){super(...arguments);gb(this,"Shape",cq)}};gb($w,"id","youtube");var bi=class extends $q{constructor(){super(...arguments);
gb(this,"Shape",ds)}};gb(bi,"id","iframe");var GH=uf(V(589)),Lp=V(586),iD=new Map(Zw.map(a=>[a.id,a])),Wh=class{constructor(a){gb(this,"shapes");gb(this,"pageId");gb(this,"assets");a&&this.load(a)}load(a){var d;const k=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==k?void 0:k.id;this.assets=a.assets;this.shapes=null==k?void 0:k.shapes.map(F=>{var Y=F.type;if(!Y)throw Error("No shape type provided.");const ka=iD.get(Y);if(!ka)throw Error(`Could not find shape class for ${Y}`);return new ka(F)}).filter(F=>
"group"!==F.type)}generatePreviewJsx(a,d){var k,F;const Y=[...(null!=(k=this.shapes)?k:[]).map(Wa=>Wa.getRotatedBounds())];(k=null==a?void 0:a.currentView)&&Y.push(k);let ka=xf.getCommonBounds(Y);if(!ka)return null;ka=xf.expandBounds(ka,16);ka=d?xf.ensureRatio(ka,d):ka;const oa=Wa=>[(Wa[0]-ka.minX).toFixed(2),(Wa[1]-ka.minY).toFixed(2)],[Fa,Qa]=k?oa([k.minX,k.minY]):[0,0];return ka&&(0,Lp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ka.minX.toFixed(2),"data-common-bound-y":ka.minY.toFixed(2),
"data-common-bound-width":ka.width.toFixed(2),"data-common-bound-height":ka.height.toFixed(2),viewBox:[0,0,ka.width,ka.height].join(" "),children:[(0,Lp.jsx)("defs",{children:k&&(0,Lp.jsxs)(Lp.Fragment,{children:[(0,Lp.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Fa}, ${Qa})`,width:k.width,height:k.height}),(0,Lp.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,Lp.jsx)("rect",{width:ka.width,height:ka.height,fill:"white"}),(0,Lp.jsx)("use",{href:`#${this.pageId}-camera-rect`,
fill:"black"})]})]})}),(0,Lp.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(F=this.shapes)?void 0:F.map(Wa=>{var eb,jb;const {bounds:Mb,props:{rotation:Ub}}=Wa,[Ob,jc]=oa([Mb.minX,Mb.minY]),vc=+(180*((null!=Ub?Ub:0)+(null!=(eb=Mb.rotation)?eb:0))/Math.PI).toFixed(2),[Zb,oc]=[(Mb.width/2).toFixed(2),(Mb.height/2).toFixed(2)];return(0,Lp.jsx)("g",{transform:[`translate(${Ob}, ${jc})`,`rotate(${vc}, ${Zb}, ${oc})`].join(" "),children:Wa.getShapeSVGJsx({assets:null!=(jb=this.assets)?jb:[]})},
Wa.id)})}),(0,Lp.jsx)("rect",{mask:k?`url(#${this.pageId}-camera-mask)`:"",width:ka.width,height:ka.height,fill:"transparent"}),k&&(0,Lp.jsx)("use",{id:"minimap-camera-rect","data-x":Fa,"data-y":Qa,"data-width":k.width,"data-height":k.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?GH.default.renderToString(a):""}},su=uf(V(22)),jp=V(586),hq=su.forwardRef((a,d)=>{var {value:k,className:F}=
a;a=Jf(a,["autoResize","value","className"]);return(0,jp.jsx)("div",{className:"tl-input"+(F?" "+F:""),children:(0,jp.jsxs)("div",{className:"tl-input-sizer",children:[(0,jp.jsx)("div",{className:"tl-input-hidden",children:k}),(0,jp.jsx)("input",me({ref:d,value:k,className:"tl-text-input",type:"text"},a))]})})}),pi=V(586),iq=({type:a,active:d})=>(0,pi.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,pi.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",
PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),jD=(a,d)=>(0,pi.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((k,F)=>1===F%2?(0,pi.jsx)("mark",{className:"tl-highlighted",children:k}):k).map((k,F)=>(0,pi.jsx)(Jl.default.Fragment,{children:k},F))}),HH=(a,d)=>{const {handlers:k}=Jl.default.useContext(vj),[F,Y]=Jl.default.useState(null),ka=fn(a,200);Jl.default.useEffect(()=>{let oa=!1;if(0<ka.length){const Fa=
{"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?Fa["pages?"]=!1:"P"===d&&(Fa["blocks?"]=!1);k.search(ka,Fa).then(Qa=>{oa||Y(Qa)})}else Y(null);return()=>{oa=!0}},[ka,null==k?void 0:k.search]);return F},jt=Ze(({className:a,style:d,placeholder:k,onChange:F,onBlur:Y,onAddBlock:ka})=>{const [oa,Fa]=Jl.default.useState(Kl.defaultSearchQuery),[Qa,Wa]=Jl.default.useState(Kl.defaultSearchFilter),eb=Jl.default.useRef(null),{handlers:jb,renderers:Mb}=Jl.default.useContext(vj),Ub=jb.t,Ob=Jl.default.useCallback(ne=>
{var Ke;setTimeout(()=>F(ne));null==(Ke=eb.current)?void 0:Ke.blur();ne&&(Kl.defaultSearchQuery="",Kl.defaultSearchFilter=null)},[]),jc=Jl.default.useCallback(ne=>{if(ne=null==jb?void 0:jb.addNewBlock(ne))Ob(ne),null==ka?void 0:ka(ne);return ne},[ka]),vc=Jl.default.useRef(null),[Zb,oc]=Jl.default.useState(0),lc=HH(oa,Qa),[Ic,Lc]=Jl.default.useState("circle-plus"),[wd,Td]=Jl.default.useState(!1);Jl.default.useEffect(()=>{setTimeout(()=>{var ne;null==(ne=eb.current)?void 0:ne.focus()})},[Qa]);Jl.default.useEffect(()=>
{Kl.defaultSearchQuery=oa;Kl.defaultSearchFilter=Qa},[oa,Qa]);const We=Jl.default.useMemo(()=>{var ne;const Ke=[],Bf=null==Mb?void 0:Mb.Breadcrumb;if(!Bf||!jb)return[];ka&&Ke.push({actionIcon:"circle-plus",onChosen:()=>!!jc(oa),element:(0,pi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pi.jsx)(iq,{active:!0,type:"BA"}),0<oa.length?(0,pi.jsxs)(pi.Fragment,{children:[(0,pi.jsx)("strong",{children:Ub("whiteboard/new-block")}),oa]}):(0,pi.jsx)("strong",{children:Ub("whiteboard/new-block-no-colon")})]})});
(null==(ne=null==lc?void 0:lc.pages)?0:ne.some(Se=>Se.toLowerCase()===oa.toLowerCase()))||!oa||Ke.push({actionIcon:"circle-plus",onChosen:()=>{Ob(oa);return!0},element:(0,pi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pi.jsx)(iq,{active:!0,type:"PA"}),(0,pi.jsx)("strong",{children:Ub("whiteboard/new-page")}),oa]})},{actionIcon:"circle-plus",onChosen:()=>{null==jb?void 0:jb.addNewWhiteboard(oa);Ob(oa);return!0},element:(0,pi.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,pi.jsx)(iq,{active:!0,type:"WA"}),(0,pi.jsx)("strong",{children:Ub("whiteboard/new-whiteboard")}),oa]})});0===oa.length&&null===Qa&&Ke.push({actionIcon:"search",onChosen:()=>{Wa("B");return!0},element:(0,pi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pi.jsx)(iq,{type:"BS"}),Ub("whiteboard/search-only-blocks")]})},{actionIcon:"search",onChosen:()=>{Wa("P");return!0},element:(0,pi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pi.jsx)(iq,{type:"PS"}),
Ub("whiteboard/search-only-pages")]})});Qa&&"P"!==Qa||!lc||!lc.pages||Ke.push(...lc.pages.map(Se=>({actionIcon:"search",onChosen:()=>{Ob(Se);return!0},element:(0,pi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pi.jsx)(iq,{type:jb.isWhiteboardPage(Se)?"WP":"P"}),jD(Se,oa)]})})));Qa&&"B"!==Qa||!lc||!lc.blocks||Ke.push(...lc.blocks.filter(Se=>Se.content&&Se.uuid).map(({content:Se,uuid:Xe})=>{const Xd=jb.queryBlockByUUID(Xe);return{actionIcon:"search",onChosen:()=>{var nd,Yd,ld;return Xd?
(Ob(Xe),null==(ld=null==(Yd=null==(nd=window.logseq)?void 0:nd.api)?void 0:Yd.set_blocks_id)?void 0:ld.call(Yd,[Xe]),!0):!1},element:Xd?(0,pi.jsxs)(pi.Fragment,{children:[(0,pi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pi.jsx)(iq,{type:"B"}),(0,pi.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,pi.jsx)(Bf,{blockId:Xe})})]}),(0,pi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pi.jsx)("div",{className:"tl-quick-search-option-placeholder"}),
jD(Se,oa)]})]}):(0,pi.jsx)("div",{className:"tl-quick-search-option-row",children:Ub("whiteboard/cache-outdated")})}}));return Ke},[oa,Qa,lc,null==Mb?void 0:Mb.Breadcrumb,jb]);Jl.default.useEffect(()=>{const ne=Ke=>{var Bf,Se;let Xe=Zb;"ArrowDown"===Ke.key?Xe=Math.min(We.length-1,Zb+1):"ArrowUp"===Ke.key?Xe=Math.max(0,Zb-1):"Enter"===Ke.key?(null==(Bf=We[Zb])?void 0:Bf.onChosen(),Ke.stopPropagation(),Ke.preventDefault()):"Backspace"===Ke.key&&0===oa.length?Wa(null):"Escape"===Ke.key&&Ob("");Xe!==
Zb&&(Bf=We[Xe],oc(Xe),Lc(Bf.actionIcon),Ke.stopPropagation(),Ke.preventDefault(),(Ke=null==(Se=vc.current)?void 0:Se.querySelector(".tl-quick-search-option:nth-child("+(Xe+1)+")"))&&(null==Ke?void 0:Ke.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",ne,!0);return()=>{document.removeEventListener("keydown",ne,!0)}},[We,Zb,oa]);return(0,pi.jsxs)("div",{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,pi.jsx)(WG,{icon:Ic,onClick:()=>{var ne;null==(ne=We[Zb])?void 0:
ne.onChosen()}}),(0,pi.jsxs)("div",{className:"tl-quick-search-input-container",children:[Qa&&(0,pi.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,pi.jsx)(iq,{type:Qa}),"B"===Qa?"Search blocks":"Search pages",(0,pi.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>Wa(null),children:(0,pi.jsx)(Ih,{name:"x"})})]}),(0,pi.jsx)(hq,{ref:eb,type:"text",value:oa,className:"tl-quick-search-input",placeholder:null!=k?k:"Create or search your graph...",onChange:ne=>
Fa(ne.target.value),onKeyDown:ne=>{"Enter"===ne.key&&Ob(oa);ne.stopPropagation()},onFocus:()=>{Td(!0)},onBlur:()=>{Td(!1);null==Y?void 0:Y()}})]}),0<We.length&&(0,pi.jsx)("div",{onWheelCapture:ne=>ne.stopPropagation(),className:"tl-quick-search-options",ref:vc,style:{visibility:wd?"visible":"hidden",pointerEvents:wd?"all":"none"},children:(0,pi.jsx)(Zy,{style:{height:40*Math.min(Math.max(1,We.length),12)},totalCount:We.length,itemContent:ne=>{const {actionIcon:Ke,onChosen:Bf,element:Se}=We[ne];return(0,pi.jsx)("div",
{"data-focused":ne===Zb,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Lc(Ke);oc(ne)},onPointerDownCapture:Xe=>{Bf()&&(Xe.stopPropagation(),Xe.preventDefault())},children:Se},ne)}})})]})}),gj=V(586),ax=Ze(function(a){var {pageId:d,portalType:k,refs:F,side:Y,onRefsChange:ka}=a;a=Jf(a,"pageId portalType shapeType refs side onRefsChange".split(" "));const {handlers:{t:oa}}=Py.default.useContext(vj),Fa=F.length+(d?1:0),Qa=0===F.length,Wa=jb=>{jb&&!F.includes(jb)&&Qa&&ka([...F,jb])},eb=
!(!d||!k);return(0,gj.jsx)(to,kf(me({},a),{side:Y,align:"start",alignOffset:-6,label:(0,gj.jsx)(fc,{content:oa("whiteboard/link"),sideOffset:14,children:(0,gj.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,gj.jsx)(Ih,{name:0<Fa?"link":"add-link"}),0<Fa&&(0,gj.jsx)("div",{className:"tl-shape-links-count",children:Fa})]})}),children:(0,gj.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":eb,children:[eb&&(0,gj.jsxs)("div",{className:"tl-shape-links-reference-panel",
children:[(0,gj.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,gj.jsx)(Ih,{className:"opacity-50",name:"internal-link"}),oa("whiteboard/references")]}),(0,gj.jsx)(Ie,{type:k,id:d})]}),(0,gj.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,gj.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,gj.jsx)(Ih,{className:"opacity-50",name:"add-link"}),oa("whiteboard/link-to-any-page-or-block")]}),Qa&&(0,gj.jsx)(jt,{style:{width:"calc(100% - 46px)",
marginLeft:"46px"},placeholder:oa("whiteboard/start-typing-to-search"),onChange:Wa}),0<F.length&&(0,gj.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:F.map((jb,Mb)=>(0,gj.jsx)(Ie,{id:jb,type:Mk(jb)?"B":"P",onRemove:()=>{ka(F.filter((Ub,Ob)=>Mb!==Ob))},showContent:!0},jb))})]})]})}))}),ql=uf(V(22)),[Cv]=mk("ToggleGroup",[lw]),Dv=lw(),kD=ql.default.forwardRef((a,d)=>{const {type:k}=a;a=Jf(a,["type"]);if("single"===k)return ql.default.createElement(IH,$e({},a,{ref:d}));if("multiple"===
k)return ql.default.createElement(JH,$e({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[lz,jq]=Cv("ToggleGroup"),IH=ql.default.forwardRef((a,d)=>{const {value:k,defaultValue:F,onValueChange:Y=()=>{}}=a,ka=Jf(a,["value","defaultValue","onValueChange"]),[oa,Fa]=$h({prop:k,defaultProp:F,onChange:Y});return ql.default.createElement(lz,{scope:a.__scopeToggleGroup,type:"single",value:oa?[oa]:[],onItemActivate:Fa,onItemDeactivate:ql.default.useCallback(()=>Fa(""),[Fa])},ql.default.createElement(mD,
$e({},ka,{ref:d})))}),JH=ql.default.forwardRef((a,d)=>{const {value:k,defaultValue:F,onValueChange:Y=()=>{}}=a,ka=Jf(a,["value","defaultValue","onValueChange"]),[oa=[],Fa]=$h({prop:k,defaultProp:F,onChange:Y}),Qa=ql.default.useCallback(eb=>Fa((jb=[])=>[...jb,eb]),[Fa]),Wa=ql.default.useCallback(eb=>Fa((jb=[])=>jb.filter(Mb=>Mb!==eb)),[Fa]);return ql.default.createElement(lz,{scope:a.__scopeToggleGroup,type:"multiple",value:oa,onItemActivate:Qa,onItemDeactivate:Wa},ql.default.createElement(mD,$e({},
ka,{ref:d})))}),[KH,lD]=Cv("ToggleGroup"),mD=ql.default.forwardRef((a,d)=>{const {__scopeToggleGroup:k,disabled:F=!1,rovingFocus:Y=!0,orientation:ka,dir:oa,loop:Fa=!0}=a;var Qa=Jf(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=Dv(k);const Wa=sb(oa);Qa=me({role:"group",dir:Wa},Qa);return ql.default.createElement(KH,{scope:k,rovingFocus:Y,disabled:F},Y?ql.default.createElement(YB,$e({asChild:!0},a,{orientation:ka,dir:Wa,loop:Fa}),ql.default.createElement(Vl.div,$e({},
Qa,{ref:d}))):ql.default.createElement(Vl.div,$e({},Qa,{ref:d})))}),Ev=ql.default.forwardRef((a,d)=>{var k=jq("ToggleGroupItem",a.__scopeToggleGroup);const F=lD("ToggleGroupItem",a.__scopeToggleGroup),Y=Dv(a.__scopeToggleGroup);k=k.value.includes(a.value);const ka=F.disabled||a.disabled;a=kf(me({},a),{pressed:k,disabled:ka});const oa=ql.default.useRef(null);return F.rovingFocus?ql.default.createElement(ZB,$e({asChild:!0},Y,{focusable:!ka,active:k,ref:oa}),ql.default.createElement(nD,$e({},a,{ref:d}))):
ql.default.createElement(nD,$e({},a,{ref:d}))}),nD=ql.default.forwardRef((a,d)=>{const {__scopeToggleGroup:k,value:F}=a,Y=Jf(a,["__scopeToggleGroup","value"]),ka=jq("ToggleGroupItem",k);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return ql.default.createElement(SB,$e({},"single"===ka.type?a:void 0,Y,{ref:d,onPressedChange:oa=>{if(oa)ka.onItemActivate(F);else ka.onItemDeactivate(F)}}))}),oD=kD,pD=Ev,qr=V(586),wi=V(586),Fv="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),
qD=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],Co=new Map,mz={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),
line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},LH=Object.entries(mz).filter(([,a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),MH=Ze(()=>{const a=ef(),{handlers:{t:d}}=Zm.default.useContext(vj),k=Ua("AutoResizing"),F=k.every(Y=>
Y.props.isAutoResizing);return(0,wi.jsx)(Bb,{tooltip:d("whiteboard/auto-resize"),toggle:k.every(Y=>"logseq-portal"===Y.props.type),className:"tl-button",pressed:F,onPressedChange:Y=>{k.forEach(ka=>{if("logseq-portal"===ka.props.type)ka.update({isAutoResizing:Y});else ka.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},children:(0,wi.jsx)(Ih,{name:"dimensions"})})}),NH=Ze(()=>{const a=ef();var {handlers:{t:d}}=Zm.default.useContext(vj);const k=Ua("LogseqPortalViewMode"),F=k.every(Y=>Y.collapsed);
if(!F&&!k.every(Y=>!Y.collapsed))return null;d=(0,wi.jsxs)("div",{className:"flex",children:[F?d("whiteboard/expand"):d("whiteboard/collapse"),(0,wi.jsx)(Vn,{action:F?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,wi.jsx)(Bb,{tooltip:d,toggle:k.every(Y=>"logseq-portal"===Y.props.type),className:"tl-button",pressed:F,onPressedChange:()=>a.api.setCollapsed(!F),children:(0,wi.jsx)(Ih,{name:F?"object-expanded":"object-compact"})})}),OH=Ze(()=>{const {handlers:{isMobile:a}}=
Zm.default.useContext(vj);var d=Ua("ScaleLevel");d=1<(new Set(d.map(k=>k.scaleLevel))).size?"":d[0].scaleLevel;return(0,wi.jsx)(Wj,{scaleLevel:d,compact:a()})}),PH=Ze(()=>{const a=ef(),{handlers:{t:d}}=Zm.default.useContext(vj),k=Ua("IFrameSource")[0],F=Zm.default.useCallback(ka=>{k.onIFrameSourceChange(ka.target.value.trim().toLowerCase());a.persist()},[]),Y=Zm.default.useCallback(()=>{k.reload()},[]);return(0,wi.jsxs)("span",{className:"flex gap-3",children:[(0,wi.jsx)(ja,{tooltip:d("whiteboard/reload"),
type:"button",onClick:Y,children:(0,wi.jsx)(Ih,{name:"refresh"})}),(0,wi.jsx)(hq,{title:d("whiteboard/website-url"),className:"tl-iframe-src",value:`${k.props.url}`,onChange:F}),(0,wi.jsx)(ja,{tooltip:d("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(k.props.url),children:(0,wi.jsx)(Ih,{name:"external-link"})})]})}),Lq=Ze(()=>{const a=ef(),{handlers:{t:d}}=Zm.default.useContext(vj),k=Ua("YoutubeLink")[0],F=Zm.default.useCallback(Y=>{k.onYoutubeLinkChange(Y.target.value);a.persist()},
[]);return(0,wi.jsxs)("span",{className:"flex gap-3",children:[(0,wi.jsx)(hq,{title:d("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${k.props.url}`,onChange:F}),(0,wi.jsx)(ja,{tooltip:d("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var Y,ka,oa;return null==(oa=null==(ka=null==(Y=window.logseq)?void 0:Y.api)?void 0:ka.open_external_link)?void 0:oa.call(ka,k.props.url)},children:(0,wi.jsx)(Ih,{name:"external-link"})})]})}),QH=Ze(()=>{const a=ef(),{handlers:{t:d}}=Zm.default.useContext(vj),
k=Ua("TwitterLink")[0],F=Zm.default.useCallback(Y=>{k.onTwitterLinkChange(Y.target.value);a.persist()},[]);return(0,wi.jsxs)("span",{className:"flex gap-3",children:[(0,wi.jsx)(hq,{title:d("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${k.props.url}`,onChange:F}),(0,wi.jsx)(ja,{tooltip:d("whiteboard/open-twitter-url"),type:"button",onClick:()=>{var Y,ka,oa;return null==(oa=null==(ka=null==(Y=window.logseq)?void 0:Y.api)?void 0:ka.open_external_link)?void 0:oa.call(ka,k.props.url)},
children:(0,wi.jsx)(Ih,{name:"external-link"})})]})}),RH=Ze(()=>{const a=ef(),{handlers:{t:d,setCurrentPdf:k}}=Zm.default.useContext(vj),F=a.selectedShapesArray[0];return(0,wi.jsx)(ja,{tooltip:d("whiteboard/edit-pdf"),type:"button",onClick:()=>k(a.assets[F.props.assetId].src),children:(0,wi.jsx)(Ih,{name:"edit"})})}),SH=Ze(()=>{const a=ef(),{handlers:{t:d}}=Zm.default.useContext(vj);var k=Ua("NoFill");const F=Zm.default.useCallback(Y=>{a.selectedShapesArray.forEach(ka=>ka.update({noFill:Y}));a.persist()},
[]);k=k.every(Y=>Y.props.noFill);return(0,wi.jsx)(Bb,{tooltip:d("whiteboard/fill"),className:"tl-button",pressed:k,onPressedChange:F,children:(0,wi.jsx)(Ih,{name:k?"droplet-off":"droplet"})})}),TH=Ze(()=>{const a=ef(),d=Ua("Swatch"),k=Zm.default.useCallback(Y=>{a.selectedShapesArray.forEach(ka=>{ka.update({fill:Y,stroke:Y})});a.persist()},[]),F=Zm.default.useCallback(Y=>{a.selectedShapesArray.forEach(ka=>{ka.update({opacity:Y})});a.persist()},[]);return(0,wi.jsx)(Ah,{popoverSide:"top",color:d[0].props.noFill?
d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:F,setColor:k})}),UH=Ze(()=>{const a=ef(),d=Zm.default.useCallback(k=>{a.api.convertShapes(k.currentTarget.dataset.tool)},[]);return(0,wi.jsx)(Ay,{popoverSide:"top",chevron:!1,setGeometry:d})}),VH=Ze(()=>{const a=ef(),{handlers:{t:d}}=Zm.default.useContext(vj),k=Ua("StrokeType"),F=k.every(Y=>"dashed"===Y.props.strokeType)?"dashed":k.every(Y=>"line"===Y.props.strokeType)?"line":"mixed";return(0,wi.jsx)(ea,{title:d("whiteboard/stroke-type"),
options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:F,onValueChange:Y=>{k.forEach(ka=>{ka.update({strokeType:Y})});a.persist()}})}),rD=Ze(()=>{const a=ef(),{handlers:{t:d}}=Zm.default.useContext(vj),k=Ua("ArrowMode");var F=k.every(ka=>{var oa;return"arrow"===(null==(oa=ka.props.decorations)?void 0:oa.start)});const Y=k.every(ka=>{var oa;return"arrow"===(null==(oa=ka.props.decorations)?void 0:oa.end)});F=[F?"start":null,Y?"end":null].filter(ig);
return(0,wi.jsx)(ua,{title:d("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:F,onValueChange:ka=>{k.forEach(oa=>{var Fa=oa.update;var Qa={start:ka.includes("start")?"arrow":null,end:ka.includes("end")?"arrow":null};Fa.call(oa,{decorations:Qa})});a.persist()}})}),WH=Ze(()=>{const a=ef(),{handlers:{t:d}}=Zm.default.useContext(vj),k=Ua("TextStyle"),F=k.every(ka=>500<ka.props.fontWeight),Y=k.every(ka=>ka.props.italic);return(0,wi.jsxs)("span",
{className:"flex gap-1",children:[(0,wi.jsx)(Bb,{tooltip:d("whiteboard/bold"),className:"tl-button",pressed:F,onPressedChange:ka=>{k.forEach(oa=>{oa.update({fontWeight:ka?700:400});oa.onResetBounds()});a.persist()},children:(0,wi.jsx)(Ih,{name:"bold"})}),(0,wi.jsx)(Bb,{tooltip:d("whiteboard/italic"),className:"tl-button",pressed:Y,onPressedChange:ka=>{k.forEach(oa=>{oa.update({italic:ka});oa.onResetBounds()});a.persist()},children:(0,wi.jsx)(Ih,{name:"italic"})})]})}),XH=Ze(()=>{var a;const d=ef(),
k=d.selectedShapesArray[0];return(0,wi.jsx)(ax,{onRefsChange:F=>{k.update({refs:F});d.persist()},refs:null!=(a=k.props.refs)?a:[],shapeType:k.props.type,side:"right",pageId:"logseq-portal"===k.props.type?k.props.pageId:void 0,portalType:"logseq-portal"===k.props.type?k.props.blockType:void 0})});Co.set("Geometry",UH);Co.set("AutoResizing",MH);Co.set("LogseqPortalViewMode",NH);Co.set("ScaleLevel",OH);Co.set("YoutubeLink",Lq);Co.set("TwitterLink",QH);Co.set("IFrameSource",PH);Co.set("NoFill",SH);Co.set("Swatch",
TH);Co.set("StrokeType",VH);Co.set("ArrowMode",rD);Co.set("TextStyle",WH);Co.set("Links",XH);Co.set("EditPdf",RH);var sD=a=>{var d;return(null!=(d=mz[a])?d:[]).filter(ig)},tD=a=>{const d=a.map(F=>F.props.type),k=new Set(0<a.length?sD(d[0]):[]);for(let F=1;F<d.length&&0<k.size;F++){const Y=sD(d[F]);k.forEach(ka=>{Y.includes(ka)||k.delete(ka)})}1<a.length&&qD.forEach(F=>{k.has(F)&&k.delete(F)});return Array.from(k).sort((F,Y)=>Fv.indexOf(F)-Fv.indexOf(Y)).map(F=>Co.get(F))},Gv=V(586),YH=Ze(({shapes:a,
offsets:d,hidden:k})=>{const F=ef(),Y=fp.useRef(null),ka=fp.useRef(null);fp.useLayoutEffect(()=>{setTimeout(()=>{const Fa=ka.current;if(Fa){var {offsetWidth:Qa,offsetHeight:Wa}=Fa;Y.current=[Qa,Wa]}})});fp.useLayoutEffect(()=>{var Fa;const Qa=ka.current;if(Qa){var Wa=null!=(Fa=Y.current)?Fa:[0,0];Fa=0;if(116>d.top){var eb=d.height/2+40;140>d.bottom&&(eb+=d.bottom-140)}else eb=-(d.height/2+40);16>d.left+d.width/2-Wa[0]/2?Fa+=-(d.left+d.width/2-Wa[0]/2-16):16>d.right+d.width/2-Wa[0]/2&&(Fa+=d.right+
d.width/2-Wa[0]/2-16);var [jb,Mb]=[Fa,eb];Qa.style.transform=`translateX(${jb}px) translateY(${Mb}px)`}},[d]);if(!F)return null;const oa=tD(a);return(0,Gv.jsx)(Yo,{centered:!0,children:0<oa.length&&(0,Gv.jsx)("div",{ref:ka,className:"tl-toolbar tl-context-bar",style:{visibility:k?"hidden":"visible",pointerEvents:k?"none":"all"},children:oa.map((Fa,Qa)=>(0,Gv.jsxs)(fp.Fragment,{children:[(0,Gv.jsx)(Fa,{}),Qa<oa.length-1&&(0,Gv.jsx)(Rr,{className:"tl-toolbar-separator",orientation:"vertical"})]},Qa))})})}),
bx=uf(V(22)),Em=V(22),[ZH]=mk("ContextMenu",[Qt]),tu=Qt(),[uD,uu]=ZH("ContextMenu"),Hv=(0,Em.forwardRef)((a,d)=>{const {__scopeContextMenu:k,disabled:F=!1}=a,Y=Jf(a,["__scopeContextMenu","disabled"]),ka=uu("ContextMenuTrigger",k),oa=tu(k),Fa=(0,Em.useRef)({x:0,y:0}),Qa=(0,Em.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(me({width:0,height:0},Fa.current))}),Wa=(0,Em.useRef)(0),eb=(0,Em.useCallback)(()=>window.clearTimeout(Wa.current),[]);(0,Em.useEffect)(()=>eb,[eb]);(0,Em.useEffect)(()=>void(F&&
eb()),[F,eb]);return(0,Em.createElement)(Em.Fragment,null,(0,Em.createElement)(Rs,$e({},oa,{virtualRef:Qa})),(0,Em.createElement)(Vl.span,$e({"data-state":ka.open?"open":"closed","data-disabled":F?"":void 0},Y,{ref:d,style:me({WebkitTouchCallout:"none"},a.style),onContextMenu:F?a.onContextMenu:Wf(a.onContextMenu,jb=>{eb();Fa.current={x:jb.clientX,y:jb.clientY};ka.onOpenChange(!0);jb.preventDefault()}),onPointerDown:F?a.onPointerDown:Wf(a.onPointerDown,vb(jb=>{eb();Wa.current=window.setTimeout(()=>
{Fa.current={x:jb.clientX,y:jb.clientY};ka.onOpenChange(!0)},700)})),onPointerMove:F?a.onPointerMove:Wf(a.onPointerMove,vb(eb)),onPointerCancel:F?a.onPointerCancel:Wf(a.onPointerCancel,vb(eb)),onPointerUp:F?a.onPointerUp:Wf(a.onPointerUp,vb(eb))})))}),nz=(0,Em.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;const F=Jf(a,["__scopeContextMenu"]),Y=uu("ContextMenuContent",k);k=tu(k);const ka=(0,Em.useRef)(!1);return(0,Em.createElement)(Tu,$e({},k,F,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:oa=>
{var Fa;null===(Fa=a.onCloseAutoFocus)||void 0===Fa||Fa.call(a,oa);!oa.defaultPrevented&&ka.current&&oa.preventDefault();ka.current=!1},onInteractOutside:oa=>{var Fa;null===(Fa=a.onInteractOutside)||void 0===Fa||Fa.call(a,oa);oa.defaultPrevented||Y.modal||(ka.current=!0)},style:kf(me({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Fm=(0,Em.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;a=Jf(a,["__scopeContextMenu"]);k=tu(k);return(0,Em.createElement)(uw,
$e({},k,a,{ref:d}))}),rr=(0,Em.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;a=Jf(a,["__scopeContextMenu"]);k=tu(k);return(0,Em.createElement)(iC,$e({},k,a,{ref:d}))}),$H=a=>{const {__scopeContextMenu:d,children:k,onOpenChange:F,dir:Y,modal:ka=!0}=a,[oa,Fa]=(0,Em.useState)(!1);a=tu(d);const Qa=Hf(F),Wa=(0,Em.useCallback)(eb=>{Fa(eb);Qa(eb)},[Qa]);return(0,Em.createElement)(uD,{scope:d,open:oa,onOpenChange:Wa,modal:ka},(0,Em.createElement)(ty,$e({},a,{dir:Y,open:oa,onOpenChange:Wa,modal:ka}),k))},
Gf=V(586),hs=Ze(function({children:a,collisionRef:d}){var k,F,Y,ka,oa,Fa,Qa,Wa,eb,jb,Mb,Ub,Ob,jc,vc,Zb,oc;const lc=ef(),{handlers:Ic}=bx.useContext(vj),Lc=Ic.t,wd=bx.useRef(null),Td=ne=>{ne();lc.transition("select")},We=bx.useMemo(()=>If(),[]);return(0,Gf.jsxs)($H,{onOpenChange:ne=>{ne&&!lc.isIn("select.contextMenu")?lc.transition("select").selectedTool.transition("contextMenu"):!ne&&lc.isIn("select.contextMenu")&&lc.selectedTool.transition("idle")},children:[(0,Gf.jsx)(Hv,{disabled:lc.editingShape&&
0!==Object.keys(lc.editingShape).length,children:a}),(0,Gf.jsx)(nz,{className:"tl-menu tl-context-menu",ref:wd,onEscapeKeyDown:()=>lc.transition("select"),collisionBoundary:d.current,asChild:!0,tabIndex:-1,children:(0,Gf.jsxs)("div",{children:[1<(null==(k=lc.selectedShapes)?void 0:k.size)&&!lc.readOnly&&(null==(F=lc.selectedShapesArray)?void 0:F.some(ne=>!ne.props.isLocked))&&(0,Gf.jsxs)(Gf.Fragment,{children:[(0,Gf.jsxs)(Fm,{children:[(0,Gf.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,Gf.jsx)(ja,
{tooltip:Lc("whiteboard/align-left"),onClick:()=>Td(()=>lc.align("left")),children:(0,Gf.jsx)(Ih,{name:"layout-align-left"})}),(0,Gf.jsx)(ja,{tooltip:Lc("whiteboard/align-center-horizontally"),onClick:()=>Td(()=>lc.align("centerHorizontal")),children:(0,Gf.jsx)(Ih,{name:"layout-align-center"})}),(0,Gf.jsx)(ja,{tooltip:Lc("whiteboard/align-right"),onClick:()=>Td(()=>lc.align("right")),children:(0,Gf.jsx)(Ih,{name:"layout-align-right"})}),(0,Gf.jsx)(Rr,{className:"tl-toolbar-separator",orientation:"vertical"}),
(0,Gf.jsx)(ja,{tooltip:Lc("whiteboard/distribute-horizontally"),onClick:()=>Td(()=>lc.distribute("horizontal")),children:(0,Gf.jsx)(Ih,{name:"layout-distribute-vertical"})})]}),(0,Gf.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,Gf.jsx)(ja,{tooltip:Lc("whiteboard/align-top"),onClick:()=>Td(()=>lc.align("top")),children:(0,Gf.jsx)(Ih,{name:"layout-align-top"})}),(0,Gf.jsx)(ja,{tooltip:Lc("whiteboard/align-center-vertically"),onClick:()=>Td(()=>lc.align("centerVertical")),children:(0,Gf.jsx)(Ih,
{name:"layout-align-middle"})}),(0,Gf.jsx)(ja,{tooltip:Lc("whiteboard/align-bottom"),onClick:()=>Td(()=>lc.align("bottom")),children:(0,Gf.jsx)(Ih,{name:"layout-align-bottom"})}),(0,Gf.jsx)(Rr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Gf.jsx)(ja,{tooltip:Lc("whiteboard/distribute-vertically"),onClick:()=>Td(()=>lc.distribute("vertical")),children:(0,Gf.jsx)(Ih,{name:"layout-distribute-horizontal"})})]})]}),(0,Gf.jsx)(rr,{className:"menu-separator"}),(0,Gf.jsxs)(Fm,{className:"tl-menu-item",
onClick:()=>Td(lc.packIntoRectangle),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"layout-grid"}),Lc("whiteboard/pack-into-rectangle")]}),(0,Gf.jsx)(rr,{className:"menu-separator"})]}),0<(null==(Y=lc.selectedShapes)?void 0:Y.size)&&(0,Gf.jsxs)(Gf.Fragment,{children:[(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.api.zoomToSelection),children:[Lc("whiteboard/zoom-to-fit"),(0,Gf.jsx)(Vn,{action:"whiteboard/zoom-to-fit"})]}),(0,Gf.jsx)(rr,{className:"menu-separator"})]}),(lc.selectedShapesArray.some(ne=>
"group"===ne.type||lc.getParentGroup(ne))||1<lc.selectedShapesArray.length)&&(null==(ka=lc.selectedShapesArray)?void 0:ka.some(ne=>!ne.props.isLocked))&&!lc.readOnly&&(0,Gf.jsxs)(Gf.Fragment,{children:[lc.selectedShapesArray.some(ne=>"group"===ne.type||lc.getParentGroup(ne))&&(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.api.unGroup),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"ungroup"}),Lc("whiteboard/ungroup"),(0,Gf.jsx)(Vn,{action:"whiteboard/ungroup"})]}),1<lc.selectedShapesArray.length&&
(null==(oa=lc.selectedShapesArray)?void 0:oa.some(ne=>!ne.props.isLocked))&&(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.api.doGroup),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"group"}),Lc("whiteboard/group"),(0,Gf.jsx)(Vn,{action:"whiteboard/group"})]}),(0,Gf.jsx)(rr,{className:"menu-separator"})]}),0<(null==(Fa=lc.selectedShapes)?void 0:Fa.size)&&(null==(Qa=lc.selectedShapesArray)?void 0:Qa.some(ne=>!ne.props.isLocked))&&(0,Gf.jsxs)(Gf.Fragment,{children:[!lc.readOnly&&
(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.cut),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"cut"}),Lc("whiteboard/cut")]}),(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.copy),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"copy"}),Lc("whiteboard/copy"),(0,Gf.jsx)(Vn,{action:"editor/copy"})]})]}),!lc.readOnly&&(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.paste),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"clipboard"}),Lc("whiteboard/paste"),
(0,Gf.jsx)("div",{className:"tl-menu-right-slot",children:(0,Gf.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Gf.jsx)("code",{children:CA})," ",(0,Gf.jsx)("code",{children:"v"})]})})]}),1===(null==(Wa=lc.selectedShapes)?void 0:Wa.size)&&!lc.readOnly&&(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(()=>lc.paste(void 0,!0)),children:[Lc("whiteboard/paste-as-link"),(0,Gf.jsx)("div",{className:"tl-menu-right-slot",children:(0,Gf.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Gf.jsx)("code",
{children:CA})," ",(0,Gf.jsx)("code",{children:"⇧"})," ",(0,Gf.jsx)("code",{children:"v"})]})})]}),0<(null==(eb=lc.selectedShapes)?void 0:eb.size)&&(0,Gf.jsxs)(Gf.Fragment,{children:[(0,Gf.jsx)(rr,{className:"menu-separator"}),(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(()=>{var ne,Ke;return Ic.exportToImage(lc.currentPageId,{x:lc.selectionBounds.minX+lc.viewport.camera.point[0]-8,y:lc.selectionBounds.minY+lc.viewport.camera.point[1]-8,width:(null==(ne=lc.selectionBounds)?void 0:ne.width)+
16,height:(null==(Ke=lc.selectionBounds)?void 0:Ke.height)+16,zoom:lc.viewport.camera.zoom})}),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"file-export"}),Lc("whiteboard/export"),(0,Gf.jsx)("div",{className:"tl-menu-right-slot",children:(0,Gf.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,Gf.jsx)(rr,{className:"menu-separator"}),(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.api.selectAll),children:[Lc("whiteboard/select-all"),(0,Gf.jsx)(Vn,{action:"editor/select-parent"})]}),
1<(null==(jb=lc.selectedShapes)?void 0:jb.size)&&(0,Gf.jsx)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.api.deselectAll),children:Lc("whiteboard/deselect-all")}),!lc.readOnly&&0<(null==(Mb=lc.selectedShapes)?void 0:Mb.size)&&(null==(Ub=lc.selectedShapesArray)?void 0:Ub.some(ne=>!ne.props.isLocked))&&(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(()=>lc.setLocked(!0)),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"lock"}),Lc("whiteboard/lock"),(0,Gf.jsx)(Vn,{action:"whiteboard/lock"})]}),
!lc.readOnly&&0<(null==(Ob=lc.selectedShapes)?void 0:Ob.size)&&(null==(jc=lc.selectedShapesArray)?void 0:jc.some(ne=>ne.props.isLocked))&&(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(()=>lc.setLocked(!1)),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"lock-open"}),Lc("whiteboard/unlock"),(0,Gf.jsx)(Vn,{action:"whiteboard/unlock"})]}),0<(null==(vc=lc.selectedShapes)?void 0:vc.size)&&!lc.readOnly&&(null==(Zb=lc.selectedShapesArray)?void 0:Zb.some(ne=>!ne.props.isLocked))&&(0,Gf.jsxs)(Gf.Fragment,
{children:[(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.api.deleteShapes),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"backspace"}),Lc("whiteboard/delete"),(0,Gf.jsx)(Vn,{action:"editor/delete"})]}),1<(null==(oc=lc.selectedShapes)?void 0:oc.size)&&!lc.readOnly&&(0,Gf.jsxs)(Gf.Fragment,{children:[(0,Gf.jsx)(rr,{className:"menu-separator"}),(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.flipHorizontal),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"flip-horizontal"}),
Lc("whiteboard/flip-horizontally")]}),(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.flipVertical),children:[(0,Gf.jsx)(Ih,{className:"tl-menu-icon",name:"flip-vertical"}),Lc("whiteboard/flip-vertically")]})]}),!lc.readOnly&&(0,Gf.jsxs)(Gf.Fragment,{children:[(0,Gf.jsx)(rr,{className:"menu-separator"}),(0,Gf.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Td(lc.bringToFront),children:[Lc("whiteboard/move-to-front"),(0,Gf.jsx)(Vn,{action:"whiteboard/bring-to-front"})]}),(0,Gf.jsxs)(Fm,{className:"tl-menu-item",
onClick:()=>Td(lc.sendToBack),children:[Lc("whiteboard/move-to-back"),(0,Gf.jsx)(Vn,{action:"whiteboard/send-to-back"})]})]}),We&&(0,Gf.jsx)(Fm,{className:"tl-menu-item",onClick:()=>{1===lc.selectedShapesArray.length?console.log(Ab(lc.selectedShapesArray[0].serialized)):console.log(lc.selectedShapesArray.map(ne=>Ab(ne.serialized)))},children:Lc("whiteboard/dev-print-shape-props")})]})]})})]})}),Mq=uf(V(22)),cx=V(586),vD=Ze(({shape:a})=>{const d=ef(),{handlers:k}=Mq.default.useContext(vj),F=k.t,Y=
Mq.default.useMemo(()=>{var ka;const oa=[...(null!=(ka=a.props.refs)?ka:[])].map(Fa=>[Fa,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&oa.unshift([a.props.pageId,!1]);return oa.filter(Fa=>Fa[0].toLowerCase()!==d.currentPage.name&&k.getBlockPageName(Fa[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===Y.length?null:(0,cx.jsx)("div",{className:"tl-quick-links",title:F("whiteboard/shape-quick-links"),children:Y.map(([ka,oa])=>(0,cx.jsx)("div",{className:"tl-quick-links-row",
children:(0,cx.jsx)(Qy,{id:ka,showReferenceContent:oa})},ka))})}),aI=uf(V(22)),wD=uf(V(22)),sr={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},xD=(a,d,k)=>vi(void 0,[a,d,k],function*(F,{point:Y,shiftKey:ka,dataTransfer:oa,fromDrop:Fa},Qa){function Wa(ld,Hd){return vi(this,null,function*(){const Oe=Object.values(F.assets).find(mf=>mf.src===ld);return Oe?Oe:{id:Uk(),type:Hd,src:ld,size:yield oj(Qa.makeAssetUrl(ld),Hd)}})}function eb(ld){return vi(this,null,function*(){const Hd=
ld.filter(Oe=>"unknown"!==ec(Oe.name)).map(Oe=>vi(this,null,function*(){try{const mf=yield Qa.saveAsset(Oe);return yield Wa(mf,ec(Oe.name))}catch(mf){console.error(mf)}return null}));return(yield Promise.all(Hd)).filter(ig)})}function jb(ld){return[kf(me({},cq.defaultProps),{html:ld,point:[Y[0],Y[1]]})]}function Mb(ld){return vi(this,null,function*(){return xc(Ob,jc,oc,Zb,lc,vc,We)(ld)})}function Ub(){return vi(this,null,function*(){const ld=yield navigator.clipboard.read(),Hd=xc(lc,vc,We);return(yield Promise.all(ld.map(Oe=>
Hd(Oe)))).flat().filter(ig)})}function Ob(ld){return vi(this,null,function*(){var Hd=ld.getData("file");if(!Hd)return null;const Oe=yield Wa(Hd,"pdf");F.addAssets([Oe]);Hd=kf(me({},gq.defaultProps),{id:Uk(),assetId:Oe.id,url:Hd,opacity:1});Oe.size&&Object.assign(Hd,{point:[Y[0]-Oe.size[0]/4+16,Y[1]-Oe.size[1]/4+16],size:je.div(Oe.size,2)});return[Hd]})}function jc(ld){return vi(this,null,function*(){var Hd=Array.from(ld.files);return 0<Hd.length?(Bf=Hd=yield eb(Hd),Hd.map((Oe,mf)=>{switch(Oe.type){case "video":var Pf=
fs.defaultProps;break;case "image":Pf=wv.defaultProps;break;case "pdf":Pf=gq.defaultProps;break;default:return null}Pf=kf(me({},Pf),{id:Uk(),assetId:Oe.id,opacity:1});Oe.size&&Object.assign(Pf,{point:[Y[0]-Oe.size[0]/4+16*mf,Y[1]-Oe.size[1]/4+16*mf],size:je.div(Oe.size,2)});return Pf})):null})}function vc(ld){return vi(this,null,function*(){if(ld.types.includes("text/plain")&&(ka||Fa))return null;const Hd=yield Uc(ld,"text/html");return Hd?xc(Ic,jb)(Hd):null})}function Zb(ld){return vi(this,null,
function*(){var Hd,Oe,mf,Pf,Cf,dg,fh=ld.getData("block-uuid");if(fh){fh=fh.trim();const Lf=null==(mf=null==(Oe=null==(Hd=window.logseq)?void 0:Hd.api)?void 0:Oe.get_selected_blocks)?void 0:mf.call(Oe);Hd=Lf&&1<(null==Lf?void 0:Lf.length)?Lf.map(ah=>ah.uuid):[fh];null==(dg=null==(Cf=null==(Pf=window.logseq)?void 0:Pf.api)?void 0:Cf.set_blocks_id)?void 0:dg.call(Cf,Hd);Pf=Hd.map(ah=>Td(`((${ah}))`));return(yield Promise.all(Pf)).flat().filter(ig).map((ah,Ch)=>kf(me({},ah),{point:[Y[0]+(Kl.defaultProps.size[0]+
16)*Ch,Y[1]]}))}return null})}function oc(ld){return vi(this,null,function*(){var Hd=ld.getData("page-name");return Hd?(Hd=Hd.trim(),Td(`[[${Hd}]]`)):null})}function lc(ld){return vi(this,null,function*(){var Hd=yield Uc(ld,"text/plain");return Hd?(Hd=Hd.trim(),xc(Lc,wd)(Hd)):null})}function Ic(ld){if(ld=F.api.getClonedShapesFromTldrString(decodeURIComponent(ld),Y)){const {shapes:Hd,assets:Oe,bindings:mf}=ld;Se.push(...Oe);Xe.push(...mf);return Hd}return null}function Lc(ld){return vi(this,null,function*(){try{const Oe=
new URL(ld);var Hd=Oe.host&&["http:","https:"].includes(Oe.protocol)}catch(Oe){Hd=!1}return Hd&&!ka?Av.test(ld)?[kf(me({},or.defaultProps),{url:ld,point:[Y[0],Y[1]]})]:Xw.test(ld)?[kf(me({},ht.defaultProps),{url:ld,point:[Y[0],Y[1]]})]:[kf(me({},ds.defaultProps),{url:ld,point:[Y[0],Y[1]]})]:null})}function wd(ld){return ld.startsWith("\x3ciframe")?[kf(me({},cq.defaultProps),{html:ld,point:[Y[0],Y[1]]})]:null}function Td(ld){return vi(this,null,function*(){if(/^\(\(.*\)\)$/.test(ld)&&40===ld.length){var Hd=
ld.slice(2,-2);if(Mk(Hd))return[kf(me({},Kl.defaultProps),{point:[Y[0],Y[1]],size:[400,0],pageId:Hd,fill:F.settings.color,stroke:F.settings.color,scaleLevel:F.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(ld))return Hd=ld.slice(2,-2),[kf(me({},Kl.defaultProps),{point:[Y[0],Y[1]],size:[400,0],pageId:Hd,fill:F.settings.color,stroke:F.settings.color,scaleLevel:F.settings.scaleLevel,blockType:"P"})];return null})}function We(ld){return vi(this,null,function*(){var Hd=yield Uc(ld,"text/plain");
return Hd&&(Hd=Hd.trim(),Hd=null==Qa?void 0:Qa.addNewBlock(Hd))?[kf(me({},Kl.defaultProps),{size:[400,0],point:[Y[0],Y[1]],pageId:Hd,fill:F.settings.color,stroke:F.settings.color,scaleLevel:F.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var ne,Ke;let Bf=[],Se=[];const Xe=[];F.cursors.setCursor("progress");let Xd=[];try{oa?Xd.push(...(null!=(ne=yield Mb(oa))?ne:[])):Xd.push(...(null!=(Ke=yield Ub())?Ke:[]))}catch(ld){console.error(ld)}const nd=Xd.map(ld=>kf(me({},ld),{parentId:F.currentPageId,
isLocked:!1,id:Mk(ld.id)?ld.id:Uk()})),Yd=null==oa?void 0:oa.types.every(ld=>"Files"===ld);F.wrapUpdate(()=>{var ld=[...Bf,...Se];0<ld.length&&F.createAssets(ld);0<nd.length&&F.createShapes(nd);F.currentPage.updateBindings(Object.fromEntries(Xe.map(Hd=>[Hd.id,Hd])));if(1===F.selectedShapesArray.length&&1===nd.length&&Fa){ld=F.selectedShapesArray[0];const Hd=F.getShapeById(nd[0].id);F.createNewLineBinding(ld,Hd)}F.setSelectedShapes(nd.map(Hd=>Hd.id));F.selectedTool.transition("idle");F.cursors.setCursor("default");
(Fa||Yd)&&F.packIntoRectangle()})}),dx=uf(V(22)),ex=uf(V(22)),kq=V(586),yD=[Kn,it,jz,$n,iz,Ln,Kp,kz,hD,bi,$w,ho],zD=a=>{const {renderers:d}=Nt.useContext(vj);return(0,kq.jsx)(d.BacklinksCount,kf(me({},a),{options:{"portal?":!1}}))},AD=()=>{const a=Nt.useRef(null),d=ef(),k=Nt.useMemo(()=>({ContextBar:YH,BacklinksCount:zD,QuickLinks:vD}),[]);return(0,kq.jsx)(hs,{collisionRef:a,children:(0,kq.jsx)("div",{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":d.uuid,children:(0,kq.jsx)(cG,
{components:k,children:(0,kq.jsx)(FC,{})})})})},BD=a=>{var {onPersist:d,readOnly:k,model:F}=a;a=Jf(a,["onPersist","readOnly","model"]);const Y=vd(),ka=jd(),oa=Sd(),Fa=k?null:Ae(),Qa=Nt.useCallback((Wa,eb)=>{null==d?void 0:d(Wa,eb)},[F]);return(0,kq.jsx)(ZF,kf(me({Shapes:Zw,Tools:yD,onDrop:Y,onPaste:ka,onCopy:oa,readOnly:k,onCanvasDBClick:Fa,onPersist:Qa,model:F},a),{children:(0,kq.jsx)(AD,{})}))},CD=function(a){var {renderers:d,handlers:k}=a;a=Jf(a,["renderers","handlers"]);const F={renderers:Nt.useMemo(()=>
Object.fromEntries(Object.entries(d).map(([Y,ka])=>[Y,Nt.memo(ka)])),[]),handlers:k};return(0,kq.jsx)(vj.Provider,{value:F,children:(0,kq.jsx)(BD,me({},a))})}};
'use strict';var Wsd=function(a){return a},Xsd=function(a,b){return $APP.uh.j(function(c){var d=$APP.of(c);c=$APP.H.j(d,$APP.uD);d=$APP.H.j(d,$APP.rG);return new $APP.m(null,2,[$APP.tl,$APP.t.C(c),$APP.RIb,$APP.Vy.j(d,new $APP.O(null,2,5,$APP.R,[$APP.SE,$APP.RIb],null))],null)},$APP.Vf.j(function(c){return $APP.SE.C($APP.rG.C(c))},$APP.iH(a,b,new $APP.m(null,1,[$APP.Ft,new $APP.O(null,2,5,$APP.R,[$APP.uD,$APP.rG],null)],null))))},Ysd=function(a){return $APP.Hq.G(a,$APP.F([$APP.Iq,!0]))},Zsd=function(a,
b,c,d){var e=$APP.oH(a);b=new $APP.m(null,2,[$APP.TE,$APP.Tkb,$APP.UE,new $APP.m(null,6,[$APP.tl,$APP.wa(b,"id"),$APP.V,$APP.wa(b,"name"),$APP.gI,Ysd($APP.wa(b,"bindings")),$APP.RIb,$APP.wa(b,"nonce"),$APP.SIb,Ysd(c),$APP.OIb,d],null)],null);c=$APP.ox();e=$APP.JH.C(e);e=$APP.n(e)?e:$APP.ox();return new $APP.m(null,5,[$APP.Ar,a,$APP.RG,"whiteboard",$APP.rG,b,$APP.KH,c,$APP.JH,e],null)},$sd=function(a,b,c,d,e,f){a=Ysd(a.getCleanUpAssets());var g=b.shapes,h=$APP.uh.j(function(E){return $APP.wa(E,"id")},
g),l=$APP.ch(h,$APP.rj.C(g.length));g=$APP.$g($APP.uh.j(function(E){E=$APP.of(E);E=$APP.H.j(E,$APP.tl);return $APP.T.F(Ysd(b.getShapeById(E).serialized),$APP.ky,$APP.H.j(l,E))},$APP.WA.j(c,d)));d=$APP.$g($APP.uh.j($APP.tl,d));var p=$APP.$g($APP.uh.j($APP.tl,c)),q=$APP.$g($APP.Gm.j($APP.Sj,$APP.WA.j(p,d)));c=$APP.$g($APP.Vf.j(function(E){E=$APP.tl.C(E);return q.C?q.C(E):q.call(null,E)},g));var r=$APP.Gm.j($APP.Sj,$APP.WA.j(d,p)),u=$APP.rC();d=$APP.x(r)?$APP.uh.j(function(E){return $APP.Vy.j(E,new $APP.O(null,
2,5,$APP.R,[$APP.rG,$APP.SE],null))},function(){var E=new $APP.O(null,1,5,$APP.R,[$APP.Hz],null),G=$APP.qj.j(function(K){return new $APP.O(null,2,5,$APP.R,[$APP.uD,$APP.Wh(K)],null)},r);return $APP.yF?$APP.yF(u,E,G):$APP.zF.call(null,u,E,G)}()):null;p=$APP.qj.j(function(E){return new $APP.O(null,2,5,$APP.R,[$APP.kLa,new $APP.O(null,2,5,$APP.R,[$APP.uD,$APP.Wh(E)],null)],null)},r);var y=$APP.WA.j(g,c),z=$APP.x(y)?function(){var E=new $APP.O(null,1,5,$APP.R,[$APP.Hz],null),G=$APP.qj.j(function(K){return new $APP.O(null,
2,5,$APP.R,[$APP.uD,$APP.Wh($APP.tl.C(K))],null)},y);return $APP.yF?$APP.yF(u,E,G):$APP.zF.call(null,u,E,G)}():null;return new $APP.m(null,4,[$APP.rxc,Zsd(e,b,a,h),$APP.RNc,$APP.uh.j(function(E){return $APP.Yd(q,$APP.t.C($APP.uD.C(E)))?$APP.T.F(E,$APP.KH,$APP.ox()):$APP.Yvb(E)},$APP.uh.j(function(E){E=new $APP.m(null,2,[$APP.TE,$APP.HM,$APP.SE,E],null);E=new $APP.m(null,3,[$APP.wF,new $APP.m(null,1,[$APP.Ar,$APP.zr.C?$APP.zr.C(e):$APP.zr.call(null,e)],null),$APP.HF,new $APP.m(null,1,[$APP.Ar,e],null),
$APP.rG,E],null);var G=$APP.Zkb(E,e);return $APP.Ol.G($APP.F([E,G]))},g)),$APP.WF,p,$APP.B_b,new $APP.m(null,3,[$APP.FFb,$APP.Hb(f),$APP.mvb,f,$APP.xw,new $APP.m(null,5,[$APP.JM,e,$APP.hJb,d,$APP.iJb,c,$APP.jJb,y,$APP.kJb,z],null)],null)],null)},atd=function(a,b,c){var d=$APP.ad($APP.A(b.pages)),e=d.shapes,f=$APP.oH(a);f=$APP.Vy.j(f,new $APP.O(null,3,5,$APP.R,[$APP.rG,$APP.UE,$APP.OIb],null));var g=$APP.ch(f,$APP.rj.C($APP.Xc(f)));e=$APP.$g($APP.Tn.j(function(q,r){var u=r.id;return new $APP.m(null,
2,[$APP.tl,u,$APP.RIb,$APP.B.j(q,$APP.H.j(g,u))?r.nonce:Date.now()],null)},e));var h=$APP.rC();f=function(){var q=$APP.Vy.j($APP.v($APP.Wdd),new $APP.O(null,2,5,$APP.R,[h,a],null));return $APP.n(q)?q:$APP.$g($APP.uh.j(function(r){return $APP.Jr.F(r,$APP.tl,$APP.t)},Xsd(h,a)))}();b=$sd(b,d,e,f,a,c);f=$APP.of(b);d=$APP.H.j(f,$APP.rxc);b=$APP.H.j(f,$APP.RNc);c=$APP.H.j(f,$APP.WF);f=$APP.H.j(f,$APP.B_b);d=$APP.Wk.G(c,new $APP.O(null,1,5,$APP.R,[d],null),$APP.F([b]));var l=$APP.Vy.j(f,new $APP.O(null,
2,5,$APP.R,[$APP.xw,$APP.iJb],null)),p=$APP.Vy.j(f,new $APP.O(null,2,5,$APP.R,[$APP.xw,$APP.hJb],null));l=$APP.n($APP.Af(function(q){return $APP.B.j("group",$APP.Im.C(q))},l))?$APP.T.F(f,$APP.lJb,$APP.nw):$APP.n(function(){var q=$APP.pf(p);return $APP.n(q)?$APP.zf(function(r){return $APP.B.j("group",$APP.Im.C(r))},p):q}())?$APP.T.F(f,$APP.lJb,$APP.xyc):$APP.n($APP.Af(function(q){return $APP.B.j("line",$APP.Im.C(q))&&$APP.B.j("arrow ",$APP.Vo.C($APP.kwc.C(q)))},l))?$APP.T.F(f,$APP.lJb,$APP.NJc):f;
b=$APP.x($APP.Wk.j(b,c))?l:$APP.T.F(f,$APP.$Ya,!0);$APP.Ih.O($APP.Wdd,$APP.Mv,new $APP.O(null,2,5,$APP.R,[h,a],null),e);if($APP.Yd(new $APP.Wg(null,new $APP.m(null,1,[$APP.NJc,null],null),null),$APP.lJb.C(b)))return $APP.uC($APP.d0c,new $APP.m(null,2,[$APP.bz,d,$APP.B_b,b],null));e=$APP.d0c.C($APP.v($APP.sC));$APP.Wk.j($APP.bz.C(e),d);$APP.Ol.G($APP.F([b,$APP.B_b.C(e)]));$APP.uC($APP.d0c,$APP.lf);return null},btd=function(a){a=$APP.$_a(a);return $APP.Gm.j($APP.Rkb,a)},ctd=function(a){var b=$APP.cz.C($APP.oH(a));
a=btd(a);a=$APP.Vf.j(function(d){return $APP.B.j(b,$APP.cz.C($APP.HF.C(d)))},a);var c=$APP.$g($APP.Gm.j($APP.Eb,$APP.uh.j(function(d){return $APP.Vy.F(d,new $APP.O(null,2,5,$APP.R,[$APP.IF,$APP.cz],null),null)},a)));a=$APP.Gm.j(function(d){d=$APP.cz.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},dtd=function(){return $APP.fm(null,function(){return $APP.fm(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.fm(a.text(),function(b){return $APP.fm($APP.Gr($APP.lf,
b),function(c){return $APP.Yl(c)})})})})},etd=function(a){var b=$APP.R1a();return($APP.od(b)||$APP.B.j(1,$APP.Xc(b))&&$APP.B.j(a,$APP.Ar.C($APP.A(b))))&&$APP.Hb($APP.Vy.j($APP.v($APP.sC),new $APP.O(null,1,5,$APP.R,[$APP.$Ua],null)))},ftd=function(a){return null!=a?$APP.im($APP.fm(null,function(){return $APP.fm(dtd(),function(b){var c=$APP.of(b);b=$APP.H.j(c,$APP.HH);c=$APP.H.j(c,$APP.lx);var d=$APP.A(b);b=$APP.PIb(d,c);d=$APP.Qkb(d);c=$APP.SIb.C(d);d=$APP.gI.C(d);a.cloneShapesIntoCurrentPage($APP.Gi(new $APP.m(null,
3,[$APP.$Ib,b,$APP.SIb,c,$APP.gI,d],null)));b=$APP.bVa();return $APP.Yl(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},gtd=function(a){a.cleanup($APP.uh.j(function(b){return b.id},a.shapes))},jtd=function(a,b){b=$APP.Hq.G(b,$APP.F([new $APP.m(null,1,[$APP.Iq,!0],null)]));b=$APP.of(b);var c=$APP.H.j(b,htd),d=$APP.H.j(b,$APP.FJ),e=$APP.H.j(b,itd),f=$APP.rC();return $APP.fm(null,function(){return $APP.fm($APP.n(d)?$APP.hfb(f,a,new $APP.m(null,1,[$APP.Mx,
100],null)):null,function(g){return $APP.fm($APP.n(c)?$APP.mfb(a,10):null,function(h){return $APP.fm($APP.n(e)?$APP.ofb(a,100):null,function(l){return $APP.Yl($APP.Gi(new $APP.m(null,3,[$APP.HH,h,$APP.lx,g,$APP.pK,l],null)))})})})})},ktd=function(a){return $APP.cm($APP.OCb($APP.rC(),new $APP.O(null,1,5,$APP.R,[$APP.Hq.C(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.C.F(c,0,null),$APP.C.F(c,1,null),c=$APP.C.F(c,2,null),$APP.QCb($APP.n(c)?c:b)):null})},ltd=function(){return $APP.JFb(null)},
mtd=function(){return $APP.LFb(null)},Dtd=function(a){return $APP.Lg([ntd,otd,ptd,qtd,rtd,std,ttd,utd,$APP.QD,vtd,wtd,xtd,ytd,$APP.A_,ztd,Atd,Btd,Ctd],[function(b){return $APP.Ar.C($APP.e0a($APP.rC(),$APP.xi(b)))},function(b){return $APP.Gi($APP.NXb(b))},function(b){return $APP.pH(b,!1)},function(b){return $APP.kVa($APP.n(b)?$APP.NXb(b):null)},function(b){return $APP.TIb(b)},$APP.Ix,function(b){return $APP.OBb(b,new $APP.m(null,1,[$APP.zR,!1],null))},$APP.FH,jtd,ktd,Wsd,function(b,c){return $APP.ix(b,
$APP.F([$APP.kx,c]))},function(b){var c=$APP.t,d=c.C,e=$APP.BB(),f=$APP.oH(a),g=ctd(a);b=new $APP.m(null,6,[$APP.IF,$APP.Vg($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.R,[$APP.cz],null)),$APP.uD,e,$APP.qD,$APP.n(b)?b:"",$APP.$F,$APP.Br,$APP.wF,new $APP.m(null,2,[$APP.Ar,$APP.zr.C?$APP.zr.C(a):$APP.zr.call(null,a),$APP.sx,a],null),$APP.HF,new $APP.m(null,1,[$APP.Ar,a],null)],null);$APP.AF(new $APP.O(null,1,5,$APP.R,[b],null));return d.call(c,e)},function(b){return $APP.KK.G($APP.F([$APP.vh.C(b)]))},function(b,
c){return $APP.KD(function(){return(0,$APP.LUb)(b,$APP.Ol.G($APP.F([$APP.Hq.G(c,$APP.F([$APP.Iq,!0])),new $APP.m(null,1,[$APP.AR,!0],null)])))})},function(b,c){return $APP.oD($APP.rC(),$APP.cz.C($APP.oH(b)),$APP.vh.C(c))},function(b){var c=$APP.Qw(b)?$APP.Ar.C($APP.e0a($APP.rC(),$APP.xi(b))):null;c=$APP.n(c)?c:b;var d=$APP.jH(c),e=$APP.FH(c);return $APP.n(d)?$APP.n(e)?$APP.gM(c,new $APP.m(null,1,[$APP.fM,b],null)):$APP.eM($APP.pH(b,!1)):null},function(b){return $APP.Gi($APP.JG($APP.xi(b)))}])},Ctd=
new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),ztd=new $APP.N(null,"exportToImage","exportToImage",-154356643),ytd=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),Etd=new $APP.N(null,"KeyboardShortcut","KeyboardShortcut",1250004264),itd=new $APP.N(null,"files?","files?",-1267491104),ntd=new $APP.N(null,"getBlockPageName","getBlockPageName",-1656908032),Ftd=new $APP.N(null,"renderers","renderers",-1460292282),Gtd=new $APP.N(null,"model","model",331153215),ptd=new $APP.N(null,
"getRedirectPageName","getRedirectPageName",-1858136925),std=new $APP.N(null,"isMobile","isMobile",-2043133877),qtd=new $APP.N(null,"setCurrentPdf","setCurrentPdf",-63289336),Htd=new $APP.N(null,"onMount","onMount",-876858467),ttd=new $APP.N(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),wtd=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),Itd=new $APP.N(null,"onPersist","onPersist",-1848738852),Jtd=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),xtd=new $APP.N(null,
"copyToClipboard","copyToClipboard",1092115063),Btd=new $APP.N(null,"redirectToPage","redirectToPage",87147838),rtd=new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",554297706),vtd=new $APP.N(null,"saveAsset","saveAsset",-668047853),Ktd=new $APP.N(null,"BacklinksCount","BacklinksCount",364670631),Ltd=new $APP.N(null,"Block","Block",-1959785792),Atd=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),Mtd=new $APP.N(null,"Page","Page",-1267059506),htd=new $APP.N(null,"pages?","pages?",
-2065014049),Ntd=new $APP.N(null,"PageName","PageName",-164991013),Otd=new $APP.N(null,"Tweet","Tweet",-452258680),utd=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579),Ptd=new $APP.N(null,"BlockReference","BlockReference",-120254741),otd=new $APP.N(null,"inflateAsset","inflateAsset",-1449040639);$APP.dda("tldraw");var Qtd=$APP.pm(590);var Rtd,Std;$APP.Rjd={};Rtd=$APP.WR($APP.wa(Qtd,"App"));$APP.Ujd=$APP.wa(Qtd,"generateJSXFromModel");
Std=new $APP.m(null,8,[Mtd,$APP.hs($APP.ls,function(a){return(0,$APP.Zid)(new $APP.m(null,2,[$APP.JM,$APP.pH($APP.wa(a,"pageName"),!1),$APP.AR,!0],null))},null,"frontend.extensions.tldraw/page-cp"),Ltd,$APP.hs($APP.ls,function(a){a=$APP.Wh($APP.wa(a,"blockId"));var b=$APP.nUa($APP.Bbc);a=b.C?b.C(a):b.call(null,a);return $APP.Pr(a)},null,"frontend.extensions.tldraw/block-cp"),Jtd,$APP.hs($APP.ls,function(a){return $APP.Pr($APP.TU(new $APP.m(null,1,[$APP.LY,!0],null),$APP.rC(),$APP.Wh($APP.wa(a,"blockId")),
new $APP.m(null,2,[$APP.w1b,$APP.wa(a,"endSeparator"),$APP.x1b,$APP.wa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),Otd,$APP.hs($APP.ls,function(a){return(0,$APP.n0b)($APP.wa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),Ntd,$APP.hs($APP.ls,function(a){return(0,$APP.EU)(new $APP.m(null,1,[$APP.LY,!0],null),new $APP.m(null,1,[$APP.Ar,$APP.wa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),Ktd,function(a){return $APP.Cf.j($APP.Xjd,$APP.uh.j(function(b){return $APP.Hq.G($APP.wa(a,
b),$APP.F([new $APP.m(null,1,[$APP.Iq,!0],null)]))},new $APP.O(null,3,5,$APP.R,["id","className","options"],null)))},Ptd,$APP.hs($APP.ls,function(a){return(0,$APP.x_b)($APP.lf,$APP.wa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),Etd,$APP.hs($APP.ls,function(a){a=$APP.sKb($APP.vh.C($APP.wa(a,"action")));return $APP.Pr($APP.$R(a))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);
$APP.Sjd=$APP.hs($APP.ls,function(a,b){function c(l){if($APP.n(l)){l.appUndo=ltd;l.appRedo=mtd;var p=$APP.wa(l,"api");return $APP.n(p)?$APP.cm(d?ftd(p):null,function(){gtd(l.currentPage);$APP.lVa(l,b);return h.C?h.C(l):h.call(null,l)}):null}return null}var d=etd(a),e=$APP.aJb(a),f=$APP.us(null),g=$APP.C.F(f,0,null),h=$APP.C.F(f,1,null);$APP.vs(function(){$APP.n($APP.n(g)?b:g)&&$APP.lVa(g,b);return function(){return $APP.Fc}},new $APP.O(null,2,5,$APP.R,[b,g],null));return $APP.n(e)?$APP.X("div",{style:{overscrollBehavior:"none"},
onBlur:function(l){l=$APP.wa(l,"target").tagName;var p=new $APP.Wg(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.tD():null},onWheel:$APP.cx,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.Hb(g)?$APP.X("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.Pr($APP.gS("Loading onboarding whiteboard ..."))]):null,$APP.Pr(function(){var l=new $APP.m(null,6,[Ftd,Std,$APP.VB,
Dtd(a),Htd,c,$APP.rPc,!0,Itd,function(p,q){$APP.uC(new $APP.O(null,2,5,$APP.R,[$APP.wRc,$APP.rC()],null),$APP.ox());return $APP.n(!1)?(console.time("tldraw persist"),p=atd(a,p,q.replace),console.timeEnd("tldraw persist"),p):atd(a,p,q.replace)},Gtd,e],null);return Rtd.C?Rtd.C(l):Rtd.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Za.Xi();
}).call(this);