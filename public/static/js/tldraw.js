(function(){
shadow$provide[584]=function(va,V,Sa,I){function q(r,A,C){var x,J={},p=null,f=null;void 0!==C&&(p=""+C);void 0!==A.key&&(p=""+A.key);void 0!==A.ref&&(f=A.ref);for(x in A)n.call(A,x)&&!b.hasOwnProperty(x)&&(J[x]=A[x]);if(r&&r.defaultProps)for(x in A=r.defaultProps,A)void 0===J[x]&&(J[x]=A[x]);return{$$typeof:P,type:r,key:p,ref:f,props:J,_owner:z.current}}V(19);va=V(22);var P=60103;I.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(V=Symbol.for,P=V("react.element"),I.Fragment=V("react.fragment"));
var z=va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};I.jsx=q;I.jsxs=q};
shadow$provide[586]=function(va,V,Sa,I){Sa.exports=V(584)};
shadow$provide[587]=function(va,V,Sa,I){function q(mc){for(var Bd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+mc,nd=1;nd<arguments.length;nd++)Bd+="\x26args[]\x3d"+encodeURIComponent(arguments[nd]);return"Minified React error #"+mc+"; visit "+Bd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function P(mc){if(null==mc)return null;if("function"===typeof mc)return mc.displayName||mc.name||null;if("string"===typeof mc)return mc;
switch(mc){case N:return"Fragment";case aa:return"Portal";case B:return"Profiler";case Q:return"StrictMode";case Z:return"Suspense";case F:return"SuspenseList"}if("object"===typeof mc)switch(mc.$$typeof){case R:return(mc.displayName||"Context")+".Consumer";case O:return(mc._context.displayName||"Context")+".Provider";case ba:var Bd=mc.render;Bd=Bd.displayName||Bd.name||"";return mc.displayName||(""!==Bd?"ForwardRef("+Bd+")":"ForwardRef");case ia:return P(mc.type);case ca:return P(mc._render);case M:Bd=
mc._payload;mc=mc._init;try{return P(mc(Bd))}catch(nd){}}return null}function z(mc,Bd){for(var nd=mc._threadCount|0;nd<=Bd;nd++)mc[nd]=mc._currentValue2,mc._threadCount=nd+1}function n(mc,Bd,nd,ge){if(ge&&(ge=mc.contextType,"object"===typeof ge&&null!==ge))return z(ge,nd),ge[nd];if(mc=mc.contextTypes){nd={};for(var id in mc)nd[id]=Bd[id];Bd=nd}else Bd=xa;return Bd}function b(mc){if(Da.call(Va,mc))return!0;if(Da.call(Oa,mc))return!1;if(Ta.test(mc))return Va[mc]=!0;Oa[mc]=!0;return!1}function r(mc,
Bd,nd,ge){if(null!==nd&&0===nd.type)return!1;switch(typeof Bd){case "function":case "symbol":return!0;case "boolean":if(ge)return!1;if(null!==nd)return!nd.acceptsBooleans;mc=mc.toLowerCase().slice(0,5);return"data-"!==mc&&"aria-"!==mc;default:return!1}}function A(mc,Bd,nd,ge){if(null===Bd||"undefined"===typeof Bd||r(mc,Bd,nd,ge))return!0;if(ge)return!1;if(null!==nd)switch(nd.type){case 3:return!Bd;case 4:return!1===Bd;case 5:return isNaN(Bd);case 6:return isNaN(Bd)||1>Bd}return!1}function C(mc,Bd,
nd,ge,id,Vd,ed){this.acceptsBooleans=2===Bd||3===Bd||4===Bd;this.attributeName=ge;this.attributeNamespace=id;this.mustUseProperty=nd;this.propertyName=mc;this.type=Bd;this.sanitizeURL=Vd;this.removeEmptyString=ed}function x(mc){return mc[1].toUpperCase()}function J(mc){if("boolean"===typeof mc||"number"===typeof mc)return""+mc;mc=""+mc;var Bd=ab.exec(mc);if(Bd){var nd="",ge,id=0;for(ge=Bd.index;ge<mc.length;ge++){switch(mc.charCodeAt(ge)){case 34:Bd="\x26quot;";break;case 38:Bd="\x26amp;";break;case 39:Bd=
"\x26#x27;";break;case 60:Bd="\x26lt;";break;case 62:Bd="\x26gt;";break;default:continue}id!==ge&&(nd+=mc.substring(id,ge));id=ge+1;nd+=Bd}mc=id!==ge?nd+mc.substring(id,ge):nd}return mc}function p(mc,Bd){var nd=Ma.hasOwnProperty(mc)?Ma[mc]:null,ge;if(ge="style"!==mc)ge=null!==nd?0===nd.type:!(2<mc.length)||"o"!==mc[0]&&"O"!==mc[0]||"n"!==mc[1]&&"N"!==mc[1]?!1:!0;if(ge||A(mc,Bd,nd,!1))return"";if(null!==nd){mc=nd.attributeName;ge=nd.type;if(3===ge||4===ge&&!0===Bd)return mc+'\x3d""';nd.sanitizeURL&&
(Bd=""+Bd);return mc+'\x3d"'+(J(Bd)+'"')}return b(mc)?mc+'\x3d"'+(J(Bd)+'"'):""}function f(mc,Bd){return mc===Bd&&(0!==mc||1/mc===1/Bd)||mc!==mc&&Bd!==Bd}function g(){if(null===na)throw Error(q(321));return na}function c(){if(0<yb)throw Error(q(312));return{memoizedState:null,queue:null,next:null}}function u(){null===qa?null===Aa?(za=!1,Aa=qa=c()):(za=!0,qa=Aa):null===qa.next?(za=!1,qa=qa.next=c()):(za=!0,qa=qa.next);return qa}function v(mc,Bd,nd,ge){for(;Ia;)Ia=!1,yb+=1,qa=null,nd=mc(Bd,ge);L();
return nd}function L(){na=null;Ia=!1;Aa=null;yb=0;qa=Ra=null}function y(mc,Bd){return"function"===typeof Bd?Bd(mc):Bd}function t(mc,Bd,nd){na=g();qa=u();if(za){var ge=qa.queue;Bd=ge.dispatch;if(null!==Ra&&(nd=Ra.get(ge),void 0!==nd)){Ra.delete(ge);ge=qa.memoizedState;do ge=mc(ge,nd.action),nd=nd.next;while(null!==nd);qa.memoizedState=ge;return[ge,Bd]}return[qa.memoizedState,Bd]}mc=mc===y?"function"===typeof Bd?Bd():Bd:void 0!==nd?nd(Bd):Bd;qa.memoizedState=mc;mc=qa.queue={last:null,dispatch:null};
mc=mc.dispatch=h.bind(null,na,mc);return[qa.memoizedState,mc]}function k(mc,Bd){na=g();qa=u();Bd=void 0===Bd?null:Bd;if(null!==qa){var nd=qa.memoizedState;if(null!==nd&&null!==Bd){var ge=nd[1];a:if(null===ge)ge=!1;else{for(var id=0;id<ge.length&&id<Bd.length;id++)if(!Na(Bd[id],ge[id])){ge=!1;break a}ge=!0}if(ge)return nd[0]}}mc=mc();qa.memoizedState=[mc,Bd];return mc}function h(mc,Bd,nd){if(!(25>yb))throw Error(q(301));if(mc===na)if(Ia=!0,mc={action:nd,next:null},null===Ra&&(Ra=new Map),nd=Ra.get(Bd),
void 0===nd)Ra.set(Bd,mc);else{for(Bd=nd;null!==Bd.next;)Bd=Bd.next;Bd.next=mc}}function K(){}function X(mc){switch(mc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function E(mc){if(void 0===mc||null===mc)return mc;var Bd="";D.Children.forEach(mc,function(nd){null!=nd&&(Bd+=nd)});return Bd}function ha(mc,Bd){if(void 0===mc)throw Error(q(152,P(Bd)||"Component"));}function S(mc,Bd,nd){function ge(ed,
Qd){var Rb=Qd.prototype&&Qd.prototype.isReactComponent,gc=n(Qd,Bd,nd,Rb),Zb=[],kb=!1,nb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Zb)return null},enqueueReplaceState:function(ue,td){kb=!0;Zb=[td]},enqueueSetState:function(ue,td){if(null===Zb)return null;Zb.push(td)}};if(Rb){if(Rb=new Qd(ed.props,gc,nb),"function"===typeof Qd.getDerivedStateFromProps){var dc=Qd.getDerivedStateFromProps.call(null,ed.props,Rb.state);null!=dc&&(Rb.state=W({},Rb.state,dc))}}else if(na={},
Rb=Qd(ed.props,gc,nb),Rb=v(Qd,ed.props,Rb,gc),null==Rb||null==Rb.render){mc=Rb;ha(mc,Qd);return}Rb.props=ed.props;Rb.context=gc;Rb.updater=nb;nb=Rb.state;void 0===nb&&(Rb.state=nb=null);if("function"===typeof Rb.UNSAFE_componentWillMount||"function"===typeof Rb.componentWillMount)if("function"===typeof Rb.componentWillMount&&"function"!==typeof Qd.getDerivedStateFromProps&&Rb.componentWillMount(),"function"===typeof Rb.UNSAFE_componentWillMount&&"function"!==typeof Qd.getDerivedStateFromProps&&Rb.UNSAFE_componentWillMount(),
Zb.length){nb=Zb;var uc=kb;Zb=null;kb=!1;if(uc&&1===nb.length)Rb.state=nb[0];else{dc=uc?nb[0]:Rb.state;var Qc=!0;for(uc=uc?1:0;uc<nb.length;uc++){var Yc=nb[uc];Yc="function"===typeof Yc?Yc.call(Rb,dc,ed.props,gc):Yc;null!=Yc&&(Qc?(Qc=!1,dc=W({},dc,Yc)):W(dc,Yc))}Rb.state=dc}}else Zb=null;mc=Rb.render();ha(mc,Qd);if("function"===typeof Rb.getChildContext&&(ed=Qd.childContextTypes,"object"===typeof ed)){var Kd=Rb.getChildContext(),ee;for(ee in Kd)if(!(ee in ed))throw Error(q(108,P(Qd)||"Unknown",ee));
}Kd&&(Bd=W({},Bd,Kd))}for(;D.isValidElement(mc);){var id=mc,Vd=id.type;if("function"!==typeof Vd)break;ge(id,Vd)}return{child:mc,context:Bd}}var W=V(19),D=V(22),aa=60106,N=60107,Q=60108,B=60114,O=60109,R=60110,ba=60112,Z=60113,F=60120,ia=60115,M=60116,ca=60121,fa=60117,da=60119,pa=60129,ya=60131;"function"===typeof Symbol&&Symbol.for&&(va=Symbol.for,aa=va("react.portal"),N=va("react.fragment"),Q=va("react.strict_mode"),B=va("react.profiler"),O=va("react.provider"),R=va("react.context"),ba=va("react.forward_ref"),
Z=va("react.suspense"),F=va("react.suspense_list"),ia=va("react.memo"),M=va("react.lazy"),ca=va("react.block"),fa=va("react.fundamental"),da=va("react.scope"),pa=va("react.debug_trace_mode"),ya=va("react.legacy_hidden"));va=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var xa={},Ga=new Uint16Array(16);for(V=0;15>V;V++)Ga[V]=V+1;Ga[15]=0;var Ta=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Da=Object.prototype.hasOwnProperty,Oa={},Va={},Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(mc){Ma[mc]=new C(mc,0,!1,mc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(mc){var Bd=mc[0];Ma[Bd]=new C(Bd,1,!1,mc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(mc){Ma[mc]=
new C(mc,2,!1,mc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(mc){Ma[mc]=new C(mc,2,!1,mc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(mc){Ma[mc]=new C(mc,3,!1,mc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(mc){Ma[mc]=new C(mc,3,!0,mc,null,!1,!1)});["capture","download"].forEach(function(mc){Ma[mc]=new C(mc,4,!1,mc,null,!1,!1)});["cols","rows","size","span"].forEach(function(mc){Ma[mc]=new C(mc,6,!1,mc,null,!1,!1)});["rowSpan","start"].forEach(function(mc){Ma[mc]=new C(mc,5,!1,mc.toLowerCase(),null,!1,!1)});var bb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(mc){var Bd=
mc.replace(bb,x);Ma[Bd]=new C(Bd,1,!1,mc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(mc){var Bd=mc.replace(bb,x);Ma[Bd]=new C(Bd,1,!1,mc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(mc){var Bd=mc.replace(bb,x);Ma[Bd]=new C(Bd,1,!1,mc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(mc){Ma[mc]=new C(mc,1,!1,mc.toLowerCase(),null,!1,!1)});
Ma.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(mc){Ma[mc]=new C(mc,1,!1,mc.toLowerCase(),null,!0,!0)});var ab=/["'&<>]/,Na="function"===typeof Object.is?Object.is:f,na=null,Aa=null,qa=null,za=!1,Ia=!1,Ra=null,yb=0,hb=null,Kb={readContext:function(mc){var Bd=hb.threadID;z(mc,Bd);return mc[Bd]},useContext:function(mc){g();var Bd=hb.threadID;z(mc,Bd);return mc[Bd]},useMemo:k,useReducer:t,useRef:function(mc){na=
g();qa=u();var Bd=qa.memoizedState;return null===Bd?(mc={current:mc},qa.memoizedState=mc):Bd},useState:function(mc){return t(y,mc)},useLayoutEffect:function(){},useCallback:function(mc,Bd){return k(function(){return mc},Bd)},useImperativeHandle:K,useEffect:K,useDebugValue:K,useDeferredValue:function(mc){g();return mc},useTransition:function(){g();return[function(mc){mc()},!1]},useOpaqueIdentifier:function(){return(hb.identifierPrefix||"")+"R:"+(hb.uniqueID++).toString(36)},useMutableSource:function(mc,
Bd){g();return Bd(mc._source)}},Xb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},kc=W({menuitem:!0},Xb),Pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lb=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(mc){lb.forEach(function(Bd){Bd=Bd+mc.charAt(0).toUpperCase()+mc.substring(1);Pa[Bd]=Pa[mc]})});var mb=/([A-Z])/g,ac=/^ms-/,Dc=D.Children.toArray,
Zc=va.ReactCurrentDispatcher,Kc={listing:!0,pre:!0,textarea:!0},Fb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,yc={},Tc={},bd=Object.prototype.hasOwnProperty,Id={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Ed=function(){function mc(nd,ge,id){D.isValidElement(nd)?nd.type!==N?nd=[nd]:(nd=nd.props.children,nd=D.isValidElement(nd)?[nd]:Dc(nd)):nd=Dc(nd);nd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:nd,childIndex:0,context:xa,footer:""};
var Vd=Ga[0];if(0===Vd){var ed=Ga;Vd=ed.length;var Qd=2*Vd;if(!(65536>=Qd))throw Error(q(304));var Rb=new Uint16Array(Qd);Rb.set(ed);Ga=Rb;Ga[0]=Vd+1;for(ed=Vd;ed<Qd-1;ed++)Ga[ed]=ed+1;Ga[Qd-1]=0}else Ga[0]=Ga[Vd];this.threadID=Vd;this.stack=[nd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=ge;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=id&&id.identifierPrefix||""}
var Bd=mc.prototype;Bd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var nd=this.threadID;Ga[nd]=Ga[0];Ga[0]=nd}};Bd.pushProvider=function(nd){var ge=++this.contextIndex,id=nd.type._context,Vd=this.threadID;z(id,Vd);var ed=id[Vd];this.contextStack[ge]=id;this.contextValueStack[ge]=ed;id[Vd]=nd.props.value};Bd.popProvider=function(){var nd=this.contextIndex,ge=this.contextStack[nd],id=this.contextValueStack[nd];this.contextStack[nd]=null;this.contextValueStack[nd]=
null;this.contextIndex--;ge[this.threadID]=id};Bd.clearProviders=function(){for(var nd=this.contextIndex;0<=nd;nd--)this.contextStack[nd][this.threadID]=this.contextValueStack[nd]};Bd.read=function(nd){if(this.exhausted)return null;var ge=hb;hb=this;var id=Zc.current;Zc.current=Kb;try{for(var Vd=[""],ed=!1;Vd[0].length<nd;){if(0===this.stack.length){this.exhausted=!0;var Qd=this.threadID;Ga[Qd]=Ga[0];Ga[0]=Qd;break}var Rb=this.stack[this.stack.length-1];if(ed||Rb.childIndex>=Rb.children.length){var gc=
Rb.footer;""!==gc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Rb.type)this.currentSelectValue=null;else if(null!=Rb.type&&null!=Rb.type.type&&Rb.type.type.$$typeof===O)this.popProvider(Rb.type);else if(Rb.type===Z){this.suspenseDepth--;var Zb=Vd.pop();if(ed){ed=!1;var kb=Rb.fallbackFrame;if(!kb)throw Error(q(303));this.stack.push(kb);Vd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Vd[this.suspenseDepth]+=Zb}Vd[this.suspenseDepth]+=gc}else{var nb=Rb.children[Rb.childIndex++],
dc="";try{dc+=this.render(nb,Rb.context,Rb.domNamespace)}catch(uc){if(null!=uc&&"function"===typeof uc.then)throw Error(q(294));throw uc;}finally{}Vd.length<=this.suspenseDepth&&Vd.push("");Vd[this.suspenseDepth]+=dc}}return Vd[0]}finally{Zc.current=id,hb=ge,L()}};Bd.render=function(nd,ge,id){if("string"===typeof nd||"number"===typeof nd){id=""+nd;if(""===id)return"";if(this.makeStaticMarkup)return J(id);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+J(id);this.previousWasTextNode=!0;return J(id)}ge=
S(nd,ge,this.threadID);nd=ge.child;ge=ge.context;if(null===nd||!1===nd)return"";if(!D.isValidElement(nd)){if(null!=nd&&null!=nd.$$typeof){id=nd.$$typeof;if(id===aa)throw Error(q(257));throw Error(q(258,id.toString()));}nd=Dc(nd);this.stack.push({type:null,domNamespace:id,children:nd,childIndex:0,context:ge,footer:""});return""}var Vd=nd.type;if("string"===typeof Vd)return this.renderDOM(nd,ge,id);switch(Vd){case ya:case pa:case Q:case B:case F:case N:return nd=Dc(nd.props.children),this.stack.push({type:null,
domNamespace:id,children:nd,childIndex:0,context:ge,footer:""}),"";case Z:throw Error(q(294));case da:throw Error(q(343));}if("object"===typeof Vd&&null!==Vd)switch(Vd.$$typeof){case ba:na={};var ed=Vd.render(nd.props,nd.ref);ed=v(Vd.render,nd.props,ed,nd.ref);ed=Dc(ed);this.stack.push({type:null,domNamespace:id,children:ed,childIndex:0,context:ge,footer:""});return"";case ia:return nd=[D.createElement(Vd.type,W({ref:nd.ref},nd.props))],this.stack.push({type:null,domNamespace:id,children:nd,childIndex:0,
context:ge,footer:""}),"";case O:return Vd=Dc(nd.props.children),id={type:nd,domNamespace:id,children:Vd,childIndex:0,context:ge,footer:""},this.pushProvider(nd),this.stack.push(id),"";case R:Vd=nd.type;ed=nd.props;var Qd=this.threadID;z(Vd,Qd);Vd=Dc(ed.children(Vd[Qd]));this.stack.push({type:nd,domNamespace:id,children:Vd,childIndex:0,context:ge,footer:""});return"";case fa:throw Error(q(338));case M:return Vd=nd.type,ed=Vd._init,Vd=ed(Vd._payload),nd=[D.createElement(Vd,W({ref:nd.ref},nd.props))],
this.stack.push({type:null,domNamespace:id,children:nd,childIndex:0,context:ge,footer:""}),""}throw Error(q(130,null==Vd?Vd:typeof Vd,""));};Bd.renderDOM=function(nd,ge,id){var Vd=nd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===id&&X(Vd);if(!yc.hasOwnProperty(Vd)){if(!Fb.test(Vd))throw Error(q(65,Vd));yc[Vd]=!0}var ed=nd.props;if("input"===Vd)ed=W({type:void 0},ed,{defaultChecked:void 0,defaultValue:void 0,value:null!=ed.value?ed.value:ed.defaultValue,checked:null!=ed.checked?ed.checked:ed.defaultChecked});
else if("textarea"===Vd){var Qd=ed.value;if(null==Qd){Qd=ed.defaultValue;var Rb=ed.children;if(null!=Rb){if(null!=Qd)throw Error(q(92));if(Array.isArray(Rb)){if(!(1>=Rb.length))throw Error(q(93));Rb=Rb[0]}Qd=""+Rb}null==Qd&&(Qd="")}ed=W({},ed,{value:void 0,children:""+Qd})}else if("select"===Vd)this.currentSelectValue=null!=ed.value?ed.value:ed.defaultValue,ed=W({},ed,{value:void 0});else if("option"===Vd){Rb=this.currentSelectValue;var gc=E(ed.children);if(null!=Rb){var Zb=null!=ed.value?ed.value+
"":gc;Qd=!1;if(Array.isArray(Rb))for(var kb=0;kb<Rb.length;kb++){if(""+Rb[kb]===Zb){Qd=!0;break}}else Qd=""+Rb===Zb;ed=W({selected:void 0,children:void 0},ed,{selected:Qd,children:gc})}}if(Qd=ed){if(kc[Vd]&&(null!=Qd.children||null!=Qd.dangerouslySetInnerHTML))throw Error(q(137,Vd));if(null!=Qd.dangerouslySetInnerHTML){if(null!=Qd.children)throw Error(q(60));if(!("object"===typeof Qd.dangerouslySetInnerHTML&&"__html"in Qd.dangerouslySetInnerHTML))throw Error(q(61));}if(null!=Qd.style&&"object"!==
typeof Qd.style)throw Error(q(62));}Qd=ed;Rb=this.makeStaticMarkup;gc=1===this.stack.length;Zb="\x3c"+nd.type;a:if(-1===Vd.indexOf("-"))kb="string"===typeof Qd.is;else switch(Vd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":kb=!1;break a;default:kb=!0}for(td in Qd)if(bd.call(Qd,td)){var nb=Qd[td];if(null!=nb){if("style"===td){var dc=void 0,uc="",Qc="";for(dc in nb)if(nb.hasOwnProperty(dc)){var Yc=
0===dc.indexOf("--"),Kd=nb[dc];if(null!=Kd){if(Yc)var ee=dc;else if(ee=dc,Tc.hasOwnProperty(ee))ee=Tc[ee];else{var ue=ee.replace(mb,"-$1").toLowerCase().replace(ac,"-ms-");ee=Tc[ee]=ue}uc+=Qc+ee+":";Qc=dc;Yc=null==Kd||"boolean"===typeof Kd||""===Kd?"":Yc||"number"!==typeof Kd||0===Kd||Pa.hasOwnProperty(Qc)&&Pa[Qc]?(""+Kd).trim():Kd+"px";uc+=Yc;Qc=";"}}nb=uc||null}dc=null;kb?Id.hasOwnProperty(td)||(dc=td,dc=b(dc)&&null!=nb?dc+'\x3d"'+(J(nb)+'"'):""):dc=p(td,nb);dc&&(Zb+=" "+dc)}}Rb||gc&&(Zb+=' data-reactroot\x3d""');
var td=Zb;Qd="";Xb.hasOwnProperty(Vd)?td+="/\x3e":(td+="\x3e",Qd="\x3c/"+nd.type+"\x3e");a:{Rb=ed.dangerouslySetInnerHTML;if(null!=Rb){if(null!=Rb.__html){Rb=Rb.__html;break a}}else if(Rb=ed.children,"string"===typeof Rb||"number"===typeof Rb){Rb=J(Rb);break a}Rb=null}null!=Rb?(ed=[],Kc.hasOwnProperty(Vd)&&"\n"===Rb.charAt(0)&&(td+="\n"),td+=Rb):ed=Dc(ed.children);nd=nd.type;id=null==id||"http://www.w3.org/1999/xhtml"===id?X(nd):"http://www.w3.org/2000/svg"===id&&"foreignObject"===nd?"http://www.w3.org/1999/xhtml":
id;this.stack.push({domNamespace:id,type:Vd,children:ed,childIndex:0,context:ge,footer:Qd});this.previousWasTextNode=!1;return td};return mc}();I.renderToNodeStream=function(){throw Error(q(207));};I.renderToStaticMarkup=function(mc,Bd){mc=new Ed(mc,!0,Bd);try{return mc.read(Infinity)}finally{mc.destroy()}};I.renderToStaticNodeStream=function(){throw Error(q(208));};I.renderToString=function(mc,Bd){mc=new Ed(mc,!1,Bd);try{return mc.read(Infinity)}finally{mc.destroy()}};I.version="17.0.2"};
shadow$provide[589]=function(va,V,Sa,I){Sa.exports=V(587)};
shadow$provide[590]=function(va,V,Sa,I){function q(){if(!rr&&(rr="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rr))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rr(nu)}function P(a,d=0){return(vm[a[d+0]]+vm[a[d+1]]+vm[a[d+2]]+vm[a[d+3]]+"-"+vm[a[d+4]]+vm[a[d+5]]+"-"+vm[a[d+6]]+vm[a[d+7]]+"-"+vm[a[d+8]]+vm[a[d+9]]+"-"+vm[a[d+10]]+vm[a[d+11]]+vm[a[d+12]]+vm[a[d+13]]+vm[a[d+14]]+
vm[a[d+15]]).toLowerCase()}function z(a){let d=0;var l=0;for(var H of a)d+=H.w*H.h,l=Math.max(l,H.w);a.sort((oa,Fa)=>Fa.h-oa.h);l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),l),h:Infinity}];let Y=H=0;for(const oa of a)for(a=l.length-1;0<=a;a--){var ka=l[a];if(!(oa.w>ka.w||oa.h>ka.h)){oa.x=ka.x;oa.y=ka.y;Y=Math.max(Y,oa.y+oa.h);H=Math.max(H,oa.x+oa.w);oa.w===ka.w&&oa.h===ka.h?(ka=l.pop(),a<l.length&&(l[a]=ka)):oa.h===ka.h?(ka.x+=oa.w,ka.w-=oa.w):(oa.w!==ka.w&&l.push({x:ka.x+oa.w,y:ka.y,w:ka.w-
oa.w,h:oa.h}),ka.y+=oa.h,ka.h-=oa.h);break}}return{w:H,h:Y,fill:d/(H*Y)||0}}function n(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function b(a,d,l=0){const H=[a[0]+d[0]/2,a[1]+d[1]/2],Y=Dd.rotWith(a,H,l),ka=Dd.rotWith(Dd.add(a,[d[0],0]),H,l),oa=Dd.rotWith(Dd.add(a,d),H,l);a=Dd.rotWith(Dd.add(a,[0,d[1]]),H,l);return[["top",[Y,ka]],["right",[ka,oa]],["bottom",[oa,a]],["left",[a,Y]]]}function r(a,d,l,H){const [Y,ka]=a,[oa,Fa]=d,[Qa,Wa]=l,[db,jb]=H;return Fa/oa!==(jb-Wa)/(db-Qa)&&(d=oa*
(jb-Wa)-Fa*(db-Qa),0!==d&&(a=((ka-Wa)*(db-Qa)-(Y-Qa)*(jb-Wa))/d,d=((ka-Wa)*oa-(Y-Qa)*Fa)/d,0<=a&&0<=d&&1>=d))?n("intersection",[Y+a*oa,ka+a*Fa]):n("no intersection")}function A(a,d,l,H,Y=0){return g(l,H,Y,a,d)}function C(a,d,l,H=0){const {minX:Y,minY:ka,width:oa,height:Fa}=l;return A(a,d,[Y,ka],[oa,Fa],H)}function x(a,d,l,H){var Y=Dd.sub(a,l);l=Dd.sub(H,l);d=Dd.sub(d,a);H=l[0]*Y[1]-l[1]*Y[0];Y=d[0]*Y[1]-d[1]*Y[0];l=l[1]*d[0]-l[0]*d[1];return 0===H||0===Y?n("coincident"):0===l?n("parallel"):0!==l&&
(H/=l,Y/=l,0<=H&&1>=H&&0<=Y&&1>=Y)?n("intersection",Dd.add(a,Dd.mul(d,H))):n("no intersection")}function J(a,d,l,H){var Y=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),ka=2*((d[0]-a[0])*(a[0]-l[0])+(d[1]-a[1])*(a[1]-l[1]));l=ka*ka-4*Y*(l[0]*l[0]+l[1]*l[1]+a[0]*a[0]+a[1]*a[1]-2*(l[0]*a[0]+l[1]*a[1])-H*H);if(0>l)return n("outside");if(0===l)return n("tangent");H=Math.sqrt(l);l=(-ka+H)/(2*Y);Y=(-ka-H)/(2*Y);if((0>l||1<l)&&(0>Y||1<Y))return 0>l&&0>Y||1<l&&1<Y?n("outside"):n("inside");ka=[];0<=l&&1>=
l&&ka.push(Dd.lrp(a,d,l));0<=Y&&1>=Y&&ka.push(Dd.lrp(a,d,Y));return n("intersection",...ka)}function p(a,d,l,H,Y,ka=0){if(0===H||0===Y||Dd.isEqual(a,d))return n("no intersection");H=0>H?H:-H;Y=0>Y?Y:-Y;a=Dd.sub(Dd.rotWith(a,l,-ka),l);d=Dd.sub(Dd.rotWith(d,l,-ka),l);var oa=Dd.sub(d,a),Fa=oa[0]*oa[0]/H/H+oa[1]*oa[1]/Y/Y;oa=2*a[0]*oa[0]/H/H+2*a[1]*oa[1]/Y/Y;const Qa=[];H=oa*oa-4*Fa*(a[0]*a[0]/H/H+a[1]*a[1]/Y/Y-1);0===H?Qa.push(-oa/2/Fa):0<H&&(H=Math.sqrt(H),Qa.push((-oa+H)/2/Fa),Qa.push((-oa-H)/2/Fa));
Fa=Qa.filter(Wa=>0<=Wa&&1>=Wa).map(Wa=>Dd.add(l,Dd.add(a,Dd.mul(Dd.sub(d,a),Wa)))).map(Wa=>Dd.rotWith(Wa,l,ka));return n("intersection",...Fa)}function f(a,d,l){const H=[];for(let Y=1;Y<l.length;Y++){const ka=x(a,d,l[Y-1],l[Y]);ka&&H.push(...ka.points)}return 0===H.length?n("no intersection"):n("intersection",...l)}function g(a,d,l,H,Y){return b(a,d,l).reduce((ka,[oa,[Fa,Qa]])=>{(Fa=r(H,Y,Fa,Qa))&&ka.push(n(oa,...Fa.points));return ka},[]).filter(ka=>ka.didIntersect)}function c(a,d,l,H){return b(a,
d).reduce((Y,[ka,[oa,Fa]])=>{(oa=x(l,H,oa,Fa))&&Y.push(n(ka,...oa.points));return Y},[]).filter(Y=>Y.didIntersect)}function u(a,d,l,H){return b(a,d).reduce((Y,[ka,[oa,Fa]])=>{(oa=J(oa,Fa,l,H))&&Y.push(qf(ne({},oa),{message:ka}));return Y},[]).filter(Y=>Y.didIntersect)}function v(a,d,l,H,Y,ka=0){return b(a,d).reduce((oa,[Fa,[Qa,Wa]])=>{(Qa=p(Qa,Wa,l,H,Y,ka))&&oa.push(qf(ne({},Qa),{message:Fa}));return oa},[]).filter(oa=>oa.didIntersect)}function L(a,d,l){return b(a,d).reduce((H,[Y,[ka,oa]])=>{ka=f(ka,
oa,l);ka.didIntersect&&H.push(n(Y,...ka.points));return H},[]).filter(H=>H.didIntersect)}function y(a,d,l){return b(a,d).reduce((H,[Y,[ka,oa]])=>{{const Fa=[];for(let Qa=1;Qa<l.length+1;Qa++){const Wa=x(ka,oa,l[Qa-1],l[Qa%l.length]);Wa&&Fa.push(...Wa.points)}ka=0===Fa.length?n("no intersection"):n("intersection",...l)}ka.didIntersect&&H.push(n(Y,...ka.points));return H},[]).filter(H=>H.didIntersect)}function t(a,d,l,H=0,Y,ka){return d===l?u(Y,ka,a,d):v(Y,ka,a,d,l,H)}function k(a,d,l){const {minX:H,
minY:Y,width:ka,height:oa}=a;return c([H,Y],[ka,oa],d,l)}function h(a){for(var d=arguments.length,l=Array(1<d?d-1:0),H=1;H<d;H++)l[H-1]=arguments[H];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(l.length?" "+l.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function K(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof va?va:"undefined"!==
typeof self?self:kx}function X(){Ca||h("Proxy not available")}function E(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function ha(a){return"function"===typeof a}function S(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function W(a){return null!==a&&"object"===typeof a}function D(a){if(!W(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return"function"===typeof a&&a.toString()===
eb}function aa(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function N(a,d,l){Op(a,d,{enumerable:!1,writable:!0,configurable:!0,value:l})}function Q(a,d,l){Op(a,d,{enumerable:!1,writable:!1,configurable:!0,value:l})}function B(a,d){var l="isMobX"+a;d.prototype[l]=!0;return function(H){return W(H)&&!0===H[l]}}function O(a){return a instanceof Map}function R(a){return a instanceof Set}function ba(a){var d=Object.keys(a);if(!oc)return d;
var l=Object.getOwnPropertySymbols(a);return l.length?[].concat(d,l.filter(function(H){return qq.propertyIsEnumerable.call(a,H)})):d}function Z(a){return null===a?null:"object"===typeof a?""+a:a}function F(a,d){return qq.hasOwnProperty.call(a,d)}function ia(a,d){for(var l=0;l<d.length;l++){var H=d[l];H.enumerable=H.enumerable||!1;H.configurable=!0;"value"in H&&(H.writable=!0);Object.defineProperty(a,H.key,H)}}function M(a,d,l){d&&ia(a.prototype,d);l&&ia(a,l);Object.defineProperty(a,"prototype",{writable:!1});
return a}function ca(){ca=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var l=arguments[d],H;for(H in l)Object.prototype.hasOwnProperty.call(l,H)&&(a[H]=l[H])}return a};return ca.apply(this,arguments)}function fa(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;da(a,d)}function da(a,d){da=Object.setPrototypeOf||function(l,H){l.__proto__=H;return l};return da(a,d)}function pa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function ya(a,d){if(a){if("string"===typeof a)return xa(a,d);var l=Object.prototype.toString.call(a).slice(8,-1);"Object"===l&&a.constructor&&(l=a.constructor.name);if("Map"===l||"Set"===l)return Array.from(a);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return xa(a,d)}}function xa(a,d){if(null==d||d>a.length)d=a.length;for(var l=0,H=Array(d);l<d;l++)H[l]=a[l];return H}function Ga(a,d){var l="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(l)return(l=
l.call(a)).next.bind(l);if(Array.isArray(a)||(l=ya(a))||d&&a&&"number"===typeof a.length){l&&(a=l);var H=0;return function(){return H>=a.length?{done:!0}:{done:!1,value:a[H++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ta(a){return Object.assign(function(d,l){Da(d,l,a)},a)}function Da(a,d,l){F(a,Od)||N(a,Od,ca({},a[Od]));l.annotationType_!==$g&&(a[Od][d]=l)}function Oa(a){F(a,
Od)||N(a,Od,ca({},a[Od]));return a[Od]}function Va(a,d,l){void 0===d&&(d=Gb);void 0===l&&(l=Gb);a=new qg(a);d!==Gb&&cd(cE,a,d,void 0);l!==Gb&&Nc(a,l);return a}function Ma(a,d,l){return hd(a)?a:Array.isArray(a)?Se.array(a,{name:l}):D(a)?Se.object(a,void 0,{name:l}):O(a)?Se.map(a,{name:l}):R(a)?Se.set(a,{name:l}):"function"!==typeof a||Yc(a)||Bc(a)?a:aa(a)?xu(a):wu(l,a)}function bb(a){return a}function ab(a,d){return{annotationType_:a,options_:d,make_:Na,extend_:na}}function Na(a,d,l,H){var Y;if(null!=
(Y=this.options_)&&Y.bound)return null===this.extend_(a,d,l,!1)?0:1;if(H===a.target_)return null===this.extend_(a,d,l,!1)?0:2;if(Yc(l.value))return 1;a=Aa(a,this,d,l,!1);Op(H,d,a);return 2}function na(a,d,l,H){l=Aa(a,this,d,l);return a.defineProperty_(d,l,H)}function Aa(a,d,l,H,Y){var ka,oa,Fa,Qa,Wa,db,jb;void 0===Y&&(Y=Of.safeDescriptors);H=H.value;if(null!=(ka=d.options_)&&ka.bound){var Mb;H=H.bind(null!=(Mb=a.proxy_)?Mb:a.target_)}return{value:Kc(null!=(oa=null==(Fa=d.options_)?void 0:Fa.name)?
oa:l.toString(),H,null!=(Qa=null==(Wa=d.options_)?void 0:Wa.autoAction)?Qa:!1,null!=(db=d.options_)&&db.bound?null!=(jb=a.proxy_)?jb:a.target_:void 0),configurable:Y?a.isPlainObject_:!0,enumerable:!1,writable:Y?!1:!0}}function qa(a,d){return{annotationType_:a,options_:d,make_:za,extend_:Ia}}function za(a,d,l,H){var Y;if(H===a.target_)return null===this.extend_(a,d,l,!1)?0:2;if(null!=(Y=this.options_)&&Y.bound&&(!F(a.target_,d)||!Bc(a.target_[d]))&&null===this.extend_(a,d,l,!1))return 0;if(Bc(l.value))return 1;
a=Ra(a,this,d,l,!1,!1);Op(H,d,a);return 2}function Ia(a,d,l,H){var Y;l=Ra(a,this,d,l,null==(Y=this.options_)?void 0:Y.bound);return a.defineProperty_(d,l,H)}function Ra(a,d,l,H,Y,ka){void 0===ka&&(ka=Of.safeDescriptors);d=H.value;Bc(d)||(d=xu(d));if(Y){var oa;d=d.bind(null!=(oa=a.proxy_)?oa:a.target_);d.isMobXFlow=!0}return{value:d,configurable:ka?a.isPlainObject_:!0,enumerable:!1,writable:ka?!1:!0}}function yb(a,d){return{annotationType_:a,options_:d,make_:hb,extend_:Kb}}function hb(a,d,l){return null===
this.extend_(a,d,l,!1)?0:1}function Kb(a,d,l,H){return a.defineComputedProperty_(d,ca({},this.options_,{get:l.get,set:l.set}),H)}function Xb(a,d){return{annotationType_:a,options_:d,make_:kc,extend_:Pa}}function kc(a,d,l){return null===this.extend_(a,d,l,!1)?0:1}function Pa(a,d,l,H){var Y,ka;return a.defineObservableProperty_(d,l.value,null!=(Y=null==(ka=this.options_)?void 0:ka.enhancer)?Y:Ma,H)}function lb(a){return{annotationType_:"true",options_:a,make_:mb,extend_:ac}}function mb(a,d,l,H){var Y,
ka;if(l.get)return Df.make_(a,d,l,H);if(l.set){l=Kc(d.toString(),l.set);if(H===a.target_)return null===a.defineProperty_(d,{configurable:Of.safeDescriptors?a.isPlainObject_:!0,set:l})?0:2;Op(H,d,{configurable:!0,set:l});return 2}if(H!==a.target_&&"function"===typeof l.value){var oa;if(aa(l.value)){var Fa;return(null!=(Fa=this.options_)&&Fa.autoBind?xu.bound:xu).make_(a,d,l,H)}return(null!=(oa=this.options_)&&oa.autoBind?wu.bound:wu).make_(a,d,l,H)}oa=!1===(null==(Y=this.options_)?void 0:Y.deep)?Se.ref:
Se;if("function"===typeof l.value&&null!=(ka=this.options_)&&ka.autoBind){var Qa;l.value=l.value.bind(null!=(Qa=a.proxy_)?Qa:a.target_)}return oa.make_(a,d,l,H)}function ac(a,d,l,H){var Y,ka;if(l.get)return Df.extend_(a,d,l,H);if(l.set)return a.defineProperty_(d,{configurable:Of.safeDescriptors?a.isPlainObject_:!0,set:Kc(d.toString(),l.set)},H);if("function"===typeof l.value&&null!=(Y=this.options_)&&Y.autoBind){var oa;l.value=l.value.bind(null!=(oa=a.proxy_)?oa:a.target_)}return(!1===(null==(ka=
this.options_)?void 0:ka.deep)?Se.ref:Se).extend_(a,d,l,H)}function Dc(a){if(!0===a.deep)var d=Ma;else{if(!1===a.deep)a=bb;else{a=a.defaultDecorator;var l;a=a?null!=(d=null==(l=a.options_)?void 0:l.enhancer)?d:Ma:Ma}d=a}return d}function Zc(a,d,l){if(S(d))Da(a,d,re);else return hd(a)?a:D(a)?Se.object(a,d,l):Array.isArray(a)?Se.array(a,d):O(a)?Se.map(a,d):R(a)?Se.set(a,d):"object"===typeof a&&null!==a?a:Se.box(a,d)}function Kc(a,d,l,H){function Y(){a:{var ka=H||this,oa=arguments,Fa=Of.trackingDerivation,
Qa=!l||!Fa;ed();var Wa=Of.allowStateChanges;Qa&&(mc(),Wa=yc(!0));var db=Bd(!0),jb=UD++,Mb=Kv;Kv=jb;try{var Ub=d.apply(ka,oa);break a}catch(lc){var Nb=lc;throw lc;}finally{Kv!==jb&&h(30),Kv=Mb,void 0!==Nb&&(Of.suppressReactionErrors=!0),Of.allowStateChanges=Wa,Of.allowStateReads=db,Qd(),Qa&&(Of.trackingDerivation=Fa),Of.suppressReactionErrors=!1}Ub=void 0}return Ub}void 0===l&&(l=!1);Y.isMobxAction=!0;VD&&(Cz.value=a,Object.defineProperty(Y,"name",Cz));return Y}function Fb(a,d){a=yc(a);try{return d()}finally{Of.allowStateChanges=
a}}function yc(a){var d=Of.allowStateChanges;Of.allowStateChanges=a;return d}function Tc(a){switch(a.dependenciesState_){case ek.UP_TO_DATE_:return!1;case ek.NOT_TRACKING_:case ek.STALE_:return!0;case ek.POSSIBLY_STALE_:for(var d=Bd(!0),l=mc(),H=a.observing_,Y=H.length,ka=0;ka<Y;ka++){var oa=H[ka];if(vu(oa)){if(Of.disableErrorBoundaries)oa.get();else try{oa.get()}catch(Fa){return Of.trackingDerivation=l,Of.allowStateReads=d,!0}if(a.dependenciesState_===ek.STALE_)return Of.trackingDerivation=l,Of.allowStateReads=
d,!0}}nd(a);Of.trackingDerivation=l;Of.allowStateReads=d;return!1}}function bd(a,d,l){var H=Bd(!0);nd(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++Of.runId;var Y=Of.trackingDerivation;Of.trackingDerivation=a;Of.inBatch++;if(!0===Of.disableErrorBoundaries)var ka=d.call(l);else try{ka=d.call(l)}catch(db){ka=new Ds(db)}Of.inBatch--;Of.trackingDerivation=Y;var oa=a.observing_;d=a.observing_=a.newObserving_;l=ek.UP_TO_DATE_;Y=0;for(var Fa=a.unboundDepsCount_,Qa=0;Qa<
Fa;Qa++){var Wa=d[Qa];0===Wa.diffValue_&&(Wa.diffValue_=1,Y!==Qa&&(d[Y]=Wa),Y++);Wa.dependenciesState_>l&&(l=Wa.dependenciesState_)}d.length=Y;a.newObserving_=null;for(Fa=oa.length;Fa--;)Qa=oa[Fa],0===Qa.diffValue_&&id(Qa,a),Qa.diffValue_=0;for(;Y--;)oa=d[Y],1===oa.diffValue_&&(oa.diffValue_=0,Fa=a,oa.observers_.add(Fa),oa.lowestObserverState_>Fa.dependenciesState_&&(oa.lowestObserverState_=Fa.dependenciesState_));l!==ek.UP_TO_DATE_&&(a.dependenciesState_=l,a.onBecomeStale_());Of.allowStateReads=
H;return ka}function Id(a){var d=a.observing_;a.observing_=[];for(var l=d.length;l--;)id(d[l],a);a.dependenciesState_=ek.NOT_TRACKING_}function Ed(a){var d=mc();try{return a()}finally{Of.trackingDerivation=d}}function mc(){var a=Of.trackingDerivation;Of.trackingDerivation=null;return a}function Bd(a){var d=Of.allowStateReads;Of.allowStateReads=a;return d}function nd(a){if(a.dependenciesState_!==ek.UP_TO_DATE_){a.dependenciesState_=ek.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
ek.UP_TO_DATE_}}function ge(){(Of.pendingReactions.length||Of.inBatch||Of.isRunningReactions)&&h(36);Dz=!0;if(Mv){var a=K();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);Of=new Lv}}function id(a,d){a.observers_["delete"](d);0===a.observers_.size&&Vd(a)}function Vd(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,Of.pendingUnobservations.push(a))}function ed(){Of.inBatch++}function Qd(){if(0===--Of.inBatch){0<Of.inBatch||Of.isRunningReactions||Nv(nb);for(var a=Of.pendingUnobservations,
d=0;d<a.length;d++){var l=a[d];l.isPendingUnobservation_=!1;0===l.observers_.size&&(l.isBeingObserved_&&(l.isBeingObserved_=!1,l.onBUO()),l instanceof uu&&l.suspend_())}Of.pendingUnobservations=[]}}function Rb(a){var d=Of.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&Of.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<Of.inBatch&&Vd(a);return!1}
function gc(a){a.lowestObserverState_!==ek.STALE_&&(a.lowestObserverState_=ek.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===ek.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=ek.STALE_}))}function Zb(a){a.lowestObserverState_!==ek.STALE_&&(a.lowestObserverState_=ek.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===ek.POSSIBLY_STALE_?d.dependenciesState_=ek.STALE_:d.dependenciesState_===ek.UP_TO_DATE_&&(a.lowestObserverState_=ek.UP_TO_DATE_)}))}function kb(a){a.lowestObserverState_===
ek.UP_TO_DATE_&&(a.lowestObserverState_=ek.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===ek.UP_TO_DATE_&&(d.dependenciesState_=ek.POSSIBLY_STALE_,d.onBecomeStale_())}))}function nb(){Of.isRunningReactions=!0;for(var a=Of.pendingReactions,d=0;0<a.length;){++d===ZD&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var l=a.splice(0),H=0,Y=l.length;H<Y;H++)l[H].runReaction_()}Of.isRunningReactions=!1}function dc(a){var d=Nv;Nv=function(l){return a(function(){return d(l)})}}
function uc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Qc(a){return function(d,l){if(ha(d))return Kc(d.name||"\x3cunnamed action\x3e",d,a);if(ha(l))return Kc(d,l,a);if(S(l))return Da(d,l,a?Gz:Fz);if(S(d))return Ta(ab(a?"autoAction":Ez,{name:d,autoAction:a}))}}function Yc(a){return ha(a)&&!0===a.isMobxAction}function Kd(a,d){function l(){a(Qa)}var H,Y;void 0===d&&(d=la);var ka=null!=(H=null==(Y=d)?void 0:Y.name)?H:"Autorun";if(d.scheduler||d.delay){var oa=
ee(d),Fa=!1;var Qa=new xt(ka,function(){Fa||(Fa=!0,oa(function(){Fa=!1;Qa.isDisposed_||Qa.track(l)}))},d.onError,d.requiresObservable)}else Qa=new xt(ka,function(){this.track(l)},d.onError,d.requiresObservable);Qa.schedule_();return Qa.getDisposer_()}function ee(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:bE}function ue(a,d,l){function H(){db=!1;if(!Nb.isDisposed_){var lc=!1;Nb.track(function(){var xc=Fb(!1,function(){return a(Nb)});lc=Wa||!Ub(jb,xc);Mb=jb;
jb=xc});Wa&&l.fireImmediately?oa(jb,Mb,Nb):!Wa&&lc&&oa(jb,Mb,Nb);Wa=!1}}var Y;void 0===l&&(l=la);var ka=null!=(Y=l.name)?Y:"Reaction",oa=xg(ka,l.onError?td(l.onError,d):d),Fa=!l.scheduler&&!l.delay,Qa=ee(l),Wa=!0,db=!1,jb,Mb,Ub=l.compareStructural?nf.structural:l.equals||nf["default"],Nb=new xt(ka,function(){Wa||Fa?H():db||(db=!0,Qa(H))},l.onError,l.requiresObservable);Nb.schedule_();return Nb.getDisposer_()}function td(a,d){return function(){try{return d.apply(this,arguments)}catch(l){a.call(this,
l)}}}function Nc(a,d,l){return cd(dE,a,d,l)}function cd(a,d,l,H){var Y="function"===typeof H?Jg(d,l):Jg(d),ka=ha(H)?H:l,oa=a+"L";Y[oa]?Y[oa].add(ka):Y[oa]=new Set([ka]);return function(){var Fa=Y[oa];Fa&&(Fa["delete"](ka),0===Fa.size&&delete Y[oa])}}function Fc(a){!0===a.isolateGlobalState&&ge();var d=a.useProxies,l=a.enforceActions;void 0!==d&&(Of.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(Of.verifyProxies=!0);void 0!==l&&(d="always"===l?"always":"observed"===
l,Of.enforceActions=d,Of.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(H){H in a&&(Of[H]=!!a[H])});Of.allowStateReads=!Of.observableRequiresReaction;a.reactionScheduler&&dc(a.reactionScheduler)}function pc(a,d,l,H){var Y=$c(d),ka=yd(a,H)[de];ed();try{Hc(Y).forEach(function(oa){ka.extend_(oa,Y[oa],l?oa in l?l[oa]:!0:!0)})}finally{Qd()}return a}function Qf(a){var d=
{name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(Qf));return d}function Wb(){this.message="FLOW_CANCELLED"}function Bc(a){return!0===(null==a?void 0:a.isMobXFlow)}function hd(a,d){return a?void 0!==d?se(a)?a[de].values_.has(d):!1:se(a)||!!a[de]||Ph(a)||Ov(a)||vu(a):!1}function fe(a){if(se(a))return a[de].ownKeys_();h(38)}function Cf(a,d,l){a.set(d,l);return l}function Ie(a,d){if(null==a||"object"!==typeof a||a instanceof Date||!hd(a))return a;
if(XD(a)||vu(a))return Ie(a.get(),d);if(d.has(a))return d.get(a);if(ib(a)){var l=Cf(d,a,Array(a.length));a.forEach(function(oa,Fa){l[Fa]=Ie(oa,d)});return l}if(Es(a)){var H=Cf(d,a,new Set);a.forEach(function(oa){H.add(Ie(oa,d))});return H}if(Fr(a)){var Y=Cf(d,a,new Map);a.forEach(function(oa,Fa){Y.set(Fa,Ie(oa,d))});return Y}var ka=Cf(d,a,{});fe(a).forEach(function(oa){qq.propertyIsEnumerable.call(a,oa)&&(ka[oa]=Ie(a[oa],d))});return ka}function Ab(a,d){return Ie(a,new Map)}function zb(){h("trace() is not available in production builds");
for(var a=!1,d=arguments.length,l=Array(d),H=0;H<d;H++)l[H]=arguments[H];"boolean"===typeof l[l.length-1]&&(a=l.pop());a:{switch(l.length){case 0:d=Of.trackingDerivation;break a;case 1:d=Jg(l[0]);break a;case 2:d=Jg(l[0],l[1]);break a}d=void 0}if(!d)return h("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===wt.NONE&&console.log("[mobx.trace] '"+d.name_+"' tracing enabled");d.isTracing_=a?
wt.BREAK:wt.LOG}function xd(a,d){void 0===d&&(d=void 0);ed();try{return a.apply(d)}finally{Qd()}}function ce(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function Vc(a,d){var l=a.interceptors_||(a.interceptors_=[]);l.push(d);return E(function(){var H=l.indexOf(d);-1!==H&&l.splice(H,1)})}function qc(a,d){var l=mc();try{var H=[].concat(a.interceptors_||[]);a=0;for(var Y=H.length;a<Y&&((d=H[a](d))&&!d.type&&h(14),d);a++);return d}finally{Of.trackingDerivation=l}}function tf(a){return void 0!==
a.changeListeners_&&0<a.changeListeners_.length}function Rf(a,d){var l=a.changeListeners_||(a.changeListeners_=[]);l.push(d);return E(function(){var H=l.indexOf(d);-1!==H&&l.splice(H,1)})}function He(a,d){var l=mc();if(a=a.changeListeners_){a=a.slice();for(var H=0,Y=a.length;H<Y;H++)a[H](d);Of.trackingDerivation=l}}function Qg(a,d,l){var H=yd(a,l)[de];ed();try{var Y;null!=(Y=d)?Y:d=Oa(a);Hc(d).forEach(function(ka){return H.make_(ka,d[ka])})}finally{Qd()}return a}function ob(a,d,l,H){void 0===l&&(l=
"ObservableArray");void 0===H&&(H=!1);X();d=new px(l,d,H,!1);Q(d.values_,de,d);l=new Proxy(d.values_,hE);d.proxy_=l;a&&a.length&&(H=yc(!0),d.spliceWithArray_(0,0,a),Of.allowStateChanges=H);return l}function wb(a,d){"function"===typeof Array.prototype[a]&&(Pv[a]=d(a))}function $a(a){return function(){var d=this[de];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function Db(a){return function(d,l){var H=this,Y=this[de];Y.atom_.reportObserved();return Y.dehanceValues_(Y.values_)[a](function(ka,
oa){return d.call(l,ka,oa,H)})}}function Cb(a){return function(){var d=this,l=this[de];l.atom_.reportObserved();l=l.dehanceValues_(l.values_);var H=arguments[0];arguments[0]=function(Y,ka,oa){return H(Y,ka,oa,d)};return l[a].apply(l,arguments)}}function ib(a){return W(a)&&iE(a[de])}function ad(a){if(O(a)||Fr(a))return a;if(Array.isArray(a))return new Map(a);if(D(a)){var d=new Map,l;for(l in a)d.set(l,a[l]);return d}return h(21,a)}function yd(a,d){var l;if(F(a,de))return a;var H=null!=(l=null==d?void 0:
d.name)?l:"ObservableObject";l=Lz;var Y=new Map;H=String(H);var ka;var oa=d?null!=(ka=d.defaultDecorator)?ka:lb(d):void 0;d=new l(a,Y,H,oa);N(a,de,d);return a}function Zd(a){return Kz[a]||(Kz[a]={get:function(){return this[de].getObservablePropValue_(a)},set:function(d){return this[de].setObservablePropValue_(a,d)}})}function se(a){return W(a)?pE(a[de]):!1}function af(a){return{enumerable:!1,configurable:!0,get:function(){return this[de].get_(a)},set:function(d){this[de].set_(a,d)}}}function ze(a){if(a>
qx){for(var d=qx;d<a+100;d++)Op(rx.prototype,""+d,af(d));qx=a}}function uf(a,d,l){return new rx(a,d,l)}function Jg(a,d){if("object"===typeof a&&null!==a){if(ib(a))return void 0!==d&&h(23),a[de].atom_;if(Es(a))return a[de];if(Fr(a)){if(void 0===d)return a.keysAtom_;var l=a.data_.get(d)||a.hasMap_.get(d);l||h(25,d,ub(a));return l}if(se(a)){if(!d)return h(26);(l=a[de].values_.get(d))||h(27,d,ub(a));return l}if(Ph(a)||vu(a)||Ov(a))return a}else if(ha(a)&&Ov(a[de]))return a[de];h(28)}function rg(a,d){a||
h(29);if(void 0!==d)return rg(Jg(a,d));if(Ph(a)||vu(a)||Ov(a)||Fr(a)||Es(a))return a;if(a[de])return a[de];h(24,a)}function ub(a,d){if(void 0!==d)a=Jg(a,d);else{if(Yc(a))return a.name;a=se(a)||Fr(a)||Es(a)?rg(a):Jg(a)}return a.name_}function ta(a,d,l){void 0===l&&(l=-1);return ra(a,d,l)}function ra(a,d,l,H,Y){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var ka=typeof a;if("function"!==ka&&"object"!==ka&&"object"!=typeof d)return!1;ka=Nz.call(a);if(ka!==Nz.call(d))return!1;
switch(ka){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=l&&l++}a=Ha(a);d=Ha(d);ka="[object Array]"===ka;if(!ka){if("object"!=typeof a||"object"!=typeof d)return!1;var oa=a.constructor,Fa=d.constructor;if(oa!==
Fa&&!(ha(oa)&&oa instanceof oa&&ha(Fa)&&Fa instanceof Fa)&&"constructor"in a&&"constructor"in d)return!1}if(0===l)return!1;0>l&&(l=-1);H=H||[];Y=Y||[];for(oa=H.length;oa--;)if(H[oa]===a)return Y[oa]===d;H.push(a);Y.push(d);if(ka){oa=a.length;if(oa!==d.length)return!1;for(;oa--;)if(!ra(a[oa],d[oa],l-1,H,Y))return!1}else{ka=Object.keys(a);oa=ka.length;if(Object.keys(d).length!==oa)return!1;for(;oa--;)if(Fa=ka[oa],!F(d,Fa)||!ra(a[Fa],d[Fa],l-1,H,Y))return!1}H.pop();Y.pop();return!0}function Ha(a){return ib(a)?
a.slice():O(a)||Fr(a)||R(a)||Es(a)?Array.from(a.entries()):a}function Za(a){a[Symbol.iterator]=Hb;return a}function Hb(){return this}function sc(a,d){const l=new Set(d),H=Object.values(a),Y=new Set(H.filter(ka=>l.has(ka.toId)||l.has(ka.fromId)));a=Y.size;for(d=-1;0!==d;)Y.forEach(ka=>{ka=ka.fromId;for(const oa of H)oa.fromId===ka&&Y.add(oa),oa.toId===ka&&Y.add(oa)}),d=Y.size-a,a=Y.size;return Array.from(Y.values())}function Oc(a,d,l,H,Y,ka,oa,Fa){if(Y=d.getBindingPoint(Y,ka,oa,Fa))return{id:H,type:"line",
fromId:a.id,toId:d.id,handleId:l,point:le.toFixed(Y.point),distance:Y.distance}}function fd(a,d){const l=a.getCenter(),H=d.getCenter();var Y=ml();Y=qf(ne({},yu.defaultProps),{id:Y,type:yu.id,parentId:a.props.parentId,point:l});a=Oc(Y,a,"start",ml(),l,l,le.uni(le.sub(H,l)),!1);d=Oc(Y,d,"end",ml(),H,H,le.uni(le.sub(l,H)),!1);return a&&d?(Y.handles.start.point=[0,0],Y.handles.end.point=le.sub(H,l),Y.handles.start.bindingId=a.id,Y.handles.end.bindingId=d.id,[Y,[a,d]]):null}function Ce(){return new yE}
function bf(){return new WeakMap}function Me(a){if(!a)return zx(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:zx(a);if(~wE.call(d).indexOf("[native code]"))try{return new d}catch(l){}return zx(a)}function kg(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function Vf(a){return a.flags}function Ng(a){a=xE.call(a);return a.substring(8,a.length-1)}function Wf(a){return a[Symbol.toStringTag]||Ng(a)}function jh(a){return zA(a).concat(Ax(a))}
function Ei(a,d,l){for(var H=FE(a),Y=0,ka=H.length,oa,Fa;Y<ka;++Y)if(oa=H[Y],"callee"!==oa&&"caller"!==oa)if(Fa=DE(a,oa)){Fa.get||Fa.set||(Fa.value=l.copier(Fa.value,l));try{CE(d,oa,Fa)}catch(Qa){d[oa]=Fa.value}}else d[oa]=l.copier(a[oa],l);return d}function Bh(a,d){var l=new d.Constructor;d.cache.set(a,l);a.forEach(function(H,Y){l.set(Y,d.copier(H,d))});return l}function lg(a,d){var l=Me(d.prototype);d.cache.set(a,l);for(var H in a)BA.call(a,H)&&(l[H]=d.copier(a[H],d));return l}function si(a,d){var l=
Me(d.prototype);d.cache.set(a,l);for(var H in a)BA.call(a,H)&&(l[H]=d.copier(a[H],d));H=Ax(a);for(var Y=0,ka=H.length,oa;Y<ka;++Y)oa=H[Y],EE.call(a,oa)&&(l[oa]=d.copier(a[oa],d));return l}function sk(a,d){return new d.Constructor(a.valueOf())}function ej(a,d){return a}function ik(a,d){var l=new d.Constructor;d.cache.set(a,l);a.forEach(function(H){l.add(d.copier(H,d))});return l}function Fi(a){function d(ka,oa){oa.prototype=oa.Constructor=void 0;if(!ka||"object"!==typeof ka)return ka;if(oa.cache.has(ka))return oa.cache.get(ka);
oa.prototype=ka.__proto__||HE(ka);oa.Constructor=oa.prototype&&oa.prototype.constructor;if(!oa.Constructor||oa.Constructor===Object)return Y(ka,oa);if(GE(ka))return H(ka,oa);var Fa=l[BE(ka)];return Fa?Fa(ka,oa):"function"===typeof ka.then?ka:Y(ka,oa)}a=Bx({},DA,a);var l={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,Boolean:sk,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,
Int32Array:a.arrayBuffer,Map:a.map,Number:sk,Object:a.object,Promise:ej,RegExp:a.regExp,Set:a.set,String:sk,WeakMap:ej,WeakSet:ej,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},H=l.Array,Y=l.Object;return function(ka){return d(ka,{Constructor:void 0,cache:zE(),copier:d,prototype:void 0})}}function bl(a,d){return(0,LE.default)(a,d,{arrayMerge:(l,H,Y)=>H})}function $l(a,d,l,H=!1){const [Y,ka]=d,[oa,Fa]=l;a=oa+(a-
Y)/(ka-Y)*(Fa-oa);return H?oa<Fa?Math.max(Math.min(a,Fa),oa):Math.max(Math.min(a,oa),Fa):a}function kj(a,d){return new Promise((l,H)=>{if(d){const Y=document.createElement("video");Y.addEventListener("loadedmetadata",function(){l([this.videoWidth,this.videoHeight])},!1);Y.src=a}else{const Y=new Image;Y.onload=()=>l([Y.width,Y.height]);Y.src=a;Y.onerror=ka=>H(ka)}})}function Xi(a){return Object.values(js).includes(a)}function dh(a,d){return Xi(a)||null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:
a}function Al(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);
return a}function Nj(a,d,l=0){var H,Y,ka;if(!a)return[16,32];let oa;oa="string"===typeof d?d:`${null!=(H=d.fontStyle)?H:"normal"} ${null!=(Y=d.fontVariant)?Y:"normal"} ${null!=(ka=d.fontWeight)?ka:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!Cx.has(`${a}-${oa}-${l}`)){if(!Ir)return[10,10];Ir.parentNode||document.body.appendChild(Ir);Ir.innerHTML=`${a}&#8203;`;Ir.style.font=oa;Ir.style.padding=l+"px";d=Ir.getBoundingClientRect();Cx.set(`${a}-${oa}-${l}`,[Math.ceil(d.width||
1),Math.ceil(d.height||1)])}return Cx.get(`${a}-${oa}-${l}`)}function Ok(a){try{if("string"!==typeof a||!Fg.test(a))throw TypeError("Invalid UUID");let d;const l=new Uint8Array(16);l[0]=(d=parseInt(a.slice(0,8),16))>>>24;l[1]=d>>>16&255;l[2]=d>>>8&255;l[3]=d&255;l[4]=(d=parseInt(a.slice(9,13),16))>>>8;l[5]=d&255;l[6]=(d=parseInt(a.slice(14,18),16))>>>8;l[7]=d&255;l[8]=(d=parseInt(a.slice(19,23),16))>>>8;l[9]=d&255;l[10]=(d=parseInt(a.slice(24,36),16))/1099511627776&255;l[11]=d/4294967296&255;l[12]=
d>>>24&255;l[13]=d>>>16&255;l[14]=d>>>8&255;l[15]=d&255;return!0}catch(d){return!1}}function cl(a,d=0,l){let H;return function(...Y){null==l?void 0:l(...Y);clearTimeout(H);H=setTimeout(()=>a.apply(Y),d)}}function Kh(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function Hf(){var a,d,l;return(null==(l=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:l.call(d,"ui/developer-mode?"))||!1}function gg(a){return!!a}function Pl(a=0){return new Promise(d=>
setTimeout(d,a))}function an(a="noid"){Dx[a]||(Dx[a]=GA.createContext({}));return Dx[a]}function ph(a="noid"){return GA.useContext(an(a))}function Zj(a){const {callbacks:d}=ph(),l=FA.useRef(-1);return FA.useMemo(()=>{const H=Y=>{var ka,oa;const {order:Fa=0}=Y;if(!Fa){var Qa=Y.target;Qa.removeEventListener("pointerup",H);Qa.releasePointerCapture(Y.pointerId);null==(ka=d.onPointerUp)?void 0:ka.call(d,{type:"selection",handle:a,order:Fa},Y);ka=Date.now();Qa=ka-l.current;300<Qa?l.current=ka:300>=Qa&&
(null==(oa=d.onDoubleClick)?void 0:oa.call(d,{type:"selection",handle:a,order:Fa},Y),l.current=-1);Y.order=Fa+1}};return{onPointerDown:Y=>{var ka;const {order:oa=0}=Y;if(!oa){var Fa=Qk(Y.currentTarget);Fa.setPointerCapture(Y.pointerId);Fa.addEventListener("pointerup",H);null==(ka=d.onPointerDown)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},Y);Y.order=oa+1}},onPointerMove:Y=>{var ka;const {order:oa=0}=Y;oa||(null==(ka=d.onPointerMove)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},
Y),Y.order=oa+1)},onPointerEnter:Y=>{var ka;const {order:oa=0}=Y;oa||(null==(ka=d.onPointerEnter)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},Y),Y.order=oa+1)},onPointerLeave:Y=>{var ka;const {order:oa=0}=Y;oa||(null==(ka=d.onPointerLeave)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},Y),Y.order=oa+1)},onKeyDown:Y=>{var ka;null==(ka=d.onKeyDown)?void 0:ka.call(d,{type:"selection",handle:a,order:-1},Y)},onKeyUp:Y=>{var ka;null==(ka=d.onKeyUp)?void 0:ka.call(d,{type:"selection",handle:a,
order:-1},Y)}}},[d])}function Qk(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return Qk(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function Rk(a,d,l){const H=Au.useRef(!1),Y=Au.useCallback(()=>{var ka;if(H.current){const oa=null==(ka=a.current)?void 0:ka.getBoundingClientRect();oa&&(ka={minX:oa.left,maxX:oa.left+oa.width,minY:oa.top,maxY:oa.top+oa.height,width:oa.width,height:oa.height},d.updateBounds(ka),null==l?void 0:
l(ka))}else H.current=!0},[a,l]);Au.useEffect(()=>{const ka=a.current?OE(a.current):document,oa=cl(Y,100);ka.addEventListener("scroll",oa);window.addEventListener("resize",oa);return()=>{ka.removeEventListener("scroll",oa);window.removeEventListener("resize",oa)}},[]);Au.useLayoutEffect(()=>{const ka=new ResizeObserver(oa=>{oa[0].contentRect&&Y()});a.current&&ka.observe(a.current);return()=>{ka.disconnect()}},[a]);Au.useEffect(()=>{Y();setTimeout(()=>{var ka,oa;null==(oa=null==(ka=a.current)?void 0:
ka.querySelector(".tl-canvas"))?void 0:oa.focus()})},[a])}function am(a,d){return Object.keys(d).reduce((l,H)=>{const Y=d[H];return Y?l+`${`--${a}-${H}`}: ${Y};
`:l},"")}function ti(a,d,l=".logseq-tldraw"){Ex.useLayoutEffect(()=>{const H=document.createElement("style"),Y=am(a,d);H.setAttribute("id",`${a}-theme`);H.setAttribute("data-selector",l);H.innerHTML=`
        ${l} {
          ${Y}
        }
      `;document.head.appendChild(H);return()=>{H&&document.head.contains(H)&&document.head.removeChild(H)}},[a,d,l])}function Cl(a,d){Ex.useLayoutEffect(()=>{if(Fx.get(a))return()=>{};const l=document.createElement("style");l.innerHTML=d;l.setAttribute("id",a);document.head.appendChild(l);Fx.set(a,l);return()=>{l&&document.head.contains(l)&&(document.head.removeChild(l),Fx.delete(a))}},[a,d])}function tk(a,d){const l=Ex.useMemo(()=>ne(ne({},PE),a),[a]);ti("tl",l,d);Cl("tl-canvas",QE)}function uk(a=
"noid"){Gx[a]||(Gx[a]=IA.createContext({}));return Gx[a]}function ff(a="noid"){return IA.useContext(uk(a))}function sg(){const a=ff(),{callbacks:d}=ph(),l=HA.useRef(-1);return HA.useMemo(()=>({onPointerDown:H=>{var Y,ka,oa;const {order:Fa=0}=H;Fa||(null==(Y=H.currentTarget)?void 0:Y.setPointerCapture(H.pointerId));H.isPrimary&&(null==(ka=d.onPointerDown)?void 0:ka.call(d,{type:"canvas",order:Fa},H),Y=Date.now(),ka=Y-l.current,300<ka?l.current=Y:300>=ka&&(null==(oa=d.onDoubleClick)?void 0:oa.call(d,
{type:"canvas",order:Fa},H),l.current=-1))},onPointerMove:H=>{var Y;const {order:ka=0}=H;null==(Y=d.onPointerMove)?void 0:Y.call(d,{type:"canvas",order:ka},H)},onPointerUp:H=>{var Y,ka;const {order:oa=0}=H;oa||(null==(Y=H.currentTarget)?void 0:Y.releasePointerCapture(H.pointerId));null==(ka=d.onPointerUp)?void 0:ka.call(d,{type:"canvas",order:oa},H)},onPointerEnter:H=>{var Y;const {order:ka=0}=H;null==(Y=d.onPointerEnter)?void 0:Y.call(d,{type:"canvas",order:ka},H)},onPointerLeave:H=>{var Y;const {order:ka=
0}=H;null==(Y=d.onPointerLeave)?void 0:Y.call(d,{type:"canvas",order:ka},H)},onDrop:H=>yi(this,null,function*(){H.preventDefault();"clientX"in H&&a.drop(H.dataTransfer,[H.clientX,H.clientY])}),onDragOver:H=>{H.preventDefault()},onTouchEnd:H=>{let Y=a.selectedTool.id;"pencil"!==Y&&"highlighter"!==Y||H.preventDefault()}}),[d])}function lj(a,d,l){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*l):a*d*l/(d+l*a)}function Th(a,d,l,H=.15){return 0===H?Math.max(d,Math.min(a,l)):a<d?-lj(d-a,l-d,H)+d:a>l?
+lj(a-l,l-d,H)+l:a}function Yi(a,[d,l],[H,Y]){const [[ka,oa],[Fa,Qa]]=a;return[Th(d,ka,oa,H),Th(l,Fa,Qa,Y)]}function fi(a,d,l){d in a?Object.defineProperty(a,d,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[d]=l;return a}function jk(a,d){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(a);d&&(H=H.filter(function(Y){return Object.getOwnPropertyDescriptor(a,Y).enumerable}));l.push.apply(l,H)}return l}function Kg(a){for(var d=1;d<arguments.length;d++){var l=
null!=arguments[d]?arguments[d]:{};d%2?jk(Object(l),!0).forEach(function(H){fi(a,H,l[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):jk(Object(l)).forEach(function(H){Object.defineProperty(a,H,Object.getOwnPropertyDescriptor(l,H))})}return a}function Uh(a){return a?a[0].toUpperCase()+a.slice(1):""}function Cj(a=!1,d){return a&&!RE.includes(d)}function Sk(a,d="",l=!1){const H=JA[a];d=H?H[d]||d:d;return"on"+Uh(a)+Uh(d)+(Cj(l,d)?"Capture":"")}function xf(a){a=
a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var l=SE.includes(a)?"capturecapture":"capture";(l=!!~a.indexOf(l))&&(a=a.replace("capture",""));return{device:a,capture:l,passive:d}}function Si(a,d=""){const l=JA[a];return a+(l?l[d]||d:d)}function Lh(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function dl(a){return Array.from(a.touches).filter(d=>{var l,H;return d.target===a.currentTarget||(null===(l=a.currentTarget)||void 0===
l?void 0:null===(H=l.contains)||void 0===H?void 0:H.call(l,d.target))})}function vk(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function Ql(a,d){const l=d.clientX-a.clientX,H=d.clientY-a.clientY;return{angle:-(180*Math.atan2(l,H))/Math.PI,distance:Math.hypot(l,H),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function Nm(a){return dl(a).map(d=>d.identifier)}function Ti(a,d){const [l,H]=Array.from(a.touches).filter(Y=>d.includes(Y.identifier));
return Ql(l,H)}function Rl(a){const d=vk(a);return"touches"in a?d.identifier:d.pointerId}function Oj(a){a=vk(a);return[a.clientX,a.clientY]}function Gi(a){let {deltaX:d,deltaY:l,deltaMode:H}=a;1===H?(d*=40,l*=40):2===H&&(d*=800,l*=800);return[d,l]}function qh(a,...d){return"function"===typeof a?a(...d):a}function Ui(){}function mj(...a){return 0===a.length?Ui:1===a.length?a[0]:function(){let d;for(const l of a)d=l.apply(this,arguments)||d;return d}}function el([a,d],l){a=Math.abs(a);d=Math.abs(d);
if(a>d&&a>l)return"x";if(d>a&&d>l)return"y"}function Dm(a){const [d,l]=a.overflow,[H,Y]=a._delta,[ka,oa]=a._direction;if(0>d&&0<H&&0>ka||0<d&&0>H&&0<ka)a._movement[0]=a._movementBound[0];if(0>l&&0<Y&&0>oa||0<l&&0>Y&&0<oa)a._movement[1]=a._movementBound[1]}function Ii(a){Hx.set(a.key,a.engine);Ix.set(a.key,a.resolver)}function Zi(a={},d){const l={};for(const [H,Y]of Object.entries(d))switch(typeof Y){case "function":l[H]=Y.call(l,a[H],H,a);break;case "object":l[H]=Zi(a[H],Y);break;case "boolean":Y&&
(l[H]=a[H])}return l}function $i(a,d,l={}){const {target:H,eventOptions:Y,window:ka,enabled:oa,transform:Fa}=a;var Qa=oF;if(null==a)a={};else{if(null==a)var Wa={};else{Wa={};var db=Object.keys(a),jb;for(jb=0;jb<db.length;jb++){var Mb=db[jb];0<=Qa.indexOf(Mb)||(Wa[Mb]=a[Mb])}}if(Object.getOwnPropertySymbols)for(jb=Object.getOwnPropertySymbols(a),Mb=0;Mb<jb.length;Mb++)db=jb[Mb],0<=Qa.indexOf(db)||Object.prototype.propertyIsEnumerable.call(a,db)&&(Wa[db]=a[db]);a=Wa}l.shared=Zi({target:H,eventOptions:Y,
window:ka,enabled:oa,transform:Fa},nF);if(d){var Ub=Ix.get(d);l[d]=Zi(Kg({shared:l.shared},a),Ub)}else for(Ub in a)(d=Ix.get(Ub))&&(l[Ub]=Zi(Kg({shared:l.shared},a[Ub]),d));return l}function fj(a,d){a.gestures.add(d);a.gestureEventStores[d]=new RA(a,d);a.gestureTimeoutStores[d]=new pF}function ui(a,d,l,H,Y,ka){if(a.has(l)&&Hx.has(H)){var oa=l+"Start",Fa=l+"End";Y[H]=Qa=>{let Wa=void 0;if(Qa.first&&oa in d)d[oa](Qa);l in d&&(Wa=d[l](Qa));if(Qa.last&&Fa in d)d[Fa](Qa);return Wa};ka[H]=ka[H]||{}}}function Ak(a,
d={},l,H){const Y=Jx.default.useMemo(()=>new qF(a),[]);Y.applyHandlers(a,H);Y.applyConfig(d,l);Jx.default.useEffect(Y.effect.bind(Y));Jx.default.useEffect(()=>Y.clean.bind(Y),[]);if(void 0===d.target)return Y.bind.bind(Y)}function gi(a){a.forEach(Ii);return function(d,l){l=l||{};const H={},Y={},ka=new Set;for(let Mb in d)rF.test(Mb)?(ka.add(RegExp.lastMatch),Y[Mb]=d[Mb]):H[Mb]=d[Mb];const [oa,Fa,Qa]=[Y,H,ka];d={};ui(Qa,oa,"onDrag","drag",d,l);ui(Qa,oa,"onWheel","wheel",d,l);ui(Qa,oa,"onScroll","scroll",
d,l);ui(Qa,oa,"onPinch","pinch",d,l);ui(Qa,oa,"onMove","move",d,l);ui(Qa,oa,"onHover","hover",d,l);const {handlers:Wa,nativeHandlers:db,config:jb}={handlers:d,config:l,nativeHandlers:Fa};return Ak(Wa,jb,void 0,db)}}function aj(a,d){return gi([hF,kF,lF,mF,jF,iF])(a,d||{})}function uj(a){const {viewport:d,inputs:l,callbacks:H}=ph(),Y=Uv.useRef(void 0),ka=Uv.useRef([0,0]),oa=Uv.useRef(0),Fa=Uv.useMemo(()=>({onWheel:Qa=>{var Wa;({event:Qa}=Qa);Qa.preventDefault();const {deltaY:db,deltaX:jb}=Qa;var Mb=
0;if(Qa.ctrlKey||Qa.metaKey){Mb=Math.sign(Qa.deltaY);let xc=db;10<Math.abs(Qa.deltaY)&&(xc=10*Mb);Mb=xc}const [Ub,Nb,lc]=[jb,db,Mb];"pinching"===l.state||oa.current>=Qa.timeStamp||(oa.current=Qa.timeStamp,(Qa.altKey||Qa.ctrlKey||Qa.metaKey)&&0===Qa.buttons?(Mb=d.bounds,Qa=null!=(Wa=l.currentScreenPoint)?Wa:[Mb.width/2,Mb.height/2],Wa=d.camera.zoom,d.onZoom(Qa,Wa-lc/100*Wa)):(Wa=le.mul(Qa.shiftKey&&!Kh()?[Nb,0]:[Ub,Nb],.8),le.isEqual(Wa,[0,0])||d.panCamera(Wa)))},onPinchStart:({event:Qa,delta:Wa,offset:db,
origin:jb})=>{var Mb;const Ub=a.current;Qa instanceof WheelEvent||!(Qa.target===Ub||null!=Ub&&Ub.contains(Qa.target))||(null==(Mb=H.onPinchStart)?void 0:Mb.call(H,{type:"canvas",order:0,delta:[...Wa,db[0]],offset:db,point:le.sub(jb,l.containerOffset)},Qa),Y.current=jb,ka.current=[0,0])},onPinchEnd:({event:Qa,offset:Wa,origin:db})=>{var jb;const Mb=a.current;Qa instanceof WheelEvent||!(Qa.target===Mb||null!=Mb&&Mb.contains(Qa.target))||"pinching"!==l.state||(null==(jb=H.onPinchEnd)?void 0:jb.call(H,
{type:"canvas",order:0,delta:[0,0,Wa[0]],offset:Wa,point:le.sub(db,l.containerOffset)},Qa),ka.current=[0,0])},onPinch:({event:Qa,offset:Wa,origin:db})=>{var jb,Mb=a.current;if(!(Qa instanceof WheelEvent)&&(Qa.target===Mb||null!=Mb&&Mb.contains(Qa.target))){Y.current||(Y.current=db);Mb=le.sub(Y.current,db);var Ub=le.sub(Mb,ka.current);null==(jb=H.onPinch)?void 0:jb.call(H,{type:"canvas",order:0,delta:[...Ub,Wa[0]],offset:Wa,point:le.sub(db,l.containerOffset)},Qa);ka.current=Mb}}}),[H]);aj(Fa,{target:a,
eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:tp.maxZoom,min:tp.minZoom})}})}function Dl(a,d,l,H){Kx.useLayoutEffect(()=>{a.current.style.transform=`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,l,d.rotation]);Kx.useLayoutEffect(()=>{const Y=a.current;Y.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;Y.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);Kx.useLayoutEffect(()=>{const Y=a.current;void 0!==H&&(Y.style.zIndex=H.toString())},[H])}function gl(a,d){const {onPersist:l,onError:H,onMount:Y,onCreateAssets:ka,onCreateShapes:oa,onDeleteAssets:Fa,onDeleteShapes:Qa,onDrop:Wa,
onPaste:db,onCopy:jb,onCanvasDBClick:Mb}=d;TA.useLayoutEffect(()=>{const Ub=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,Y&&Y(a,null),()=>{Ub.forEach(Nb=>Nb());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);TA.useLayoutEffect(()=>{const Ub=[];l&&Ub.push(a.subscribe("persist",l));H&&Ub.push(a.subscribe("error",H));oa&&Ub.push(a.subscribe("create-shapes",oa));ka&&Ub.push(a.subscribe("create-assets",ka));Qa&&Ub.push(a.subscribe("delete-shapes",Qa));Fa&&Ub.push(a.subscribe("delete-assets",
Fa));Wa&&Ub.push(a.subscribe("drop",Wa));db&&Ub.push(a.subscribe("paste",db));jb&&Ub.push(a.subscribe("copy",jb));Mb&&Ub.push(a.subscribe("canvas-dbclick",Mb));return()=>Ub.forEach(Nb=>Nb())},[a,l,H])}function Yn(a){if("app"in a)return a.app;const [d]=UA.useState(()=>new ME(a.model,a.Shapes,a.Tools,a.readOnly));UA.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function Tk(a,d){sF.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function bn(a){const d=ph(),{viewport:{bounds:l}}=
d;tF.useEffect(()=>{const H=oa=>{oa.preventDefault()},Y=oa=>{if(0!==oa.touches.length){var Fa=oa.touches[0].pageX,Qa=oa.touches[0].radiusX||0;(10>Fa-Qa||Fa+Qa>l.width-10)&&oa.preventDefault()}},ka=a.current;if(!ka)return()=>{};ka.addEventListener("touchstart",H,{passive:!0});ka.addEventListener("gestureend",H,{passive:!0});ka.addEventListener("gesturechange",H,{passive:!0});ka.addEventListener("gesturestart",H,{passive:!0});ka.addEventListener("touchstart",Y,{passive:!0});return()=>{ka&&(ka.removeEventListener("touchstart",
H),ka.removeEventListener("gestureend",H),ka.removeEventListener("gesturechange",H),ka.removeEventListener("gesturestart",H),ka.removeEventListener("touchstart",Y))}},[a,l.width])}function sn(a,d){const {inputs:l,callbacks:H}=ph();return uF.useMemo(()=>({onPointerDown:Y=>{var ka,oa;const {order:Fa=0}=Y;Fa||(null==(ka=Y.currentTarget)?void 0:ka.setPointerCapture(Y.pointerId));ka=a.props.handles[d];null==(oa=H.onPointerDown)?void 0:oa.call(H,{type:"handle",shape:a,handle:ka,id:d,order:Fa},Y);Y.order=
Fa+1},onPointerMove:Y=>{var ka;const {order:oa=0}=Y,Fa=a.props.handles[d];null==(ka=H.onPointerMove)?void 0:ka.call(H,{type:"handle",shape:a,handle:Fa,id:d,order:oa},Y);Y.order=oa+1},onPointerUp:Y=>{var ka,oa;const {order:Fa=0}=Y;Fa||(null==(ka=Y.currentTarget)?void 0:ka.releasePointerCapture(Y.pointerId));ka=a.props.handles[d];null==(oa=H.onPointerUp)?void 0:oa.call(H,{type:"handle",shape:a,handle:ka,id:d,order:Fa},Y);Y.order=Fa+1},onPointerEnter:Y=>{var ka;const {order:oa=0}=Y,Fa=a.props.handles[d];
null==(ka=H.onPointerEnter)?void 0:ka.call(H,{type:"handle",shape:a,handle:Fa,id:d,order:oa},Y);Y.order=oa+1},onPointerLeave:Y=>{var ka;const {order:oa=0}=Y,Fa=a.props.handles[d];null==(ka=H.onPointerLeave)?void 0:ka.call(H,{type:"handle",shape:a,handle:Fa,id:d,order:oa},Y);Y.order=oa+1},onKeyUp:Y=>{var ka;const oa=a.props.handles[d];null==(ka=H.onKeyUp)?void 0:ka.call(H,{type:"handle",shape:a,handle:oa,id:d,order:-1},Y)},onKeyDown:Y=>{var ka;const oa=a.props.handles[d];null==(ka=H.onKeyDown)?void 0:
ka.call(H,{type:"handle",shape:a,handle:oa,id:d,order:-1},Y)}}),[a.id,l,H])}function Fj(a,d,l=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${l?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function tn(a,d,l=0){vF.useEffect(()=>{const H=a.current;H&&(H.style.cursor=wF[d](Xm.radiansToDegrees(l)))},
[d,l])}function Ck(a){const {viewport:d}=ph(),l=ff();xF.useLayoutEffect(()=>Kd(()=>{const H=cl(()=>{var Y;null==(Y=a.current)?void 0:Y.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==l.inputs.state&&null!=d.camera.zoom&&H()}),[])}function cn(a,d=0){const [l,H]=(0,VA.useState)(a);(0,VA.useEffect)(()=>{let Y=!1;const ka=setTimeout(()=>{Y||H(a)},d);return()=>{Y=!0;clearTimeout(ka)}},[a,d]);return l}function kk(){const a=ff();WA.useEffect(()=>{ue(()=>ne({},a.viewport.camera),
()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);WA.useEffect(()=>{var d;const l=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");l?a.viewport.update(l):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function un(a){a()}function Bk(a){return Qf(Jg(a,void 0))}function xi(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+
zF}}function hi(a){var d=new Map,l=1,H=new a(function(Y){var ka=d.get(Y);ka&&(ka.reaction.dispose(),d.delete(Y))});return{addReactionToTrack:function(Y,ka,oa){var Fa=l++;H.register(oa,Fa,Y);Y.current=xi(ka);Y.current.finalizationRegistryCleanupToken=Fa;d.set(Fa,Y.current);return Y.current},recordReactionAsCommitted:function(Y){H.unregister(Y);Y.current&&Y.current.finalizationRegistryCleanupToken&&d.delete(Y.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function vn(){function a(){void 0===H&&(H=setTimeout(d,1E4))}function d(){H=void 0;var Y=Date.now();l.forEach(function(ka){var oa=ka.current;oa&&Y>=oa.cleanAt&&(oa.reaction.dispose(),ka.current=null,l.delete(ka))});0<l.size&&a()}var l=new Set,H;return{addReactionToTrack:function(Y,ka,oa){Y.current=xi(ka);l.add(Y);a();return Y.current},recordReactionAsCommitted:function(Y){l.delete(Y)},forceCleanupTimerToRunNowForTests:function(){H&&(clearTimeout(H),d())},
resetCleanupScheduleForTests:function(){var Y;if(0<l.size){try{for(var ka=AF(l),oa=ka.next();!oa.done;oa=ka.next()){var Fa=oa.value,Qa=Fa.current;Qa&&(Qa.reaction.dispose(),Fa.current=null)}}catch(db){var Wa={error:db}}finally{try{oa&&!oa.done&&(Y=ka.return)&&Y.call(ka)}finally{if(Wa)throw Wa.error;}}l.clear()}H&&(clearTimeout(H),H=void 0)}}}function rh(){return new DF}function vj(a,d){void 0===d&&(d="observed");var l=ZA(Du.default.useState(rh),1)[0],H=ZA(Du.default.useState(),2)[1],Y=Du.default.useRef(null);
if(!Y.current)var ka=new xt("observer".concat(d),function(){oa.mounted?H([]):oa.changedBeforeMount=!0}),oa=BF(Y,ka,l);l=Y.current.reaction;Du.default.useDebugValue(l,Bk);Du.default.useEffect(function(){CF(Y);Y.current?(Y.current.mounted=!0,Y.current.changedBeforeMount&&(Y.current.changedBeforeMount=!1,H([]))):(Y.current={reaction:new xt("observer".concat(d),function(){H([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},H([]));return function(){Y.current.reaction.dispose();Y.current=null}},
[]);var Fa,Qa;l.track(function(){try{Fa=a()}catch(Wa){Qa=Wa}});if(Qa)throw Qa;return Fa}function gf(a,d){var l;if(bB&&a.$$typeof===bB)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(l=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==l?l:!1;var H=a,Y=a.displayName||a.name;if(aB&&a.$$typeof===aB&&(d=!0,H=a.render,"function"!==typeof H))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
l=function(ka,oa){return vj(function(){return H(ka,oa)},Y)};""!==Y&&(l.displayName=Y);a.contextTypes&&(l.contextTypes=a.contextTypes);d&&(l=(0,Ht.forwardRef)(l));l=(0,Ht.memo)(l);Gj(a,l);return l}function Gj(a,d){Object.keys(a).forEach(function(l){EF[l]||Object.defineProperty(d,l,Object.getOwnPropertyDescriptor(a,l))})}function wk(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:vj(a)}function wn(a){const d=ff(),{callbacks:l}=ph(),H=cB.useRef(!1);cB.useEffect(()=>{const Y=Qa=>{var Wa,
db;if(null==(Wa=a.current)?0:Wa.contains(document.activeElement))null==(db=l.onKeyDown)?void 0:db.call(l,{type:"canvas",order:-1},Qa),H.current=Qa.shiftKey},ka=Qa=>{var Wa,db;if(null==(Wa=a.current)?0:Wa.contains(document.activeElement))null==(db=l.onKeyUp)?void 0:db.call(l,{type:"canvas",order:-1},Qa),H.current=Qa.shiftKey},oa=Qa=>{var Wa,db,jb;!d.editingShape&&(null==(Wa=a.current)?0:Wa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(jb=null==(db=document.activeElement)?
void 0:db.tagName)?jb:"")&&(Qa.preventDefault(),d.paste(Qa,H.current))},Fa=Qa=>{var Wa,db,jb;!d.editingShape&&0<d.selectedShapes.size&&(null==(Wa=a.current)?0:Wa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(jb=null==(db=document.activeElement)?void 0:db.tagName)?jb:"")&&(Qa.preventDefault(),d.copy())};window.addEventListener("keydown",Y);window.addEventListener("keyup",ka);document.addEventListener("paste",oa);document.addEventListener("copy",Fa);return()=>{window.removeEventListener("keydown",
Y);window.removeEventListener("keyup",ka);document.removeEventListener("paste",oa);document.removeEventListener("copy",Fa)}},[])}function wm(a){const {inputs:d,callbacks:l}=ph(),H=hB.useRef(-1);return hB.useMemo(()=>({onPointerDown:Y=>{var ka,oa;const {order:Fa=0}=Y;Fa||(null==(ka=Y.currentTarget)?void 0:ka.setPointerCapture(Y.pointerId));null==(oa=l.onPointerDown)?void 0:oa.call(l,{type:"shape",shape:a,order:Fa},Y);Y.order=Fa+1},onPointerMove:Y=>{var ka;const {order:oa=0}=Y;null==(ka=l.onPointerMove)?
void 0:ka.call(l,{type:"shape",shape:a,order:oa},Y);Y.order=oa+1},onPointerUp:Y=>{var ka,oa,Fa;const {order:Qa=0}=Y;Qa||(null==(ka=Y.currentTarget)?void 0:ka.releasePointerCapture(Y.pointerId));null==(oa=l.onPointerUp)?void 0:oa.call(l,{type:"shape",shape:a,order:Qa},Y);ka=Date.now();oa=ka-H.current;300<oa?H.current=ka:300>=oa&&(null==(Fa=l.onDoubleClick)?void 0:Fa.call(l,{type:"shape",shape:a,order:Qa},Y),H.current=-1);Y.order=Qa+1},onPointerEnter:Y=>{var ka;const {order:oa=0}=Y;null==(ka=l.onPointerEnter)?
void 0:ka.call(l,{type:"shape",shape:a,order:oa},Y);Y.order=oa+1},onPointerLeave:Y=>{var ka;const {order:oa=0}=Y;null==(ka=l.onPointerLeave)?void 0:ka.call(l,{type:"shape",shape:a,order:oa},Y);Y.order=oa+1},onKeyUp:Y=>{var ka;null==(ka=l.onKeyUp)?void 0:ka.call(l,{type:"shape",shape:a,order:-1},Y)},onKeyDown:Y=>{var ka;null==(ka=l.onKeyDown)?void 0:ka.call(l,{type:"shape",shape:a,order:-1},Y)}}),[a.id,d,l])}function Eg(a){var {viewport:d,inputs:l,callbacks:H,components:Y}=a;a=If(a,["viewport","inputs",
"callbacks","components"]);return(0,zB.jsx)(YF,{id:a.id,viewport:d,inputs:l,callbacks:H,components:Y,meta:a.meta,children:(0,zB.jsx)(UF,ne({},a))})}function Ye(){Ye=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var l=arguments[d],H;for(H in l)Object.prototype.hasOwnProperty.call(l,H)&&(a[H]=l[H])}return a};return Ye.apply(this,arguments)}function Uf(a,d,{checkForDefaultPrevented:l=!0}={}){return function(H){null===a||void 0===a||a(H);if(!1===l||!H.defaultPrevented)return null===
d||void 0===d?void 0:d(H)}}function Pg(...a){return d=>a.forEach(l=>{"function"===typeof l?l(d):null!==l&&void 0!==l&&(l.current=d)})}function lh(...a){return(0,cG.useCallback)(Pg(...a),a)}function mk(a,d=[]){let l=[];const H=()=>{const Y=l.map(ka=>(0,Js.createContext)(ka));return function(ka){const oa=(null===ka||void 0===ka?void 0:ka[a])||Y;return(0,Js.useMemo)(()=>({[`__scope${a}`]:qf(ne({},ka),{[a]:oa})}),[ka,oa])}};H.scopeName=a;return[function(Y,ka){function oa(Wa){const {scope:db,children:jb}=
Wa,Mb=If(Wa,["scope","children"]);Wa=(null===db||void 0===db?void 0:db[a][Qa])||Fa;const Ub=(0,Js.useMemo)(()=>Mb,Object.values(Mb));return(0,Js.createElement)(Wa.Provider,{value:Ub},jb)}const Fa=(0,Js.createContext)(ka),Qa=l.length;l=[...l,ka];oa.displayName=Y+"Provider";return[oa,function(Wa,db){if(db=(0,Js.useContext)((null===db||void 0===db?void 0:db[a][Qa])||Fa))return db;if(void 0!==ka)return ka;throw Error(`\`${Wa}\` must be used within \`${Y}\``);}]},Uk(H,...d)]}function Uk(...a){const d=
a[0];if(1===a.length)return d;const l=()=>{const H=a.map(Y=>({useScope:Y(),scopeName:Y.scopeName}));return function(Y){const ka=H.reduce((oa,{useScope:Fa,scopeName:Qa})=>{Fa=Fa(Y)[`__scope${Qa}`];return ne(ne({},oa),Fa)},{});return(0,Js.useMemo)(()=>({[`__scope${d.scopeName}`]:ka}),[ka])}};l.scopeName=d.scopeName;return l}function yg(a){return(0,Rn.isValidElement)(a)&&a.type===AB}function Hj(a,d){const l=ne({},d);for(const H in d){const Y=a[H],ka=d[H];/^on[A-Z]/.test(H)?Y&&ka?l[H]=(...oa)=>{ka(...oa);
Y(...oa)}:Y&&(l[H]=Y):"style"===H?l[H]=ne(ne({},Y),ka):"className"===H&&(l[H]=[Y,ka].filter(Boolean).join(" "))}return ne(ne({},a),l)}function cm(a,d){a&&(0,dG.flushSync)(()=>a.dispatchEvent(d))}function Gf(a){const d=(0,Vx.useRef)(a);(0,Vx.useEffect)(()=>{d.current=a});return(0,Vx.useMemo)(()=>(...l)=>{var H;return null===(H=d.current)||void 0===H?void 0:H.call(d,...l)},[])}function Ek(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const l=Gf(a);(0,eG.useEffect)(()=>{const H=
Y=>{"Escape"===Y.key&&l(Y)};d.addEventListener("keydown",H);return()=>d.removeEventListener("keydown",H)},[l,d])}function ak(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const l=Gf(a),H=(0,Lo.useRef)(!1),Y=(0,Lo.useRef)(()=>{});(0,Lo.useEffect)(()=>{const ka=Fa=>{if(Fa.target&&!H.current){let Qa=function(){Om("dismissableLayer.pointerDownOutside",l,Wa,{discrete:!0})};const Wa={originalEvent:Fa};"touch"===Fa.pointerType?(d.removeEventListener("click",Y.current),Y.current=
Qa,d.addEventListener("click",Y.current,{once:!0})):Qa()}H.current=!1},oa=window.setTimeout(()=>{d.addEventListener("pointerdown",ka)},0);return()=>{window.clearTimeout(oa);d.removeEventListener("pointerdown",ka);d.removeEventListener("click",Y.current)}},[d,l]);return{onPointerDownCapture:()=>H.current=!0}}function bm(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const l=Gf(a),H=(0,Lo.useRef)(!1);(0,Lo.useEffect)(()=>{const Y=ka=>{ka.target&&!H.current&&Om("dismissableLayer.focusOutside",
l,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",Y);return()=>d.removeEventListener("focusin",Y)},[d,l]);return{onFocusCapture:()=>H.current=!0,onBlurCapture:()=>H.current=!1}}function fl(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function Om(a,d,l,{discrete:H}){const Y=l.originalEvent.target;l=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:l});d&&Y.addEventListener(a,d,{once:!0});H?cm(Y,l):Y.dispatchEvent(l)}function ii(a){const [d,l]=CB.useState(hG());
Cn(()=>{a||l(H=>null!==H&&void 0!==H?H:String(iG++))},[a]);return a||(d?`radix-${d}`:"")}function bj(a){return a.split("-")[0]}function il(a){return["top","bottom"].includes(bj(a))?"x":"y"}function Fk(a){return"y"===a?"height":"width"}function El(a,d,l){let {reference:H,floating:Y}=a;var ka=H.x+H.width/2-Y.width/2;const oa=H.y+H.height/2-Y.height/2;a=il(d);var Fa=Fk(a);Fa=H[Fa]/2-Y[Fa]/2;const Qa="x"===a;switch(bj(d)){case "top":ka={x:ka,y:H.y-Y.height};break;case "bottom":ka={x:ka,y:H.y+H.height};
break;case "right":ka={x:H.x+H.width,y:oa};break;case "left":ka={x:H.x-Y.width,y:oa};break;default:ka={x:H.x,y:H.y}}switch(d.split("-")[1]){case "start":ka[a]-=Fa*(l&&Qa?-1:1);break;case "end":ka[a]+=Fa*(l&&Qa?-1:1)}return ka}function Zn(a){return"number"!=typeof a?ne({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function xn(a){return qf(ne({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function tm(a,d){return yi(this,null,function*(){var l;void 0===d&&(d={});
const {x:H,y:Y,platform:ka,rects:oa,elements:Fa,strategy:Qa}=a,{boundary:Wa="clippingAncestors",rootBoundary:db="viewport",elementContext:jb="floating",altBoundary:Mb=!1,padding:Ub=0}=d,Nb=Zn(Ub),lc=Fa[Mb?"floating"===jb?"reference":"floating":jb],xc=xn(yield ka.getClippingRect({element:null==(l=yield null==ka.isElement?void 0:ka.isElement(lc))||l?lc:lc.contextElement||(yield null==ka.getDocumentElement?void 0:ka.getDocumentElement(Fa.floating)),boundary:Wa,rootBoundary:db,strategy:Qa}));l=xn(ka.convertOffsetParentRelativeRectToViewportRelativeRect?
yield ka.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===jb?qf(ne({},oa.floating),{x:H,y:Y}):oa.reference,offsetParent:yield null==ka.getOffsetParent?void 0:ka.getOffsetParent(Fa.floating),strategy:Qa}):oa[jb]);return{top:xc.top-l.top+Nb.top,bottom:l.bottom-xc.bottom+Nb.bottom,left:xc.left-l.left+Nb.left,right:l.right-xc.right+Nb.right}})}function en(a){return a.replace(/left|right|bottom|top/g,d=>kG[d])}function dm(a,d,l){void 0===l&&(l=!1);const H=a.split("-")[1],Y=il(a);
a=Fk(Y);l="x"===Y?H===(l?"end":"start")?"right":"left":"start"===H?"bottom":"top";return d.reference[a]>d.floating[a]&&(l=en(l)),{main:l,cross:en(l)}}function Gk(a){return a.replace(/start|end/g,d=>lG[d])}function Sl(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function ll(a){return EB.some(d=>0<=a[d])}function kl(a){return null==a?window:a&&a.document&&a.location&&a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function fm(a){return kl(a).getComputedStyle(a)}
function Rj(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||"").toLowerCase():""}function oj(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function Gl(a){return a instanceof kl(a).HTMLElement}function Vk(a){return a instanceof kl(a).Element}function Qj(a){return"undefined"==typeof ShadowRoot?!1:a instanceof kl(a).ShadowRoot||a instanceof ShadowRoot}function nj(a){const {overflow:d,overflowX:l,
overflowY:H}=fm(a);return/auto|scroll|overlay|hidden/.test(d+H+l)}function Em(a){const d=/firefox/i.test(oj());a=fm(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function nl(){return!/^((?!chrome|android).)*safari/i.test(oj())}function bk(a,d,l){var H,Y,ka,oa;void 0===d&&(d=!1);void 0===l&&(l=!1);var Fa=a.getBoundingClientRect();let Qa=1,Wa=1;d&&Gl(a)&&(Qa=
0<a.offsetWidth&&bw(Fa.width)/a.offsetWidth||1,Wa=0<a.offsetHeight&&bw(Fa.height)/a.offsetHeight||1);a=Vk(a)?kl(a):window;d=!nl()&&l;l=(Fa.left+(d&&null!=(H=null==(Y=a.visualViewport)?void 0:Y.offsetLeft)?H:0))/Qa;H=(Fa.top+(d&&null!=(ka=null==(oa=a.visualViewport)?void 0:oa.offsetTop)?ka:0))/Wa;ka=Fa.width/Qa;Fa=Fa.height/Wa;return{width:ka,height:Fa,top:H,right:l+ka,bottom:H+Fa,left:l,x:l,y:H}}function nk(a){return(d=a,(d instanceof kl(d).Node?a.ownerDocument:a.document)||window.document).documentElement;
var d}function xk(a){return Vk(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function ok(a){return bk(nk(a)).left+xk(a).scrollLeft}function Qh(a){return"html"===Rj(a)?a:a.assignedSlot||a.parentNode||(Qj(a)?a.host:null)||nk(a)}function Ej(a){return Gl(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}function pj(a){for(var d=kl(a),l=Ej(a);l&&["table","td","th"].includes(Rj(l))&&"static"===getComputedStyle(l).position;)l=Ej(l);if(!l||
"html"!==Rj(l)&&("body"!==Rj(l)||"static"!==getComputedStyle(l).position||Em(l))){if(!l)a:{a=Qh(a);for(Qj(a)&&(a=a.host);Gl(a)&&!["html","body"].includes(Rj(a));){if(Em(a)){l=a;break a}a=a.parentNode}l=null}d=l||d}return d}function Pk(a){if(Gl(a))return{width:a.offsetWidth,height:a.offsetHeight};a=bk(a);return{width:a.width,height:a.height}}function Bl(a){const d=Qh(a);return["html","body","#document"].includes(Rj(d))?a.ownerDocument.body:Gl(d)&&nj(d)?d:Bl(d)}function ni(a,d){var l;void 0===d&&(d=
[]);var H=Bl(a);a=H===(null==(l=a.ownerDocument)?void 0:l.body);l=kl(H);H=a?[l].concat(l.visualViewport||[],nj(H)?H:[]):H;d=d.concat(H);return a?d:d.concat(ni(H))}function vi(a,d,l){return"viewport"===d?xn(function(H,Y){var ka=kl(H),oa=nk(H);ka=ka.visualViewport;H=oa.clientWidth;oa=oa.clientHeight;let Fa=0,Qa=0;if(ka){H=ka.width;oa=ka.height;const Wa=nl();(Wa||!Wa&&"fixed"===Y)&&(Fa=ka.offsetLeft,Qa=ka.offsetTop)}return{width:H,height:oa,x:Fa,y:Qa}}(a,l)):Vk(d)?function(H,Y){var ka=bk(H,!1,"fixed"===
Y);Y=ka.top+H.clientTop;ka=ka.left+H.clientLeft;return{top:Y,left:ka,x:ka,y:Y,right:ka+H.clientWidth,bottom:Y+H.clientHeight,width:H.clientWidth,height:H.clientHeight}}(d,l):xn(function(H){var Y;const ka=nk(H);var oa=xk(H);const Fa=null==(Y=H.ownerDocument)?void 0:Y.body;Y=Gu(ka.scrollWidth,ka.clientWidth,Fa?Fa.scrollWidth:0,Fa?Fa.clientWidth:0);const Qa=Gu(ka.scrollHeight,ka.clientHeight,Fa?Fa.scrollHeight:0,Fa?Fa.clientHeight:0);H=-oa.scrollLeft+ok(H);oa=-oa.scrollTop;return"rtl"===fm(Fa||ka).direction&&
(H+=Gu(ka.clientWidth,Fa?Fa.clientWidth:0)-Y),{width:Y,height:Qa,x:H,y:oa}}(nk(a)))}function sm(a){const d=ni(a),l=["absolute","fixed"].includes(fm(a).position)&&Gl(a)?pj(a):a;return Vk(l)?d.filter(H=>{var Y;if(Y=Vk(H))a:if(Y=null==l.getRootNode?void 0:l.getRootNode(),H.contains(l))Y=!0;else{if(Y&&Qj(Y)){Y=l;do{if(Y&&H===Y){Y=!0;break a}Y=Y.parentNode||Y.host}while(Y)}Y=!1}return Y&&"body"!==Rj(H)}):[]}function Ri(a,d,l,H){void 0===H&&(H={});const {ancestorScroll:Y=!0,ancestorResize:ka=!0,elementResize:oa=
!0,animationFrame:Fa=!1}=H,Qa=Y&&!Fa,Wa=ka&&!Fa,db=Qa||Wa?[...(Vk(a)?ni(a):[]),...ni(d)]:[];db.forEach(Nb=>{Qa&&Nb.addEventListener("scroll",l,{passive:!0});Wa&&Nb.addEventListener("resize",l)});let jb,Mb=null;if(oa){let Nb=!0;Mb=new ResizeObserver(()=>{Nb||l();Nb=!1});Vk(a)&&!Fa&&Mb.observe(a);Mb.observe(d)}let Ub=Fa?bk(a):null;return Fa&&function lc(){const xc=bk(a);!Ub||xc.x===Ub.x&&xc.y===Ub.y&&xc.width===Ub.width&&xc.height===Ub.height||l();Ub=xc;jb=requestAnimationFrame(lc)}(),l(),()=>{var lc;
db.forEach(xc=>{Qa&&xc.removeEventListener("scroll",l);Wa&&xc.removeEventListener("resize",l)});null==(lc=Mb)||lc.disconnect();Mb=null;Fa&&cancelAnimationFrame(jb)}}function Hk(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let l,H;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var Y=a.length;if(Y!=d.length)return!1;for(l=Y;0!==l--;)if(!Hk(a[l],d[l]))return!1;return!0}H=Object.keys(a);Y=H.length;if(Y!==Object.keys(d).length)return!1;
for(l=Y;0!==l--;)if(!Object.prototype.hasOwnProperty.call(d,H[l]))return!1;for(l=Y;0!==l--;)if(Y=H[l],!("_owner"===Y&&a.$$typeof||Hk(a[Y],d[Y])))return!1;return!0}return a!==a&&d!==d}function oi(a){const d=Wo.useRef(a);Yx(()=>{d.current=a});return d}function jg(a){let {middleware:d,placement:l="bottom",strategy:H="absolute",whileElementsMounted:Y}=void 0===a?{}:a;const ka=Wo.useRef(null),oa=Wo.useRef(null),Fa=oi(Y),Qa=Wo.useRef(null),[Wa,db]=Wo.useState({x:null,y:null,strategy:H,placement:l,middlewareData:{}}),
[jb,Mb]=Wo.useState(d);Hk(null==jb?void 0:jb.map(jc=>{({options:jc}=jc);return jc}),null==d?void 0:d.map(jc=>{({options:jc}=jc);return jc}))||Mb(d);const Ub=Wo.useCallback(()=>{ka.current&&oa.current&&oG(ka.current,oa.current,{middleware:jb,placement:l,strategy:H}).then(jc=>{Nb.current&&pG.flushSync(()=>{db(jc)})})},[jb,l,H]);Yx(()=>{Nb.current&&Ub()},[Ub]);const Nb=Wo.useRef(!1);Yx(()=>{Nb.current=!0;return()=>{Nb.current=!1}},[]);const lc=Wo.useCallback(()=>{"function"===typeof Qa.current&&(Qa.current(),
Qa.current=null);if(ka.current&&oa.current)if(Fa.current){const jc=Fa.current(ka.current,oa.current,Ub);Qa.current=jc}else Ub()},[Ub,Fa]),xc=Wo.useCallback(jc=>{ka.current=jc;lc()},[lc]),$b=Wo.useCallback(jc=>{oa.current=jc;lc()},[lc]),nc=Wo.useMemo(()=>({reference:ka,floating:oa}),[]);return Wo.useMemo(()=>qf(ne({},Wa),{update:Ub,refs:nc,reference:xc,floating:$b}),[Wa,Ub,nc,xc,$b])}function Fh(a){const [d,l]=(0,rG.useState)(void 0);Cn(()=>{if(a){l({width:a.offsetWidth,height:a.offsetHeight});const H=
new ResizeObserver(Y=>{if(Array.isArray(Y)&&Y.length){Y=Y[0];if("borderBoxSize"in Y){Y=Y.borderBoxSize;var ka=Array.isArray(Y)?Y[0]:Y;Y=ka.inlineSize;ka=ka.blockSize}else Y=a.offsetWidth,ka=a.offsetHeight;l({width:Y,height:ka})}});H.observe(a,{box:"border-box"});return()=>H.unobserve(a)}l(void 0)},[a]);return d}function eh(a){return void 0!==a}function Bg(a){return null!==a}function zi(a){const [d,l="center"]=a.split("-");return[d,l]}function bi(a,d){return(0,Xq.useReducer)((l,H)=>{H=d[l][H];return null!==
H&&void 0!==H?H:l},a)}function Gg(a){const [d,l]=(0,Xq.useState)(),H=(0,Xq.useRef)({}),Y=(0,Xq.useRef)(a),ka=(0,Xq.useRef)("none"),[oa,Fa]=bi(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Xq.useEffect)(()=>{const Qa=Vh(H.current);ka.current="mounted"===oa?Qa:"none"},[oa]);Cn(()=>{const Qa=H.current,Wa=Y.current;if(Wa!==a){const db=ka.current,jb=Vh(Qa);a?Fa("MOUNT"):
"none"===jb||"none"===(null===Qa||void 0===Qa?void 0:Qa.display)?Fa("UNMOUNT"):Wa&&db!==jb?Fa("ANIMATION_OUT"):Fa("UNMOUNT");Y.current=a}},[a,Fa]);Cn(()=>{if(d){const Qa=db=>{const jb=Vh(H.current).includes(db.animationName);db.target===d&&jb&&(0,BG.flushSync)(()=>Fa("ANIMATION_END"))},Wa=db=>{db.target===d&&(ka.current=Vh(H.current))};d.addEventListener("animationstart",Wa);d.addEventListener("animationcancel",Qa);d.addEventListener("animationend",Qa);return()=>{d.removeEventListener("animationstart",
Wa);d.removeEventListener("animationcancel",Qa);d.removeEventListener("animationend",Qa)}}Fa("ANIMATION_END")},[d,Fa]);return{isPresent:["mounted","unmountSuspended"].includes(oa),ref:(0,Xq.useCallback)(Qa=>{Qa&&(H.current=getComputedStyle(Qa));l(Qa)},[])}}function Vh(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}function ci({prop:a,defaultProp:d,onChange:l=()=>{}}){const [H,Y]=wj({defaultProp:d,onChange:l}),ka=void 0!==a;d=ka?a:H;const oa=Gf(l);l=(0,cw.useCallback)(Fa=>{ka?(Fa="function"===
typeof Fa?Fa(a):Fa,Fa!==a&&oa(Fa)):Y(Fa)},[ka,a,Y,oa]);return[d,l]}function wj({defaultProp:a,onChange:d}){a=(0,cw.useState)(a);const [l]=a,H=(0,cw.useRef)(l),Y=Gf(d);(0,cw.useEffect)(()=>{H.current!==l&&(Y(l),H.current=l)},[l,H,Y]);return a}function Lj(a,d){const l=Math.abs(d.top-a.y),H=Math.abs(d.bottom-a.y),Y=Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(l,H,Y,a)){case a:return"left";case Y:return"right";case l:return"top";case H:return"bottom";default:return null}}function Qb(a){a=
a.slice();a.sort((d,l)=>d.x<l.x?-1:d.x>l.x?1:d.y<l.y?-1:d.y>l.y?1:0);return ic(a)}function ic(a){if(1>=a.length)return a.slice();const d=[];for(var l=0;l<a.length;l++){for(var H=a[l];2<=d.length;){var Y=d[d.length-1],ka=d[d.length-2];if((Y.x-ka.x)*(H.y-ka.y)>=(Y.y-ka.y)*(H.x-ka.x))d.pop();else break}d.push(H)}d.pop();l=[];for(H=a.length-1;0<=H;H--){for(Y=a[H];2<=l.length;){ka=l[l.length-1];const oa=l[l.length-2];if((ka.x-oa.x)*(Y.y-oa.y)>=(ka.y-oa.y)*(Y.x-oa.x))l.pop();else break}l.push(Y)}l.pop();
return 1===d.length&&1===l.length&&d[0].x===l[0].x&&d[0].y===l[0].y?d:d.concat(l)}function fc(a){var {side:d,content:l,sideOffset:H=10}=a;a=If(a,["side","content","sideOffset"]);return l?(0,Kr.jsx)(NG,{delayDuration:300,children:(0,Kr.jsxs)(OG,{children:[(0,Kr.jsx)(PG,{asChild:!0,children:a.children}),(0,Kr.jsx)(QG,{children:(0,Kr.jsxs)(RG,qf(ne({className:"tl-tooltip-content",sideOffset:H,side:d},a),{children:[l,(0,Kr.jsx)(SG,{className:"tl-tooltip-arrow"})]}))})]})}):(0,Kr.jsx)(Kr.Fragment,{children:a.children})}
function ja(a){var {className:d,tooltip:l,tooltipSide:H}=a;a=If(a,["className","tooltip","tooltipSide"]);return(0,SB.jsx)(fc,{content:l,side:H,children:(0,SB.jsx)("button",ne({className:"tl-button "+(null!=d?d:"")},a))})}function Bb(a){var d=a+"CollectionProvider";const [l,H]=mk(d),[Y,ka]=l(d,{collectionRef:{current:null},itemMap:new Map}),oa=db=>{const {scope:jb,children:Mb}=db;db=Aq.default.useRef(null);const Ub=Aq.default.useRef(new Map).current;return Aq.default.createElement(Y,{scope:jb,itemMap:Ub,
collectionRef:db},Mb)};Object.assign(oa,{displayName:d});const Fa=a+"CollectionSlot";d=Aq.default.forwardRef((db,jb)=>{const {scope:Mb,children:Ub}=db;db=ka(Fa,Mb);jb=lh(jb,db.collectionRef);return Aq.default.createElement(zq,{ref:jb},Ub)});Object.assign(d,{displayName:Fa});const Qa=a+"CollectionItemSlot",Wa=Aq.default.forwardRef((db,jb)=>{const {scope:Mb,children:Ub}=db,Nb=If(db,["scope","children"]),lc=Aq.default.useRef(null);db=lh(jb,lc);const xc=ka(Qa,Mb);Aq.default.useEffect(()=>{xc.itemMap.set(lc,
ne({ref:lc},Nb));return()=>void xc.itemMap.delete(lc)});return Aq.default.createElement(zq,{["data-radix-collection-item"]:"",ref:db},Ub)});Object.assign(Wa,{displayName:Qa});return[{Provider:oa,Slot:d,ItemSlot:Wa},function(db){const jb=ka(a+"CollectionConsumer",db);return Aq.default.useCallback(()=>{const Mb=jb.collectionRef.current;if(!Mb)return[];const Ub=Array.from(Mb.querySelectorAll("[data-radix-collection-item]"));return Array.from(jb.itemMap.values()).sort((Nb,lc)=>Ub.indexOf(Nb.ref.current)-
Ub.indexOf(lc.ref.current))},[jb.collectionRef,jb.itemMap])},H]}function Vb(a){const d=(0,TB.useContext)(UG);return a||d||"ltr"}function sb(){(0,VG.useEffect)(()=>{var a,d;const l=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=l[0])&&void 0!==a?a:xb());document.body.insertAdjacentElement("beforeend",null!==(d=l[1])&&void 0!==d?d:xb());fy++;return()=>{1===fy&&document.querySelectorAll("[data-radix-focus-guard]").forEach(H=>H.remove());
fy--}},[])}function xb(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return a}function Sb(a,{select:d=!1}={}){const l=document.activeElement;for(const H of a)if(Ac(H,{select:d}),document.activeElement!==l)break}function rb(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const H="INPUT"===l.tagName&&"hidden"===l.type;return l.disabled||
l.hidden||H?NodeFilter.FILTER_SKIP:0<=l.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function Pb(a,d){for(const l of a)if(!bc(l,{upTo:d}))return l}function bc(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Ac(a,{select:d=!1}={}){if(a&&a.focus){const l=document.activeElement;a.focus({preventScroll:!0});a!==
l&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function Lc(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function Pc(a){return a.filter(d=>"A"!==d.tagName)}function sd(a,d,l){a=a.key;l="rtl"!==l?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(l))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(l))return bH[l]}function Rd(a){const d=document.activeElement;for(const l of a){if(l===d)break;l.focus();
if(document.activeElement!==d)break}}function Cd(a,d){return a.map((l,H)=>a[(d+H)%a.length])}function Ad(a,d){var l=(0,fH.useState)(function(){return{value:a,callback:d,facade:{get current(){return l.value},set current(H){var Y=l.value;Y!==H&&(l.value=H,l.callback(H,Y))}}}})[0];l.callback=d;return l.facade}function Jd(a,d){return Ad(d||null,function(l){return a.forEach(function(H){"function"===typeof H?H(l):H&&(H.current=l);return H})})}function Be(a){return a}function fg(a,d){void 0===d&&(d=Be);
var l=[],H=!1;return{read:function(){if(H)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return l.length?l[l.length-1]:a},useMedium:function(Y){var ka=d(Y,H);l.push(ka);return function(){l=l.filter(function(oa){return oa!==ka})}},assignSyncMedium:function(Y){for(H=!0;l.length;){var ka=l;l=[];ka.forEach(Y)}l={push:function(oa){return Y(oa)},filter:function(){return l}}},assignMedium:function(Y){H=!0;var ka=[];if(l.length){var oa=l;l=
[];oa.forEach(Y);ka=l}var Fa=function(){var Qa=ka;ka=[];Qa.forEach(Y)};Promise.resolve().then(Fa);l={push:function(Qa){ka.push(Qa);Promise.resolve().then(Fa)},filter:function(Qa){ka=ka.filter(Qa);return l}}}}}function ye(a){const d=document.activeElement;for(const l of a){if(l===d)break;l.focus();if(document.activeElement!==d)break}}function ef(a,d){return a.map((l,H)=>a[(d+H)%a.length])}function Ve(a,d,l){const H=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,Y=l?a.indexOf(l):-1;a=ef(a,Math.max(Y,
0));1===H.length&&(a=a.filter(ka=>ka!==l));a=a.find(ka=>ka.toLowerCase().startsWith(H.toLowerCase()));return a!==l?a:void 0}function Te(a){return d=>"mouse"===d.pointerType?a(d):void 0}function Lg(a,[d,l]){return Math.min(l,Math.max(d,a))}function hg(a){const d=(0,rw.useRef)({value:a,previous:a});return(0,rw.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function Sj(a=[],d,l){a=[...a];a[l]=d;return a.sort((H,Y)=>H-Y)}function dg(a,
d,l){return 100/(l-d)*(a-d)}function ch(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function Pi(a,d){if(1===a.length)return 0;a=a.map(H=>Math.abs(H-d));const l=Math.min(...a);return a.indexOf(l)}function Nh(a,d,l){a/=2;const H=Ch([0,50],[0,a]);return(a-H(d)*l)*l}function kh(a){return a.slice(0,-1).map((d,l)=>a[l+1]-d)}function Ch(a,d){return l=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(l-a[0])}function Sg(a,d){d=Math.pow(10,d);return Math.round(a*
d)/d}function Ag(a){function d(Wa){return Wa?(0,De.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Wa},children:(0,De.jsx)("div",{className:`w-full h-full bg-${Wa}-500`})}):(0,De.jsx)("div",{className:"tl-color-bg",children:(0,De.jsx)(Yh,{name:"color-swatch"})})}var {color:l,opacity:H,popoverSide:Y,setColor:ka,setOpacity:oa}=a;a=If(a,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:Fa}}=Up.default.useContext(yj),Qa=Up.default.useMemo(()=>{let Wa="";return cl(db=>
{ka(Wa)},100,db=>{Wa=db.target.value})},[]);return(0,De.jsx)(Yk,qf(ne({},a),{border:!0,arrow:!0,side:Y,label:(0,De.jsx)(fc,{content:Fa("whiteboard/color"),side:Y,sideOffset:14,children:d(l)}),children:(0,De.jsxs)("div",{className:"p-1",children:[(0,De.jsx)("div",{className:"tl-color-palette",children:Object.values(js).map(Wa=>(0,De.jsx)("button",{className:`tl-color-drip m-1${Wa===l?" active":""}`,onClick:()=>ka(Wa),children:d(Wa)},Wa))}),(0,De.jsxs)("div",{className:"flex items-center tl-custom-color",
children:[(0,De.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${Xi(l)?"":"active"}`,children:(0,De.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,De.jsx)("input",ne({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(l)?l:"#000000",onChange:Qa,style:{opacity:Xi(l)?0:1}},a))})}),(0,De.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:Fa("whiteboard/select-custom-color")})]}),oa&&(0,De.jsx)("div",
{className:"mx-1 my-2",children:(0,De.jsxs)(ng,{defaultValue:[null!=H?H:0],onValueCommit:Wa=>oa(Wa[0]),max:1,step:.1,"aria-label":Fa("whiteboard/opacity"),className:"tl-slider-root",children:[(0,De.jsx)(kf,{className:"tl-slider-track",children:(0,De.jsx)(Tf,{className:"tl-slider-range"})}),(0,De.jsx)(Zo,{className:"tl-slider-thumb"})]})})]})}))}function Gh(a,d){a&&(0,Tu.flushSync)(()=>a.dispatchEvent(d))}function Zf(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const l=Gf(a),
H=(0,vo.useRef)(!1),Y=(0,vo.useRef)(()=>{});(0,vo.useEffect)(()=>{const ka=Fa=>{if(Fa.target&&!H.current){let Qa=function(){Qi("dismissableLayer.pointerDownOutside",l,Wa,{discrete:!0})};const Wa={originalEvent:Fa};"touch"===Fa.pointerType?(d.removeEventListener("click",Y.current),Y.current=Qa,d.addEventListener("click",Y.current,{once:!0})):Qa()}H.current=!1},oa=window.setTimeout(()=>{d.addEventListener("pointerdown",ka)},0);return()=>{window.clearTimeout(oa);d.removeEventListener("pointerdown",ka);
d.removeEventListener("click",Y.current)}},[d,l]);return{onPointerDownCapture:()=>H.current=!0}}function Wj(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const l=Gf(a),H=(0,vo.useRef)(!1);(0,vo.useEffect)(()=>{const Y=ka=>{ka.target&&!H.current&&Qi("dismissableLayer.focusOutside",l,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",Y);return()=>d.removeEventListener("focusin",Y)},[d,l]);return{onFocusCapture:()=>H.current=!0,onBlurCapture:()=>H.current=!1}}function Zh(){const a=
new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function Qi(a,d,l,{discrete:H}){const Y=l.originalEvent.target;l=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:l});d&&Y.addEventListener(a,d,{once:!0});H?Gh(Y,l):Y.dispatchEvent(l)}function wl(a,{select:d=!1}={}){const l=document.activeElement;for(const H of a)if(pk(H,{select:d}),document.activeElement!==l)break}function dj(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const H="INPUT"===
l.tagName&&"hidden"===l.type;return l.disabled||l.hidden||H?NodeFilter.FILTER_SKIP:0<=l.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function Bm(a,d){for(const l of a)if(!Lm(l,{upTo:d}))return l}function Lm(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function pk(a,{select:d=!1}={}){if(a&&a.focus){const l=document.activeElement;
a.focus({preventScroll:!0});a!==l&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function In(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function Vn(a){return a.filter(d=>"A"!==d.tagName)}function Ig(a){return void 0!==a}function jo(a){return null!==a}function io(a){const [d,l="center"]=a.split("-");return[d,l]}function Jn(a){const d=Gf(a),l=(0,jf.useRef)(""),H=(0,jf.useRef)(0);a=(0,jf.useCallback)(ka=>{ka=l.current+ka;d(ka);(function Qa(Fa){l.current=Fa;window.clearTimeout(H.current);
""!==Fa&&(H.current=window.setTimeout(()=>Qa(""),1E3))})(ka)},[d]);const Y=(0,jf.useCallback)(()=>{l.current="";window.clearTimeout(H.current)},[]);(0,jf.useEffect)(()=>()=>window.clearTimeout(H.current),[]);return[l,a,Y]}function Wl(a,d,l){const H=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,Y=l?a.indexOf(l):-1;a=Km(a,Math.max(Y,0));1===H.length&&(a=a.filter(ka=>ka!==l));a=a.find(ka=>ka.textValue.toLowerCase().startsWith(H.toLowerCase()));return a!==l?a:void 0}function Km(a,d){return a.map((l,
H)=>a[(d+H)%a.length])}function om(a){var {options:d,tooltip:l,popoverSide:H,chevron:Y=!0,value:ka,onValueChange:oa}=a;a=If(a,"options tooltip popoverSide chevron value onValueChange".split(" "));const [Fa,Qa]=bg.useState(!1);return(0,Lk.jsx)("div",qf(ne({},a),{className:"tl-select-input",children:(0,Lk.jsxs)(xC,{open:Fa,onOpenChange:Qa,value:ka,onValueChange:oa,children:[(0,Lk.jsx)(fc,{content:l,side:H,children:(0,Lk.jsxs)(ap,{className:"tl-select-input-trigger",children:[(0,Lk.jsx)("div",{className:"tl-select-input-trigger-value",
children:(0,Lk.jsx)(Zt,{})}),Y&&(0,Lk.jsx)(yw,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,Lk.jsx)(Yh,{name:Fa?"chevron-up":"chevron-down"})})]})}),(0,Lk.jsx)(Sr,{className:"tl-select-input-portal",children:(0,Lk.jsxs)(yC,{className:"tl-select-input-content",side:H,position:"popper",sideOffset:14,align:"center",onKeyDown:Wa=>Wa.stopPropagation(),children:[(0,Lk.jsx)(Iy,{}),(0,Lk.jsx)(AC,{className:"tl-select-input-viewport",children:d.map(Wa=>(0,Lk.jsx)(BC,{className:"tl-select-input-select-item",
value:Wa.value,children:(0,Lk.jsx)(En,{children:Wa.label})},Wa.value))}),(0,Lk.jsx)(zC,{})]})})]})}))}function Ki(a){var {scaleLevel:d,compact:l,popoverSide:H}=a;If(a,["scaleLevel","compact","popoverSide"]);const Y=ff();({handlers:{t:a}}=Hd.default.useContext(yj));const ka=[{label:l?"XS":a("whiteboard/extra-small"),value:"xs"},{label:l?"SM":a("whiteboard/small"),value:"sm"},{label:l?"MD":a("whiteboard/medium"),value:"md"},{label:l?"LG":a("whiteboard/large"),value:"lg"},{label:l?"XL":a("whiteboard/extra-large"),
value:"xl"},{label:l?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,CC.jsx)(om,{tooltip:a("whiteboard/scale-level"),options:ka,value:d,popoverSide:H,chevron:!l,onValueChange:oa=>{Y.api.setScaleLevel(oa)}})}function Bj(a,d){return function(l){return a(d(l))}}function on(a,d){return d(a)}function Ym(a,d){return function(l){return a(d,l)}}function tj(a,d){return function(){return a(d)}}function Xl(a,d){d(a);return a}function $h(){for(var a=arguments.length,d=Array(a),l=0;l<a;l++)d[l]=arguments[l];
return d}function ko(a){a()}function lo(a){return function(){return a}}function Yl(){for(var a=arguments.length,d=Array(a),l=0;l<a;l++)d[l]=arguments[l];return function(){d.map(ko)}}function yl(){}function nh(a,d){return a(1,d)}function rk(a,d){a(0,d)}function Cm(a){a(2)}function To(a){return a(4)}function ah(a,d){return nh(a,Ym(d,0))}function ei(a,d){var l=a(1,function(H){l();d(H)});return l}function Dg(){var a=[];return function(d,l){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(l),
function(){var H=a.indexOf(l);-1<H&&a.splice(H,1)};case 0:a.slice().forEach(function(H){H(l)});break;default:throw Error("unrecognized action "+d);}}}function Yf(a){var d=a,l=Dg();return function(H,Y){switch(H){case 1:Y(d);break;case 0:d=Y;break;case 4:return d}return l(H,Y)}}function Kn(a){var d,l;return function(H,Y){switch(H){case 1:if(Y){if(l===Y)break;d&&d();l=Y;return d=a(1,Y)}d&&d();return yl;case 2:d&&d();l=null;break;default:throw Error("unrecognized action "+H);}}}function gk(a){return Xl(Dg(),
function(d){return ah(a,d)})}function Xj(a,d){return Xl(Yf(d),function(l){return ah(a,l)})}function xl(){for(var a=arguments.length,d=Array(a),l=0;l<a;l++)d[l]=arguments[l];return function(H){return d.reduceRight(on,H)}}function Xe(a){for(var d=arguments.length,l=Array(1<d?d-1:0),H=1;H<d;H++)l[H-1]=arguments[H];var Y=xl.apply(void 0,l);return function(ka,oa){switch(ka){case 1:return nh(a,Y(oa));case 2:a(2);break;default:throw Error("unrecognized action "+ka);}}}function hk(a,d){return a===d}function Og(a){void 0===
a&&(a=hk);var d;return function(l){return function(H){a(d,H)||(d=H,l(H))}}}function sh(a){return function(d){return function(l){a(l)&&d(l)}}}function tg(a){return function(d){return Bj(d,a)}}function Wk(a){return function(d){return function(){return d(a)}}}function pm(a,d){return function(l){return function(H){return l(d=a(d,H))}}}function Mn(a){return function(d){return function(l){0<a?a--:d(l)}}}function qj(a){var d,l;return function(H){return function(Y){d=Y;l||=setTimeout(function(){l=void 0;
H(d)},a)}}}function yn(a){var d,l;return function(H){return function(Y){d=Y;l&&clearTimeout(l);l=setTimeout(function(){H(d)},a)}}}function Hh(){for(var a=arguments.length,d=Array(a),l=0;l<a;l++)d[l]=arguments[l];var H=Array(d.length),Y=0,ka=null,oa=Math.pow(2,d.length)-1;d.forEach(function(Fa,Qa){var Wa=Math.pow(2,Qa);nh(Fa,function(db){var jb=Y;Y|=Wa;H[Qa]=db;jb!==oa&&Y===oa&&ka&&(ka(),ka=null)})});return function(Fa){return function(Qa){var Wa=function(){return Fa([Qa].concat(H))};Y===oa?Wa():ka=
Wa}}}function Mi(){for(var a=arguments.length,d=Array(a),l=0;l<a;l++)d[l]=arguments[l];return function(H,Y){switch(H){case 1:return Yl.apply(void 0,d.map(function(ka){return ka(1,Y)}));case 2:break;default:throw Error("unrecognized action "+H);}}}function Wh(a,d){void 0===d&&(d=hk);return Xe(a,Og(d))}function Yj(){for(var a=Dg(),d=arguments.length,l=Array(d),H=0;H<d;H++)l[H]=arguments[H];var Y=Array(l.length),ka=0,oa=Math.pow(2,l.length)-1;l.forEach(function(Fa,Qa){var Wa=Math.pow(2,Qa);nh(Fa,function(db){Y[Qa]=
db;ka|=Wa;ka===oa&&a(0,Y)})});return function(Fa,Qa){switch(Fa){case 1:return ka===oa&&Qa(Y),a(1,Qa);case 2:a(2);break;default:throw Error("unrecognized action "+Fa);}}}function di(a,d,l){void 0===d&&(d=[]);l=(void 0===l?{singleton:!0}:l).singleton;return{id:Symbol(),constructor:a,dependencies:d,singleton:l}}function pn(a){var d=new Map;return function Y(H){var ka=H.id,oa=H.constructor,Fa=H.dependencies;if((H=H.singleton)&&d.has(ka))return d.get(ka);oa=oa(Fa.map(function(Qa){return Y(Qa)}));H&&d.set(ka,
oa);return oa}(a)}function Ko(a,d){if(null==a)return{};var l={},H=Object.keys(a),Y;for(Y=0;Y<H.length;Y++){var ka=H[Y];0<=d.indexOf(ka)||(l[ka]=a[ka])}return l}function hq(a,d){if(a){if("string"===typeof a)return np(a,d);var l=Object.prototype.toString.call(a).slice(8,-1);"Object"===l&&a.constructor&&(l=a.constructor.name);if("Map"===l||"Set"===l)return Array.from(a);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return np(a,d)}}function np(a,d){if(null==d||d>a.length)d=a.length;
for(var l=0,H=Array(d);l<d;l++)H[l]=a[l];return H}function mo(a,d){var l="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(l)return(l=l.call(a)).next.bind(l);if(Array.isArray(a)||(l=hq(a))||d&&a&&"number"===typeof a.length){l&&(a=l);var H=0;return function(){return H>=a.length?{done:!0}:{done:!1,value:a[H++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function ro(a,
d){for(var l={},H={},Y=0,ka=a.length;Y<ka;)H[a[Y]]=1,Y+=1;for(var oa in d)H.hasOwnProperty(oa)||(l[oa]=d[oa]);return l}function Ln(a,d,l){function H(jb,Mb){jb.propsReady&&(0,jb.propsReady)(0,!1);for(var Ub=mo(oa),Nb;!(Nb=Ub()).done;)Nb=Nb.value,(0,jb[d.required[Nb]])(0,Mb[Nb]);for(Ub=mo(Fa);!(Nb=Ub()).done;)if(Nb=Nb.value,Nb in Mb)(0,jb[d.optional[Nb]])(0,Mb[Nb]);jb.propsReady&&(0,jb.propsReady)(0,!0)}function Y(jb){return Qa.reduce(function(Mb,Ub){Mb[Ub]=function(Nb){(0,jb[d.methods[Ub]])(0,Nb)};
return Mb},{})}function ka(jb){return Wa.reduce(function(Mb,Ub){Mb[Ub]=Kn(jb[d.events[Ub]]);return Mb},{})}var oa=Object.keys(d.required||{}),Fa=Object.keys(d.optional||{}),Qa=Object.keys(d.methods||{}),Wa=Object.keys(d.events||{}),db=(0,yo.createContext)({});return{Component:(0,yo.forwardRef)(function(jb,Mb){var Ub=jb.children,Nb=Ko(jb,FC),lc=(0,yo.useState)(function(){return Xl(pn(a),function($b){return H($b,Nb)})})[0],xc=(0,yo.useState)(tj(ka,lc))[0];cv(function(){for(var $b=mo(Wa),nc;!(nc=$b()).done;)if(nc=
nc.value,nc in Nb)(0,xc[nc])(1,Nb[nc]);return function(){Object.values(xc).map(Cm)}},[Nb,xc,lc]);cv(function(){H(lc,Nb)});(0,yo.useImperativeHandle)(Mb,lo(Y(lc)));return(0,yo.createElement)(db.Provider,{value:lc},l?(0,yo.createElement)(l,ro([].concat(oa,Fa,Wa),Nb),Ub):Ub)}),usePublisher:function(jb){return(0,yo.useCallback)(Ym(rk,(0,yo.useContext)(db)[jb]),[jb])},useEmitterValue:function(jb){var Mb=(0,yo.useContext)(db)[jb];jb=(0,yo.useState)(tj(To,Mb));var Ub=jb[0],Nb=jb[1];cv(function(){return nh(Mb,
function(lc){lc!==Ub&&Nb(lo(lc))})},[Mb,Ub]);return Ub},useEmitter:function(jb,Mb){var Ub=(0,yo.useContext)(db)[jb];cv(function(){return Ub(1,Mb)},[Mb,Ub])}}}function Cg(){return Cg=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var l=arguments[d],H;for(H in l)Object.prototype.hasOwnProperty.call(l,H)&&(a[H]=l[H])}return a},Cg.apply(this,arguments)}function so(a,d){if(null==a)return{};var l,H,Y={},ka=Object.keys(a);for(H=0;H<ka.length;H++)0<=d.indexOf(l=ka[H])||(Y[l]=a[l]);return Y}
function Eo(a,d){(null==d||d>a.length)&&(d=a.length);for(var l=0,H=Array(d);l<d;l++)H[l]=a[l];return H}function Fm(a,d){var l="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(l)return(l=l.call(a)).next.bind(l);if(Array.isArray(a)||(l=function(Y,ka){if(Y){if("string"==typeof Y)return Eo(Y,ka);var oa=Object.prototype.toString.call(Y).slice(8,-1);return"Object"===oa&&Y.constructor&&(oa=Y.constructor.name),"Map"===oa||"Set"===oa?Array.from(Y):"Arguments"===oa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(oa)?
Eo(Y,ka):void 0}}(a))||d&&a&&"number"==typeof a.length){l&&(a=l);var H=0;return function(){return H>=a.length?{done:!0}:{done:!1,value:a[H++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function $k(a,d){void 0===d&&(d=!0);var l=(0,Ci.useRef)(null),H=function(ka){};if("undefined"!=typeof ResizeObserver){var Y=new ResizeObserver(function(ka){ka=ka[0].target;null!==ka.offsetParent&&a(ka)});
H=function(ka){ka&&d?(Y.observe(ka),l.current=ka):(l.current&&Y.unobserve(l.current),l.current=null)}}return{ref:l,callbackRef:H}}function Xh(a,d){return void 0===d&&(d=!0),$k(a,d).callbackRef}function Mj(a,d,l,H,Y,ka,oa){return $k(function(Fa){for(var Qa=function(jb,Mb,Ub,Nb){Ub=jb.length;if(0===Ub)return null;for(var lc=[],xc=0;xc<Ub;xc++){var $b=jb.item(xc);if($b&&void 0!==$b.dataset.index){var nc=parseInt($b.dataset.index),jc=parseFloat($b.dataset.knownSize),Ic=Mb($b,"offsetHeight");if(0===Ic&&
Nb("Zero-sized element, this should not happen",{child:$b},mn.ERROR),Ic!==jc)$b=lc[lc.length-1],0===lc.length||$b.size!==Ic||$b.endIndex!==nc-1?lc.push({startIndex:nc,endIndex:nc,size:Ic}):lc[lc.length-1].endIndex++}}return lc}(Fa.children,d,0,Y),Wa=Fa.parentElement;!Wa.dataset.virtuosoScroller;)Wa=Wa.parentElement;var db="window"===Wa.firstElementChild.dataset.viewportType;H({scrollTop:Math.max(oa?oa.scrollTop:db?window.pageYOffset||document.documentElement.scrollTop:Wa.scrollTop,0),scrollHeight:oa?
oa.scrollHeight:db?document.documentElement.scrollHeight:Wa.scrollHeight,viewportHeight:oa?oa.offsetHeight:db?window.innerHeight:Wa.offsetHeight});null==ka||ka(function(jb,Mb,Ub){return"normal"===Mb||null!=Mb&&Mb.endsWith("px")||Ub("row-gap was not resolved to pixel value correctly",Mb,mn.WARN),"normal"===Mb?0:parseInt(null!=Mb?Mb:"0",10)}(0,getComputedStyle(Fa).rowGap,Y));null!==Qa&&a(Qa)},l)}function fn(a,d){return Math.round(a.getBoundingClientRect()[d])}function Fo(a,d,l,H,Y){void 0===H&&(H=yl);
var ka=(0,Ci.useRef)(null),oa=(0,Ci.useRef)(null),Fa=(0,Ci.useRef)(null),Qa=(0,Ci.useRef)(!1),Wa=(0,Ci.useCallback)(function(db){db=db.target;var jb=db===window||db===document,Mb=jb?window.pageYOffset||document.documentElement.scrollTop:db.scrollTop,Ub=jb?document.documentElement.scrollHeight:db.scrollHeight,Nb=jb?window.innerHeight:db.offsetHeight;db=function(){a({scrollTop:Math.max(Mb,0),scrollHeight:Ub,viewportHeight:Nb})};Qa.current?(0,GC.flushSync)(db):db();Qa.current=!1;null!==oa.current&&(Mb===
oa.current||0>=Mb||Mb===Ub-Nb)&&(oa.current=null,d(!0),Fa.current&&(clearTimeout(Fa.current),Fa.current=null))},[a,d]);return(0,Ci.useEffect)(function(){var db=Y||ka.current;return H(Y||ka.current),Wa({target:db}),db.addEventListener("scroll",Wa,{passive:!0}),function(){H(null);db.removeEventListener("scroll",Wa)}},[ka,Wa,l,H,Y]),{scrollerRef:ka,scrollByCallback:function(db){Qa.current=!0;ka.current.scrollBy(db)},scrollToCallback:function(db){var jb=ka.current;if(jb&&!("offsetHeight"in jb&&0===jb.offsetHeight)){var Mb,
Ub,Nb,lc="smooth"===db.behavior;if(jb===window?(Ub=Math.max(fn(document.documentElement,"height"),document.documentElement.scrollHeight),Mb=window.innerHeight,Nb=document.documentElement.scrollTop):(Ub=jb.scrollHeight,Mb=fn(jb,"height"),Nb=jb.scrollTop),db.top=Math.ceil(Math.max(Math.min(Ub-Mb,db.top),0)),1.01>Math.abs(Mb-Ub)||db.top===Nb)return a({scrollTop:Nb,scrollHeight:Ub,viewportHeight:Mb}),void(lc&&d(!0));lc?(oa.current=db.top,Fa.current&&clearTimeout(Fa.current),Fa.current=setTimeout(function(){Fa.current=
null;oa.current=null;d(!0)},1E3)):oa.current=null;jb.scrollTo(db)}}}}function w(a,d,l,H,Y){return void 0===H&&(H=rj),void 0===Y&&(Y=rj),{k:a,v:d,lvl:l,l:H,r:Y}}function U(a,d){if(a===rj)return rj;var l=a.k,H=a.l,Y=a.r;if(d===l){if(H===rj)return Y;if(Y===rj)return H;d=pb(H);return Sc(Yb(a,{k:d[0],v:d[1],l:tb(H)}))}return Sc(Yb(a,d<l?{l:U(H,d)}:{r:U(Y,d)}))}function wa(a,d,l){return(void 0===l&&(l="k"),a===rj)?[-Infinity,void 0]:a[l]===d?[a.k,a.v]:a[l]<d?(d=wa(a.r,d,l),-Infinity===d[0]?[a.k,a.v]:d):
wa(a.l,d,l)}function sa(a,d,l){return a===rj?w(d,l,1):d===a.k?Yb(a,{k:d,v:l}):Nd(Ee(Yb(a,d<a.k?{l:sa(a.l,d,l)}:{r:sa(a.r,d,l)})))}function Ea(a,d,l){if(a===rj)return[];var H=a.k,Y=a.v,ka=a.r,oa=[];return H>d&&(oa=oa.concat(Ea(a.l,d,l))),H>=d&&H<=l&&oa.push({k:H,v:Y}),H<=l&&(oa=oa.concat(Ea(ka,d,l))),oa}function Ya(a){return a===rj?[]:[].concat(Ya(a.l),[{k:a.k,v:a.v}],Ya(a.r))}function pb(a){return a.r===rj?[a.k,a.v]:pb(a.r)}function tb(a){return a.r===rj?a.l:Sc(Yb(a,{r:tb(a.r)}))}function Yb(a,d){return w(void 0!==
d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==d.r?d.r:a.r)}function Cc(a){return a===rj||a.lvl>a.r.lvl}function Sc(a){var d=a.l,l=a.r,H=a.lvl;if(l.lvl>=H-1&&d.lvl>=H-1)return a;if(H>l.lvl+1){if(Cc(d))return Ee(Yb(a,{lvl:H-1}));if(d===rj||d.r===rj)throw Error("Unexpected empty nodes");return Yb(d.r,{l:Yb(d,{r:d.r.l}),r:Yb(a,{l:d.r.r,lvl:H-1}),lvl:H})}if(Cc(a))return Nd(Yb(a,{lvl:H-1}));if(l===rj||l.l===rj)throw Error("Unexpected empty nodes");d=l.l;var Y=
Cc(d)?l.lvl-1:l.lvl;return Yb(d,{l:Yb(a,{r:d.l,lvl:H-1}),r:Nd(Yb(l,{l:d.r,lvl:Y})),lvl:d.lvl+1})}function Fd(a,d,l){return a===rj?[]:Md(Ea(a,wa(a,d)[0],l),function(H){return{index:H.k,value:H.v}})}function Md(a,d){var l=a.length;if(0===l)return[];var H=d(a[0]),Y=H.index;H=H.value;for(var ka=[],oa=1;oa<l;oa++){var Fa=d(a[oa]),Qa=Fa.index;Fa=Fa.value;ka.push({start:Y,end:Qa-1,value:H});Y=Qa;H=Fa}return ka.push({start:Y,end:Infinity,value:H}),ka}function Nd(a){var d=a.r,l=a.lvl;return d===rj||d.r===
rj||d.lvl!==l||d.r.lvl!==l?a:Yb(d,{l:Yb(a,{r:d.l}),lvl:l+1})}function Ee(a){var d=a.l;return d===rj||d.lvl!==a.lvl?a:Yb(d,{r:Yb(a,{l:d.r})})}function Mf(a,d,l,H){void 0===H&&(H=0);for(var Y=a.length-1;H<=Y;){var ka=Math.floor((H+Y)/2),oa=l(a[ka],d);if(0===oa)return ka;if(-1===oa){if(2>Y-H)return ka-1;Y=ka-1}else{if(Y===H)return ka;H=ka+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);}function fh(a){var d=a.size,l=a.startIndex,H=a.endIndex;return function(Y){return Y.start===
l&&(Y.end===H||Infinity===Y.end)&&Y.value===d}}function ck(a,d){a=a.index;return d===a?0:d<a?-1:1}function Mg(a,d){a=a.offset;return d===a?0:d<a?-1:1}function Oh(a){return{index:a.index,value:a}}function Li(a,d,l,H){var Y=0,ka=0,oa=0,Fa;0!==d?(oa=a[Fa=Mf(a,d-1,ck)].offset,ka=wa(l,d-1),Y=ka[0],ka=ka[1],a.length&&a[Fa].size===wa(l,d)[1]&&--Fa,a=a.slice(0,Fa+1)):a=[];for(d=Fm(Fd(l,d,Infinity));!(l=d()).done;)Fa=l.value,l=Fa.start,Fa=Fa.value,Y=l-Y,oa=Y*ka+oa+Y*H,a.push({offset:oa,size:Fa,index:l}),Y=
l,ka=Fa;return{offsetTree:a,lastIndex:Y,lastOffset:oa,lastSize:ka}}function jj(a,d){var l=d[0],H=d[1],Y=d[3];0<l.length&&(0,d[2])("received item sizes",l,mn.DEBUG);var ka=a.sizeTree;d=ka;var oa=0;if(0<H.length&&ka===rj&&2===l.length){var Fa=l[0].size,Qa=l[1].size;d=H.reduce(function(db,jb){return sa(sa(db,jb,Fa),jb+1,Qa)},d)}else l=function(db,jb){var Mb,Ub=db===rj?0:Infinity;for(jb=Fm(jb);!(Mb=jb()).done;){var Nb=Mb.value;Mb=Nb.size;var lc=Nb.startIndex,xc=Nb.endIndex;if(Ub=Math.min(Ub,lc),db===
rj)db=sa(db,0,Mb);else{var $b=Fd(db,lc-1,xc+1);if(!$b.some(fh(Nb))){var nc,jc=Nb=!1;for($b=Fm($b);!(nc=$b()).done;){var Ic=nc.value;nc=Ic.start;var Jc=Ic.end;Ic=Ic.value;Nb?(xc>=nc||Mb===Ic)&&(db=U(db,nc)):(jc=Ic!==Mb,Nb=!0);Jc>xc&&xc>=nc&&Ic!==Mb&&(db=sa(db,xc+1,Ic))}jc&&(db=sa(db,lc,Mb))}}}return[db,Ub]}(d,l),d=l[0],oa=l[1];if(d===ka)return a;a=Li(a.offsetTree,oa,d,Y);var Wa=a.offsetTree;return{sizeTree:d,offsetTree:Wa,lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:H.reduce(function(db,
jb){return sa(db,jb,ri(jb,Wa,Y))},rj),groupIndices:H}}function ri(a,d,l){if(0===d.length)return 0;d=d[Mf(d,a,ck)];a-=d.index;a=d.size*a+(a-1)*l+d.offset;return 0<a?a+l:a}function gh(a,d,l){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+1;a=cg("LAST"===a.index?l:a.index,d);return Math.max(0,a,Math.min(l,a))}function cg(a,d){if(d.groupOffsetTree===rj)return a;for(var l=0;d.groupIndices[l]<=a+l;)l++;return a+l}function li(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),
a.behavior&&JC||(a.behavior="auto"),a.offset||(a.offset=0),a}function wh(a){return!!a&&("smooth"===a?"smooth":"auto")}function ol(a){return a.reduce(function(d,l){return d.groupIndices.push(d.totalCount),d.totalCount+=l+1,d},{totalCount:0,groupIndices:[]})}function Pj(a,d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function Nk(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function Zm(a,d,l){return"number"==typeof a?"up"===l&&"top"===d||"down"===l&&"bottom"===d?a:0:"up"===l?"top"===
d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function gm(a,d,l){if(0===a.length)return[];if(d.groupOffsetTree===rj)return a.map(function(Qa){return Cg({},Qa,{index:Qa.index+l,originalIndex:Qa.index})});var H,Y=[],ka=Fd(d.groupOffsetTree,a[0].index,a[a.length-1].index),oa=void 0,Fa=0;for(a=Fm(a);!(H=a()).done;)H=H.value,(!oa||oa.end<H.index)&&(oa=ka.shift(),Fa=d.groupIndices.indexOf(oa.start)),Y.push(Cg({},H.index===oa.start?{type:"group",index:Fa}:{index:H.index-(Fa+1)+l,groupIndex:Fa},{size:H.size,
offset:H.offset,originalIndex:H.index,data:H.data}));return Y}function $n(a,d,l,H,Y,ka){var oa=0,Fa=0;0<a.length&&(oa=a[0].offset,Fa=a[a.length-1],Fa=Fa.offset+Fa.size);var Qa=l-Y.lastIndex,Wa=oa;H=Y.lastOffset+Qa*Y.lastSize+(Qa-1)*H-Fa;return{items:gm(a,Y,ka),topItems:gm(d,Y,ka),topListHeight:d.reduce(function(db,jb){return jb.size+db},0),offsetTop:oa,offsetBottom:H,top:Wa,bottom:Fa,totalCount:l,firstItemIndex:ka}}function Pq(a){var d,l=!1;return function(){return l||(l=!0,d=a()),d}}function qo(a,
d){var l=(0,Ci.useRef)(null),H=(0,Ci.useCallback)(function(Qa){if(null!==Qa&&Qa.offsetParent){var Wa=Qa.getBoundingClientRect();Qa=Wa.width;if(d){var db=d.getBoundingClientRect();Wa=Wa.top-db.top;db=db.height-Math.max(0,Wa);Wa+=d.scrollTop}else db=window.innerHeight-Math.max(0,Wa.top),Wa=Wa.top+window.pageYOffset;l.current={offsetTop:Wa,visibleHeight:db,visibleWidth:Qa};a(l.current)}},[a,d]),Y=$k(H),ka=Y.callbackRef,oa=Y.ref,Fa=(0,Ci.useCallback)(function(){H(oa.current)},[H,oa]);return(0,Ci.useEffect)(function(){if(d){d.addEventListener("scroll",
Fa);var Qa=new ResizeObserver(Fa);return Qa.observe(d),function(){d.removeEventListener("scroll",Fa);Qa.unobserve(d)}}return window.addEventListener("scroll",Fa),window.addEventListener("resize",Fa),function(){window.removeEventListener("scroll",Fa);window.removeEventListener("resize",Fa)}},[Fa,d]),ka}function xh(a){return a}function zn(a,d){var l=Dg();return nh(l,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),
ah(l,a),l}function Hi(a,d){if("string"!=typeof a)return{context:d}}function ip(a){var d=a.usePublisher,l=a.useEmitter,H=a.useEmitterValue;return bh.memo(function(Y){var ka=Y.style,oa=Y.children;Y=so(Y,yH);var Fa=d("scrollContainerState"),Qa=H("ScrollerComponent"),Wa=d("smoothScrollTargetReached"),db=H("scrollerRef"),jb=H("context");Fa=Fo(Fa,Wa,Qa,db);Wa=Fa.scrollerRef;db=Fa.scrollByCallback;return l("scrollTo",Fa.scrollToCallback),l("scrollBy",db),(0,Ci.createElement)(Qa,Cg({ref:Wa,style:Cg({},SC,
ka),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},Y,Hi(Qa,jb)),oa)})}function no(a){var d=a.usePublisher,l=a.useEmitter,H=a.useEmitterValue;return bh.memo(function(Y){var ka=Y.style,oa=Y.children;Y=so(Y,OC);var Fa=d("windowScrollContainerState"),Qa=H("ScrollerComponent"),Wa=d("smoothScrollTargetReached"),db=H("totalListHeight"),jb=H("deviation"),Mb=H("customScrollParent"),Ub=H("context");Wa=Fo(Fa,Wa,Qa,yl,Mb);var Nb=Wa.scrollerRef;Fa=Wa.scrollByCallback;Wa=Wa.scrollToCallback;
return $t(function(){return Nb.current=Mb||window,function(){Nb.current=null}},[Nb,Mb]),l("windowScrollTo",Wa),l("scrollBy",Fa),(0,Ci.createElement)(Qa,Cg({style:Cg({position:"relative"},ka,0!==db?{height:db+jb}:{}),"data-virtuoso-scroller":!0},Y,Hi(Qa,Ub)),oa)})}function jp(a,d,l){return Array.from({length:d-a+1}).map(function(H,Y){return{index:Y+a,data:null==l?void 0:l[Y+a]}})}function iq(a,d){return a&&a.column===d.column&&a.row===d.row}function qn(a,d,l,H){var Y=l.height;return void 0===Y||0===
H.length?{top:0,bottom:0}:{top:Wn(a,d,l,H[0].index),bottom:Wn(a,d,l,H[H.length-1].index)+Y}}function Wn(a,d,l,H){var Y=d.column;a=Ws(1,Vs((a.width+Y)/(l.width+Y)));H=Vs(H/a);l=H*l.height+Ws(0,H-1)*d.row;return 0<l?l+d.row:l}function Zl(a,d,l){return"normal"===d||null!=d&&d.endsWith("px")||l(a+" was not resolved to pixel value correctly",d,mn.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function zl(a,d){zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,H){l.__proto__=H;return l};
return zl(a,d)}function Go(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;zl(a,d)}function Jo(a){Jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return Jo(a)}function Io(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function mq(a,
d,l){mq=Io()?Reflect.construct.bind():function(H,Y,ka){var oa=[null];oa.push.apply(oa,Y);H=new (Function.bind.apply(H,oa));ka&&zl(H,ka.prototype);return H};return mq.apply(null,arguments)}function Gp(a){var d="function"===typeof Map?new Map:void 0;Gp=function(l){function H(){return mq(l,arguments,Jo(this).constructor)}if(null===l||-1===Function.toString.call(l).indexOf("[native code]"))return l;if("function"!==typeof l)throw new TypeError("Super expression must either be null or a function");if("undefined"!==
typeof d){if(d.has(l))return d.get(l);d.set(l,H)}H.prototype=Object.create(l.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}});return zl(H,l)};return Gp(a)}function Nq(a,d,l){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*l)}function Np(a,d,l,H){void 0===H&&(H=Nq);if(0===d)return H(l,l,l);a=(a%360+360)%360/60;var Y=(1-Math.abs(2*l-1))*d,ka=Y*(1-Math.abs(a%2-1)),oa=d=0,Fa=0;0<=a&&1>a?(d=Y,oa=ka):1<=a&&2>a?(d=ka,oa=Y):2<=a&&3>a?(oa=Y,Fa=ka):3<=a&&4>a?(oa=
ka,Fa=Y):4<=a&&5>a?(d=ka,Fa=Y):5<=a&&6>a&&(d=Y,Fa=ka);l-=Y/2;return H(d+l,oa+l,Fa+l)}function ur(a){if("string"!==typeof a)throw new $p(3);if("string"===typeof a){var d=a.toLowerCase();a=YC[d]?"#"+YC[d]:a}if(a.match(ZC))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(nv))return d=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};
if(a.match(Vr))return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(az))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d};if(d=Hw.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)};if(d=$C.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+
d[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var l=bz.exec(a);if(l){d=parseInt(""+l[1],10);var H=parseInt(""+l[2],10)/100;l=parseInt(""+l[3],10)/100;d="rgb("+Np(d,H,l)+")";H=Hw.exec(d);if(!H)throw new $p(4,a,d);return{red:parseInt(""+H[1],10),green:parseInt(""+H[2],10),blue:parseInt(""+H[3],10)}}if(d=cp.exec(a.substring(0,50))){H=parseInt(""+d[1],10);l=parseInt(""+d[2],10)/100;var Y=parseInt(""+d[3],10)/100;H="rgb("+Np(H,l,Y)+")";l=Hw.exec(H);if(!l)throw new $p(4,
a,H);return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new $p(5);}function Nn(a){a=a.toString(16);return 1===a.length?"0"+a:a}function pr(a,d,l){return Zs("#"+Nn(Math.round(255*a))+Nn(Math.round(255*d))+Nn(Math.round(255*l)))}function kp(a,d,l){if("number"===typeof a&&"number"===typeof d&&"number"===typeof l)return Zs("#"+Nn(a)+Nn(d)+Nn(l));if("object"===typeof a&&void 0===d&&void 0===
l)return Zs("#"+Nn(a.red)+Nn(a.green)+Nn(a.blue));throw new $p(6);}function jq(a){if("object"!==typeof a)throw new $p(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?kp(a.red,a.green,a.blue):"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new $p(7);return a}if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return kp(a);
if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?Np(a.hue,a.saturation,a.lightness,pr):"rgba("+Np(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new $p(2);return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=Np(a.hue,a.saturation,a.lightness,pr);else throw new $p(1);
return a}throw new $p(8);}function kq(a,d,l){return function(){var H=l.concat(Array.prototype.slice.call(arguments));return H.length>=d?a.apply(this,H):kq(a,d,H)}}function lq(a,d){if("transparent"===d)return d;d=ur(d);var l=d.red/255,H=d.green/255,Y=d.blue/255,ka=Math.max(l,H,Y),oa=Math.min(l,H,Y),Fa=(ka+oa)/2;if(ka===oa)d=void 0!==d.alpha?{hue:0,saturation:0,lightness:Fa,alpha:d.alpha}:{hue:0,saturation:0,lightness:Fa};else{var Qa=ka-oa;oa=.5<Fa?Qa/(2-ka-oa):Qa/(ka+oa);switch(ka){case l:l=(H-Y)/
Qa+(H<Y?6:0);break;case H:l=(Y-l)/Qa+2;break;default:l=(l-H)/Qa+4}l*=60;d=void 0!==d.alpha?{hue:l,saturation:oa,lightness:Fa,alpha:d.alpha}:{hue:l,saturation:oa,lightness:Fa}}Fa=Ye;a=d.lightness-parseFloat(a);return jq(Fa({},d,{lightness:Math.max(0,Math.min(1,a))}))}function $m(a,d){var l;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let H=null!=(l=d.fill)?l:a.props.fill;void 0===H||Xi(H)||"var(--ls-secondary-background-color)"===
H||d.noFill||!nD.includes(a.props.type)||(a=Fn(.3,H),d.stroke=a);return d}function Mp({strokeWidth:a,size:d,mode:l}){return"svg"===l?(0,ov.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,d[1]-2*a),strokeWidth:4*a}):(0,ov.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function Sq(){const a=ff();return"panning"===a.inputs.state||
"pinching"===a.inputs.state}function Xn({left:a,middle:d,right:l,stroke:H,strokeWidth:Y}){return(0,Mw.jsxs)("g",{children:[(0,Mw.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${l}`}),(0,Mw.jsx)("path",{d:`M ${a} L ${d} ${l}`,fill:"none",stroke:H,strokeWidth:Y,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function lp(a,d,l){d=J(a,d,a,l).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(l=d[0])?le.rotWith(l,
a,Math.PI/6):a;a=l?le.rotWith(l,a,-Math.PI/6):a;return{left:d,right:a}}function nq(a,d,l){const {left:H,right:Y}=lp(a,d,l);return`M ${H} L ${a} ${Y}`}function vr(a,d,l,H,Y){a=a.strokeWidth;var ka=le.dist(d,l);a=Math.min(ka/3,16*a);ka=[];ka.push(`M ${d} L ${l}`);H&&ka.push(nq(d,l,a));Y&&ka.push(nq(l,d,a));return ka.join(" ")}function um({id:a,bounds:d,labelSize:l,offset:H,scale:Y=1}){return(0,tv.jsx)("defs",{children:(0,tv.jsxs)("mask",{id:a+"_clip",children:[(0,tv.jsx)("rect",{x:-100,y:-100,width:d.width+
200,height:d.height+200,fill:"white"}),(0,tv.jsx)("rect",{x:d.width/2-l[0]/2*Y+((null==H?void 0:H[0])||0),y:d.height/2-l[1]/2*Y+((null==H?void 0:H[1])||0),width:l[0]*Y,height:l[1]*Y,rx:4*Y,ry:4*Y,fill:"black"})]})})}function oq(a,d,l,H=Y=>Y){return a*H(.5-d*(.5-l))}function Hp(a){return[-a[0],-a[1]]}function qm(a,d){return[a[0]+d[0],a[1]+d[1]]}function al(a,d){return[a[0]-d[0],a[1]-d[1]]}function rm(a,d){return[a[0]*d,a[1]*d]}function Mm(a){return[a[1],-a[0]]}function qr(a,d){return a[0]===d[0]&&
a[1]===d[1]}function Ip(a){return a[0]*a[0]+a[1]*a[1]}function Jp(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function La(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function Xa(a,d,l){let H=Math.sin(l);l=Math.cos(l);let Y=a[0]-d[0];a=a[1]-d[1];return[Y*l-a*H+d[0],Y*H+a*l+d[1]]}function Ka(a,d,l){return qm(a,rm(al(d,a),l))}function fb(a,d,l){return qm(a,rm(d,l))}function Jb(a,d={}){let {size:l=16,smoothing:H=.5,thinning:Y=.5,simulatePressure:ka=!0,easing:oa=ld=>ld,start:Fa={},end:Qa={},last:Wa=
!1}=d,{cap:db=!0,easing:jb=ld=>ld*(2-ld)}=Fa,{cap:Mb=!0,easing:Ub=ld=>--ld*ld*ld+1}=Qa;if(0===a.length||0>=l)return[];var Nb=a[a.length-1].runningLength;let lc=!1===Fa.taper?0:!0===Fa.taper?Math.max(l,Nb):Fa.taper,xc=!1===Qa.taper?0:!0===Qa.taper?Math.max(l,Nb):Qa.taper;var $b=Math.pow(l*H,2);d=[];let nc=[];var jc=a.slice(0,10).reduce((ld,qd)=>{var ie=qd.pressure;ka&&(qd=dp(1,qd.distance/l),ie=dp(1,1-qd),ie=dp(1,ld+.275*(ie-ld)*qd));return(ld+ie)/2},a[0].pressure),Ic=oq(l,Y,a[a.length-1].pressure,
oa),Jc;let Gd=a[0].vector;var Xd=a[0].point;let Re=Xd;var me=Xd;let Le=Re;var Bf=!1;for(var Ue=0;Ue<a.length;Ue++){var {pressure:df}=a[Ue];let {point:ld,vector:qd,distance:ie,runningLength:mf}=a[Ue];if(Ue<a.length-1&&3>Nb-mf)continue;Y?(ka&&(Ic=dp(1,ie/l),df=dp(1,1-Ic),df=dp(1,jc+.275*(df-jc)*Ic)),Ic=oq(l,Y,df,oa)):Ic=l/2;void 0===Jc&&(Jc=Ic);var Ud=mf<lc?jb(mf/lc):1,pd=Nb-mf<xc?Ub((Nb-mf)/xc):1;Ic=Math.max(.01,Ic*Math.min(Ud,pd));pd=(Ue<a.length-1?a[Ue+1]:a[Ue]).vector;let sf=Ue<a.length-1?qd[0]*
pd[0]+qd[1]*pd[1]:1;Ud=null!==sf&&0>sf;if(0>qd[0]*Gd[0]+qd[1]*Gd[1]&&!Bf||Ud){Xd=rm(Mm(Gd),Ic);for(let $f=1/13,Kf=0;1>=Kf;Kf+=$f)me=Xa(al(ld,Xd),ld,Co*Kf),d.push(me),Le=Xa(qm(ld,Xd),ld,Co*-Kf),nc.push(Le);Xd=me;Re=Le;Ud&&(Bf=!0)}else(Bf=!1,Ue===a.length-1)?(df=rm(Mm(qd),Ic),d.push(al(ld,df)),nc.push(qm(ld,df))):(jc=rm(Mm(Ka(pd,qd,sf)),Ic),me=al(ld,jc),(1>=Ue||Ip(al(Xd,me))>$b)&&(d.push(me),Xd=me),Le=qm(ld,jc),(1>=Ue||Ip(al(Re,Le))>$b)&&(nc.push(Le),Re=Le),jc=df,Gd=qd)}Nb=a[0].point.slice(0,2);$b=
1<a.length?a[a.length-1].point.slice(0,2):qm(a[0].point,[1,1]);me=[];Bf=[];if(1===a.length){if(!lc&&!xc||Wa){a=fb(Nb,Jp(Mm(al(Nb,$b))),-(Jc||Ic));d=[];for(let ld=1/13,qd=ld;1>=qd;qd+=ld)d.push(Xa(a,Nb,2*Co*qd));return d}}else{if(!(lc||xc&&1===a.length))if(db)for(let ld=1/13,qd=ld;1>=qd;qd+=ld)Jc=Xa(nc[0],Nb,Co*qd),me.push(Jc);else Ue=al(d[0],nc[0]),Jc=rm(Ue,.5),Ue=rm(Ue,.51),me.push(al(Nb,Jc),al(Nb,Ue),qm(Nb,Ue),qm(Nb,Jc));Jc=Mm(Hp(a[a.length-1].vector));if(xc||lc&&1===a.length)Bf.push($b);else if(Mb){a=
fb($b,Jc,Ic);for(let ld=1/29,qd=ld;1>qd;qd+=ld)Bf.push(Xa(a,$b,3*Co*qd))}else Bf.push(qm($b,rm(Jc,Ic)),qm($b,rm(Jc,.99*Ic)),al($b,rm(Jc,.99*Ic)),al($b,rm(Jc,Ic)))}return d.concat(Bf,nc.reverse(),me)}function tc(a,d={}){var l;let {streamline:H=.5,size:Y=16,last:ka=!1}=d;if(0===a.length)return[];d=.15+.85*(1-H);a=Array.isArray(a[0])?a:a.map(({x:jb,y:Mb,pressure:Ub=.5})=>[jb,Mb,Ub]);if(2===a.length){var oa=a[1];a=a.slice(0,-1);for(var Fa=1;5>Fa;Fa++)a.push(Ka(a[0],oa,Fa/4))}1===a.length&&(a=[...a,[...qm(a[0],
[1,1]),...a[0].slice(2)]]);oa=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Fa=!1;let Qa=0,Wa=oa[0],db=a.length-1;for(let jb=1;jb<a.length;jb++){let Mb=ka&&jb===db?a[jb].slice(0,2):Ka(Wa.point,a[jb],d);if(qr(Wa.point,Mb))continue;let Ub=La(Mb,Wa.point);if(Qa+=Ub,jb<db&&!Fa){if(Qa<Y)continue;Fa=!0}Wa={point:Mb,pressure:0<=a[jb][2]?a[jb][2]:.5,vector:Jp(al(Wa.point,Mb)),distance:Ub,runningLength:Qa};oa.push(Wa)}return oa[0].vector=(null==(l=oa[1])?
void 0:l.vector)||[0,0],oa}function Wc(a,d=4/3){return(new Hq(a)).exportAsSVG(d)}function Ld(a,d=4/3){return(new Hq(a)).generatePreviewJsx(void 0,d)}function ke({id:a,type:d,onRemove:l,showContent:H}){const Y=ff(),{handlers:ka}=Jy.default.useContext(yj),oa=ka.t;return(0,Aj.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,Aj.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,Aj.jsx)(Ky,{id:a,showReferenceContent:H})}),
(0,Aj.jsx)("div",{className:"flex-1"}),ka.getBlockPageName(a)!==Y.currentPage.name&&(0,Aj.jsx)(ja,{tooltip:oa("whiteboard/open-page"),type:"button",onClick:()=>null==ka?void 0:ka.redirectToPage(a),children:(0,Aj.jsx)(Yh,{name:"open-as-page"})}),(0,Aj.jsx)(ja,{tooltip:oa("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==ka?void 0:ka.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,Aj.jsx)(Yh,{name:"move-to-sidebar-right"})}),l&&(0,Aj.jsx)(ja,{className:"tl-shape-links-panel-item-remove-button",
tooltip:oa("whiteboard/remove-link"),type:"button",onClick:l,children:(0,Aj.jsx)(Yh,{name:"x",className:"!translate-y-0"})})]})}function Je({options:a,value:d,onValueChange:l}){return(0,Ep.jsx)(hz,{className:"tl-toggle-group-input",type:"single",value:d,onValueChange:l,children:a.map(H=>(0,Ep.jsx)(fc,{content:H.tooltip,children:(0,Ep.jsx)("div",{className:"inline-block",children:(0,Ep.jsx)(kD,{className:"tl-toggle-group-input-button",value:H.value,disabled:H.value===d,children:(0,Ep.jsx)(Yh,{name:H.icon})})})},
H.value))})}function ea({options:a,value:d,onValueChange:l}){return(0,Ep.jsx)(hz,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:l,children:a.map(H=>(0,Ep.jsx)(kD,{className:"tl-toggle-group-input-button",value:H.value,children:(0,Ep.jsx)(Yh,{name:H.icon})},H.value))})}function ua(a){var {toggle:d=!0,pressed:l,onPressedChange:H,className:Y,tooltip:ka}=a;a=If(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,iz.jsx)(fc,{content:ka,children:(0,iz.jsx)("div",
{className:"inline-block",children:(0,iz.jsx)(HH,qf(ne({},a),{"data-toggle":d,className:"tl-toggle-input"+(Y?" "+Y:""),pressed:l,onPressedChange:H}))})})}function Ua(a){return ff().selectedShapesArray.filter(d=>!d.props.isLocked).filter(d=>{var l;return null==(l=ju[d.props.type])?void 0:l.includes(a)})}function vb(a){return d=>"mouse"!==d.pointerType?a(d):void 0}function ec(a){a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";a=a[0].toLowerCase();return uD.includes(a)?"image":vD.includes(a)?"video":
"unknown"}function wc(...a){return(...d)=>yi(this,null,function*(){for(const l of a){const H=yield l(...d);if(H&&0<H.length)return H}return null})}function Uc(a,d){return yi(this,null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():null})}function jd(){const {handlers:a}=Kq.useContext(yj);return Kq.useCallback((d,l)=>yi(this,null,function*(){if(l.shiftKey&&1===d.selectedShapesArray.length){var H=yield navigator.clipboard.read();let Y;
0<H.length&&(H=(yield(yield H[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(H)&&40===H.length?(H=H.slice(2,-2),Ok(H)&&(Y=H)):/^\[\[.*\]\]$/.test(H)&&(Y=H.slice(2,-2)));if(Y){d.selectedShapesArray[0].update({refs:[Y]});d.persist();return}}YH(d,l,a)}),[])}function wd(){const a=jd();return ds.useCallback((d,l)=>yi(this,[d,l],function*(H,{dataTransfer:Y,point:ka}){a(H,{point:ka,shiftKey:!1,dataTransfer:Y,fromDrop:!0})}),[])}function Sd(){const {handlers:a}=wD.useContext(yj);return wD.useCallback((d,
{text:l,html:H})=>{a.copyToClipboard(l,H)},[])}function Ae(){return nr.default.useCallback(a=>yi(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var cf=Object.create,wf=Object.defineProperty,Rg=Object.defineProperties,Xg=Object.getOwnPropertyDescriptor,Vi=Object.getOwnPropertyDescriptors,hl=Object.getOwnPropertyNames,Dk=Object.getOwnPropertySymbols,wi=Object.getPrototypeOf,lk=Object.prototype.hasOwnProperty,em=Object.prototype.propertyIsEnumerable,
oo=(a,d,l)=>d in a?wf(a,d,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[d]=l,ne=(a,d)=>{for(var l in d||={})lk.call(d,l)&&oo(a,l,d[l]);if(Dk)for(l of Dk(d))em.call(d,l)&&oo(a,l,d[l]);return a},qf=(a,d)=>Rg(a,Vi(d)),If=(a,d)=>{var l={},H;for(H in a)lk.call(a,H)&&0>d.indexOf(H)&&(l[H]=a[H]);if(null!=a&&Dk)for(H of Dk(a))0>d.indexOf(H)&&em.call(a,H)&&(l[H]=a[H]);return l},Ih=(a,d)=>function(){return d||(0,a[hl(a)[0]])((d={exports:{}}).exports,d),d.exports},rn=(a,d,l,H)=>{if(d&&"object"===typeof d||
"function"===typeof d)for(let Y of hl(d))lk.call(a,Y)||Y===l||wf(a,Y,{get:()=>d[Y],enumerable:!(H=Xg(d,Y))||H.enumerable});return a},vf=(a,d,l)=>(l=null!=a?cf(wi(a)):{},rn(!d&&a&&a.__esModule?l:wf(l,"default",{value:a,enumerable:!0}),a)),he=(a,d,l,H)=>{for(var Y=1<H?void 0:H?Xg(d,l):d,ka=a.length-1,oa;0<=ka;ka--)if(oa=a[ka])Y=(H?oa(d,l,Y):oa(Y))||Y;H&&Y&&wf(d,l,Y);return Y},gb=(a,d,l)=>{oo(a,"symbol"!==typeof d?d+"":d,l);return l},yi=(a,d,l)=>new Promise((H,Y)=>{var ka=Qa=>{try{Fa(l.next(Qa))}catch(Wa){Y(Wa)}},
oa=Qa=>{try{Fa(l.throw(Qa))}catch(Wa){Y(Wa)}},Fa=Qa=>Qa.done?H(Qa.value):Promise.resolve(Qa.value).then(ka,oa);Fa((l=l.apply(a,d)).next())}),dn=Ih({["../../node_modules/rbush/rbush.min.js"](a,d){!function(l,H){"object"==typeof a&&"undefined"!=typeof d?d.exports=H():"function"==typeof define&&define.amd?define(H):(l=l||self).RBush=H()}(a,function(){function l($b,nc,jc,Ic,Jc){!function Ue(Xd,Re,me,Le,Bf){for(;Le>me;){if(600<Le-me){var df=Le-me+1,Ud=Re-me+1,pd=Math.log(df),ld=.5*Math.exp(2*pd/3);pd=
.5*Math.sqrt(pd*ld*(df-ld)/df)*(0>Ud-df/2?-1:1);Ue(Xd,Re,Math.max(me,Math.floor(Re-Ud*ld/df+pd)),Math.min(Le,Math.floor(Re+(df-Ud)*ld/df+pd)),Bf)}df=Xd[Re];Ud=me;ld=Le;H(Xd,me,Re);for(0<Bf(Xd[Le],df)&&H(Xd,me,Le);Ud<ld;){H(Xd,Ud,ld);Ud++;for(ld--;0>Bf(Xd[Ud],df);)Ud++;for(;0<Bf(Xd[ld],df);)ld--}0===Bf(Xd[me],df)?H(Xd,me,ld):H(Xd,++ld,Le);ld<=Re&&(me=ld+1);Re<=ld&&(Le=ld-1)}}($b,nc,jc||0,Ic||$b.length-1,Jc||Y)}function H($b,nc,jc){var Ic=$b[nc];$b[nc]=$b[jc];$b[jc]=Ic}function Y($b,nc){return $b<nc?
-1:$b>nc?1:0}function ka($b,nc){oa($b,0,$b.children.length,nc,$b)}function oa($b,nc,jc,Ic,Jc){Jc||=Nb(null);Jc.minX=1/0;Jc.minY=1/0;Jc.maxX=-1/0;for(Jc.maxY=-1/0;nc<jc;nc++){var Gd=$b.children[nc];Fa(Jc,$b.leaf?Ic(Gd):Gd)}return Jc}function Fa($b,nc){return $b.minX=Math.min($b.minX,nc.minX),$b.minY=Math.min($b.minY,nc.minY),$b.maxX=Math.max($b.maxX,nc.maxX),$b.maxY=Math.max($b.maxY,nc.maxY),$b}function Qa($b,nc){return $b.minX-nc.minX}function Wa($b,nc){return $b.minY-nc.minY}function db($b){return($b.maxX-
$b.minX)*($b.maxY-$b.minY)}function jb($b){return $b.maxX-$b.minX+($b.maxY-$b.minY)}function Mb($b,nc){return $b.minX<=nc.minX&&$b.minY<=nc.minY&&nc.maxX<=$b.maxX&&nc.maxY<=$b.maxY}function Ub($b,nc){return nc.minX<=$b.maxX&&nc.minY<=$b.maxY&&nc.maxX>=$b.minX&&nc.maxY>=$b.minY}function Nb($b){return{children:$b,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function lc($b,nc,jc,Ic,Jc){for(var Gd=[nc,jc];Gd.length;)if(!((jc=Gd.pop())-(nc=Gd.pop())<=Ic)){var Xd=nc+Math.ceil((jc-nc)/Ic/2)*Ic;
l($b,Xd,nc,jc,Jc);Gd.push(nc,Xd,Xd,jc)}}var xc=function($b){void 0===$b&&($b=9);this._maxEntries=Math.max(4,$b);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return xc.prototype.all=function(){return this._all(this.data,[])},xc.prototype.search=function($b){var nc=this.data,jc=[];if(!Ub($b,nc))return jc;for(var Ic=this.toBBox,Jc=[];nc;){for(var Gd=0;Gd<nc.children.length;Gd++){var Xd=nc.children[Gd],Re=nc.leaf?Ic(Xd):Xd;Ub($b,Re)&&(nc.leaf?jc.push(Xd):Mb($b,Re)?this._all(Xd,
jc):Jc.push(Xd))}nc=Jc.pop()}return jc},xc.prototype.collides=function($b){var nc=this.data;if(!Ub($b,nc))return!1;for(var jc=[];nc;){for(var Ic=0;Ic<nc.children.length;Ic++){var Jc=nc.children[Ic],Gd=nc.leaf?this.toBBox(Jc):Jc;if(Ub($b,Gd)){if(nc.leaf||Mb($b,Gd))return!0;jc.push(Jc)}}nc=jc.pop()}return!1},xc.prototype.load=function($b){if(!$b||!$b.length)return this;if($b.length<this._minEntries){for(var nc=0;nc<$b.length;nc++)this.insert($b[nc]);return this}$b=this._build($b.slice(),0,$b.length-
1,0);this.data.children.length?this.data.height===$b.height?this._splitRoot(this.data,$b):(this.data.height<$b.height&&(nc=this.data,this.data=$b,$b=nc),this._insert($b,this.data.height-$b.height-1,!0)):this.data=$b;return this},xc.prototype.insert=function($b){return $b&&this._insert($b,this.data.height-1),this},xc.prototype.clear=function(){return this.data=Nb([]),this},xc.prototype.remove=function($b,nc){if(!$b)return this;for(var jc,Ic,Jc,Gd=this.data,Xd=this.toBBox($b),Re=[],me=[];Gd||Re.length;){if(Gd||
(Gd=Re.pop(),Ic=Re[Re.length-1],jc=me.pop(),Jc=!0),Gd.leaf){a:{var Le=$b;var Bf=Gd.children,Ue=nc;if(Ue){for(var df=0;df<Bf.length;df++)if(Ue(Le,Bf[df])){Le=df;break a}Le=-1}else Le=Bf.indexOf(Le)}if(-1!==Le)return Gd.children.splice(Le,1),Re.push(Gd),this._condense(Re),this}Jc||Gd.leaf||!Mb(Gd,Xd)?Ic?(jc++,Gd=Ic.children[jc],Jc=!1):Gd=null:(Re.push(Gd),me.push(jc),jc=0,Ic=Gd,Gd=Gd.children[0])}return this},xc.prototype.toBBox=function($b){return $b},xc.prototype.compareMinX=function($b,nc){return $b.minX-
nc.minX},xc.prototype.compareMinY=function($b,nc){return $b.minY-nc.minY},xc.prototype.toJSON=function(){return this.data},xc.prototype.fromJSON=function($b){return this.data=$b,this},xc.prototype._all=function($b,nc){for(var jc=[];$b;)$b.leaf?nc.push.apply(nc,$b.children):jc.push.apply(jc,$b.children),$b=jc.pop();return nc},xc.prototype._build=function($b,nc,jc,Ic){var Jc,Gd=jc-nc+1,Xd=this._maxEntries;if(Gd<=Xd)return ka(Jc=Nb($b.slice(nc,jc+1)),this.toBBox),Jc;Ic||(Ic=Math.ceil(Math.log(Gd)/Math.log(Xd)),
Xd=Math.ceil(Gd/Math.pow(Xd,Ic-1)));(Jc=Nb([])).leaf=!1;Jc.height=Ic;Gd=Math.ceil(Gd/Xd);Xd=Gd*Math.ceil(Math.sqrt(Xd));for(lc($b,nc,jc,Xd,this.compareMinX);nc<=jc;nc+=Xd){var Re=Math.min(nc+Xd-1,jc);lc($b,nc,Re,Gd,this.compareMinY);for(var me=nc;me<=Re;me+=Gd)Jc.children.push(this._build($b,me,Math.min(me+Gd-1,Re),Ic-1))}return ka(Jc,this.toBBox),Jc},xc.prototype._chooseSubtree=function($b,nc,jc,Ic){for(;Ic.push(nc),!nc.leaf&&Ic.length-1!==jc;){for(var Jc=1/0,Gd=1/0,Xd=void 0,Re=0;Re<nc.children.length;Re++){var me=
nc.children[Re],Le=db(me),Bf=(Ue=$b,df=me,(Math.max(df.maxX,Ue.maxX)-Math.min(df.minX,Ue.minX))*(Math.max(df.maxY,Ue.maxY)-Math.min(df.minY,Ue.minY))-Le);Bf<Gd?(Gd=Bf,Jc=Le<Jc?Le:Jc,Xd=me):Bf===Gd&&Le<Jc&&(Jc=Le,Xd=me)}nc=Xd||nc.children[0]}var Ue,df;return nc},xc.prototype._insert=function($b,nc,jc){jc=jc?$b:this.toBBox($b);var Ic=[],Jc=this._chooseSubtree(jc,this.data,nc,Ic);Jc.children.push($b);for(Fa(Jc,jc);0<=nc&&Ic[nc].children.length>this._maxEntries;)this._split(Ic,nc),nc--;this._adjustParentBBoxes(jc,
Ic,nc)},xc.prototype._split=function($b,nc){var jc=$b[nc],Ic=jc.children.length,Jc=this._minEntries;this._chooseSplitAxis(jc,Jc,Ic);Ic=this._chooseSplitIndex(jc,Jc,Ic);Ic=Nb(jc.children.splice(Ic,jc.children.length-Ic));Ic.height=jc.height;Ic.leaf=jc.leaf;ka(jc,this.toBBox);ka(Ic,this.toBBox);nc?$b[nc-1].children.push(Ic):this._splitRoot(jc,Ic)},xc.prototype._splitRoot=function($b,nc){this.data=Nb([$b,nc]);this.data.height=$b.height+1;this.data.leaf=!1;ka(this.data,this.toBBox)},xc.prototype._chooseSplitIndex=
function($b,nc,jc){for(var Ic,Jc,Gd,Xd,Re,me,Le,Bf=1/0,Ue=1/0,df=nc;df<=jc-nc;df++){var Ud=oa($b,0,df,this.toBBox),pd=oa($b,df,jc,this.toBBox),ld=(Jc=Ud,Gd=pd,Xd=void 0,Re=void 0,me=void 0,Le=void 0,Xd=Math.max(Jc.minX,Gd.minX),Re=Math.max(Jc.minY,Gd.minY),me=Math.min(Jc.maxX,Gd.maxX),Le=Math.min(Jc.maxY,Gd.maxY),Math.max(0,me-Xd)*Math.max(0,Le-Re));Ud=db(Ud)+db(pd);ld<Bf?(Bf=ld,Ic=df,Ue=Ud<Ue?Ud:Ue):ld===Bf&&Ud<Ue&&(Ue=Ud,Ic=df)}return Ic||jc-nc},xc.prototype._chooseSplitAxis=function($b,nc,jc){var Ic=
$b.leaf?this.compareMinX:Qa,Jc=$b.leaf?this.compareMinY:Wa;this._allDistMargin($b,nc,jc,Ic)<this._allDistMargin($b,nc,jc,Jc)&&$b.children.sort(Ic)},xc.prototype._allDistMargin=function($b,nc,jc,Ic){$b.children.sort(Ic);Ic=this.toBBox;for(var Jc=oa($b,0,nc,Ic),Gd=oa($b,jc-nc,jc,Ic),Xd=jb(Jc)+jb(Gd),Re=nc;Re<jc-nc;Re++){var me=$b.children[Re];Fa(Jc,$b.leaf?Ic(me):me);Xd+=jb(Jc)}for(jc=jc-nc-1;jc>=nc;jc--)Jc=$b.children[jc],Fa(Gd,$b.leaf?Ic(Jc):Jc),Xd+=jb(Gd);return Xd},xc.prototype._adjustParentBBoxes=
function($b,nc,jc){for(;0<=jc;jc--)Fa(nc[jc],$b)},xc.prototype._condense=function($b){for(var nc=$b.length-1,jc=void 0;0<=nc;nc--)0===$b[nc].children.length?0<nc?(jc=$b[nc-1].children).splice(jc.indexOf($b[nc]),1):this.clear():ka($b[nc],this.toBBox)},xc})}}),it=Ih({["../../node_modules/fast-deep-equal/index.js"](a,d){d.exports=function ka(H,Y){if(H===Y)return!0;if(H&&Y&&"object"==typeof H&&"object"==typeof Y){if(H.constructor!==Y.constructor)return!1;var oa;if(Array.isArray(H)){var Fa=H.length;if(Fa!=
Y.length)return!1;for(oa=Fa;0!==oa--;)if(!ka(H[oa],Y[oa]))return!1;return!0}if(H.constructor===RegExp)return H.source===Y.source&&H.flags===Y.flags;if(H.valueOf!==Object.prototype.valueOf)return H.valueOf()===Y.valueOf();if(H.toString!==Object.prototype.toString)return H.toString()===Y.toString();var Qa=Object.keys(H);Fa=Qa.length;if(Fa!==Object.keys(Y).length)return!1;for(oa=Fa;0!==oa--;)if(!Object.prototype.hasOwnProperty.call(Y,Qa[oa]))return!1;for(oa=Fa;0!==oa--;)if(Fa=Qa[oa],!ka(H[Fa],Y[Fa]))return!1;
return!0}return H!==H&&Y!==Y}}}),sr=Ih({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function l(jb,Mb){return!1!==Mb.clone&&Mb.isMergeableObject(jb)?Qa(Array.isArray(jb)?[]:{},jb,Mb):jb}function H(jb,Mb,Ub){return jb.concat(Mb).map(function(Nb){return l(Nb,Ub)})}function Y(jb){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(jb).filter(function(Mb){return jb.propertyIsEnumerable(Mb)}):[]}function ka(jb){return Object.keys(jb).concat(Y(jb))}function oa(jb,Mb){try{return Mb in
jb}catch(Ub){return!1}}function Fa(jb,Mb,Ub){var Nb={};Ub.isMergeableObject(jb)&&ka(jb).forEach(function(lc){Nb[lc]=l(jb[lc],Ub)});ka(Mb).forEach(function(lc){if(!oa(jb,lc)||Object.hasOwnProperty.call(jb,lc)&&Object.propertyIsEnumerable.call(jb,lc))if(oa(jb,lc)&&Ub.isMergeableObject(Mb[lc])){if(Ub.customMerge){var xc=Ub.customMerge(lc);xc="function"===typeof xc?xc:Qa}else xc=Qa;Nb[lc]=xc(jb[lc],Mb[lc],Ub)}else Nb[lc]=l(Mb[lc],Ub)});return Nb}function Qa(jb,Mb,Ub){Ub=Ub||{};Ub.arrayMerge=Ub.arrayMerge||
H;Ub.isMergeableObject=Ub.isMergeableObject||Wa;Ub.cloneUnlessOtherwiseSpecified=l;var Nb=Array.isArray(Mb),lc=Array.isArray(jb);return Nb!==lc?l(Mb,Ub):Nb?Ub.arrayMerge(jb,Mb,Ub):Fa(jb,Mb,Ub)}var Wa=function(jb){var Mb;if(Mb=!!jb&&"object"===typeof jb)Mb=Object.prototype.toString.call(jb),Mb=!("[object RegExp]"===Mb||"[object Date]"===Mb||jb.$$typeof===db);return Mb},db="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Qa.all=function(jb,Mb){if(!Array.isArray(jb))throw Error("first argument should be an array");
return jb.reduce(function(Ub,Nb){return Qa(Ub,Nb,Mb)},{})};d.exports=Qa}}),is=Ih({["../../node_modules/tslib/tslib.js"](a,d){var l,H,Y,ka,oa,Fa,Qa,Wa,db,jb,Mb,Ub,Nb,lc,xc,$b,nc,jc,Ic,Jc,Gd,Xd,Re,me,Le;(function(Bf){function Ue(Ud,pd){Ud!==df&&("function"===typeof Object.create?Object.defineProperty(Ud,"__esModule",{value:!0}):Ud.__esModule=!0);return function(ld,qd){return Ud[ld]=pd?pd(ld,qd):qd}}var df="object"===typeof va?va:"object"===typeof self?self:"object"===typeof this?this:{};"function"===
typeof define&&define.amd?define("tslib",["exports"],function(Ud){Bf(Ue(df,Ue(Ud)))}):"object"===typeof d&&"object"===typeof d.exports?Bf(Ue(df,Ue(d.exports))):Bf(Ue(df))})(function(Bf){var Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ud,pd){Ud.__proto__=pd}||function(Ud,pd){for(var ld in pd)Object.prototype.hasOwnProperty.call(pd,ld)&&(Ud[ld]=pd[ld])};l=function(Ud,pd){function ld(){this.constructor=Ud}if("function"!==typeof pd&&null!==pd)throw new TypeError("Class extends value "+
String(pd)+" is not a constructor or null");Ue(Ud,pd);Ud.prototype=null===pd?Object.create(pd):(ld.prototype=pd.prototype,new ld)};H=Object.assign||function(Ud){for(var pd,ld=1,qd=arguments.length;ld<qd;ld++){pd=arguments[ld];for(var ie in pd)Object.prototype.hasOwnProperty.call(pd,ie)&&(Ud[ie]=pd[ie])}return Ud};Y=function(Ud,pd){var ld={},qd;for(qd in Ud)Object.prototype.hasOwnProperty.call(Ud,qd)&&0>pd.indexOf(qd)&&(ld[qd]=Ud[qd]);if(null!=Ud&&"function"===typeof Object.getOwnPropertySymbols){var ie=
0;for(qd=Object.getOwnPropertySymbols(Ud);ie<qd.length;ie++)0>pd.indexOf(qd[ie])&&Object.prototype.propertyIsEnumerable.call(Ud,qd[ie])&&(ld[qd[ie]]=Ud[qd[ie]])}return ld};ka=function(Ud,pd,ld,qd){var ie=arguments.length,mf=3>ie?pd:null===qd?qd=Object.getOwnPropertyDescriptor(pd,ld):qd,sf;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)mf=Reflect.decorate(Ud,pd,ld,qd);else for(var $f=Ud.length-1;0<=$f;$f--)if(sf=Ud[$f])mf=(3>ie?sf(mf):3<ie?sf(pd,ld,mf):sf(pd,ld))||mf;return 3<ie&&
mf&&Object.defineProperty(pd,ld,mf),mf};oa=function(Ud,pd){return function(ld,qd){pd(ld,qd,Ud)}};Fa=function(Ud,pd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Ud,pd)};Qa=function(Ud,pd,ld,qd){function ie(mf){return mf instanceof ld?mf:new ld(function(sf){sf(mf)})}return new (ld||=Promise)(function(mf,sf){function $f(Yg){try{Xf(qd.next(Yg))}catch(Lf){sf(Lf)}}function Kf(Yg){try{Xf(qd["throw"](Yg))}catch(Lf){sf(Lf)}}function Xf(Yg){Yg.done?mf(Yg.value):
ie(Yg.value).then($f,Kf)}Xf((qd=qd.apply(Ud,pd||[])).next())})};Wa=function(Ud,pd){function ld(Xf){return function(Yg){return qd([Xf,Yg])}}function qd(Xf){if(mf)throw new TypeError("Generator is already executing.");for(;ie;)try{if(mf=1,sf&&($f=Xf[0]&2?sf["return"]:Xf[0]?sf["throw"]||(($f=sf["return"])&&$f.call(sf),0):sf.next)&&!($f=$f.call(sf,Xf[1])).done)return $f;if(sf=0,$f)Xf=[Xf[0]&2,$f.value];switch(Xf[0]){case 0:case 1:$f=Xf;break;case 4:return ie.label++,{value:Xf[1],done:!1};case 5:ie.label++;
sf=Xf[1];Xf=[0];continue;case 7:Xf=ie.ops.pop();ie.trys.pop();continue;default:if(!($f=ie.trys,$f=0<$f.length&&$f[$f.length-1])&&(6===Xf[0]||2===Xf[0])){ie=0;continue}if(3===Xf[0]&&(!$f||Xf[1]>$f[0]&&Xf[1]<$f[3]))ie.label=Xf[1];else if(6===Xf[0]&&ie.label<$f[1])ie.label=$f[1],$f=Xf;else if($f&&ie.label<$f[2])ie.label=$f[2],ie.ops.push(Xf);else{$f[2]&&ie.ops.pop();ie.trys.pop();continue}}Xf=pd.call(Ud,ie)}catch(Yg){Xf=[6,Yg],sf=0}finally{mf=$f=0}if(Xf[0]&5)throw Xf[1];return{value:Xf[0]?Xf[1]:void 0,
done:!0}}var ie={label:0,sent:function(){if($f[0]&1)throw $f[1];return $f[1]},trys:[],ops:[]},mf,sf,$f,Kf;return Kf={next:ld(0),"throw":ld(1),"return":ld(2)},"function"===typeof Symbol&&(Kf[Symbol.iterator]=function(){return this}),Kf};db=function(Ud,pd){for(var ld in Ud)"default"===ld||Object.prototype.hasOwnProperty.call(pd,ld)||Le(pd,Ud,ld)};Le=Object.create?function(Ud,pd,ld,qd){void 0===qd&&(qd=ld);var ie=Object.getOwnPropertyDescriptor(pd,ld);if(!ie||("get"in ie?!pd.__esModule:ie.writable||
ie.configurable))ie={enumerable:!0,get:function(){return pd[ld]}};Object.defineProperty(Ud,qd,ie)}:function(Ud,pd,ld,qd){void 0===qd&&(qd=ld);Ud[qd]=pd[ld]};jb=function(Ud){var pd="function"===typeof Symbol&&Symbol.iterator,ld=pd&&Ud[pd],qd=0;if(ld)return ld.call(Ud);if(Ud&&"number"===typeof Ud.length)return{next:function(){Ud&&qd>=Ud.length&&(Ud=void 0);return{value:Ud&&Ud[qd++],done:!Ud}}};throw new TypeError(pd?"Object is not iterable.":"Symbol.iterator is not defined.");};Mb=function(Ud,pd){var ld=
"function"===typeof Symbol&&Ud[Symbol.iterator];if(!ld)return Ud;Ud=ld.call(Ud);var qd,ie=[];try{for(;(void 0===pd||0<pd--)&&!(qd=Ud.next()).done;)ie.push(qd.value)}catch(sf){var mf={error:sf}}finally{try{qd&&!qd.done&&(ld=Ud["return"])&&ld.call(Ud)}finally{if(mf)throw mf.error;}}return ie};Ub=function(){for(var Ud=[],pd=0;pd<arguments.length;pd++)Ud=Ud.concat(Mb(arguments[pd]));return Ud};Nb=function(){for(var Ud=0,pd=0,ld=arguments.length;pd<ld;pd++)Ud+=arguments[pd].length;Ud=Array(Ud);var qd=
0;for(pd=0;pd<ld;pd++)for(var ie=arguments[pd],mf=0,sf=ie.length;mf<sf;mf++,qd++)Ud[qd]=ie[mf];return Ud};lc=function(Ud,pd,ld){if(ld||2===arguments.length)for(var qd=0,ie=pd.length,mf;qd<ie;qd++)!mf&&qd in pd||(mf||=Array.prototype.slice.call(pd,0,qd),mf[qd]=pd[qd]);return Ud.concat(mf||Array.prototype.slice.call(pd))};xc=function(Ud){return this instanceof xc?(this.v=Ud,this):new xc(Ud)};$b=function(Ud,pd,ld){function qd(Lf){Kf[Lf]&&(Xf[Lf]=function(Dh){return new Promise(function(vh,sj){1<Yg.push([Lf,
Dh,vh,sj])||ie(Lf,Dh)})})}function ie(Lf,Dh){try{var vh=Kf[Lf](Dh);vh.value instanceof xc?Promise.resolve(vh.value.v).then(mf,sf):$f(Yg[0][2],vh)}catch(sj){$f(Yg[0][3],sj)}}function mf(Lf){ie("next",Lf)}function sf(Lf){ie("throw",Lf)}function $f(Lf,Dh){(Lf(Dh),Yg.shift(),Yg.length)&&ie(Yg[0][0],Yg[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Kf=ld.apply(Ud,pd||[]),Xf,Yg=[];return Xf={},qd("next"),qd("throw"),qd("return"),Xf[Symbol.asyncIterator]=
function(){return this},Xf};nc=function(Ud){function pd(ie,mf){ld[ie]=Ud[ie]?function(sf){return(qd=!qd)?{value:xc(Ud[ie](sf)),done:"return"===ie}:mf?mf(sf):sf}:mf}var ld,qd;return ld={},pd("next"),pd("throw",function(ie){throw ie;}),pd("return"),ld[Symbol.iterator]=function(){return this},ld};jc=function(Ud){function pd(mf){ie[mf]=Ud[mf]&&function(sf){return new Promise(function($f,Kf){sf=Ud[mf](sf);ld($f,Kf,sf.done,sf.value)})}}function ld(mf,sf,$f,Kf){Promise.resolve(Kf).then(function(Xf){mf({value:Xf,
done:$f})},sf)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qd=Ud[Symbol.asyncIterator],ie;return qd?qd.call(Ud):(Ud="function"===typeof jb?jb(Ud):Ud[Symbol.iterator](),ie={},pd("next"),pd("throw"),pd("return"),ie[Symbol.asyncIterator]=function(){return this},ie)};Ic=function(Ud,pd){Object.defineProperty?Object.defineProperty(Ud,"raw",{value:pd}):Ud.raw=pd;return Ud};var df=Object.create?function(Ud,pd){Object.defineProperty(Ud,"default",{enumerable:!0,
value:pd})}:function(Ud,pd){Ud["default"]=pd};Jc=function(Ud){if(Ud&&Ud.__esModule)return Ud;var pd={};if(null!=Ud)for(var ld in Ud)"default"!==ld&&Object.prototype.hasOwnProperty.call(Ud,ld)&&Le(pd,Ud,ld);df(pd,Ud);return pd};Gd=function(Ud){return Ud&&Ud.__esModule?Ud:{"default":Ud}};Xd=function(Ud,pd,ld,qd){if("a"===ld&&!qd)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof pd?Ud!==pd||!qd:!pd.has(Ud))throw new TypeError("Cannot read private member from an object whose class did not declare it");
return"m"===ld?qd:"a"===ld?qd.call(Ud):qd?qd.value:pd.get(Ud)};Re=function(Ud,pd,ld,qd,ie){if("m"===qd)throw new TypeError("Private method is not writable");if("a"===qd&&!ie)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof pd?Ud!==pd||!ie:!pd.has(Ud))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===qd?ie.call(Ud,ld):ie?ie.value=ld:pd.set(Ud,ld),ld};me=function(Ud,pd){if(null===pd||"object"!==typeof pd&&
"function"!==typeof pd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Ud?pd===Ud:Ud.has(pd)};Bf("__extends",l);Bf("__assign",H);Bf("__rest",Y);Bf("__decorate",ka);Bf("__param",oa);Bf("__metadata",Fa);Bf("__awaiter",Qa);Bf("__generator",Wa);Bf("__exportStar",db);Bf("__createBinding",Le);Bf("__values",jb);Bf("__read",Mb);Bf("__spread",Ub);Bf("__spreadArrays",Nb);Bf("__spreadArray",lc);Bf("__await",xc);Bf("__asyncGenerator",$b);Bf("__asyncDelegator",nc);Bf("__asyncValues",
jc);Bf("__makeTemplateObject",Ic);Bf("__importStar",Jc);Bf("__importDefault",Gd);Bf("__classPrivateFieldGet",Xd);Bf("__classPrivateFieldSet",Re);Bf("__classPrivateFieldIn",me)})}}),Oq={};((a,d)=>{for(var l in d)wf(a,l,{get:d[l],enumerable:!0})})(Oq,{App:()=>yD,PreviewManager:()=>Hq,generateJSXFromModel:()=>Ld,generateSVGFromModel:()=>Wc});Sa.exports=(a=>rn(wf({},"__esModule",{value:!0}),a))(Oq);var js=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";
a.Gray="gray";a.Default="";return a})(js||{}),tr=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(tr||{}),rr,nu=new Uint8Array(16),Fg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,vm=[];for(let a=0;256>a;++a)vm.push((a+256).toString(16).slice(1));var ht,Ho,mp=0,Qq=0,ml=function(a,d,l){l=d&&l||0;const H=d||Array(16);a=a||{};let Y=a.node||ht;var ka=void 0!==a.clockseq?a.clockseq:Ho;if(null==Y||null==ka){var oa=
a.random||(a.rng||q)();null==Y&&(Y=ht=[oa[0]|1,oa[1],oa[2],oa[3],oa[4],oa[5]]);null==ka&&(ka=Ho=(oa[6]<<8|oa[7])&16383)}oa=void 0!==a.msecs?a.msecs:Date.now();let Fa=void 0!==a.nsecs?a.nsecs:Qq+1;const Qa=oa-mp+(Fa-Qq)/1E4;0>Qa&&void 0===a.clockseq&&(ka=ka+1&16383);(0>Qa||oa>mp)&&void 0===a.nsecs&&(Fa=0);if(1E4<=Fa)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");mp=oa;Qq=Fa;Ho=ka;oa+=122192928E5;a=(1E4*(oa&268435455)+Fa)%4294967296;H[l++]=a>>>24&255;H[l++]=a>>>16&255;H[l++]=a>>>8&255;
H[l++]=a&255;a=oa/4294967296*1E4&268435455;H[l++]=a>>>8&255;H[l++]=a&255;H[l++]=a>>>24&15|16;H[l++]=a>>>16&255;H[l++]=ka>>>8|128;H[l++]=ka&255;for(ka=0;6>ka;++ka)H[l+ka]=Y[ka];return d||P(H)},Eh=class{static clamp(a,d,l){return Math.max(d,"undefined"!==typeof l?Math.min(a,l):a)}static clampV(a,d,l){return a.map(H=>l?Eh.clamp(H,d,l):Eh.clamp(H,d))}static cross(a,d,l){return(d[0]-a[0])*(l[1]-a[1])-(l[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},Dd=Eh;Dd.neg=
a=>[-a[0],-a[1]];Dd.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];Dd.addScalar=(a,d)=>[a[0]+d,a[1]+d];Dd.sub=(a,d)=>[a[0]-d[0],a[1]-d[1]];Dd.subScalar=(a,d)=>[a[0]-d,a[1]-d];Dd.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];Dd.mul=(a,d)=>[a[0]*d,a[1]*d];Dd.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];Dd.div=(a,d)=>[a[0]/d,a[1]/d];Dd.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];Dd.per=a=>[a[1],-a[0]];Dd.dpr=(a,d)=>a[0]*d[0]+a[1]*d[1];Dd.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];Dd.len2=a=>a[0]*a[0]+a[1]*a[1];Dd.len=a=>Math.hypot(a[0],a[1]);Dd.pry=(a,d)=>Eh.dpr(a,
d)/Eh.len(d);Dd.uni=a=>Eh.div(a,Eh.len(a));Dd.normalize=a=>Eh.uni(a);Dd.tangent=(a,d)=>Eh.uni(Eh.sub(a,d));Dd.dist2=(a,d)=>Eh.len2(Eh.sub(a,d));Dd.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);Dd.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let l=1/Math.max(d[0],d[1]);l*=1.29289-(d[0]+d[1])*l*.29289;return[a[0]*l,a[1]*l]};Dd.ang=(a,d)=>Math.atan2(Eh.cpr(a,d),Eh.dpr(a,d));Dd.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);Dd.med=(a,d)=>Eh.mul(Eh.add(a,d),.5);Dd.rot=(a,d=0)=>
[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];Dd.rotWith=(a,d,l=0)=>{if(0===l)return a;const H=Math.sin(l);l=Math.cos(l);const Y=a[0]-d[0];a=a[1]-d[1];return[Y*l-a*H+d[0],Y*H+a*l+d[1]]};Dd.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];Dd.lrp=(a,d,l)=>Eh.add(a,Eh.mul(Eh.sub(d,a),l));Dd.int=(a,d,l,H,Y=1)=>{l=(Eh.clamp(l,H)-l)/(H-l);return Eh.add(Eh.mul(a,1-l),Eh.mul(d,Y))};Dd.ang3=(a,d,l)=>{a=Eh.vec(d,a);d=Eh.vec(d,l);return Eh.ang(a,d)};Dd.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];Dd.rescale=
(a,d)=>{const l=Eh.len(a);return[d*a[0]/l,d*a[1]/l]};Dd.isLeft=(a,d,l)=>(d[0]-a[0])*(l[1]-a[1])-(l[0]-a[0])*(d[1]-a[1]);Dd.clockwise=(a,d,l)=>0<Eh.isLeft(a,d,l);Dd.toFixed=a=>a.map(d=>Math.round(100*d)/100);Dd.nearestPointOnLineThroughPoint=(a,d,l)=>Eh.add(a,Eh.mul(d,Eh.pry(Eh.sub(l,a),d)));Dd.distanceToLineThroughPoint=(a,d,l)=>Eh.dist(l,Eh.nearestPointOnLineThroughPoint(a,d,l));Dd.nearestPointOnLineSegment=(a,d,l,H=!0)=>{const Y=Eh.uni(Eh.sub(d,a));l=Eh.add(a,Eh.mul(Y,Eh.pry(Eh.sub(l,a),Y)));if(H){if(l[0]<
Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(l[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(l[1]<Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(l[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return l};Dd.distanceToLineSegment=(a,d,l,H=!0)=>Eh.dist(l,Eh.nearestPointOnLineSegment(a,d,l,H));Dd.nudge=(a,d,l)=>Eh.isEqual(a,d)?a:Eh.add(a,Eh.mul(Eh.uni(Eh.sub(d,a)),l));Dd.nudgeAtAngle=(a,d,l)=>[Math.cos(d)*l+a[0],Math.sin(d)*l+a[1]];Dd.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];Dd.pointsBetween=
(a,d,l=6)=>Array.from(Array(l)).map((H,Y)=>{H=Y/(l-1);Y=Math.min(1,.5+Math.abs(.5-H));return[...Eh.lrp(a,d,H),Y]});Dd.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);Dd.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};Dd.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];Dd.min=(...a)=>[Math.min(...a.map(d=>d[0])),Math.min(...a.map(d=>d[1]))];var le=Dd,Af=class{static getRectangleSides(a,d,l=0){const H=[a[0]+d[0]/2,a[1]+d[1]/2],Y=Dd.rotWith(a,H,l),ka=Dd.rotWith(Dd.add(a,
[d[0],0]),H,l),oa=Dd.rotWith(Dd.add(a,d),H,l);a=Dd.rotWith(Dd.add(a,[0,d[1]]),H,l);return[["top",[Y,ka]],["right",[ka,oa]],["bottom",[oa,a]],["left",[a,Y]]]}static getBoundsSides(a){return Af.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+2*d,height:a.height+2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?
a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return Af.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let l=Infinity,H=Infinity,Y=-Infinity,ka=-Infinity;if(2>a.length)H=l=0,ka=Y=1;else for(const oa of a)l=Math.min(oa[0],l),H=Math.min(oa[1],H),Y=Math.max(oa[0],Y),ka=Math.max(oa[1],ka);return 0!==d?Af.getBoundsFromPoints(a.map(oa=>
Dd.rotWith(oa,[(l+Y)/2,(H+ka)/2],d))):{minX:l,minY:H,maxX:Y,maxY:ka,width:Math.max(1,Y-l),height:Math.max(1,ka-H)}}static centerBounds(a,d){const l=Af.getBoundsCenter(a);return Af.translateBounds(a,[d[0]-l[0],d[1]-l[1]])}static snapBoundsToGrid(a,d){const l=Math.round(a.minX/d)*d,H=Math.round(a.minY/d)*d,Y=Math.round(a.maxX/d)*d;a=Math.round(a.maxY/d)*d;return{minX:l,minY:H,maxX:Y,maxY:a,width:Math.max(1,Y-l),height:Math.max(1,a-H)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+
d[1],maxX:a.maxX+d[0],maxY:a.maxY+d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const l=Af.getBoundsCenter(a);return Af.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[l[0]*d,l[1]*d])}static divideBounds(a,d){const l=Af.getBoundsCenter(a);return Af.centerBounds({minX:a.minX/d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[l[0]/d,l[1]/d])}static getRotatedBounds(a,d=0){a=Af.getRotatedCorners(a,
d);let l=d=Infinity,H=-Infinity,Y=-Infinity;for(const ka of a)d=Math.min(ka[0],d),l=Math.min(ka[1],l),H=Math.max(ka[0],H),Y=Math.max(ka[1],Y);return{minX:d,minY:l,maxX:H,maxY:Y,width:Math.max(1,H-d),height:Math.max(1,Y-l),rotation:0}}static getRotatedEllipseBounds(a,d,l,H,Y=0){var ka=Math.cos(Y);const oa=Math.sin(Y);Y=Math.hypot(l*ka,H*oa);ka=Math.hypot(l*oa,H*ka);return{minX:a+l-Y,minY:d+H-ka,maxX:a+l+Y,maxY:d+H+ka,width:2*Y,height:2*ka}}static getExpandedBounds(a,d){const l=Math.min(a.minX,d.minX),
H=Math.min(a.minY,d.minY),Y=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:l,minY:H,maxX:Y,maxY:a,width:Math.abs(Y-l),height:Math.abs(a-H)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let l=1;l<a.length;l++)d=Af.getExpandedBounds(d,a[l]);return d}static getRotatedCorners(a,d=0){const l=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(H=>Dd.rotWith(H,l,d)):a}static getTransformedBoundingBox(a,
d,l,H=0,Y=!1){const [ka,oa]=[a.minX,a.minY],[Fa,Qa]=[a.maxX,a.maxY];let [Wa,db]=[a.minX,a.minY],[jb,Mb]=[a.maxX,a.maxY];if("center"===d)return{minX:Wa+l[0],minY:db+l[1],maxX:jb+l[0],maxY:Mb+l[1],width:jb-Wa,height:Mb-db,scaleX:1,scaleY:1};const [Ub,Nb]=Dd.rot(l,-H);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":db+=Nb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Mb+=Nb}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":Wa+=
Ub;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":jb+=Ub}var lc=Fa-ka;const xc=Qa-oa;var $b=(jb-Wa)/lc,nc=(Mb-db)/xc;a=0>$b;l=0>nc;var jc=Math.abs(jb-Wa),Ic=Math.abs(Mb-db);if(Y)switch(Y=lc/xc,lc=Y<jc/Ic,nc=1/Y*(0>nc?1:-1)*jc,$b=Ic*(0>$b?1:-1)*Y,d){case "top_left_corner":lc?db=Mb+nc:Wa=jb+$b;break;case "top_right_corner":lc?db=Mb+nc:jb=Wa-$b;break;case "bottom_right_corner":lc?Mb=db-nc:jb=Wa-$b;break;case "bottom_left_corner":lc?Mb=db-nc:Wa=jb+$b;break;case "bottom_edge":case "top_edge":jc=
(Wa+jb)/2;Ic*=Y;Wa=jc-Ic/2;jb=jc+Ic/2;break;case "left_edge":case "right_edge":Ic=(db+Mb)/2,jc/=Y,db=Ic-jc/2,Mb=Ic+jc/2}if(0!==H%(2*Math.PI)){jc=[0,0];Ic=Dd.med([ka,oa],[Fa,Qa]);$b=Dd.med([Wa,db],[jb,Mb]);switch(d){case "top_left_corner":jc=Dd.sub(Dd.rotWith([jb,Mb],$b,H),Dd.rotWith([Fa,Qa],Ic,H));break;case "top_right_corner":jc=Dd.sub(Dd.rotWith([Wa,Mb],$b,H),Dd.rotWith([ka,Qa],Ic,H));break;case "bottom_right_corner":jc=Dd.sub(Dd.rotWith([Wa,db],$b,H),Dd.rotWith([ka,oa],Ic,H));break;case "bottom_left_corner":jc=
Dd.sub(Dd.rotWith([jb,db],$b,H),Dd.rotWith([Fa,oa],Ic,H));break;case "top_edge":jc=Dd.sub(Dd.rotWith(Dd.med([Wa,Mb],[jb,Mb]),$b,H),Dd.rotWith(Dd.med([ka,Qa],[Fa,Qa]),Ic,H));break;case "left_edge":jc=Dd.sub(Dd.rotWith(Dd.med([jb,db],[jb,Mb]),$b,H),Dd.rotWith(Dd.med([Fa,oa],[Fa,Qa]),Ic,H));break;case "bottom_edge":jc=Dd.sub(Dd.rotWith(Dd.med([Wa,db],[jb,db]),$b,H),Dd.rotWith(Dd.med([ka,oa],[Fa,oa]),Ic,H));break;case "right_edge":jc=Dd.sub(Dd.rotWith(Dd.med([Wa,db],[Wa,Mb]),$b,H),Dd.rotWith(Dd.med([ka,
oa],[ka,Qa]),Ic,H))}[Wa,db]=Dd.sub([Wa,db],jc);[jb,Mb]=Dd.sub([jb,Mb],jc)}jb<Wa&&([jb,Wa]=[Wa,jb]);Mb<db&&([Mb,db]=[db,Mb]);return{minX:Wa,minY:db,maxX:jb,maxY:Mb,width:jb-Wa,height:Mb-db,scaleX:(jb-Wa)/(Fa-ka||1)*(a?-1:1),scaleY:(Mb-db)/(Qa-oa||1)*(l?-1:1)}}static getTransformAnchor(a,d,l){let H=a;switch(a){case "top_left_corner":H=d&&l?"bottom_right_corner":d?"top_right_corner":l?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":H=d&&l?"bottom_left_corner":d?"top_left_corner":
l?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":H=d&&l?"top_left_corner":d?"bottom_left_corner":l?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":H=d&&l?"top_right_corner":d?"bottom_right_corner":l?"top_left_corner":"top_right_corner"}return H}static getRelativeTransformedBoundingBox(a,d,l,H,Y){H=a.minX+(H?d.maxX-l.maxX:l.minX-d.minX)/d.width*a.width;Y=a.minY+(Y?d.maxY-l.maxY:l.minY-d.minY)/d.height*a.height;const ka=l.width/d.width*a.width;a=l.height/
d.height*a.height;return{minX:H,minY:Y,maxX:H+ka,maxY:Y+a,width:ka,height:a}}static getRotatedSize(a,d){const l=Dd.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(H=>Dd.rotWith(H,l,d));a=Af.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=Af.getBoundsCenter(a);return qf(ne({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=[Infinity,Infinity];a.forEach(l=>{d[0]=Math.min(d[0],l[0]);d[1]=
Math.min(d[1],l[1])});return d}static getTLSnapPoints(a,d,l){const H=ne({},a);a=[0,0];const Y=[],ka={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},oa=["midX","minX","maxX"],Fa=["midY","minY","maxY"];d=d.map(Mb=>{const Ub=oa.flatMap((lc,xc)=>oa.map(($b,nc)=>{const jc=H[lc]-Mb[$b];return{f:lc,t:$b,gap:jc,distance:Math.abs(jc),isCareful:0===xc||3===xc+nc}})),Nb=Fa.flatMap((lc,
xc)=>Fa.map(($b,nc)=>{const jc=H[lc]-Mb[$b];return{f:lc,t:$b,gap:jc,distance:Math.abs(jc),isCareful:0===xc||3===xc+nc}}));return[Mb,Ub,Nb]});let Qa=Infinity,Wa=Infinity,db=Infinity,jb=Infinity;d.forEach(([,Mb,Ub])=>{Mb.forEach(Nb=>{Nb.distance<l&&Nb.distance<db&&(db=Nb.distance,Qa=Nb.gap)});Ub.forEach(Nb=>{Nb.distance<l&&Nb.distance<jb&&(jb=Nb.distance,Wa=Nb.gap)})});d.forEach(([Mb,Ub,Nb])=>{Infinity!==Qa&&Ub.forEach(lc=>{2>Math.abs(lc.gap-Qa)&&(ka[lc.f]=qf(ne({},ka[lc.f]),{isSnapped:!0,to:Mb[lc.t],
B:Mb,distance:lc.distance}))});Infinity!==Wa&&Nb.forEach(lc=>{2>Math.abs(lc.gap-Wa)&&(ka[lc.f]=qf(ne({},ka[lc.f]),{isSnapped:!0,to:Mb[lc.t],B:Mb,distance:lc.distance}))})});a[0]=Infinity===Qa?0:Qa;a[1]=Infinity===Wa?0:Wa;H.minX-=a[0];H.midX-=a[0];H.maxX-=a[0];H.minY-=a[1];H.midY-=a[1];H.maxY-=a[1];oa.forEach(Mb=>{Mb=ka[Mb];if(Mb.isSnapped){var {id:Ub,B:Nb}=Mb;Mb=H[Ub];Y.push("minX"===Ub?[[Mb,H.midY],[Mb,Nb.minY],[Mb,Nb.maxY]]:[[Mb,H.minY],[Mb,H.maxY],[Mb,Nb.minY],[Mb,Nb.maxY]])}});Fa.forEach(Mb=>
{Mb=ka[Mb];if(Mb.isSnapped){var {id:Ub,B:Nb}=Mb;Mb=H[Ub];Y.push("midY"===Ub?[[H.midX,Mb],[Nb.minX,Mb],[Nb.maxX,Mb]]:[[H.minX,Mb],[H.maxX,Mb],[Nb.minX,Mb],[Nb.maxX,Mb]])}});return{offset:a,snapLines:Y}}static ensureRatio(a,d){const {width:l,height:H}=a,Y=ne({},a);l/H<d?(Y.width=H*d,Y.maxX+=l-a.width):(Y.height=l/d,Y.maxY+=H-a.height);return Y}static getDistributions(a,d){var l=a.map(ka=>{const oa=ka.getBounds();return{id:ka.id,point:[oa.minX,oa.minY],bounds:oa,center:ka.getCenter()}});a=l.length;var H=
Af.getCommonBounds(l.map(({bounds:ka})=>ka));const Y=[];switch(d){case "horizontal":d=l.reduce((ka,oa)=>ka+oa.bounds.width,0);if(d>H.width){const ka=l.sort((Wa,db)=>Wa.bounds.minX-db.bounds.minX)[0],oa=l.sort((Wa,db)=>db.bounds.maxX-Wa.bounds.maxX)[0];H=l.filter(Wa=>Wa!==ka&&Wa!==oa).sort((Wa,db)=>Wa.center[0]-db.center[0]);const Fa=(oa.center[0]-ka.center[0])/(a-1),Qa=ka.center[0]+Fa;H.forEach(({id:Wa,point:db,bounds:jb},Mb)=>{Y.push({id:Wa,prev:db,next:[Qa+Fa*Mb-jb.width/2,jb.minY]})})}else{l=l.sort((Fa,
Qa)=>Fa.center[0]-Qa.center[0]);let ka=H.minX;const oa=(H.width-d)/(a-1);l.forEach(({id:Fa,point:Qa,bounds:Wa})=>{Y.push({id:Fa,prev:Qa,next:[ka,Wa.minY]});ka+=Wa.width+oa})}break;case "vertical":if(d=l.reduce((ka,oa)=>ka+oa.bounds.height,0),d>H.height){const ka=l.sort((Wa,db)=>Wa.bounds.minY-db.bounds.minY)[0],oa=l.sort((Wa,db)=>db.bounds.maxY-Wa.bounds.maxY)[0];H=l.filter(Wa=>Wa!==ka&&Wa!==oa).sort((Wa,db)=>Wa.center[1]-db.center[1]);const Fa=(oa.center[1]-ka.center[1])/(a-1),Qa=ka.center[1]+Fa;
H.forEach(({id:Wa,point:db,bounds:jb},Mb)=>{Y.push({id:Wa,prev:db,next:[jb.minX,Qa+Fa*Mb-jb.height/2]})})}else{l=l.sort((Fa,Qa)=>Fa.center[1]-Qa.center[1]);let ka=H.minY;const oa=(H.height-d)/(a-1);l.forEach(({id:Fa,point:Qa,bounds:Wa})=>{Y.push({id:Fa,prev:Qa,next:[Wa.minX,ka]});ka+=Wa.height+oa})}}return Y}static getPackedDistributions(a){const d=Af.getCommonBounds(a.map(({bounds:Y})=>Y)),l=[d.minX,d.minY],H=Object.fromEntries(a.map(Y=>[Y.id,[Y.bounds.minX,Y.bounds.minY]]));a=a.filter(Y=>{var ka,
oa,Fa,Qa;return!((null==(oa=null==(ka=Y.props.handles)?void 0:ka.start)?0:oa.bindingId)||(null==(Qa=null==(Fa=Y.props.handles)?void 0:Fa.end)?0:Qa.bindingId))}).map(Y=>{const ka=Y.getBounds();return{id:Y.id,w:ka.width+16,h:ka.height+16,x:ka.minX,y:ka.minY}});z(a);return a.map(({id:Y,x:ka,y:oa})=>({id:Y,prev:H[Y],next:[ka+l[0],oa+l[1]]}))}},Lp=class{static pointInCircle(a,d,l){return Dd.dist(a,d)<=l}static pointInEllipse(a,d,l,H,Y=0){Y=Y||0;var ka=Math.cos(Y);Y=Math.sin(Y);d=Dd.sub(a,d);a=ka*d[0]+
Y*d[1];ka=Y*d[0]-ka*d[1];return 1>=a*a/(l*l)+ka*ka/(H*H)}static pointInRect(a,d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let l=0;d.forEach((H,Y)=>{Y=d[(Y+1)%d.length];H[1]<=a[1]?Y[1]>a[1]&&0<Dd.cross(H,Y,a)&&(l+=1):Y[1]<=a[1]&&0>Dd.cross(H,Y,a)&&--l});return 0!==l}static pointInBounds(a,d){return!(a[0]<d.minX||a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,l=3){for(let H=1;H<d.length;H++)if(Dd.distanceToLineSegment(d[H-1],d[H],a)<
l)return!0;return!1}static _getSqSegDist(a,d,l){let H=d[0];d=d[1];let Y=l[0]-H,ka=l[1]-d;if(0!==Y||0!==ka){const oa=((a[0]-H)*Y+(a[1]-d)*ka)/(Y*Y+ka*ka);1<oa?(H=l[0],d=l[1]):0<oa&&(H+=Y*oa,d+=ka*oa)}Y=a[0]-H;ka=a[1]-d;return Y*Y+ka*ka}static _simplifyStep(a,d,l,H,Y){let ka=H,oa=-1;for(let Fa=d+1;Fa<l;Fa++){const Qa=Lp._getSqSegDist(a[Fa],a[d],a[l]);Qa>ka&&(oa=Fa,ka=Qa)}-1<oa&&ka>H&&(1<oa-d&&Lp._simplifyStep(a,d,oa,H,Y),Y.push(a[oa]),1<l-oa&&Lp._simplifyStep(a,oa,l,H,Y))}static simplify2(a,d=1){if(2>=
a.length)return a;d*=d;var l=a[0],H=a[1];const Y=[l];for(let ka=1,oa=a.length;ka<oa;ka++)H=a[ka],(H[0]-l[0])*(H[0]-l[0])+(H[1]-l[1])*(H[1]-l[1])>d&&(Y.push(H),l=H);l!==H&&Y.push(H);l=Y.length-1;H=[Y[0]];Lp._simplifyStep(Y,0,l,d,H);H.push(Y[l],a[a.length-1]);return H}static pointNearToPolyline(a,d,l=8){const H=d.length;for(let Y=1;Y<H;Y++)if(Dd.distanceToLineSegment(d[Y-1],d[Y],a)<l)return!0;return!1}},jl=Lp;gb(jl,"simplify",(a,d=1)=>{var l=a.length;const H=a[0],Y=a[l-1],[ka,oa]=H,[Fa,Qa]=Y;if(2<l){let Wa=
0,db=0;const jb=Dd.len2([Qa-oa,Fa-ka]);for(let Mb=1;Mb<l-1;Mb++){const [Ub,Nb]=a[Mb],lc=Math.pow(Ub*(Qa-oa)+ka*(Nb-Qa)+Fa*(oa-Nb),2)/jb;Wa>lc||(Wa=lc,db=Mb)}if(Wa>d)return l=Lp.simplify(a.slice(0,db+1),d),a=Lp.simplify(a.slice(db+1),d),l.concat(a.slice(1))}return[H,Y]});var xm=Math.PI,po=xm/2,Fl=2*xm,Rq={},jt={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",
bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Xm=class{static circleFromThreePoints(a,d,l){const [H,Y]=a,[ka,oa]=d,[Fa,Qa]=l;d=H*(oa-Qa)-Y*(ka-Fa)+ka*Qa-Fa*oa;a=-((H*H+Y*Y)*(Qa-oa)+(ka*ka+oa*oa)*(Y-Qa)+(Fa*Fa+Qa*Qa)*(oa-Y))/(2*d);d=-((H*H+Y*Y)*(ka-Fa)+(ka*ka+oa*oa)*(Fa-H)+(Fa*Fa+Qa*Qa)*(H-ka))/(2*d);return[a,d,Math.hypot(a-H,d-Y)]}static perimeterOfEllipse(a,
d){const l=Math.pow(a-d,2)/Math.pow(a+d,2);return xm*(a+d)*(1+3*l/(10+Math.sqrt(4-3*l)))}static shortAngleDist(a,d){a=(d-a)%Fl;return 2*a%Fl-a}static longAngleDist(a,d){return Fl-Xm.shortAngleDist(a,d)}static lerpAngles(a,d,l){return a+Xm.shortAngleDist(a,d)*l}static angleDelta(a,d){return Xm.shortAngleDist(a,d)}static getSweep(a,d,l){return Xm.angleDelta(le.angle(a,d),le.angle(a,l))}static clampRadians(a){return(Fl+a)%Fl}static snapAngleToSegments(a,d){d=Fl/d;a=Math.floor((Xm.clampRadians(a)+d/2)/
d)*d%Fl;a<xm&&(a+=Fl);a>xm&&(a-=Fl);return a}static isAngleBetween(a,d,l){if(l===a||l===d)return!0;d=(d-a+po)%po;return d<=xm!==(l-a+po)%po>d}static degreesToRadians(a){return a*xm/180}static radiansToDegrees(a){return 180*a/xm}static getArcLength(a,d,l,H){a=Xm.getSweep(a,l,H);return a/Fl*Fl*d}static getSweepFlag(a,d,l){l=le.angle(a,l);return 0<(le.angle(a,d)-l+3*xm)%Fl-xm?0:1}static getLargeArcFlag(a,d,l){a=le.angle(l,a);d=(le.angle(l,d)-a+3*xm)%Fl-xm;return Math.abs(d)>po?0:1}static getArcDashOffset(a,
d,l,H,Y){const ka=Xm.getSweepFlag(a,l,H);d=Xm.getArcLength(a,d,l,H);return-(0>ka?d:Fl*a[2]-d)/2+Y}static getEllipseDashOffset(a,d){return-(Fl*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},Vl=class{static getPolygonCentroid(a){var d=a.map(l=>l[0]);a=a.map(l=>l[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+Math.max(...a);return[d?d/2:0,a?a/2:0]}};gb(Vl,"getEdges",a=>{const d=a.length;return a.map((l,
H)=>[l,a[(H+1)%d]])});gb(Vl,"getEdgeOutwardNormal",(a,d)=>le.per(le.uni(le.sub(d,a))));gb(Vl,"getEdgeInwardNormal",(a,d)=>le.neg(Vl.getEdgeOutwardNormal(a,d)));gb(Vl,"getOffsetEdge",(a,d,l)=>{l=le.mul(le.per(le.uni(le.sub(d,a))),l);return[le.add(a,l),le.add(d,l)]});gb(Vl,"getOffsetEdges",(a,d)=>a.map(([l,H])=>Vl.getOffsetEdge(l,H,d)));gb(Vl,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[le.add(a,[-d,-d]),le.add(a,[d,-d]),le.add(a,
[d,d]),le.add(a,[-d,d])];if(2===a.length){const [l,H]=a;return[...Vl.getOffsetEdge(l,H,d),...Vl.getOffsetEdge(H,l,d)]}return Vl.getOffsetEdges(Vl.getEdges(a),d).flatMap((l,H,Y)=>{{H=Y[(H+1)%Y.length];const ka=Dd.slope(l[0],l[1]);Y=Dd.slope(H[0],H[1]);ka!==Y?Number.isNaN(ka)&&!Number.isNaN(Y)?l=[l[0][0],(l[0][0]-H[0][0])*Y+H[0][1]]:Number.isNaN(Y)&&!Number.isNaN(ka)?l=[H[0][0],(H[0][0]-l[0][0])*ka+l[0][1]]:(l=(ka*l[0][0]-Y*H[0][0]+H[0][1]-l[0][1])/(ka-Y),l=[l,Y*(l-H[0][0])+H[0][1]]):l=void 0}if(void 0===
l)throw Error("Expected an intersection");return l})});gb(Vl,"getPolygonVertices",(a,d,l=0,H=1)=>{a=le.div(a,2);const [Y,ka]=[Math.max(1,a[0]-l),Math.max(1,a[1]-l)];l=[];for(let Wa=0,db=Fl/d;Wa<d;Wa++){var oa=(-po+Wa*db)%Fl,Fa=(-po+(Wa+1)*db)%Fl;oa=le.add(a,[Y*Math.cos(oa),ka*Math.sin(oa)]);Fa=le.add(a,[Y*Math.cos(Fa),ka*Math.sin(Fa)]);var Qa=le.med(oa,Fa);Qa=le.nudge(Qa,a,le.dist(a,Qa)*(1-H));l.push(oa,Qa,Fa)}return l});gb(Vl,"getTriangleVertices",(a,d=0,l=1)=>{const [H,Y]=a;var ka=1-l;a=[H/2,d/
2];l=[H-d,Y-d];d=[d/2,Y-d];const oa=Vl.getPolygonCentroid([a,l,d]),Fa=le.med(a,l),Qa=le.med(l,d),Wa=le.med(d,a),db=le.dist(Fa,oa)*ka,jb=le.dist(Qa,oa)*ka;ka*=le.dist(Wa,oa);return[a,db?le.nudge(Fa,oa,db):Fa,l,jb?le.nudge(Qa,oa,jb):Qa,d,ka?le.nudge(Wa,oa,ka):Wa]});gb(Vl,"getStarVertices",(a,d,l,H=1)=>{const Y=le.div(d,2),ka=le.mul(Y,H/2),oa=Fl/l/2;return Array.from(Array(2*l)).map((Fa,Qa)=>{Fa=-po+Qa*oa;const [Wa,db]=Qa%2?ka:Y;return le.add(a,[Wa*Math.cos(Fa),db*Math.sin(Fa)])})});var mu=class{static getCurvedPathForPolygon(a){if(3>
a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],l=a.length;for(let H=1;H<l;H++){const [Y,ka]=a[H],[oa,Fa]=a[(H+1)%l];d.push(Y,ka,(Y+oa)/2,(ka+Fa)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],l=a.length;for(let H=1;H<l-1;H++){const [Y,ka]=a[H],[oa,Fa]=a[H+1];d.push(Y,ka,(Y+oa)/2,(ka+Fa)/2)}return d.join(" ")}static getSvgPathFromStroke(a,
d=!0){const l=a.length;if(4>l)return"";let H=a[0],Y=a[1];var ka=a[2];ka=`M${H[0].toFixed(2)},${H[1].toFixed(2)} Q${Y[0].toFixed(2)},${Y[1].toFixed(2)} ${((Y[0]+ka[0])/2).toFixed(2)},${((Y[1]+ka[1])/2).toFixed(2)} T`;for(let oa=2,Fa=l-1;oa<Fa;oa++)H=a[oa],Y=a[oa+1],ka+=`${((H[0]+Y[0])/2).toFixed(2)},${((H[1]+Y[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}static getSvgPathFromStrokePoints(a,d=!1){const l=a.length;if(4>l)return"";let H=a[0].point,Y=a[1].point;var ka=a[2].point;ka=`M${H[0].toFixed(2)},${H[1].toFixed(2)} Q${Y[0].toFixed(2)},${Y[1].toFixed(2)} ${((Y[0]+
ka[0])/2).toFixed(2)},${((Y[1]+ka[1])/2).toFixed(2)} T`;for(let oa=2,Fa=l-1;oa<Fa;oa++)H=a[oa].point,Y=a[oa+1].point,ka+=`${((H[0]+Y[0])/2).toFixed(2)},${((H[1]+Y[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}};gb(mu,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var kx={},lx=Object.assign,pq=Object.getOwnPropertyDescriptor,Op=Object.defineProperty,qq=Object.prototype,T=[];Object.freeze(T);var la={};Object.freeze(la);var Ca="undefined"!==typeof Proxy,eb=Object.toString(),Gb=function(){},
oc="undefined"!==typeof Object.getOwnPropertySymbols,Hc="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:oc?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,$c=Object.getOwnPropertyDescriptors||function(a){var d={};Hc(a).forEach(function(l){d[l]=pq(a,l)});return d},Od=Symbol("mobx-stored-annotations"),de=Symbol("mobx administration"),qg=function(){function a(l){void 0===l&&(l="Atom");this.name_=void 0;this.isBeingObserved_=
this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=ek.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=l}var d=a.prototype;d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(l){return l()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(l){return l()})};d.reportObserved=function(){return Rb(this)};d.reportChanged=function(){ed();gc(this);Qd()};d.toString=function(){return this.name_};return a}(),Ph=B("Atom",
qg),nf={identity:function(a,d){return a===d},structural:function(a,d){return ta(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,d){return ta(a,d,1)}},$g="override",Sh=lb(),th={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(th);var re=Xb("observable"),Yd=Xb("observable.ref",{enhancer:bb}),pe=Xb("observable.shallow",{enhancer:function(a,d,l){if(void 0===a||null===a||se(a)||ib(a)||Fr(a)||Es(a))return a;if(Array.isArray(a))return Se.array(a,
{name:l,deep:!1});if(D(a))return Se.object(a,void 0,{name:l,deep:!1});if(O(a))return Se.map(a,{name:l,deep:!1});if(R(a))return Se.set(a,{name:l,deep:!1})}}),hf=Xb("observable.struct",{enhancer:function(a,d){return ta(a,d)?d:a}}),rf=Ta(re);Object.assign(Zc,rf);var mi={box:function(a,d){d=d||th;return new Cs(a,Dc(d),d.name,!0,d.equals)},array:function(a,d){d=d||th;return(!1===Of.useProxies||!1===d.proxy?uf:ob)(a,Dc(d),d.name)},map:function(a,d){d=d||th;return new Iz(a,Dc(d),d.name)},set:function(a,
d){d=d||th;return new Jz(a,Dc(d),d.name)},object:function(a,d,l){if(!1===Of.useProxies||!1===(null==l?void 0:l.proxy))l=yd({},l);else{var H={},Y,ka;X();H=yd(H,l);l=null!=(ka=(Y=H[de]).proxy_)?ka:Y.proxy_=new Proxy(H,gE)}return pc(l,a,d)},ref:Ta(Yd),shallow:Ta(pe),deep:rf,struct:Ta(hf)},Se=lx(Zc,mi),ai=yb("computed"),Ni=yb("computed.struct",{equals:nf.structural}),Df=function(a,d){if(S(d))return Da(a,d,ai);if(D(a))return Ta(yb("computed",a));d=D(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new uu(d)};
Object.assign(Df,ai);Df.struct=Ta(Ni);var Kp,Jv,Kv=0,UD=1,VD=null!=(Kp=null==(Jv=pq(function(){},"name"))?void 0:Jv.configurable)?Kp:!1,Cz={value:"action",configurable:!0,writable:!1,enumerable:!1};var WD=Symbol.toPrimitive;var Cs=function(a){function d(H,Y,ka,oa,Fa){void 0===ka&&(ka="ObservableValue");void 0===Fa&&(Fa=nf["default"]);oa=a.call(this,ka)||this;oa.enhancer=void 0;oa.hasUnreportedChange_=!1;oa.interceptors_=void 0;oa.changeListeners_=void 0;oa.value_=void 0;oa.dehancer=void 0;oa.enhancer=
Y;oa.name_=ka;oa.equals=Fa;oa.value_=Y(H,void 0,ka);return oa}fa(d,a);var l=d.prototype;l.dehanceValue=function(H){return void 0!==this.dehancer?this.dehancer(H):H};l.set=function(H){H=this.prepareNewValue_(H);H!==Of.UNCHANGED&&this.setNewValue_(H)};l.prepareNewValue_=function(H){if(ce(this)){H=qc(this,{object:this,type:yq,newValue:H});if(!H)return Of.UNCHANGED;H=H.newValue}H=this.enhancer(H,this.value_,this.name_);return this.equals(this.value_,H)?Of.UNCHANGED:H};l.setNewValue_=function(H){var Y=
this.value_;this.value_=H;this.reportChanged();tf(this)&&He(this,{type:yq,object:this,newValue:H,oldValue:Y})};l.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};l.intercept_=function(H){return Vc(this,H)};l.observe_=function(H,Y){Y&&H({observableKind:"value",debugObjectName:this.name_,object:this,type:yq,newValue:this.value_,oldValue:void 0});return Rf(this,H)};l.raw=function(){return this.value_};l.toJSON=function(){return this.get()};l.toString=function(){return this.name_+
"["+this.value_+"]"};l.valueOf=function(){return Z(this.get())};l[WD]=function(){return this.valueOf()};return d}(qg),XD=B("ObservableValue",Cs);var YD=Symbol.toPrimitive;var uu=function(){function a(l){this.dependenciesState_=ek.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=ek.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Ds(null);
this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=wt.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;l.get||h(31);this.derivation=l.get;this.name_=l.name||"ComputedValue";l.set&&(this.setter_=Kc("ComputedValue-setter",l.set));this.equals_=l.equals||(l.compareStructural||l.struct?nf.structural:nf["default"]);this.scope_=l.context;this.requiresReaction_=l.requiresReaction;
this.keepAlive_=!!l.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){kb(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(l){return l()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(l){return l()})};d.get=function(){this.isComputing_&&h(32,this.name_,this.derivation);if(0!==Of.inBatch||0!==this.observers_.size||this.keepAlive_){if(Rb(this),Tc(this)){var l=Of.trackingContext;this.keepAlive_&&!l&&(Of.trackingContext=this);this.trackAndCompute()&&Zb(this);Of.trackingContext=
l}}else Tc(this)&&(this.warnAboutUntrackedRead_(),ed(),this.value_=this.computeValue_(!1),Qd());l=this.value_;if(l instanceof Ds)throw l.cause;return l};d.set=function(l){if(this.setter_){this.isRunningSetter_&&h(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,l)}finally{this.isRunningSetter_=!1}}else h(34,this.name_)};d.trackAndCompute=function(){var l=this.value_,H=this.dependenciesState_===ek.NOT_TRACKING_,Y=this.computeValue_(!0);if(l=H||l instanceof Ds||Y instanceof
Ds||!this.equals_(l,Y))this.value_=Y;return l};d.computeValue_=function(l){this.isComputing_=!0;var H=yc(!1);if(l)var Y=bd(this,this.derivation,this.scope_);else if(!0===Of.disableErrorBoundaries)Y=this.derivation.call(this.scope_);else try{Y=this.derivation.call(this.scope_)}catch(ka){Y=new Ds(ka)}Of.allowStateChanges=H;this.isComputing_=!1;return Y};d.suspend_=function(){this.keepAlive_||(Id(this),this.value_=void 0)};d.observe_=function(l,H){var Y=this,ka=!0,oa=void 0;return Kd(function(){var Fa=
Y.get();if(!ka||H){var Qa=mc();l({observableKind:"computed",debugObjectName:Y.name_,type:yq,object:Y,newValue:Fa,oldValue:oa});Of.trackingDerivation=Qa}ka=!1;oa=Fa})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};d.valueOf=function(){return Z(this.get())};d[YD]=function(){return this.valueOf()};return a}(),vu=B("ComputedValue",uu),ek;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=
1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(ek||={});var wt;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(wt||={});var Ds=function(a){this.cause=void 0;this.cause=a},Lv=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];
this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},Mv=!0,Dz=!1,Of=function(){var a=K();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&(Mv=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new Lv).version&&(Mv=!1);if(Mv){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED=
{}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new Lv}setTimeout(function(){Dz||h(35)},1);return new Lv}(),xt=function(){function a(l,H,Y,ka){void 0===l&&(l="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=ek.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=wt.NONE;
this.name_=l;this.onInvalidate_=H;this.errorHandler_=Y;this.requiresObservable_=ka}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Of.pendingReactions.push(this),0<Of.inBatch||Of.isRunningReactions||Nv(nb))};d.isScheduled=function(){return this.isScheduled_};d.runReaction_=function(){if(!this.isDisposed_){ed();this.isScheduled_=!1;var l=Of.trackingContext;Of.trackingContext=this;if(Tc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(H){this.reportExceptionInDerivation_(H)}}Of.trackingContext=
l;Qd()}};d.track=function(l){if(!this.isDisposed_){ed();this.isRunning_=!0;var H=Of.trackingContext;Of.trackingContext=this;l=bd(this,l,void 0);Of.trackingContext=H;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Id(this);l instanceof Ds&&this.reportExceptionInDerivation_(l.cause);Qd()}};d.reportExceptionInDerivation_=function(l){var H=this;if(this.errorHandler_)this.errorHandler_(l,this);else{if(Of.disableErrorBoundaries)throw l;Of.suppressReactionErrors||console.error("[mobx] uncaught error in '"+
this+"'",l);Of.globalReactionErrorHandlers.forEach(function(Y){return Y(l,H)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(ed(),Id(this),Qd()))};d.getDisposer_=function(){var l=this.dispose.bind(this);l[de]=this;return l};d.toString=function(){return"Reaction["+this.name_+"]"};d.trace=function(l){void 0===l&&(l=!1);zb(this,l)};return a}(),ZD=100,Nv=function(a){return a()},Ov=B("Reaction",xt),Ez="action",Fz=ab(Ez),$D=ab("action.bound",{bound:!0}),Gz=ab("autoAction",
{autoAction:!0}),aE=ab("autoAction.bound",{autoAction:!0,bound:!0}),xg=Qc(!1);Object.assign(xg,Fz);var wu=Qc(!0);Object.assign(wu,Gz);xg.bound=Ta($D);wu.bound=Ta(aE);var bE=function(a){return a()},cE="onBO",dE="onBUO",eE=0;Wb.prototype=Object.create(Error.prototype);var Hz=qa("flow"),fE=qa("flow.bound",{bound:!0}),xu=Object.assign(function(a,d){if(S(d))return Da(a,d,Hz);var l=a.name||"\x3cunnamed flow\x3e";d=function(){var H=arguments,Y=++eE,ka=xg(l+" - runid: "+Y+" - init",a).apply(this,H),oa,Fa=
void 0;H=new Promise(function(Qa,Wa){function db(Nb){Fa=void 0;try{var lc=xg(l+" - runid: "+Y+" - yield "+Ub++,ka.next).call(ka,Nb)}catch(xc){return Wa(xc)}Mb(lc)}function jb(Nb){Fa=void 0;try{var lc=xg(l+" - runid: "+Y+" - yield "+Ub++,ka["throw"]).call(ka,Nb)}catch(xc){return Wa(xc)}Mb(lc)}function Mb(Nb){if(ha(null==Nb?void 0:Nb.then))Nb.then(Mb,Wa);else{if(Nb.done)return Qa(Nb.value);Fa=Promise.resolve(Nb.value);return Fa.then(db,jb)}}var Ub=0;oa=Wa;db(void 0)});H.cancel=xg(l+" - runid: "+Y+" - cancel",
function(){try{if(Fa){var Qa=Fa;ha(Qa.cancel)&&Qa.cancel()}var Wa=ka["return"](void 0),db=Promise.resolve(Wa.value);db.then(Gb,Gb);ha(db.cancel)&&db.cancel();oa(new Wb)}catch(jb){oa(jb)}});return H};d.isMobXFlow=!0;return d},Hz);xu.bound=Ta(fE);var gE={has:function(a,d){return a[de].has_(d)},get:function(a,d){return a[de].get_(d)},set:function(a,d,l){var H;return S(d)?null!=(H=a[de].set_(d,l,!0))?H:!0:!1},deleteProperty:function(a,d){var l;return S(d)?null!=(l=a[de].delete_(d,!0))?l:!0:!1},defineProperty:function(a,
d,l){var H;return null!=(H=a[de].defineProperty_(d,l))?H:!0},ownKeys:function(a){return a[de].ownKeys_()},preventExtensions:function(a){h(13)}},yq="update",hE={get:function(a,d){var l=a[de];return d===de?l:"length"===d?l.getArrayLength_():"string"!==typeof d||isNaN(d)?F(Pv,d)?Pv[d]:a[d]:l.get_(parseInt(d))},set:function(a,d,l){var H=a[de];"length"===d&&H.setArrayLength_(l);"symbol"===typeof d||isNaN(d)?a[d]=l:H.set_(parseInt(d),l);return!0},preventExtensions:function(){h(15)}},px=function(){function a(l,
H,Y,ka){void 0===l&&(l="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=Y;this.legacyMode_=ka;this.atom_=new qg(l);this.enhancer_=function(oa,Fa){return H(oa,Fa,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(l){return void 0!==this.dehancer?this.dehancer(l):l};d.dehanceValues_=function(l){return void 0!==this.dehancer&&0<
l.length?l.map(this.dehancer):l};d.intercept_=function(l){return Vc(this,l)};d.observe_=function(l,H){void 0===H&&(H=!1);H&&l({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Rf(this,l)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(l){("number"!==typeof l||isNaN(l)||0>l)&&h("Out of range: "+
l);var H=this.values_.length;if(l!==H)if(l>H){for(var Y=Array(l-H),ka=0;ka<l-H;ka++)Y[ka]=void 0;this.spliceWithArray_(H,0,Y)}else this.spliceWithArray_(l,H-l)};d.updateArrayLength_=function(l,H){l!==this.lastKnownLength_&&h(16);this.lastKnownLength_+=H;this.legacyMode_&&0<H&&ze(l+H+1)};d.spliceWithArray_=function(l,H,Y){var ka=this,oa=this.values_.length;void 0===l?l=0:l>oa?l=oa:0>l&&(l=Math.max(0,oa+l));H=1===arguments.length?oa-l:void 0===H||null===H?0:Math.max(0,Math.min(H,oa-l));void 0===Y&&
(Y=T);if(ce(this)){var Fa=qc(this,{object:this.proxy_,type:"splice",index:l,removedCount:H,added:Y});if(!Fa)return T;H=Fa.removedCount;Y=Fa.added}Y=0===Y.length?Y:Y.map(function(Qa){return ka.enhancer_(Qa,void 0)});this.legacyMode_&&this.updateArrayLength_(oa,Y.length-H);oa=this.spliceItemsIntoValues_(l,H,Y);0===H&&0===Y.length||this.notifyArraySplice_(l,Y,oa);return this.dehanceValues_(oa)};d.spliceItemsIntoValues_=function(l,H,Y){if(1E4>Y.length){var ka;return(ka=this.values_).splice.apply(ka,[l,
H].concat(Y))}ka=this.values_.slice(l,l+H);var oa=this.values_.slice(l+H);this.values_.length+=Y.length-H;for(H=0;H<Y.length;H++)this.values_[l+H]=Y[H];for(H=0;H<oa.length;H++)this.values_[l+Y.length+H]=oa[H];return ka};d.notifyArrayChildUpdate_=function(l,H,Y){var ka=!this.owned_&&!1,oa=tf(this);l=oa||ka?{observableKind:"array",object:this.proxy_,type:yq,debugObjectName:this.atom_.name_,index:l,newValue:H,oldValue:Y}:null;this.atom_.reportChanged();oa&&He(this,l)};d.notifyArraySplice_=function(l,
H,Y){var ka=!this.owned_&&!1,oa=tf(this);l=oa||ka?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:l,removed:Y,added:H,removedCount:Y.length,addedCount:H.length}:null;this.atom_.reportChanged();oa&&He(this,l)};d.get_=function(l){if(this.legacyMode_&&l>=this.values_.length)console.warn("[mobx] Out of bounds read: "+l);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[l])};d.set_=function(l,H){var Y=this.values_;this.legacyMode_&&
l>Y.length&&h(17,l,Y.length);if(l<Y.length){var ka=Y[l];if(ce(this)){H=qc(this,{type:yq,object:this.proxy_,index:l,newValue:H});if(!H)return;H=H.newValue}H=this.enhancer_(H,ka);H!==ka&&(Y[l]=H,this.notifyArrayChildUpdate_(l,H,ka))}else{l=Array(l+1-Y.length);for(ka=0;ka<l.length-1;ka++)l[ka]=void 0;l[l.length-1]=H;this.spliceWithArray_(Y.length,0,l)}};return a}(),Pv={clear:function(){return this.splice(0)},replace:function(a){var d=this[de];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},
splice:function(a,d){for(var l=arguments.length,H=Array(2<l?l-2:0),Y=2;Y<l;Y++)H[Y-2]=arguments[Y];l=this[de];switch(arguments.length){case 0:return[];case 1:return l.spliceWithArray_(a);case 2:return l.spliceWithArray_(a,d)}return l.spliceWithArray_(a,d,H)},spliceWithArray:function(a,d,l){return this[de].spliceWithArray_(a,d,l)},push:function(){for(var a=this[de],d=arguments.length,l=Array(d),H=0;H<d;H++)l[H]=arguments[H];a.spliceWithArray_(a.values_.length,0,l);return a.values_.length},pop:function(){return this.splice(Math.max(this[de].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var a=this[de],d=arguments.length,l=Array(d),H=0;H<d;H++)l[H]=arguments[H];a.spliceWithArray_(0,0,l);return a.values_.length},reverse:function(){Of.trackingDerivation&&h(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){Of.trackingDerivation&&h(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[de];a=d.dehanceValues_(d.values_).indexOf(a);
return-1<a?(this.splice(a,1),!0):!1}};wb("concat",$a);wb("flat",$a);wb("includes",$a);wb("indexOf",$a);wb("join",$a);wb("lastIndexOf",$a);wb("slice",$a);wb("toString",$a);wb("toLocaleString",$a);wb("every",Db);wb("filter",Db);wb("find",Db);wb("findIndex",Db);wb("flatMap",Db);wb("forEach",Db);wb("map",Db);wb("some",Db);wb("reduce",Cb);wb("reduceRight",Cb);var iE=B("ObservableArrayAdministration",px),jE={};var kE=Symbol.iterator;var lE=Symbol.toStringTag;var Iz=function(){function a(l,H,Y){var ka=this;
void 0===H&&(H=Ma);void 0===Y&&(Y="ObservableMap");this.name_=this.enhancer_=void 0;this[de]=jE;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=H;this.name_=Y;ha(Map)||h(18);this.keysAtom_=Va("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Fb(!0,function(){ka.merge(l)})}var d=a.prototype;d.has_=function(l){return this.data_.has(l)};d.has=function(l){var H=this;if(!Of.trackingDerivation)return this.has_(l);var Y=this.hasMap_.get(l);
if(!Y){var ka=Y=new Cs(this.has_(l),bb,"ObservableMap.key?",!1);this.hasMap_.set(l,ka);Nc(ka,function(){return H.hasMap_["delete"](l)})}return Y.get()};d.set=function(l,H){var Y=this.has_(l);if(ce(this)){H=qc(this,{type:Y?yq:"add",object:this,newValue:H,name:l});if(!H)return this;H=H.newValue}Y?this.updateValue_(l,H):this.addValue_(l,H);return this};d["delete"]=function(l){var H=this;if(ce(this)&&!qc(this,{type:"delete",object:this,name:l}))return!1;if(this.has_(l)){var Y=tf(this),ka=Y?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(l).value_,name:l}:null;xd(function(){var oa;H.keysAtom_.reportChanged();null==(oa=H.hasMap_.get(l))?void 0:oa.setNewValue_(!1);H.data_.get(l).setNewValue_(void 0);H.data_["delete"](l)});Y&&He(this,ka);return!0}return!1};d.updateValue_=function(l,H){var Y=this.data_.get(l);H=Y.prepareNewValue_(H);if(H!==Of.UNCHANGED){var ka=tf(this);l=ka?{observableKind:"map",debugObjectName:this.name_,type:yq,object:this,oldValue:Y.value_,
name:l,newValue:H}:null;Y.setNewValue_(H);ka&&He(this,l)}};d.addValue_=function(l,H){var Y=this;xd(function(){var Fa,Qa=new Cs(H,Y.enhancer_,"ObservableMap.key",!1);Y.data_.set(l,Qa);H=Qa.value_;null==(Fa=Y.hasMap_.get(l))?void 0:Fa.setNewValue_(!0);Y.keysAtom_.reportChanged()});var ka=tf(this),oa=ka?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:l,newValue:H}:null;ka&&He(this,oa)};d.get=function(l){return this.has(l)?this.dehanceValue_(this.data_.get(l).get()):this.dehanceValue_(void 0)};
d.dehanceValue_=function(l){return void 0!==this.dehancer?this.dehancer(l):l};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var l=this,H=this.keys();return Za({next:function(){var Y=H.next(),ka=Y.done;Y=Y.value;return{done:ka,value:ka?void 0:l.get(Y)}}})};d.entries=function(){var l=this,H=this.keys();return Za({next:function(){var Y=H.next(),ka=Y.done;Y=Y.value;return{done:ka,value:ka?void 0:[Y,l.get(Y)]}}})};d[kE]=function(){return this.entries()};
d.forEach=function(l,H){for(var Y=Ga(this),ka;!(ka=Y()).done;)ka=ka.value,l.call(H,ka[1],ka[0],this)};d.merge=function(l){var H=this;Fr(l)&&(l=new Map(l));xd(function(){D(l)?ba(l).forEach(function(Y){return H.set(Y,l[Y])}):Array.isArray(l)?l.forEach(function(Y){return H.set(Y[0],Y[1])}):O(l)?(l.constructor!==Map&&h(19,l),l.forEach(function(Y,ka){return H.set(ka,Y)})):null!==l&&void 0!==l&&h(20,l)});return this};d.clear=function(){var l=this;xd(function(){Ed(function(){for(var H=Ga(l.keys()),Y;!(Y=
H()).done;)l["delete"](Y.value)})})};d.replace=function(l){var H=this;xd(function(){for(var Y=ad(l),ka=new Map,oa=!1,Fa=Ga(H.data_.keys()),Qa;!(Qa=Fa()).done;)if(Qa=Qa.value,!Y.has(Qa))if(H["delete"](Qa))oa=!0;else{var Wa=H.data_.get(Qa);ka.set(Qa,Wa)}for(Y=Ga(Y.entries());!(Fa=Y()).done;)Qa=Fa.value,Fa=Qa[0],Wa=Qa[1],Qa=H.data_.has(Fa),H.set(Fa,Wa),H.data_.has(Fa)&&(Wa=H.data_.get(Fa),ka.set(Fa,Wa),Qa||(oa=!0));if(!oa)if(H.data_.size!==ka.size)H.keysAtom_.reportChanged();else for(oa=H.data_.keys(),
Y=ka.keys(),Fa=oa.next(),Qa=Y.next();!Fa.done;){if(Fa.value!==Qa.value){H.keysAtom_.reportChanged();break}Fa=oa.next();Qa=Y.next()}H.data_=ka});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(l,H){return Rf(this,l)};d.intercept_=function(l){return Vc(this,l)};M(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:lE,get:function(){return"Map"}}]);return a}(),Fr=B("ObservableMap",
Iz),mE={};var nE=Symbol.iterator;var oE=Symbol.toStringTag;var Jz=function(){function a(l,H,Y){void 0===H&&(H=Ma);void 0===Y&&(Y="ObservableSet");this.name_=void 0;this[de]=mE;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=Y;ha(Set)||h(22);this.atom_=Va(this.name_);this.enhancer_=function(ka,oa){return H(ka,oa,Y)};l&&this.replace(l)}var d=a.prototype;d.dehanceValue_=function(l){return void 0!==this.dehancer?this.dehancer(l):l};
d.clear=function(){var l=this;xd(function(){Ed(function(){for(var H=Ga(l.data_.values()),Y;!(Y=H()).done;)l["delete"](Y.value)})})};d.forEach=function(l,H){for(var Y=Ga(this),ka;!(ka=Y()).done;)ka=ka.value,l.call(H,ka,ka,this)};d.add=function(l){var H=this;if(ce(this)&&!qc(this,{type:"add",object:this,newValue:l}))return this;if(!this.has(l)){xd(function(){H.data_.add(H.enhancer_(l,void 0));H.atom_.reportChanged()});var Y=tf(this),ka=Y?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:l}:null;Y&&He(this,ka)}return this};d["delete"]=function(l){var H=this;if(ce(this)&&!qc(this,{type:"delete",object:this,oldValue:l}))return!1;if(this.has(l)){var Y=tf(this),ka=Y?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:l}:null;xd(function(){H.atom_.reportChanged();H.data_["delete"](l)});Y&&He(this,ka);return!0}return!1};d.has=function(l){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(l))};d.entries=function(){var l=0,H=Array.from(this.keys()),
Y=Array.from(this.values());return Za({next:function(){var ka=l;l+=1;return ka<Y.length?{value:[H[ka],Y[ka]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var l=this,H=0,Y=Array.from(this.data_.values());return Za({next:function(){return H<Y.length?{value:l.dehanceValue_(Y[H++]),done:!1}:{done:!0}}})};d.replace=function(l){var H=this;Es(l)&&(l=new Set(l));xd(function(){Array.isArray(l)?(H.clear(),l.forEach(function(Y){return H.add(Y)})):
R(l)?(H.clear(),l.forEach(function(Y){return H.add(Y)})):null!==l&&void 0!==l&&h("Cannot initialize set from "+l)});return this};d.observe_=function(l,H){return Rf(this,l)};d.intercept_=function(l){return Vc(this,l)};d.toJSON=function(){return Array.from(this)};d.toString=function(){return"[object ObservableSet]"};d[nE]=function(){return this.values()};M(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:oE,get:function(){return"Set"}}]);return a}(),Es=B("ObservableSet",
Jz),Kz=Object.create(null),Lz=function(){function a(l,H,Y,ka){void 0===H&&(H=new Map);void 0===ka&&(ka=Sh);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=l;this.values_=H;this.name_=Y;this.defaultAnnotation_=ka;this.keysAtom_=new qg("ObservableObject.keys");this.isPlainObject_=D(this.target_)}var d=a.prototype;d.getObservablePropValue_=function(l){return this.values_.get(l).get()};
d.setObservablePropValue_=function(l,H){var Y=this.values_.get(l);if(Y instanceof uu)return Y.set(H),!0;if(ce(this)){H=qc(this,{type:yq,object:this.proxy_||this.target_,name:l,newValue:H});if(!H)return null;H=H.newValue}H=Y.prepareNewValue_(H);if(H!==Of.UNCHANGED){var ka=tf(this);l=ka?{type:yq,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Y.value_,name:l,newValue:H}:null;Y.setNewValue_(H);ka&&He(this,l)}return!0};d.get_=function(l){Of.trackingDerivation&&
!F(this.target_,l)&&this.has_(l);return this.target_[l]};d.set_=function(l,H,Y){void 0===Y&&(Y=!1);if(F(this.target_,l)){if(this.values_.has(l))return this.setObservablePropValue_(l,H);if(Y)return Reflect.set(this.target_,l,H);this.target_[l]=H;return!0}return this.extend_(l,{value:H,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Y)};d.has_=function(l){if(!Of.trackingDerivation)return l in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var H=this.pendingKeys_.get(l);
H||(H=new Cs(l in this.target_,bb,"ObservableObject.key?",!1),this.pendingKeys_.set(l,H));return H.get()};d.make_=function(l,H){!0===H&&(H=this.defaultAnnotation_);if(!1!==H){if(!(l in this.target_)){var Y;if(null!=(Y=this.target_[Od])&&Y[l])return;h(1,H.annotationType_,this.name_+"."+l.toString())}for(Y=this.target_;Y&&Y!==qq;){var ka=pq(Y,l);if(ka){ka=H.make_(this,l,ka,Y);if(0===ka)return;if(1===ka)break}Y=Object.getPrototypeOf(Y)}var oa;null==(oa=this.target_[Od])?!0:delete oa[l]}};d.extend_=function(l,
H,Y,ka){void 0===ka&&(ka=!1);!0===Y&&(Y=this.defaultAnnotation_);if(!1===Y)return this.defineProperty_(l,H,ka);if(H=Y.extend_(this,l,H,ka)){var oa;null==(oa=this.target_[Od])?!0:delete oa[l]}return H};d.defineProperty_=function(l,H,Y){void 0===Y&&(Y=!1);try{ed();var ka=this.delete_(l);if(!ka)return ka;if(ce(this)){var oa=qc(this,{object:this.proxy_||this.target_,name:l,type:"add",newValue:H.value});if(!oa)return null;var Fa=oa.newValue;H.value!==Fa&&(H=ca({},H,{value:Fa}))}if(Y){if(!Reflect.defineProperty(this.target_,
l,H))return!1}else Op(this.target_,l,H);this.notifyPropertyAddition_(l,H.value)}finally{Qd()}return!0};d.defineObservableProperty_=function(l,H,Y,ka){void 0===ka&&(ka=!1);try{ed();var oa=this.delete_(l);if(!oa)return oa;if(ce(this)){var Fa=qc(this,{object:this.proxy_||this.target_,name:l,type:"add",newValue:H});if(!Fa)return null;H=Fa.newValue}var Qa=Zd(l),Wa={configurable:Of.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Qa.get,set:Qa.set};if(ka){if(!Reflect.defineProperty(this.target_,
l,Wa))return!1}else Op(this.target_,l,Wa);var db=new Cs(H,Y,"ObservableObject.key",!1);this.values_.set(l,db);this.notifyPropertyAddition_(l,db.value_)}finally{Qd()}return!0};d.defineComputedProperty_=function(l,H,Y){void 0===Y&&(Y=!1);try{ed();var ka=this.delete_(l);if(!ka)return ka;if(ce(this)&&!qc(this,{object:this.proxy_||this.target_,name:l,type:"add",newValue:void 0}))return null;H.name||(H.name="ObservableObject.key");H.context=this.proxy_||this.target_;var oa=Zd(l),Fa={configurable:Of.safeDescriptors?
this.isPlainObject_:!0,enumerable:!1,get:oa.get,set:oa.set};if(Y){if(!Reflect.defineProperty(this.target_,l,Fa))return!1}else Op(this.target_,l,Fa);this.values_.set(l,new uu(H));this.notifyPropertyAddition_(l,void 0)}finally{Qd()}return!0};d.delete_=function(l,H){void 0===H&&(H=!1);if(!F(this.target_,l))return!0;if(ce(this)&&!qc(this,{object:this.proxy_||this.target_,name:l,type:"remove"}))return null;try{var Y,ka;ed();var oa=tf(this),Fa=this.values_.get(l),Qa=void 0;if(!Fa&&oa){var Wa;Qa=null==(Wa=
pq(this.target_,l))?void 0:Wa.value}if(H){if(!Reflect.deleteProperty(this.target_,l))return!1}else delete this.target_[l];Fa&&(this.values_["delete"](l),Fa instanceof Cs&&(Qa=Fa.value_),gc(Fa));this.keysAtom_.reportChanged();null==(Y=this.pendingKeys_)?void 0:null==(ka=Y.get(l))?void 0:ka.set(l in this.target_);if(oa){var db={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Qa,name:l};oa&&He(this,db)}}finally{Qd()}return!0};d.observe_=function(l,
H){return Rf(this,l)};d.intercept_=function(l){return Vc(this,l)};d.notifyPropertyAddition_=function(l,H){var Y,ka,oa=tf(this);oa&&(H=oa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:l,newValue:H}:null,oa&&He(this,H));null==(Y=this.pendingKeys_)?void 0:null==(ka=Y.get(l))?void 0:ka.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=function(){this.keysAtom_.reportObserved();return Hc(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();
return Object.keys(this.target_)};return a}(),pE=B("ObservableObjectAdministration",Lz),qE=af(0),qx=0,Mz=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,d):void 0!==a.prototype.__proto__?a.prototype.__proto__=d:a.prototype=d})(Mz,Array.prototype);var rx=function(a,d,l){function H(ka,oa,Fa,Qa){void 0===Fa&&(Fa="ObservableArray");void 0===Qa&&(Qa=!1);var Wa=a.call(this)||this;oa=new px(Fa,oa,Qa,!0);oa.proxy_=pa(Wa);Q(pa(Wa),de,oa);ka&&ka.length&&(oa=yc(!0),Wa.spliceWithArray(0,
0,ka),Of.allowStateChanges=oa);Object.defineProperty(pa(Wa),"0",qE);return Wa}fa(H,a);var Y=H.prototype;Y.concat=function(){this[de].atom_.reportObserved();for(var ka=arguments.length,oa=Array(ka),Fa=0;Fa<ka;Fa++)oa[Fa]=arguments[Fa];return Array.prototype.concat.apply(this.slice(),oa.map(function(Qa){return ib(Qa)?Qa.slice():Qa}))};Y[l]=function(){var ka=this,oa=0;return Za({next:function(){return oa<ka.length?{value:ka[oa++],done:!1}:{done:!0,value:void 0}}})};M(H,[{key:"length",get:function(){return this[de].getArrayLength_()},
set:function(ka){this[de].setArrayLength_(ka)}},{key:d,get:function(){return"Array"}}]);return H}(Mz,Symbol.toStringTag,Symbol.iterator);Object.entries(Pv).forEach(function(a){var d=a[0];a=a[1];"concat"!==d&&N(rx.prototype,d,a)});ze(1E3);var Nz=qq.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof K()[a]&&h("MobX requires global '"+a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:uc,extras:{getDebugName:ub},
$mobx:de});var rE=V(586),gn=class{constructor(a){gb(this,"props");gb(this,"aspectRatio");gb(this,"type");gb(this,"hideCloneHandles",!1);gb(this,"hideResizeHandles",!1);gb(this,"hideRotateHandle",!1);gb(this,"hideContextBar",!1);gb(this,"hideSelectionDetail",!1);gb(this,"hideSelection",!1);gb(this,"canChangeAspectRatio",!0);gb(this,"canUnmount",!0);gb(this,"canResize",[!0,!0]);gb(this,"canScale",!0);gb(this,"canFlip",!0);gb(this,"canEdit",!1);gb(this,"canBind",!1);gb(this,"nonce");gb(this,"bindingDistance",
4);gb(this,"isDirty",!1);gb(this,"lastSerialized");gb(this,"getCenter",()=>Af.getBoundsCenter(this.bounds));gb(this,"getRotatedBounds",()=>{const {bounds:ka,props:{rotation:oa}}=this;return oa?Af.getBoundsFromPoints(Af.getRotatedCorners(ka,oa)):ka});gb(this,"hitTestPoint",ka=>{var oa=this.rotatedBounds;if(!this.props.rotation)return jl.pointInBounds(ka,oa);oa=Af.getRotatedCorners(oa,this.props.rotation);return jl.pointInPolygon(ka,oa)});gb(this,"hitTestLineSegment",(ka,oa)=>{const Fa=Af.getBoundsFromPoints([ka,
oa]),{rotatedBounds:Qa,props:{rotation:Wa=0}}=this;return Af.boundsContain(Qa,Fa)||Wa?f(ka,oa,Af.getRotatedCorners(this.bounds)).didIntersect:0<k(Qa,ka,oa).length});gb(this,"hitTestBounds",ka=>{const {rotatedBounds:oa,props:{rotation:Fa=0}}=this,Qa=Af.getRotatedCorners(this.bounds,Fa);return Af.boundsContain(ka,oa)||0<y([ka.minX,ka.minY],[ka.width,ka.height],Qa).length});gb(this,"getExpandedBounds",()=>Af.expandBounds(this.getBounds(),this.bindingDistance));gb(this,"getBindingPoint",(ka,oa,Fa,Qa)=>
{var Wa=this.getBounds(),db=this.getExpandedBounds();if(jl.pointInBounds(ka,db)){var jb=C(oa,Fa,db).filter(Mb=>Mb.didIntersect).map(Mb=>Mb.points[0]);if(jb.length)return Fa=this.getCenter(),jb=jb.sort((Mb,Ub)=>le.dist(Ub,oa)-le.dist(Mb,oa))[0],jb=le.med(ka,jb),Qa?(Qa=2>le.dist(ka,Fa)?Fa:ka,Wa=0):(Qa=2>le.distanceToLineSegment(ka,jb,Fa)?Fa:jb,Wa=jl.pointInBounds(ka,Wa)?this.bindingDistance:Math.max(this.bindingDistance,Af.getBoundsSides(Wa).map(Mb=>le.distanceToLineSegment(Mb[1][0],Mb[1][1],ka)).sort((Mb,
Ub)=>Mb-Ub)[0])),db=le.divV(le.sub(Qa,[db.minX,db.minY]),[db.width,db.height]),{point:le.clampV(db,0,1),distance:Wa}}});gb(this,"getSerialized",()=>Ab(qf(ne({},this.props),{type:this.type,nonce:this.nonce})));gb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||xd(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});gb(this,"validateProps",ka=>ka);gb(this,
"update",(ka,oa=!1,Fa=!1)=>{oa||this.isDirty||this.setIsDirty(!0);oa||Fa||this.incNonce();Object.assign(this.props,this.validateProps(ka));return this});gb(this,"clone",()=>new this.constructor(this.serialized));gb(this,"onResetBounds",ka=>this);gb(this,"scale",[1,1]);gb(this,"onResizeStart",ka=>{var oa;this.scale=[...(null!=(oa=this.props.scale)?oa:[1,1])];return this});gb(this,"onResize",(ka,oa)=>{const {bounds:Fa,rotation:Qa,scale:[Wa,db]}=oa;ka=[...this.scale];0>Wa&&(ka[0]*=-1);0>db&&(ka[1]*=
-1);this.update({point:[Fa.minX,Fa.minY],scale:ka,rotation:Qa});return this});gb(this,"onHandleChange",(ka,{id:oa,delta:Fa})=>{if(void 0!==ka.handles){var Qa=Gs(ka.handles);Qa[oa]=qf(ne({},Qa[oa]),{point:le.add(Fa,ka.handles[oa].point)});var Wa=Af.getCommonTopLeft(Object.values(Qa).map(db=>db.point));Object.values(Qa).forEach(db=>{db.point=le.sub(db.point,Wa)});this.update({point:le.add(ka.point,Wa),handles:Qa})}});var d,l;const H=this.constructor.id,Y=null!=(d=this.constructor.defaultProps)?d:{};
this.type=H;this.props=ne(ne({scale:[1,1]},Y),a);this.nonce=null!=(l=a.nonce)?l:Date.now();Qg(this)}get id(){return this.props.id}setNonce(a){this.nonce=a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=this.getBounds();const {stroke:d,strokeWidth:l,strokeType:H,
opacity:Y,fill:ka,noFill:oa,borderRadius:Fa}=this.props;return(0,rE.jsx)("rect",{fill:oa?"none":dh(ka,"background"),stroke:dh(d,"stroke"),strokeWidth:null!=l?l:2,strokeDasharray:"dashed"===H?"8 2":void 0,fillOpacity:null!=Y?Y:.2,width:a.width,height:a.height,rx:Fa,ry:Fa})}};gb(gn,"type");he([Se],gn.prototype,"props",2);he([Se],gn.prototype,"canResize",2);he([Se],gn.prototype,"nonce",2);he([Se],gn.prototype,"isDirty",2);he([Se],gn.prototype,"lastSerialized",2);he([Df],gn.prototype,"id",1);he([xg],
gn.prototype,"setNonce",1);he([xg],gn.prototype,"incNonce",1);he([xg],gn.prototype,"setIsDirty",1);he([xg],gn.prototype,"setLastSerialized",1);he([Df],gn.prototype,"center",1);he([Df],gn.prototype,"bounds",1);he([Df],gn.prototype,"rotatedBounds",1);he([Df],gn.prototype,"serialized",1);he([xg],gn.prototype,"update",2);var to=class extends gn{constructor(a={}){super(a);gb(this,"canBind",!0);gb(this,"getBounds",()=>{const [d,l]=this.props.point,[H,Y]=this.props.size;return{minX:d,minY:l,maxX:d+H,maxY:l+
Y,width:H,height:Y}});gb(this,"getRotatedBounds",()=>Af.getBoundsFromPoints(Af.getRotatedCorners(this.bounds,this.props.rotation)));gb(this,"onResize",(d,l)=>{const {bounds:H,rotation:Y,scale:[ka,oa]}=l;d=[...this.scale];0>ka&&(d[0]*=-1);0>oa&&(d[1]*=-1);this.update({point:[H.minX,H.minY],scale:d,rotation:Y});return this.update({rotation:Y,point:[H.minX,H.minY],size:[Math.max(1,H.width),Math.max(1,H.height)],scale:d})});gb(this,"validateProps",d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),
d.size[1]=Math.max(d.size[1],1));return d});Qg(this)}};gb(to,"id","box");gb(to,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var yt=class extends gn{constructor(a={}){super(a);gb(this,"getBounds",()=>{const {pointBounds:d,props:{point:l}}=this;return Af.translateBounds(d,l)});gb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:l},bounds:H,rotatedPoints:Y}=this;return d?Af.translateBounds(Af.getBoundsFromPoints(Y),l):H});gb(this,"normalizedPoints",[]);
gb(this,"isResizeFlippedX",!1);gb(this,"isResizeFlippedY",!1);gb(this,"onResizeStart",()=>{var d;const {bounds:l,props:{points:H}}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const Y=[l.width,l.height];this.normalizedPoints=H.map(ka=>Dd.divV(ka,Y));return this});gb(this,"onResize",(d,l)=>{const {bounds:H,scale:[Y,ka]}=l,oa=[H.width,H.height];d=[...this.scale];0>Y&&(d[0]*=-1);0>ka&&(d[1]*=-1);return this.update(Y||ka?{point:[H.minX,H.minY],points:this.normalizedPoints.map(Fa=>Dd.mulV(Fa,
oa).concat(Fa[2])),scale:d}:{point:[H.minX,H.minY],points:this.normalizedPoints.map(Fa=>Dd.mulV(Fa,oa).concat(Fa[2]))})});gb(this,"hitTestPoint",d=>{const {props:{points:l,point:H}}=this;return jl.pointNearToPolyline(Dd.sub(d,H),l)});gb(this,"hitTestLineSegment",(d,l)=>{const {bounds:H,props:{points:Y,point:ka}}=this;if(jl.pointInBounds(d,H)||jl.pointInBounds(l,H)||0<k(H,d,l).length){const oa=Dd.sub(d,ka),Fa=Dd.sub(l,ka);return f(oa,Fa,Y).didIntersect||!!Y.find(Qa=>5>Dd.dist(oa,Qa)||5>Dd.dist(Fa,
Qa))}return!1});gb(this,"hitTestBounds",d=>{const {rotatedBounds:l,props:{points:H,point:Y}}=this,ka=Af.translateBounds(d,Dd.neg(Y));return Af.boundsContain(d,l)||H.every(oa=>jl.pointInBounds(oa,ka))||Af.boundsCollide(d,l)&&0<L([ka.minX,ka.minY],[ka.width,ka.height],H).length});Qg(this)}get pointBounds(){const {props:{points:a}}=this;return Af.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:l},center:H}=this;if(!l)return d;const Y=Dd.sub(H,a);return d.map(ka=>Dd.rotWith(ka,
Y,l))}};gb(yt,"id","draw");gb(yt,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});he([Df],yt.prototype,"pointBounds",1);he([Df],yt.prototype,"rotatedPoints",1);var sx=class extends to{constructor(a={}){super(a);gb(this,"getBounds",()=>{const {props:{point:[d,l],size:[H,Y]}}=this;return Af.getRotatedEllipseBounds(d,l,H/2,Y/2,0)});gb(this,"getRotatedBounds",()=>{const {props:{point:[d,l],size:[H,Y],rotation:ka}}=this;return Af.getRotatedEllipseBounds(d,l,H/
2,Y/2,ka)});gb(this,"hitTestPoint",d=>{const {props:{size:l,rotation:H},center:Y}=this;return jl.pointInEllipse(d,Y,l[0],l[1],H||0)});gb(this,"hitTestLineSegment",(d,l)=>{const {props:{size:[H,Y],rotation:ka=0},center:oa}=this;return p(d,l,oa,H,Y,ka).didIntersect});gb(this,"hitTestBounds",d=>{const {props:{size:[l,H],rotation:Y=0},rotatedBounds:ka}=this;var oa;if(!(oa=Af.boundsContain(d,ka))){const {minX:Fa,minY:Qa,width:Wa,height:db}=d;oa=0<t(this.center,l/2,H/2,Y,[Fa,Qa],[Wa,db]).length}return oa});
Qg(this)}};gb(sx,"id","ellipse");gb(sx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var tx=class extends to{constructor(a={}){super(a);gb(this,"onResetBounds",d=>{const {clipping:l,size:H,point:Y}=this.props;if(l){const [ka,oa,Fa,Qa]=Array.isArray(l)?l:[l,l,l,l];return this.update({clipping:0,point:[Y[0]-Qa,Y[1]-ka],size:[H[0]+(Qa-oa),H[1]+(ka-Fa)]})}if(d.asset){const {size:[ka,oa]}=d.asset;this.update({clipping:0,point:[Y[0]+H[0]/2-ka/2,Y[1]+H[1]/2-oa/
2],size:[ka,oa]})}return this});gb(this,"onResize",(d,l)=>{const {bounds:H,clip:Y,scale:ka}=l;({clipping:l}=this.props);const {clipping:oa}=d;if(Y){const {point:[Fa,Qa],size:[Wa,db]}=d,[jb,Mb,Ub,Nb]=oa?Array.isArray(oa)?oa:[oa,oa,oa,oa]:[0,0,0,0];l=[jb+(H.minY-Qa),Mb+(H.maxX-(Fa+Wa)),Ub+(H.maxY-(Qa+db)),Nb+(H.minX-Fa)]}else void 0!==oa&&(l=Array.isArray(oa)?oa:[oa,oa,oa,oa],l=[l[0]*ka[1],l[1]*ka[0],l[2]*ka[1],l[3]*ka[0]]);if(l&&Array.isArray(l)){const Fa=l;Fa.every((Qa,Wa)=>0===Wa||Qa===Fa[Wa-1])&&
(l=Fa[0])}return this.update({point:[H.minX,H.minY],size:[Math.max(1,H.width),Math.max(1,H.height)],clipping:l})});Qg(this)}};gb(tx,"id","ellipse");gb(tx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Oz=class extends gn{constructor(a={}){super(a);gb(this,"getBounds",()=>{const {points:d,props:{point:l}}=this;return Af.translateBounds(Af.getBoundsFromPoints(d),l)});gb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,
props:{point:l}}=this;return Af.translateBounds(Af.getBoundsFromPoints(d),l)});gb(this,"normalizedHandles",[]);gb(this,"onResizeStart",()=>{var d;const {props:{handles:l},bounds:H}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const Y=[H.width,H.height];this.normalizedHandles=Object.values(l).map(ka=>Dd.divV(ka.point,Y));return this});gb(this,"onResize",(d,l)=>{const {bounds:H,scale:[Y,ka]}=l,{props:{handles:oa},normalizedHandles:Fa}=this,Qa=[H.width,H.height];d=[...this.scale];0>Y&&(d[0]*=
-1);0>ka&&(d[1]*=-1);return this.update({point:[H.minX,H.minY],handles:Object.values(oa).map((Wa,db)=>qf(ne({},Wa),{point:Dd.mulV(Fa[db],Qa)})),scale:d})});gb(this,"hitTestPoint",d=>{const {points:l}=this;return jl.pointNearToPolyline(Dd.sub(d,this.props.point),l)});gb(this,"hitTestLineSegment",(d,l)=>{const {bounds:H,points:Y,props:{point:ka}}=this;if(jl.pointInBounds(d,H)||jl.pointInBounds(l,H)||0<k(H,d,l).length){const oa=Dd.sub(d,ka),Fa=Dd.sub(l,ka);return f(oa,Fa,Y).didIntersect||!!Y.find(Qa=>
5>Dd.dist(oa,Qa)||5>Dd.dist(Fa,Qa))}return!1});gb(this,"hitTestBounds",d=>{const {rotatedBounds:l,points:H,props:{point:Y}}=this,ka=Af.translateBounds(d,Dd.neg(Y));return Af.boundsContain(d,l)||H.every(oa=>jl.pointInBounds(oa,ka))||Af.boundsCollide(d,l)&&0<L([ka.minX,ka.minY],[ka.width,ka.height],H).length});gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Oz.defaultProps.handles);return d});Qg(this)}get points(){return Object.values(this.props.handles).map(a=>
a.point)}get centroid(){const {points:a}=this;return Vl.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,rotation:l}}=this;return l?Object.values(d).map(H=>Dd.rotWith(H.point,a,l)):this.points}},zt=Oz;gb(zt,"id","polyline");gb(zt,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});he([Df],zt.prototype,"points",1);he([Df],zt.prototype,"centroid",1);he([Df],zt.prototype,"rotatedPoints",1);var Pz=class extends zt{constructor(a={}){super(a);
gb(this,"hideResizeHandles",!0);gb(this,"hideRotateHandle",!0);gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Pz.defaultProps.handles);return d});gb(this,"getHandlesChange",(d,l)=>{var H=bl(d.handles,l);H=bl(H,{start:{point:le.toFixed(H.start.point)},end:{point:le.toFixed(H.end.point)}});if(!le.isEqual(H.start.point,H.end.point)){l={point:d.point,handles:Gs(H)};d=d.point;H=Af.translateBounds(Af.getBoundsFromPoints(Object.values(H).map(ka=>
ka.point)),l.point);var Y=le.sub([H.minX,H.minY],d);le.isEqual(Y,[0,0])||(Object.values(l.handles).forEach(ka=>{ka.point=le.toFixed(le.sub(ka.point,Y))}),l.point=le.toFixed(le.add(l.point,Y)));return l}});Qg(this)}},yu=Pz;gb(yu,"id","line");gb(yu,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Gr=class extends to{constructor(a={}){super(a);gb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,
props:{point:l},offset:H}=this;return Af.translateBounds(Af.getBoundsFromPoints(d),Dd.add(l,H))});gb(this,"hitTestPoint",d=>{const {vertices:l}=this;return jl.pointInPolygon(Dd.add(d,this.props.point),l)});gb(this,"hitTestLineSegment",(d,l)=>{const {vertices:H,props:{point:Y}}=this;return f(Dd.sub(d,Y),Dd.sub(l,Y),H).didIntersect});gb(this,"hitTestBounds",d=>{const {rotatedBounds:l,offset:H,rotatedVertices:Y,props:{point:ka}}=this,oa=Af.translateBounds(d,Dd.neg(Dd.add(ka,H)));return Af.boundsContain(d,
l)||Y.every(Fa=>jl.pointInBounds(Fa,oa))||0<y([oa.minX,oa.minY],[oa.width,oa.height],Y).length});gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});Qg(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},vertices:d}=this;return d.map(l=>Dd.add(l,a))}get centroid(){const {vertices:a}=this;return Vl.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:l}}=this;return l?a.map(H=>
Dd.rotWith(H,d,l)):a}get offset(){const {props:{size:[a,d]}}=this,l=Af.getBoundsCenter(Af.getBoundsFromPoints(this.vertices));return Dd.sub(Dd.div([a,d],2),l)}getVertices(a=0){const {ratio:d,sides:l,size:H}=this.props;return 3===l?Vl.getTriangleVertices(H,a,d):Vl.getPolygonVertices(H,l,a,d)}};gb(Gr,"id","polygon");gb(Gr,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});he([Df],Gr.prototype,"vertices",1);he([Df],Gr.prototype,"pageVertices",
1);he([Df],Gr.prototype,"centroid",1);he([Df],Gr.prototype,"rotatedVertices",1);he([Df],Gr.prototype,"offset",1);var ux=class extends to{constructor(a={}){super(a);gb(this,"canEdit",!0);gb(this,"canFlip",!1);Qg(this)}};gb(ux,"id","text");gb(ux,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Qv=class extends to{constructor(a={}){super(a);gb(this,"canEdit",!1);gb(this,"canFlip",!1);gb(this,"getBounds",()=>0===this.shapes.length?(ff().deleteShapes([this.id]),
{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):Af.getCommonBounds(this.shapes.map(d=>d.getBounds())));Qg(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};gb(Qv,"id","group");gb(Qv,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});he([Df],Qv.prototype,"shapes",1);var At=class{constructor(){gb(this,"_id");gb(this,"_initial");gb(this,"_states");gb(this,"_isActive",!1);gb(this,"cursor");
gb(this,"_disposables",[]);gb(this,"children",new Map([]));gb(this,"registerStates",l=>{l.forEach(H=>this.children.set(H.id,new H(this,this)));return this});gb(this,"deregisterStates",l=>{l.forEach(H=>{var Y;null==(Y=this.children.get(H.id))?void 0:Y.dispose();this.children.delete(H.id)});return this});gb(this,"currentState",{});gb(this,"transition",(l,H={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${l}.`);const Y=this.children.get(l),ka=this.currentState;
if(!Y)throw Error(`Could not find a state named ${l}.`);xd(()=>{this.currentState?(ka._events.onExit(qf(ne({},H),{toId:l})),ka.dispose(),this.setCurrentState(Y),this._events.onTransition(qf(ne({},H),{fromId:ka.id,toId:l})),Y._events.onEnter(qf(ne({},H),{fromId:ka.id}))):(this.currentState=Y,Y._events.onEnter(qf(ne({},H),{fromId:""})))});return this});gb(this,"isIn",l=>{l=l.split(".").reverse();let H=this;for(;0<l.length;){const Y=l.pop();if(!Y)return!0;if(H.currentState.id===Y){if(0===l.length)return!0;
H=H.currentState}else break}return!1});gb(this,"isInAny",(...l)=>l.some(this.isIn));gb(this,"forwardEvent",(l,...H)=>{var Y,ka;(null==(ka=null==(Y=this.currentState)?void 0:Y._events)?0:ka[l])&&xd(()=>{var oa;return null==(oa=this.currentState._events)?void 0:oa[l](...H)})});gb(this,"_events",{onTransition:l=>{var H;null==(H=this.onTransition)?void 0:H.call(this,l)},onEnter:l=>{var H;this._isActive=!0;this.initial&&this.transition(this.initial,l);null==(H=this.onEnter)?void 0:H.call(this,l)},onExit:l=>
{var H,Y,ka;this._isActive=!1;null==(Y=null==(H=this.currentState)?void 0:H.onExit)?void 0:Y.call(H,{toId:"parent"});null==(ka=this.onExit)?void 0:ka.call(this,l)},onPointerDown:(l,H)=>{var Y;null==(Y=this.onPointerDown)?void 0:Y.call(this,l,H);this.forwardEvent("onPointerDown",l,H)},onPointerUp:(l,H)=>{var Y;null==(Y=this.onPointerUp)?void 0:Y.call(this,l,H);this.forwardEvent("onPointerUp",l,H)},onPointerMove:(l,H)=>{var Y;null==(Y=this.onPointerMove)?void 0:Y.call(this,l,H);this.forwardEvent("onPointerMove",
l,H)},onPointerEnter:(l,H)=>{var Y;null==(Y=this.onPointerEnter)?void 0:Y.call(this,l,H);this.forwardEvent("onPointerEnter",l,H)},onPointerLeave:(l,H)=>{var Y;null==(Y=this.onPointerLeave)?void 0:Y.call(this,l,H);this.forwardEvent("onPointerLeave",l,H)},onDoubleClick:(l,H)=>{var Y;null==(Y=this.onDoubleClick)?void 0:Y.call(this,l,H);this.forwardEvent("onDoubleClick",l,H)},onKeyDown:(l,H)=>{var Y;this._events.onModifierKey(l,H);null==(Y=this.onKeyDown)?void 0:Y.call(this,l,H);this.forwardEvent("onKeyDown",
l,H)},onKeyUp:(l,H)=>{var Y;this._events.onModifierKey(l,H);null==(Y=this.onKeyUp)?void 0:Y.call(this,l,H);this.forwardEvent("onKeyUp",l,H)},onPinchStart:(l,H)=>{var Y;null==(Y=this.onPinchStart)?void 0:Y.call(this,l,H);this.forwardEvent("onPinchStart",l,H)},onPinch:(l,H)=>{var Y;null==(Y=this.onPinch)?void 0:Y.call(this,l,H);this.forwardEvent("onPinch",l,H)},onPinchEnd:(l,H)=>{var Y;null==(Y=this.onPinchEnd)?void 0:Y.call(this,l,H);this.forwardEvent("onPinchEnd",l,H)},onModifierKey:(l,H)=>{switch(H.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(l,
H)}}});gb(this,"onEnter");gb(this,"onExit");gb(this,"onTransition");gb(this,"onPointerDown");gb(this,"onPointerUp");gb(this,"onPointerMove");gb(this,"onPointerEnter");gb(this,"onPointerLeave");gb(this,"onDoubleClick");gb(this,"onKeyDown");gb(this,"onKeyUp");gb(this,"onPinchStart");gb(this,"onPinch");gb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=a}};gb(At,"id");gb(At,"shortcuts");he([Se],At.prototype,"currentState",2);he([xg],At.prototype,"setCurrentState",1);var vx=class extends At{constructor(a,d){var l,H;super();gb(this,"_root");gb(this,
"_parent");gb(this,"children",new Map([]));gb(this,"registerStates",Y=>{Y.forEach(ka=>this.children.set(ka.id,new ka(this,this._root)));return this});gb(this,"deregisterStates",Y=>{Y.forEach(ka=>{var oa;null==(oa=this.children.get(ka.id))?void 0:oa.dispose();this.children.delete(ka.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(l=this.initial)?l:this.states[0].id,l=this.children.get(a))&&(this.setCurrentState(l),null==
(H=this.currentState)?void 0:H._events.onEnter({fromId:"initial"}));Qg(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};gb(vx,"cursor");var Hr=class extends vx{constructor(){super(...arguments);gb(this,"isLocked",!1);gb(this,"previous");gb(this,"onEnter",({fromId:a})=>{this.previous=a;this.cursor&&this.app.cursors.setCursor(this.cursor)});gb(this,"onTransition",
a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},cj=class extends vx{get app(){return this.root}get tool(){return this.parent}},Qz=class extends cj{constructor(){super(...arguments);gb(this,"cursor","crosshair");gb(this,"creatingShape");gb(this,"aspectRatio");gb(this,"initialBounds",{});gb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:l}}=
this.app;var {Shape:H}=this.tool;H=new H({id:ml(),type:H.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:le.abs(le.sub(l,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};H.canChangeAspectRatio||(H.aspectRatio?(this.aspectRatio=H.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);
this.creatingShape=H;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(H);this.app.setSelectedShapes([H])});gb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:a}=this);var {currentPoint:d,originPoint:l,shiftKey:H}=this.app.inputs;a=Af.getTransformedBoundingBox(a,"bottom_right_corner",le.sub(d,l),0,H||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);
this.creatingShape.update({point:[a.minX,a.minY],size:[a.width,a.height]})}});gb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};gb(Qz,
"id","creating");var Rz=class extends cj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",(...a)=>{var d,l;this.app.transition("select",{returnTo:this.app.currentState.id});null==(l=(d=this.app._events).onPinchStart)?void 0:l.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(Rz,"id","idle");var Sz=class extends cj{constructor(){super(...arguments);gb(this,
"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});gb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};gb(Sz,"id","pointing");var Vq=class extends Hr{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(Vq,"id","box");gb(Vq,"states",[Rz,Sz,Qz]);gb(Vq,"initial","idle");var Tz=class extends cj{constructor(){super(...arguments);
gb(this,"shape",{});gb(this,"points",[[0,0,.5]]);gb(this,"persistDebounced",cl(this.app.persist,200));gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:l}=this.tool;var {originPoint:H}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&l){this.shape=l;var {shape:Y}=this;var ka=Y.props.points[Y.props.points.length-1];const Fa=Dd.sub(H,Y.props.point).concat(null!=(a=H[2])?a:.5);this.points=
[...Y.props.points,ka,ka];const Qa=Math.ceil(Dd.dist(ka,H)/16);for(let Wa=0,db=Wa/(Qa-1);Wa<Qa;Wa++){a=this.points;H=a.push;Y=Dd.lrp(ka,Fa,db);var oa=ka[2];H.call(a,Y.concat.call(Y,oa+(Fa[2]-oa)*db))}this.addNextPoint(Fa)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ka=H[2])?ka:.5]],this.shape=new d({id:ml(),type:d.id,parentId:this.app.currentPage.id,point:H.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),
this.app.currentPage.addShapes(this.shape)});gb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:l}=this.app.inputs;Dd.isEqual(l,d)||this.addNextPoint(Dd.sub(d,a.props.point).concat(d[2]))});gb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?jl.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;
this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,l=Dd.min(a,[0,0]);this.points.push(a);0>l[0]||0>l[1]?(this.points=this.points.map(H=>Dd.sub(H,l).concat(H[2])),d.update({point:Dd.add(d.props.point,
l),points:this.points})):d.update({points:this.points})}};gb(Tz,"id","creating");var Uz=class extends cj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(Uz,"id","idle");var Vz=class extends cj{constructor(){super(...arguments);gb(this,"origin",
[0,0]);gb(this,"prevDelta",[0,0]);gb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};gb(Vz,"id","pinching");var zu=class extends Hr{constructor(){super(...arguments);gb(this,"cursor","crosshair");gb(this,"simplify",!0);gb(this,"simplifyTolerance",1);gb(this,"previousShape");gb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,
event:d})})}};gb(zu,"id","draw");gb(zu,"states",[Uz,Tz,Vz]);gb(zu,"initial","idle");var Wz=class extends cj{constructor(){super(...arguments);gb(this,"points",[[0,0,.5]]);gb(this,"hitShapes",new Set);gb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});gb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;Dd.isEqual(d,a)||(this.points.push(a),this.app.shapesInViewport.filter(l=>l.hitTestLineSegment(d,a)).forEach(l=>this.hitShapes.add(l)),
this.app.setErasingShapes(Array.from(this.hitShapes.values())))});gb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};gb(Wz,"id","erasing");var Xz=class extends cj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",(...a)=>{var d,l;this.app.transition("select",
{returnTo:this.app.currentState.id});null==(l=(d=this.app._events).onPinchStart)?void 0:l.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(Xz,"id","idle");var Yz=class extends cj{constructor(){super(...arguments);gb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>d.hitTestPoint(a)))});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;
5<Dd.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});gb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};gb(Yz,"id","pointing");var Rv=class extends Hr{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(Rv,"id","erase");gb(Rv,"states",[Xz,Yz,Wz]);gb(Rv,"initial","idle");var wx=class extends cj{constructor(){super(...arguments);gb(this,"handle",{});gb(this,
"handleId","end");gb(this,"currentShape",{});gb(this,"initialShape",{});gb(this,"bindableShapeIds",[]);gb(this,"startBindingShapeId");gb(this,"newStartBindingId","");gb(this,"draggedBindingId","");gb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:l,currentPoint:H,modKey:Y,altKey:ka}}=this.app;var oa=this.app.getShapeById(this.initialShape.id),{handles:Fa}=this.initialShape,Qa=this.handleId,Wa="start"===this.handleId?"end":"start";if(!le.isEqual(d,H)){var db=le.sub(H,
l);if(a){var jb=Fa[Wa].point,Mb=le.add(Fa[Qa].point,db),Ub=le.angle(jb,Mb);jb=le.rotWith(Mb,jb,Xm.snapAngleToSegments(Ub,24)-Ub);db=le.add(db,le.sub(jb,Mb))}db=le.add(Fa[Qa].point,db);Fa={[Qa]:qf(ne({},Fa[Qa]),{point:le.toFixed(db),bindingId:void 0})};var Nb=this.currentShape.getHandlesChange(this.initialShape,Fa);if(Nb){Fa=bl(oa.props,Nb);var lc={},xc;Qa=Fa.handles[Qa];Wa=Fa.handles[Wa];if(this.startBindingShapeId){var $b;if(db=this.app.getShapeById(this.startBindingShapeId)){Mb=db.getCenter();jb=
Fa.handles.end;var nc=le.add(Fa.handles.start.point,Fa.point);le.isEqual(nc,Mb)&&nc[1]++;Ub=db.hitTestPoint(H);nc=le.uni(le.sub(nc,Mb));const jc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];Y||db.hitTestPoint(le.add(Fa.point,jb.point))||($b=Oc(oa.props,db,"start",this.newStartBindingId,Mb,Mb,nc,Ub));$b&&!jc?(lc[this.newStartBindingId]=$b,Fa.handles.start.bindingId=$b.id):!$b&&jc&&(console.log("removing start binding"),delete lc[this.newStartBindingId],Fa.handles.start.bindingId=
void 0)}}if(!Y){$b=le.add(Wa.point,Fa.point);Wa=le.add(Qa.point,Fa.point);Qa=le.uni(le.sub(Wa,$b));const jc=le.add(Fa.point,Fa.handles.start.point),Ic=le.add(Fa.point,Fa.handles.end.point);db=this.bindableShapeIds.map(Jc=>this.app.getShapeById(Jc)).sort((Jc,Gd)=>Gd.nonce-Jc.nonce).filter(Jc=>![jc,Ic].every(Gd=>Jc.hitTestPoint(Gd)));for(const Jc of db)if(xc=Oc(oa.props,Jc,this.handleId,this.draggedBindingId,Wa,$b,Qa,ka))break}xc?(lc[this.draggedBindingId]=xc,Fa=bl(Fa,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):
(oa=oa.props.handles[this.handleId].bindingId,void 0!==oa&&(delete lc[oa],Fa=bl(Fa,{handles:{[this.handleId]:{bindingId:void 0}}})));Nb=this.currentShape.getHandlesChange(Fa,Fa.handles);xd(()=>{var jc;if(Nb){this.currentShape.update(Nb);this.app.currentPage.updateBindings(lc);const Ic=Object.values(null!=(jc=Nb.handles)?jc:{}).map(Jc=>Jc.bindingId).map(Jc=>this.app.currentPage.bindings[Jc]).filter(Boolean).flatMap(Jc=>[Jc.toId,Jc.fromId].filter(Boolean));this.app.setBindingShapes(Ic)}})}}});gb(this,
"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});gb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};gb(wx,"id","creating");var Zz=class extends wx{constructor(){super(...arguments);gb(this,"onEnter",()=>{var a;
this.app.history.pause();this.newStartBindingId=ml();this.draggedBindingId=ml();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:l}=this.app.inputs;d=new d(qf(ne({},d.defaultProps),{id:ml(),type:d.id,parentId:this.app.currentPage.id,point:l,fill:this.app.settings.color,stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=Ab(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);this.app.setSelectedShapes([d]);
if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(H=>this.app.getShapeById(H)).filter(H=>jl.pointInBounds(l,H.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};gb(Zz,"id","creating");var $z=class extends cj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",(...a)=>{var d,l;this.app.transition("select",
{returnTo:this.app.currentState.id});null==(l=(d=this.app._events).onPinchStart)?void 0:l.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});gb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});gb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};
gb($z,"id","idle");var aA=class extends cj{constructor(){super(...arguments);gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};gb(aA,"id","pointing");var Sv=class extends Hr{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(Sv,"id","line");gb(Sv,"states",[$z,aA,Zz]);gb(Sv,"initial","idle");var bA=class extends cj{constructor(){super(...arguments);
gb(this,"cursor","crosshair");gb(this,"creatingShape");gb(this,"aspectRatio");gb(this,"initialBounds",{});gb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:l}=this.tool,H=new l({id:ml(),type:l.id,parentId:a.id,point:[...d],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=H;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);xd(()=>{this.app.currentPage.addShapes(H);const {bounds:Y}=H;
H.update({point:le.sub(d,[Y.width/2,Y.height/2])});this.app.transition("select");this.app.setSelectedShapes([H]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};gb(bA,"id","creating");var cA=class extends cj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});gb(this,"onPinchStart",(...a)=>{var d,l;this.app.transition("select",{returnTo:this.app.currentState.id});null==
(l=(d=this.app._events).onPinchStart)?void 0:l.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(cA,"id","idle");var Tv=class extends Hr{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(Tv,"id","box");gb(Tv,"states",[cA,bA]);gb(Tv,"initial","idle");var sE=vf(dn()),tE=class extends sE.default{constructor(){super(...arguments);gb(this,"toBBox",a=>a.rotatedBounds)}},dA=class extends cj{constructor(){super(...arguments);gb(this,
"initialSelectedIds",[]);gb(this,"initialSelectedShapes",[]);gb(this,"tree",new tE);gb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:l}=this.app;this.initialSelectedIds=Array.from(l.values());this.initialSelectedShapes=Array.from(a.values());this.tree.load(d.shapes)});gb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});gb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:l,currentPoint:H}}=this.app,Y=Af.getBoundsFromPoints([H,
l],0);this.app.setBrush(Y);const ka=[...(new Set(this.tree.search(Y).filter(oa=>d?Af.boundsContain(Y,oa.rotatedBounds):oa.hitTestBounds(Y)).filter(oa=>"group"!==oa.type).map(oa=>{var Fa;return null!=(Fa=this.app.getParentGroup(oa))?Fa:oa})))];a?ka.every(oa=>this.initialSelectedShapes.includes(oa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(oa=>!ka.includes(oa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...ka]))]):this.app.setSelectedShapes(ka);this.app.viewport.panToPointWhenNearBounds(H)});
gb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});gb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};gb(dA,"id","brushing");var eA=class extends cj{constructor(){super(...arguments);gb(this,"onEnter",a=>{var d;const {selectedIds:l,inputs:{shiftKey:H}}=this.app;if("shape"===a.type&&!l.has(a.shape.id)){const Y=null!=(d=this.app.getParentGroup(a.shape))?
d:a.shape;H?this.app.setSelectedShapes([...Array.from(l.values()),Y.id]):this.app.setSelectedShapes([Y])}});gb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};gb(eA,"id","contextMenu");var fA=class extends cj{constructor(){super(...arguments);gb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});gb(this,"onExit",()=>{});gb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;
case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});gb(this,"onPointerDown",(a,d)=>{const {selectedShapes:l,inputs:{ctrlKey:H}}=this.app;if(2===d.button)this.tool.transition("contextMenu",a);else if(H)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;
case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(l.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:Y,inputs:ka}=this.app;Y&&jl.pointInBounds(ka.currentPoint,Y)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",a);break;case "canvas":this.tool.transition("pointingCanvas");
break;case "minimap":this.tool.transition("pointingMinimap",ne(ne({},d),a))}});gb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});gb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};gb(fA,"id","idle");var gA=class extends cj{constructor(){super(...arguments);gb(this,"onEnter",
a=>{var d;const {selectedIds:l,inputs:{shiftKey:H}}=this.app,Y=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;H?this.app.setSelectedShapes([...Array.from(l.values()),Y.id]):this.app.setSelectedShapes([Y])});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};
gb(gA,"id","pointingShape");var hA=class extends cj{constructor(){super(...arguments);gb(this,"cursor","move");gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(hA,"id","pointingBoundsBackground");var iA=class extends cj{constructor(){super(...arguments);
gb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&this.tool.transition("brushing")});gb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,
event:d})});gb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};gb(iA,"id","pointingCanvas");var jA=class extends cj{constructor(){super(...arguments);gb(this,"cursor","move");gb(this,"isCloning",!1);gb(this,"didClone",!1);gb(this,"initialPoints",{});gb(this,"initialShapePoints",{});gb(this,"initialClonePoints",{});gb(this,"clones",[]);gb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,inputs:l}=this.app;this.initialPoints=
this.initialShapePoints=Object.fromEntries(d.map(({id:H,props:{point:Y}})=>[H,Y.slice()]));document.querySelectorAll("input,textarea").forEach(H=>H.blur());null==(a=document.getSelection())?void 0:a.empty();l.altKey?this.startCloning():this.moveSelectedShapesToPointer()});gb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});gb(this,"onPointerMove",()=>{const {inputs:{currentPoint:a}}=
this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});gb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(l=>{l.update({point:this.initialPoints[l.id]})}),this.tool.transition("idle")}});
gb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:l,allSelectedShapes:H}=this.app;l.removeShapes(...H);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:l}}=this.app,{initialPoints:H}=this,Y=Dd.sub(l,d);a&&(Math.abs(Y[0])<Math.abs(Y[1])?
Y[0]=0:Y[1]=0);xd(()=>{this.app.allSelectedShapesArray.forEach(ka=>{ka.props.isLocked||ka.update({point:Dd.add(H[ka.id],Y)})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d(qf(ne({},a.serialized),{id:ml(),type:a.type,point:this.initialPoints[a.id],rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,
props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};gb(jA,"id","translating");var kA=class extends cj{constructor(){super(...arguments);gb(this,"pointedSelectedShape");gb(this,"onEnter",a=>{this.pointedSelectedShape=
a.shape});gb(this,"onExit",()=>{this.pointedSelectedShape=void 0});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:l}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:l}=this.app),l=Array.from(l.values()),l.splice(l.indexOf(this.pointedSelectedShape.id),
1),this.app.setSelectedShapes(l);else{if(1===l.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof to&&jl.pointInBounds(d,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,
event:d})})}};gb(kA,"id","pointingSelectedShape");var lA=class extends cj{constructor(){super(...arguments);gb(this,"info",{});gb(this,"onEnter",a=>{this.info=a;this.updateCursor()});gb(this,"onExit",()=>{this.app.cursors.reset()});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&this.tool.transition("resizing",this.info)});gb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(jt[this.info.handle],this.app.selectionBounds.rotation)}};gb(lA,"id","pointingResizeHandle");var mA=class extends cj{constructor(){super(...arguments);gb(this,"isSingle",!1);gb(this,"handle","bottom_right_corner");gb(this,"snapshots",{});gb(this,"initialCommonBounds",{});gb(this,"selectionRotation",0);gb(this,"resizeType","corner");gb(this,"onEnter",a=>{var d,l;const {history:H,selectedShapesArray:Y,selectionBounds:ka}=this.app;if(!ka)throw Error("Expected a selected bounds.");
this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";this.app.cursors.setCursor(mA.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);H.pause();const oa=Af.getBoundsFromPoints(Y.map(Fa=>Af.getBoundsCenter(Fa.bounds)));this.selectionRotation=(this.isSingle=1===Y.length)?null!=(l=Y[0].props.rotation)?l:0:0;this.initialCommonBounds=ne({},ka);this.snapshots=Object.fromEntries(Y.map(Fa=>
{const Qa=ne({},Fa.bounds),[Wa,db]=Af.getBoundsCenter(Qa);return[Fa.id,{props:Fa.serialized,bounds:Qa,transformOrigin:[(Wa-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(db-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(Wa-oa.minX)/oa.width,(db-oa.minY)/oa.height],isAspectRatioLocked:Fa.props.isAspectRatioLocked||!(Fa.canChangeAspectRatio&&!Fa.props.rotation)}]}));Y.forEach(Fa=>{var Qa;null==(Qa=Fa.onResizeStart)?void 0:Qa.call(Fa,{isSingle:this.isSingle})})});
gb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});gb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:l,originPoint:H,currentPoint:Y}}=this.app,{handle:ka,snapshots:oa,initialCommonBounds:Fa}=this;let Qa=Dd.sub(Y,H);a&&(Qa=Dd.mul(Qa,2));const Wa=this.app.selectedShapes.values().next().value;let db=Af.getTransformedBoundingBox(Fa,ka,Qa,this.selectionRotation,d||this.isSingle&&(l?!("clipping"in
Wa.props):!Wa.canChangeAspectRatio||Wa.props.isAspectRatioLocked));a&&(db=ne(ne({},db),Af.centerBounds(db,Af.getBoundsCenter(Fa))));const {scaleX:jb,scaleY:Mb}=db;this.app.selectedShapes.forEach(Ub=>{var Nb,lc;const {props:xc,bounds:$b,transformOrigin:nc}=oa[Ub.id];let jc=Af.getRelativeTransformedBoundingBox(db,Fa,$b,0>jb,0>Mb);if(Ub.canResize.some(Gd=>Gd)||Ub.props.isSizeLocked||!this.isSingle){var Ic=[jb,Mb],Jc=null!=(Nb=xc.rotation)?Nb:0;Nb=Af.getBoundsCenter(jc);Ub.canFlip||(Ic=Dd.abs(Ic));Ub.canScale||
(Ic=null!=(lc=xc.scale)?lc:[1,1]);if(Jc&&0>jb&&0<=Mb||0>Mb&&0<=jb)Jc*=-1;Ub.onResize(xc,{center:Nb,rotation:Jc,scale:Ic,bounds:jc,type:ka,clip:l,transformOrigin:nc})}});this.updateCursor(jb,Mb);this.app.viewport.panToPointWhenNearBounds(Y)});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(l=>{l.update(ne({},this.snapshots[l.id].props))}),this.tool.transition("idle")}})}updateCursor(a,
d){var l,H,Y,ka;const oa=0>a&&0<=d;a=0>d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":oa||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(l=this.app.selectionBounds)?void 0:l.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(H=this.app.selectionBounds)?void 0:H.rotation);break;case "top_right_corner":case "bottom_left_corner":oa||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",
null==(Y=this.app.selectionBounds)?void 0:Y.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ka=this.app.selectionBounds)?void 0:ka.rotation)}}},xx=mA;gb(xx,"id","resizing");gb(xx,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var nA=class extends cj{constructor(){super(...arguments);
gb(this,"cursor","rotate");gb(this,"handle","");gb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(jt[this.handle],
this.app.selectionRotation)}};gb(nA,"id","pointingRotateHandle");var oA=class extends cj{constructor(){super(...arguments);gb(this,"info",{});gb(this,"onEnter",a=>{this.info=a});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(oA,"id","pointingShapeBehindBounds");var yx=class extends cj{constructor(){super(...arguments);gb(this,"cursor","rotate");gb(this,"snapshot",{});gb(this,"initialCommonCenter",[0,0]);gb(this,"initialCommonBounds",{});gb(this,"initialAngle",0);gb(this,"initialSelectionRotation",0);gb(this,"handle","");gb(this,"onEnter",a=>{const {history:d,selectedShapesArray:l,selectionBounds:H}=this.app;
if(!H)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=ne({},H);this.initialCommonCenter=Af.getBoundsCenter(H);this.initialAngle=Dd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(l.map(Y=>[Y.id,{point:[...Y.props.point],center:[...Y.center],rotation:Y.props.rotation,handles:"handles"in Y?Gs(Y.handles):void 0}]));this.updateCursor()});gb(this,"onExit",
()=>{this.app.history.resume();this.snapshot={}});gb(this,"onPointerMove",()=>{const {selectedShapes:a,inputs:{shiftKey:d,currentPoint:l}}=this.app,{snapshot:H,initialCommonCenter:Y,initialAngle:ka,initialSelectionRotation:oa}=this;let Fa=Dd.angle(Y,l)-ka;d&&(Fa=Xm.snapAngleToSegments(Fa,24));a.forEach(Wa=>{var db=H[Wa.id];let jb=0;if(d){var {rotation:Mb=0}=db;jb=Xm.snapAngleToSegments(Mb,24)-Mb}const Ub=Dd.sub(db.center,db.point);Mb=Dd.rotWith(db.center,Y,Fa);if("handles"in Wa){db=db.handles;const Nb=
db.map(xc=>Dd.rotWith(xc.point,Ub,Fa)),lc=Af.getCommonTopLeft(Nb);Wa.update({point:Dd.add(lc,Dd.sub(Mb,Ub)),handles:db.map((xc,$b)=>qf(ne({},xc),{point:Dd.sub(Nb[$b],lc)}))})}else Wa.update({point:Dd.sub(Mb,Ub),rotation:Xm.clampRadians((db.rotation||0)+Fa+jb)})});const Qa=Xm.clampRadians(oa+Fa);this.app.setSelectionRotation(d?Xm.snapAngleToSegments(Qa,24):Qa);this.updateCursor()});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onKeyDown",
(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(l=>{l.update(this.snapshot[l.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(jt[this.handle],this.app.selectionRotation)}};gb(yx,"id","rotating");var pA=class extends cj{constructor(){super(...arguments);gb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")});gb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
gb(pA,"id","pinching");var qA=class extends wx{constructor(){super(...arguments);gb(this,"cursor","grabbing");gb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=ml();this.draggedBindingId=ml();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=Ab(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};gb(qA,"id","translatingHandle");var rA=class extends cj{constructor(){super(...arguments);
gb(this,"cursor","grabbing");gb(this,"info",{});gb(this,"onEnter",a=>{this.info=a});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Dd.dist(a,d)&&this.tool.transition("translatingHandle",this.info)});gb(this,"onPointerUp",()=>{this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(rA,"id","pointingHandle");var sA=class extends cj{constructor(){super(...arguments);gb(this,"handle");gb(this,"onEnter",
a=>{var d;this.app.cursors.setCursor(jt[a.handle],null!=(d=this.app.selectionBounds.rotation)?d:0);this.handle=a.handle});gb(this,"onExit",()=>{this.app.cursors.reset()});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
a);break;default:this.tool.transition("pointingResizeHandle",a)}}});gb(this,"onPointerLeave",()=>{this.tool.transition("idle")});gb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var l=this.app.selectedShapes.values().next().value;if(!l.canEdit||this.app.readOnly||l.props.isLocked)l.onResetBounds({asset:l.props.assetId?this.app.assets[l.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":null==(d=l.onResetBounds)?void 0:d.call(l,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:l})}}})}};gb(sA,"id","hoveringSelectionHandle");var tA=class extends cj{constructor(){super(...arguments);gb(this,"editingShape",{});gb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});gb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=
this.editingShape.props.text.trim();""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",
a);break;case "canvas":a.order||this.tool.transition("idle",a)}});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":xd(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};gb(tA,"id","editingShape");var uA=class extends cj{constructor(){super(...arguments);gb(this,"minimapZoom",1);gb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});gb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");
var l=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(d&&l){const H=d.getBoundingClientRect();this.minimapRect.height=H.height;this.minimapRect.width=H.width;this.minimapRect.minX=H.left;this.minimapRect.minY=H.top;this.minimapRect.maxX=H.right;this.minimapRect.maxY=H.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=Dd.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);l=l.getBoundingClientRect();l=Dd.mul(Dd.sub(a,[l.left+l.width/2,l.top+l.height/
2]),this.minimapZoom);return Dd.sub(this.app.viewport.camera.point,l)}});gb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});gb(this,"onPointerMove",(a,d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});gb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};gb(uA,"id","pointingMinimap");var Bt=class extends Hr{constructor(){super(...arguments);gb(this,"returnTo",
"");gb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};gb(Bt,"id","select");gb(Bt,"initial","idle");gb(Bt,"shortcut","whiteboard/select");gb(Bt,"states",[fA,dA,eA,iA,gA,oA,kA,hA,sA,lA,nA,uA,rA,qA,jA,xx,yx,yx,pA,tA]);var vA=class extends cj{constructor(){super(...arguments);gb(this,"cursor","grabbing");gb(this,"originalScreenPoint",[]);gb(this,"originalCameraPoint",[]);gb(this,"prevState","idle");gb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=
this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});gb(this,"onPointerMove",(a,d)=>{a=le.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:le.sub(this.originalCameraPoint,le.div(a,this.app.viewport.camera.zoom))})});gb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};gb(vA,"id","panning");var wA=class extends cj{constructor(){super(...arguments);gb(this,"onEnter",a=>{this.parent.prevTool&&
a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};gb(wA,"id","idle");var xA=class extends cj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(xA,
"id","idleHold");var yA=class extends cj{constructor(){super(...arguments);gb(this,"origin",[0,0]);gb(this,"prevDelta",[0,0]);gb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};gb(yA,"id","pinching");var Ct=class extends Hr{constructor(){super(...arguments);gb(this,"cursor","grab");gb(this,"prevTool",null);gb(this,"onEnter",a=>{this.prevTool=
null==a?void 0:a.prevTool});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});gb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};gb(Ct,"id","move");gb(Ct,"shortcut","whiteboard/pan");gb(Ct,"states",[wA,xA,vA,yA]);gb(Ct,"initial","idle");var hn=class{constructor(a,d={}){gb(this,"lastShapesNounces",null);gb(this,"app");gb(this,"id");gb(this,"name");gb(this,"shapes",[]);gb(this,"bindings",{});gb(this,"nonce",0);gb(this,"bringForward",
Fa=>{const Qa=this.parseShapesArg(Fa);Qa.sort((Wa,db)=>this.shapes.indexOf(db)-this.shapes.indexOf(Wa)).map(Wa=>this.shapes.indexOf(Wa)).forEach(Wa=>{if(Wa!==this.shapes.length-1&&!Qa.includes(this.shapes[Wa+1])){var db=this.shapes[Wa];this.shapes[Wa]=this.shapes[Wa+1];this.shapes[Wa+1]=db}});this.app.persist();return this});gb(this,"sendBackward",Fa=>{const Qa=this.parseShapesArg(Fa);Qa.sort((Wa,db)=>this.shapes.indexOf(Wa)-this.shapes.indexOf(db)).map(Wa=>this.shapes.indexOf(Wa)).forEach(Wa=>{if(0!==
Wa&&!Qa.includes(this.shapes[Wa-1])){var db=this.shapes[Wa];this.shapes[Wa]=this.shapes[Wa-1];this.shapes[Wa-1]=db}});this.app.persist();return this});gb(this,"bringToFront",Fa=>{const Qa=this.parseShapesArg(Fa);this.shapes=this.shapes.filter(Wa=>!Qa.includes(Wa)).concat(Qa);this.app.persist();return this});gb(this,"sendToBack",Fa=>{const Qa=this.parseShapesArg(Fa);this.shapes=Qa.concat(this.shapes.filter(Wa=>!Qa.includes(Wa)));this.app.persist();return this});gb(this,"flip",(Fa,Qa)=>{Fa=this.parseShapesArg(Fa);
const Wa=Af.getCommonBounds(Fa.map(db=>db.bounds));Fa.forEach(db=>{var jb;const Mb=Af.getRelativeTransformedBoundingBox(Wa,Wa,db.bounds,"horizontal"===Qa,"vertical"===Qa);if(db.serialized)db.onResize(db.serialized,{bounds:Mb,center:Af.getBoundsCenter(Mb),rotation:null!=(jb=db.props.rotation)?jb:-0,type:"top_left_corner",scale:db.canFlip&&db.props.scale?"horizontal"===Qa?[-db.props.scale[0],1]:[1,-db.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});gb(this,
"getShapeById",Fa=>this.shapes.find(Qa=>Qa.id===Fa));gb(this,"cleanup",Fa=>{Fa=sc(this.bindings,Fa);const Qa=new Set;let Wa=!1,db=!1;const jb=Gs(this.bindings);Fa.forEach(Mb=>{var Ub;if(this.bindings[Mb.id]){var Nb=this.getShapeById(Mb.toId),lc=this.getShapeById(Mb.fromId);Nb&&lc?Qa.has(lc.id)||(Mb=this.updateArrowBindings(lc),Qa.add(lc.id),Mb&&(Nb=ne(ne({},lc.props),Mb),Wa=!0,null==(Ub=this.getShapeById(Nb.id))?void 0:Ub.update(Nb,!1,(0,KE.default)(null==Mb?void 0:Mb.handles,null==lc?void 0:lc.props.handles)))):
(delete jb[Mb.id],db=!0)}});Object.keys(jb).forEach(Mb=>{const Ub=this.bindings[Mb];0===this.shapes.filter(Nb=>Nb.id===Ub.fromId||Nb.id===Ub.toId).length&&(delete jb[Mb],db=!0)});db&&this.update({bindings:jb});(Wa||db)&&this.app.persist(!0)});gb(this,"updateArrowBindings",Fa=>{var Qa,Wa,db,jb={start:Gs(Fa.props.handles.start),end:Gs(Fa.props.handles.end)},Mb={isBound:!1,handle:Fa.props.handles.start,point:le.add(Fa.props.handles.start.point,Fa.props.point)},Ub={isBound:!1,handle:Fa.props.handles.end,
point:le.add(Fa.props.handles.end.point,Fa.props.point)};if(Fa.props.handles.start.bindingId){var Nb=void 0!==(null==(Qa=Fa.props.decorations)?void 0:Qa.start);Qa=Fa.props.handles.start;var lc=this.bindings[Fa.props.handles.start.bindingId],xc=this.getShapeById(null==lc?void 0:lc.toId);if(xc){Mb=xc.getBounds();var $b=xc.getExpandedBounds(),nc=Af.expandBounds(Mb,Nb?lc.distance:1);const {minX:jc,minY:Ic,width:Jc,height:Gd}=$b,Xd=le.add([jc,Ic],le.mulV([Jc,Gd],le.rotWith(lc.point,[.5,.5],xc.props.rotation||
0)));Mb={isBound:!0,hasDecoration:Nb,binding:lc,handle:Qa,point:Xd,target:xc,bounds:Mb,expandedBounds:$b,intersectBounds:nc,center:xc.getCenter()}}}if(Fa.props.handles.end.bindingId&&(Nb=void 0!==(null==(Wa=Fa.props.decorations)?void 0:Wa.end),Wa=Fa.props.handles.end,Qa=this.bindings[Fa.props.handles.end.bindingId],lc=this.getShapeById(null==Qa?void 0:Qa.toId))){Ub=lc.getBounds();xc=lc.getExpandedBounds();$b=Nb?Af.expandBounds(Ub,Qa.distance):Ub;const {minX:jc,minY:Ic,width:Jc,height:Gd}=xc;nc=le.add([jc,
Ic],le.mulV([Jc,Gd],le.rotWith(Qa.point,[.5,.5],lc.props.rotation||0)));Ub={isBound:!0,hasDecoration:Nb,binding:Qa,handle:Wa,point:nc,target:lc,bounds:Ub,expandedBounds:xc,intersectBounds:$b,center:lc.getCenter()}}for(const jc of["end","start"]){Wa="start"===jc?Mb:Ub;const Ic="start"===jc?Ub:Mb;if(Wa.isBound)if(Wa.binding.distance){if(Nb=le.uni(le.sub(Wa.point,Ic.point)),Qa=C(Ic.point,Nb,Wa.intersectBounds,Wa.target.props.rotation).filter(Jc=>Jc.didIntersect).map(Jc=>Jc.points[0]).sort((Jc,Gd)=>le.dist(Jc,
Ic.point)-le.dist(Gd,Ic.point)),Qa[0])if(lc=void 0,Ic.isBound&&(lc=C(Ic.point,Nb,Ic.intersectBounds,Ic.target.props.rotation).filter(Jc=>Jc.didIntersect).map(Jc=>Jc.points[0]).sort((Jc,Gd)=>le.dist(Jc,Ic.point)-le.dist(Gd,Ic.point))[0]),Ic.isBound&&(2>Qa.length||lc&&Qa[0]&&10>Math.ceil(le.dist(Qa[0],lc))||Af.boundsContain(Wa.expandedBounds,Ic.expandedBounds)||Af.boundsCollide(Wa.expandedBounds,Ic.expandedBounds)))Nb=le.uni(le.sub(Ic.point,Wa.point)),Qa=C(Wa.point,Nb,Wa.bounds,Wa.target.props.rotation).filter(Jc=>
Jc.didIntersect).map(Jc=>Jc.points[0]),Qa[0]&&(jb[jc].point=le.toFixed(le.sub(Qa[0],Fa.props.point)),jb["start"===jc?"end":"start"].point=le.toFixed(le.add(le.sub(Qa[0],Fa.props.point),le.mul(Nb,Math.min(le.dist(Qa[0],Ic.point),10*(Af.boundsContain(Ic.bounds,Wa.intersectBounds)?-1:1))))));else{if(!Ic.isBound&&(Qa[0]&&10>le.dist(Qa[0],Ic.point)||jl.pointInBounds(Ic.point,Wa.intersectBounds)))return jb=le.uni(le.sub(Wa.center,Ic.point)),null==(db=Fa.getHandlesChange)?void 0:db.call(Fa,Fa.props,{[jc]:qf(ne({},
Fa.props.handles[jc]),{point:le.toFixed(le.add(le.sub(Ic.point,Fa.props.point),le.mul(jb,10)))})});Qa[0]&&(jb[jc].point=le.toFixed(le.sub(Qa[0],Fa.props.point)))}}else jb[jc].point=le.sub(Wa.point,Fa.props.point)}return Fa.getHandlesChange(Fa.props,jb)});const {id:l,name:H,shapes:Y=[],bindings:ka={},nonce:oa}=d;this.id=l;this.name=H;this.bindings=Object.assign({},ka);this.app=a;this.nonce=oa||0;this.addShapes(...Y);Qg(this);Kd(()=>{const Fa=0<this.shapes.length?Object.fromEntries(this.shapes.map(Qa=>
[Qa.id,Qa.nonce])):null;if(this.lastShapesNounces&&Fa){const Qa=this.lastShapesNounces,Wa=[...(new Set([...Object.keys(Fa),...Object.keys(Qa)]))].filter(db=>Qa[db]!==Fa[db]);requestAnimationFrame(()=>{this.cleanup(Wa)})}Fa&&(this.lastShapesNounces=Fa)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>Ab(a)),bindings:Gs(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,
a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,l)=>a.indexOf(d.id)-a.indexOf(l.id));return this}addShapes(...a){if(0!==a.length)return a="getBounds"in a[0]?a:a.map(d=>new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(l=>!d.includes(l));return d}getBindableShapes(){return this.shapes.filter(a=>
a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};he([Se],hn.prototype,"id",2);he([Se],hn.prototype,"name",2);he([Se],hn.prototype,"shapes",2);he([Se],hn.prototype,"bindings",2);he([Df],hn.prototype,"serialized",1);he([Df],hn.prototype,"shapesById",1);he([Se],hn.prototype,"nonce",2);he([xg],hn.prototype,"update",1);he([xg],hn.prototype,"updateBindings",1);he([xg],hn.prototype,"updateShapesIndex",1);he([xg],hn.prototype,"addShapes",1);he([xg],hn.prototype,"removeShapes",1);he([xg],hn.prototype,
"bringForward",2);he([xg],hn.prototype,"sendBackward",2);he([xg],hn.prototype,"bringToFront",2);he([xg],hn.prototype,"sendToBack",2);he([xg],hn.prototype,"cleanup",2);var Jl=class{constructor(){gb(this,"shiftKey",!1);gb(this,"ctrlKey",!1);gb(this,"modKey",!1);gb(this,"altKey",!1);gb(this,"spaceKey",!1);gb(this,"isPinching",!1);gb(this,"currentScreenPoint",[0,0]);gb(this,"currentPoint",[0,0]);gb(this,"previousScreenPoint",[0,0]);gb(this,"previousPoint",[0,0]);gb(this,"originScreenPoint",[0,0]);gb(this,
"originPoint",[0,0]);gb(this,"pointerIds",new Set);gb(this,"state","idle");gb(this,"containerOffset",[0,0]);gb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);this.updateModifiers(d);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});gb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});gb(this,"onPointerUp",(a,d)=>
{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});gb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});gb(this,"onKeyUp",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});gb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});gb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});gb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});
Qg(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=le.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=Kh()?a.metaKey:a.ctrlKey))}};he([Se],Jl.prototype,"shiftKey",2);he([Se],Jl.prototype,"ctrlKey",2);he([Se],Jl.prototype,"modKey",2);he([Se],Jl.prototype,"altKey",
2);he([Se],Jl.prototype,"spaceKey",2);he([Se],Jl.prototype,"isPinching",2);he([Se],Jl.prototype,"currentScreenPoint",2);he([Se],Jl.prototype,"currentPoint",2);he([Se],Jl.prototype,"previousScreenPoint",2);he([Se],Jl.prototype,"previousPoint",2);he([Se],Jl.prototype,"originScreenPoint",2);he([Se],Jl.prototype,"originPoint",2);he([Se],Jl.prototype,"state",2);he([Se],Jl.prototype,"containerOffset",2);he([xg],Jl.prototype,"updateContainerOffset",1);he([xg],Jl.prototype,"updateModifiers",1);he([xg],Jl.prototype,
"onPointerDown",2);he([xg],Jl.prototype,"onPointerMove",2);he([xg],Jl.prototype,"onPointerUp",2);he([xg],Jl.prototype,"onKeyDown",2);he([xg],Jl.prototype,"onKeyUp",2);he([xg],Jl.prototype,"onPinchStart",2);he([xg],Jl.prototype,"onPinch",2);he([xg],Jl.prototype,"onPinchEnd",2);var uE=(a,d=100)=>-(Math.cos(Math.PI*Dd.clamp(a/d,0,1))-1)/2,Fs=class{constructor(){gb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});gb(this,"camera",{point:[0,0],zoom:1});gb(this,"updateBounds",a=>
{this.bounds=a;return this});gb(this,"panCamera",a=>this.update({point:Dd.sub(this.camera.point,Dd.div(a,this.camera.zoom))}));gb(this,"panToPointWhenNearBounds",a=>{const d=[Fs.panThreshold,Fs.panThreshold],l=Dd.sub([this.currentView.maxX,this.currentView.maxY],Dd.add(a,d));a=Dd.sub([this.currentView.minX,this.currentView.minY],Dd.sub(a,d));this.panCamera(Dd.mul([0>l[0]?l[0]:0<a[0]?a[0]:0,0>l[1]?l[1]:0<a[1]?a[1]:0],-Fs.panMultiplier))});gb(this,"update",({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||
isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});gb(this,"getPagePoint",a=>{const {camera:d,bounds:l}=this;return Dd.sub(Dd.div(Dd.sub(a,[l.minX,l.minY]),d.zoom),d.point)});gb(this,"getScreenPoint",a=>{const {camera:d}=this;return Dd.mul(Dd.add(a,d.point),d.zoom)});gb(this,"onZoom",(a,d,l=!1)=>this.pinchZoom(a,[0,0],d,l));gb(this,"pinchZoom",(a,d,l,H=!1)=>{var {camera:Y}=this;d=Dd.sub(Y.point,Dd.div(d,Y.zoom));l=Dd.clamp(l,Fs.minZoom,
Fs.maxZoom);Y=Dd.div(a,Y.zoom);a=Dd.div(a,l);a=Dd.toFixed(Dd.add(d,Dd.sub(a,Y)));H?this.animateCamera({point:a,zoom:l}):this.update({point:a,zoom:l});return this});gb(this,"setZoom",(a,d=!1)=>{const {bounds:l}=this;this.onZoom([l.width/2,l.height/2],a,d)});gb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});gb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});gb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});gb(this,"animateCamera",({point:a,zoom:d})=>
this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/d}));gb(this,"animateToViewport",a=>{const d=performance.now(),l=ne({},this.currentView),H=()=>{var Y=performance.now()-d;Y=uE(Y);var ka=l.minX+(a.minX-l.minX)*Y;this.update({point:[-ka,-(l.minY+(a.minY-l.minY)*Y)],zoom:this.bounds.width/(l.maxX+(a.maxX-l.maxX)*Y-ka)});1>Y&&requestAnimationFrame(H)};H()});gb(this,"zoomToBounds",({width:a,height:d,
minX:l,minY:H})=>{const {bounds:Y,camera:ka}=this;let oa=Math.min((Y.width-100)/a,(Y.height-100)/d);oa=Math.min(1,Math.max(Fs.minZoom,ka.zoom===oa||1>ka.zoom?Math.min(1,oa):oa));a=Dd.add([-l,-H],[(Y.width-a*oa)/2/oa,(Y.height-d*oa)/2/oa]);this.animateCamera({point:a,zoom:oa})});Qg(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:l}}=this,H=a.width/l,Y=a.height/l;return{minX:-d[0],minY:-d[1],maxX:H-d[0],maxY:Y-d[1],width:H,height:Y}}},tp=Fs;gb(tp,"minZoom",.1);gb(tp,"maxZoom",4);gb(tp,
"panMultiplier",.05);gb(tp,"panThreshold",100);he([Se],tp.prototype,"bounds",2);he([Se],tp.prototype,"camera",2);he([xg],tp.prototype,"updateBounds",2);he([xg],tp.prototype,"update",2);he([Df],tp.prototype,"currentView",1);var vE=class{constructor(a){gb(this,"app");gb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});gb(this,"hoverShape",d=>{this.app.setHoveredShape(d);return this});gb(this,"createShapes",
(...d)=>{this.app.createShapes(d);return this});gb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);return this});gb(this,"deleteShapes",(...d)=>{this.app.deleteShapes(d.length?d:this.app.selectedShapesArray);return this});gb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});gb(this,"deselectShapes",(...d)=>{const l="string"===typeof d[0]?d:d.map(H=>H.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(H=>!l.includes(H.id)));return this});gb(this,"flipHorizontal",
(...d)=>{this.app.flipHorizontal(d);return this});gb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);return this});gb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>!this.app.shapesInGroups().includes(d)));return this});gb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});gb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});gb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});gb(this,"resetZoom",()=>{this.app.viewport.resetZoom();
return this});gb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Af.getCommonBounds(d.map(l=>l.bounds));this.app.viewport.zoomToBounds(d);return this});gb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Af.getCommonBounds(d.map(l=>l.bounds));this.app.viewport.update({point:le.add(le.neg(Af.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});gb(this,"zoomToSelection",
()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);return this});gb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:le.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});gb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});gb(this,"setColor",d=>{const {settings:l}=this.app;l.update({color:d});this.app.selectedShapesArray.forEach(H=>{H.props.isLocked||
H.update({fill:d,stroke:d})});this.app.persist();return this});gb(this,"setScaleLevel",d=>{const {settings:l}=this.app;l.update({scaleLevel:d});this.app.selectedShapes.forEach(H=>{H.props.isLocked||H.setScaleLevel(d)});this.app.persist();return this});gb(this,"undo",()=>{this.app.undo();return this});gb(this,"redo",()=>{this.app.redo();return this});gb(this,"persist",()=>{this.app.persist();return this});gb(this,"createNewLineBinding",(d,l)=>this.app.createNewLineBinding(d,l));gb(this,"cloneShapes",
({shapes:d,assets:l,bindings:H,point:Y=[0,0]})=>{const ka=Af.getCommonBounds(d.filter(Qa=>"group"!==Qa.type).map(Qa=>{var Wa,db,jb,Mb,Ub,Nb,lc,xc,$b,nc,jc,Ic,Jc,Gd,Xd,Re;return{minX:null!=(db=null==(Wa=Qa.point)?void 0:Wa[0])?db:Y[0],minY:null!=(Mb=null==(jb=Qa.point)?void 0:jb[1])?Mb:Y[1],width:null!=(Nb=null==(Ub=Qa.size)?void 0:Ub[0])?Nb:4,height:null!=(xc=null==(lc=Qa.size)?void 0:lc[1])?xc:4,maxX:(null!=(nc=null==($b=Qa.point)?void 0:$b[0])?nc:Y[0])+(null!=(Ic=null==(jc=Qa.size)?void 0:jc[0])?
Ic:4),maxY:(null!=(Gd=null==(Jc=Qa.point)?void 0:Jc[1])?Gd:Y[1])+(null!=(Re=null==(Xd=Qa.size)?void 0:Xd[1])?Re:4)}})),oa=d.map(Qa=>qf(ne({},Qa),{id:ml(),point:[Y[0]+Qa.point[0]-ka.minX,Y[1]+Qa.point[1]-ka.minY]}));oa.forEach(Qa=>{var Wa;Qa.children&&0<(null==(Wa=Qa.children)?void 0:Wa.length)&&(Qa.children=Qa.children.map(db=>{var jb;return null==(jb=oa[d.findIndex(Mb=>Mb.id===db)])?void 0:jb.id}).filter(gg))});const Fa=[];oa.flatMap(Qa=>{var Wa;return Object.values(null!=(Wa=Qa.handles)?Wa:{})}).forEach(Qa=>
{if(Qa.bindingId){var Wa=H[Qa.bindingId];if(Wa){var db=d.findIndex(Mb=>Mb.id===Wa.fromId);const jb=d.findIndex(Mb=>Mb.id===Wa.toId);Wa&&-1!==db&&-1!==jb?(db=qf(ne({},Wa),{id:ml(),fromId:oa[db].id,toId:oa[jb].id}),Fa.push(db),Qa.bindingId=db.id):Qa.bindingId=void 0}else console.warn("binding not found",Qa.bindingId)}});l=l.filter(Qa=>oa.some(Wa=>Wa.assetId===Qa.id));return{shapes:oa,assets:l,bindings:Fa}});gb(this,"getClonedShapesFromTldrString",(d,l)=>{try{{var H;const Wa=null==(H=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?
void 0:H[1];if(Wa){try{var Y=JSON.parse(Wa)}catch(db){Y=null}var ka=Y}else ka=void 0}d=ka;if(!d)return null;const {shapes:oa,bindings:Fa,assets:Qa}=d;return this.cloneShapes({shapes:oa,bindings:Fa,assets:Qa,point:l})}catch(oa){console.log(oa)}return null});gb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});gb(this,"addClonedShapes",d=>{const {shapes:l,assets:H,bindings:Y}=d;0<H.length&&this.app.createAssets(H);0<l.length&&this.app.createShapes(l);
this.app.currentPage.updateBindings(Object.fromEntries(Y.map(ka=>[ka.id,ka])));this.app.selectedTool.transition("idle");return this});gb(this,"addClonedShapesFromTldrString",(d,l)=>{(d=this.getClonedShapesFromTldrString(d,l))&&this.addClonedShapes(d);return this});gb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var l=[...d.filter(H=>"group"===H.type),...d.map(H=>this.app.getParentGroup(H))].filter(gg);this.app.currentPage.removeShapes(...l);d=d.filter(H=>"group"!==H.type);
1<d.length&&(l=this.app.getShapeClass("group"),l=new l({id:ml(),type:l.id,parentId:this.app.currentPage.id,children:d.map(H=>H.id)}),this.app.currentPage.addShapes(l),this.app.setSelectedShapes([l]),this.app.bringForward(d));this.app.persist()}});gb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(H=>"group"===H.type),...d.map(H=>this.app.getParentGroup(H))].filter(gg);var l=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),this.app.persist(),
this.app.setSelectedShapes(l))}});gb(this,"convertShapes",(d,l=this.app.allSelectedShapesArray)=>{const H=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...l);l=l.map(Y=>new H(qf(ne({},Y.serialized),{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...l);this.app.persist();this.app.setSelectedShapes(l)});gb(this,"setCollapsed",(d,l=this.app.allSelectedShapesArray)=>{l.forEach(H=>{"logseq-portal"===H.props.type&&H.setCollapsed(d)});this.app.persist()});this.app=a}},Dt=class{constructor(){gb(this,
"cursor","default");gb(this,"rotation",0);gb(this,"reset",()=>{this.cursor="default"});gb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});gb(this,"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});Qg(this)}};he([Se],Dt.prototype,"cursor",2);he([Se],Dt.prototype,"rotation",2);he([xg],Dt.prototype,"reset",2);he([xg],Dt.prototype,"setCursor",2);he([xg],Dt.prototype,"setRotation",2);var Et=class{constructor(a){gb(this,"app");gb(this,"stack",[]);gb(this,
"isPaused",!0);gb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});gb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});gb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:d})});gb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});gb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});gb(this,"instantiateShape",d=>
new (this.app.getShapeClass(d.type))(d));gb(this,"deserialize",d=>{xd(()=>{var l,{pages:H}=d;const Y=this.isPaused;this.pause();const ka=[...this.app.selectedIds];try{const oa=new Map(this.app.pages),Fa=[];for(const Qa of H){const Wa=oa.get(Qa.id);if(void 0!==Wa){const db=new Map(Wa.shapes.map(jb=>[jb.props.id,jb]));H=[];for(const jb of Qa.shapes){const Mb=db.get(jb.id);void 0!==Mb?(Mb.nonce!==jb.nonce&&(Mb.update(jb,!0),Mb.nonce=jb.nonce,Mb.setLastSerialized(jb)),db.delete(jb.id)):H.push(this.instantiateShape(jb))}0<
db.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&Wa.removeShapes(...db.values());0<H.length&&Wa.addShapes(...H);oa.delete(Qa.id);Wa.updateBindings(Qa.bindings);Wa.nonce=null!=(l=Qa.nonce)?l:0}else{const {id:db,name:jb,shapes:Mb,bindings:Ub,nonce:Nb}=Qa;Fa.push(new hn(this.app,{id:db,name:jb,nonce:Nb,bindings:Ub,shapes:Mb.map(lc=>this.instantiateShape(lc))}))}}0<Fa.length&&this.app.addPages(Fa);0<oa.size&&this.app.removePages(Array.from(oa.values()));this.app.setSelectedShapes(ka).setErasingShapes([])}catch(oa){console.warn(oa)}Y||
this.resume()})});this.app=a;Qg(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};he([Se],Et.prototype,"stack",2);he([xg],Et.prototype,"persist",2);he([xg],Et.prototype,"undo",2);he([xg],Et.prototype,"redo",2);he([xg],Et.prototype,"deserialize",2);var Ft=class{constructor(){gb(this,"mode","light");gb(this,"showGrid",!0);gb(this,"scaleLevel","md");gb(this,"color","");Qg(this)}update(a){Object.assign(this,a)}};he([Se],Ft.prototype,"mode",2);he([Se],Ft.prototype,"showGrid",
2);he([Se],Ft.prototype,"scaleLevel",2);he([Se],Ft.prototype,"color",2);he([xg],Ft.prototype,"update",1);var zh=class extends At{constructor(a,d,l,H){var Y,ka;super();gb(this,"uuid",ml());gb(this,"readOnly");gb(this,"api");gb(this,"inputs",new Jl);gb(this,"cursors",new Dt);gb(this,"viewport",new tp);gb(this,"settings",new Ft);gb(this,"Tools",[]);gb(this,"history",new Et(this));gb(this,"persist",this.history.persist);gb(this,"undo",this.history.undo);gb(this,"redo",this.history.redo);gb(this,"saving",
!1);gb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});gb(this,"load",()=>{this.notify("load",null);return this});gb(this,"save",()=>{this.notify("save",null);return this});gb(this,"pages",new Map([["page",new hn(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));gb(this,"getPageById",oa=>{const Fa=this.pages.get(oa);if(!Fa)throw Error(`Could not find a page named ${oa}.`);return Fa});gb(this,"getShapeById",
(oa,Fa=this.currentPage.id)=>{var Qa;return null==(Qa=this.getPageById(Fa))?void 0:Qa.shapesById[oa]});gb(this,"createShapes",oa=>{if(this.readOnly)return this;(oa=this.currentPage.addShapes(...oa))&&this.notify("create-shapes",oa);this.persist();return this});gb(this,"updateShapes",oa=>{if(this.readOnly)return this;oa.forEach(Fa=>{const Qa=this.getShapeById(Fa.id);null==Qa?void 0:Qa.update(Fa);Fa.type!==(null==Qa?void 0:Qa.type)&&this.api.convertShapes(Fa.type,[Qa])});this.persist();return this});
gb(this,"deleteShapes",oa=>{if(0===oa.length||this.readOnly)return this;oa=oa.map(db=>"string"===typeof db?this.getShapeById(db):db).filter(gg).filter(db=>!db.props.isLocked);const Fa=this.shapesInGroups(oa);oa.forEach(db=>{this.getParentGroup(db)&&Fa.push(db)});let Qa=new Set([...oa,...Fa].map(db=>db.id));Fa.forEach(db=>{var jb;const Mb=this.getParentGroup(db);if(Mb){const Ub=null==(jb=Mb.props.children)?void 0:jb.filter(Nb=>Nb!==db.id);!Ub||1>=(null==Ub?void 0:Ub.length)?Qa.add(Mb.id):Mb.update({children:Ub})}});
const Wa=(db,jb)=>{var Mb;[...Qa].includes(db)&&"line"===(null==(Mb=this.getShapeById(jb))?void 0:Mb.type)&&Qa.add(jb)};this.currentPage.shapes.filter(db=>!db.props.isLocked).flatMap(db=>{var jb;return Object.values(null!=(jb=db.props.handles)?jb:{})}).flatMap(db=>db.bindingId).filter(gg).map(db=>{var jb,Mb;const Ub=null==(jb=this.currentPage.bindings[db])?void 0:jb.toId;db=null==(Mb=this.currentPage.bindings[db])?void 0:Mb.fromId;Ub&&db&&(Wa(Ub,db),Wa(db,Ub))});oa=[...Qa].map(db=>this.getShapeById(db));
this.setSelectedShapes(this.selectedShapesArray.filter(db=>!Qa.has(db.id)));(oa=this.currentPage.removeShapes(...oa))&&this.notify("delete-shapes",oa);this.persist();return this});gb(this,"bringForward",(oa=this.selectedShapesArray)=>{0<oa.length&&!this.readOnly&&this.currentPage.bringForward(oa);return this});gb(this,"sendBackward",(oa=this.selectedShapesArray)=>{0<oa.length&&!this.readOnly&&this.currentPage.sendBackward(oa);return this});gb(this,"sendToBack",(oa=this.selectedShapesArray)=>{0<oa.length&&
!this.readOnly&&this.currentPage.sendToBack(oa);return this});gb(this,"bringToFront",(oa=this.selectedShapesArray)=>{0<oa.length&&!this.readOnly&&this.currentPage.bringToFront(oa);return this});gb(this,"flipHorizontal",(oa=this.selectedShapesArray)=>{this.currentPage.flip(oa,"horizontal");return this});gb(this,"flipVertical",(oa=this.selectedShapesArray)=>{this.currentPage.flip(oa,"vertical");return this});gb(this,"align",(oa,Fa=this.selectedShapesArray)=>{if(2>Fa.length||this.readOnly)return this;
const Qa=Fa.map(Ub=>{const Nb=Ub.getBounds();return{id:Ub.id,point:[Nb.minX,Nb.minY],bounds:Nb}}),Wa=Af.getCommonBounds(Qa.map(({bounds:Ub})=>Ub)),db=Wa.minX+Wa.width/2,jb=Wa.minY+Wa.height/2,Mb=Object.fromEntries(Qa.map(({id:Ub,point:Nb,bounds:lc})=>[Ub,{prev:Nb,next:{top:[Nb[0],Wa.minY],centerVertical:[Nb[0],jb-lc.height/2],bottom:[Nb[0],Wa.maxY-lc.height],left:[Wa.minX,Nb[1]],centerHorizontal:[db-lc.width/2,Nb[1]],right:[Wa.maxX-lc.width,Nb[1]]}[oa]}]));Fa.forEach(Ub=>{Mb[Ub.id]&&Ub.update({point:Mb[Ub.id].next})});
this.persist();return this});gb(this,"distribute",(oa,Fa=this.selectedShapesArray)=>{if(2>Fa.length||this.readOnly)return this;const Qa=Object.fromEntries(Af.getDistributions(Fa,oa).map(Wa=>[Wa.id,Wa]));Fa.forEach(Wa=>{Qa[Wa.id]&&Wa.update({point:Qa[Wa.id].next})});this.persist();return this});gb(this,"packIntoRectangle",(oa=this.selectedShapesArray)=>{if(2>oa.length||this.readOnly)return this;const Fa=Object.fromEntries(Af.getPackedDistributions(oa).map(Qa=>[Qa.id,Qa]));oa.forEach(Qa=>{Fa[Qa.id]&&
Qa.update({point:Fa[Qa.id].next})});this.persist();return this});gb(this,"setLocked",oa=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(Fa=>{Fa.update({isLocked:oa})});this.persist();return this});gb(this,"assets",{});gb(this,"removeUnusedAssets",()=>{const oa=this.getCleanUpAssets();Object.keys(this.assets).forEach(Fa=>{oa.some(Qa=>Qa.id===Fa)||delete this.assets[Fa]});this.persist();return this});gb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&
!this.editingShape){const Fa=this.allSelectedShapesArray;var oa=JSON.stringify({shapes:Fa.map(Wa=>Wa.serialized),assets:this.getCleanUpAssets().filter(Wa=>Fa.some(db=>db.props.assetId===Wa.id)),bindings:Ab(this.currentPage.bindings)});oa=encodeURIComponent(`<whiteboard-tldr>${oa}</whiteboard-tldr>`);const Qa=this.selectedShapesArray.map(Wa=>`((${Wa.props.id}))`).join(" ");this.notify("copy",{text:Qa,html:oa})}});gb(this,"paste",(oa,Fa)=>{var Qa;this.editingShape||this.readOnly||this.notify("paste",
{point:this.inputs.currentPoint,shiftKey:!!Fa,dataTransfer:null!=(Qa=null==oa?void 0:oa.clipboardData)?Qa:void 0})});gb(this,"cut",()=>{this.copy();this.api.deleteShapes()});gb(this,"drop",(oa,Fa)=>{this.notify("drop",{dataTransfer:oa,point:Fa?this.viewport.getPagePoint(Fa):Af.getBoundsCenter(this.viewport.currentView)})});gb(this,"selectTool",(oa,Fa={})=>{this.readOnly&&!["select","move"].includes(oa)||this.transition(oa,Fa)});gb(this,"editingId");gb(this,"setEditingShape",oa=>{this.editingId="string"===
typeof oa?oa:null==oa?void 0:oa.id;return this});gb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});gb(this,"hoveredId");gb(this,"setHoveredShape",oa=>{this.hoveredId="string"===typeof oa?oa:null==oa?void 0:oa.id;return this});gb(this,"selectedIds",new Set);gb(this,"selectedShapes",new Set);gb(this,"selectionRotation",0);gb(this,"setSelectedShapes",oa=>{var Fa;const {selectedIds:Qa,selectedShapes:Wa}=this;Qa.clear();Wa.clear();oa[0]&&"string"===typeof oa[0]?
oa.forEach(jb=>Qa.add(jb)):oa.forEach(jb=>Qa.add(jb.id));const db=this.currentPage.shapes.filter(jb=>Qa.has(jb.id));db.forEach(jb=>Wa.add(jb));this.selectionRotation=1===db.length?null!=(Fa=db[0].props.rotation)?Fa:0:0;0===oa.length&&this.setEditingShape();return this});gb(this,"erasingIds",new Set);gb(this,"erasingShapes",new Set);gb(this,"setErasingShapes",oa=>{const {erasingIds:Fa,erasingShapes:Qa}=this;Fa.clear();Qa.clear();oa[0]&&"string"===typeof oa[0]?oa.forEach(Wa=>Fa.add(Wa)):oa.forEach(Wa=>
Fa.add(Wa.id));this.currentPage.shapes.filter(Wa=>Fa.has(Wa.id)).forEach(Wa=>Qa.add(Wa));return this});gb(this,"bindingIds");gb(this,"setBindingShapes",oa=>{this.bindingIds=oa;return this});gb(this,"clearBindingShape",()=>this.setBindingShapes());gb(this,"createNewLineBinding",(oa,Fa)=>{oa="string"===typeof oa?this.getShapeById(oa):oa;Fa="string"===typeof Fa?this.getShapeById(Fa):Fa;if((null==oa?0:oa.canBind)&&(null==Fa?0:Fa.canBind)&&(Fa=fd(oa,Fa))){const [Qa,Wa]=Fa;this.createShapes([Qa]);this.currentPage.updateBindings(Object.fromEntries(Wa.map(db=>
[db.id,db])));this.persist();return!0}return!1});gb(this,"brush");gb(this,"setBrush",oa=>{this.brush=oa;return this});gb(this,"setCamera",(oa,Fa)=>{this.viewport.update({point:oa,zoom:Fa});return this});gb(this,"getPagePoint",oa=>{const {camera:Fa}=this.viewport;return Dd.sub(Dd.div(oa,Fa.zoom),Fa.point)});gb(this,"getScreenPoint",oa=>{const {camera:Fa}=this.viewport;return Dd.mul(Dd.add(oa,Fa.point),Fa.zoom)});gb(this,"Shapes",new Map);gb(this,"registerShapes",oa=>{oa.forEach(Fa=>{if("group"===Fa.id){const Qa=
this;Fa.prototype.getShapes=function(){var Wa,db;return null!=(db=null==(Wa=this.props.children)?void 0:Wa.map(jb=>Qa.getShapeById(jb)).filter(Boolean))?db:[]}}return this.Shapes.set(Fa.id,Fa)})});gb(this,"deregisterShapes",oa=>{oa.forEach(Fa=>this.Shapes.delete(Fa.id))});gb(this,"getShapeClass",oa=>{if(!oa)throw Error("No shape type provided.");const Fa=this.Shapes.get(oa);if(!Fa)throw Error(`Could not find shape class for ${oa}`);return Fa});gb(this,"wrapUpdate",oa=>{xd(()=>{const Fa=!this.history.isPaused;
Fa&&this.history.pause();oa();Fa&&(this.history.resume(),this.persist())})});gb(this,"subscriptions",new Set([]));gb(this,"subscribe",(oa,Fa)=>{if(void 0===Fa)throw Error("Callback is required.");const Qa={event:oa,callback:Fa};this.subscriptions.add(Qa);return()=>this.unsubscribe(Qa)});gb(this,"unsubscribe",oa=>{this.subscriptions.delete(oa);return this});gb(this,"notify",(oa,Fa)=>{this.subscriptions.forEach(Qa=>{Qa.event===oa&&Qa.callback(this,Fa)});return this});gb(this,"onTransition",()=>{});
gb(this,"onPointerDown",(oa,Fa)=>{if(!this.editingShape&&1===Fa.button&&!this.isIn("move"))this.temporaryTransitionToMove(Fa);else if(2===Fa.button&&!this.editingShape)Fa.preventDefault(),this.transition("select");else if("clientX"in Fa)this.inputs.onPointerDown([...this.viewport.getPagePoint([Fa.clientX,Fa.clientY]),.5],Fa)});gb(this,"onPointerUp",(oa,Fa)=>{if(!this.editingShape&&1===Fa.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Fa.stopPropagation(),Fa.preventDefault();
else if("clientX"in Fa)this.inputs.onPointerUp([...this.viewport.getPagePoint([Fa.clientX,Fa.clientY]),.5],Fa)});gb(this,"onPointerMove",(oa,Fa)=>{if("clientX"in Fa)this.inputs.onPointerMove([...this.viewport.getPagePoint([Fa.clientX,Fa.clientY]),.5],Fa)});gb(this,"onKeyDown",(oa,Fa)=>{if(this.editingShape||" "!==Fa.key||this.isIn("move"))this.inputs.onKeyDown(Fa);else this.temporaryTransitionToMove(Fa)});gb(this,"onKeyUp",(oa,Fa)=>{if(!this.editingShape&&" "===Fa.key&&this.isIn("move"))this.selectedTool.transition("idle",
{exit:!0}),Fa.stopPropagation(),Fa.preventDefault();else this.inputs.onKeyUp(Fa)});gb(this,"onPinchStart",(oa,Fa)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(oa.point),.5],Fa)});gb(this,"onPinch",(oa,Fa)=>{this.inputs.onPinch([...this.viewport.getPagePoint(oa.point),.5],Fa)});gb(this,"onPinchEnd",(oa,Fa)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(oa.point),.5],Fa)});this._states=[Bt,Ct];this.readOnly=H;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),
H=null!=(Y=this.initial)?Y:this.states[0].id,Y=this.children.get(H))&&(this.currentState=Y,null==(ka=this.currentState)?void 0:ka._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);l&&this.registerTools(l);this.history.resume();a&&this.history.deserialize(a);this.api=new vE(this);Qg(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>
this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>d.props.children).filter(gg).map(d=>this.getShapeById(d)).filter(gg)}getParentGroup(a){return this.shapes.find(d=>{var l;return null==(l=d.props.children)?void 0:l.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):a.forEach(d=>
delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(l=>{l.props.assetId&&this.assets[l.props.assetId]&&a.add(this.assets[l.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=this;
return a?d.shapes.find(l=>l.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(l=>l.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=this;return a?this.shapes.find(d=>{var l;return"group"===d.type&&(null==(l=d.props.children)?void 0:l.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=
this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(H=>{var Y;return Object.values(null!=(Y=H.props.handles)?Y:{})}).flatMap(H=>H.bindingId).filter(gg).flatMap(H=>{var Y,ka;return[null==(Y=this.currentPage.bindings[H])?void 0:Y.fromId,null==(ka=this.currentPage.bindings[H])?
void 0:ka.toId]}).filter(gg):[],l=[...(null!=(a=this.bindingIds)?a:[]),...d];return l?this.currentPage.shapes.filter(H=>null==l?void 0:l.includes(H.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:d,viewport:{currentView:l}}=this;return d.shapes.filter(H=>!H.canUnmount||a.has(H)||Af.boundsContain(l,H.rotatedBounds)||Af.boundsCollide(l,
H.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!Af.boundsContain(d,a)&&!Af.boundsCollide(d,a)){var l=Af.getBoundsCenter(a);return Dd.clampV([(l[0]-d.minX-d.width/2)/d.width,(l[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?qf(ne({},a[0].bounds),{rotation:a[0].props.rotation}):Af.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;
const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}temporaryTransitionToMove(a){a.stopPropagation();a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};gb(zh,"id","app");gb(zh,"initial","select");he([Df],zh.prototype,"serialized",1);he([Se],zh.prototype,"pages",2);he([Df],zh.prototype,
"currentPageId",1);he([Df],zh.prototype,"currentPage",1);he([xg],zh.prototype,"addPages",1);he([xg],zh.prototype,"removePages",1);he([xg],zh.prototype,"createShapes",2);he([xg],zh.prototype,"updateShapes",2);he([xg],zh.prototype,"deleteShapes",2);he([Se],zh.prototype,"assets",2);he([xg],zh.prototype,"addAssets",1);he([xg],zh.prototype,"removeAssets",1);he([xg],zh.prototype,"removeUnusedAssets",2);he([Df],zh.prototype,"selectedTool",1);he([Se],zh.prototype,"editingId",2);he([Df],zh.prototype,"editingShape",
1);he([xg],zh.prototype,"setEditingShape",2);he([Se],zh.prototype,"hoveredId",2);he([Df],zh.prototype,"hoveredShape",1);he([Df],zh.prototype,"hoveredGroup",1);he([xg],zh.prototype,"setHoveredShape",2);he([Se],zh.prototype,"selectedIds",2);he([Se],zh.prototype,"selectedShapes",2);he([Se],zh.prototype,"selectionRotation",2);he([Df],zh.prototype,"selectedShapesArray",1);he([Df],zh.prototype,"allSelectedShapes",1);he([Df],zh.prototype,"allSelectedShapesArray",1);he([xg],zh.prototype,"setSelectedShapes",
2);he([xg],zh.prototype,"setSelectionRotation",1);he([Se],zh.prototype,"erasingIds",2);he([Se],zh.prototype,"erasingShapes",2);he([Df],zh.prototype,"erasingShapesArray",1);he([xg],zh.prototype,"setErasingShapes",2);he([Se],zh.prototype,"bindingIds",2);he([Df],zh.prototype,"bindingShapes",1);he([xg],zh.prototype,"setBindingShapes",2);he([xg],zh.prototype,"createNewLineBinding",2);he([Se],zh.prototype,"brush",2);he([xg],zh.prototype,"setBrush",2);he([xg],zh.prototype,"setCamera",2);he([Df],zh.prototype,
"currentGrid",1);he([Df],zh.prototype,"shapes",1);he([Df],zh.prototype,"shapesInViewport",1);he([Df],zh.prototype,"selectionDirectionHint",1);he([Df],zh.prototype,"selectionBounds",1);he([Df],zh.prototype,"showSelection",1);he([Df],zh.prototype,"showSelectionDetail",1);he([Df],zh.prototype,"showSelectionRotation",1);he([Df],zh.prototype,"showContextBar",1);he([Df],zh.prototype,"showRotateHandles",1);he([Df],zh.prototype,"showResizeHandles",1);var wE=Function.prototype.toString,zx=Object.create,xE=
Object.prototype.toString,yE=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,l){this._keys.push(d);this._values.push(l)};return a}(),zE="undefined"!==typeof WeakMap?bf:Ce,AE="g"===/test/g.flags?Vf:kg,BE="undefined"!==typeof Symbol?Wf:Ng,CE=Object.defineProperty,DE=Object.getOwnPropertyDescriptor,zA=Object.getOwnPropertyNames,Ax=Object.getOwnPropertySymbols,
AA=Object.prototype,BA=AA.hasOwnProperty,EE=AA.propertyIsEnumerable,CA="function"===typeof Ax,FE=CA?jh:zA,GE=Array.isArray,Bx=Object.assign,HE=Object.getPrototypeOf,DA={array:function(a,d){var l=new d.Constructor;d.cache.set(a,l);for(var H=0,Y=a.length;H<Y;++H)l[H]=d.copier(a[H],d);return l},arrayBuffer:function(a,d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,d){return new d.Constructor(a.getTime())},
error:ej,map:Bh,object:CA?si:lg,regExp:function(a,d){d=new d.Constructor(a.source,AE(a));d.lastIndex=a.lastIndex;return d},set:ik},IE=Bx({},DA,{array:function(a,d){var l=new d.Constructor;d.cache.set(a,l);return Ei(a,l,d)},map:function(a,d){return Ei(a,Bh(a,d),d)},object:function(a,d){var l=Me(d.prototype);d.cache.set(a,l);return Ei(a,l,d)},set:function(a,d){return Ei(a,ik(a,d),d)}});Fi(Bx({},IE,{}));var JE=Fi({}),KE=vf(it()),LE=vf(sr()),Gs=JE,Vo=class{static insertTextFirefox(a,d){a.setRangeText(d,
a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const l=a.ownerDocument,H=l.activeElement;H!==a&&a.focus();l.execCommand("insertText",!1,d)||Vo.insertTextFirefox(a,d);H===l.body?a.blur():H instanceof HTMLElement&&H!==a&&H.focus()}static set(a,d){a.select();Vo.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:l}=a;return a.value.slice(d?d:void 0,l?l:void 0)}static wrapSelection(a,
d,l){const {selectionStart:H,selectionEnd:Y}=a,ka=Vo.getSelection(a);Vo.insert(a,d+ka+(null!=l?l:d));a.selectionStart=(H||0)+d.length;a.selectionEnd=(Y||0)+d.length}static replace(a,d,l){let H=0;a.value.replace(d,(...Y)=>{const ka=H+Y[Y.length-2],oa=Y[0].length;a.selectionStart=ka;a.selectionEnd=ka+oa;Y="string"===typeof l?l:l(...Y);Vo.insert(a,Y);a.selectionStart=ka;H+=Y.length-oa;return Y})}static findLineEnd(a,d){const l=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(l)?d:l+1}static indent(a){var d;
const {selectionStart:l,selectionEnd:H,value:Y}=a;var ka=Y.slice(l,H);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=Y.lastIndexOf("\n",l-1)+1;var oa=a.value.slice(d,H-1);ka=oa.replace(/^|\n/g,`$&${Vo.INDENT}`);oa=ka.length-oa.length;a.setSelectionRange(d,H-1);Vo.insert(a,ka);a.setSelectionRange(l+1,H+oa)}else Vo.insert(a,Vo.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:l,value:H}=a;var Y=H.lastIndexOf("\n",d-1)+1;const ka=Vo.findLineEnd(H,l);var oa=a.value.slice(Y,ka);
const Fa=oa.replace(/(^|\n)(\t| {1,2})/g,"$1");oa=oa.length-Fa.length;a.setSelectionRange(Y,ka);Vo.insert(a,Fa);Y=(Y=/\t| {1,2}/.exec(H.slice(Y,d)))?Y[0].length:0;a.setSelectionRange(d-Y,Math.max(d-Y,l-oa))}static normalizeText(a){return a.replace(Vo.fixNewLines,"\n")}},Gt=Vo;gb(Gt,"fixNewLines",/\r?\n|\r/g);gb(Gt,"INDENT","  ");var Ir;"undefined"!==typeof window&&(Ir=Al());var Cx=new Map,EA=Kh()?"⌘":"ctrl",ME=class extends zh{},FA=vf(V(22)),NE=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var GA=vf(V(22)),Dx={},Au=vf(V(22)),OE=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},Ex=vf(V(22)),Fx=new Map,PE={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",
binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},QE=((a,...d)=>a.reduce((l,H,Y)=>l+H+(Y<d.length?d[Y]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,HA=vf(V(22)),IA=vf(V(22)),Gx={},Kl={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},JA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},RE=["enter","leave"],SE=["gotpointercapture","lostpointercapture"],
KA=class{constructor(a,d,l){this.ctrl=a;this.args=d;this.key=l;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:l,args:H}=this;d[l]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=H;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,l=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=l.from?qh(l.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:l,shared:H}=this;d.args=this.args;var Y=0;if(a){d.event=a;l.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;H.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;H.locked=!!document.pointerLockElement;Y=Object;var ka=Y.assign,oa={};"buttons"in a&&(oa.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:Ic,altKey:Jc,metaKey:Gd,ctrlKey:Xd}=a;Object.assign(oa,{shiftKey:Ic,altKey:Jc,metaKey:Gd,ctrlKey:Xd})}ka.call(Y,H,oa);H.down=H.pressed=1===H.buttons%2||0<H.touches;Y=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(ka=d._delta.map(Math.abs),Kl.addTo(d._distance,ka));this.axisIntent&&this.axisIntent(a);
const [Fa,Qa]=d._movement,[Wa,db]=l.threshold,{_step:jb,values:Mb}=d;l.hasCustomTransform?(!1===jb[0]&&(jb[0]=Math.abs(Fa)>=Wa&&Mb[0]),!1===jb[1]&&(jb[1]=Math.abs(Qa)>=db&&Mb[1])):(!1===jb[0]&&(jb[0]=Math.abs(Fa)>=Wa&&Math.sign(Fa)*Wa),!1===jb[1]&&(jb[1]=Math.abs(Qa)>=db&&Math.sign(Qa)*db));d.intentional=!1!==jb[0]||!1!==jb[1];if(d.intentional){ka=[0,0];if(l.hasCustomTransform){const [Ic,Jc]=Mb;ka[0]=!1!==jb[0]?Ic-jb[0]:0;ka[1]=!1!==jb[1]?Jc-jb[1]:0}else ka[0]=!1!==jb[0]?Fa-jb[0]:0,ka[1]=!1!==jb[1]?
Qa-jb[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(ka);oa=d.offset;var Ub=d._active&&!d._blocked||d.active;Ub&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=H[this.ingKey]=d._active,a&&(d.first&&("bounds"in l&&(d._bounds=qh(l.bounds,d)),this.setup&&this.setup()),d.movement=ka,this.computeOffset()));var [Nb,lc]=d.offset,[[xc,$b],[nc,jc]]=d._bounds;d.overflow=[Nb<xc?-1:Nb>$b?1:0,lc<nc?-1:lc>jc?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?d._movement[0]:
d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=Yi(d._bounds,d.offset,d._active?l.rubberband||[0,0]:[0,0]);d.delta=Kl.sub(d.offset,oa);this.computeMovement();Ub&&(!d.last||32<Y)&&(d.delta=Kl.sub(d.offset,oa),a=d.delta.map(Math.abs),Kl.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<Y&&(d.velocity=[a[0]/Y,a[1]/Y]))}}emit(){const a=this.state;var d=this.shared;const l=
this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||l.triggerAllEvents)d=this.handler(Kg(Kg(Kg({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Bu=class extends KA{constructor(...a){super(...a);fi(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Kl.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
Kl.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,l=this.config;!d.axis&&a&&(a="object"===typeof l.axisThreshold?l.axisThreshold[Lh(a)]:l.axisThreshold,d.axis=el(d._movement,a));d._blocked=(l.lockDirection||!!l.axis)&&!d.axis||!!l.axis&&l.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},TE=a=>a,LA={enabled(a=!0){return a},eventOptions(a,d,l){return Kg(Kg({},l.shared.eventOptions),
a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return Kl.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return Kl.toVector(a)},transform(a,d,l){a=a||l.shared.transform;this.hasCustomTransform=!!a;return a||TE},threshold(a){return Kl.toVector(a,0)}},Hs=Kg(Kg({},LA),{},{axis(a,d,{axis:l}){this.lockDirection="lock"===l;if(!this.lockDirection)return l},axisThreshold(a=0){return a},bounds(a=
{}){if("function"===typeof a)return ka=>Hs.bounds(a(ka));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:l=Infinity,top:H=-Infinity,bottom:Y=Infinity}=a;return[[d,l],[H,Y]]}}),MA={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},UE=class extends Bu{constructor(...a){super(...a);fi(this,"ingKey","dragging")}reset(){super.reset();const a=this.state;a._pointerId=
void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),l=a.currentTarget.getBoundingClientRect();a._bounds=Hs.bounds({left:d.left-l.left+a.offset[0],right:d.right-l.right+a.offset[0],top:d.top-l.top+a.offset[1],bottom:d.bottom-l.bottom+a.offset[1]})}}cancel(){const a=this.state;a.canceled||(a.canceled=
!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,l=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var H=this.ctrl.setEventIds(a);d.pointerCapture&&a.target.setPointerCapture(a.pointerId);
H&&1<H.size&&l._pointerActive||(this.start(a),this.setupPointer(a),l._pointerId=Rl(a),l._pointerActive=!0,this.computeValues(Oj(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==Lh(a)?(l._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);this.emit()}pointerMove(a){const d=this.state,l=
this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var H=Rl(a);if(void 0===d._pointerId||H===d._pointerId)H=Oj(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=Kl.sub(H,d._values),this.computeValues(H)),Kl.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):l.preventScrollAxis&&!d._preventScroll?d.axis&&(d.axis===l.preventScrollAxis||"xy"===
l.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(oa){}const d=this.state,l=this.config;if(d._active&&d._pointerActive){var H=Rl(a);if(void 0===d._pointerId||H===d._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(a);var [Y,ka]=d._distance;
d.tap=Y<=l.tapsThreshold&&ka<=l.tapsThreshold;if(d.tap&&l.filterTaps)d._force=!0;else{const [oa,Fa]=d.direction,[Qa,Wa]=d.velocity,[db,jb]=d.movement,[Mb,Ub]=l.swipe.velocity,[Nb,lc]=l.swipe.distance;d.elapsedTime<l.swipe.duration&&(Math.abs(Qa)>Mb&&Math.abs(db)>Nb&&(d.swipe[0]=oa),Math.abs(Wa)>Ub&&Math.abs(jb)>lc&&(d.swipe[1]=Fa))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,l=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();
d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,l,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,l,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,l,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=
!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=MA[a.key];if(d){const l=this.state,H=a.shiftKey?10:a.altKey?.1:1;this.start(a);l._delta=d(H);l._keyboardActive=!0;Kl.addTo(l._movement,l._delta);this.compute(a);this.emit()}}keyUp(a){a.key in MA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),
a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Is="undefined"!==typeof window&&window.document&&window.document.createElement;try{var NA="constructor"in GestureEvent}catch(a){NA=!1}var VE=NA,Cu=Is&&"ontouchstart"in window||Is&&1<window.navigator.maxTouchPoints,OA=Is&&
"ontouchstart"in window||Is&&1<window.navigator.maxTouchPoints,PA=Is&&"onpointerdown"in window,WE=Is&&"exitPointerLock"in window.document,QA={mouse:0,touch:0,pen:8},XE=Kg(Kg({},Hs),{},{device(a,d,{pointer:{touch:l=!1,lock:H=!1,mouse:Y=!1}={}}){this.pointerLock=H&&WE;return Cu&&l?"touch":this.pointerLock?"mouse":PA&&!Y?"pointer":Cu?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:l}){this.preventScrollDelay="number"===typeof l?l:l||void 0===l&&a?250:void 0;if(OA&&!1!==l)return a?a:void 0!==l?
"y":void 0},pointerCapture(a,d,{pointer:{capture:l=!0,buttons:H=1,keys:Y=!0}={}}){this.pointerButtons=H;this.keys=Y;return!this.pointerLock&&"pointer"===this.device&&l},threshold(a,d,{filterTaps:l=!1,tapsThreshold:H=3,axis:Y}){a=Kl.toVector(a,l?H:Y?1:0);this.filterTaps=l;this.tapsThreshold=H;return a},swipe({velocity:a=.5,distance:d=50,duration:l=250}={}){return{velocity:this.transform(Kl.toVector(a)),distance:this.transform(Kl.toVector(d)),duration:l}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;
default:return a}},axisThreshold(a){return a?Kg(Kg({},QA),a):QA}}),YE=class extends KA{constructor(...a){super(...a);fi(this,"ingKey","pinching");fi(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:l}=this.state;this.state.offset="wheel"===a?Kl.add(d,l):[(1+d[0])*l[0],d[1]+
l[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,l]=a._movement;if(!a.axis){const H=30*Math.abs(d)-Math.abs(l);0>H?a.axis="angle":0<H&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);
var d=this.state;const l=this.ctrl.touchIds;d._active&&d._touchIds.every(H=>l.has(H))||2>l.size||(this.start(a),d._touchIds=Array.from(l).slice(0,2),d=Ti(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,l=d._pointerEvents,H=this.ctrl.pointerIds;d._active&&Array.from(l.keys()).every(Y=>H.has(Y))||(2>l.size&&l.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=Ql(...Array.from(l.values())),
this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=Ti(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=Ql(...Array.from(d.values())),this.pinchMove(a,d))}pinchMove(a,d){const l=this.state,H=d.angle-l._values[1];let Y=0;270<Math.abs(H)&&(Y+=Math.sign(H));
this.computeValues([d.distance,d.angle-360*Y]);l.origin=d.origin;l.turns=Y;l._movement=[l._values[0]/l._initial[0]-1,l._values[1]-l._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);try{a.target.releasePointerCapture(a.pointerId)}catch(l){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);
d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,a.rotation]);d.origin=[a.clientX,a.clientY];var l=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=Kl.sub(d._movement,
l);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();const d=this.state;d._delta=[-Gi(a)[1]/100*d.offset[0],0];Kl.addTo(d._movement,d._delta);Dm(d);this.state.origin=
[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),{passive:!1})}},ZE=Kg(Kg({},LA),{},{device(a,d,{shared:l,pointer:{touch:H=!1}={}}){if(l.target&&!Cu&&VE)return"gesture";
if(Cu&&H)return"touch";if(OA){if(PA)return"pointer";if(Cu)return"touch"}},bounds(a,d,{scaleBounds:l={},angleBounds:H={}}){const Y=oa=>{oa=qh(l,oa);oa=Object.assign({},{min:-Infinity,max:Infinity},oa||{});return[oa.min,oa.max]},ka=oa=>{oa=qh(H,oa);oa=Object.assign({},{min:-Infinity,max:Infinity},oa||{});return[oa.min,oa.max]};return"function"!==typeof l&&"function"!==typeof H?[Y(),ka()]:oa=>[Y(oa),ka(oa)]},threshold(a,d,l){this.lockDirection="lock"===l.axis;return Kl.toVector(a,this.lockDirection?
[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),$E=class extends Bu{constructor(...a){super(...a);fi(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(Oj(a));this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=Oj(a),l=this.state;
l._delta=Kl.sub(d,l._values);Kl.addTo(l._movement,l._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},aF=Kg(Kg({},Hs),{},{mouseOnly:(a=!0)=>a}),bF=class extends Bu{constructor(...a){super(...a);fi(this,"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var l,H;const {scrollX:Y,scrollY:ka,scrollLeft:oa,scrollTop:Fa}=a.currentTarget;var Qa=[null!==(l=null!==Y&&void 0!==Y?Y:oa)&&void 0!==l?l:0,null!==(H=null!==ka&&void 0!==ka?ka:Fa)&&void 0!==H?H:0];d._delta=Kl.sub(Qa,d._values);Kl.addTo(d._movement,d._delta);this.computeValues(Qa);this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll",
"",this.scroll.bind(this))}},cF=Hs,dF=class extends Bu{constructor(...a){super(...a);fi(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=Gi(a);Kl.addTo(d._movement,d._delta);Dm(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},eF=Hs,fF=class extends Bu{constructor(...a){super(...a);
fi(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(Oj(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var l=Oj(a);d._movement=d._delta=Kl.sub(l,d._values);this.computeValues(l);this.compute(a);d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},gF=Kg(Kg({},Hs),{},{mouseOnly:(a=
!0)=>a}),Hx=new Map,Ix=new Map,hF={key:"drag",engine:UE,resolver:XE},iF={key:"hover",engine:fF,resolver:gF},jF={key:"move",engine:$E,resolver:aF},kF={key:"pinch",engine:YE,resolver:ZE},lF={key:"scroll",engine:bF,resolver:cF},mF={key:"wheel",engine:dF,resolver:eF},Jx=vf(V(22)),nF={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=!0){return a},window(a=Is?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},oF=["target",
"eventOptions","window","enabled","transform"],RA=class{constructor(a,d){fi(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,l,H,Y){const ka=this._listeners,oa=Si(d,l),Fa=Kg(Kg({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),Y);a.addEventListener(oa,H,Fa);const Qa=()=>{a.removeEventListener(oa,H,Fa);ka.delete(Qa)};ka.add(Qa);return Qa}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},pF=class{constructor(){fi(this,"_timeouts",new Map)}add(a,
d,l=140,...H){this.remove(a);this._timeouts.set(a,window.setTimeout(d,l,...H))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},qF=class{constructor(a){fi(this,"gestures",new Set);fi(this,"_targetEventStore",new RA(this));fi(this,"gestureEventStores",{});fi(this,"gestureTimeoutStores",{});fi(this,"handlers",{});fi(this,"config",{});fi(this,"pointerIds",new Set);fi(this,"touchIds",new Set);fi(this,"state",
{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&fj(this,"drag");a.wheel&&fj(this,"wheel");a.scroll&&fj(this,"scroll");a.move&&fj(this,"move");a.pinch&&fj(this,"pinch");a.hover&&fj(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(Nm(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=
d}applyConfig(a,d){this.config=$i(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const l={};let H;if(d.target&&(H=d.target(),!H))return;if(d.enabled){for(const Y of this.gestures){const ka=this.config[Y],oa=SA(l,ka.eventOptions,!!H);ka.enabled&&(new (Hx.get(Y))(this,
a,Y)).bind(oa)}d=SA(l,d.eventOptions,!!H);for(const Y in this.nativeHandlers)d(Y,"",ka=>this.nativeHandlers[Y](Kg(Kg({},this.state.shared),{},{event:ka,args:a})),void 0,!0)}for(const Y in l)l[Y]=mj(...l[Y]);if(!H)return l;for(const Y in l){const {device:ka,capture:oa,passive:Fa}=xf(Y);this._targetEventStore.add(H,ka,"",l[Y],{capture:oa,passive:Fa})}}},SA=(a,d,l)=>(H,Y,ka,oa={},Fa=!1)=>{var Qa,Wa;const db=null!==(Qa=oa.capture)&&void 0!==Qa?Qa:d.capture;oa=null!==(Wa=oa.passive)&&void 0!==Wa?Wa:d.passive;
H=Fa?H:Sk(H,Y,db);l&&oa&&(H+="Passive");a[H]=a[H]||[];a[H].push(ka)},rF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,Uv=vf(V(22)),Kx=vf(V(22)),TA=vf(V(22)),UA=vf(V(22)),sF=vf(V(22)),tF=vf(V(22)),uF=vf(V(22)),vF=vf(V(22)),wF={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>Fj('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>Fj("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>Fj("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>Fj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>Fj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>Fj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>Fj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>Fj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>Fj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>Fj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>Fj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>Fj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>Fj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>Fj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},xF=vf(V(22));vf(V(22));var VA=V(22),WA=vf(V(22));if(!V(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!Qg)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var yF=V(31),Du=vf(V(22)),XA="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,zF=1E4,AF=function(a){var d="function"===typeof Symbol&&Symbol.iterator,l=d&&a[d],H=0;if(l)return l.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&H>=
a.length&&(a=void 0);return{value:a&&a[H++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},YA=XA?hi(XA):vn(),BF=YA.addReactionToTrack,CF=YA.recordReactionAsCommitted,ZA=function(a,d){var l="function"===typeof Symbol&&a[Symbol.iterator];if(!l)return a;a=l.call(a);var H,Y=[];try{for(;(void 0===d||0<d--)&&!(H=a.next()).done;)Y.push(H.value)}catch(oa){var ka={error:oa}}finally{try{H&&!H.done&&(l=a["return"])&&l.call(a)}finally{if(ka)throw ka.error;}}return Y},
DF=function(){return function(){}}(),Ht=V(22),$A="function"===typeof Symbol&&Symbol.for,aB=$A?Symbol.for("react.forward_ref"):"function"===typeof Ht.forwardRef&&(0,Ht.forwardRef)(function(a){return null}).$$typeof,bB=$A?Symbol.for("react.memo"):"function"===typeof Ht.memo&&(0,Ht.memo)(function(a){return null}).$$typeof,EF={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};wk.displayName="Observer";V(22);V(22);V(22);(function(a){a||=un;Fc({reactionScheduler:a})})(yF.unstable_batchedUpdates);
var FF=vf(V(22)),Lx=V(586),up=FF.forwardRef(function(a,d){var {children:l,opacity:H,centered:Y,className:ka=""}=a,oa=If(a,["children","opacity","centered","className"]);return(0,Lx.jsx)(wk,{children:()=>(0,Lx.jsx)("div",{ref:d,className:`tl-positioned-div ${ka}`,style:H?{opacity:H}:void 0,draggable:!1,children:(0,Lx.jsx)("div",qf(ne({className:`tl-positioned-inner ${Y?"tl-centered":""}`},oa),{children:l}))})})}),GF=vf(V(22)),Mx=V(586),vp=GF.forwardRef(function(a,d){var {id:l,className:H="",style:Y,
children:ka}=a,oa=If(a,["id","className","style","children"]);return(0,Mx.jsx)(wk,{children:()=>(0,Mx.jsx)("svg",{ref:d,style:Y,className:`tl-positioned-svg ${H}`,children:(0,Mx.jsx)("g",qf(ne({id:l,className:"tl-centered-g"},oa),{children:ka}))})})}),Eu=vf(V(22)),cB=vf(V(22)),Vv=vf(V(22)),HF=V(586),Jr=gf(function(a){var {id:d,bounds:l,zIndex:H,rotation:Y=0,className:ka="",children:oa}=a;a=If(a,"id bounds zIndex rotation className children".split(" "));const Fa=Vv.useRef(null);Vv.useLayoutEffect(()=>
{Fa.current.style.transform=`translate(
        calc(${l.minX}px - var(--tl-padding)),
        calc(${l.minY}px - var(--tl-padding)))
        rotate(${Y+(l.rotation||0)}rad)`},[l.minX,l.minY,Y,l.rotation]);Vv.useLayoutEffect(()=>{const Qa=Fa.current;Qa.style.width=`calc(${Math.floor(l.width)}px + (var(--tl-padding) * 2))`;Qa.style.height=`calc(${Math.floor(l.height)}px + (var(--tl-padding) * 2))`},[l.width,l.height]);Vv.useLayoutEffect(()=>{const Qa=Fa.current;void 0!==H&&(Qa.style.zIndex=H.toString())},[H]);return(0,HF.jsx)("div",qf(ne({id:d,ref:Fa,className:`tl-positioned ${ka}`,"aria-label":"container"},a),{children:oa}))}),
IF=vf(V(22)),dB=V(586),JF=gf(function({shapes:a,hidden:d,bounds:l,rotation:H=0}){const {components:{ContextBar:Y},viewport:{bounds:ka,camera:{point:[oa,Fa],zoom:Qa}}}=ph(),Wa=IF.useRef(null);var db=Af.getRotatedBounds(l,H);db=Af.multiplyBounds(db,Qa);Dl(Wa,l,H,10005);if(!Y)throw Error("Expected a ContextBar component.");const jb=Af.translateBounds(db,[oa*Qa,Fa*Qa]);return(0,dB.jsx)("div",{ref:Wa,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,dB.jsx)(Y,{hidden:d,shapes:a,bounds:l,offsets:{left:jb.minX,right:ka.width-jb.maxX,top:jb.minY,bottom:ka.height-jb.maxY,width:jb.width,height:jb.height},scaledBounds:db,rotation:H})})}),eB=vf(V(22)),KF=V(586),fB=gf(function({children:a}){const d=eB.useRef(null),{viewport:l}=ph(),H=d.current,{zoom:Y,point:ka}=l.camera;eB.useEffect(()=>{H&&(H.style.transform=`scale(${Y}) translate3d(${ka[0]}px, ${ka[1]}px, 0)`)},[Y,ka,H]);return(0,KF.jsx)("div",{ref:d,className:"tl-absolute tl-layer",children:a})}),
Wv=V(586),gB=gf(function({shape:a,isHovered:d=!1,isSelected:l=!1,isBinding:H=!1,isEditing:Y=!1,isLocked:ka=!1,meta:oa}){const {bounds:Fa,props:{scale:Qa,rotation:Wa=0},ReactIndicator:db}=a;return(0,Wv.jsx)(Jr,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:Fa,rotation:Wa,scale:Qa,zIndex:Y?1E3:1E4,children:(0,Wv.jsx)(vp,{children:(0,Wv.jsx)("g",{className:`tl-indicator-container ${l?"tl-selected":"tl-hovered"} ${ka?"tl-locked":""}`,children:(0,Wv.jsx)(db,{isEditing:Y,isBinding:H,isHovered:d,
isLocked:ka,isSelected:l,isErasing:!1,meta:oa})})})})}),hB=vf(V(22)),Xv=V(586),LF=gf(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:l}},components:{QuickLinks:H}}=ph();var Y=ff();const ka=wm(d);if(!H)throw Error("Expected a QuickLinks component.");Y=50>a.height*l||!Y.selectedShapesArray.includes(d);return(0,Xv.jsx)(Jr,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,Xv.jsx)(up,{children:(0,Xv.jsx)("span",qf(ne({style:{position:"absolute",top:"100%",
pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},ka),{onPointerDown:oa=>oa.stopPropagation(),children:(0,Xv.jsx)(H,{className:"tl-backlinks-count "+(Y?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})}),Yv=V(586),MF=gf(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:l}},components:{BacklinksCount:H}}=ph();var Y=ff();if(!H)throw Error("Expected a BacklinksCount component.");const ka=oa=>oa.stopPropagation();Y=50>
a.height*l||!Y.selectedShapesArray.includes(d)||d.hideSelection;return(0,Yv.jsx)(Jr,{bounds:a,className:"tl-backlinks-count-container",children:(0,Yv.jsx)(up,{children:(0,Yv.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:ka,onWheelCapture:ka,onKeyDown:ka,title:"Shape Backlinks",children:(0,Yv.jsx)(H,{className:"tl-backlinks-count "+(Y?"tl-backlinks-count-rounded":""),id:d.id,shape:d})})})})}),
NF=vf(V(22)),iB=V(586),OF=gf(function({bounds:a,hidden:d,shapes:l,rotation:H=0,detail:Y="size"}){const {components:{SelectionDetail:ka},viewport:{camera:{zoom:oa}}}=ph(),Fa=NF.useRef(null),Qa=Af.multiplyBounds(a,oa);Dl(Fa,a,H,10003);if(!ka)throw Error("Expected a SelectionDetail component.");return(0,iB.jsx)("div",{ref:Fa,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,iB.jsx)(ka,{shapes:l,bounds:a,
scaledBounds:Qa,zoom:oa,rotation:H,detail:Y})})}),jB=V(586),PF=gf(function({shape:a,isHovered:d=!1,isSelected:l=!1,isBinding:H=!1,isErasing:Y=!1,isEditing:ka=!1,onEditingEnd:oa,asset:Fa,meta:Qa,zIndex:Wa}){const {bounds:db,props:{rotation:jb,scale:Mb},ReactComponent:Ub}=a,Nb=ff(),lc=wm(a);var xc=Nb.getParentGroup(a);xc=Nb.selectedIds.has(null==xc?void 0:xc.id);return(0,jB.jsx)(Jr,{"data-shape-id":a.id,"data-html2canvas-ignore":!l&&!xc&&0!==Nb.selectedShapes.size||null,zIndex:Wa,"data-type":"Shape",
bounds:db,rotation:jb,scale:Mb,children:(0,jB.jsx)(Ub,{meta:Qa,isEditing:ka,isBinding:H,isHovered:d,isSelected:l,isErasing:Y,events:lc,asset:Fa,onEditingEnd:oa})})}),It=V(586),kB=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],QF=gf(function({size:a}){const {viewport:{camera:{point:d,zoom:l}}}=ph();return(0,It.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,It.jsx)("defs",{children:kB.map(([H,Y,ka],oa)=>{ka=ka*a*l;var Fa=
d[0]*l,Qa=d[1]*l;Fa=0<Fa?Fa%ka:ka+Fa%ka;Qa=0<Qa?Qa%ka:ka+Qa%ka;H=$l(l,[H,Y],[0,1]);return(0,It.jsx)("pattern",{id:`grid-${oa}`,width:ka,height:ka,patternUnits:"userSpaceOnUse",children:!(2<H||.1>H)&&(0,It.jsx)("circle",{className:"tl-grid-dot",cx:Fa,cy:Qa,r:1.5,opacity:Math.max(0,Math.min(H,1))})},`grid-pattern-${oa}`)})}),kB.map((H,Y)=>(0,It.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${Y})`},`grid-rect-${Y}`))]})}),lB=gf(function({size:a}){return(0,It.jsx)(QF,{size:a})}),mB=V(586),nB=
gf(function({bounds:a}){const d=Zj("background");return(0,mB.jsx)(vp,qf(ne({"data-html2canvas-ignore":"true"},d),{children:(0,mB.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});V(22);var oB=V(586),pB=gf(function({scaledBounds:a,shapes:d,detail:l="size",rotation:H=0}){var Y;const ka=1===d.length?H:null!=(Y=a.rotation)?Y:0;return(0,oB.jsx)(up,{centered:!0,children:(0,oB.jsx)("div",{className:"tl-bounds-detail",style:{transform:ka<
po||ka>3*po?`rotate(${ka}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+ka}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${le.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===l?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${Xm.radiansToDegrees(Xm.clampRadians(H)).toFixed()}\xB0`})})}),Nx=V(586),RF={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",
bottom_left_corner:"tl-cursor-nesw"},Zv=gf(function({cx:a,cy:d,size:l,targetSize:H,corner:Y,isHidden:ka}){const oa=Zj(Y);return(0,Nx.jsxs)("g",qf(ne({opacity:ka?0:1},oa),{children:[(0,Nx.jsx)("rect",{className:"tl-transparent "+(ka?"":RF[Y]),"aria-label":`${Y} target`,x:a-1.25*H,y:d-1.25*H,width:2.5*H,height:2.5*H,pointerEvents:ka?"none":"all"}),(0,Nx.jsx)("rect",{className:"tl-corner-handle","aria-label":`${Y} handle`,x:a-l/2,y:d-l/2,width:l,height:l,pointerEvents:"none"})]}))}),SF=V(586),TF={top_edge:"tl-cursor-ns",
right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},$v=gf(function({x:a,y:d,width:l,height:H,targetSize:Y,edge:ka,disabled:oa,isHidden:Fa}){const Qa=Zj(ka);return(0,SF.jsx)("rect",ne({pointerEvents:Fa||oa?"none":"all",className:"tl-transparent tl-edge-handle "+(Fa?"":TF[ka]),"aria-label":`${ka} target`,opacity:Fa?0:1,x:a-Y,y:d-Y,width:Math.max(1,l+2*Y),height:Math.max(1,H+2*Y)},Qa))}),Ox=V(586);gf(function({cx:a,cy:d,size:l,targetSize:H,isHidden:Y}){const ka=Zj("rotate");
return(0,Ox.jsxs)("g",qf(ne({opacity:Y?0:1},ka),{children:[(0,Ox.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:H,pointerEvents:Y?"none":"all"}),(0,Ox.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:l/2,pointerEvents:"none"})]}))});V(22);var qB=V(586),aw=gf(function({cx:a,cy:d,targetSize:l,corner:H,isHidden:Y}){const ka=Zj(H);return(0,qB.jsx)("g",qf(ne({opacity:Y?0:1},ka),{children:(0,qB.jsx)("rect",{className:"tl-transparent",
"aria-label":`${H} target`,x:a-2.5*l,y:d-2.5*l,width:3*l,height:3*l,pointerEvents:Y?"none":"all"})}))}),Bn=V(586),rB=gf(function({bounds:a,showResizeHandles:d,showRotateHandles:l,shapes:H}){var Y,ka;const oa=ff();let {width:Fa,height:Qa}=a;var Wa=oa.viewport.camera.zoom;a=8/Wa;Wa=6/Wa;const db=1===H.length?H[0].canResize:[!0,!0],jb=null!=(ka=null==(Y=oa.editingShape)?void 0:Y.props.borderRadius)?ka:0;return(0,Bn.jsx)(Bn.Fragment,{children:0<H.length&&(0,Bn.jsxs)(vp,{children:[!oa.editingShape&&(0,Bn.jsx)("rect",
{className:"tl-bounds-fg",width:Math.max(Fa,1),height:Math.max(Qa,1),rx:jb,ry:jb,pointerEvents:"none"}),(0,Bn.jsx)($v,{x:2*Wa,y:0,width:Fa-4*Wa,height:0,targetSize:Wa,edge:"top_edge",disabled:!db[1],isHidden:!d}),(0,Bn.jsx)($v,{x:Fa,y:2*Wa,width:0,height:Qa-4*Wa,targetSize:Wa,edge:"right_edge",disabled:!db[0],isHidden:!d}),(0,Bn.jsx)($v,{x:2*Wa,y:Qa,width:Fa-4*Wa,height:0,targetSize:Wa,edge:"bottom_edge",disabled:!db[1],isHidden:!d}),(0,Bn.jsx)($v,{x:0,y:2*Wa,width:0,height:Qa-4*Wa,targetSize:Wa,
edge:"left_edge",disabled:!db[0],isHidden:!d}),(0,Bn.jsx)(aw,{cx:0,cy:0,targetSize:Wa,corner:"top_left_resize_corner",isHidden:!l}),(0,Bn.jsx)(aw,{cx:Fa+2*Wa,cy:0,targetSize:Wa,corner:"top_right_resize_corner",isHidden:!l}),(0,Bn.jsx)(aw,{cx:Fa+2*Wa,cy:Qa+2*Wa,targetSize:Wa,corner:"bottom_right_resize_corner",isHidden:!l}),(0,Bn.jsx)(aw,{cx:0,cy:Qa+2*Wa,targetSize:Wa,corner:"bottom_left_resize_corner",isHidden:!l}),(null==db?void 0:db.every(Mb=>Mb))&&(0,Bn.jsxs)(Bn.Fragment,{children:[(0,Bn.jsx)(Zv,
{cx:0,cy:0,size:a,targetSize:Wa,corner:"top_left_corner",isHidden:!d}),(0,Bn.jsx)(Zv,{cx:Fa,cy:0,size:a,targetSize:Wa,corner:"top_right_corner",isHidden:!d}),(0,Bn.jsx)(Zv,{cx:Fa,cy:Qa,size:a,targetSize:Wa,corner:"bottom_right_corner",isHidden:!d}),(0,Bn.jsx)(Zv,{cx:0,cy:Qa,size:a,targetSize:Wa,corner:"bottom_left_corner",isHidden:!d})]})]})})}),Px=V(586),sB=gf(function({bounds:a}){return(0,Px.jsx)(Jr,{bounds:a,zIndex:10001,children:(0,Px.jsx)(vp,{children:(0,Px.jsx)("rect",{className:"tl-brush",
x:0,y:0,width:a.width,height:a.height})})})}),tB=V(586);gf(function(){return(0,tB.jsx)(tB.Fragment,{})});var Qx=V(586),uB=gf(function({shape:a,handle:d,id:l}){a=sn(a,l);const [H,Y]=d.point;return(0,Qx.jsxs)("g",qf(ne({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${H}, ${Y})`,children:[(0,Qx.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,Qx.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),vB=vf(V(22)),Rx=V(586),Sx=gf(function({direction:a}){const {viewport:{bounds:d}}=
ph(),l=vB.useRef(null);vB.useLayoutEffect(()=>{const H=l.current;if(H){var Y=[d.width/2,d.height/2],ka=Af.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[oa,Fa]]of ka)ka=r(Y,a,oa,Fa),ka.didIntersect&&(ka=ka.points[0],H.style.transform=`translate(${ka[0]-6}px,${ka[1]-6}px) rotate(${le.toAngle(a)}rad)`)}},[a,d]);return(0,Rx.jsx)("div",{ref:l,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,Rx.jsx)("svg",{height:12,width:12,children:(0,Rx.jsx)("polygon",
{points:"0,0 12,6 0,12"})})})}),Ll=V(586),UF=gf(function({id:a,className:d,brush:l,shapes:H,assets:Y,bindingShapes:ka,editingShape:oa,hoveredShape:Fa,hoveredGroup:Qa,selectionBounds:Wa,selectedShapes:db,erasingShapes:jb,selectionDirectionHint:Mb,cursor:Ub="default",cursorRotation:Nb=0,selectionRotation:lc=0,showSelection:xc=!0,showHandles:$b=!0,showSelectionRotation:nc=!1,showResizeHandles:jc=!0,showRotateHandles:Ic=!0,showSelectionDetail:Jc=!0,showContextBar:Gd=!0,showGrid:Xd=!0,gridSize:Re=8,onEditingEnd:me=
NE,theme:Le=Rq,children:Bf}){var Ue;const df=Eu.useRef(null),{viewport:Ud,components:pd,meta:ld}=ph(),qd=ff(),ie=Eu.useCallback(Kf=>{qd.inputs.updateContainerOffset([Kf.minX,Kf.minY])},[]);tk(Le,a);bn(df);Rk(df,Ud,ie);uj(df);kk();tn(df,Ub,Nb);Ck(df);wn(df);a=sg();const mf=(Ub=1===(null==db?void 0:db.length)&&db[0])&&"handles"in Ub.props?null==db?void 0:db[0]:void 0,sf=Eu.useMemo(()=>new Set(db||[]),[db]),$f=Eu.useMemo(()=>new Set(jb||[]),[jb]);Ub=1===(null==db?void 0:db.length)?db[0]:void 0;Qa=[...(new Set([Qa,
Fa]))].filter(gg);return(0,Ll.jsxs)("div",{ref:df,className:`tl-container ${null!=d?d:""}`,children:[(0,Ll.jsxs)("div",qf(ne({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[Xd&&pd.Grid&&(0,Ll.jsx)(pd.Grid,{size:Re}),(0,Ll.jsxs)(fB,{children:[pd.SelectionBackground&&db&&Wa&&xc&&(0,Ll.jsx)(Jr,{"data-type":"SelectionBackground",bounds:Wa,zIndex:2,"data-html2canvas-ignore":"true",children:(0,Ll.jsx)(pd.SelectionBackground,{shapes:db,bounds:Wa,showResizeHandles:jc,showRotateHandles:Ic})}),
H&&H.map((Kf,Xf)=>(0,Ll.jsx)(PF,{shape:Kf,asset:Y&&Kf.props.assetId?Y[Kf.props.assetId]:void 0,isEditing:Kf===oa,isHovered:Kf===Fa,isBinding:null==ka?void 0:ka.includes(Kf),isSelected:sf.has(Kf),isErasing:$f.has(Kf),meta:ld,zIndex:1E3+Xf,onEditingEnd:me},"shape_"+Kf.id)),!qd.isIn("select.pinching")&&(null==db?void 0:db.map(Kf=>(0,Ll.jsx)(gB,{shape:Kf,isEditing:Kf===oa,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:Kf.props.isLocked},"selected_indicator_"+Kf.id))),Qa.map(Kf=>Kf!==oa&&(0,Ll.jsx)(gB,
{shape:Kf},"hovered_indicator_"+Kf.id)),Ub&&pd.BacklinksCount&&(0,Ll.jsx)(MF,{hidden:!1,bounds:Ub.bounds,shape:Ub}),Fa&&Fa!==Ub&&pd.QuickLinks&&(0,Ll.jsx)(LF,{hidden:!1,bounds:Fa.bounds,shape:Fa}),l&&pd.Brush&&(0,Ll.jsx)(pd.Brush,{bounds:l}),db&&Wa&&(0,Ll.jsxs)(Ll.Fragment,{children:[xc&&pd.SelectionForeground&&(0,Ll.jsx)(Jr,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:Wa,zIndex:oa&&db.includes(oa)?1002:10002,children:(0,Ll.jsx)(pd.SelectionForeground,{shapes:db.filter(Kf=>
!Kf.props.isLocked),bounds:Wa,showResizeHandles:jc,showRotateHandles:Ic})}),$b&&mf&&pd.Handle&&(0,Ll.jsx)(Jr,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:Wa,zIndex:10003,children:(0,Ll.jsx)(vp,{children:Object.entries(null!=(Ue=mf.props.handles)?Ue:{}).map(([Kf,Xf])=>Eu.createElement(pd.Handle,{key:`${Xf.id}_handle_${Xf.id}`,shape:mf,handle:Xf,id:Kf}))})}),db&&pd.SelectionDetail&&(0,Ll.jsx)(OF,{"data-html2canvas-ignore":"true",shapes:db,bounds:Wa,detail:nc?"rotation":
"size",hidden:!Jc,rotation:lc},"detail"+db.map(Kf=>Kf.id).join(""))]})]}),Mb&&Wa&&db&&(0,Ll.jsx)(Sx,{direction:Mb,bounds:Wa,shapes:db}),(0,Ll.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,Ll.jsx)(fB,{children:db&&Wa&&(0,Ll.jsx)(Ll.Fragment,{children:db&&pd.ContextBar&&(0,Ll.jsx)(JF,{shapes:db.filter(Kf=>!Kf.props.isLocked),hidden:!Gd,bounds:Ub?Ub.bounds:Wa,rotation:Ub?Ub.props.rotation:0},"context"+db.map(Kf=>Kf.id).join(""))})}),Bf]})}),wB=vf(V(22)),xB=vf(V(22)),
yB=V(586);gf(function({children:a}){const d=xB.useRef(null),{viewport:l}=ph();xB.useEffect(()=>Kd(()=>{const H=d.current;if(H){var {zoom:Y,point:ka}=l.camera;H.style.transform=`scale(${Y}) translateX(${ka[0]}px) translateY(${ka[1]}px)`}}),[]);return(0,yB.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,yB.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});var VF=V(586),WF=gf(function(a){const d=Yn(a),l=uk(a.id);Tk(d,a);gl(d,a);return(0,VF.jsx)(l.Provider,{value:d,
children:a.children})}),XF=V(586),YF=gf(function({id:a="noid",viewport:d,inputs:l,callbacks:H=Rq,meta:Y=Rq,components:ka=Rq,children:oa}){const [Fa,Qa]=wB.useState(()=>{const {Brush:db,ContextBar:jb,DirectionIndicator:Mb,Grid:Ub,Handle:Nb,SelectionBackground:lc,SelectionDetail:xc,SelectionForeground:$b}=ka,nc=If(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:a,viewport:d,inputs:l,callbacks:H,meta:Y,components:qf(ne({},
nc),{Brush:null===db?void 0:sB,ContextBar:jb,DirectionIndicator:null===Mb?void 0:Sx,Grid:null===Ub?void 0:lB,Handle:null===Nb?void 0:uB,SelectionBackground:null===lc?void 0:nB,SelectionDetail:null===xc?void 0:pB,SelectionForeground:null===$b?void 0:rB})}});wB.useLayoutEffect(()=>{const {Brush:db,ContextBar:jb,DirectionIndicator:Mb,Grid:Ub,Handle:Nb,SelectionBackground:lc,SelectionDetail:xc,SelectionForeground:$b}=ka,nc=If(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));
return Kd(()=>{Qa({id:a,viewport:d,inputs:l,callbacks:H,meta:Y,components:qf(ne({},nc),{Brush:null===db?void 0:sB,ContextBar:jb,DirectionIndicator:null===Mb?void 0:Sx,Grid:null===Ub?void 0:lB,Handle:null===Nb?void 0:uB,SelectionBackground:null===lc?void 0:nB,SelectionDetail:null===xc?void 0:pB,SelectionForeground:null===$b?void 0:rB})})})},[]);const Wa=an(a);return(0,XF.jsx)(Wa.Provider,{value:Fa,children:oa})}),zB=V(586),ZF=V(586),$F=gf(function(a){const d=ff();return(0,ZF.jsx)(Eg,ne({viewport:d.viewport,
inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,
showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},a))});V(586);var Jt=vf(V(22)),Fu=vf(V(22)),aG=V(586),bG="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),
Yh=a=>{var {name:d,className:l}=a;a=If(a,["name","className"]);const H=bG.includes(d)?"tie tie-":"ti ti-";return(0,aG.jsx)("i",ne({className:[H+d,l].join(" ")},a))},Ah=V(22),cG=V(22),Js=V(22),Lo=V(22),Tx=V(22),dG=V(31),Rn=V(22),zq=(0,Rn.forwardRef)((a,d)=>{var {children:l}=a;a=If(a,["children"]);const H=Rn.Children.toArray(l),Y=H.find(yg);if(Y){const ka=Y.props.children;l=H.map(oa=>oa===Y?1<Rn.Children.count(ka)?Rn.Children.only(null):(0,Rn.isValidElement)(ka)?ka.props.children:null:oa);return(0,Rn.createElement)(Ux,
Ye({},a,{ref:d}),(0,Rn.isValidElement)(ka)?(0,Rn.cloneElement)(ka,void 0,l):null)}return(0,Rn.createElement)(Ux,Ye({},a,{ref:d}),l)});zq.displayName="Slot";var Ux=(0,Rn.forwardRef)((a,d)=>{const {children:l}=a;a=If(a,["children"]);return(0,Rn.isValidElement)(l)?(0,Rn.cloneElement)(l,qf(ne({},Hj(a,l.props)),{ref:Pg(d,l.ref)})):1<Rn.Children.count(l)?Rn.Children.only(null):null});Ux.displayName="SlotClone";var AB=({children:a})=>(0,Rn.createElement)(Rn.Fragment,null,a),Tl="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,
d)=>{const l=(0,Tx.forwardRef)((H,Y)=>{var {asChild:ka}=H;H=If(H,["asChild"]);ka=ka?zq:d;(0,Tx.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Tx.createElement)(ka,Ye({},H,{ref:Y}))});l.displayName=`Primitive.${d}`;return qf(ne({},a),{[d]:l})},{}),Vx=V(22),eG=V(22),BB,fG=(0,Lo.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wx=(0,Lo.forwardRef)((a,d)=>{var l;const {disableOutsidePointerEvents:H=!1,onEscapeKeyDown:Y,onPointerDownOutside:ka,
onFocusOutside:oa,onInteractOutside:Fa,onDismiss:Qa}=a,Wa=If(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),db=(0,Lo.useContext)(fG),[jb,Mb]=(0,Lo.useState)(null),Ub=null!==(l=null===jb||void 0===jb?void 0:jb.ownerDocument)&&void 0!==l?l:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Nb]=(0,Lo.useState)({});d=lh(d,jc=>Mb(jc));l=Array.from(db.layers);var [lc]=[...db.layersWithOutsidePointerEventsDisabled].slice(-1);
lc=l.indexOf(lc);const xc=jb?l.indexOf(jb):-1;l=0<db.layersWithOutsidePointerEventsDisabled.size;const $b=xc>=lc;lc=ak(jc=>{const Ic=jc.target,Jc=[...db.branches].some(Gd=>Gd.contains(Ic));$b&&!Jc&&(null===ka||void 0===ka||ka(jc),null===Fa||void 0===Fa||Fa(jc),jc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Ub);const nc=bm(jc=>{const Ic=jc.target;[...db.branches].some(Jc=>Jc.contains(Ic))||(null===oa||void 0===oa||oa(jc),null===Fa||void 0===Fa||Fa(jc),jc.defaultPrevented||null===Qa||void 0===
Qa||Qa())},Ub);Ek(jc=>{xc===db.layers.size-1&&(null===Y||void 0===Y||Y(jc),!jc.defaultPrevented&&Qa&&(jc.preventDefault(),Qa()))},Ub);(0,Lo.useEffect)(()=>{if(jb)return H&&(0===db.layersWithOutsidePointerEventsDisabled.size&&(BB=Ub.body.style.pointerEvents,Ub.body.style.pointerEvents="none"),db.layersWithOutsidePointerEventsDisabled.add(jb)),db.layers.add(jb),fl(),()=>{H&&1===db.layersWithOutsidePointerEventsDisabled.size&&(Ub.body.style.pointerEvents=BB)}},[jb,Ub,H,db]);(0,Lo.useEffect)(()=>()=>
{jb&&(db.layers.delete(jb),db.layersWithOutsidePointerEventsDisabled.delete(jb),fl())},[jb,db]);(0,Lo.useEffect)(()=>{const jc=()=>Nb({});document.addEventListener("dismissableLayer.update",jc);return()=>document.removeEventListener("dismissableLayer.update",jc)},[]);return(0,Lo.createElement)(Tl.div,Ye({},Wa,{ref:d,style:ne({pointerEvents:l?$b?"auto":"none":void 0},a.style),onFocusCapture:Uf(a.onFocusCapture,nc.onFocusCapture),onBlurCapture:Uf(a.onBlurCapture,nc.onBlurCapture),onPointerDownCapture:Uf(a.onPointerDownCapture,
lc.onPointerDownCapture)}))}),CB=vf(V(22)),gG=V(22),Cn=(null===globalThis||void 0===globalThis?0:globalThis.document)?gG.useLayoutEffect:()=>{},hG=CB["useId".toString()]||(()=>{}),iG=0,Rm=V(22),jG=(a,d,l)=>yi(void 0,null,function*(){const {placement:H="bottom",strategy:Y="absolute",middleware:ka=[],platform:oa}=l,Fa=yield null==oa.isRTL?void 0:oa.isRTL(d);let Qa=yield oa.getElementRects({reference:a,floating:d,strategy:Y}),{x:Wa,y:db}=El(Qa,H,Fa),jb=H,Mb={},Ub=0;for(let Nb=0;Nb<ka.length;Nb++){const {name:lc,
fn:xc}=ka[Nb],{x:$b,y:nc,data:jc,reset:Ic}=yield xc({x:Wa,y:db,initialPlacement:H,placement:jb,strategy:Y,middlewareData:Mb,rects:Qa,platform:oa,elements:{reference:a,floating:d}});Wa=null!=$b?$b:Wa;db=null!=nc?nc:db;Mb=qf(ne({},Mb),{[lc]:ne(ne({},Mb[lc]),jc)});Ic&&50>=Ub&&(Ub++,"object"==typeof Ic&&(Ic.placement&&(jb=Ic.placement),Ic.rects&&(Qa=!0===Ic.rects?yield oa.getElementRects({reference:a,floating:d,strategy:Y}):Ic.rects),{x:Wa,y:db}=El(Qa,jb,Fa)),Nb=-1)}return{x:Wa,y:db,placement:jb,strategy:Y,
middlewareData:Mb}}),Xx=Math.min,Wq=Math.max,DB=a=>({name:"arrow",options:a,fn(d){return yi(this,null,function*(){const {element:l,padding:H=0}=null!=a?a:{},{x:Y,y:ka,placement:oa,rects:Fa,platform:Qa}=d;if(null==l)return{};const Wa=Zn(H),db={x:Y,y:ka},jb=il(oa),Mb=oa.split("-")[1],Ub=Fk(jb);var Nb=yield Qa.getDimensions(l);const lc="y"===jb?"top":"left",xc="y"===jb?"bottom":"right";var $b=Fa.reference[Ub]+Fa.reference[jb]-db[jb]-Fa.floating[Ub];const nc=db[jb]-Fa.reference[jb];var jc=yield null==
Qa.getOffsetParent?void 0:Qa.getOffsetParent(l);let Ic=jc?"y"===jb?jc.clientHeight||0:jc.clientWidth||0:0;0===Ic&&(Ic=Fa.floating[Ub]);jc=Wa[lc];const Jc=Ic-Nb[Ub]-Wa[xc];Nb=Ic/2-Nb[Ub]/2+($b/2-nc/2);$b=Wq(jc,Xx(Nb,Jc));return{[jb]:db[jb]-(0<("start"===Mb?Wa[lc]:Wa[xc])&&Nb!==$b&&Fa.reference[Ub]<=Fa.floating[Ub]?Nb<jc?jc-Nb:Jc-Nb:0),data:{[jb]:$b,centerOffset:Nb-$b}}})}}),kG={left:"right",right:"left",bottom:"top",top:"bottom"},lG={start:"end",end:"start"},EB=["top","right","bottom","left"];EB.reduce((a,
d)=>a.concat(d,d+"-start",d+"-end"),[]);var FB=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return yi(this,null,function*(){var l;const {placement:H,middlewareData:Y,rects:ka,initialPlacement:oa,platform:Fa,elements:Qa}=d;var Wa=a;const {mainAxis:db=!0,crossAxis:jb=!0,fallbackPlacements:Mb,fallbackStrategy:Ub="bestFit",flipAlignment:Nb=!0}=Wa;Wa=If(Wa,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const lc=bj(H);var xc=Mb||(lc!==oa&&Nb?function(Gd){const Xd=
en(Gd);return[Gk(Gd),Xd,Gk(Xd)]}(oa):[en(oa)]);xc=[oa,...xc];const $b=yield tm(d,Wa),nc=[];Wa=(null==(l=Y.flip)?void 0:l.overflows)||[];if(db&&nc.push($b[lc]),jb){const {main:Gd,cross:Xd}=dm(H,ka,yield null==Fa.isRTL?void 0:Fa.isRTL(Qa.floating));nc.push($b[Gd],$b[Xd])}if(Wa=[...Wa,{placement:H,overflows:nc}],!nc.every(Gd=>0>=Gd)){var jc,Ic;l=(null!=(jc=null==(Ic=Y.flip)?void 0:Ic.index)?jc:0)+1;if(jc=xc[l])return{data:{index:l,overflows:Wa},reset:{placement:jc}};jc="bottom";switch(Ub){case "bestFit":var Jc;
(Ic=null==(Jc=Wa.map(Gd=>[Gd,Gd.overflows.filter(Xd=>0<Xd).reduce((Xd,Re)=>Xd+Re,0)]).sort((Gd,Xd)=>Gd[1]-Xd[1])[0])?void 0:Jc[0].placement)&&(jc=Ic);break;case "initialPlacement":jc=oa}if(H!==jc)return{reset:{placement:jc}}}return{}})}}},GB=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,l=If(a,["strategy"]);return{name:"hide",fn(H){return yi(this,null,function*(){var {rects:Y}=H;switch(d){case "referenceHidden":return Y=Sl(yield tm(H,qf(ne({},l),{elementContext:"reference"})),
Y.reference),{data:{referenceHiddenOffsets:Y,referenceHidden:ll(Y)}};case "escaped":return Y=Sl(yield tm(H,qf(ne({},l),{altBoundary:!0})),Y.floating),{data:{escapedOffsets:Y,escaped:ll(Y)}};default:return{}}})}}},HB=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return yi(this,null,function*(){const {x:l,y:H}=d,Y=yield function(ka,oa){return yi(this,null,function*(){const {placement:Fa,platform:Qa,elements:Wa}=ka;var db=yield null==Qa.isRTL?void 0:Qa.isRTL(Wa.floating),jb=bj(Fa);
const Mb=Fa.split("-")[1],Ub="x"===il(Fa);jb=["left","top"].includes(jb)?-1:1;db=db&&Ub?-1:1;const Nb="function"==typeof oa?oa(ka):oa;let {mainAxis:lc,crossAxis:xc,alignmentAxis:$b}="number"==typeof Nb?{mainAxis:Nb,crossAxis:0,alignmentAxis:null}:ne({mainAxis:0,crossAxis:0,alignmentAxis:null},Nb);return Mb&&"number"==typeof $b&&(xc="end"===Mb?-1*$b:$b),Ub?{x:xc*db,y:lc*jb}:{x:lc*jb,y:xc*db}})}(d,a);return{x:l+Y.x,y:H+Y.y,data:Y}})}}},IB=function(a){return void 0===a&&(a={}),{name:"shift",options:a,
fn(d){return yi(this,null,function*(){const {x:l,y:H,placement:Y}=d;var ka=a;const {mainAxis:oa=!0,crossAxis:Fa=!1,limiter:Qa={fn:Ub=>{let {x:Nb,y:lc}=Ub;return{x:Nb,y:lc}}}}=ka;var Wa=If(ka,["mainAxis","crossAxis","limiter"]);ka={x:l,y:H};Wa=yield tm(d,Wa);const db=il(bj(Y)),jb="x"===db?"y":"x";let Mb=ka[db];ka=ka[jb];oa&&(Mb=Wq(Mb+Wa["y"===db?"top":"left"],Xx(Mb,Mb-Wa["y"===db?"bottom":"right"])));Fa&&(ka=Wq(ka+Wa["y"===jb?"top":"left"],Xx(ka,ka-Wa["y"===jb?"bottom":"right"])));ka=Qa.fn(qf(ne({},
d),{[db]:Mb,[jb]:ka}));return qf(ne({},ka),{data:{x:ka.x-l,y:ka.y-H}})})}}},JB=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:l,y:H,placement:Y,rects:ka,middlewareData:oa}=d,{offset:Fa=0,mainAxis:Qa=!0,crossAxis:Wa=!0}=a;var db={x:l,y:H};d=il(Y);const jb="x"===d?"y":"x";let Mb=db[d];db=db[jb];var Ub="function"==typeof Fa?Fa(qf(ne({},ka),{placement:Y})):Fa;Ub="number"==typeof Ub?{mainAxis:Ub,crossAxis:0}:ne({mainAxis:0,crossAxis:0},Ub);if(Qa){var Nb="y"===d?"height":"width",lc=ka.reference[d]-
ka.floating[Nb]+Ub.mainAxis;Nb=ka.reference[d]+ka.reference[Nb]-Ub.mainAxis;Mb<lc?Mb=lc:Mb>Nb&&(Mb=Nb)}if(Wa){var xc,$b,nc,jc;const Ic="y"===d?"width":"height";lc=["top","left"].includes(bj(Y));Nb=ka.reference[jb]-ka.floating[Ic]+(lc&&null!=(xc=null==($b=oa.offset)?void 0:$b[jb])?xc:0)+(lc?0:Ub.crossAxis);xc=ka.reference[jb]+ka.reference[Ic]+(lc?0:null!=(nc=null==(jc=oa.offset)?void 0:jc[jb])?nc:0)-(lc?Ub.crossAxis:0);db<Nb?db=Nb:db>xc&&(db=xc)}return{[d]:Mb,[jb]:db}}}},mG=function(a){return void 0===
a&&(a={}),{name:"size",options:a,fn(d){return yi(this,null,function*(){const {placement:l,rects:H,platform:Y,elements:ka}=d;var oa=a,{apply:Fa}=oa;oa=If(oa,["apply"]);oa=yield tm(d,oa);var Qa=bj(l),Wa=l.split("-")[1],db,jb;"top"===Qa||"bottom"===Qa?(db=Qa,jb=Wa===((yield null==Y.isRTL?void 0:Y.isRTL(ka.floating))?"start":"end")?"left":"right"):(jb=Qa,db="end"===Wa?"top":"bottom");Qa=Wq(oa.left,0);Wa=Wq(oa.right,0);const Mb=Wq(oa.top,0),Ub=Wq(oa.bottom,0);jb={availableHeight:H.floating.height-(["left",
"right"].includes(l)?2*(0!==Mb||0!==Ub?Mb+Ub:Wq(oa.top,oa.bottom)):oa[db]),availableWidth:H.floating.width-(["top","bottom"].includes(l)?2*(0!==Qa||0!==Wa?Qa+Wa:Wq(oa.left,oa.right)):oa[jb])};db=yield Y.getDimensions(ka.floating);null==Fa||Fa(ne(ne({},d),jb));Fa=yield Y.getDimensions(ka.floating);return db.width!==Fa.width||db.height!==Fa.height?{reset:{rects:!0}}:{}})}}},KB=Math.min,Gu=Math.max,bw=Math.round,nG={getClippingRect:function(a){let {element:d,boundary:l,rootBoundary:H,strategy:Y}=a;a=
[...("clippingAncestors"===l?sm(d):[].concat(l)),H];a=a.reduce((ka,oa)=>{oa=vi(d,oa,Y);return ka.top=Gu(oa.top,ka.top),ka.right=KB(oa.right,ka.right),ka.bottom=KB(oa.bottom,ka.bottom),ka.left=Gu(oa.left,ka.left),ka},vi(d,a[0],Y));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,offsetParent:l,strategy:H}=a;var Y=Gl(l);const ka=nk(l);if(l===ka)return d;a={scrollLeft:0,scrollTop:0};var oa=0,Fa=0;(Y||!Y&&
"fixed"!==H)&&(("body"!==Rj(l)||nj(ka))&&(a=xk(l)),Gl(l))&&(Y=bk(l,!0),oa=Y.x+l.clientLeft,Fa=Y.y+l.clientTop);return qf(ne({},d),{x:d.x-a.scrollLeft+oa,y:d.y-a.scrollTop+Fa})},isElement:Vk,getDimensions:Pk,getOffsetParent:pj,getDocumentElement:nk,getElementRects:a=>{let {reference:d,floating:l,strategy:H}=a;a=pj(l);var Y=Gl(a);const ka=nk(a);var oa;if(oa=Y)oa=bk(a),oa=bw(oa.width)!==a.offsetWidth||bw(oa.height)!==a.offsetHeight;oa=bk(d,oa,"fixed"===H);let Fa={scrollLeft:0,scrollTop:0};var Qa=0,Wa=
0;if(Y||!Y&&"fixed"!==H)(("body"!==Rj(a)||nj(ka))&&(Fa=xk(a)),Gl(a))?(Y=bk(a,!0),Qa=Y.x+a.clientLeft,Wa=Y.y+a.clientTop):ka&&(Qa=ok(ka));return{reference:{x:oa.left+Fa.scrollLeft-Qa,y:oa.top+Fa.scrollTop-Wa,width:oa.width,height:oa.height},floating:qf(ne({},Pk(l)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===fm(a).direction},oG=(a,d,l)=>jG(a,d,ne({platform:nG},l)),Wo=vf(V(22),1),LB=V(22),pG=vf(V(31),1),Yx="undefined"!==typeof document?LB.useLayoutEffect:LB.useEffect,
MB=a=>{const {element:d,padding:l}=a;return{name:"arrow",options:a,fn(H){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=d.current)return DB({element:d.current,padding:l}).fn(H)}else if(d)return DB({element:d,padding:l}).fn(H);return{}}}},Zx=V(22),qG=(0,Zx.forwardRef)((a,d)=>{const {children:l,width:H=10,height:Y=5}=a,ka=If(a,["children","width","height"]);return(0,Zx.createElement)(Tl.svg,Ye({},ka,{ref:d,width:H,height:Y,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?l:
(0,Zx.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),rG=V(22),[$x,Kt]=mk("Popper"),[sG,NB]=$x("Popper"),ay=(0,Rm.forwardRef)((a,d)=>{const {__scopePopper:l,virtualRef:H}=a;a=If(a,["__scopePopper","virtualRef"]);const Y=NB("PopperAnchor",l),ka=(0,Rm.useRef)(null);d=lh(d,ka);(0,Rm.useEffect)(()=>{Y.onAnchorChange((null===H||void 0===H?void 0:H.current)||ka.current)});return H?null:(0,Rm.createElement)(Tl.div,Ye({},a,{ref:d}))}),[tG,uG]=$x("PopperContent"),[vG,wG]=$x("PopperContent",{hasParent:!1,
positionUpdateFns:new Set}),by=(0,Rm.forwardRef)((a,d)=>{var l,H,Y,ka,oa,Fa,Qa,Wa;const {__scopePopper:db,side:jb="bottom",sideOffset:Mb=0,align:Ub="center",alignOffset:Nb=0,arrowPadding:lc=0,collisionBoundary:xc=[],collisionPadding:$b=0,sticky:nc="partial",hideWhenDetached:jc=!1,avoidCollisions:Ic=!0}=a;a=If(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Jc=NB("PopperContent",db),[Gd,Xd]=
(0,Rm.useState)(null);d=lh(d,Ol=>Xd(Ol));const [Re,me]=(0,Rm.useState)(null);var Le=Fh(Re),Bf=null!==(l=null===Le||void 0===Le?void 0:Le.width)&&void 0!==l?l:0;l=null!==(H=null===Le||void 0===Le?void 0:Le.height)&&void 0!==H?H:0;H=jb+("center"!==Ub?"-"+Ub:"");Le="number"===typeof $b?$b:ne({top:0,right:0,bottom:0,left:0},$b);const Ue=Array.isArray(xc)?xc:[xc],df=0<Ue.length;Le={padding:Le,boundary:Ue.filter(Bg),altBoundary:df};const {reference:Ud,floating:pd,strategy:ld,x:qd,y:ie,placement:mf,middlewareData:sf,
update:$f}=jg({strategy:"fixed",placement:H,whileElementsMounted:Ri,middleware:[HB({mainAxis:Mb+l,alignmentAxis:Nb}),Ic?IB(ne({mainAxis:!0,crossAxis:!1,limiter:"partial"===nc?JB():void 0},Le)):void 0,Re?MB({element:Re,padding:lc}):void 0,Ic?FB(ne({},Le)):void 0,yG({arrowWidth:Bf,arrowHeight:l}),jc?GB({strategy:"referenceHidden"}):void 0].filter(eh)});Cn(()=>{Ud(Jc.anchor)},[Ud,Jc.anchor]);const Kf=null!==qd&&null!==ie,[Xf,Yg]=zi(mf);Bf=null===(Y=sf.arrow)||void 0===Y?void 0:Y.x;Y=null===(ka=sf.arrow)||
void 0===ka?void 0:ka.y;ka=0!==(null===(oa=sf.arrow)||void 0===oa?void 0:oa.centerOffset);const [Lf,Dh]=(0,Rm.useState)();Cn(()=>{Gd&&Dh(window.getComputedStyle(Gd).zIndex)},[Gd]);const {hasParent:vh,positionUpdateFns:sj}=wG("PopperContent",db),Mk=!vh;(0,Rm.useLayoutEffect)(()=>{if(!Mk)return sj.add($f),()=>{sj.delete($f)}},[Mk,sj,$f]);(0,Rm.useLayoutEffect)(()=>{Mk&&Kf&&Array.from(sj).reverse().forEach(Ol=>requestAnimationFrame(Ol))},[Mk,Kf,sj]);oa=qf(ne({"data-side":Xf,"data-align":Yg},a),{ref:d,
style:qf(ne({},a.style),{animation:Kf?void 0:"none",opacity:null!==(Fa=sf.hide)&&void 0!==Fa&&Fa.referenceHidden?0:void 0})});return(0,Rm.createElement)("div",{ref:pd,"data-radix-popper-content-wrapper":"",style:{position:ld,left:0,top:0,transform:Kf?`translate3d(${Math.round(qd)}px, ${Math.round(ie)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Lf,["--radix-popper-transform-origin"]:[null===(Qa=sf.transformOrigin)||void 0===Qa?void 0:Qa.x,null===(Wa=sf.transformOrigin)||void 0===
Wa?void 0:Wa.y].join(" ")}},(0,Rm.createElement)(tG,{scope:db,placedSide:Xf,onArrowChange:me,arrowX:Bf,arrowY:Y,shouldHideArrow:ka},Mk?(0,Rm.createElement)(vG,{scope:db,hasParent:!0,positionUpdateFns:sj},(0,Rm.createElement)(Tl.div,oa)):(0,Rm.createElement)(Tl.div,oa)))}),xG={top:"bottom",right:"left",bottom:"top",left:"right"},OB=(0,Rm.forwardRef)(function(a,d){var {__scopePopper:l}=a;a=If(a,["__scopePopper"]);l=uG("PopperArrow",l);return(0,Rm.createElement)("span",{ref:l.onArrowChange,style:{position:"absolute",
left:l.arrowX,top:l.arrowY,[xG[l.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0}},(0,Rm.createElement)(qG,Ye({},a,{ref:d,style:qf(ne({},a.style),{display:"block"})})))}),yG=a=>({name:"transformOrigin",options:a,fn(d){var l,
H,Y,ka,oa;const {placement:Fa,rects:Qa,middlewareData:Wa}=d,db=(d=0!==(null===(l=Wa.arrow)||void 0===l?void 0:l.centerOffset))?0:a.arrowWidth;l=d?0:a.arrowHeight;const [jb,Mb]=zi(Fa),Ub={start:"0%",center:"50%",end:"100%"}[Mb],Nb=(null!==(H=null===(Y=Wa.arrow)||void 0===Y?void 0:Y.x)&&void 0!==H?H:0)+db/2;H=(null!==(ka=null===(oa=Wa.arrow)||void 0===oa?void 0:oa.y)&&void 0!==ka?ka:0)+l/2;oa=ka="";"bottom"===jb?(ka=d?Ub:`${Nb}px`,oa=`${-l}px`):"top"===jb?(ka=d?Ub:`${Nb}px`,oa=`${Qa.floating.height+
l}px`):"right"===jb?(ka=`${-l}px`,oa=d?Ub:`${H}px`):"left"===jb&&(ka=`${Qa.floating.width+l}px`,oa=d?Ub:`${H}px`);return{data:{x:ka,y:oa}}}}),cy=a=>{const {__scopePopper:d,children:l}=a,[H,Y]=(0,Rm.useState)(null);return(0,Rm.createElement)(sG,{scope:d,anchor:H,onAnchorChange:Y},l)},PB=V(22),zG=vf(V(31)),AG=(0,PB.forwardRef)((a,d)=>{var l;const {container:H=null===globalThis||void 0===globalThis?void 0:null===(l=globalThis.document)||void 0===l?void 0:l.body}=a;a=If(a,["container"]);return H?zG.default.createPortal((0,PB.createElement)(Tl.div,
Ye({},a,{ref:d})),H):null}),Xq=V(22),BG=V(31),Hu=a=>{const {present:d,children:l}=a;a=Gg(d);const H="function"===typeof l?l({present:a.isPresent}):Xq.Children.only(l),Y=lh(a.ref,H.ref);return"function"===typeof l||a.isPresent?(0,Xq.cloneElement)(H,{ref:Y}):null};Hu.displayName="Presence";var cw=V(22),QB=V(22),CG=(0,QB.forwardRef)((a,d)=>(0,QB.createElement)(Tl.span,Ye({},a,{ref:d,style:ne({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",
whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[dw]=mk("Tooltip",[Kt]),ew=Kt(),[DG,dy]=dw("TooltipProvider"),[EG,Iu]=dw("Tooltip"),FG=(0,Ah.forwardRef)((a,d)=>{var {__scopeTooltip:l}=a;const H=If(a,["__scopeTooltip"]),Y=Iu("TooltipTrigger",l),ka=dy("TooltipTrigger",l);l=ew(l);const oa=(0,Ah.useRef)(null);d=lh(d,oa,Y.onTriggerChange);const Fa=(0,Ah.useRef)(!1),Qa=(0,Ah.useRef)(!1),Wa=(0,Ah.useCallback)(()=>Fa.current=!1,[]);(0,Ah.useEffect)(()=>()=>document.removeEventListener("pointerup",Wa),
[Wa]);return(0,Ah.createElement)(ay,Ye({asChild:!0},l),(0,Ah.createElement)(Tl.button,Ye({"aria-describedby":Y.open?Y.contentId:void 0,"data-state":Y.stateAttribute},H,{ref:d,onPointerMove:Uf(a.onPointerMove,db=>{"touch"===db.pointerType||Qa.current||ka.isPointerInTransitRef.current||(Y.onTriggerEnter(),Qa.current=!0)}),onPointerLeave:Uf(a.onPointerLeave,()=>{Y.onTriggerLeave();Qa.current=!1}),onPointerDown:Uf(a.onPointerDown,()=>{Fa.current=!0;document.addEventListener("pointerup",Wa,{once:!0})}),
onFocus:Uf(a.onFocus,()=>{if(!Fa.current)Y.onOpen()}),onBlur:Uf(a.onBlur,Y.onClose),onClick:Uf(a.onClick,Y.onClose)})))}),[GG,HG]=dw("TooltipPortal",{forceMount:void 0}),IG=(0,Ah.forwardRef)((a,d)=>{var l=HG("TooltipContent",a.__scopeTooltip);const {forceMount:H=l.forceMount,side:Y="top"}=a;l=If(a,["forceMount","side"]);a=Iu("TooltipContent",a.__scopeTooltip);return(0,Ah.createElement)(Hu,{present:H||a.open},a.disableHoverableContent?(0,Ah.createElement)(RB,Ye({side:Y},l,{ref:d})):(0,Ah.createElement)(JG,
Ye({side:Y},l,{ref:d})))}),JG=(0,Ah.forwardRef)((a,d)=>{const l=Iu("TooltipContent",a.__scopeTooltip),H=dy("TooltipContent",a.__scopeTooltip),Y=(0,Ah.useRef)(null);d=lh(d,Y);const [ka,oa]=(0,Ah.useState)(null),{trigger:Fa,onClose:Qa}=l,Wa=Y.current,{onPointerInTransitChange:db}=H,jb=(0,Ah.useCallback)(()=>{oa(null);db(!1)},[db]),Mb=(0,Ah.useCallback)((Ub,Nb)=>{const lc=Lj({x:Ub.clientX,y:Ub.clientY},Ub.currentTarget.getBoundingClientRect()),xc="right"===lc||"bottom"===lc?-5:5;Ub="right"===lc||"left"===
lc?{x:Ub.clientX+xc,y:Ub.clientY}:{x:Ub.clientX,y:Ub.clientY+xc};Nb=Nb.getBoundingClientRect();const {top:$b,right:nc,bottom:jc,left:Ic}=Nb;Nb=Qb([Ub,{x:Ic,y:$b},{x:nc,y:$b},{x:nc,y:jc},{x:Ic,y:jc}]);oa(Nb);db(!0)},[db]);(0,Ah.useEffect)(()=>()=>jb(),[jb]);(0,Ah.useEffect)(()=>{if(Fa&&Wa){const Ub=lc=>Mb(lc,Wa),Nb=lc=>Mb(lc,Fa);Fa.addEventListener("pointerleave",Ub);Wa.addEventListener("pointerleave",Nb);return()=>{Fa.removeEventListener("pointerleave",Ub);Wa.removeEventListener("pointerleave",Nb)}}},
[Fa,Wa,Mb,jb]);(0,Ah.useEffect)(()=>{if(ka){const Ub=Nb=>{var lc=Nb.target;Nb={x:Nb.clientX,y:Nb.clientY};lc=(null===Fa||void 0===Fa?void 0:Fa.contains(lc))||(null===Wa||void 0===Wa?void 0:Wa.contains(lc));const {x:xc,y:$b}=Nb;Nb=!1;for(let nc=0,jc=ka.length-1;nc<ka.length;jc=nc++){const Ic=ka[nc].x,Jc=ka[nc].y,Gd=ka[jc].x,Xd=ka[jc].y;Jc>$b!==Xd>$b&&xc<(Gd-Ic)*($b-Jc)/(Xd-Jc)+Ic&&(Nb=!Nb)}Nb=!Nb;lc?jb():Nb&&(jb(),Qa())};document.addEventListener("pointermove",Ub);return()=>document.removeEventListener("pointermove",
Ub)}},[Fa,Wa,ka,Qa,jb]);return(0,Ah.createElement)(RB,Ye({},a,{ref:d}))}),[KG,LG]=dw("Tooltip",{isInside:!1}),RB=(0,Ah.forwardRef)((a,d)=>{const {__scopeTooltip:l,children:H,"aria-label":Y,onEscapeKeyDown:ka,onPointerDownOutside:oa}=a;a=If(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Fa=Iu("TooltipContent",l),Qa=ew(l),{onClose:Wa}=Fa;(0,Ah.useEffect)(()=>{document.addEventListener("tooltip.open",Wa);return()=>document.removeEventListener("tooltip.open",
Wa)},[Wa]);(0,Ah.useEffect)(()=>{if(Fa.trigger){const db=jb=>{jb=jb.target;null!==jb&&void 0!==jb&&jb.contains(Fa.trigger)&&Wa()};window.addEventListener("scroll",db,{capture:!0});return()=>window.removeEventListener("scroll",db,{capture:!0})}},[Fa.trigger,Wa]);return(0,Ah.createElement)(Wx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ka,onPointerDownOutside:oa,onFocusOutside:db=>db.preventDefault(),onDismiss:Wa},(0,Ah.createElement)(by,Ye({"data-state":Fa.stateAttribute},Qa,a,{ref:d,
style:qf(ne({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,Ah.createElement)(AB,null,H),(0,Ah.createElement)(KG,{scope:l,isInside:!0},(0,Ah.createElement)(CG,{id:Fa.contentId,role:"tooltip"},Y||H))))}),MG=(0,Ah.forwardRef)((a,d)=>{const {__scopeTooltip:l}=a;a=If(a,["__scopeTooltip"]);const H=ew(l);return LG("TooltipArrow",l).isInside?null:(0,Ah.createElement)(OB,Ye({},H,a,{ref:d}))}),NG=a=>{const {__scopeTooltip:d,delayDuration:l=700,skipDelayDuration:H=
300,disableHoverableContent:Y=!1,children:ka}=a,[oa,Fa]=(0,Ah.useState)(!0),Qa=(0,Ah.useRef)(!1),Wa=(0,Ah.useRef)(0);(0,Ah.useEffect)(()=>{const db=Wa.current;return()=>window.clearTimeout(db)},[]);return(0,Ah.createElement)(DG,{scope:d,isOpenDelayed:oa,delayDuration:l,onOpen:(0,Ah.useCallback)(()=>{window.clearTimeout(Wa.current);Fa(!1)},[]),onClose:(0,Ah.useCallback)(()=>{window.clearTimeout(Wa.current);Wa.current=window.setTimeout(()=>Fa(!0),H)},[H]),isPointerInTransitRef:Qa,onPointerInTransitChange:(0,Ah.useCallback)(db=>
{Qa.current=db},[]),disableHoverableContent:Y},ka)},OG=a=>{const {__scopeTooltip:d,children:l,open:H,defaultOpen:Y=!1,onOpenChange:ka,disableHoverableContent:oa,delayDuration:Fa}=a,Qa=dy("Tooltip",a.__scopeTooltip);a=ew(d);const [Wa,db]=(0,Ah.useState)(null),jb=ii(),Mb=(0,Ah.useRef)(0),Ub=null!==oa&&void 0!==oa?oa:Qa.disableHoverableContent,Nb=null!==Fa&&void 0!==Fa?Fa:Qa.delayDuration,lc=(0,Ah.useRef)(!1),[xc=!1,$b]=ci({prop:H,defaultProp:Y,onChange:Gd=>{if(Gd)Qa.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));
else Qa.onClose();null===ka||void 0===ka||ka(Gd)}}),nc=(0,Ah.useMemo)(()=>xc?lc.current?"delayed-open":"instant-open":"closed",[xc]),jc=(0,Ah.useCallback)(()=>{window.clearTimeout(Mb.current);lc.current=!1;$b(!0)},[$b]),Ic=(0,Ah.useCallback)(()=>{window.clearTimeout(Mb.current);$b(!1)},[$b]),Jc=(0,Ah.useCallback)(()=>{window.clearTimeout(Mb.current);Mb.current=window.setTimeout(()=>{lc.current=!0;$b(!0)},Nb)},[Nb,$b]);(0,Ah.useEffect)(()=>()=>window.clearTimeout(Mb.current),[]);return(0,Ah.createElement)(cy,
a,(0,Ah.createElement)(EG,{scope:d,contentId:jb,open:xc,stateAttribute:nc,trigger:Wa,onTriggerChange:db,onTriggerEnter:(0,Ah.useCallback)(()=>{Qa.isOpenDelayed?Jc():jc()},[Qa.isOpenDelayed,Jc,jc]),onTriggerLeave:(0,Ah.useCallback)(()=>{Ub?Ic():window.clearTimeout(Mb.current)},[Ic,Ub]),onOpen:jc,onClose:Ic,disableHoverableContent:Ub},l))},PG=FG,QG=a=>{const {__scopeTooltip:d,forceMount:l,children:H,container:Y}=a;a=Iu("TooltipPortal",d);return(0,Ah.createElement)(GG,{scope:d,forceMount:l},(0,Ah.createElement)(Hu,
{present:l||a.open},(0,Ah.createElement)(AG,{asChild:!0,container:Y},H)))},RG=IG,SG=MG,Kr=V(586),SB=V(586),ey=V(586),TG=({style:a,icon:d,onClick:l})=>(0,ey.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:l,children:(0,ey.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,ey.jsx)(Yh,{name:d})})}),wp=V(22),oh=V(22),Aq=vf(V(22)),TB=V(22),UG=(0,TB.createContext)(void 0),VG=V(22),fy=0,Lr=V(22),UB={bubbles:!1,cancelable:!0},VB=(0,Lr.forwardRef)((a,
d)=>{const {loop:l=!1,trapped:H=!1,onMountAutoFocus:Y,onUnmountAutoFocus:ka}=a;a=If(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [oa,Fa]=(0,Lr.useState)(null),Qa=Gf(Y),Wa=Gf(ka),db=(0,Lr.useRef)(null);d=lh(d,Ub=>Fa(Ub));const jb=(0,Lr.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Lr.useEffect)(()=>{if(H){let Ub=function(lc){!jb.paused&&oa&&(lc=lc.target,oa.contains(lc)?db.current=lc:Ac(db.current,{select:!0}))},Nb=function(lc){!jb.paused&&
oa&&(oa.contains(lc.relatedTarget)||Ac(db.current,{select:!0}))};document.addEventListener("focusin",Ub);document.addEventListener("focusout",Nb);return()=>{document.removeEventListener("focusin",Ub);document.removeEventListener("focusout",Nb)}}},[H,oa,jb.paused]);(0,Lr.useEffect)(()=>{if(oa){WB.add(jb);const Ub=document.activeElement;if(!oa.contains(Ub)){const Nb=new CustomEvent("focusScope.autoFocusOnMount",UB);oa.addEventListener("focusScope.autoFocusOnMount",Qa);oa.dispatchEvent(Nb);Nb.defaultPrevented||
(Sb(Pc(rb(oa)),{select:!0}),document.activeElement===Ub&&Ac(oa))}return()=>{oa.removeEventListener("focusScope.autoFocusOnMount",Qa);setTimeout(()=>{const Nb=new CustomEvent("focusScope.autoFocusOnUnmount",UB);oa.addEventListener("focusScope.autoFocusOnUnmount",Wa);oa.dispatchEvent(Nb);Nb.defaultPrevented||Ac(null!==Ub&&void 0!==Ub?Ub:document.body,{select:!0});oa.removeEventListener("focusScope.autoFocusOnUnmount",Wa);WB.remove(jb)},0)}}},[oa,Qa,Wa,jb]);const Mb=(0,Lr.useCallback)(Ub=>{if((l||H)&&
!jb.paused){var Nb=document.activeElement;if("Tab"===Ub.key&&!Ub.altKey&&!Ub.ctrlKey&&!Ub.metaKey&&Nb){const xc=Ub.currentTarget;var lc=xc;const $b=rb(lc),nc=Pb($b,lc);lc=Pb($b.reverse(),lc);const [jc,Ic]=[nc,lc];jc&&Ic?Ub.shiftKey||Nb!==Ic?Ub.shiftKey&&Nb===jc&&(Ub.preventDefault(),l&&Ac(Ic,{select:!0})):(Ub.preventDefault(),l&&Ac(jc,{select:!0})):Nb===xc&&Ub.preventDefault()}}},[l,H,jb.paused]);return(0,Lr.createElement)(Tl.div,Ye({tabIndex:-1},a,{ref:d,onKeyDown:Mb}))}),WB=function(){let a=[];
return{add(d){const l=a[0];d===l||null!==l&&void 0!==l&&l.pause();a=Lc(a,d);a.unshift(d)},remove(d){var l;a=Lc(a,d);null===(l=a[0])||void 0===l||l.resume()}}}(),Sm=V(22),WG={bubbles:!1,cancelable:!0},[gy,XB,XG]=Bb("RovingFocusGroup"),[YG,fw]=mk("RovingFocusGroup",[XG]),[ZG,$G]=YG("RovingFocusGroup"),YB=(0,Sm.forwardRef)((a,d)=>(0,Sm.createElement)(gy.Provider,{scope:a.__scopeRovingFocusGroup},(0,Sm.createElement)(gy.Slot,{scope:a.__scopeRovingFocusGroup},(0,Sm.createElement)(aH,Ye({},a,{ref:d}))))),
aH=(0,Sm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:l,orientation:H,loop:Y=!1,dir:ka,currentTabStopId:oa,defaultCurrentTabStopId:Fa,onCurrentTabStopIdChange:Qa,onEntryFocus:Wa}=a,db=If(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),jb=(0,Sm.useRef)(null);d=lh(d,jb);const Mb=Vb(ka),[Ub=null,Nb]=ci({prop:oa,defaultProp:Fa,onChange:Qa}),[lc,xc]=(0,Sm.useState)(!1),$b=Gf(Wa),nc=XB(l),jc=(0,Sm.useRef)(!1),
[Ic,Jc]=(0,Sm.useState)(0);(0,Sm.useEffect)(()=>{const Gd=jb.current;if(Gd)return Gd.addEventListener("rovingFocusGroup.onEntryFocus",$b),()=>Gd.removeEventListener("rovingFocusGroup.onEntryFocus",$b)},[$b]);return(0,Sm.createElement)(ZG,{scope:l,orientation:H,dir:Mb,loop:Y,currentTabStopId:Ub,onItemFocus:(0,Sm.useCallback)(Gd=>Nb(Gd),[Nb]),onItemShiftTab:(0,Sm.useCallback)(()=>xc(!0),[]),onFocusableItemAdd:(0,Sm.useCallback)(()=>Jc(Gd=>Gd+1),[]),onFocusableItemRemove:(0,Sm.useCallback)(()=>Jc(Gd=>
Gd-1),[])},(0,Sm.createElement)(Tl.div,Ye({tabIndex:lc||0===Ic?-1:0,"data-orientation":H},db,{ref:d,style:ne({outline:"none"},a.style),onMouseDown:Uf(a.onMouseDown,()=>{jc.current=!0}),onFocus:Uf(a.onFocus,Gd=>{var Xd=!jc.current;if(Gd.target===Gd.currentTarget&&Xd&&!lc&&(Xd=new CustomEvent("rovingFocusGroup.onEntryFocus",WG),Gd.currentTarget.dispatchEvent(Xd),!Xd.defaultPrevented)){Gd=nc().filter(me=>me.focusable);Xd=Gd.find(me=>me.active);const Re=Gd.find(me=>me.id===Ub);Gd=[Xd,Re,...Gd].filter(Boolean).map(me=>
me.ref.current);Rd(Gd)}jc.current=!1}),onBlur:Uf(a.onBlur,()=>xc(!1))})))}),ZB=(0,Sm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:l,focusable:H=!0,active:Y=!1}=a,ka=If(a,["__scopeRovingFocusGroup","focusable","active"]),oa=ii(),Fa=$G("RovingFocusGroupItem",l),Qa=Fa.currentTabStopId===oa,Wa=XB(l),{onFocusableItemAdd:db,onFocusableItemRemove:jb}=Fa;(0,Sm.useEffect)(()=>{if(H)return db(),()=>jb()},[H,db,jb]);return(0,Sm.createElement)(gy.ItemSlot,{scope:l,id:oa,focusable:H,active:Y},(0,Sm.createElement)(Tl.span,
Ye({tabIndex:Qa?0:-1,"data-orientation":Fa.orientation},ka,{ref:d,onMouseDown:Uf(a.onMouseDown,Mb=>{if(H)Fa.onItemFocus(oa);else Mb.preventDefault()}),onFocus:Uf(a.onFocus,()=>Fa.onItemFocus(oa)),onKeyDown:Uf(a.onKeyDown,Mb=>{if("Tab"===Mb.key&&Mb.shiftKey)Fa.onItemShiftTab();else if(Mb.target===Mb.currentTarget){var Ub=sd(Mb,Fa.orientation,Fa.dir);if(void 0!==Ub){Mb.preventDefault();let Nb=Wa().filter(lc=>lc.focusable).map(lc=>lc.ref.current);if("last"===Ub)Nb.reverse();else if("prev"===Ub||"next"===
Ub)"prev"===Ub&&Nb.reverse(),Mb=Nb.indexOf(Mb.currentTarget),Nb=Fa.loop?Cd(Nb,Mb+1):Nb.slice(Mb+1);setTimeout(()=>Rd(Nb))}}})})))}),bH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},cH=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},Lt=new WeakMap,gw=new WeakMap,hw={},hy=0,iy=function(a,d,l){void 0===d&&(d=cH(a));void 0===l&&(l="data-aria-hidden");var H=Array.isArray(a)?
a:[a];hw[l]||(hw[l]=new WeakMap);var Y=hw[l],ka=[],oa=new Set,Fa=function(Wa){Wa&&!oa.has(Wa)&&(oa.add(Wa),Fa(Wa.parentNode))};H.forEach(Fa);var Qa=function(Wa){!Wa||0<=H.indexOf(Wa)||Array.prototype.forEach.call(Wa.children,function(db){if(oa.has(db))Qa(db);else{var jb=db.getAttribute("aria-hidden");jb=null!==jb&&"false"!==jb;var Mb=(Lt.get(db)||0)+1,Ub=(Y.get(db)||0)+1;Lt.set(db,Mb);Y.set(db,Ub);ka.push(db);1===Mb&&jb&&gw.set(db,!0);1===Ub&&db.setAttribute(l,"true");jb||db.setAttribute("aria-hidden",
"true")}})};Qa(d);oa.clear();hy++;return function(){ka.forEach(function(Wa){var db=Lt.get(Wa)-1,jb=Y.get(Wa)-1;Lt.set(Wa,db);Y.set(Wa,jb);db||(gw.has(Wa)||Wa.removeAttribute("aria-hidden"),gw.delete(Wa));jb||Wa.removeAttribute(l)});hy--;hy||(Lt=new WeakMap,Lt=new WeakMap,gw=new WeakMap,hw={})}},dH=vf(is(),1),{__assign:Mr,__rest:$B,__spreadArray:eH}=dH.default,aC=vf(V(22)),Yq=vf(V(22)),fH=V(22),gH=vf(V(22)),xp=function(a){var d=a.sideCar;a=$B(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");
d=d.read();if(!d)throw Error("Sidecar medium not found");return gH.createElement(d,Mr({},a))};xp.isSideCarExport=!0;var bC=function(a){void 0===a&&(a={});var d=fg(null);d.options=Mr({async:!0,ssr:!1},a);return d}(),jy=function(){},iw=Yq.forwardRef(function(a,d){var l=Yq.useRef(null),H=Yq.useState({onScrollCapture:jy,onWheelCapture:jy,onTouchMoveCapture:jy}),Y=H[0];H=H[1];var ka=a.forwardProps,oa=a.children,Fa=a.className,Qa=a.removeScrollBar,Wa=a.enabled,db=a.shards,jb=a.sideCar,Mb=a.noIsolation,
Ub=a.inert,Nb=a.allowPinchZoom,lc=a.as;lc=void 0===lc?"div":lc;a=$B(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));d=Jd([l,d]);Y=Mr(Mr({},a),Y);return Yq.createElement(Yq.Fragment,null,Wa&&Yq.createElement(jb,{sideCar:bC,removeScrollBar:Qa,shards:db,noIsolation:Mb,inert:Ub,setCallbacks:H,allowPinchZoom:!!Nb,lockRef:l}),ka?Yq.cloneElement(Yq.Children.only(oa),Mr(Mr({},Y),{ref:d})):Yq.createElement(lc,Mr({},Y,{className:Fa,
ref:d}),oa))});iw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};iw.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var Tm=vf(V(22)),On=vf(V(22)),Xo=vf(V(22)),mx=function(){var a=0,d=null;return{add:function(l){if(0==a){if(document){var H=document.createElement("style");H.type="text/css";var Y="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;Y&&H.setAttribute("nonce",Y)}else H=null;if(d=H)H=d,H.styleSheet?H.styleSheet.cssText=l:H.appendChild(document.createTextNode(l)),
l=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(l)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),d=null)}}},SD=function(){var a=mx();return function(d,l){Xo.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&l])}},zz=function(){var a=SD();return function(d){a(d.styles,d.dynamic);return null}},Az={left:0,top:0,right:0,gap:0},TD=zz(),kt=function(a,d,l,H){var Y=a.left,ka=a.top,oa=a.right;a=a.gap;void 0===l&&(l="margin");return"\n  .".concat("with-scroll-bars-hidden",
" {\n   overflow: hidden ").concat(H,";\n   padding-right: ").concat(a,"px ").concat(H,";\n  }\n  body {\n    overflow: hidden ").concat(H,";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(H,";"),"margin"===l&&"\n    padding-left: ".concat(Y,"px;\n    padding-top: ").concat(ka,"px;\n    padding-right: ").concat(oa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(H,";\n    "),"padding"===l&&"padding-right: ".concat(a,"px ").concat(H,
";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(H,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(H,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(H,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(H,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",
": ").concat(a,"px;\n  }\n")},nx=function(a){var d=a.noRelative,l=a.noImportant;a=a.gapMode;var H=void 0===a?"margin":a;a=On.useMemo(function(){var Y=H;void 0===Y&&(Y="margin");if("undefined"===typeof window)Y=Az;else{var ka=window.getComputedStyle(document.body),oa=ka["padding"===Y?"paddingTop":"marginTop"],Fa=ka["padding"===Y?"paddingRight":"marginRight"];Y=[parseInt(ka["padding"===Y?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(oa||"",10)||0,parseInt(Fa||"",10)||0];Y={left:Y[0],top:Y[1],right:Y[2],
gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+Y[2]-Y[0])}}return Y},[H]);return On.createElement(TD,{styles:kt(a,!d,H,l?"":"!important")})},ky=!1;if("undefined"!==typeof window)try{var Ju=Object.defineProperty({},"passive",{get:function(){return ky=!0}});window.addEventListener("test",Ju,Ju);window.removeEventListener("test",Ju,Ju)}catch(a){ky=!1}var Ks=ky?{passive:!1}:!1,ly=function(a,d){var l=window.getComputedStyle(a);return"hidden"!==l[d]&&!(l.overflowY===l.overflowX&&
"TEXTAREA"!==a.tagName&&"visible"===l[d])},my=function(a,d){do{"undefined"!==typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(Bz(a,d)){var l=su(a,d);if(l[1]>l[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},Bz=function(a,d){return"v"===a?ly(d,"overflowY"):ly(d,"overflowX")},su=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},tu=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:
[0,0]},ox=function(a){return a&&"current"in a?a.current:a},hH=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},iH=0,Mt=[];bC.useMedium(function(a){var d=Tm.useRef([]),l=Tm.useRef([0,0]),H=Tm.useRef(),Y=Tm.useState(iH++)[0],ka=Tm.useState(function(){return zz()})[0],oa=Tm.useRef(a);Tm.useEffect(function(){oa.current=a},[a]);Tm.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(Y));
var Nb=eH([a.lockRef.current],(a.shards||[]).map(ox),!0).filter(Boolean);Nb.forEach(function(lc){return lc.classList.add("allow-interactivity-".concat(Y))});return function(){document.body.classList.remove("block-interactivity-".concat(Y));Nb.forEach(function(lc){return lc.classList.remove("allow-interactivity-".concat(Y))})}}},[a.inert,a.lockRef.current,a.shards]);var Fa=Tm.useCallback(function(Nb,lc){if("touches"in Nb&&2===Nb.touches.length)return!oa.current.allowPinchZoom;var xc=tu(Nb),$b=l.current,
nc="deltaX"in Nb?Nb.deltaX:$b[0]-xc[0];$b="deltaY"in Nb?Nb.deltaY:$b[1]-xc[1];var jc=Nb.target,Ic=Math.abs(nc)>Math.abs($b)?"h":"v";if("touches"in Nb&&"h"===Ic&&"range"===jc.type)return!1;var Jc=my(Ic,jc);if(!Jc)return!0;Jc?xc=Ic:(xc="v"===Ic?"h":"v",Jc=my(Ic,jc));if(!Jc)return!1;!H.current&&"changedTouches"in Nb&&(nc||$b)&&(H.current=xc);if(!xc)return!0;xc=H.current||xc;$b="h"===xc?nc:$b;nc=window.getComputedStyle(lc).direction;nc="h"===xc&&"rtl"===nc?-1:1;Ic=nc*$b;Nb=Nb.target;$b=lc.contains(Nb);
jc=!1;Ic=0<Ic;var Gd=Jc=0;do{var Xd=su(xc,Nb),Re=Xd[0];Xd=Xd[1]-Xd[2]-nc*Re;(Re||Xd)&&Bz(xc,Nb)&&(Jc+=Xd,Gd+=Re);Nb=Nb.parentNode}while(!$b&&Nb!==document.body||$b&&(lc.contains(Nb)||lc===Nb));Ic&&0===Jc?jc=!0:Ic||0!==Gd||(jc=!0);return jc},[]),Qa=Tm.useCallback(function(Nb){if(Mt.length&&Mt[Mt.length-1]===ka){var lc="deltaY"in Nb?[Nb.deltaX,Nb.deltaY]:tu(Nb),xc=d.current.filter(function($b){var nc;if(nc=$b.name===Nb.type&&$b.target===Nb.target)$b=$b.delta,nc=$b[0]===lc[0]&&$b[1]===lc[1];return nc})[0];
xc&&xc.should?Nb.cancelable&&Nb.preventDefault():xc||(xc=(oa.current.shards||[]).map(ox).filter(Boolean).filter(function($b){return $b.contains(Nb.target)}),(0<xc.length?Fa(Nb,xc[0]):!oa.current.noIsolation)&&Nb.cancelable&&Nb.preventDefault())}},[]),Wa=Tm.useCallback(function(Nb,lc,xc,$b){var nc={name:Nb,delta:lc,target:xc,should:$b};d.current.push(nc);setTimeout(function(){d.current=d.current.filter(function(jc){return jc!==nc})},1)},[]),db=Tm.useCallback(function(Nb){l.current=tu(Nb);H.current=
void 0},[]),jb=Tm.useCallback(function(Nb){Wa(Nb.type,[Nb.deltaX,Nb.deltaY],Nb.target,Fa(Nb,a.lockRef.current))},[]),Mb=Tm.useCallback(function(Nb){Wa(Nb.type,tu(Nb),Nb.target,Fa(Nb,a.lockRef.current))},[]);Tm.useEffect(function(){Mt.push(ka);a.setCallbacks({onScrollCapture:jb,onWheelCapture:jb,onTouchMoveCapture:Mb});document.addEventListener("wheel",Qa,Ks);document.addEventListener("touchmove",Qa,Ks);document.addEventListener("touchstart",db,Ks);return function(){Mt=Mt.filter(function(Nb){return Nb!==
ka});document.removeEventListener("wheel",Qa,Ks);document.removeEventListener("touchmove",Qa,Ks);document.removeEventListener("touchstart",db,Ks)}},[]);var Ub=a.removeScrollBar;return Tm.createElement(Tm.Fragment,null,a.inert?Tm.createElement(ka,{styles:hH(Y)}):null,Ub?Tm.createElement(nx,{gapMode:"margin"}):null)});var Ku=aC.forwardRef(function(a,d){return aC.createElement(iw,Mr({},a,{ref:d,sideCar:xp}))});Ku.classNames=iw.classNames;var Lu=["Enter"," "],ql=["ArrowUp","PageDown","End"],Rp=["ArrowDown",
"PageUp","Home",...ql];[...Lu];[...Lu];var [Ul,Ls,Dn]=Bb("Menu"),[jn,ij]=mk("Menu",[Dn,Kt,fw]),jw=Kt(),Mu=fw(),[kw,Nt]=jn("Menu"),[cC,Nu]=jn("Menu"),xj=(0,oh.forwardRef)((a,d)=>{var {__scopeMenu:l}=a;a=If(a,["__scopeMenu"]);l=jw(l);return(0,oh.createElement)(ay,Ye({},l,a,{ref:d}))}),[,ny]=jn("MenuPortal",{forceMount:void 0}),[oy,lw]=jn("MenuContent"),Ms=(0,oh.forwardRef)((a,d)=>{var l=ny("MenuContent",a.__scopeMenu);({forceMount:l=l.forceMount}=a);const H=If(a,["forceMount"]),Y=Nt("MenuContent",a.__scopeMenu),
ka=Nu("MenuContent",a.__scopeMenu);return(0,oh.createElement)(Ul.Provider,{scope:a.__scopeMenu},(0,oh.createElement)(Hu,{present:l||Y.open},(0,oh.createElement)(Ul.Slot,{scope:a.__scopeMenu},ka.modal?(0,oh.createElement)(dC,Ye({},H,{ref:d})):(0,oh.createElement)(Ns,Ye({},H,{ref:d})))))}),dC=(0,oh.forwardRef)((a,d)=>{const l=Nt("MenuContent",a.__scopeMenu),H=(0,oh.useRef)(null);d=lh(d,H);(0,oh.useEffect)(()=>{const Y=H.current;if(Y)return iy(Y)},[]);return(0,oh.createElement)(eC,Ye({},a,{ref:d,trapFocus:l.open,
disableOutsidePointerEvents:l.open,disableOutsideScroll:!0,onFocusOutside:Uf(a.onFocusOutside,Y=>Y.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>l.onOpenChange(!1)}))}),Ns=(0,oh.forwardRef)((a,d)=>{const l=Nt("MenuContent",a.__scopeMenu);return(0,oh.createElement)(eC,Ye({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>l.onOpenChange(!1)}))}),eC=(0,oh.forwardRef)((a,d)=>{const {__scopeMenu:l,loop:H=!1,trapFocus:Y,onOpenAutoFocus:ka,onCloseAutoFocus:oa,
disableOutsidePointerEvents:Fa,onEscapeKeyDown:Qa,onPointerDownOutside:Wa,onFocusOutside:db,onInteractOutside:jb,onDismiss:Mb,disableOutsideScroll:Ub}=a,Nb=If(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),lc=Nt("MenuContent",l),xc=Nu("MenuContent",l),$b=jw(l),nc=Mu(l),jc=Ls(l),[Ic,Jc]=(0,oh.useState)(null),Gd=(0,oh.useRef)(null);d=lh(d,Gd,lc.onContentChange);
const Xd=(0,oh.useRef)(0),Re=(0,oh.useRef)(""),me=(0,oh.useRef)(0),Le=(0,oh.useRef)(null),Bf=(0,oh.useRef)("right"),Ue=(0,oh.useRef)(0),df=Ub?Ku:oh.Fragment,Ud=Ub?{as:zq,allowPinchZoom:!0}:void 0,pd=qd=>{var ie,mf;qd=Re.current+qd;const sf=jc().filter(Lf=>!Lf.disabled),$f=document.activeElement,Kf=null===(ie=sf.find(Lf=>Lf.ref.current===$f))||void 0===ie?void 0:ie.textValue;ie=sf.map(Lf=>Lf.textValue);const Xf=Ve(ie,qd,Kf),Yg=null===(mf=sf.find(Lf=>Lf.textValue===Xf))||void 0===mf?void 0:mf.ref.current;
(function vh(Dh){Re.current=Dh;window.clearTimeout(Xd.current);""!==Dh&&(Xd.current=window.setTimeout(()=>vh(""),1E3))})(qd);Yg&&setTimeout(()=>Yg.focus())};(0,oh.useEffect)(()=>()=>window.clearTimeout(Xd.current),[]);sb();const ld=(0,oh.useCallback)(qd=>{var ie,mf,sf;if(sf=Bf.current===(null===(ie=Le.current)||void 0===ie?void 0:ie.side)){if(ie=null===(mf=Le.current)||void 0===mf?void 0:mf.area){const {x:$f,y:Kf}={x:qd.clientX,y:qd.clientY};qd=!1;for(let Xf=0,Yg=ie.length-1;Xf<ie.length;Yg=Xf++){mf=
ie[Xf].x;sf=ie[Xf].y;const Lf=ie[Yg].x,Dh=ie[Yg].y;sf>Kf!==Dh>Kf&&$f<(Lf-mf)*(Kf-sf)/(Dh-sf)+mf&&(qd=!qd)}ie=qd}else ie=!1;sf=ie}return sf},[]);return(0,oh.createElement)(oy,{scope:l,searchRef:Re,onItemEnter:(0,oh.useCallback)(qd=>{ld(qd)&&qd.preventDefault()},[ld]),onItemLeave:(0,oh.useCallback)(qd=>{var ie;ld(qd)||(null===(ie=Gd.current)||void 0===ie||ie.focus(),Jc(null))},[ld]),onTriggerLeave:(0,oh.useCallback)(qd=>{ld(qd)&&qd.preventDefault()},[ld]),pointerGraceTimerRef:me,onPointerGraceIntentChange:(0,oh.useCallback)(qd=>
{Le.current=qd},[])},(0,oh.createElement)(df,Ud,(0,oh.createElement)(VB,{asChild:!0,trapped:Y,onMountAutoFocus:Uf(ka,qd=>{var ie;qd.preventDefault();null===(ie=Gd.current)||void 0===ie||ie.focus()}),onUnmountAutoFocus:oa},(0,oh.createElement)(Wx,{asChild:!0,disableOutsidePointerEvents:Fa,onEscapeKeyDown:Qa,onPointerDownOutside:Wa,onFocusOutside:db,onInteractOutside:jb,onDismiss:Mb},(0,oh.createElement)(YB,Ye({asChild:!0},nc,{dir:xc.dir,orientation:"vertical",loop:H,currentTabStopId:Ic,onCurrentTabStopIdChange:Jc,
onEntryFocus:qd=>{xc.isUsingKeyboardRef.current||qd.preventDefault()}}),(0,oh.createElement)(by,Ye({role:"menu","aria-orientation":"vertical","data-state":lc.open?"open":"closed","data-radix-menu-content":"",dir:xc.dir},$b,Nb,{ref:d,style:ne({outline:"none"},Nb.style),onKeyDown:Uf(Nb.onKeyDown,qd=>{var ie=qd.target.closest("[data-radix-menu-content]")===qd.currentTarget;const mf=qd.ctrlKey||qd.altKey||qd.metaKey,sf=1===qd.key.length;ie&&("Tab"===qd.key&&qd.preventDefault(),!mf&&sf&&pd(qd.key));qd.target===
Gd.current&&Rp.includes(qd.key)&&(qd.preventDefault(),ie=jc().filter($f=>!$f.disabled).map($f=>$f.ref.current),ql.includes(qd.key)&&ie.reverse(),ye(ie))}),onBlur:Uf(a.onBlur,qd=>{qd.currentTarget.contains(qd.target)||(window.clearTimeout(Xd.current),Re.current="")}),onPointerMove:Uf(a.onPointerMove,Te(qd=>{const ie=Ue.current!==qd.clientX;qd.currentTarget.contains(qd.target)&&ie&&(Bf.current=qd.clientX>Ue.current?"right":"left",Ue.current=qd.clientX)}))})))))))}),Ou=(0,oh.forwardRef)((a,d)=>{const {disabled:l=
!1,onSelect:H}=a,Y=If(a,["disabled","onSelect"]),ka=(0,oh.useRef)(null),oa=Nu("MenuItem",a.__scopeMenu),Fa=lw("MenuItem",a.__scopeMenu);d=lh(d,ka);const Qa=(0,oh.useRef)(!1);return(0,oh.createElement)(mw,Ye({},Y,{ref:d,disabled:l,onClick:Uf(a.onClick,()=>{const Wa=ka.current;if(!l&&Wa){const db=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});Wa.addEventListener("menu.itemSelect",jb=>null===H||void 0===H?void 0:H(jb),{once:!0});cm(Wa,db);if(db.defaultPrevented)Qa.current=!1;else oa.onClose()}}),
onPointerDown:Wa=>{var db;null===(db=a.onPointerDown)||void 0===db||db.call(a,Wa);Qa.current=!0},onPointerUp:Uf(a.onPointerUp,Wa=>{var db;Qa.current||null===(db=Wa.currentTarget)||void 0===db||db.click()}),onKeyDown:Uf(a.onKeyDown,Wa=>{const db=""!==Fa.searchRef.current;l||db&&" "===Wa.key||!Lu.includes(Wa.key)||(Wa.currentTarget.click(),Wa.preventDefault())})}))}),mw=(0,oh.forwardRef)((a,d)=>{const {__scopeMenu:l,disabled:H=!1,textValue:Y}=a,ka=If(a,["__scopeMenu","disabled","textValue"]),oa=lw("MenuItem",
l),Fa=Mu(l),Qa=(0,oh.useRef)(null);d=lh(d,Qa);const [Wa,db]=(0,oh.useState)(!1),[jb,Mb]=(0,oh.useState)("");(0,oh.useEffect)(()=>{const Ub=Qa.current;if(Ub){var Nb;Mb((null!==(Nb=Ub.textContent)&&void 0!==Nb?Nb:"").trim())}},[ka.children]);return(0,oh.createElement)(Ul.ItemSlot,{scope:l,disabled:H,textValue:null!==Y&&void 0!==Y?Y:jb},(0,oh.createElement)(ZB,Ye({asChild:!0},Fa,{focusable:!H}),(0,oh.createElement)(Tl.div,Ye({role:"menuitem","data-highlighted":Wa?"":void 0,"aria-disabled":H||void 0,
"data-disabled":H?"":void 0},ka,{ref:d,onPointerMove:Uf(a.onPointerMove,Te(Ub=>{if(H)oa.onItemLeave(Ub);else oa.onItemEnter(Ub),Ub.defaultPrevented||Ub.currentTarget.focus()})),onPointerLeave:Uf(a.onPointerLeave,Te(Ub=>oa.onItemLeave(Ub))),onFocus:Uf(a.onFocus,()=>db(!0)),onBlur:Uf(a.onBlur,()=>db(!1))}))))});jn("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});jn("MenuItemIndicator",{checked:!1});var py=(0,oh.forwardRef)((a,d)=>{a=If(a,["__scopeMenu"]);return(0,oh.createElement)(Tl.div,Ye({role:"separator",
"aria-orientation":"horizontal"},a,{ref:d}))});jn("MenuSub");var Ot=a=>{const {__scopeMenu:d,open:l=!1,children:H,dir:Y,onOpenChange:ka,modal:oa=!0}=a;a=jw(d);const [Fa,Qa]=(0,oh.useState)(null),Wa=(0,oh.useRef)(!1),db=Gf(ka),jb=Vb(Y);(0,oh.useEffect)(()=>{const Mb=()=>{Wa.current=!0;document.addEventListener("pointerdown",Ub,{capture:!0,once:!0});document.addEventListener("pointermove",Ub,{capture:!0,once:!0})},Ub=()=>Wa.current=!1;document.addEventListener("keydown",Mb,{capture:!0});return()=>{document.removeEventListener("keydown",
Mb,{capture:!0});document.removeEventListener("pointerdown",Ub,{capture:!0});document.removeEventListener("pointermove",Ub,{capture:!0})}},[]);return(0,oh.createElement)(cy,a,(0,oh.createElement)(kw,{scope:d,open:l,onOpenChange:db,content:Fa,onContentChange:Qa},(0,oh.createElement)(cC,{scope:d,onClose:(0,oh.useCallback)(()=>db(!1),[db]),isUsingKeyboardRef:Wa,dir:jb,modal:oa},H)))},[qy]=mk("DropdownMenu",[ij]),Nr=ij(),[fC,ry]=qy("DropdownMenu"),jH=(0,wp.forwardRef)((a,d)=>{const {__scopeDropdownMenu:l,
disabled:H=!1}=a,Y=If(a,["__scopeDropdownMenu","disabled"]),ka=ry("DropdownMenuTrigger",l),oa=Nr(l);return(0,wp.createElement)(xj,Ye({asChild:!0},oa),(0,wp.createElement)(Tl.button,Ye({type:"button",id:ka.triggerId,"aria-haspopup":"menu","aria-expanded":ka.open,"aria-controls":ka.open?ka.contentId:void 0,"data-state":ka.open?"open":"closed","data-disabled":H?"":void 0,disabled:H},Y,{ref:Pg(d,ka.triggerRef),onPointerDown:Uf(a.onPointerDown,Fa=>{H||0!==Fa.button||!1!==Fa.ctrlKey||(ka.onOpenToggle(),
ka.open||Fa.preventDefault())}),onKeyDown:Uf(a.onKeyDown,Fa=>{if(!H){if(["Enter"," "].includes(Fa.key))ka.onOpenToggle();if("ArrowDown"===Fa.key)ka.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Fa.key)&&Fa.preventDefault()}})})))}),Pt=(0,wp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:l}=a;const H=If(a,["__scopeDropdownMenu"]),Y=ry("DropdownMenuContent",l);l=Nr(l);const ka=(0,wp.useRef)(!1);return(0,wp.createElement)(Ms,Ye({id:Y.contentId,"aria-labelledby":Y.triggerId},l,H,{ref:d,onCloseAutoFocus:Uf(a.onCloseAutoFocus,
oa=>{var Fa;ka.current||null===(Fa=Y.triggerRef.current)||void 0===Fa||Fa.focus();ka.current=!1;oa.preventDefault()}),onInteractOutside:Uf(a.onInteractOutside,oa=>{oa=oa.detail.originalEvent;const Fa=0===oa.button&&!0===oa.ctrlKey;oa=2===oa.button||Fa;if(!Y.modal||oa)ka.current=!0}),style:qf(ne({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Zq=(0,wp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:l}=a;a=If(a,["__scopeDropdownMenu"]);l=Nr(l);
return(0,wp.createElement)(Ou,Ye({},l,a,{ref:d}))}),nw=a=>{const {__scopeDropdownMenu:d,children:l,dir:H,open:Y,defaultOpen:ka,onOpenChange:oa,modal:Fa=!0}=a;a=Nr(d);const Qa=(0,wp.useRef)(null),[Wa=!1,db]=ci({prop:Y,defaultProp:ka,onChange:oa});return(0,wp.createElement)(fC,{scope:d,triggerId:ii(),triggerRef:Qa,contentId:ii(),open:Wa,onOpenChange:db,onOpenToggle:(0,wp.useCallback)(()=>db(jb=>!jb),[db]),modal:Fa},(0,wp.createElement)(Ot,Ye({},a,{open:Wa,onOpenChange:db,dir:H,modal:Fa}),l))},yj=vf(V(22)).default.createContext({}),
gC=vf(V(22)),Pu=V(586),Sn=a=>{var {action:d}=a;a=If(a,["action"]);var {renderers:l}=gC.useContext(yj);l=null==l?void 0:l.KeyboardShortcut;return(0,Pu.jsx)("div",qf(ne({className:"tl-menu-right-slot"},a),{children:(0,Pu.jsx)(l,{action:d})}))};V(22);var uo=V(586),kH=gf(function(){const a=ff(),d=l=>{l.preventDefault()};return(0,uo.jsxs)(nw,{children:[(0,uo.jsx)(jH,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,uo.jsxs)(Pt,{onCloseAutoFocus:l=>
l.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,uo.jsxs)(Zq,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,uo.jsx)(Sn,{action:"whiteboard/zoom-to-fit"})]}),(0,uo.jsxs)(Zq,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,children:["Zoom to fit selection",(0,uo.jsx)(Sn,{action:"whiteboard/zoom-to-selection"})]}),(0,uo.jsxs)(Zq,{className:"tl-menu-item",onSelect:d,
onClick:a.api.zoomIn,children:["Zoom in",(0,uo.jsx)(Sn,{action:"whiteboard/zoom-in"})]}),(0,uo.jsxs)(Zq,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,uo.jsx)(Sn,{action:"whiteboard/zoom-out"})]}),(0,uo.jsxs)(Zq,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,uo.jsx)(Sn,{action:"whiteboard/reset-zoom"})]})]})]})}),sy=V(22),hC=["horizontal","vertical"],Sp=(0,sy.forwardRef)((a,d)=>{const {decorative:l,orientation:H="horizontal"}=
a;a=If(a,["decorative","orientation"]);const Y=hC.includes(H)?H:"horizontal";return(0,sy.createElement)(Tl.div,Ye({"data-orientation":Y},l?{role:"none"}:{"aria-orientation":"vertical"===Y?Y:void 0,role:"separator"},a,{ref:d}))});Sp.propTypes={orientation(a,d,l){a=a[d];d=String(a);return a&&!hC.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${l}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var kn=V(586),iC=gf(function(){const a=ff(),{handlers:{t:d}}=Fu.useContext(yj),l=Fu.useCallback(()=>{a.api.undo()},[a]),H=Fu.useCallback(()=>{a.api.redo()},[a]),Y=Fu.useCallback(()=>{a.api.zoomIn()},[a]),ka=Fu.useCallback(()=>{a.api.zoomOut()},[a]);return(0,kn.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",children:[!a.readOnly&&(0,kn.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,kn.jsx)(ja,{tooltip:d("whiteboard/undo"),
onClick:l,children:(0,kn.jsx)(Yh,{name:"arrow-back-up"})}),(0,kn.jsx)(ja,{tooltip:d("whiteboard/redo"),onClick:H,children:(0,kn.jsx)(Yh,{name:"arrow-forward-up"})})]}),(0,kn.jsxs)("div",{className:`tl-toolbar tl-zoom-bar ${a.readOnly?"":"ml-4"}`,children:[(0,kn.jsx)(ja,{tooltip:d("whiteboard/zoom-in"),onClick:Y,id:"tl-zoom-in",children:(0,kn.jsx)(Yh,{name:"plus"})}),(0,kn.jsx)(ja,{tooltip:d("whiteboard/zoom-out"),onClick:ka,id:"tl-zoom-out",children:(0,kn.jsx)(Yh,{name:"minus"})}),(0,kn.jsx)(Sp,{className:"tl-toolbar-separator",
orientation:"vertical"}),(0,kn.jsx)(kH,{})]})]})}),ow=vf(V(22)),jC=vf(V(31)),Qt=V(586),Qu=a=>`[${a.map(d=>{var l;return null!=(l=null==d?void 0:d.toFixed(2))?l:"-"}).join(", ")}]`,ty=gf(()=>{var a;const {viewport:{bounds:d,camera:{point:l,zoom:H}},inputs:Y}=ph(),ka=ow.default.useRef();ow.default.useEffect(()=>{const Fa=document.getElementById("tl-statusbar-anchor");ka.current=Fa},[]);const oa=[["Z",null!=(a=null==H?void 0:H.toFixed(2))?a:"null"],["MP",Qu(Y.currentPoint)],["MS",Qu(Y.currentScreenPoint)],
["VP",Qu(l)],["VBR",Qu([d.maxX,d.maxY])]].map(Fa=>Fa.join("")).join("|");a=ka.current?jC.default.createPortal((0,Qt.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:oa}),ka.current):null;return(0,Qt.jsx)(Qt.Fragment,{children:a})}),$q=vf(V(22)),Rt=V(586),Tp=gf(a=>{var {id:d,icon:l,tooltip:H,tooltipSide:Y="left",handleClick:ka}=a;a=If(a,["id","icon","tooltip","tooltipSide","handleClick"]);var oa;const Fa=ff(),Qa=null==(oa=[...Fa.Tools,Bt,Ct])?void 0:oa.find(Wa=>Wa.id===d);oa=
(oa=null==Qa?void 0:Qa.shortcut)&&H?(0,Rt.jsxs)("div",{className:"flex",children:[H,(0,Rt.jsx)(Sn,{action:oa})]}):H;return(0,Rt.jsx)(ja,qf(ne({},a),{tooltipSide:Y,tooltip:oa,"data-tool":d,"data-selected":d===Fa.selectedTool.id,onClick:ka,children:"string"===typeof l?(0,Rt.jsx)(Yh,{name:l}):l}))}),Ji=V(22),[ao]=mk("Popover",[Kt]),Yo=Kt(),[kC,St]=ao("Popover"),uy=(0,Ji.forwardRef)((a,d)=>{var {__scopePopover:l}=a;const H=If(a,["__scopePopover"]),Y=St("PopoverTrigger",l);l=Yo(l);d=lh(d,Y.triggerRef);
a=(0,Ji.createElement)(Tl.button,Ye({type:"button","aria-haspopup":"dialog","aria-expanded":Y.open,"aria-controls":Y.contentId,"data-state":Y.open?"open":"closed"},H,{ref:d,onClick:Uf(a.onClick,Y.onOpenToggle)}));return Y.hasCustomAnchor?a:(0,Ji.createElement)(ay,Ye({asChild:!0},l),a)}),[,lC]=ao("PopoverPortal",{forceMount:void 0}),pw=(0,Ji.forwardRef)((a,d)=>{var l=lC("PopoverContent",a.__scopePopover);({forceMount:l=l.forceMount}=a);const H=If(a,["forceMount"]);a=St("PopoverContent",a.__scopePopover);
return(0,Ji.createElement)(Hu,{present:l||a.open},a.modal?(0,Ji.createElement)(vy,Ye({},H,{ref:d})):(0,Ji.createElement)(wy,Ye({},H,{ref:d})))}),vy=(0,Ji.forwardRef)((a,d)=>{const l=St("PopoverContent",a.__scopePopover),H=(0,Ji.useRef)(null);d=lh(d,H);const Y=(0,Ji.useRef)(!1);(0,Ji.useEffect)(()=>{const ka=H.current;if(ka)return iy(ka)},[]);return(0,Ji.createElement)(Ku,{as:zq,allowPinchZoom:!0},(0,Ji.createElement)(xy,Ye({},a,{ref:d,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Uf(a.onCloseAutoFocus,
ka=>{var oa;ka.preventDefault();Y.current||null===(oa=l.triggerRef.current)||void 0===oa||oa.focus()}),onPointerDownOutside:Uf(a.onPointerDownOutside,ka=>{ka=ka.detail.originalEvent;const oa=0===ka.button&&!0===ka.ctrlKey;Y.current=2===ka.button||oa},{checkForDefaultPrevented:!1}),onFocusOutside:Uf(a.onFocusOutside,ka=>ka.preventDefault(),{checkForDefaultPrevented:!1})})))}),wy=(0,Ji.forwardRef)((a,d)=>{const l=St("PopoverContent",a.__scopePopover),H=(0,Ji.useRef)(!1);return(0,Ji.createElement)(xy,
Ye({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Y=>{var ka;null===(ka=a.onCloseAutoFocus)||void 0===ka||ka.call(a,Y);if(!Y.defaultPrevented){var oa;H.current||null===(oa=l.triggerRef.current)||void 0===oa||oa.focus();Y.preventDefault()}H.current=!1},onInteractOutside:Y=>{var ka,oa;null===(ka=a.onInteractOutside)||void 0===ka||ka.call(a,Y);Y.defaultPrevented||(H.current=!0);ka=Y.target;(null===(oa=l.triggerRef.current)||void 0===oa?0:oa.contains(ka))&&Y.preventDefault()}}))}),
xy=(0,Ji.forwardRef)((a,d)=>{const {__scopePopover:l,trapFocus:H,onOpenAutoFocus:Y,onCloseAutoFocus:ka,disableOutsidePointerEvents:oa,onEscapeKeyDown:Fa,onPointerDownOutside:Qa,onFocusOutside:Wa,onInteractOutside:db}=a;a=If(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const jb=St("PopoverContent",l),Mb=Yo(l);sb();return(0,Ji.createElement)(VB,{asChild:!0,loop:!0,trapped:H,
onMountAutoFocus:Y,onUnmountAutoFocus:ka},(0,Ji.createElement)(Wx,{asChild:!0,disableOutsidePointerEvents:oa,onInteractOutside:db,onEscapeKeyDown:Fa,onPointerDownOutside:Qa,onFocusOutside:Wa,onDismiss:()=>jb.onOpenChange(!1)},(0,Ji.createElement)(by,Ye({"data-state":jb.open?"open":"closed",role:"dialog",id:jb.contentId},Mb,a,{ref:d,style:qf(ne({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),qw=(0,Ji.forwardRef)((a,d)=>{var {__scopePopover:l}=
a;a=If(a,["__scopePopover"]);l=Yo(l);return(0,Ji.createElement)(OB,Ye({},l,a,{ref:d}))}),yy=a=>{const {__scopePopover:d,children:l,open:H,defaultOpen:Y,onOpenChange:ka,modal:oa=!1}=a;a=Yo(d);const Fa=(0,Ji.useRef)(null),[Qa,Wa]=(0,Ji.useState)(!1),[db=!1,jb]=ci({prop:H,defaultProp:Y,onChange:ka});return(0,Ji.createElement)(cy,a,(0,Ji.createElement)(kC,{scope:d,contentId:ii(),triggerRef:Fa,open:db,onOpenChange:jb,onOpenToggle:(0,Ji.useCallback)(()=>jb(Mb=>!Mb),[jb]),hasCustomAnchor:Qa,onCustomAnchorAdd:(0,Ji.useCallback)(()=>
Wa(!0),[]),onCustomAnchorRemove:(0,Ji.useCallback)(()=>Wa(!1),[]),modal:oa},l))},Tt=vf(V(22)),Bq=V(586),mC=gf(function(a){var {popoverSide:d="left",setGeometry:l,activeGeometry:H,chevron:Y=!0}=a;a=If(a,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:ka}}=Tt.default.useContext(yj);const oa=[{id:"box",icon:"square",tooltip:ka("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:ka("whiteboard/circle")},{id:"polygon",icon:"triangle",tooltip:ka("whiteboard/triangle")}];
ka={id:"shapes",icon:"triangle-square-circle",tooltip:ka("whiteboard/shape")};ka=H?oa.find(Fa=>Fa.id===H):ka;return(0,Bq.jsxs)(yy,{children:[(0,Bq.jsx)(uy,{asChild:!0,children:(0,Bq.jsxs)("div",qf(ne({},a),{className:"tl-geometry-tools-pane-anchor",children:[(0,Bq.jsx)(Tp,qf(ne({},ka),{tooltipSide:d})),Y&&(0,Bq.jsx)(Yh,{"data-selected":H,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,Bq.jsxs)(pw,{className:"tl-popover-content",side:d,sideOffset:15,children:[(0,Bq.jsx)("div",
{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":"flex-row"}`,children:oa.map(Fa=>(0,Bq.jsx)(Tp,{id:Fa.id,icon:Fa.icon,tooltip:H?Fa.tooltip:"",handleClick:l,tooltipSide:d},Fa.id))}),(0,Bq.jsx)(qw,{className:"tl-popover-arrow"})]})]})}),qi=V(22),rw=V(22),zy=["PageUp","PageDown"],Ay=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],By={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home",
"PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[sw,nC,oC]=Bb("Slider"),[Ru]=mk("Slider",[oC]),[pC,tw]=Ru("Slider"),lH=(0,qi.forwardRef)((a,d)=>{function l(Ue){const df=Pi(me,Ue);ka(Ue,df)}function H(Ue){ka(Ue,Gd.current)}function Y(){me[Gd.current]!==Bf.current[Gd.current]&&xc(me)}function ka(Ue,df,{commit:Ud}={commit:!1}){const pd=(String(Wa).split(".")[1]||"").length;Ue=Sg(Math.round((Ue-Fa)/Wa)*Wa+Fa,pd);const ld=Lg(Ue,[Fa,Qa]);Le((qd=[])=>{const ie=Sj(qd,
ld,df);var mf=Mb*Wa;if(0<mf){const sf=kh(ie);mf=Math.min(...sf)>=mf}else mf=!0;return mf?(Gd.current=ie.indexOf(ld),(mf=String(ie)!==String(qd))&&Ud&&xc(ie),mf?ie:qd):qd})}const {name:oa,min:Fa=0,max:Qa=100,step:Wa=1,orientation:db="horizontal",disabled:jb=!1,minStepsBetweenThumbs:Mb=0,defaultValue:Ub=[Fa],value:Nb,onValueChange:lc=()=>{},onValueCommit:xc=()=>{},inverted:$b=!1}=a,nc=If(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),
[jc,Ic]=(0,qi.useState)(null);d=lh(d,Ue=>Ic(Ue));const Jc=(0,qi.useRef)(new Set),Gd=(0,qi.useRef)(0);var Xd="horizontal"===db;const Re=jc?!!jc.closest("form"):!0;Xd=Xd?ar:Ut;const [me=[],Le]=ci({prop:Nb,defaultProp:Ub,onChange:Ue=>{var df;null===(df=[...Jc.current][Gd.current])||void 0===df||df.focus();lc(Ue)}}),Bf=(0,qi.useRef)(me);return(0,qi.createElement)(pC,{scope:a.__scopeSlider,disabled:jb,min:Fa,max:Qa,valueIndexToChangeRef:Gd,thumbs:Jc.current,values:me,orientation:db},(0,qi.createElement)(sw.Provider,
{scope:a.__scopeSlider},(0,qi.createElement)(sw.Slot,{scope:a.__scopeSlider},(0,qi.createElement)(Xd,Ye({"aria-disabled":jb,"data-disabled":jb?"":void 0},nc,{ref:d,onPointerDown:Uf(nc.onPointerDown,()=>{jb||(Bf.current=me)}),min:Fa,max:Qa,inverted:$b,onSlideStart:jb?void 0:l,onSlideMove:jb?void 0:H,onSlideEnd:jb?void 0:Y,onHomeKeyDown:()=>!jb&&ka(Fa,0,{commit:!0}),onEndKeyDown:()=>!jb&&ka(Qa,me.length-1,{commit:!0}),onStepKeyDown:({event:Ue,direction:df})=>{if(!jb){Ue=zy.includes(Ue.key)||Ue.shiftKey&&
Ay.includes(Ue.key);const Ud=Gd.current;ka(me[Ud]+Wa*(Ue?10:1)*df,Ud,{commit:!0})}}})))),Re&&me.map((Ue,df)=>(0,qi.createElement)($e,{key:df,name:oa?oa+(1<me.length?"[]":""):void 0,value:Ue})))}),[Cy,Cq]=Ru("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),ar=(0,qi.forwardRef)((a,d)=>{function l(nc){const jc=Nb.current||Mb.getBoundingClientRect(),Ic=Ch([0,jc.width],$b?[H,Y]:[Y,H]);Nb.current=jc;return Ic(nc-jc.left)}const {min:H,max:Y,dir:ka,inverted:oa,onSlideStart:Fa,onSlideMove:Qa,
onSlideEnd:Wa,onStepKeyDown:db}=a,jb=If(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Mb,Ub]=(0,qi.useState)(null);d=lh(d,nc=>Ub(nc));const Nb=(0,qi.useRef)(),lc=Vb(ka),xc="ltr"===lc,$b=xc&&!oa||!xc&&oa;return(0,qi.createElement)(Cy,{scope:a.__scopeSlider,startEdge:$b?"left":"right",endEdge:$b?"right":"left",direction:$b?1:-1,size:"width"},(0,qi.createElement)(Or,Ye({dir:lc,"data-orientation":"horizontal"},jb,{ref:d,style:qf(ne({},jb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),
onSlideStart:nc=>{nc=l(nc.clientX);null===Fa||void 0===Fa||Fa(nc)},onSlideMove:nc=>{nc=l(nc.clientX);null===Qa||void 0===Qa||Qa(nc)},onSlideEnd:()=>{Nb.current=void 0;null===Wa||void 0===Wa||Wa()},onStepKeyDown:nc=>{const jc=By[$b?"from-left":"from-right"].includes(nc.key);null===db||void 0===db||db({event:nc,direction:jc?-1:1})}})))}),Ut=(0,qi.forwardRef)((a,d)=>{function l(Nb){const lc=Mb.current||jb.current.getBoundingClientRect(),xc=Ch([0,lc.height],Ub?[Y,H]:[H,Y]);Mb.current=lc;return xc(Nb-
lc.top)}const {min:H,max:Y,inverted:ka,onSlideStart:oa,onSlideMove:Fa,onSlideEnd:Qa,onStepKeyDown:Wa}=a,db=If(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),jb=(0,qi.useRef)(null);d=lh(d,jb);const Mb=(0,qi.useRef)(),Ub=!ka;return(0,qi.createElement)(Cy,{scope:a.__scopeSlider,startEdge:Ub?"bottom":"top",endEdge:Ub?"top":"bottom",size:"height",direction:Ub?1:-1},(0,qi.createElement)(Or,Ye({"data-orientation":"vertical"},db,{ref:d,style:qf(ne({},db.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),
onSlideStart:Nb=>{Nb=l(Nb.clientY);null===oa||void 0===oa||oa(Nb)},onSlideMove:Nb=>{Nb=l(Nb.clientY);null===Fa||void 0===Fa||Fa(Nb)},onSlideEnd:()=>{Mb.current=void 0;null===Qa||void 0===Qa||Qa()},onStepKeyDown:Nb=>{const lc=By[Ub?"from-bottom":"from-top"].includes(Nb.key);null===Wa||void 0===Wa||Wa({event:Nb,direction:lc?-1:1})}})))}),Or=(0,qi.forwardRef)((a,d)=>{const {__scopeSlider:l,onSlideStart:H,onSlideMove:Y,onSlideEnd:ka,onHomeKeyDown:oa,onEndKeyDown:Fa,onStepKeyDown:Qa}=a,Wa=If(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
db=tw("Slider",l);return(0,qi.createElement)(Tl.span,Ye({},Wa,{ref:d,onKeyDown:Uf(a.onKeyDown,jb=>{"Home"===jb.key?(oa(jb),jb.preventDefault()):"End"===jb.key?(Fa(jb),jb.preventDefault()):zy.concat(Ay).includes(jb.key)&&(Qa(jb),jb.preventDefault())}),onPointerDown:Uf(a.onPointerDown,jb=>{const Mb=jb.target;Mb.setPointerCapture(jb.pointerId);jb.preventDefault();db.thumbs.has(Mb)?Mb.focus():H(jb)}),onPointerMove:Uf(a.onPointerMove,jb=>{jb.target.hasPointerCapture(jb.pointerId)&&Y(jb)}),onPointerUp:Uf(a.onPointerUp,
jb=>{const Mb=jb.target;Mb.hasPointerCapture(jb.pointerId)&&(Mb.releasePointerCapture(jb.pointerId),ka(jb))})}))}),qC=(0,qi.forwardRef)((a,d)=>{var {__scopeSlider:l}=a;a=If(a,["__scopeSlider"]);l=tw("SliderTrack",l);return(0,qi.createElement)(Tl.span,Ye({"data-disabled":l.disabled?"":void 0,"data-orientation":l.orientation},a,{ref:d}))}),mH=(0,qi.forwardRef)((a,d)=>{var {__scopeSlider:l}=a;const H=If(a,["__scopeSlider"]),Y=tw("SliderRange",l);l=Cq("SliderRange",l);var ka=(0,qi.useRef)(null);d=lh(d,
ka);var oa=Y.values.length;ka=Y.values.map(Fa=>dg(Fa,Y.min,Y.max));oa=1<oa?Math.min(...ka):0;ka=100-Math.max(...ka);return(0,qi.createElement)(Tl.span,Ye({"data-orientation":Y.orientation,"data-disabled":Y.disabled?"":void 0},H,{ref:d,style:qf(ne({},a.style),{[l.startEdge]:oa+"%",[l.endEdge]:ka+"%"})}))}),nH=(0,qi.forwardRef)((a,d)=>{const l=nC(a.__scopeSlider),[H,Y]=(0,qi.useState)(null);d=lh(d,oa=>Y(oa));const ka=(0,qi.useMemo)(()=>H?l().findIndex(oa=>oa.ref.current===H):-1,[l,H]);return(0,qi.createElement)(rC,
Ye({},a,{ref:d,index:ka}))}),rC=(0,qi.forwardRef)((a,d)=>{const {__scopeSlider:l,index:H}=a,Y=If(a,["__scopeSlider","index"]),ka=tw("SliderThumb",l),oa=Cq("SliderThumb",l),[Fa,Qa]=(0,qi.useState)(null);d=lh(d,Ub=>Qa(Ub));var Wa=Fh(Fa);const db=ka.values[H],jb=void 0===db?0:dg(db,ka.min,ka.max),Mb=ch(H,ka.values.length);Wa=(Wa=null===Wa||void 0===Wa?void 0:Wa[oa.size])?Nh(Wa,jb,oa.direction):0;(0,qi.useEffect)(()=>{if(Fa)return ka.thumbs.add(Fa),()=>{ka.thumbs.delete(Fa)}},[Fa,ka.thumbs]);return(0,qi.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[oa.startEdge]:`calc(${jb}% + ${Wa}px)`}},(0,qi.createElement)(sw.ItemSlot,{scope:a.__scopeSlider},(0,qi.createElement)(Tl.span,Ye({role:"slider","aria-label":a["aria-label"]||Mb,"aria-valuemin":ka.min,"aria-valuenow":db,"aria-valuemax":ka.max,"aria-orientation":ka.orientation,"data-orientation":ka.orientation,"data-disabled":ka.disabled?"":void 0,tabIndex:ka.disabled?void 0:0},Y,{ref:d,style:void 0===db?{display:"none"}:
a.style,onFocus:Uf(a.onFocus,()=>{ka.valueIndexToChangeRef.current=H})}))))}),$e=a=>{const {value:d}=a;a=If(a,["value"]);const l=(0,qi.useRef)(null),H=hg(d);(0,qi.useEffect)(()=>{const Y=l.current,ka=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(H!==d&&ka){const oa=new Event("input",{bubbles:!0});ka.call(Y,d);Y.dispatchEvent(oa)}},[H,d]);return(0,qi.createElement)("input",Ye({style:{display:"none"}},a,{ref:l,defaultValue:d}))},ng=lH,kf=qC,Tf=mH,Zo=nH,Ml=vf(V(22)),
Pr=V(586),Yk=gf(a=>{var {side:d,align:l,alignOffset:H,label:Y,arrow:ka,children:oa,border:Fa}=a;a=If(a,"side align alignOffset label arrow children border".split(" "));const Qa=Ml.useRef(null),[Wa,db]=Ml.useState(!1),{viewport:{bounds:jb,camera:{point:Mb,zoom:Ub}}}=ff(),[Nb,lc]=Ml.useState(0);Ml.useEffect(()=>{if(Qa.current&&Wa){var xc=Qa.current.getBoundingClientRect();Af.boundsContain(jb,{minX:xc.x,minY:xc.y,maxX:xc.right,maxY:xc.bottom,width:xc.width,height:xc.height})||lc($b=>$b+1)}},[Mb[0],Mb[1],
Ub,Wa]);return(0,Pr.jsxs)(yy,{onOpenChange:xc=>db(xc),children:[(0,Pr.jsx)(uy,qf(ne({},a),{"data-border":Fa,className:"tl-button tl-popover-trigger-button",children:Y})),(0,Pr.jsxs)(pw,{ref:Qa,className:"tl-popover-content",align:l,alignOffset:H,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[oa,ka&&(0,Pr.jsx)(qw,{className:"tl-popover-arrow"})]},"popover-content-"+Nb)]})}),Up=vf(V(22)),De=V(586),bg=vf(V(22)),jf=V(22),Oe=V(31),bo=vf(V(22)),vo=V(22),Su=V(22),
Tu=V(31),Jk="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const l=(0,Su.forwardRef)((H,Y)=>{var {asChild:ka}=H;H=If(H,["asChild"]);ka=ka?zq:d;(0,Su.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Su.createElement)(ka,Ye({},H,{ref:Y}))});l.displayName=`Primitive.${d}`;return qf(ne({},a),{[d]:l})},{}),br,Dy=(0,vo.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wo=(0,vo.forwardRef)((a,d)=>{var l;
const {disableOutsidePointerEvents:H=!1,onEscapeKeyDown:Y,onPointerDownOutside:ka,onFocusOutside:oa,onInteractOutside:Fa,onDismiss:Qa}=a,Wa=If(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),db=(0,vo.useContext)(Dy),[jb,Mb]=(0,vo.useState)(null),Ub=null!==(l=null===jb||void 0===jb?void 0:jb.ownerDocument)&&void 0!==l?l:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Nb]=(0,vo.useState)({});d=lh(d,jc=>Mb(jc));
l=Array.from(db.layers);var [lc]=[...db.layersWithOutsidePointerEventsDisabled].slice(-1);lc=l.indexOf(lc);const xc=jb?l.indexOf(jb):-1;l=0<db.layersWithOutsidePointerEventsDisabled.size;const $b=xc>=lc;lc=Zf(jc=>{const Ic=jc.target,Jc=[...db.branches].some(Gd=>Gd.contains(Ic));$b&&!Jc&&(null===ka||void 0===ka||ka(jc),null===Fa||void 0===Fa||Fa(jc),jc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Ub);const nc=Wj(jc=>{const Ic=jc.target;[...db.branches].some(Jc=>Jc.contains(Ic))||(null===oa||void 0===
oa||oa(jc),null===Fa||void 0===Fa||Fa(jc),jc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Ub);Ek(jc=>{xc===db.layers.size-1&&(null===Y||void 0===Y||Y(jc),!jc.defaultPrevented&&Qa&&(jc.preventDefault(),Qa()))},Ub);(0,vo.useEffect)(()=>{if(jb)return H&&(0===db.layersWithOutsidePointerEventsDisabled.size&&(br=Ub.body.style.pointerEvents,Ub.body.style.pointerEvents="none"),db.layersWithOutsidePointerEventsDisabled.add(jb)),db.layers.add(jb),Zh(),()=>{H&&1===db.layersWithOutsidePointerEventsDisabled.size&&
(Ub.body.style.pointerEvents=br)}},[jb,Ub,H,db]);(0,vo.useEffect)(()=>()=>{jb&&(db.layers.delete(jb),db.layersWithOutsidePointerEventsDisabled.delete(jb),Zh())},[jb,db]);(0,vo.useEffect)(()=>{const jc=()=>Nb({});document.addEventListener("dismissableLayer.update",jc);return()=>document.removeEventListener("dismissableLayer.update",jc)},[]);return(0,vo.createElement)(Jk.div,Ye({},Wa,{ref:d,style:ne({pointerEvents:l?$b?"auto":"none":void 0},a.style),onFocusCapture:Uf(a.onFocusCapture,nc.onFocusCapture),
onBlurCapture:Uf(a.onBlurCapture,nc.onBlurCapture),onPointerDownCapture:Uf(a.onPointerDownCapture,lc.onPointerDownCapture)}))}),xo=V(22),cr={bubbles:!1,cancelable:!0},Vp=(0,xo.forwardRef)((a,d)=>{const {loop:l=!1,trapped:H=!1,onMountAutoFocus:Y,onUnmountAutoFocus:ka}=a;a=If(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [oa,Fa]=(0,xo.useState)(null),Qa=Gf(Y),Wa=Gf(ka),db=(0,xo.useRef)(null);d=lh(d,Ub=>Fa(Ub));const jb=(0,xo.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,xo.useEffect)(()=>{if(H){let Ub=function(lc){!jb.paused&&oa&&(lc=lc.target,oa.contains(lc)?db.current=lc:pk(db.current,{select:!0}))},Nb=function(lc){!jb.paused&&oa&&(oa.contains(lc.relatedTarget)||pk(db.current,{select:!0}))};document.addEventListener("focusin",Ub);document.addEventListener("focusout",Nb);return()=>{document.removeEventListener("focusin",Ub);document.removeEventListener("focusout",Nb)}}},[H,oa,jb.paused]);(0,xo.useEffect)(()=>{if(oa){Ug.add(jb);const Ub=document.activeElement;
if(!oa.contains(Ub)){const Nb=new CustomEvent("focusScope.autoFocusOnMount",cr);oa.addEventListener("focusScope.autoFocusOnMount",Qa);oa.dispatchEvent(Nb);Nb.defaultPrevented||(wl(Vn(dj(oa)),{select:!0}),document.activeElement===Ub&&pk(oa))}return()=>{oa.removeEventListener("focusScope.autoFocusOnMount",Qa);setTimeout(()=>{const Nb=new CustomEvent("focusScope.autoFocusOnUnmount",cr);oa.addEventListener("focusScope.autoFocusOnUnmount",Wa);oa.dispatchEvent(Nb);Nb.defaultPrevented||pk(null!==Ub&&void 0!==
Ub?Ub:document.body,{select:!0});oa.removeEventListener("focusScope.autoFocusOnUnmount",Wa);Ug.remove(jb)},0)}}},[oa,Qa,Wa,jb]);const Mb=(0,xo.useCallback)(Ub=>{if((l||H)&&!jb.paused){var Nb=document.activeElement;if("Tab"===Ub.key&&!Ub.altKey&&!Ub.ctrlKey&&!Ub.metaKey&&Nb){const xc=Ub.currentTarget;var lc=xc;const $b=dj(lc),nc=Bm($b,lc);lc=Bm($b.reverse(),lc);const [jc,Ic]=[nc,lc];jc&&Ic?Ub.shiftKey||Nb!==Ic?Ub.shiftKey&&Nb===jc&&(Ub.preventDefault(),l&&pk(Ic,{select:!0})):(Ub.preventDefault(),l&&
pk(jc,{select:!0})):Nb===xc&&Ub.preventDefault()}}},[l,H,jb.paused]);return(0,xo.createElement)(Jk.div,Ye({tabIndex:-1},a,{ref:d,onKeyDown:Mb}))}),Ug=function(){let a=[];return{add(d){const l=a[0];d===l||null!==l&&void 0!==l&&l.pause();a=In(a,d);a.unshift(d)},remove(d){var l;a=In(a,d);null===(l=a[0])||void 0===l||l.resume()}}}(),qk=V(22),[Wp,Ey]=mk("Popper"),[Os,Vg]=Wp("Popper"),sC=(0,qk.forwardRef)((a,d)=>{const {__scopePopper:l,virtualRef:H}=a;a=If(a,["__scopePopper","virtualRef"]);const Y=Vg("PopperAnchor",
l),ka=(0,qk.useRef)(null);d=lh(d,ka);(0,qk.useEffect)(()=>{Y.onAnchorChange((null===H||void 0===H?void 0:H.current)||ka.current)});return H?null:(0,qk.createElement)(Jk.div,Ye({},a,{ref:d}))}),[dr]=Wp("PopperContent"),[hh,Uu]=Wp("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Zk=(0,qk.forwardRef)((a,d)=>{var l,H,Y,ka,oa,Fa,Qa,Wa;const {__scopePopper:db,side:jb="bottom",sideOffset:Mb=0,align:Ub="center",alignOffset:Nb=0,arrowPadding:lc=0,collisionBoundary:xc=[],collisionPadding:$b=0,sticky:nc=
"partial",hideWhenDetached:jc=!1,avoidCollisions:Ic=!0,onPlaced:Jc}=a,Gd=If(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),Xd=Vg("PopperContent",db),[Re,me]=(0,qk.useState)(null);d=lh(d,gq=>me(gq));const [Le,Bf]=(0,qk.useState)(null);var Ue=Fh(Le),df=null!==(l=null===Ue||void 0===Ue?void 0:Ue.width)&&void 0!==l?l:0;l=null!==(H=null===Ue||void 0===Ue?void 0:Ue.height)&&void 0!==H?H:0;H=
jb+("center"!==Ub?"-"+Ub:"");Ue="number"===typeof $b?$b:ne({top:0,right:0,bottom:0,left:0},$b);const Ud=Array.isArray(xc)?xc:[xc],pd=0<Ud.length;Ue={padding:Ue,boundary:Ud.filter(jo),altBoundary:pd};const {reference:ld,floating:qd,strategy:ie,x:mf,y:sf,placement:$f,middlewareData:Kf,update:Xf}=jg({strategy:"fixed",placement:H,whileElementsMounted:Ri,middleware:[Am(),HB({mainAxis:Mb+l,alignmentAxis:Nb}),Ic?IB(ne({mainAxis:!0,crossAxis:!1,limiter:"partial"===nc?JB():void 0},Ue)):void 0,Le?MB({element:Le,
padding:lc}):void 0,Ic?FB(ne({},Ue)):void 0,mG(qf(ne({},Ue),{apply:({elements:gq,availableWidth:zD,availableHeight:ZH})=>{gq.floating.style.setProperty("--radix-popper-available-width",`${zD}px`);gq.floating.style.setProperty("--radix-popper-available-height",`${ZH}px`)}})),Vt({arrowWidth:df,arrowHeight:l}),jc?GB({strategy:"referenceHidden"}):void 0].filter(Ig)});Cn(()=>{ld(Xd.anchor)},[ld,Xd.anchor]);const Yg=null!==mf&&null!==sf,[Lf,Dh]=io($f),vh=Gf(Jc);Cn(()=>{Yg&&(null===vh||void 0===vh||vh())},
[Yg,vh]);df=null===(Y=Kf.arrow)||void 0===Y?void 0:Y.x;Y=null===(ka=Kf.arrow)||void 0===ka?void 0:ka.y;ka=0!==(null===(oa=Kf.arrow)||void 0===oa?void 0:oa.centerOffset);const [sj,Mk]=(0,qk.useState)();Cn(()=>{Re&&Mk(window.getComputedStyle(Re).zIndex)},[Re]);const {hasParent:Ol,positionUpdateFns:eq}=Uu("PopperContent",db),fq=!Ol;(0,qk.useLayoutEffect)(()=>{if(!fq)return eq.add(Xf),()=>{eq.delete(Xf)}},[fq,eq,Xf]);Cn(()=>{fq&&Yg&&Array.from(eq).reverse().forEach(gq=>requestAnimationFrame(gq))},[fq,
Yg,eq]);oa=qf(ne({"data-side":Lf,"data-align":Dh},Gd),{ref:d,style:qf(ne({},Gd.style),{animation:Yg?void 0:"none",opacity:null!==(Fa=Kf.hide)&&void 0!==Fa&&Fa.referenceHidden?0:void 0})});return(0,qk.createElement)("div",{ref:qd,"data-radix-popper-content-wrapper":"",style:{position:ie,left:0,top:0,transform:Yg?`translate3d(${Math.round(mf)}px, ${Math.round(sf)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:sj,["--radix-popper-transform-origin"]:[null===(Qa=Kf.transformOrigin)||
void 0===Qa?void 0:Qa.x,null===(Wa=Kf.transformOrigin)||void 0===Wa?void 0:Wa.y].join(" ")},dir:a.dir},(0,qk.createElement)(dr,{scope:db,placedSide:Lf,onArrowChange:Bf,arrowX:df,arrowY:Y,shouldHideArrow:ka},fq?(0,qk.createElement)(hh,{scope:db,hasParent:!0,positionUpdateFns:eq},(0,qk.createElement)(Jk.div,oa)):(0,qk.createElement)(Jk.div,oa)))}),Am=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:l}=a,{width:H,height:Y}=d.reference;l.floating.style.setProperty("--radix-popper-anchor-width",
`${H}px`);l.floating.style.setProperty("--radix-popper-anchor-height",`${Y}px`);return{}}}),Vt=a=>({name:"transformOrigin",options:a,fn(d){var l,H,Y,ka,oa;const {placement:Fa,rects:Qa,middlewareData:Wa}=d,db=(d=0!==(null===(l=Wa.arrow)||void 0===l?void 0:l.centerOffset))?0:a.arrowWidth;l=d?0:a.arrowHeight;const [jb,Mb]=io(Fa),Ub={start:"0%",center:"50%",end:"100%"}[Mb],Nb=(null!==(H=null===(Y=Wa.arrow)||void 0===Y?void 0:Y.x)&&void 0!==H?H:0)+db/2;H=(null!==(ka=null===(oa=Wa.arrow)||void 0===oa?void 0:
oa.y)&&void 0!==ka?ka:0)+l/2;oa=ka="";"bottom"===jb?(ka=d?Ub:`${Nb}px`,oa=`${-l}px`):"top"===jb?(ka=d?Ub:`${Nb}px`,oa=`${Qa.floating.height+l}px`):"right"===jb?(ka=`${-l}px`,oa=d?Ub:`${H}px`):"left"===jb&&(ka=`${Qa.floating.width+l}px`,oa=d?Ub:`${H}px`);return{data:{x:ka,y:oa}}}}),Vu=a=>{const {__scopePopper:d,children:l}=a,[H,Y]=(0,qk.useState)(null);return(0,qk.createElement)(Os,{scope:d,anchor:H,onAnchorChange:Y},l)},uw=V(22),Wt=vf(V(31)),Um=(0,uw.forwardRef)((a,d)=>{var l;const {container:H=null===
globalThis||void 0===globalThis?void 0:null===(l=globalThis.document)||void 0===l?void 0:l.body}=a;a=If(a,["container"]);return H?Wt.default.createPortal((0,uw.createElement)(Jk.div,Ye({},a,{ref:d})),H):null}),Fy=V(22),oH=(0,Fy.forwardRef)((a,d)=>(0,Fy.createElement)(Jk.span,Ye({},a,{ref:d,style:ne({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),pH=[" ","Enter","ArrowUp","ArrowDown"],qH=
[" ","Enter"],[Xp,Yp,Kk]=function(a){var d=a+"CollectionProvider";const [l,H]=mk(d),[Y,ka]=l(d,{collectionRef:{current:null},itemMap:new Map}),oa=db=>{const {scope:jb,children:Mb}=db;db=bo.default.useRef(null);const Ub=bo.default.useRef(new Map).current;return bo.default.createElement(Y,{scope:jb,itemMap:Ub,collectionRef:db},Mb)};Object.assign(oa,{displayName:d});const Fa=a+"CollectionSlot";d=bo.default.forwardRef((db,jb)=>{const {scope:Mb,children:Ub}=db;db=ka(Fa,Mb);jb=lh(jb,db.collectionRef);return bo.default.createElement(zq,
{ref:jb},Ub)});Object.assign(d,{displayName:Fa});const Qa=a+"CollectionItemSlot",Wa=bo.default.forwardRef((db,jb)=>{const {scope:Mb,children:Ub}=db,Nb=If(db,["scope","children"]),lc=bo.default.useRef(null);db=lh(jb,lc);const xc=ka(Qa,Mb);bo.default.useEffect(()=>{xc.itemMap.set(lc,ne({ref:lc},Nb));return()=>void xc.itemMap.delete(lc)});return bo.default.createElement(zq,{["data-radix-collection-item"]:"",ref:db},Ub)});Object.assign(Wa,{displayName:Qa});return[{Provider:oa,Slot:d,ItemSlot:Wa},function(db){const jb=
ka(a+"CollectionConsumer",db);return bo.default.useCallback(()=>{const Mb=jb.collectionRef.current;if(!Mb)return[];const Ub=Array.from(Mb.querySelectorAll("[data-radix-collection-item]"));return Array.from(jb.itemMap.values()).sort((Nb,lc)=>Ub.indexOf(Nb.ref.current)-Ub.indexOf(lc.ref.current))},[jb.collectionRef,jb.itemMap])},H]}("Select"),[Ps]=mk("Select",[Kk,Ey]),Wu=Ey(),[rH,Mo]=Ps("Select"),[sH,vw]=Ps("Select"),tH=(0,jf.forwardRef)((a,d)=>{const {__scopeSelect:l,disabled:H=!1}=a;a=If(a,["__scopeSelect",
"disabled"]);const Y=Wu(l),ka=Mo("SelectTrigger",l),oa=ka.disabled||H;d=lh(d,ka.onTriggerChange);const Fa=Yp(l),[Qa,Wa,db]=Jn(jb=>{const Mb=Fa().filter(Nb=>!Nb.disabled),Ub=Mb.find(Nb=>Nb.value===ka.value);jb=Wl(Mb,jb,Ub);if(void 0!==jb)ka.onValueChange(jb.value)});return(0,jf.createElement)(sC,Ye({asChild:!0},Y),(0,jf.createElement)(Jk.button,Ye({type:"button",role:"combobox","aria-controls":ka.contentId,"aria-expanded":ka.open,"aria-required":ka.required,"aria-autocomplete":"none",dir:ka.dir,"data-state":ka.open?
"open":"closed",disabled:oa,"data-disabled":oa?"":void 0,"data-placeholder":void 0===ka.value?"":void 0},a,{ref:d,onClick:Uf(a.onClick,jb=>{jb.currentTarget.focus()}),onPointerDown:Uf(a.onPointerDown,jb=>{const Mb=jb.target;Mb.hasPointerCapture(jb.pointerId)&&Mb.releasePointerCapture(jb.pointerId);0===jb.button&&!1===jb.ctrlKey&&(oa||(ka.onOpenChange(!0),db()),ka.triggerPointerDownPosRef.current={x:Math.round(jb.pageX),y:Math.round(jb.pageY)},jb.preventDefault())}),onKeyDown:Uf(a.onKeyDown,jb=>{const Mb=
""!==Qa.current;jb.ctrlKey||jb.altKey||jb.metaKey||1!==jb.key.length||Wa(jb.key);Mb&&" "===jb.key||!pH.includes(jb.key)||(oa||(ka.onOpenChange(!0),db()),jb.preventDefault())})})))}),ww=(0,jf.forwardRef)((a,d)=>{const {__scopeSelect:l,children:H,placeholder:Y}=a;a=If(a,["__scopeSelect","className","style","children","placeholder"]);const ka=Mo("SelectValue",l),{onValueNodeHasChildrenChange:oa}=ka,Fa=void 0!==H;d=lh(d,ka.onValueNodeChange);Cn(()=>{oa(Fa)},[oa,Fa]);return(0,jf.createElement)(Jk.span,
Ye({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===ka.value&&void 0!==Y?Y:H)}),Gy=(0,jf.forwardRef)((a,d)=>{const {children:l}=a;a=If(a,["__scopeSelect","children"]);return(0,jf.createElement)(Jk.span,Ye({"aria-hidden":!0},a,{ref:d}),l||"▼")}),Hy=(0,jf.forwardRef)((a,d)=>{const l=Mo("SelectContent",a.__scopeSelect),[H,Y]=(0,jf.useState)();Cn(()=>{Y(new DocumentFragment)},[]);return l.open?(0,jf.createElement)(tC,Ye({},a,{ref:d})):H?(0,Oe.createPortal)((0,jf.createElement)(xw,{scope:a.__scopeSelect},
(0,jf.createElement)(Xp.Slot,{scope:a.__scopeSelect},(0,jf.createElement)("div",null,a.children))),H):null}),[xw,Qr]=Ps("SelectContent"),tC=(0,jf.forwardRef)((a,d)=>{const {__scopeSelect:l,position:H="item-aligned",onCloseAutoFocus:Y,onEscapeKeyDown:ka,onPointerDownOutside:oa,side:Fa,sideOffset:Qa,align:Wa,alignOffset:db,arrowPadding:jb,collisionBoundary:Mb,collisionPadding:Ub,sticky:Nb,hideWhenDetached:lc,avoidCollisions:xc}=a;a=If(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));
const $b=Mo("SelectContent",l),[nc,jc]=(0,jf.useState)(null),[Ic,Jc]=(0,jf.useState)(null);d=lh(d,Lf=>jc(Lf));const [Gd,Xd]=(0,jf.useState)(null),[Re,me]=(0,jf.useState)(null),Le=Yp(l),[Bf,Ue]=(0,jf.useState)(!1),df=(0,jf.useRef)(!1);(0,jf.useEffect)(()=>{if(nc)return iy(nc)},[nc]);sb();const Ud=(0,jf.useCallback)(Lf=>{const [Dh,...vh]=Le().map(Ol=>Ol.ref.current),[sj]=vh.slice(-1),Mk=document.activeElement;for(const Ol of Lf){if(Ol===Mk)break;null===Ol||void 0===Ol||Ol.scrollIntoView({block:"nearest"});
Ol===Dh&&Ic&&(Ic.scrollTop=0);Ol===sj&&Ic&&(Ic.scrollTop=Ic.scrollHeight);null===Ol||void 0===Ol||Ol.focus();if(document.activeElement!==Mk)break}},[Le,Ic]),pd=(0,jf.useCallback)(()=>Ud([Gd,nc]),[Ud,Gd,nc]);(0,jf.useEffect)(()=>{Bf&&pd()},[Bf,pd]);const {onOpenChange:ld,triggerPointerDownPosRef:qd}=$b;(0,jf.useEffect)(()=>{if(nc){var Lf=0,Dh=0;const vh=Mk=>{var Ol,eq,fq,gq;Lf=Math.abs(Math.round(Mk.pageX)-(null!==(Ol=null===(eq=qd.current)||void 0===eq?void 0:eq.x)&&void 0!==Ol?Ol:0));Dh=Math.abs(Math.round(Mk.pageY)-
(null!==(fq=null===(gq=qd.current)||void 0===gq?void 0:gq.y)&&void 0!==fq?fq:0))},sj=Mk=>{10>=Lf&&10>=Dh?Mk.preventDefault():nc.contains(Mk.target)||ld(!1);document.removeEventListener("pointermove",vh);qd.current=null};null!==qd.current&&(document.addEventListener("pointermove",vh),document.addEventListener("pointerup",sj,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",vh);document.removeEventListener("pointerup",sj,{capture:!0})}}},[nc,ld,qd]);(0,jf.useEffect)(()=>{const Lf=
()=>ld(!1);window.addEventListener("blur",Lf);window.addEventListener("resize",Lf);return()=>{window.removeEventListener("blur",Lf);window.removeEventListener("resize",Lf)}},[ld]);const [ie,mf]=Jn(Lf=>{const Dh=Le().filter(Mk=>!Mk.disabled),vh=Dh.find(Mk=>Mk.ref.current===document.activeElement),sj=Wl(Dh,Lf,vh);sj&&setTimeout(()=>sj.ref.current.focus())}),sf=(0,jf.useCallback)((Lf,Dh,vh)=>{vh=!df.current&&!vh;if(void 0!==$b.value&&$b.value===Dh||vh)Xd(Lf),vh&&(df.current=!0)},[$b.value]),$f=(0,jf.useCallback)(()=>
null===nc||void 0===nc?void 0:nc.focus(),[nc]),Kf=(0,jf.useCallback)((Lf,Dh,vh)=>{vh=!df.current&&!vh;(void 0!==$b.value&&$b.value===Dh||vh)&&me(Lf)},[$b.value]),Xf="popper"===H?Rr:uC,Yg=Xf===Rr?{side:Fa,sideOffset:Qa,align:Wa,alignOffset:db,arrowPadding:jb,collisionBoundary:Mb,collisionPadding:Ub,sticky:Nb,hideWhenDetached:lc,avoidCollisions:xc}:{};return(0,jf.createElement)(xw,{scope:l,content:nc,viewport:Ic,onViewportChange:Jc,itemRefCallback:sf,selectedItem:Gd,onItemLeave:$f,itemTextRefCallback:Kf,
focusSelectedItem:pd,selectedItemText:Re,position:H,isPositioned:Bf,searchRef:ie},(0,jf.createElement)(Ku,{as:zq,allowPinchZoom:!0},(0,jf.createElement)(Vp,{asChild:!0,trapped:$b.open,onMountAutoFocus:Lf=>{Lf.preventDefault()},onUnmountAutoFocus:Uf(Y,Lf=>{var Dh;null===(Dh=$b.trigger)||void 0===Dh||Dh.focus({preventScroll:!0});Lf.preventDefault()})},(0,jf.createElement)(wo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:ka,onPointerDownOutside:oa,onFocusOutside:Lf=>Lf.preventDefault(),
onDismiss:()=>$b.onOpenChange(!1)},(0,jf.createElement)(Xf,Ye({role:"listbox",id:$b.contentId,"data-state":$b.open?"open":"closed",dir:$b.dir,onContextMenu:Lf=>Lf.preventDefault()},a,Yg,{onPlaced:()=>Ue(!0),ref:d,style:ne({display:"flex",flexDirection:"column",outline:"none"},a.style),onKeyDown:Uf(a.onKeyDown,Lf=>{var Dh=Lf.ctrlKey||Lf.altKey||Lf.metaKey;"Tab"===Lf.key&&Lf.preventDefault();Dh||1!==Lf.key.length||mf(Lf.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Lf.key)){let vh=Le().filter(sj=>
!sj.disabled).map(sj=>sj.ref.current);["ArrowUp","End"].includes(Lf.key)&&(vh=vh.slice().reverse());["ArrowUp","ArrowDown"].includes(Lf.key)&&(Dh=vh.indexOf(Lf.target),vh=vh.slice(Dh+1));setTimeout(()=>Ud(vh));Lf.preventDefault()}})}))))))}),uC=(0,jf.forwardRef)((a,d)=>{const {__scopeSelect:l,onPlaced:H}=a;a=If(a,["__scopeSelect","onPlaced"]);const Y=Mo("SelectContent",l);var ka=Qr("SelectContent",l);const [oa,Fa]=(0,jf.useState)(null),[Qa,Wa]=(0,jf.useState)(null);d=lh(d,Ic=>Wa(Ic));const db=Yp(l),
jb=(0,jf.useRef)(!1),Mb=(0,jf.useRef)(!0),{viewport:Ub,selectedItem:Nb,selectedItemText:lc,focusSelectedItem:xc}=ka,$b=(0,jf.useCallback)(()=>{if(Y.trigger&&Y.valueNode&&oa&&Qa&&Ub&&Nb&&lc){var Ic=Y.trigger.getBoundingClientRect(),Jc=Qa.getBoundingClientRect(),Gd=Y.valueNode.getBoundingClientRect(),Xd=lc.getBoundingClientRect();"rtl"!==Y.dir?(Xd=Gd.left-(Xd.left-Jc.left),Gd=Ic.width+(Ic.left-Xd),Jc=Lg(Xd,[10,window.innerWidth-10-Math.max(Gd,Jc.width)]),oa.style.minWidth=Gd+"px",oa.style.left=Jc+"px"):
(Xd=window.innerWidth-Gd.right-(Jc.right-Xd.right),Gd=Ic.width+(window.innerWidth-Ic.right-Xd),Jc=Lg(Xd,[10,window.innerWidth-10-Math.max(Gd,Jc.width)]),oa.style.minWidth=Gd+"px",oa.style.right=Jc+"px");const df=db();Jc=window.innerHeight-20;var Re=Ub.scrollHeight,me=window.getComputedStyle(Qa);Gd=parseInt(me.borderTopWidth,10);var Le=parseInt(me.paddingTop,10);Xd=parseInt(me.borderBottomWidth,10);me=parseInt(me.paddingBottom,10);var Bf=Gd+Le+Re+me+Xd;Re=Math.min(5*Nb.offsetHeight,Bf);var Ue=window.getComputedStyle(Ub);
me=parseInt(Ue.paddingTop,10);Ue=parseInt(Ue.paddingBottom,10);const Ud=Ic.top+Ic.height/2-10,pd=Jc-Ud;Ic=Nb.offsetHeight/2;Le=Gd+Le+(Nb.offsetTop+Ic);Bf-=Le;Le<=Ud?(Gd=Nb===df[df.length-1].ref.current,oa.style.bottom="0px",oa.style.height=Le+Math.max(pd,Ic+(Gd?Ue:0)+(Qa.clientHeight-Ub.offsetTop-Ub.offsetHeight)+Xd)+"px"):(Xd=Nb===df[0].ref.current,oa.style.top="0px",oa.style.height=Math.max(Ud,Gd+Ub.offsetTop+(Xd?me:0)+Ic)+Bf+"px",Ub.scrollTop=Le-Ud+Ub.offsetTop);oa.style.margin="10px 0";oa.style.minHeight=
Re+"px";oa.style.maxHeight=Jc+"px";null===H||void 0===H||H();requestAnimationFrame(()=>jb.current=!0)}},[db,Y.trigger,Y.valueNode,oa,Qa,Ub,Nb,lc,Y.dir,H]);Cn(()=>$b(),[$b]);const [nc,jc]=(0,jf.useState)();Cn(()=>{Qa&&jc(window.getComputedStyle(Qa).zIndex)},[Qa]);ka=(0,jf.useCallback)(Ic=>{Ic&&!0===Mb.current&&($b(),null===xc||void 0===xc||xc(),Mb.current=!1)},[$b,xc]);return(0,jf.createElement)(Qs,{scope:l,contentWrapper:oa,shouldExpandOnScrollRef:jb,onScrollButtonChange:ka},(0,jf.createElement)("div",
{ref:Fa,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:nc}},(0,jf.createElement)(Jk.div,Ye({},a,{ref:d,style:ne({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),Rr=(0,jf.forwardRef)((a,d)=>{const {__scopeSelect:l,align:H="start",collisionPadding:Y=10}=a;a=If(a,["__scopeSelect","align","collisionPadding"]);const ka=Wu(l);return(0,jf.createElement)(Zk,Ye({},ka,a,{ref:d,align:H,collisionPadding:Y,style:qf(ne({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)",
"--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[Qs,Xu]=Ps("SelectContent",{}),vC=(0,jf.forwardRef)((a,d)=>{const {__scopeSelect:l}=a;a=If(a,["__scopeSelect"]);const H=Qr("SelectViewport",l),Y=Xu("SelectViewport",l);d=lh(d,H.onViewportChange);const ka=
(0,jf.useRef)(0);return(0,jf.createElement)(jf.Fragment,null,(0,jf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,jf.createElement)(Xp.Slot,{scope:l},(0,jf.createElement)(Jk.div,Ye({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:ne({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:Uf(a.onScroll,
oa=>{oa=oa.currentTarget;const {contentWrapper:Fa,shouldExpandOnScrollRef:Qa}=Y;if(null!==Qa&&void 0!==Qa&&Qa.current&&Fa){var Wa=Math.abs(ka.current-oa.scrollTop);if(0<Wa){var db=window.innerHeight-20,jb=parseFloat(Fa.style.minHeight);const Mb=parseFloat(Fa.style.height);jb=Math.max(jb,Mb);jb<db&&(Wa=jb+Wa,db=Math.min(db,Wa),Wa-=db,Fa.style.height=db+"px","0px"===Fa.style.bottom&&(oa.scrollTop=0<Wa?Wa:0,Fa.style.justifyContent="flex-end"))}}ka.current=oa.scrollTop})}))))});Ps("SelectGroup");var [wC,
Xt]=Ps("SelectItem"),Yt=(0,jf.forwardRef)((a,d)=>{const {__scopeSelect:l,value:H,disabled:Y=!1,textValue:ka}=a;a=If(a,["__scopeSelect","value","disabled","textValue"]);const oa=Mo("SelectItem",l),Fa=Qr("SelectItem",l),Qa=oa.value===H,[Wa,db]=(0,jf.useState)(null!==ka&&void 0!==ka?ka:""),[jb,Mb]=(0,jf.useState)(!1);d=lh(d,lc=>{var xc;return null===(xc=Fa.itemRefCallback)||void 0===xc?void 0:xc.call(Fa,lc,H,Y)});const Ub=ii(),Nb=()=>{Y||(oa.onValueChange(H),oa.onOpenChange(!1))};return(0,jf.createElement)(wC,
{scope:l,value:H,disabled:Y,textId:Ub,isSelected:Qa,onItemTextChange:(0,jf.useCallback)(lc=>{db(xc=>{var $b;return xc||(null!==($b=null===lc||void 0===lc?void 0:lc.textContent)&&void 0!==$b?$b:"").trim()})},[])},(0,jf.createElement)(Xp.ItemSlot,{scope:l,value:H,disabled:Y,textValue:Wa},(0,jf.createElement)(Jk.div,Ye({role:"option","aria-labelledby":Ub,"data-highlighted":jb?"":void 0,"aria-selected":Qa&&jb,"data-state":Qa?"checked":"unchecked","aria-disabled":Y||void 0,"data-disabled":Y?"":void 0,
tabIndex:Y?void 0:-1},a,{ref:d,onFocus:Uf(a.onFocus,()=>Mb(!0)),onBlur:Uf(a.onBlur,()=>Mb(!1)),onPointerUp:Uf(a.onPointerUp,Nb),onPointerMove:Uf(a.onPointerMove,lc=>{if(Y){var xc;null===(xc=Fa.onItemLeave)||void 0===xc||xc.call(Fa)}else lc.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Uf(a.onPointerLeave,lc=>{if(lc.currentTarget===document.activeElement){var xc;null===(xc=Fa.onItemLeave)||void 0===xc||xc.call(Fa)}}),onKeyDown:Uf(a.onKeyDown,lc=>{var xc;if(""===(null===(xc=Fa.searchRef)||
void 0===xc?void 0:xc.current)||" "!==lc.key)qH.includes(lc.key)&&Nb()," "===lc.key&&lc.preventDefault()})}))))}),Yu=(0,jf.forwardRef)((a,d)=>{var {__scopeSelect:l}=a;a=If(a,["__scopeSelect","className","style"]);const H=Mo("SelectItemText",l),Y=Qr("SelectItemText",l),ka=Xt("SelectItemText",l);l=vw("SelectItemText",l);const [oa,Fa]=(0,jf.useState)(null);d=lh(d,Mb=>Fa(Mb),ka.onItemTextChange,Mb=>{var Ub;return null===(Ub=Y.itemTextRefCallback)||void 0===Ub?void 0:Ub.call(Y,Mb,ka.value,ka.disabled)});
const Qa=null===oa||void 0===oa?void 0:oa.textContent,Wa=(0,jf.useMemo)(()=>(0,jf.createElement)("option",{key:ka.value,value:ka.value,disabled:ka.disabled},Qa),[ka.disabled,ka.value,Qa]),{onNativeOptionAdd:db,onNativeOptionRemove:jb}=l;Cn(()=>{db(Wa);return()=>jb(Wa)},[db,jb,Wa]);return(0,jf.createElement)(jf.Fragment,null,(0,jf.createElement)(Jk.span,Ye({id:ka.textId},a,{ref:d})),ka.isSelected&&H.valueNode&&!H.valueNodeHasChildren?(0,Oe.createPortal)(a.children,H.valueNode):null)}),Zu=(0,jf.forwardRef)((a,
d)=>{const l=Qr("SelectScrollUpButton",a.__scopeSelect),H=Xu("SelectScrollUpButton",a.__scopeSelect),[Y,ka]=(0,jf.useState)(!1);d=lh(d,H.onScrollButtonChange);Cn(()=>{if(l.viewport&&l.isPositioned){let oa=function(){ka(0<Fa.scrollTop)};const Fa=l.viewport;oa();Fa.addEventListener("scroll",oa);return()=>Fa.removeEventListener("scroll",oa)}},[l.viewport,l.isPositioned]);return Y?(0,jf.createElement)(er,Ye({},a,{ref:d,onAutoScroll:()=>{const {viewport:oa,selectedItem:Fa}=l;oa&&Fa&&(oa.scrollTop-=Fa.offsetHeight)}})):
null}),$u=(0,jf.forwardRef)((a,d)=>{const l=Qr("SelectScrollDownButton",a.__scopeSelect),H=Xu("SelectScrollDownButton",a.__scopeSelect),[Y,ka]=(0,jf.useState)(!1);d=lh(d,H.onScrollButtonChange);Cn(()=>{if(l.viewport&&l.isPositioned){let oa=function(){ka(Math.ceil(Fa.scrollTop)<Fa.scrollHeight-Fa.clientHeight)};const Fa=l.viewport;oa();Fa.addEventListener("scroll",oa);return()=>Fa.removeEventListener("scroll",oa)}},[l.viewport,l.isPositioned]);return Y?(0,jf.createElement)(er,Ye({},a,{ref:d,onAutoScroll:()=>
{const {viewport:oa,selectedItem:Fa}=l;oa&&Fa&&(oa.scrollTop+=Fa.offsetHeight)}})):null}),er=(0,jf.forwardRef)((a,d)=>{const {__scopeSelect:l,onAutoScroll:H}=a;a=If(a,["__scopeSelect","onAutoScroll"]);const Y=Qr("SelectScrollButton",l),ka=(0,jf.useRef)(null),oa=Yp(l),Fa=(0,jf.useCallback)(()=>{null!==ka.current&&(window.clearInterval(ka.current),ka.current=null)},[]);(0,jf.useEffect)(()=>()=>Fa(),[Fa]);Cn(()=>{var Qa;const Wa=oa().find(db=>db.ref.current===document.activeElement);null===Wa||void 0===
Wa||null===(Qa=Wa.ref.current)||void 0===Qa||Qa.scrollIntoView({block:"nearest"})},[oa]);return(0,jf.createElement)(Jk.div,Ye({"aria-hidden":!0},a,{ref:d,style:ne({flexShrink:0},a.style),onPointerMove:Uf(a.onPointerMove,()=>{var Qa;null===(Qa=Y.onItemLeave)||void 0===Qa||Qa.call(Y);null===ka.current&&(ka.current=window.setInterval(H,50))}),onPointerLeave:Uf(a.onPointerLeave,()=>{Fa()})}))}),$o=(0,jf.forwardRef)((a,d)=>{const {value:l}=a;a=If(a,["value"]);const H=(0,jf.useRef)(null);d=lh(d,H);const Y=
hg(l);(0,jf.useEffect)(()=>{const ka=H.current,oa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(Y!==l&&oa){const Fa=new Event("change",{bubbles:!0});oa.call(ka,l);ka.dispatchEvent(Fa)}},[Y,l]);return(0,jf.createElement)(oH,{asChild:!0},(0,jf.createElement)("select",Ye({},a,{ref:d,defaultValue:l})))});$o.displayName="BubbleSelect";var xC=a=>{const {__scopeSelect:d,children:l,open:H,defaultOpen:Y,onOpenChange:ka,value:oa,defaultValue:Fa,onValueChange:Qa,dir:Wa,name:db,
autoComplete:jb,disabled:Mb,required:Ub}=a,Nb=Wu(d),[lc,xc]=(0,jf.useState)(null),[$b,nc]=(0,jf.useState)(null),[jc,Ic]=(0,jf.useState)(!1),Jc=Vb(Wa),[Gd=!1,Xd]=ci({prop:H,defaultProp:Y,onChange:ka}),[Re,me]=ci({prop:oa,defaultProp:Fa,onChange:Qa}),Le=(0,jf.useRef)(null),Bf=lc?!!lc.closest("form"):!0,[Ue,df]=(0,jf.useState)(new Set),Ud=Array.from(Ue).map(pd=>pd.props.value).join(";");return(0,jf.createElement)(Vu,Nb,(0,jf.createElement)(rH,{required:Ub,scope:d,trigger:lc,onTriggerChange:xc,valueNode:$b,
onValueNodeChange:nc,valueNodeHasChildren:jc,onValueNodeHasChildrenChange:Ic,contentId:ii(),value:Re,onValueChange:me,open:Gd,onOpenChange:Xd,dir:Jc,triggerPointerDownPosRef:Le,disabled:Mb},(0,jf.createElement)(Xp.Provider,{scope:d},(0,jf.createElement)(sH,{scope:a.__scopeSelect,onNativeOptionAdd:(0,jf.useCallback)(pd=>{df(ld=>(new Set(ld)).add(pd))},[]),onNativeOptionRemove:(0,jf.useCallback)(pd=>{df(ld=>{ld=new Set(ld);ld.delete(pd);return ld})},[])},l)),Bf?(0,jf.createElement)($o,{key:Ud,"aria-hidden":!0,
required:Ub,tabIndex:-1,name:db,autoComplete:jb,value:Re,onChange:pd=>me(pd.target.value),disabled:Mb},void 0===Re?(0,jf.createElement)("option",{value:""}):null,Array.from(Ue)):null))},ap=tH,Zt=ww,yw=Gy,Sr=a=>(0,jf.createElement)(Um,Ye({asChild:!0},a)),yC=Hy,AC=vC,BC=Yt,En=Yu,Iy=Zu,zC=$u,Lk=V(586),Hd=vf(V(22)),CC=V(586),ih=V(586),Bi=gf(function(){const a=ff(),{handlers:{t:d}}=$q.useContext(yj),l=$q.useCallback(oa=>{a.api.setColor(oa)},[]),H=$q.useCallback(oa=>{(oa=oa.currentTarget.dataset.tool)&&
a.selectTool(oa)},[]),[Y,ka]=$q.useState(()=>{var oa;return null!=(oa=Object.values(tr).find(Fa=>Fa===a.selectedTool.id))?oa:Object.values(tr)[0]});$q.useEffect(()=>{ka(oa=>{var Fa;return null!=(Fa=Object.values(tr).find(Qa=>Qa===a.selectedTool.id))?Fa:oa})},[a.selectedTool.id]);return(0,ih.jsx)("div",{className:"tl-primary-tools","data-html2canvas-ignore":"true",children:(0,ih.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,ih.jsx)(Tp,{handleClick:()=>a.selectTool("select"),
tooltip:d("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,ih.jsx)(Tp,{handleClick:()=>a.selectTool("move"),tooltip:d("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,ih.jsx)(Sp,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,ih.jsx)(Tp,{handleClick:()=>a.selectTool("logseq-portal"),tooltip:d("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,ih.jsx)(Tp,{handleClick:()=>a.selectTool("pencil"),tooltip:d("whiteboard/draw"),
id:"pencil",icon:"ballpen"}),(0,ih.jsx)(Tp,{handleClick:()=>a.selectTool("highlighter"),tooltip:d("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,ih.jsx)(Tp,{handleClick:()=>a.selectTool("erase"),tooltip:d("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,ih.jsx)(Tp,{handleClick:()=>a.selectTool("line"),tooltip:d("whiteboard/connector"),id:"line",icon:"connector"}),(0,ih.jsx)(Tp,{handleClick:()=>a.selectTool("text"),tooltip:d("whiteboard/text"),id:"text",icon:"text"}),(0,ih.jsx)(mC,
{activeGeometry:Y,setGeometry:H}),(0,ih.jsx)(Sp,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,ih.jsx)(Ag,{popoverSide:"left",color:a.settings.color,setColor:l}),(0,ih.jsx)(Ki,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),zw=V(586),av=gf(function(){const a=ff();return(0,zw.jsxs)("div",{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,zw.jsx)("div",{style:{flex:1}}),
(0,zw.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),fr=V(586),DC=gf(function(){const a=ff();return(0,fr.jsxs)(fr.Fragment,{children:[Hf()&&(0,fr.jsx)(av,{}),Hf()&&(0,fr.jsx)(ty,{}),!a.readOnly&&(0,fr.jsx)(Bi,{}),(0,fr.jsx)(iC,{})]})}),bv=vf(V(22)),Hm=vf(V(22)),Jy=vf(V(22)),EC=vf(V(22)),co=V(586),Ky=({id:a,showReferenceContent:d=!1})=>{var l;const {handlers:{isWhiteboardPage:H,redirectToPage:Y,sidebarAddBlock:ka,queryBlockByUUID:oa},renderers:{Breadcrumb:Fa,PageName:Qa}}=EC.default.useContext(yj);
var Wa="";let db=Ok(a)?"B":"P",jb="";if(Ok(a)){Wa=oa(a);if(!Wa)return(0,co.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});jb=Wa.content;Wa="whiteboard-shape"===(null==(l=Wa.properties)?void 0:l["ls-type"])?"link-to-whiteboard":"link-to-block"}else Wa=H(a)?"link-to-whiteboard":"link-to-page";l=jb&&23<jb.length?jb.slice(0,20)+"...":jb;return(0,co.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Mb=>{Mb.stopPropagation();Mb.shiftKey?ka(a,
"B"===db?"block":"page"):Y(a)},children:[(0,co.jsx)(Yh,{name:Wa}),(0,co.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===db?(0,co.jsx)(Qa,{pageName:a}):(0,co.jsxs)(co.Fragment,{children:[(0,co.jsx)(Fa,{levelLimit:1,blockId:a,endSeparator:d}),d&&l]})})]})},ln=vf(V(22)),yo=V(22),FC=["children"],cv="undefined"!==typeof document?yo.useLayoutEffect:yo.useEffect,bh=vf(V(22)),Ci=V(22),GC=V(31),Rs,mn,$t="undefined"!=typeof document?Ci.useLayoutEffect:Ci.useEffect;!function(a){a[a.DEBUG=
0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(mn||={});var HC=((Rs={})[mn.DEBUG]="debug",Rs[mn.INFO]="log",Rs[mn.WARN]="warn",Rs[mn.ERROR]="error",Rs),Tr=di(function(){var a=Yf(mn.ERROR);return{log:Yf(function(d,l,H){var Y;void 0===H&&(H=mn.INFO);H>=(null!=(Y=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?Y:a(4))&&console[HC[H]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",d,l)}),logLevel:a}},[],{singleton:!0}),eo=
di(function(){var a=Dg(),d=Dg(),l=Yf(0),H=Dg(),Y=Yf(0),ka=Dg(),oa=Dg(),Fa=Yf(0),Qa=Yf(0),Wa=Yf(0),db=Yf(0),jb=Dg(),Mb=Dg(),Ub=Yf(!1),Nb=Yf(!1);return ah(Xe(a,tg(function(lc){return lc.scrollTop})),d),ah(Xe(a,tg(function(lc){return lc.scrollHeight})),oa),ah(d,Y),{scrollContainerState:a,scrollTop:d,viewportHeight:ka,headerHeight:Fa,fixedHeaderHeight:Qa,fixedFooterHeight:Wa,footerHeight:db,scrollHeight:oa,smoothScrollTargetReached:H,react18ConcurrentRendering:Nb,scrollTo:jb,scrollBy:Mb,statefulScrollTop:Y,
deviation:l,scrollingInProgress:Ub}},[],{singleton:!0}),rj={lvl:0},Aw=di(function(){return{recalcInProgress:Yf(!1)}},[],{singleton:!0}),IC={offsetHeight:"height",offsetWidth:"width"},Dq=di(function(a){var d=a[0].log,l=a[1].recalcInProgress;a=Dg();var H=Dg(),Y=Xj(H,0),ka=Dg(),oa=Dg(),Fa=Yf(0),Qa=Yf([]),Wa=Yf(void 0),db=Yf(void 0),jb=Yf(function(nc,jc){return fn(nc,IC[jc])}),Mb=Yf(void 0),Ub=Yf(0),Nb={offsetTree:[],sizeTree:rj,groupOffsetTree:rj,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},
lc=Xj(Xe(a,Hh(Qa,d,Ub),pm(jj,Nb),Og()),Nb);ah(Xe(Qa,sh(function(nc){return 0<nc.length}),Hh(lc,Ub),tg(function(nc){var jc=nc[0],Ic=nc[1],Jc=nc[2];nc=jc.reduce(function(Gd,Xd,Re){return sa(Gd,Xd,ri(Xd,Ic.offsetTree,Jc)||Re)},rj);return Cg({},Ic,{groupIndices:jc,groupOffsetTree:nc})})),lc);ah(Xe(H,Hh(lc),sh(function(nc){return nc[0]<nc[1].lastIndex}),tg(function(nc){var jc=nc[1];return[{startIndex:nc[0],endIndex:jc.lastIndex,size:jc.lastSize}]})),a);ah(Wa,db);var xc=Xj(Xe(Wa,tg(function(nc){return void 0===
nc})),!0);ah(Xe(db,sh(function(nc){return void 0!==nc&&lc(4).sizeTree===rj}),tg(function(nc){return[{startIndex:0,endIndex:0,size:nc}]})),a);Nb=gk(Xe(a,Hh(lc),pm(function(nc,jc){jc=jc[1];return{changed:jc!==nc.sizes,sizes:jc}},{changed:!1,sizes:Nb}),tg(function(nc){return nc.changed})));nh(Xe(Fa,pm(function(nc,jc){return{diff:nc.prev-jc,prev:jc}},{diff:0,prev:0}),tg(function(nc){return nc.diff})),function(nc){0<nc?(l(0,!0),ka(0,nc)):0>nc&&oa(0,nc)});nh(Xe(Fa,Hh(d)),function(nc){0>nc[0]&&(0,nc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",
{firstItemIndex:Fa},mn.ERROR)});d=gk(ka);ah(Xe(ka,Hh(lc),tg(function(nc){var jc=nc[0];nc=nc[1];if(0<nc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Ya(nc.sizeTree).reduce(function(Ic,Jc){var Gd=Jc.k;Jc=Jc.v;return{ranges:[].concat(Ic.ranges,[{startIndex:Ic.prevIndex,endIndex:Gd+jc-1,size:Ic.prevSize}]),prevIndex:Gd+jc,prevSize:Jc}},{ranges:[],prevIndex:0,prevSize:nc.lastSize}).ranges})),a);var $b=gk(Xe(oa,Hh(lc,Ub),tg(function(nc){return ri(-nc[0],
nc[1].offsetTree,nc[2])})));return ah(Xe(oa,Hh(lc,Ub),tg(function(nc){var jc=nc[0],Ic=nc[1];nc=nc[2];if(0<Ic.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Jc=Ya(Ic.sizeTree).reduce(function(Gd,Xd){return sa(Gd,Math.max(0,Xd.k+jc),Xd.v)},rj);return Cg({},Ic,{sizeTree:Jc},Li(Ic.offsetTree,0,Jc,nc))})),lc),{data:Mb,totalCount:H,sizeRanges:a,groupIndices:Qa,defaultItemSize:db,fixedItemSize:Wa,unshiftWith:ka,shiftWith:oa,shiftWithOffset:$b,beforeUnshiftWith:d,
firstItemIndex:Fa,gap:Ub,sizes:lc,listRefresh:Nb,statefulTotalCount:Y,trackItemSizes:xc,itemSize:jb}},$h(Tr,Aw),{singleton:!0}),JC="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,dv=di(function(a){function d(){xc&&(xc(),xc=null);nc&&(nc(),nc=null);$b&&(clearTimeout($b),$b=null);Fa(0,!1)}var l=a[0],H=l.sizes,Y=l.totalCount,ka=l.listRefresh;l=l.gap;var oa=a[1],Fa=oa.scrollingInProgress,Qa=oa.viewportHeight,Wa=oa.scrollTo,db=oa.smoothScrollTargetReached,jb=oa.headerHeight,
Mb=oa.footerHeight,Ub=oa.fixedHeaderHeight;oa=oa.fixedFooterHeight;a=a[2].log;var Nb=Dg(),lc=Yf(0),xc=null,$b=null,nc=null;return ah(Xe(Nb,Hh(H,Qa,Y,lc,jb,Mb,a),Hh(l,Ub,oa),tg(function(jc){var Ic=jc[0],Jc=Ic[0],Gd=Ic[1],Xd=Ic[2],Re=Ic[3],me=Ic[4],Le=Ic[5],Bf=Ic[6],Ue=Ic[7],df=jc[1];Ic=jc[2];jc=jc[3];var Ud=li(Jc),pd=Ud.align,ld=Ud.behavior,qd=Ud.offset;--Re;Ud=gh(Ud,Gd,Re);Le=ri(Ud,Gd.offsetTree,df)+Le;"end"===pd?(Le+=Ic+wa(Gd.sizeTree,Ud)[1]-Xd+jc,Ud===Re&&(Le+=Bf)):"center"===pd?Le+=(Ic+wa(Gd.sizeTree,
Ud)[1]-Xd+jc)/2:Le-=me;qd&&(Le+=qd);var ie=function(sf){d();sf?(Ue("retrying to scroll to",{location:Jc},mn.DEBUG),Nb(0,Jc)):Ue("list did not change, scroll successful",{},mn.DEBUG)};if(d(),"smooth"===ld){var mf=!1;nc=nh(ka,function(sf){mf=mf||sf});xc=ei(db,function(){ie(mf)})}else xc=ei(Xe(ka,function(sf){var $f=setTimeout(function(){sf(!1)},150);return function(Kf){Kf&&(sf(!0),clearTimeout($f))}}),ie);$b=setTimeout(function(){d()},1200);Fa(0,!0);return Ue("scrolling from index to",{index:Ud,top:Le,
behavior:ld},mn.DEBUG),{top:Le,behavior:ld}})),Wa),{scrollToIndex:Nb,topListHeight:lc}},$h(Dq,eo,Tr),{singleton:!0}),uH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},ev=di(function(a){var d=a[0],l=d.scrollContainerState;a=d.scrollTop;var H=d.viewportHeight,Y=d.headerHeight,ka=d.footerHeight,oa=d.scrollBy;d=Yf(!1);var Fa=Yf(!0),Qa=Dg(),Wa=Dg(),db=Yf(4),jb=Yf(0),Mb=Xj(Xe(Mi(Xe(Wh(a),Mn(1),Wk(!0)),Xe(Wh(a),Mn(1),Wk(!1),yn(100))),
Og()),!1),Ub=Xj(Xe(Mi(Xe(oa,Wk(!0)),Xe(oa,Wk(!1),yn(200))),Og()),!1);ah(Xe(Yj(Wh(a),Wh(jb)),tg(function(Nb){return Nb[0]<=Nb[1]}),Og()),Fa);ah(Xe(Fa,qj(50)),Wa);H=gk(Xe(Yj(l,Wh(H),Wh(Y),Wh(ka),Wh(db)),pm(function(Nb,lc){var xc,$b,nc=lc[0],jc=nc.scrollTop;nc=nc.scrollHeight;var Ic=lc[1],Jc={viewportHeight:Ic,scrollTop:jc,scrollHeight:nc};return jc+Ic-nc>-lc[4]?(jc>Nb.state.scrollTop?(xc="SCROLLED_DOWN",$b=Nb.state.scrollTop-jc):(xc="SIZE_DECREASED",$b=Nb.state.scrollTop-jc||Nb.scrollTopDelta),{atBottom:!0,
state:Jc,atBottomBecause:xc,scrollTopDelta:$b}):{atBottom:!1,notAtBottomBecause:Jc.scrollHeight>Nb.state.scrollHeight?"SIZE_INCREASED":Ic<Nb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":jc<Nb.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Jc}},uH),Og(function(Nb,lc){return Nb&&Nb.atBottom===lc.atBottom})));Y=Xj(Xe(l,pm(function(Nb,lc){var xc=lc.scrollTop,$b=lc.scrollHeight;lc=lc.viewportHeight;return 1.01>Math.abs(Nb.scrollHeight-$b)?{scrollTop:xc,scrollHeight:$b,
jump:0,changed:!1}:Nb.scrollTop!==xc&&1>$b-(xc+lc)?{scrollHeight:$b,scrollTop:xc,jump:Nb.scrollTop-xc,changed:!0}:{scrollHeight:$b,scrollTop:xc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),sh(function(Nb){return Nb.changed}),tg(function(Nb){return Nb.jump})),0);ah(Xe(H,tg(function(Nb){return Nb.atBottom})),d);ah(Xe(d,qj(50)),Qa);ka=Yf("down");ah(Xe(l,tg(function(Nb){return Nb.scrollTop}),Og(),pm(function(Nb,lc){return Ub(4)?{direction:Nb.direction,prevScrollTop:lc}:{direction:lc<
Nb.prevScrollTop?"up":"down",prevScrollTop:lc}},{direction:"down",prevScrollTop:0}),tg(function(Nb){return Nb.direction})),ka);ah(Xe(l,qj(50),Wk("none")),ka);l=Yf(0);return ah(Xe(Mb,sh(function(Nb){return!Nb}),Wk(0)),l),ah(Xe(a,qj(100),Hh(Mb),sh(function(Nb){return!!Nb[1]}),pm(function(Nb,lc){return[Nb[1],lc[0]]},[0,0]),tg(function(Nb){return Nb[1]-Nb[0]})),l),{isScrolling:Mb,isAtTop:Fa,isAtBottom:d,atBottomState:H,atTopStateChange:Wa,atBottomStateChange:Qa,scrollDirection:ka,atBottomThreshold:db,
atTopThreshold:jb,scrollVelocity:l,lastJumpDueToItemResize:Y}},$h(eo)),Ss=di(function(a){var d=a[0].log;a=Yf(!1);var l=gk(Xe(a,sh(function(H){return H}),Og()));return nh(a,function(H){H&&d(4)("props updated",{},mn.DEBUG)}),{propsReady:a,didMount:l}},$h(Tr),{singleton:!0}),Ly=di(function(a){var d=a[0],l=d.sizes,H=d.listRefresh;d=d.defaultItemSize;var Y=a[1].scrollTop,ka=a[2].scrollToIndex;a=a[3].didMount;var oa=Yf(!0),Fa=Yf(0);return ah(Xe(a,Hh(Fa),sh(function(Qa){return!!Qa[1]}),Wk(!1)),oa),nh(Xe(Yj(H,
a),Hh(oa,l,d),sh(function(Qa){var Wa=Qa[1],db=Qa[3];return Qa[0][1]&&(Qa[2].sizeTree!==rj||void 0!==db)&&!Wa}),Hh(Fa)),function(Qa){var Wa=Qa[1];setTimeout(function(){ei(Y,function(){oa(0,!0)});ka(0,Wa)})}),{scrolledToInitialItem:oa,initialTopMostItemIndex:Fa}},$h(Dq,eo,dv,Ss),{singleton:!0}),vH=di(function(a){function d(lc){Qa(0,{index:"LAST",align:"end",behavior:lc})}function l(lc){var xc=ei(Fa,function($b){!lc||$b.atBottom||"SIZE_INCREASED"!==$b.notAtBottomBecause||Nb||(jb(4)("scrolling to bottom due to increased size",
{},mn.DEBUG),d("auto"))});setTimeout(xc,100)}var H=a[0],Y=H.totalCount,ka=H.listRefresh,oa=a[1];H=oa.isAtBottom;var Fa=oa.atBottomState,Qa=a[2].scrollToIndex;oa=a[3].scrolledToInitialItem;var Wa=a[4],db=Wa.propsReady;Wa=Wa.didMount;var jb=a[5].log;a=a[6].scrollingInProgress;var Mb=Yf(!1),Ub=Dg(),Nb=null;return nh(Xe(Yj(Xe(Wh(Y),Mn(1)),Wa),Hh(Wh(Mb),H,oa,a),tg(function(lc){var xc=lc[0],$b=xc[0];xc=xc[1]&&lc[3];var nc="auto";xc&&(nc=lc[1],lc=lc[2]||lc[4],nc="function"==typeof nc?wh(nc(lc)):lc&&wh(nc),
xc=xc&&!!nc);return{totalCount:$b,shouldFollow:xc,followOutputBehavior:nc}}),sh(function(lc){return lc.shouldFollow})),function(lc){var xc=lc.totalCount,$b=lc.followOutputBehavior;Nb&&(Nb(),Nb=null);Nb=ei(ka,function(){jb(4)("following output to ",{totalCount:xc},mn.DEBUG);d($b);Nb=null})}),nh(Xe(Yj(Wh(Mb),Y,db),sh(function(lc){return lc[0]&&lc[2]}),pm(function(lc,xc){xc=xc[1];return{refreshed:lc.value===xc,value:xc}},{refreshed:!1,value:0}),sh(function(lc){return lc.refreshed}),Hh(Mb,Y)),function(lc){l(!1!==
lc[1])}),nh(Ub,function(){l(!1!==Mb(4))}),nh(Yj(Wh(Mb),Fa),function(lc){var xc=lc[1];lc[0]&&!xc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===xc.notAtBottomBecause&&d("auto")}),{followOutput:Mb,autoscrollToBottom:Ub}},$h(Dq,ev,dv,Ly,Ss,Tr,eo)),KC=di(function(a){var d=a[0],l=d.totalCount,H=d.groupIndices;d=d.sizes;var Y=a[1];a=Y.scrollTop;Y=Y.headerHeight;var ka=Dg(),oa=Dg(),Fa=gk(Xe(ka,tg(ol)));return ah(Xe(Fa,tg(function(Qa){return Qa.totalCount})),l),ah(Xe(Fa,tg(function(Qa){return Qa.groupIndices})),
H),ah(Xe(Yj(a,d,Y),sh(function(Qa){return Qa[1].groupOffsetTree!==rj}),tg(function(Qa){return wa(Qa[1].groupOffsetTree,Math.max(Qa[0]-Qa[2],0),"v")[0]}),Og(),tg(function(Qa){return[Qa]})),oa),{groupCounts:ka,topItemsIndexes:oa}},$h(Dq,eo)),My=di(function(a){var d=a[0];a=d.scrollTop;var l=d.viewportHeight,H=d.deviation,Y=d.headerHeight,ka=d.fixedHeaderHeight;d=Dg();var oa=Yf(0),Fa=Yf(0),Qa=Yf(0);a=Xj(Xe(Yj(Wh(a),Wh(l),Wh(Y),Wh(d,Pj),Wh(Qa),Wh(oa),Wh(ka),Wh(H),Wh(Fa)),tg(function(Wa){var db=Wa[0],jb=
Wa[1],Mb=Wa[2],Ub=Wa[3],Nb=Ub[0];Ub=Ub[1];var lc=Wa[4],xc=Wa[6],$b=Wa[7],nc=Wa[8],jc=db-$b;Wa=Wa[5]+xc;var Ic=Math.max(Mb-jc,0),Jc="none",Gd="number"==typeof nc?nc:nc.top||0;nc="number"==typeof nc?nc:nc.bottom||0;return Nb-=$b,Ub+=Mb+xc,Nb+(Mb+xc)>db+Wa-Gd&&(Jc="up"),Ub-$b<db-Ic+jb+nc&&(Jc="down"),"none"!==Jc?[Math.max(jc-Mb-Zm(lc,"top",Jc)-Gd,0),jc-Ic-xc+jb+Zm(lc,"bottom",Jc)+nc]:null}),sh(function(Wa){return null!=Wa}),Og(Pj)),[0,0]);return{listBoundary:d,overscan:Qa,topListHeight:oa,increaseViewportBy:Fa,
visibleRange:a}},$h(eo),{singleton:!0}),Ny={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},Ts=di(function(a){var d=a[0],l=d.sizes,H=d.totalCount,Y=d.data,ka=d.firstItemIndex,oa=d.gap,Fa=a[1],Qa=a[2],Wa=Qa.visibleRange;d=Qa.listBoundary;Qa=Qa.topListHeight;var db=a[3],jb=db.scrolledToInitialItem,Mb=db.initialTopMostItemIndex;db=a[4].topListHeight;var Ub=a[5],Nb=a[6].didMount,lc=a[7].recalcInProgress;a=Yf([]);var xc=Dg();ah(Fa.topItemsIndexes,
a);l=Xj(Xe(Yj(Nb,lc,Wh(Wa,Pj),Wh(H),Wh(l),Wh(Mb),jb,Wh(a),Wh(ka),Wh(oa),Y),sh(function($b){return $b[0]&&!$b[1]}),tg(function($b){var nc=$b[2],jc=nc[0],Ic=nc[1];nc=$b[3];var Jc=$b[5],Gd=$b[6],Xd=$b[7],Re=$b[8],me=$b[9],Le=$b[10];$b=$b[4];var Bf=$b.sizeTree,Ue=$b.offsetTree;if(0===nc||0===jc&&0===Ic)return Cg({},Ny,{totalCount:nc});if(Bf===rj)return $n(function(Kf,Xf,Yg){return Xf.groupOffsetTree!==rj?(Kf=cg(Kf,Xf),[{index:wa(Xf.groupOffsetTree,Kf)[0],size:0,offset:0},{index:Kf,size:0,offset:0,data:Yg&&
Yg[0]}]):[{index:Kf,size:0,offset:0,data:Yg&&Yg[0]}]}("number"==typeof Jc?Jc:"LAST"===Jc.index?nc-1:Jc.index,$b,Le),[],nc,me,$b,Re);Jc=[];if(0<Xd.length){var df,Ud=Xd[0],pd=Xd[Xd.length-1],ld=0;for(Bf=Fm(Fd(Bf,Ud,pd));!(df=Bf()).done;){var qd=df.value;df=qd.value;var ie=Math.min(qd.end,pd);for(qd=Math.max(qd.start,Ud);qd<=ie;qd++)Jc.push({index:qd,size:df,offset:ld,data:Le&&Le[qd]}),ld+=df}}if(!Gd)return $n([],Jc,nc,me,$b,Re);var mf=0<Xd.length?Xd[Xd.length-1]+1:0,sf=function(Kf,Xf,Yg,Lf){return void 0===
Lf&&(Lf=0),0<Lf&&(Xf=Math.max(Xf,Kf[Mf(Kf,Lf,ck)].offset)),Md((vh=Yg,Mk=Mf(Dh=Kf,Xf,sj=Mg),Ol=Mf(Dh,vh,sj,Mk),Dh.slice(Mk,Ol+1)),Oh);var Dh,vh,sj,Mk,Ol}(Ue,jc,Ic,mf);if(0===sf.length)return null;var $f=nc-1;return $n(Xl([],function(Kf){for(var Xf,Yg=Fm(sf);!(Xf=Yg()).done;){var Lf=Xf.value,Dh=Lf.value;Xf=Dh.offset;var vh=Lf.start,sj=Dh.size;Dh.offset<jc&&(Dh=(vh+=Math.floor((jc-Dh.offset+me)/(sj+me)))-Lf.start,Xf+=Dh*sj+Dh*me);vh<mf&&(Xf+=(mf-vh)*sj,vh=mf);for(Lf=Math.min(Lf.end,$f);vh<=Lf&&!(Xf>=
Ic);vh++)Kf.push({index:vh,size:sj,offset:Xf,data:Le&&Le[vh]}),Xf+=sj+me}}),Jc,nc,me,$b,Re)}),sh(function($b){return null!==$b}),Og()),Ny);return ah(Xe(Y,sh(function($b){return void 0!==$b}),tg(function($b){return $b.length})),H),ah(Xe(l,tg(function($b){return $b.topListHeight})),db),ah(db,Qa),ah(Xe(l,tg(function($b){return[$b.top,$b.bottom]})),d),ah(Xe(l,tg(function($b){return $b.items})),xc),Cg({listState:l,topItemsIndexes:a,endReached:gk(Xe(l,sh(function($b){return 0<$b.items.length}),Hh(H,Y),
sh(function($b){var nc=$b[0].items;return nc[nc.length-1].originalIndex===$b[1]-1}),tg(function($b){return[$b[1]-1,$b[2]]}),Og(Pj),tg(function($b){return $b[0]}))),startReached:gk(Xe(l,qj(200),sh(function($b){var nc=$b.items;return 0<nc.length&&nc[0].originalIndex===$b.topItems.length}),tg(function($b){return $b.items[0].index}),Og())),rangeChanged:gk(Xe(l,sh(function($b){return 0<$b.items.length}),tg(function($b){$b=$b.items;for(var nc=0,jc=$b.length-1;"group"===$b[nc].type&&nc<jc;)nc++;for(;"group"===
$b[jc].type&&jc>nc;)jc--;return{startIndex:$b[nc].index,endIndex:$b[jc].index}}),Og(Nk))),itemsRendered:xc},Ub)},$h(Dq,KC,My,Ly,dv,ev,Ss,Aw),{singleton:!0}),LC=di(function(a){var d=a[0],l=d.sizes,H=d.firstItemIndex,Y=d.data;d=d.gap;var ka=a[1].listState;a=a[2].didMount;var oa=Yf(0);return ah(Xe(a,Hh(oa),sh(function(Fa){return 0!==Fa[1]}),Hh(l,H,d,Y),tg(function(Fa){var Qa=Fa[0][1],Wa=Fa[1],db=Fa[2],jb=Fa[3];Fa=Fa[4];var Mb=void 0===Fa?[]:Fa;Fa=0;if(0<Wa.groupIndices.length)for(var Ub,Nb=Fm(Wa.groupIndices);!((Ub=
Nb()).done||Ub.value-Fa>=Qa);)Fa++;Qa+=Fa;return $n(Array.from({length:Qa}).map(function(lc,xc){return{index:xc,size:0,offset:0,data:Mb[xc]}}),[],Qa,jb,Wa,db)})),ka),{initialItemCount:oa}},$h(Dq,Ts,Ss),{singleton:!0}),MC=di(function(a){a=a[0].scrollVelocity;var d=Yf(!1),l=Dg(),H=Yf(!1);return ah(Xe(a,Hh(H,d,l),sh(function(Y){return!!Y[1]}),tg(function(Y){var ka=Y[0],oa=Y[1],Fa=Y[2];Y=Y[3];var Qa=oa.enter;if(Fa){if((0,oa.exit)(ka,Y))return!1}else if(Qa(ka,Y))return!0;return Fa}),Og()),d),nh(Xe(Yj(d,
a,l),Hh(H)),function(Y){var ka=Y[0];Y=Y[1];return ka[0]&&Y&&Y.change&&Y.change(ka[1],ka[2])}),{isSeeking:d,scrollSeekConfiguration:H,scrollVelocity:a,scrollSeekRangeChanged:l}},$h(ev),{singleton:!0}),wH=di(function(a){a=a[0].topItemsIndexes;var d=Yf(0);return ah(Xe(d,sh(function(l){return 0<l}),tg(function(l){return Array.from({length:l}).map(function(H,Y){return Y})})),a),{topItemCount:d}},$h(Ts)),Oy=di(function(a){var d=a[0],l=d.footerHeight,H=d.headerHeight,Y=d.fixedHeaderHeight;d=d.fixedFooterHeight;
var ka=a[1].listState;a=Dg();l=Xj(Xe(Yj(l,d,H,Y,ka),tg(function(oa){var Fa=oa[4];return oa[0]+oa[1]+oa[2]+oa[3]+Fa.offsetBottom+Fa.bottom})),0);return ah(Wh(l),a),{totalListHeight:l,totalListHeightChanged:a}},$h(eo,Ts),{singleton:!0}),xH=Pq(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),gr=di(function(a){function d(xc){0<xc?(H(0,{top:-xc,behavior:"auto"}),ka(0,0)):(ka(0,0),H(0,{top:-xc,behavior:"auto"}))}var l=a[0],H=l.scrollBy,Y=l.scrollTop,ka=l.deviation,
oa=l.scrollingInProgress,Fa=a[1];l=Fa.isScrolling;var Qa=Fa.isAtBottom,Wa=Fa.scrollDirection,db=a[3],jb=db.beforeUnshiftWith,Mb=db.shiftWithOffset,Ub=db.sizes;db=db.gap;var Nb=a[4].log,lc=a[5].recalcInProgress;a=gk(Xe(a[2].listState,Hh(Fa.lastJumpDueToItemResize),pm(function(xc,$b){var nc=xc[1],jc=$b[0],Ic=jc.items,Jc=jc.totalCount;jc=jc.bottom+jc.offsetBottom;var Gd=0;return xc[2]===Jc&&0<nc.length&&0<Ic.length&&(0===Ic[0].originalIndex&&0===nc[0].originalIndex||0!=(Gd=jc-xc[3])&&(Gd+=$b[1])),[Gd,
Ic,Jc,jc]},[0,[],0,0]),sh(function(xc){return 0!==xc[0]}),Hh(Y,Wa,oa,Qa,Nb),sh(function(xc){return!xc[3]&&0!==xc[1]&&"up"===xc[2]}),tg(function(xc){var $b=xc[0][0];return(0,xc[5])("Upward scrolling compensation",{amount:$b},mn.DEBUG),$b})));return nh(Xe(a,Hh(ka,l)),function(xc){var $b=xc[0],nc=xc[1];xc[2]&&xH()?ka(0,nc-$b):d(-$b)}),nh(Xe(Yj(Xj(l,!1),ka,lc),sh(function(xc){return!xc[0]&&!xc[2]&&0!==xc[1]}),tg(function(xc){return xc[1]}),qj(1)),d),ah(Xe(Mb,tg(function(xc){return{top:-xc}})),H),nh(Xe(jb,
Hh(Ub,db),tg(function(xc){var $b=xc[0];return $b*xc[1].lastSize+$b*xc[2]})),function(xc){ka(0,xc);requestAnimationFrame(function(){rk(H,{top:xc});requestAnimationFrame(function(){ka(0,0);lc(0,!1)})})}),{deviation:ka}},$h(eo,ev,Ts,Dq,Tr,Aw)),Py=di(function(a){var d=a[0].totalListHeight,l=a[1].didMount,H=a[2].scrollTo;a=Yf(0);return nh(Xe(l,Hh(a),sh(function(Y){return 0!==Y[1]}),tg(function(Y){return{top:Y[1]}})),function(Y){ei(Xe(d,sh(function(ka){return 0!==ka})),function(){setTimeout(function(){H(0,
Y)})})}),{initialScrollTop:a}},$h(Oy,Ss,eo),{singleton:!0}),Bw=di(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var l=Yf(!1);return{alignToBottom:l,paddingTopAddition:Xj(Xe(Yj(l,d,a),sh(function(H){return H[0]}),tg(function(H){return Math.max(0,H[1]-H[2])}),Og()),0)}},$h(eo,Oy),{singleton:!0}),fv=di(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var l=Dg(),H=Dg(),Y=Dg(),ka=Yf(!1),oa=Yf(void 0);return ah(Xe(Yj(l,H),tg(function(Fa){var Qa=Fa[0];return{scrollTop:Math.max(0,
Qa.scrollTop-Fa[1].offsetTop),scrollHeight:Qa.scrollHeight,viewportHeight:Qa.viewportHeight}})),d),ah(Xe(a,Hh(H),tg(function(Fa){var Qa=Fa[0];return Cg({},Qa,{top:Qa.top+Fa[1].offsetTop})})),Y),{useWindowScroll:ka,customScrollParent:oa,windowScrollContainerState:l,windowViewportRect:H,windowScrollTo:Y}},$h(eo)),Qy=["done","behavior","align"],NC=di(function(a){var d=a[0],l=d.sizes,H=d.totalCount;d=d.gap;var Y=a[1],ka=Y.scrollTop,oa=Y.viewportHeight,Fa=Y.headerHeight,Qa=Y.fixedHeaderHeight,Wa=Y.fixedFooterHeight,
db=Y.scrollingInProgress;a=a[2].scrollToIndex;Y=Dg();return ah(Xe(Y,Hh(l,oa,H,Fa,Qa,Wa,ka),Hh(d),tg(function(jb){var Mb=jb[0],Ub=Mb[0],Nb=Mb[1],lc=Mb[2],xc=Mb[3],$b=Mb[4],nc=Mb[5],jc=Mb[6];Mb=Mb[7];var Ic=jb[1];jb=Ub.done;var Jc=Ub.behavior,Gd=Ub.align,Xd=so(Ub,Qy),Re=null;Ub=gh(Ub,Nb,xc-1);$b=ri(Ub,Nb.offsetTree,Ic)+$b+nc;return $b<Mb+nc?Re=Cg({},Xd,{behavior:Jc,align:null!=Gd?Gd:"start"}):$b+wa(Nb.sizeTree,Ub)[1]>Mb+lc-jc&&(Re=Cg({},Xd,{behavior:Jc,align:null!=Gd?Gd:"end"})),Re?jb&&ei(Xe(db,Mn(1),
sh(function(me){return!1===me})),jb):jb&&jb(),Re}),sh(function(jb){return null!==jb})),a),{scrollIntoView:Y}},$h(Dq,eo,dv,Ts,Tr),{singleton:!0}),Ry=["listState","topItemsIndexes"],Sy=di(function(a){return Cg({},a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},$h(My,LC,Ss,MC,Oy,Py,Bw,fv,NC)),Ur=di(function(a){var d=a[0],l=d.totalCount,H=d.sizeRanges,Y=d.fixedItemSize,ka=d.defaultItemSize,oa=d.trackItemSizes,Fa=d.itemSize,Qa=d.data,Wa=d.firstItemIndex,db=d.groupIndices,jb=d.statefulTotalCount;d=d.gap;
var Mb=a[1],Ub=Mb.initialTopMostItemIndex;Mb=Mb.scrolledToInitialItem;var Nb=a[2],lc=a[3],xc=a[4],$b=xc.listState,nc=xc.topItemsIndexes;xc=so(xc,Ry);var jc=a[5].scrollToIndex,Ic=a[7].topItemCount,Jc=a[8].groupCounts,Gd=a[9];a=a[10];return ah(xc.rangeChanged,Gd.scrollSeekRangeChanged),ah(Xe(Gd.windowViewportRect,tg(function(Xd){return Xd.visibleHeight})),Nb.viewportHeight),Cg({totalCount:l,data:Qa,firstItemIndex:Wa,sizeRanges:H,initialTopMostItemIndex:Ub,scrolledToInitialItem:Mb,topItemsIndexes:nc,
topItemCount:Ic,groupCounts:Jc,fixedItemHeight:Y,defaultItemHeight:ka,gap:d},lc,{statefulTotalCount:jb,listState:$b,scrollToIndex:jc,trackItemSizes:oa,itemSize:Fa,groupIndices:db},xc,Gd,Nb,a)},$h(Dq,Ly,eo,vH,Ts,dv,gr,wH,KC,Sy,Tr)),hr=Pq(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),au=bh.createContext(void 0),Ty=bh.createContext(void 0),gv=["placeholder"],
yH=["style","children"],OC=["style","children"],Eq=di(function(){var a=Yf(function(Qa){return"Item "+Qa}),d=Yf(null),l=Yf(function(Qa){return"Group "+Qa}),H=Yf({}),Y=Yf(xh),ka=Yf("div"),oa=Yf(yl),Fa=function(Qa,Wa){return void 0===Wa&&(Wa=null),Xj(Xe(H,tg(function(db){return db[Qa]}),Og()),Wa)};return{context:d,itemContent:a,groupContent:l,components:H,computeItemKey:Y,headerFooterTag:ka,scrollerRef:oa,FooterComponent:Fa("Footer"),HeaderComponent:Fa("Header"),TopItemListComponent:Fa("TopItemList"),
ListComponent:Fa("List","div"),ItemComponent:Fa("Item","div"),GroupComponent:Fa("Group","div"),ScrollerComponent:Fa("Scroller","div"),EmptyPlaceholder:Fa("EmptyPlaceholder"),ScrollSeekPlaceholder:Fa("ScrollSeekPlaceholder")}}),PC=di(function(a){function d(Y,ka,oa){ah(Xe(Y,Hh(H.components),tg(function(Fa){var Qa,Wa=Fa[0];Fa=Fa[1];return console.warn("react-virtuoso: "+oa+" property is deprecated. Pass components."+ka+" instead."),Cg({},Fa,((Qa={})[ka]=Wa,Qa))})),H.components)}var l=a[0],H=a[1];a={item:zn(H.itemContent,
"Rename the %citem%c prop to %citemContent."),group:zn(H.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:zn(l.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:zn(l.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:zn(l.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Dg(),maxHeightCacheSize:Dg(),footer:Dg(),header:Dg(),HeaderContainer:Dg(),FooterContainer:Dg(),
ItemContainer:Dg(),ScrollContainer:Dg(),GroupContainer:Dg(),ListContainer:Dg(),emptyComponent:Dg(),scrollSeek:Dg()};return nh(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),nh(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
nh(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),nh(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),nh(a.scrollSeek,function(Y){var ka=Y.placeholder;
Y=so(Y,gv);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=Cg({},(0,H.components)(4),{ScrollSeekPlaceholder:ka});(0,H.components)(0,ka);(0,l.scrollSeekConfiguration)(0,Y)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),d(a.emptyComponent,
"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),Cg({},l,H,a)},$h(Ur,Eq)),Uy=function(a){return bh.createElement("div",{style:{height:a.height}})},QC={position:hr(),zIndex:1,overflowAnchor:"none"},RC={overflowAnchor:"none"},hv=bh.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=Dj("listState"),l=bp("sizeRanges"),H=Dj("useWindowScroll"),Y=Dj("customScrollParent"),ka=bp("windowScrollContainerState"),oa=bp("scrollContainerState");H=Y||H?ka:oa;var Fa=Dj("itemContent"),
Qa=Dj("context"),Wa=Dj("groupContent");ka=Dj("trackItemSizes");oa=Dj("itemSize");var db=Dj("log"),jb=bp("gap");l=Mj(l,oa,ka,a?yl:H,db,jb,Y).callbackRef;Y=bh.useState(0);var Mb=Y[0],Ub=Y[1];Dw("deviation",function(Ic){Mb!==Ic&&Ub(Ic)});Y=Dj("EmptyPlaceholder");var Nb=Dj("ScrollSeekPlaceholder")||Uy;H=Dj("ListComponent");var lc=Dj("ItemComponent"),xc=Dj("GroupComponent"),$b=Dj("computeItemKey"),nc=Dj("isSeeking"),jc=0<Dj("groupIndices").length;ka=Dj("paddingTopAddition");ka=a?{}:{boxSizing:"border-box",
paddingTop:d.offsetTop+ka,paddingBottom:d.offsetBottom,marginTop:Mb};return!a&&0===d.totalCount&&Y?(0,Ci.createElement)(Y,Hi(Y,Qa)):(0,Ci.createElement)(H,Cg({},Hi(H,Qa),{ref:l,style:ka,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function(Ic){var Jc=Ic.originalIndex,Gd=$b(Jc+d.firstItemIndex,Ic.data,Qa);return nc?(0,Ci.createElement)(Nb,Cg({},Hi(Nb,Qa),{key:Gd,index:Ic.index,height:Ic.size,type:Ic.type||"item"},"group"===Ic.type?{}:{groupIndex:Ic.groupIndex})):
"group"===Ic.type?(0,Ci.createElement)(xc,Cg({},Hi(xc,Qa),{key:Gd,"data-index":Jc,"data-known-size":Ic.size,"data-item-index":Ic.index,style:QC}),Wa(Ic.index)):(0,Ci.createElement)(lc,Cg({},Hi(lc,Qa),{key:Gd,"data-index":Jc,"data-known-size":Ic.size,"data-item-index":Ic.index,"data-item-group-index":Ic.groupIndex,style:RC}),jc?Fa(Ic.index,Ic.groupIndex,Ic.data,Qa):Fa(Ic.index,Ic.data,Qa))}))}),SC={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Vm=
{width:"100%",height:"100%",position:"absolute",top:0},zH={width:"100%",position:hr(),top:0},iv=bh.memo(function(){var a=Dj("HeaderComponent"),d=bp("headerHeight"),l=Dj("headerFooterTag"),H=Xh(function(ka){return d(fn(ka,"height"))}),Y=Dj("context");return a?(0,Ci.createElement)(l,{ref:H},(0,Ci.createElement)(a,Hi(a,Y))):null}),AH=bh.memo(function(){var a=Dj("FooterComponent"),d=bp("footerHeight"),l=Dj("headerFooterTag"),H=Xh(function(ka){return d(fn(ka,"height"))}),Y=Dj("context");return a?(0,Ci.createElement)(l,
{ref:H},(0,Ci.createElement)(a,Hi(a,Y))):null}),BH=function(a){a=a.children;var d=(0,Ci.useContext)(au),l=bp("viewportHeight"),H=bp("fixedItemHeight"),Y=Xh(Bj(l,function(ka){return fn(ka,"height")}));return bh.useEffect(function(){d&&(l(d.viewportHeight),H(d.itemHeight))},[d,l,H]),bh.createElement("div",{style:Vm,ref:Y,"data-viewport-type":"element"},a)},TC=function(a){a=a.children;var d=(0,Ci.useContext)(au),l=bp("windowViewportRect"),H=bp("fixedItemHeight"),Y=Dj("customScrollParent");Y=qo(l,Y);
return bh.useEffect(function(){d&&(H(d.itemHeight),l({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,l,H]),bh.createElement("div",{ref:Y,style:Vm,"data-viewport-type":"window"},a)},Cw=function(a){a=a.children;var d=Dj("TopItemListComponent"),l=Dj("headerHeight");l=Cg({},zH,{marginTop:l+"px"});var H=Dj("context");return(0,Ci.createElement)(d||"div",{style:l,context:H},a)},Us=Ln(PC,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},bh.memo(function(a){var d=Dj("useWindowScroll"),l=0<Dj("topItemsIndexes").length,H=Dj("customScrollParent"),Y=H||d?TC:BH;return bh.createElement(H||d?Wy:Vy,Cg({},a),bh.createElement(Y,null,bh.createElement(iv,null),bh.createElement(hv,null),bh.createElement(AH,
null)),l&&bh.createElement(Cw,null,bh.createElement(hv,{showTopList:!0})))})),CH=Us.Component,bp=Us.usePublisher,Dj=Us.useEmitterValue,Dw=Us.useEmitter,Vy=ip({usePublisher:bp,useEmitterValue:Dj,useEmitter:Dw}),Wy=no({usePublisher:bp,useEmitterValue:Dj,useEmitter:Dw}),Zp={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Ij={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},ir=Math.round,bu=Math.ceil,Vs=Math.floor,fo=Math.min,Ws=Math.max,
Xy=di(function(a){var d=a[0],l=d.overscan,H=d.visibleRange,Y=d.listBoundary,ka=a[1];d=ka.scrollTop;var oa=ka.viewportHeight,Fa=ka.scrollBy,Qa=ka.scrollTo,Wa=ka.smoothScrollTargetReached,db=ka.scrollContainerState,jb=ka.footerHeight;ka=ka.headerHeight;var Mb=a[2],Ub=a[3],Nb=a[4],lc=Nb.propsReady,xc=Nb.didMount,$b=a[5];Nb=$b.windowViewportRect;var nc=$b.windowScrollTo,jc=$b.useWindowScroll,Ic=$b.customScrollParent;$b=$b.windowScrollContainerState;a=a[6];var Jc=Yf(0),Gd=Yf(0),Xd=Yf(Zp),Re=Yf({height:0,
width:0}),me=Yf({height:0,width:0}),Le=Dg(),Bf=Dg(),Ue=Yf(0),df=Yf(void 0),Ud=Yf({row:0,column:0});ah(Xe(Yj(xc,Gd,df),sh(function(pd){return 0!==pd[1]}),tg(function(pd){return{items:jp(0,pd[1]-1,pd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Xd);ah(Xe(Yj(Wh(Jc),H,Wh(Ud,iq),Wh(me,function(pd,ld){return pd&&pd.width===ld.width&&pd.height===ld.height}),df),Hh(Re),tg(function(pd){var ld=pd[0],qd=ld[0],ie=ld[1],mf=ie[0],sf=ie[1],$f=ld[2],Kf=ld[3],Xf=ld[4],Yg=pd[1];pd=$f.row;
var Lf=$f.column;ld=Kf.height;ie=Kf.width;var Dh=Yg.width;if(0===qd||0===Dh)return Zp;if(0===ie)return Cg({},Ij,{items:jp(0,0,Xf)});Lf=Ws(1,Vs((Dh+Lf)/(ie+Lf)));mf=Lf*Vs((mf+pd)/(ld+pd));sf=Lf*bu((sf+pd)/(ld+pd))-1;sf=fo(qd-1,Ws(sf,Lf-1));mf=jp(fo(sf,Ws(0,mf)),sf,Xf);Kf=qn(Yg,$f,Kf,mf);$f=Kf.top;Kf=Kf.bottom;qd=bu(qd/Lf);return{items:mf,offsetTop:$f,offsetBottom:qd*ld+(qd-1)*pd-Kf,top:$f,bottom:Kf,itemHeight:ld,itemWidth:ie}})),Xd);ah(Xe(df,sh(function(pd){return void 0!==pd}),tg(function(pd){return pd.length})),
Jc);ah(Xe(Re,tg(function(pd){return pd.height})),oa);ah(Xe(Yj(Re,me,Xd,Ud),tg(function(pd){pd=qn(pd[0],pd[3],pd[1],pd[2].items);return[pd.top,pd.bottom]}),Og(Pj)),Y);H=gk(Xe(Wh(Xd),sh(function(pd){return 0<pd.items.length}),Hh(Jc),sh(function(pd){var ld=pd[0].items;return ld[ld.length-1].index===pd[1]-1}),tg(function(pd){return pd[1]-1}),Og()));Y=gk(Xe(Wh(Xd),sh(function(pd){pd=pd.items;return 0<pd.length&&0===pd[0].index}),Wk(0),Og()));oa=gk(Xe(Wh(Xd),sh(function(pd){return 0<pd.items.length}),tg(function(pd){pd=
pd.items;return{startIndex:pd[0].index,endIndex:pd[pd.length-1].index}}),Og(Nk)));ah(oa,Ub.scrollSeekRangeChanged);ah(Xe(Le,Hh(Re,me,Jc,Ud),tg(function(pd){var ld=pd[1],qd=pd[2],ie=pd[3],mf=pd[4],sf=li(pd[0]);pd=sf.align;var $f=sf.behavior,Kf=sf.offset;sf=sf.index;"LAST"===sf&&(sf=ie-1);ie=Wn(ld,mf,qd,Ws(0,sf,fo(ie-1,sf)));return"end"===pd?ie=ir(ie-ld.height+qd.height):"center"===pd&&(ie=ir(ie-ld.height/2+qd.height/2)),Kf&&(ie+=Kf),{top:ie,behavior:$f}})),Qa);xc=Xj(Xe(Xd,tg(function(pd){return pd.offsetBottom+
pd.bottom})),0);return ah(Xe(Nb,tg(function(pd){return{width:pd.visibleWidth,height:pd.visibleHeight}})),Re),Cg({data:df,totalCount:Jc,viewportDimensions:Re,itemDimensions:me,scrollTop:d,scrollHeight:Bf,overscan:l,scrollBy:Fa,scrollTo:Qa,scrollToIndex:Le,smoothScrollTargetReached:Wa,windowViewportRect:Nb,windowScrollTo:nc,useWindowScroll:jc,customScrollParent:Ic,windowScrollContainerState:$b,deviation:Ue,scrollContainerState:db,footerHeight:jb,headerHeight:ka,initialItemCount:Gd,gap:Ud},Ub,{gridState:Xd,
totalListHeight:xc},Mb,{startReached:Y,endReached:H,rangeChanged:oa,propsReady:lc},a)},$h(My,eo,ev,MC,Ss,fv,Tr)),UC=["placeholder"],DH=di(function(){var a=Yf(function(Wa){return"Item "+Wa}),d=Yf({}),l=Yf(null),H=Yf("virtuoso-grid-item"),Y=Yf("virtuoso-grid-list"),ka=Yf(xh),oa=Yf("div"),Fa=Yf(yl),Qa=function(Wa,db){return void 0===db&&(db=null),Xj(Xe(d,tg(function(jb){return jb[Wa]}),Og()),db)};return{context:l,itemContent:a,components:d,computeItemKey:ka,itemClassName:H,listClassName:Y,headerFooterTag:oa,
scrollerRef:Fa,FooterComponent:Qa("Footer"),HeaderComponent:Qa("Header"),ListComponent:Qa("List","div"),ItemComponent:Qa("Item","div"),ScrollerComponent:Qa("Scroller","div"),ScrollSeekPlaceholder:Qa("ScrollSeekPlaceholder","div")}}),fk=di(function(a){function d(Y,ka,oa){ah(Xe(Y,Hh(H.components),tg(function(Fa){var Qa,Wa=Fa[0];Fa=Fa[1];return console.warn("react-virtuoso: "+oa+" property is deprecated. Pass components."+ka+" instead."),Cg({},Fa,((Qa={})[ka]=Wa,Qa))})),H.components)}var l=a[0],H=a[1];
a={item:zn(H.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Dg(),ScrollContainer:Dg(),ListContainer:Dg(),emptyComponent:Dg(),scrollSeek:Dg()};return nh(a.scrollSeek,function(Y){var ka=Y.placeholder;Y=so(Y,UC);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=Cg({},(0,H.components)(4),{ScrollSeekPlaceholder:ka});(0,H.components)(0,ka);(0,l.scrollSeekConfiguration)(0,
Y)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),Cg({},l,H,a)},$h(Xy,DH)),cu=bh.memo(function(){var a=og("gridState"),d=og("listClassName"),l=og("itemClassName"),H=og("itemContent"),Y=og("computeItemKey"),ka=og("isSeeking"),oa=yp("scrollHeight"),Fa=og("ItemComponent"),Qa=og("ListComponent"),Wa=og("ScrollSeekPlaceholder"),db=og("context"),jb=yp("itemDimensions"),Mb=yp("gap"),Ub=og("log"),Nb=Xh(function(lc){oa(lc.parentElement.parentElement.scrollHeight);
var xc=lc.firstChild;xc&&jb(xc.getBoundingClientRect());Mb({row:Zl("row-gap",getComputedStyle(lc).rowGap,Ub),column:Zl("column-gap",getComputedStyle(lc).columnGap,Ub)})});return(0,Ci.createElement)(Qa,Cg({ref:Nb,className:d},Hi(Qa,db),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(lc){var xc=Y(lc.index,lc.data,db);return ka?(0,Ci.createElement)(Wa,Cg({key:xc},Hi(Wa,db),{index:lc.index,height:a.itemHeight,width:a.itemWidth})):(0,Ci.createElement)(Fa,Cg({},Hi(Fa,
db),{className:l,"data-index":lc.index,key:xc}),H(lc.index,lc.data,db))}))}),jv=bh.memo(function(){var a=og("HeaderComponent"),d=yp("headerHeight"),l=og("headerFooterTag"),H=Xh(function(ka){return d(fn(ka,"height"))}),Y=og("context");return a?(0,Ci.createElement)(l,{ref:H},(0,Ci.createElement)(a,Hi(a,Y))):null}),EH=bh.memo(function(){var a=og("FooterComponent"),d=yp("footerHeight"),l=og("headerFooterTag"),H=Xh(function(ka){return d(fn(ka,"height"))}),Y=og("context");return a?(0,Ci.createElement)(l,
{ref:H},(0,Ci.createElement)(a,Hi(a,Y))):null}),rl=function(a){a=a.children;var d=(0,Ci.useContext)(Ty),l=yp("itemDimensions"),H=yp("viewportDimensions"),Y=Xh(function(ka){H(ka.getBoundingClientRect())});return bh.useEffect(function(){d&&(H({height:d.viewportHeight,width:d.viewportWidth}),l({height:d.itemHeight,width:d.itemWidth}))},[d,H,l]),bh.createElement("div",{style:Vm,ref:Y},a)},Xs=function(a){a=a.children;var d=(0,Ci.useContext)(Ty),l=yp("windowViewportRect"),H=yp("itemDimensions"),Y=og("customScrollParent");
Y=qo(l,Y);return bh.useEffect(function(){d&&(H({height:d.itemHeight,width:d.itemWidth}),l({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,l,H]),bh.createElement("div",{ref:Y,style:Vm},a)},Ew=Ln(fk,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},bh.memo(function(a){a=Cg({},a);var d=og("useWindowScroll"),l=og("customScrollParent"),H=l||d?Xs:rl;return bh.createElement(l||d?Ys:zp,Cg({},a),bh.createElement(H,null,bh.createElement(jv,null),bh.createElement(cu,null),bh.createElement(EH,null)))})),yp=Ew.usePublisher,og=Ew.useEmitterValue,kv=Ew.useEmitter,zp=ip({usePublisher:yp,useEmitterValue:og,useEmitter:kv}),Ys=no({usePublisher:yp,useEmitterValue:og,useEmitter:kv}),lv=di(function(){var a=Yf(function(Qa){return bh.createElement("td",
null,"Item $",Qa)}),d=Yf(null),l=Yf(null),H=Yf(null),Y=Yf({}),ka=Yf(xh),oa=Yf(yl),Fa=function(Qa,Wa){return void 0===Wa&&(Wa=null),Xj(Xe(Y,tg(function(db){return db[Qa]}),Og()),Wa)};return{context:d,itemContent:a,fixedHeaderContent:l,fixedFooterContent:H,components:Y,computeItemKey:ka,scrollerRef:oa,TableComponent:Fa("Table","table"),TableHeadComponent:Fa("TableHead","thead"),TableFooterComponent:Fa("TableFoot","tfoot"),TableBodyComponent:Fa("TableBody","tbody"),TableRowComponent:Fa("TableRow","tr"),
ScrollerComponent:Fa("Scroller","div"),EmptyPlaceholder:Fa("EmptyPlaceholder"),ScrollSeekPlaceholder:Fa("ScrollSeekPlaceholder"),FillerRow:Fa("FillerRow")}}),Yy=di(function(a){return Cg({},a[0],a[1])},$h(Ur,lv)),VC=function(a){return bh.createElement("tr",null,bh.createElement("td",{style:{height:a.height}}))},du=function(a){return bh.createElement("tr",null,bh.createElement("td",{style:{height:a.height,padding:0,border:0}}))},Fw=bh.memo(function(){var a=Vj("listState"),d=Nl("sizeRanges"),l=Vj("useWindowScroll"),
H=Vj("customScrollParent"),Y=Nl("windowScrollContainerState"),ka=Nl("scrollContainerState");l=H||l?Y:ka;var oa=Vj("itemContent");Y=Vj("trackItemSizes");H=Mj(d,Vj("itemSize"),Y,l,Vj("log"),void 0,H);d=H.callbackRef;var Fa=H.ref;H=bh.useState(0);var Qa=H[0],Wa=H[1];mv("deviation",function($b){Qa!==$b&&(Fa.current.style.marginTop=$b+"px",Wa($b))});Y=Vj("EmptyPlaceholder");var db=Vj("ScrollSeekPlaceholder")||VC;l=Vj("FillerRow")||du;H=Vj("TableBodyComponent");var jb=Vj("TableRowComponent"),Mb=Vj("computeItemKey"),
Ub=Vj("isSeeking");ka=Vj("paddingTopAddition");var Nb=Vj("firstItemIndex"),lc=Vj("statefulTotalCount"),xc=Vj("context");if(0===lc&&Y)return(0,Ci.createElement)(Y,Hi(Y,xc));Y=a.offsetTop+ka+Qa;ka=a.offsetBottom;Y=0<Y?bh.createElement(l,{height:Y,key:"padding-top"}):null;l=0<ka?bh.createElement(l,{height:ka,key:"padding-bottom"}):null;a=a.items.map(function($b){var nc=$b.originalIndex,jc=Mb(nc+Nb,$b.data,xc);return Ub?(0,Ci.createElement)(db,Cg({},Hi(db,xc),{key:jc,index:$b.index,height:$b.size,type:$b.type||
"item"})):(0,Ci.createElement)(jb,Cg({},Hi(jb,xc),{key:jc,"data-index":nc,"data-known-size":$b.size,"data-item-index":$b.index,style:{overflowAnchor:"none"}}),oa($b.index,$b.data,xc))});return(0,Ci.createElement)(H,Cg({ref:d,"data-test-id":"virtuoso-item-list"},Hi(H,xc)),[Y].concat(a,[l]))}),eu=function(a){a=a.children;var d=(0,Ci.useContext)(au),l=Nl("viewportHeight"),H=Nl("fixedItemHeight"),Y=Xh(Bj(l,function(ka){return fn(ka,"height")}));return bh.useEffect(function(){d&&(l(d.viewportHeight),H(d.itemHeight))},
[d,l,H]),bh.createElement("div",{style:Vm,ref:Y,"data-viewport-type":"element"},a)},WC=function(a){a=a.children;var d=(0,Ci.useContext)(au),l=Nl("windowViewportRect"),H=Nl("fixedItemHeight"),Y=Vj("customScrollParent");Y=qo(l,Y);return bh.useEffect(function(){d&&(H(d.itemHeight),l({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,l,H]),bh.createElement("div",{ref:Y,style:Vm,"data-viewport-type":"window"},a)},Gw=Ln(Yy,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},bh.memo(function(a){var d=Vj("useWindowScroll"),l=Vj("customScrollParent"),H=Nl("fixedHeaderHeight"),Y=Nl("fixedFooterHeight"),ka=Vj("fixedHeaderContent"),oa=Vj("fixedFooterContent"),Fa=Vj("context");H=Xh(Bj(H,function(jb){return fn(jb,
"height")}));var Qa=Xh(Bj(Y,function(jb){return fn(jb,"height")}));Y=l||d?XC:Zy;d=l||d?WC:eu;l=Vj("TableComponent");var Wa=Vj("TableHeadComponent"),db=Vj("TableFooterComponent");ka=ka?bh.createElement(Wa,Cg({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:H},Hi(Wa,Fa)),ka()):null;oa=oa?bh.createElement(db,Cg({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Qa},Hi(db,Fa)),oa()):null;return bh.createElement(Y,Cg({},a),bh.createElement(d,null,bh.createElement(l,Cg({style:{borderSpacing:0}},
Hi(l,Fa)),[ka,bh.createElement(Fw,{key:"TableBody"}),oa])))})),Nl=Gw.usePublisher,Vj=Gw.useEmitterValue,mv=Gw.useEmitter,Zy=ip({usePublisher:Nl,useEmitterValue:Vj,useEmitter:mv}),XC=no({usePublisher:Nl,useEmitterValue:Vj,useEmitter:mv}),$y=vf(V(22)),$p=function(a){function d(l){l=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+l+" for more information.")||this;if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return l}Go(d,a);return d}(Gp(Error)),YC={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",
darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",
gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",
olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ZC=/^#[a-fA-F0-9]{6}$/,nv=/^#[a-fA-F0-9]{8}$/,Vr=/^#[a-fA-F0-9]{3}$/,az=/^#[a-fA-F0-9]{4}$/,Hw=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,$C=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,
bz=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,cp=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Zs=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},Fn=kq(lq,lq.length,[]),ov=V(586),zo=vf(V(22)),km=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||
0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const l=a.ownerDocument,H=l.activeElement;H!==a&&a.focus();l.execCommand("insertText",!1,d)||km.insertTextFirefox(a,d);H===l.body?a.blur():H instanceof HTMLElement&&H!==a&&H.focus()}static set(a,d){a.select();km.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:l}=a;return a.value.slice(d?d:void 0,l?l:void 0)}static wrapSelection(a,d,l){const {selectionStart:H,
selectionEnd:Y}=a,ka=km.getSelection(a);km.insert(a,d+ka+(null!=l?l:d));a.selectionStart=(H||0)+d.length;a.selectionEnd=(Y||0)+d.length}static replace(a,d,l){let H=0;a.value.replace(d,(...Y)=>{const ka=H+Y[Y.length-2],oa=Y[0].length;a.selectionStart=ka;a.selectionEnd=ka+oa;Y="string"===typeof l?l:l(...Y);km.insert(a,Y);a.selectionStart=ka;H+=Y.length-oa;return Y})}static findLineEnd(a,d){const l=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(l)?d:l+1}static indent(a){var d;const {selectionStart:l,
selectionEnd:H,value:Y}=a;var ka=Y.slice(l,H);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=Y.lastIndexOf("\n",l-1)+1;var oa=a.value.slice(d,H-1);ka=oa.replace(/^|\n/g,"$\x26  ");oa=ka.length-oa.length;a.setSelectionRange(d,H-1);km.insert(a,ka);a.setSelectionRange(l+1,H+oa)}else km.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:l,value:H}=a;var Y=H.lastIndexOf("\n",d-1)+1;const ka=km.findLineEnd(H,l);var oa=a.value.slice(Y,ka);const Fa=oa.replace(/(^|\n)(\t| {1,2})/g,
"$1");oa=oa.length-Fa.length;a.setSelectionRange(Y,ka);km.insert(a,Fa);Y=(Y=/\t| {1,2}/.exec(H.slice(Y,d)))?Y[0].length:0;a.setSelectionRange(d-Y,Math.max(d-Y,l-oa))}},Jj=V(586),Wr=a=>a.stopPropagation(),aq=zo.memo(function({font:a,text:d,color:l,fontStyle:H,fontSize:Y,fontWeight:ka,offsetX:oa=0,offsetY:Fa=0,scale:Qa=1,isEditing:Wa=!1,pointerEvents:db=!1,onBlur:jb,onChange:Mb}){const Ub=zo.useRef(null),Nb=zo.useRef(!1),lc=zo.useCallback(Jc=>{Mb(Gt.normalizeText(Jc.currentTarget.value))},[Mb]),xc=
zo.useCallback(Jc=>{if("Escape"!==Jc.key)if("Tab"===Jc.key&&0===d.length)Jc.preventDefault();else{if("Meta"!==Jc.key&&!Jc.metaKey)Jc.stopPropagation();else if("z"===Jc.key&&Jc.metaKey){document.execCommand(Jc.shiftKey?"redo":"undo",!1);Jc.stopPropagation();Jc.preventDefault();return}"Tab"===Jc.key&&(Jc.preventDefault(),Jc.shiftKey?km.unindent(Jc.currentTarget):km.indent(Jc.currentTarget),null==Mb?void 0:Mb(Gt.normalizeText(Jc.currentTarget.value)))}},[Mb]),$b=zo.useCallback(Jc=>{Wa&&(Jc.currentTarget.setSelectionRange(0,
0),null==jb?void 0:jb())},[jb]),nc=zo.useCallback(Jc=>{Wa&&Nb.current&&document.activeElement===Jc.currentTarget&&Jc.currentTarget.select()},[Wa]),jc=zo.useCallback(Jc=>{Wa&&Jc.stopPropagation()},[Wa]);zo.useEffect(()=>{Wa&&requestAnimationFrame(()=>{Nb.current=!0;const Jc=Ub.current;Jc&&(Jc.focus(),Jc.select())})},[Wa,jb]);const Ic=zo.useRef(null);zo.useLayoutEffect(()=>{const Jc=Ic.current;if(Jc){var Gd=Nj(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:Y,lineHeight:1,fontWeight:ka},
4);Jc.style.transform=`scale(${Qa}, ${Qa}) translate(${oa}px, ${Fa}px)`;Jc.style.width=Gd[0]+1+"px";Jc.style.height=Gd[1]+1+"px"}},[d,ka,Y,Fa,oa,Qa]);return(0,Jj.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Jj.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Ic,style:{font:a,fontStyle:H,fontSize:Y,fontWeight:ka,color:l,pointerEvents:db?"all":"none",userSelect:Wa?"text":"none"},children:[Wa?(0,Jj.jsx)("textarea",{ref:Ub,style:{font:a,color:l,fontStyle:H,fontSize:Y,fontWeight:ka},
className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:l,onFocus:nc,onChange:lc,onKeyDown:xc,onBlur:$b,onPointerDown:jc,onContextMenu:Wr,onCopy:Wr,onPaste:Wr,onCut:Wr}):d,"​"]})})}),jr=V(586),cz={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Xr=class extends to{constructor(){super(...arguments);gb(this,"canEdit",
!0);gb(this,"ReactComponent",gf(({events:a,isErasing:d,isBinding:l,isSelected:H,isEditing:Y,onEditingEnd:ka})=>{const {props:{size:[oa,Fa],stroke:Qa,fill:Wa,noFill:db,strokeWidth:jb,strokeType:Mb,borderRadius:Ub,opacity:Nb,label:lc,italic:xc,fontWeight:$b,fontSize:nc}}=this;var jc=lc||Y?Nj(lc,{fontFamily:"var(--ls-font-family)",fontSize:nc,lineHeight:1,fontWeight:$b},4):[0,0];const Ic=le.mul(this.props.size,.5);jc=Math.max(.5,Math.min(1,oa/jc[0],Fa/jc[1]));const Jc=this.getBounds(),Gd=$y.useMemo(()=>
le.sub(Ic,le.toFixed([Jc.width/2,Jc.height/2])),[Jc,jc,Ic]),Xd=$y.useCallback(Re=>{var me;null==(me=this.update)?void 0:me.call(this,{label:Re})},[lc]);return(0,jr.jsxs)("div",qf(ne({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,jr.jsx)(aq,{font:"20px / 1 var(--ls-font-family)",text:lc,color:dh(Qa,"text"),offsetX:Gd[0],offsetY:Gd[1],fontSize:nc,scale:jc,isEditing:Y,onChange:Xd,onBlur:ka,fontStyle:xc?"italic":"normal",fontWeight:$b,pointerEvents:!!lc}),
(0,jr.jsxs)(vp,{opacity:d?.2:Nb,children:[l&&(0,jr.jsx)(Mp,{mode:"svg",strokeWidth:jb,size:[oa,Fa]}),(0,jr.jsx)("rect",{className:H||!db?"tl-hitarea-fill":"tl-hitarea-stroke",x:jb/2,y:jb/2,rx:Ub,ry:Ub,width:Math.max(.01,oa-jb),height:Math.max(.01,Fa-jb),pointerEvents:"all"}),(0,jr.jsx)("rect",{x:jb/2,y:jb/2,rx:Ub,ry:Ub,width:Math.max(.01,oa-jb),height:Math.max(.01,Fa-jb),strokeWidth:jb,stroke:dh(Qa,"stroke"),strokeDasharray:"dashed"===Mb?"8 2":void 0,fill:db?"none":dh(Wa,"background")})]})]}))}));
gb(this,"setScaleLevel",a=>yi(this,null,function*(){this.update({scaleLevel:a,fontSize:cz[null!=a?a:"md"],strokeWidth:cz[null!=a?a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",gf(()=>{const {props:{size:[a,d],borderRadius:l,isLocked:H}}=this;return(0,jr.jsx)("g",{children:(0,jr.jsx)("rect",{width:a,height:d,rx:l,ry:l,fill:"transparent",strokeDasharray:H?"8 2":void 0})})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));
void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return $m(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};gb(Xr,"id","box");gb(Xr,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});he([Df],Xr.prototype,"scaleLevel",1);he([xg],Xr.prototype,"setScaleLevel",2);var Iw=vf(V(22)),No=V(586),Oo=
{xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Ao=class extends sx{constructor(){super(...arguments);gb(this,"canEdit",!0);gb(this,"ReactComponent",gf(({isSelected:a,isErasing:d,events:l,isEditing:H,onEditingEnd:Y})=>{const {size:[ka,oa],stroke:Fa,fill:Qa,noFill:Wa,strokeWidth:db,strokeType:jb,opacity:Mb,label:Ub,italic:Nb,fontWeight:lc,fontSize:xc}=this.props;var $b=Ub||H?Nj(Ub,{fontFamily:"var(--ls-font-family)",fontSize:xc,lineHeight:1,fontWeight:lc},4):[0,0];const nc=le.mul(this.props.size,.5);$b=Math.max(.5,
Math.min(1,ka/$b[0],oa/$b[1]));const jc=this.getBounds(),Ic=Iw.useMemo(()=>le.sub(nc,le.toFixed([jc.width/2,jc.height/2])),[jc,$b,nc]),Jc=Iw.useCallback(Gd=>{var Xd;null==(Xd=this.update)?void 0:Xd.call(this,{label:Gd})},[Ub]);return(0,No.jsxs)("div",qf(ne({},l),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,No.jsx)(aq,{font:"18px / 1 var(--ls-font-family)",text:Ub,color:dh(Fa,"text"),offsetX:Ic[0],offsetY:Ic[1],scale:$b,isEditing:H,onChange:Jc,
onBlur:Y,fontStyle:Nb?"italic":"normal",fontSize:xc,fontWeight:lc,pointerEvents:!!Ub}),(0,No.jsxs)(vp,qf(ne({},l),{opacity:d?.2:Mb,children:[(0,No.jsx)("ellipse",{className:a||!Wa?"tl-hitarea-fill":"tl-hitarea-stroke",cx:ka/2,cy:oa/2,rx:Math.max(.01,(ka-db)/2),ry:Math.max(.01,(oa-db)/2)}),(0,No.jsx)("ellipse",{cx:ka/2,cy:oa/2,rx:Math.max(.01,(ka-db)/2),ry:Math.max(.01,(oa-db)/2),strokeWidth:db,stroke:dh(Fa,"stroke"),strokeDasharray:"dashed"===jb?"8 2":void 0,fill:Wa?"none":dh(Qa,"background")})]}))]}))}));
gb(this,"setScaleLevel",a=>yi(this,null,function*(){this.update({scaleLevel:a,fontSize:Oo[null!=a?a:"md"],strokeWidth:Oo[null!=a?a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",gf(()=>{const {size:[a,d],isLocked:l}=this.props;return(0,No.jsx)("g",{children:(0,No.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:l?"8 2":"undefined"})})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],
1));return $m(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,l],stroke:H,fill:Y,noFill:ka,strokeWidth:oa,strokeType:Fa,opacity:Qa}=this.props;return(0,No.jsxs)("g",{opacity:Qa,children:[(0,No.jsx)("ellipse",{className:ka?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:l/2,rx:Math.max(.01,(d-oa)/2),ry:Math.max(.01,(l-oa)/2)}),(0,No.jsx)("ellipse",{cx:d/2,cy:l/2,rx:Math.max(.01,(d-oa)/2),ry:Math.max(.01,(l-oa)/2),strokeWidth:oa,stroke:dh(H,
"stroke"),strokeDasharray:"dashed"===Fa?"8 2":void 0,fill:ka?"none":dh(Y,"background")})]})}};gb(Ao,"id","ellipse");gb(Ao,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});he([Df],Ao.prototype,"scaleLevel",1);he([xg],Ao.prototype,"setScaleLevel",2);var $s=V(586),pv=class extends Qv{constructor(){super(...arguments);gb(this,"ReactComponent",gf(({events:a})=>
{const d=this.getBounds(),l=ff(),H=l.selectedShapesArray.some(ka=>l.shapesInGroups([this]).includes(ka)),Y=this.ReactIndicator;return(0,$s.jsxs)(vp,qf(ne({},a),{className:"tl-group-container",children:[(0,$s.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),H&&(0,$s.jsx)("g",{stroke:"var(--color-selectedFill)",children:(0,$s.jsx)(Y,{})})]}))}));gb(this,"ReactIndicator",gf(()=>{const a=this.getBounds();return(0,$s.jsx)("rect",
{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};gb(pv,"id","group");gb(pv,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var at=V(586),aD={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Fq=class extends yt{constructor(a={}){super(a);gb(this,"ReactComponent",gf(({events:d,isErasing:l})=>{const {pointsPath:H,props:{stroke:Y,strokeWidth:ka,opacity:oa}}=this;return(0,at.jsx)(vp,qf(ne({},d),{opacity:l?.2:1,children:(0,at.jsx)("path",
{d:H,strokeWidth:16*ka,stroke:dh(Y,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:oa})}))}));gb(this,"setScaleLevel",d=>yi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:aD[null!=d?d:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",gf(()=>{const {pointsPath:d,props:l}=this;return(0,at.jsx)("path",{d,fill:"none",strokeDasharray:l.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",d=>{d=$m(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=
Math.max(d.strokeWidth,1));return d});Qg(this)}get pointsPath(){const {points:a}=this.props;return mu.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:l,opacity:H}}=this;return(0,at.jsx)("path",{d:a,strokeWidth:16*l,stroke:dh(d,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:H})}};gb(Fq,"id","highlighter");gb(Fq,"defaultProps",{id:"highlighter",
parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});he([Df],Fq.prototype,"pointsPath",1);he([Df],Fq.prototype,"scaleLevel",1);he([xg],Fq.prototype,"setScaleLevel",2);var Jw=vf(V(22)),qv=V(586),rv={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},kr=class extends to{constructor(){super(...arguments);gb(this,"canChangeAspectRatio",!0);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"htmlAnchorRef",Jw.createRef());gb(this,
"setScaleLevel",a=>yi(this,null,function*(){var d;const l=le.mul(this.props.size,rv[null!=a?a:"md"]/rv[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield Pl();this.update({size:l})}));gb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const l=this.htmlAnchorRef.current.getBoundingClientRect(),[H,Y]=le.div([l.width,l.height],null!=(d=null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(H||400,1400),10),Math.max(Math.min(Y||400,1400),10)]})}return this});
gb(this,"ReactComponent",gf(({events:a,isErasing:d,isEditing:l})=>{const {props:{html:H,scaleLevel:Y}}=this,ka=Sq(),oa=ff(),Fa=oa.selectedIds.has(this.id),Qa=ka||Fa&&!l||"select"!==oa.selectedTool.id,Wa=Jw.useCallback(jb=>{Qa||jb.stopPropagation()},[Qa]),db=rv[null!=Y?Y:"md"];Jw.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:oa.viewport.camera.zoom}),oa.persist(!0))},[]);return(0,qv.jsx)(up,qf(ne({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,qv.jsx)("div",
{onWheelCapture:Wa,onPointerDown:Wa,onPointerUp:Wa,className:"tl-html-container",style:{pointerEvents:ka||!l&&!Fa?"none":"all",overflow:l?"auto":"hidden",width:`calc(100% / ${db})`,height:`calc(100% / ${db})`,transform:`scale(${db})`},children:(0,qv.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:H.trim()}})})}))}));gb(this,"ReactIndicator",gf(()=>{const {props:{size:[a,d],isLocked:l}}=this;return(0,qv.jsx)("rect",{width:a,height:d,fill:"transparent",
strokeDasharray:l?"8 2":"undefined"})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return $m(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};gb(kr,"id","html");gb(kr,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});he([Df],kr.prototype,"scaleLevel",1);he([xg],kr.prototype,"setScaleLevel",2);var fu=vf(V(22)),lf=V(586),Wg=class extends to{constructor(){super(...arguments);
gb(this,"frameRef",fu.createRef());gb(this,"canEdit",!0);gb(this,"onIFrameSourceChange",a=>{this.update({url:a})});gb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});gb(this,"ReactComponent",gf(({events:a,isErasing:d,isEditing:l})=>{fu.useRef(null);const H=ff();return(0,lf.jsx)(up,qf(ne({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,lf.jsx)("div",{className:"tl-iframe-container",
style:{pointerEvents:l||H.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,lf.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,lf.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));gb(this,"ReactIndicator",gf(()=>{const {props:{size:[a,d],isLocked:l}}=this;return(0,lf.jsx)("rect",
{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:l?"8 2":"undefined"})}))}};gb(Wg,"id","iframe");gb(Wg,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});he([xg],Wg.prototype,"onIFrameSourceChange",2);he([xg],Wg.prototype,"reload",2);var Kw=vf(V(22)),bt=V(586),sv=class extends tx{constructor(){super(...arguments);gb(this,"ReactComponent",gf(({events:a,isErasing:d,isBinding:l,asset:H})=>{const {props:{opacity:Y,objectFit:ka,clipping:oa,size:[Fa,
Qa]}}=this,[Wa,db,jb,Mb]=Array.isArray(oa)?oa:[oa,oa,oa,oa],{handlers:Ub}=Kw.useContext(yj);return(0,bt.jsxs)(up,qf(ne({},a),{opacity:d?.2:Y,children:[l&&(0,bt.jsx)(Mp,{mode:"html",strokeWidth:4,size:[Fa,Qa]}),(0,bt.jsx)("div",{"data-asset-loaded":!!H,className:"tl-image-shape-container",children:H?(0,bt.jsx)("img",{src:Ub?Ub.makeAssetUrl(H.src):H.src,draggable:!1,style:{position:"relative",top:-Wa,left:-Mb,width:Fa+(Mb-db),height:Qa+(Wa-jb),objectFit:ka}}):"Asset is missing"})]}))}));gb(this,"ReactIndicator",
gf(()=>{const {props:{size:[a,d],isLocked:l}}=this;return(0,bt.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:l?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,l;const H=this.getBounds(),{assetId:Y,clipping:ka}=this.props;if(a=a.find(oa=>oa.id===Y)){Array.isArray(ka);const oa=null==(l=null==(d=window.logseq)?void 0:d.api)?void 0:l.make_asset_url;return(0,bt.jsx)("image",{width:H.width,height:H.height,href:oa?oa(a.src):a.src})}return super.getShapeSVGJsx({})}};gb(sv,"id",
"image");gb(sv,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Lw=vf(V(22)),dz=vf(V(22)),Mw=V(586),ct=V(586),zj={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},bD=dz.memo(function({style:a,start:d,end:l,decorationStart:H,decorationEnd:Y,scaleLevel:ka}){const oa=le.dist(d,l);if(2>oa)return null;const {strokeWidth:Fa}=a,Qa=1+Fa*zj[null!=ka?ka:"md"]/10,Wa="M"+le.toFixed(d)+"L"+le.toFixed(l);ka=Math.min(oa/
3,Fa*zj[null!=ka?ka:"md"]);H=H?lp(d,l,ka):null;Y=Y?lp(l,d,ka):null;return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)("path",{className:"tl-stroke-hitarea",d:Wa}),(0,ct.jsx)("path",{d:Wa,strokeWidth:Qa,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),H&&(0,ct.jsx)(Xn,{left:H.left,middle:d,right:H.right,stroke:a.stroke,strokeWidth:Qa}),Y&&(0,ct.jsx)(Xn,{left:Y.left,middle:l,right:Y.right,stroke:a.stroke,strokeWidth:Qa})]})}),
tv=V(586),Tn=V(586),FH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},bq=class extends yu{constructor(){super(...arguments);gb(this,"hideSelection",!0);gb(this,"canEdit",!0);gb(this,"ReactComponent",gf(({events:a,isErasing:d,isEditing:l,onEditingEnd:H})=>{const {stroke:Y,handles:{start:ka,end:oa},opacity:Fa,label:Qa,italic:Wa,fontWeight:db,fontSize:jb,id:Mb}=this.props,Ub=Qa||l?Nj(Qa||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:jb,lineHeight:1,fontWeight:db},6):[0,0],Nb=le.med(ka.point,oa.point);
var lc=le.dist(ka.point,oa.point);lc=Math.max(.5,Math.min(1,Math.max(lc/(Ub[1]+128),lc/(Ub[0]+128))));const xc=this.getBounds(),$b=Lw.useMemo(()=>le.sub(Nb,le.toFixed([xc.width/2,xc.height/2])),[xc,lc,Nb]),nc=Lw.useCallback(jc=>{var Ic;null==(Ic=this.update)?void 0:Ic.call(this,{label:jc})},[Qa]);return(0,Tn.jsxs)("div",qf(ne({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-line-container",children:[(0,Tn.jsx)(aq,{font:"20px / 1 var(--ls-font-family)",text:Qa,fontSize:jb,
color:dh(Y,"text"),offsetX:$b[0],offsetY:$b[1],scale:lc,isEditing:l,onChange:nc,onBlur:H,fontStyle:Wa?"italic":"normal",fontWeight:db,pointerEvents:!!Qa}),(0,Tn.jsxs)(vp,{opacity:d?.2:Fa,id:Mb+"_svg",children:[(0,Tn.jsx)(um,{id:Mb,bounds:xc,labelSize:Ub,offset:$b,scale:lc}),(0,Tn.jsx)("g",{pointerEvents:"none",mask:Qa||l?`url(#${Mb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));gb(this,"setScaleLevel",a=>yi(this,null,function*(){this.update({scaleLevel:a,fontSize:FH[null!=a?a:"md"]});
this.onResetBounds()}));gb(this,"ReactIndicator",gf(({isEditing:a})=>{const {id:d,decorations:l,label:H,strokeWidth:Y,fontSize:ka,fontWeight:oa,handles:{start:Fa,end:Qa},isLocked:Wa}=this.props,db=this.getBounds(),jb=H||a?Nj(H,{fontFamily:"var(--ls-font-family)",fontSize:ka,lineHeight:1,fontWeight:oa},6):[0,0],Mb=le.med(Fa.point,Qa.point);var Ub=le.dist(Fa.point,Qa.point);Ub=Math.max(.5,Math.min(1,Math.max(Ub/(jb[1]+128),Ub/(jb[0]+128))));const Nb=Lw.useMemo(()=>le.sub(Mb,le.toFixed([db.width/2,db.height/
2])),[db,Ub,Mb]);return(0,Tn.jsxs)("g",{children:[(0,Tn.jsx)("path",{mask:H?`url(#${d}_clip)`:"",d:vr({strokeWidth:Y},Fa.point,Qa.point,null==l?void 0:l.start,null==l?void 0:l.end),strokeDasharray:Wa?"8 2":"undefined"}),H&&!a&&(0,Tn.jsx)("rect",{x:db.width/2-jb[0]/2*Ub+Nb[0],y:db.height/2-jb[1]/2*Ub+Nb[1],width:jb[0]*Ub,height:jb[1]*Ub,rx:4*Ub,ry:4*Ub,fill:"transparent"})]})}));gb(this,"validateProps",a=>$m(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,
fill:l,strokeWidth:H,strokeType:Y,decorations:ka,label:oa,scaleLevel:Fa,handles:{start:Qa,end:Wa}}=this.props,db=le.med(Qa.point,Wa.point);return(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(bD,{style:{stroke:dh(d,"text"),fill:l,strokeWidth:H,strokeType:Y},scaleLevel:Fa,start:Qa.point,end:Wa.point,decorationStart:null==ka?void 0:ka.start,decorationEnd:null==ka?void 0:ka.end}),a&&(0,Tn.jsx)(Tn.Fragment,{children:(0,Tn.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${db[0]}, ${db[1]})`,
textAnchor:"middle",fill:dh(d,"text"),stroke:dh(d,"text"),children:oa})})]})}};gb(bq,"id","line");gb(bq,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});he([Df],bq.prototype,"scaleLevel",1);he([xg],bq.prototype,"setScaleLevel",2);var Bo=vf(V(22)),sl=
V(586),Ap={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},cD=gf(({type:a,fill:d,opacity:l,children:H})=>{const Y="var(--ls-secondary-background-color)"!==d?dh(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?Xi(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,sl.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,sl.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",
style:{opacity:l,background:"P"===a?Y:`linear-gradient(0deg, ${d}, ${Y})`}}),(0,sl.jsx)("div",{className:"relative",children:H})]})}),lm=class extends to{constructor(a={}){var d;super(a);gb(this,"hideRotateHandle",!0);gb(this,"canChangeAspectRatio",!0);gb(this,"canFlip",!0);gb(this,"canEdit",!0);gb(this,"persist",null);gb(this,"initialHeightCalculated",!0);gb(this,"getInnerHeight",null);gb(this,"setCollapsed",l=>yi(this,null,function*(){var H;if("B"===this.props.blockType){if(this.update({compact:l}),
this.canResize[1]=!l,!l)this.onResetBounds()}else{const Y=this.props.size[1];this.canResize[1]=!l;this.update({isAutoResizing:!l,collapsed:l,size:[this.props.size[0],l?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:l?Y:this.props.collapsedHeight})}null==(H=this.persist)?void 0:H.call(this)}));gb(this,"setScaleLevel",l=>yi(this,null,function*(){var H;const Y=le.mul(this.props.size,Ap[null!=l?l:"md"]/Ap[null!=(H=this.props.scaleLevel)?H:"md"]);this.update({scaleLevel:l});yield Pl();
this.update({size:Y})}));gb(this,"onResetBounds",l=>{l=this.getAutoResizeHeight();null!==l&&1<Math.abs(l-this.props.size[1])&&(this.update({size:[this.props.size[0],l]}),this.initialHeightCalculated=!0);return this});gb(this,"onResize",(l,H)=>{var Y;const {bounds:ka,rotation:oa,scale:[Fa,Qa]}=H;l=[...this.scale];0>Fa&&(l[0]*=-1);0>Qa&&(l[1]*=-1);H=ka.height;this.props.isAutoResizing&&(H=null!=(Y=this.getAutoResizeHeight())?Y:H);return this.update({point:[ka.minX,ka.minY],size:[Math.max(1,ka.width),
Math.max(1,H)],scale:l,rotation:oa})});gb(this,"PortalComponent",gf(({})=>{const {props:{pageId:l,fill:H,opacity:Y}}=this,{renderers:ka}=Bo.useContext(yj),oa=ff(),Fa=Bo.useRef(null),[,Qa]=this.useComponentSize(Fa,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==ka||!ka.Page)return null;const {Page:Wa,Block:db}=ka,[jb,Mb]=Bo.useState(!1);Bo.useEffect(()=>{var Ub,Nb;if(this.props.isAutoResizing){const lc=(null!=(Nb=null==(Ub=this.getInnerHeight)?
void 0:Ub.call(this))?Nb:Qa)+this.getHeaderHeight();Qa&&1<Math.abs(lc-this.props.size[1])&&(this.update({size:[this.props.size[0],lc]}),jb&&oa.persist(!0))}},[Qa,this.props.isAutoResizing]);Bo.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();oa.persist(!0)})},[this.initialHeightCalculated]);Bo.useEffect(()=>{setTimeout(function(){Mb(!0)})},[]);return(0,sl.jsxs)(sl.Fragment,{children:[(0,sl.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>
oa.viewport.camera.zoom?"optimizeSpeed":"auto",background:H&&"var(--ls-secondary-background-color)"!==H?Xi(H)?`var(--ls-highlight-color-${H})`:H:"var(--ls-secondary-background-color)",opacity:Y}}),(0,sl.jsx)("div",{ref:Fa,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(jb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,sl.jsx)(db,{blockId:l}):(0,sl.jsx)(Wa,{pageName:l}))})]})}));gb(this,"ReactComponent",
gf(l=>{var H;const {events:Y,isErasing:ka,isEditing:oa,isBinding:Fa}=l,{props:{opacity:Qa,pageId:Wa,fill:db,scaleLevel:jb,strokeWidth:Mb,size:Ub}}=this,Nb=ff(),{renderers:lc,handlers:xc}=Bo.useContext(yj);this.persist=()=>Nb.persist();const $b=Sq(),nc=Nb.selectedIds.has(this.id)&&1===Nb.selectedIds.size,jc=Nb.isIn("logseq-portal.creating")&&!Wa,Ic=($b||nc&&!oa||"select"!==Nb.selectedTool.id)&&!jc,Jc=Bo.useCallback(pd=>{Ic||pd.stopPropagation()},[Ic]),Gd=1===Nb.selectedShapesArray.length&&Nb.selectedShapesArray.some(pd=>
"logseq-portal"===pd.type&&pd.props.id!==this.props.id&&Wa&&pd.props.pageId===Wa),Xd=Ap[null!=jb?jb:"md"];Bo.useEffect(()=>this.props.collapsed&&oa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[oa,this.props.collapsed]);Bo.useEffect(()=>{if(jc){const pd=[Nb.viewport.bounds.width,Nb.viewport.bounds.height],ld=Nb.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(ld[0]>pd[0]-400||ld[1]>pd[1]-
240||1.5<Nb.viewport.camera.zoom||.5>Nb.viewport.camera.zoom)&&Nb.viewport.zoomToBounds(qf(ne({},this.bounds),{minY:this.bounds.maxY+25}))}},[Nb.viewport.bounds.height.toFixed(2)]);const Re=Bo.useCallback(pd=>{this.initialHeightCalculated=!1;const ld=Ok(pd)?"B":"P";this.update({pageId:pd,size:[400,320],blockType:ld,compact:"B"===ld});Nb.selectTool("select");Nb.history.resume();Nb.history.persist()},[]),me=this.PortalComponent;var Le=Bo.useMemo(()=>{var pd;if(Wa&&"B"===this.props.blockType)return null==
(pd=null==xc?void 0:xc.queryBlockByUUID(Wa))?void 0:pd.content},[null==xc?void 0:xc.queryBlockByUUID,Wa]);Le="B"===this.props.blockType&&"string"!==typeof Le;const Bf=(!this.props.collapsed||oa)&&!Le;if(null==lc||!lc.Page)return null;const {Breadcrumb:Ue,PageName:df}=lc,Ud={width:`calc(100% / ${Xd})`,height:`calc(100% / ${Xd})`,opacity:ka?.2:1};1!==Xd&&(Ud.transform=`scale(${Xd})`);return(0,sl.jsxs)(up,qf(ne({style:{pointerEvents:"all"}},Y),{children:[Fa&&(0,sl.jsx)(Mp,{mode:"html",strokeWidth:Mb,
size:Ub}),(0,sl.jsx)("div",{"data-inner-events":!Ic,onWheelCapture:Jc,onPointerDown:Jc,onPointerUp:Jc,style:{width:"100%",height:"100%",pointerEvents:$b||!oa&&!nc?"none":"all"},children:jc?(0,sl.jsx)(et,{onChange:Re,onAddBlock:pd=>{setTimeout(()=>{var ld,qd,ie;Nb.api.editShape(this);null==(ie=null==(qd=null==(ld=window.logseq)?void 0:ld.api)?void 0:qd.edit_block)?void 0:ie.call(qd,pd)})},placeholder:"Create or search your graph..."}):(0,sl.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,
"data-page-id":Wa,"data-portal-selected":Gd,"data-editing":oa,style:Ud,children:[!this.props.compact&&!Le&&(0,sl.jsx)(cD,{type:null!=(H=this.props.blockType)?H:"P",fill:db,opacity:Qa,children:"P"===this.props.blockType?(0,sl.jsx)(df,{pageName:Wa}):(0,sl.jsx)(Ue,{blockId:Wa})}),Le&&(0,sl.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),Bf&&(0,sl.jsx)(me,ne({},l))]})})]}))}));gb(this,"ReactIndicator",gf(()=>{const l=this.getBounds();return(0,sl.jsx)("rect",{width:l.width,height:l.height,
fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",l=>{var H;if(void 0!==l.size){const Y=Ap[null!=(H=this.props.scaleLevel)?H:"md"];l.size[0]=Math.max(l.size[0],60*Y);l.size[1]=Math.max(l.size[1],40*Y)}return $m(this,l)});Qg(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===
this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [l,H]=Bo.useState([0,0]),Y=ff();Bo.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const ka=d?a.current.querySelector(d):a.current;if(ka){const oa=()=>{const {width:Qa,height:Wa}=ka.getBoundingClientRect(),db=le.div([Qa,Wa],Y.viewport.camera.zoom);H(db);return db};oa();this.getInnerHeight=()=>oa()[1];const Fa=new ResizeObserver(()=>
{oa()});Fa.observe(ka);return()=>{Fa.disconnect()}}}return()=>{}},10)},[a,d]);return l}getHeaderHeight(){var a;const d=Ap[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,l;const H=this.getBounds();return(0,sl.jsxs)(sl.Fragment,{children:[(0,sl.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Xi(this.props.fill)?
`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:dh(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:H.width,rx:8,ry:8,height:H.height}),!this.props.compact&&(0,sl.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?dh(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(l=this.props.opacity)?
l:.2,x:1,y:1,width:H.width-2,height:38,rx:8,ry:8}),(0,sl.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${H.width/2}, ${10+H.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};gb(lm,"id","logseq-portal");gb(lm,"defaultSearchQuery","");gb(lm,"defaultSearchFilter",null);gb(lm,"defaultProps",{id:"logseq-portal",
type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});he([Df],lm.prototype,"collapsed",1);he([xg],lm.prototype,"setCollapsed",2);he([Df],lm.prototype,"scaleLevel",1);he([xg],lm.prototype,"setScaleLevel",2);var {min:dp,PI:Yr}=Math,Co=Yr+1E-4,gu=V(586),hu={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},dD={easing:a=>Math.sin(a*Math.PI/
2),simulatePressure:!0},uv={easing:a=>a*a,simulatePressure:!1},lr=class extends yt{constructor(a={}){super(a);gb(this,"ReactComponent",gf(({events:d,isErasing:l})=>{const {props:{opacity:H}}=this;return(0,gu.jsx)(vp,qf(ne({},d),{opacity:l?.2:H,children:this.getShapeSVGJsx()}))}));gb(this,"setScaleLevel",d=>yi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:hu[null!=d?d:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",gf(()=>{const {pointsPath:d}=this;return(0,gu.jsx)("path",{d,
strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",d=>{d=$m(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});Qg(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=qf(ne({size:1+1.5*a.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?dD:uv),{last:a.isComplete}),a=tc(a.points,d),d=mu.getSvgPathFromStroke(Jb(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?
a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:l,strokeType:H}}=this;return(0,gu.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:l/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:dh(d,"text"),fill:dh(d,"text"),strokeDasharray:"dashed"===H?"12 4":void 0})}};gb(lr,"id","pencil");gb(lr,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});he([Df],lr.prototype,
"pointsPath",1);he([Df],lr.prototype,"scaleLevel",1);he([xg],lr.prototype,"setScaleLevel",2);var Bp=vf(V(22)),Un=V(586),Nw={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Hg=class extends Gr{constructor(){super(...arguments);gb(this,"canEdit",!0);gb(this,"ReactComponent",gf(({events:a,isErasing:d,isSelected:l,isEditing:H,onEditingEnd:Y})=>{const {offset:[ka,oa],props:{stroke:Fa,fill:Qa,noFill:Wa,strokeWidth:db,opacity:jb,strokeType:Mb,label:Ub,italic:Nb,fontWeight:lc,fontSize:xc}}=this,$b=this.getVertices(db/
2).join();var nc=Ub||H?Nj(Ub,{fontFamily:"var(--ls-font-family)",fontSize:xc,lineHeight:1,fontWeight:lc},4):[0,0];const jc=[this.props.size[0]/2,2*this.props.size[1]/3];nc=Math.max(.5,Math.min(1,this.props.size[0]/(2*nc[0]),this.props.size[1]/(2*nc[1])));const Ic=this.getBounds(),Jc=Bp.useMemo(()=>le.sub(jc,le.toFixed([Ic.width/2,Ic.height/2])),[Ic,nc,jc]),Gd=Bp.useCallback(Xd=>{var Re;null==(Re=this.update)?void 0:Re.call(this,{label:Xd})},[Ub]);return(0,Un.jsxs)("div",qf(ne({},a),{style:{width:"100%",
height:"100%",overflow:"hidden"},children:[(0,Un.jsx)(aq,{font:"20px / 1 var(--ls-font-family)",text:Ub,fontSize:xc,color:dh(Fa,"text"),offsetX:Jc[0],offsetY:Jc[1]/nc,scale:nc,isEditing:H,onChange:Gd,onBlur:Y,fontStyle:Nb?"italic":"normal",fontWeight:lc,pointerEvents:!!Ub}),(0,Un.jsx)(vp,{opacity:d?.2:jb,children:(0,Un.jsxs)("g",{transform:`translate(${ka}, ${oa})`,children:[(0,Un.jsx)("polygon",{className:l||!Wa?"tl-hitarea-fill":"tl-hitarea-stroke",points:$b}),(0,Un.jsx)("polygon",{points:$b,stroke:dh(Fa,
"stroke"),fill:Wa?"none":dh(Qa,"background"),strokeWidth:db,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Mb?"8 2":void 0})]})})]}))}));gb(this,"setScaleLevel",a=>yi(this,null,function*(){this.update({scaleLevel:a,fontSize:Nw[null!=a?a:"md"],strokeWidth:Nw[null!=a?a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",gf(()=>{const {offset:[a,d],props:{strokeWidth:l,isLocked:H}}=this;return(0,Un.jsx)("g",{children:(0,Un.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(l/
2).join(),strokeDasharray:H?"8 2":"undefined"})})}));gb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return $m(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,l],props:{stroke:H,fill:Y,noFill:ka,strokeWidth:oa,opacity:Fa,strokeType:Qa}}=this;a=this.getVertices(oa/2).join();return(0,Un.jsxs)("g",{transform:`translate(${d}, ${l})`,opacity:Fa,children:[(0,Un.jsx)("polygon",{className:ka?"tl-hitarea-stroke":
"tl-hitarea-fill",points:a}),(0,Un.jsx)("polygon",{points:a,stroke:dh(H,"stroke"),fill:ka?"none":dh(Y,"background"),strokeWidth:oa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Qa?"8 2":void 0})]})}};gb(Hg,"id","polygon");gb(Hg,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});he([Df],Hg.prototype,"scaleLevel",
1);he([xg],Hg.prototype,"setScaleLevel",2);var ep=vf(V(22)),Gq=V(586),Zr={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},fp=class extends ux{constructor(){super(...arguments);gb(this,"ReactComponent",gf(({events:a,isErasing:d,isEditing:l,onEditingEnd:H})=>{const {props:{opacity:Y,fontFamily:ka,fontSize:oa,fontWeight:Fa,italic:Qa,lineHeight:Wa,text:db,stroke:jb,padding:Mb}}=this,Ub=ep.useRef(null),Nb=ep.useRef(!1),lc=ep.useRef(null),xc=ep.useCallback(Jc=>{const {isSizeLocked:Gd}=this.props;Jc=Gt.normalizeText(Jc.currentTarget.value);
Gd?this.update({text:Jc,size:this.getAutoSizedBoundingBox({text:Jc})}):this.update({text:Jc})},[]),$b=ep.useCallback(Jc=>{if("Escape"!==Jc.key)if("Tab"===Jc.key&&0===db.length)Jc.preventDefault();else{if("Meta"!==Jc.key&&!Jc.metaKey)Jc.stopPropagation();else if("z"===Jc.key&&Jc.metaKey){Jc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Jc.stopPropagation();Jc.preventDefault();return}"Tab"===Jc.key&&(Jc.preventDefault(),Jc.shiftKey?km.unindent(Jc.currentTarget):km.indent(Jc.currentTarget),
this.update({text:Gt.normalizeText(Jc.currentTarget.value)}))}},[]),nc=ep.useCallback(Jc=>{l&&(null==H?void 0:H())},[H]),jc=ep.useCallback(Jc=>{l&&Nb.current&&document.activeElement===Jc.currentTarget&&Jc.currentTarget.select()},[l]),Ic=ep.useCallback(Jc=>{l&&Jc.stopPropagation()},[l]);ep.useEffect(()=>{l&&requestAnimationFrame(()=>{Nb.current=!0;const Jc=Ub.current;Jc&&(Jc.focus(),Jc.select())})},[l,H]);ep.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},
[]);return(0,Gq.jsx)(up,qf(ne({},a),{opacity:d?.2:Y,children:(0,Gq.jsx)("div",{ref:lc,className:"tl-text-shape-wrapper","data-hastext":!!db,"data-isediting":l,style:{fontFamily:ka,fontStyle:Qa?"italic":"normal",fontSize:oa,fontWeight:Fa,padding:Mb,lineHeight:Wa,color:dh(jb,"text")},children:l?(0,Gq.jsx)("textarea",{ref:Ub,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",
dir:"auto",datatype:"wysiwyg",defaultValue:db,onFocus:jc,onChange:xc,onKeyDown:$b,onBlur:nc,onPointerDown:Ic}):(0,Gq.jsxs)(Gq.Fragment,{children:[db,"​"]})})}))}));gb(this,"setScaleLevel",a=>yi(this,null,function*(){this.update({scaleLevel:a,fontSize:Zr[null!=a?a:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",gf(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:l},bounds:H}=this;return a?null:(0,Gq.jsx)("rect",{width:H.width,height:H.height,rx:d,ry:d,fill:"transparent",strokeDasharray:l?
"8 2":"undefined"})}));gb(this,"validateProps",a=>$m(this,a));gb(this,"getBounds",()=>{const [a,d]=this.props.point,[l,H]=this.props.size;return{minX:a,minY:d,maxX:a+l,maxY:d+H,width:l,height:H}});gb(this,"onResizeStart",({isSingle:a})=>{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});gb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=
(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:l=this.props.fontFamily,fontSize:H=this.props.fontSize,fontWeight:Y=this.props.fontWeight,lineHeight:ka=this.props.lineHeight,padding:oa=this.props.padding}=a,[Fa,Qa]=Nj(d,{fontFamily:l,fontSize:H,lineHeight:ka,fontWeight:Y},oa);return[Fa,Qa]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:d,
stroke:l,fontSize:H,fontFamily:Y}}=this;a=this.getBounds();return(0,Gq.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,Gq.jsx)("div",{style:{color:dh(l,"text"),fontSize:H,fontFamily:Y,display:"contents"},children:d})})}};gb(fp,"id","text");gb(fp,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,
strokeType:"line",strokeWidth:2,opacity:1});he([Df],fp.prototype,"scaleLevel",1);he([xg],fp.prototype,"setScaleLevel",2);var Ow=vf(V(22)),Po=V(586),vv=class extends to{constructor(){super(...arguments);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"canChangeAspectRatio",!1);gb(this,"ReactComponent",gf(({events:a,isErasing:d,asset:l,isEditing:H})=>{const {props:{opacity:Y}}=this,ka=Sq();var oa=ff();const Fa=oa.selectedIds.has(this.id),Qa=ka||Fa&&!H||"select"!==oa.selectedTool.id;oa=Ow.useCallback(db=>
{Qa||db.stopPropagation()},[Qa]);const {handlers:Wa}=Ow.useContext(yj);return(0,Po.jsx)(up,qf(ne({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:Y}},a),{children:(0,Po.jsx)("div",{onWheelCapture:oa,onPointerDown:oa,onPointerUp:oa,className:"tl-video-container",style:{pointerEvents:ka||!H&&!Fa?"none":"all",overflow:H?"auto":"hidden"},children:l&&(0,Po.jsx)("video",{controls:!0,src:Wa?Wa.makeAssetUrl(l.src):l.src})})}))}));gb(this,"ReactIndicator",gf(()=>{const {props:{size:[a,d],isLocked:l}}=
this;return(0,Po.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:l?"8 2":"undefined"})}))}};gb(vv,"id","video");gb(vv,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});var yk=V(586),dt=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,Pw=class extends to{constructor(){super(...arguments);gb(this,"aspectRatio",480/853);gb(this,
"canChangeAspectRatio",!1);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:Pw.defaultProps.size})});gb(this,"ReactComponent",gf(({events:a,isErasing:d,isEditing:l})=>{const H=ff();return(0,yk.jsx)(up,qf(ne({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,yk.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:l||H.readOnly?"all":"none",userSelect:"none",
background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,yk.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,yk.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):
(0,yk.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,yk.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,yk.jsxs)("g",{children:[(0,yk.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,yk.jsx)("g",{children:(0,yk.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,yk.jsxs)("g",{fill:"#fff",children:[(0,yk.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,yk.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));gb(this,"ReactIndicator",gf(()=>{const {props:{size:[a,d],isLocked:l}}=this;return(0,yk.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:l?"8 2":"undefined"})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return $m(this,a)})}get embedId(){var a,d;const l=this.props.url,
H=l.match(dt);return null!=(d=null!=(a=null==H?void 0:H[1])?a:l)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,yk.jsxs)("g",{children:[(0,yk.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,yk.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,yk.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},cq=Pw;gb(cq,"id","youtube");gb(cq,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});he([Df],cq.prototype,"embedId",1);he([xg],cq.prototype,"onYoutubeLinkChange",2);var $r=vf(V(22)),Cp=V(586),Qw=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,Rw=class extends to{constructor(){super(...arguments);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"initialHeightCalculated",
!0);gb(this,"getInnerHeight",null);gb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:Rw.defaultProps.size})});gb(this,"ReactComponent",gf(({events:a,isErasing:d,isEditing:l})=>{const {renderers:{Tweet:H}}=$r.useContext(yj),Y=ff(),ka=$r.useRef(null),[,oa]=this.useComponentSize(ka);$r.useEffect(()=>{var Fa,Qa;const Wa=null!=(Qa=null==(Fa=this.getInnerHeight)?void 0:Fa.call(this))?Qa:oa;oa&&1<Math.abs(Wa-this.props.size[1])&&(this.update({size:[this.props.size[0],Wa]}),Y.persist(!0))},[oa]);
$r.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();Y.persist(!0)})},[this.initialHeightCalculated]);return(0,Cp.jsx)(up,qf(ne({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Cp.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:l||Y.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,Cp.jsx)("div",{ref:ka,children:(0,Cp.jsx)(H,{tweetId:this.embedId})}):null})}))}));
gb(this,"ReactIndicator",gf(()=>{const {props:{size:[a,d],isLocked:l}}=this;return(0,Cp.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:l?"8 2":"undefined"})}));gb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});gb(this,"onResize",(a,d)=>{var l;const {bounds:H,rotation:Y,scale:[ka,oa]}=d;a=[...this.scale];0>ka&&(a[0]*=-1);0>oa&&(a[1]*=
-1);d=null!=(l=this.getAutoResizeHeight())?l:H.height;return this.update({point:[H.minX,H.minY],size:[Math.max(1,H.width),Math.max(1,d)],scale:a,rotation:Y})});gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return $m(this,a)})}get embedId(){var a,d;const l=this.props.url,H=l.match(Qw);return null!=(d=null!=(a=null==H?void 0:H[1])?a:l)?d:""}useComponentSize(a,d=""){const [l,H]=$r.useState([0,0]),Y=ff();$r.useEffect(()=>
{if(null==a?0:a.current){const ka=d?a.current.querySelector(d):a.current;if(ka){const oa=()=>{const {width:Qa,height:Wa}=ka.getBoundingClientRect(),db=le.div([Qa,Wa],Y.viewport.camera.zoom);H(db);return db};oa();this.getInnerHeight=()=>oa()[1];const Fa=new ResizeObserver(()=>{oa()});Fa.observe(ka);return()=>{Fa.disconnect()}}}return()=>{}},[a,d]);return l}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,Cp.jsxs)("g",
{children:[(0,Cp.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,Cp.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Cp.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},as=Rw;gb(as,"id","tweet");gb(as,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});he([Df],as.prototype,"embedId",1);he([xg],as.prototype,"onTwitterLinkChange",2);V(586);var ez=[Xr,Ao,Fq,sv,vv,bq,lr,Hg,fp,cq,as,Wg,kr,lm,pv],wv=class extends Vq{constructor(){super(...arguments);gb(this,"Shape",Xr)}};gb(wv,"id","box");gb(wv,"shortcut","whiteboard/rectangle");var Sw=class extends Vq{constructor(){super(...arguments);
gb(this,"Shape",Ao)}};gb(Sw,"id","ellipse");gb(Sw,"shortcut","whiteboard/ellipse");var Tw=class extends Rv{};gb(Tw,"id","erase");gb(Tw,"shortcut","whiteboard/eraser");var Uw=class extends zu{constructor(){super(...arguments);gb(this,"Shape",Fq);gb(this,"simplify",!0);gb(this,"simplifyTolerance",.618)}};gb(Uw,"id","highlighter");gb(Uw,"shortcut","whiteboard/highlighter");var xv=class extends Sv{constructor(){super(...arguments);gb(this,"Shape",bq)}};gb(xv,"id","line");gb(xv,"shortcut","whiteboard/connector");
var mr=class extends zu{constructor(){super(...arguments);gb(this,"Shape",lr);gb(this,"simplify",!1)}};gb(mr,"id","pencil");gb(mr,"shortcut","whiteboard/pencil");var Vw=class extends Vq{constructor(){super(...arguments);gb(this,"Shape",Hg)}};gb(Vw,"id","polygon");var Gn=class extends Tv{constructor(){super(...arguments);gb(this,"Shape",fp)}};gb(Gn,"id","text");gb(Gn,"shortcut","whiteboard/text");var iu=class extends Vq{constructor(){super(...arguments);gb(this,"Shape",cq)}};gb(iu,"id","youtube");
var go=class extends cj{constructor(){super(...arguments);gb(this,"creatingShape");gb(this,"offset",[0,0]);gb(this,"onEnter",()=>{this.app.history.pause();xd(()=>{const a=new lm({id:ml(),parentId:this.app.currentPage.id,point:le.sub(this.app.inputs.originPoint,this.offset),size:lm.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=a;this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});gb(this,"onPointerDown",
a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});gb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};gb(go,"id","creating");var eD=class extends cj{constructor(){super(...arguments);
gb(this,"cursor","crosshair");gb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};gb(eD,"id","idle");var Wm=class extends Hr{constructor(){super(...arguments);gb(this,"Shape",lm);gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};gb(Wm,"id","logseq-portal");gb(Wm,"shortcut","whiteboard/portal");gb(Wm,"states",[eD,go]);gb(Wm,"initial","idle");var dq=class extends Vq{constructor(){super(...arguments);gb(this,"Shape",kr)}};gb(dq,"id","youtube");var fz=class extends Vq{constructor(){super(...arguments);
gb(this,"Shape",Wg)}};gb(fz,"id","iframe");var GH=vf(V(589)),Dp=V(586),Im=new Map(ez.map(a=>[a.id,a])),Hq=class{constructor(a){gb(this,"shapes");gb(this,"pageId");gb(this,"assets");a&&this.load(a)}load(a){var d;const l=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==l?void 0:l.id;this.assets=a.assets;this.shapes=null==l?void 0:l.shapes.map(H=>{var Y=H.type;if(!Y)throw Error("No shape type provided.");const ka=Im.get(Y);if(!ka)throw Error(`Could not find shape class for ${Y}`);return new ka(H)}).filter(H=>
"group"!==H.type)}generatePreviewJsx(a,d){var l,H;const Y=[...(null!=(l=this.shapes)?l:[]).map(Wa=>Wa.getRotatedBounds())];(l=null==a?void 0:a.currentView)&&Y.push(l);let ka=Af.getCommonBounds(Y);if(!ka)return null;ka=Af.expandBounds(ka,16);ka=d?Af.ensureRatio(ka,d):ka;const oa=Wa=>[(Wa[0]-ka.minX).toFixed(2),(Wa[1]-ka.minY).toFixed(2)],[Fa,Qa]=l?oa([l.minX,l.minY]):[0,0];return ka&&(0,Dp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ka.minX.toFixed(2),"data-common-bound-y":ka.minY.toFixed(2),
"data-common-bound-width":ka.width.toFixed(2),"data-common-bound-height":ka.height.toFixed(2),viewBox:[0,0,ka.width,ka.height].join(" "),children:[(0,Dp.jsx)("defs",{children:l&&(0,Dp.jsxs)(Dp.Fragment,{children:[(0,Dp.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Fa}, ${Qa})`,width:l.width,height:l.height}),(0,Dp.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,Dp.jsx)("rect",{width:ka.width,height:ka.height,fill:"white"}),(0,Dp.jsx)("use",{href:`#${this.pageId}-camera-rect`,
fill:"black"})]})]})}),(0,Dp.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(H=this.shapes)?void 0:H.map(Wa=>{var db,jb;const {bounds:Mb,props:{rotation:Ub}}=Wa,[Nb,lc]=oa([Mb.minX,Mb.minY]),xc=+(180*((null!=Ub?Ub:0)+(null!=(db=Mb.rotation)?db:0))/Math.PI).toFixed(2),[$b,nc]=[(Mb.width/2).toFixed(2),(Mb.height/2).toFixed(2)];return(0,Dp.jsx)("g",{transform:[`translate(${Nb}, ${lc})`,`rotate(${xc}, ${$b}, ${nc})`].join(" "),children:Wa.getShapeSVGJsx({assets:null!=(jb=this.assets)?jb:[]})},
Wa.id)})}),(0,Dp.jsx)("rect",{mask:l?`url(#${this.pageId}-camera-mask)`:"",width:ka.width,height:ka.height,fill:"transparent"}),l&&(0,Dp.jsx)("use",{id:"minimap-camera-rect","data-x":Fa,"data-y":Qa,"data-width":l.width,"data-height":l.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?GH.default.renderToString(a):""}},gp=vf(V(22)),yv=V(586),Rh=gp.forwardRef((a,d)=>{var {value:l,className:H}=
a;a=If(a,["autoResize","value","className"]);return(0,yv.jsx)("div",{className:"tl-input"+(H?" "+H:""),children:(0,yv.jsxs)("div",{className:"tl-input-sizer",children:[(0,yv.jsx)("div",{className:"tl-input-hidden",children:l}),(0,yv.jsx)("input",ne({ref:d,value:l,className:"tl-text-input",type:"text"},a))]})})}),Di=V(586),bs=({type:a,active:d})=>(0,Di.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,Di.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",
PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),gz=(a,d)=>(0,Di.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((l,H)=>1===H%2?(0,Di.jsx)("mark",{className:"tl-highlighted",children:l}):l).map((l,H)=>(0,Di.jsx)(ln.default.Fragment,{children:l},H))}),ki=(a,d)=>{const {handlers:l}=ln.default.useContext(yj),[H,Y]=ln.default.useState(null),ka=cn(a,200);ln.default.useEffect(()=>{let oa=!1;if(0<ka.length){const Fa=
{"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?Fa["pages?"]=!1:"P"===d&&(Fa["blocks?"]=!1);l.search(ka,Fa).then(Qa=>{oa||Y(Qa)})}else Y(null);return()=>{oa=!0}},[ka,null==l?void 0:l.search]);return H},et=gf(({className:a,style:d,placeholder:l,onChange:H,onBlur:Y,onAddBlock:ka})=>{const [oa,Fa]=ln.default.useState(lm.defaultSearchQuery),[Qa,Wa]=ln.default.useState(lm.defaultSearchFilter),db=ln.default.useRef(null),{handlers:jb,renderers:Mb}=ln.default.useContext(yj),Ub=jb.t,Nb=ln.default.useCallback(me=>
{var Le;setTimeout(()=>H(me));null==(Le=db.current)?void 0:Le.blur();me&&(lm.defaultSearchQuery="",lm.defaultSearchFilter=null)},[]),lc=ln.default.useCallback(me=>{if(me=null==jb?void 0:jb.addNewBlock(me))Nb(me),null==ka?void 0:ka(me);return me},[ka]),xc=ln.default.useRef(null),[$b,nc]=ln.default.useState(0),jc=ki(oa,Qa),[Ic,Jc]=ln.default.useState("circle-plus"),[Gd,Xd]=ln.default.useState(!1);ln.default.useEffect(()=>{setTimeout(()=>{var me;null==(me=db.current)?void 0:me.focus()})},[Qa]);ln.default.useEffect(()=>
{lm.defaultSearchQuery=oa;lm.defaultSearchFilter=Qa},[oa,Qa]);const Re=ln.default.useMemo(()=>{var me;const Le=[],Bf=null==Mb?void 0:Mb.Breadcrumb;if(!Bf||!jb)return[];ka&&Le.push({actionIcon:"circle-plus",onChosen:()=>!!lc(oa),element:(0,Di.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Di.jsx)(bs,{active:!0,type:"BA"}),0<oa.length?(0,Di.jsxs)(Di.Fragment,{children:[(0,Di.jsx)("strong",{children:Ub("whiteboard/new-block")}),oa]}):(0,Di.jsx)("strong",{children:Ub("whiteboard/new-block-no-colon")})]})});
(null==(me=null==jc?void 0:jc.pages)?0:me.some(Ue=>Ue.toLowerCase()===oa.toLowerCase()))||!oa||Le.push({actionIcon:"circle-plus",onChosen:()=>{Nb(oa);return!0},element:(0,Di.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Di.jsx)(bs,{active:!0,type:"PA"}),(0,Di.jsx)("strong",{children:Ub("whiteboard/new-page")}),oa]})},{actionIcon:"circle-plus",onChosen:()=>{null==jb?void 0:jb.addNewWhiteboard(oa);Nb(oa);return!0},element:(0,Di.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,Di.jsx)(bs,{active:!0,type:"WA"}),(0,Di.jsx)("strong",{children:Ub("whiteboard/new-whiteboard")}),oa]})});0===oa.length&&null===Qa&&Le.push({actionIcon:"search",onChosen:()=>{Wa("B");return!0},element:(0,Di.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Di.jsx)(bs,{type:"BS"}),Ub("whiteboard/search-only-blocks")]})},{actionIcon:"search",onChosen:()=>{Wa("P");return!0},element:(0,Di.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Di.jsx)(bs,{type:"PS"}),
Ub("whiteboard/search-only-pages")]})});Qa&&"P"!==Qa||!jc||!jc.pages||Le.push(...jc.pages.map(Ue=>({actionIcon:"search",onChosen:()=>{Nb(Ue);return!0},element:(0,Di.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Di.jsx)(bs,{type:jb.isWhiteboardPage(Ue)?"WP":"P"}),gz(Ue,oa)]})})));Qa&&"B"!==Qa||!jc||!jc.blocks||Le.push(...jc.blocks.filter(Ue=>Ue.content&&Ue.uuid).map(({content:Ue,uuid:df})=>{const Ud=jb.queryBlockByUUID(df);return{actionIcon:"search",onChosen:()=>{var pd,ld,qd;return Ud?
(Nb(df),null==(qd=null==(ld=null==(pd=window.logseq)?void 0:pd.api)?void 0:ld.set_blocks_id)?void 0:qd.call(ld,[df]),!0):!1},element:Ud?(0,Di.jsxs)(Di.Fragment,{children:[(0,Di.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Di.jsx)(bs,{type:"B"}),(0,Di.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,Di.jsx)(Bf,{blockId:df})})]}),(0,Di.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Di.jsx)("div",{className:"tl-quick-search-option-placeholder"}),
gz(Ue,oa)]})]}):(0,Di.jsx)("div",{className:"tl-quick-search-option-row",children:Ub("whiteboard/cache-outdated")})}}));return Le},[oa,Qa,jc,null==Mb?void 0:Mb.Breadcrumb,jb]);ln.default.useEffect(()=>{const me=Le=>{var Bf,Ue;let df=$b;"ArrowDown"===Le.key?df=Math.min(Re.length-1,$b+1):"ArrowUp"===Le.key?df=Math.max(0,$b-1):"Enter"===Le.key?(null==(Bf=Re[$b])?void 0:Bf.onChosen(),Le.stopPropagation(),Le.preventDefault()):"Backspace"===Le.key&&0===oa.length?Wa(null):"Escape"===Le.key&&Nb("");df!==
$b&&(Bf=Re[df],nc(df),Jc(Bf.actionIcon),Le.stopPropagation(),Le.preventDefault(),(Le=null==(Ue=xc.current)?void 0:Ue.querySelector(".tl-quick-search-option:nth-child("+(df+1)+")"))&&(null==Le?void 0:Le.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",me,!0);return()=>{document.removeEventListener("keydown",me,!0)}},[Re,$b,oa]);return(0,Di.jsxs)("div",{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,Di.jsx)(TG,{icon:Ic,onClick:()=>{var me;null==(me=Re[$b])?void 0:
me.onChosen()}}),(0,Di.jsxs)("div",{className:"tl-quick-search-input-container",children:[Qa&&(0,Di.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,Di.jsx)(bs,{type:Qa}),"B"===Qa?"Search blocks":"Search pages",(0,Di.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>Wa(null),children:(0,Di.jsx)(Yh,{name:"x"})})]}),(0,Di.jsx)(Rh,{ref:db,type:"text",value:oa,className:"tl-quick-search-input",placeholder:null!=l?l:"Create or search your graph...",onChange:me=>
Fa(me.target.value),onKeyDown:me=>{"Enter"===me.key&&Nb(oa);me.stopPropagation()},onFocus:()=>{Xd(!0)},onBlur:()=>{Xd(!1);null==Y?void 0:Y()}})]}),0<Re.length&&(0,Di.jsx)("div",{onWheelCapture:me=>me.stopPropagation(),className:"tl-quick-search-options",ref:xc,style:{visibility:Gd?"visible":"hidden",pointerEvents:Gd?"all":"none"},children:(0,Di.jsx)(CH,{style:{height:40*Math.min(Math.max(1,Re.length),12)},totalCount:Re.length,itemContent:me=>{const {actionIcon:Le,onChosen:Bf,element:Ue}=Re[me];return(0,Di.jsx)("div",
{"data-focused":me===$b,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Jc(Le);nc(me)},onPointerDownCapture:df=>{Bf()&&(df.stopPropagation(),df.preventDefault())},children:Ue},me)}})})]})}),Aj=V(586),cs=gf(function(a){var {pageId:d,portalType:l,refs:H,side:Y,onRefsChange:ka}=a;a=If(a,"pageId portalType shapeType refs side onRefsChange".split(" "));const {handlers:{t:oa}}=Jy.default.useContext(yj),Fa=H.length+(d?1:0),Qa=0===H.length,Wa=jb=>{jb&&!H.includes(jb)&&Qa&&ka([...H,jb])},db=
!(!d||!l);return(0,Aj.jsx)(Yk,qf(ne({},a),{side:Y,align:"start",alignOffset:-6,label:(0,Aj.jsx)(fc,{content:oa("whiteboard/link"),sideOffset:14,children:(0,Aj.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,Aj.jsx)(Yh,{name:0<Fa?"link":"add-link"}),0<Fa&&(0,Aj.jsx)("div",{className:"tl-shape-links-count",children:Fa})]})}),children:(0,Aj.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":db,children:[db&&(0,Aj.jsxs)("div",{className:"tl-shape-links-reference-panel",
children:[(0,Aj.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Aj.jsx)(Yh,{className:"opacity-50",name:"internal-link"}),oa("whiteboard/references")]}),(0,Aj.jsx)(ke,{type:l,id:d})]}),(0,Aj.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,Aj.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Aj.jsx)(Yh,{className:"opacity-50",name:"add-link"}),oa("whiteboard/link-to-any-page-or-block")]}),Qa&&(0,Aj.jsx)(et,{style:{width:"calc(100% - 46px)",
marginLeft:"46px"},placeholder:oa("whiteboard/start-typing-to-search"),onChange:Wa}),0<H.length&&(0,Aj.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:H.map((jb,Mb)=>(0,Aj.jsx)(ke,{id:jb,type:Ok(jb)?"B":"P",onRemove:()=>{ka(H.filter((Ub,Nb)=>Mb!==Nb))},showContent:!0},jb))})]})]})}))}),tl=vf(V(22)),zv=V(22),fD=(0,zv.forwardRef)((a,d)=>{const {pressed:l,defaultPressed:H=!1,onPressedChange:Y}=a,ka=If(a,["pressed","defaultPressed","onPressedChange"]),[oa=!1,Fa]=ci({prop:l,onChange:Y,
defaultProp:H});return(0,zv.createElement)(Tl.button,Ye({type:"button","aria-pressed":oa,"data-state":oa?"on":"off","data-disabled":a.disabled?"":void 0},ka,{ref:d,onClick:Uf(a.onClick,()=>{a.disabled||Fa(!oa)})}))}),HH=fD,[ft]=mk("ToggleGroup",[fw]),Qo=fw(),Ww=tl.default.forwardRef((a,d)=>{const {type:l}=a;a=If(a,["type"]);if("single"===l)return tl.default.createElement(Yw,Ye({},a,{ref:d}));if("multiple"===l)return tl.default.createElement(gD,Ye({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");
}),[Xw,Av]=ft("ToggleGroup"),Yw=tl.default.forwardRef((a,d)=>{const {value:l,defaultValue:H,onValueChange:Y=()=>{}}=a,ka=If(a,["value","defaultValue","onValueChange"]),[oa,Fa]=ci({prop:l,defaultProp:H,onChange:Y});return tl.default.createElement(Xw,{scope:a.__scopeToggleGroup,type:"single",value:oa?[oa]:[],onItemActivate:Fa,onItemDeactivate:tl.default.useCallback(()=>Fa(""),[Fa])},tl.default.createElement(iD,Ye({},ka,{ref:d})))}),gD=tl.default.forwardRef((a,d)=>{const {value:l,defaultValue:H,onValueChange:Y=
()=>{}}=a,ka=If(a,["value","defaultValue","onValueChange"]),[oa=[],Fa]=ci({prop:l,defaultProp:H,onChange:Y}),Qa=tl.default.useCallback(db=>Fa((jb=[])=>[...jb,db]),[Fa]),Wa=tl.default.useCallback(db=>Fa((jb=[])=>jb.filter(Mb=>Mb!==db)),[Fa]);return tl.default.createElement(Xw,{scope:a.__scopeToggleGroup,type:"multiple",value:oa,onItemActivate:Qa,onItemDeactivate:Wa},tl.default.createElement(iD,Ye({},ka,{ref:d})))}),[hD,Iq]=ft("ToggleGroup"),iD=tl.default.forwardRef((a,d)=>{const {__scopeToggleGroup:l,
disabled:H=!1,rovingFocus:Y=!0,orientation:ka,dir:oa,loop:Fa=!0}=a;var Qa=If(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=Qo(l);const Wa=Vb(oa);Qa=ne({role:"group",dir:Wa},Qa);return tl.default.createElement(hD,{scope:l,rovingFocus:Y,disabled:H},Y?tl.default.createElement(YB,Ye({asChild:!0},a,{orientation:ka,dir:Wa,loop:Fa}),tl.default.createElement(Tl.div,Ye({},Qa,{ref:d}))):tl.default.createElement(Tl.div,Ye({},Qa,{ref:d})))}),IH=tl.default.forwardRef((a,d)=>{var l=
Av("ToggleGroupItem",a.__scopeToggleGroup);const H=Iq("ToggleGroupItem",a.__scopeToggleGroup),Y=Qo(a.__scopeToggleGroup);l=l.value.includes(a.value);const ka=H.disabled||a.disabled;a=qf(ne({},a),{pressed:l,disabled:ka});const oa=tl.default.useRef(null);return H.rovingFocus?tl.default.createElement(ZB,Ye({asChild:!0},Y,{focusable:!ka,active:l,ref:oa}),tl.default.createElement(jD,Ye({},a,{ref:d}))):tl.default.createElement(jD,Ye({},a,{ref:d}))}),jD=tl.default.forwardRef((a,d)=>{const {__scopeToggleGroup:l,
value:H}=a,Y=If(a,["__scopeToggleGroup","value"]),ka=Av("ToggleGroupItem",l);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return tl.default.createElement(fD,Ye({},"single"===ka.type?a:void 0,Y,{ref:d,onPressedChange:oa=>{if(oa)ka.onItemActivate(H);else ka.onItemDeactivate(H)}}))}),hz=Ww,kD=IH,Ep=V(586),iz=V(586),Kj=V(586),lD="LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),
mD=["YoutubeLink","TwitterLink","IFrameSource","Links"],mm=new Map,ju={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:["TextStyle",
"Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"]},nD=Object.entries(ju).filter(([,a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),JH=gf(()=>{const a=ff(),{handlers:{t:d}}=Hm.default.useContext(yj),l=Ua("AutoResizing"),H=l.every(Y=>Y.props.isAutoResizing);return(0,Kj.jsx)(ua,
{tooltip:d("whiteboard/auto-resize"),toggle:l.every(Y=>"logseq-portal"===Y.props.type),className:"tl-button",pressed:H,onPressedChange:Y=>{l.forEach(ka=>{if("logseq-portal"===ka.props.type)ka.update({isAutoResizing:Y});else ka.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},children:(0,Kj.jsx)(Yh,{name:"dimensions"})})}),KH=gf(()=>{const a=ff();var {handlers:{t:d}}=Hm.default.useContext(yj);const l=Ua("LogseqPortalViewMode"),H=l.every(Y=>Y.collapsed);if(!H&&!l.every(Y=>!Y.collapsed))return null;
d=(0,Kj.jsxs)("div",{className:"flex",children:[H?d("whiteboard/expand"):d("whiteboard/collapse"),(0,Kj.jsx)(Sn,{action:H?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,Kj.jsx)(ua,{tooltip:d,toggle:l.every(Y=>"logseq-portal"===Y.props.type),className:"tl-button",pressed:H,onPressedChange:()=>a.api.setCollapsed(!H),children:(0,Kj.jsx)(Yh,{name:H?"object-expanded":"object-compact"})})}),LH=gf(()=>{const {handlers:{isMobile:a}}=Hm.default.useContext(yj);var d=Ua("ScaleLevel");
d=1<(new Set(d.map(l=>l.scaleLevel))).size?"":d[0].scaleLevel;return(0,Kj.jsx)(Ki,{scaleLevel:d,compact:a()})}),MH=gf(()=>{const a=ff(),{handlers:{t:d}}=Hm.default.useContext(yj),l=Ua("IFrameSource")[0],H=Hm.default.useCallback(ka=>{l.onIFrameSourceChange(ka.target.value.trim().toLowerCase());a.persist()},[]),Y=Hm.default.useCallback(()=>{l.reload()},[]);return(0,Kj.jsxs)("span",{className:"flex gap-3",children:[(0,Kj.jsx)(ja,{tooltip:d("whiteboard/reload"),type:"button",onClick:Y,children:(0,Kj.jsx)(Yh,
{name:"refresh"})}),(0,Kj.jsx)(Rh,{title:d("whiteboard/website-url"),className:"tl-iframe-src",value:`${l.props.url}`,onChange:H}),(0,Kj.jsx)(ja,{tooltip:d("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(l.props.url),children:(0,Kj.jsx)(Yh,{name:"external-link"})})]})}),NH=gf(()=>{const a=ff(),{handlers:{t:d}}=Hm.default.useContext(yj),l=Ua("YoutubeLink")[0],H=Hm.default.useCallback(Y=>{l.onYoutubeLinkChange(Y.target.value);a.persist()},[]);return(0,Kj.jsxs)("span",{className:"flex gap-3",
children:[(0,Kj.jsx)(Rh,{title:d("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${l.props.url}`,onChange:H}),(0,Kj.jsx)(ja,{tooltip:d("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var Y,ka,oa;return null==(oa=null==(ka=null==(Y=window.logseq)?void 0:Y.api)?void 0:ka.open_external_link)?void 0:oa.call(ka,l.props.url)},children:(0,Kj.jsx)(Yh,{name:"external-link"})})]})}),OH=gf(()=>{const a=ff(),{handlers:{t:d}}=Hm.default.useContext(yj),l=Ua("TwitterLink")[0],H=Hm.default.useCallback(Y=>
{l.onTwitterLinkChange(Y.target.value);a.persist()},[]);return(0,Kj.jsxs)("span",{className:"flex gap-3",children:[(0,Kj.jsx)(Rh,{title:d("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${l.props.url}`,onChange:H}),(0,Kj.jsx)(ja,{tooltip:d("whiteboard/open-twitter-url"),type:"button",onClick:()=>{var Y,ka,oa;return null==(oa=null==(ka=null==(Y=window.logseq)?void 0:Y.api)?void 0:ka.open_external_link)?void 0:oa.call(ka,l.props.url)},children:(0,Kj.jsx)(Yh,{name:"external-link"})})]})}),
PH=gf(()=>{const a=ff(),{handlers:{t:d}}=Hm.default.useContext(yj);var l=Ua("NoFill");const H=Hm.default.useCallback(Y=>{a.selectedShapesArray.forEach(ka=>ka.update({noFill:Y}));a.persist()},[]);l=l.every(Y=>Y.props.noFill);return(0,Kj.jsx)(ua,{tooltip:d("whiteboard/fill"),className:"tl-button",pressed:l,onPressedChange:H,children:(0,Kj.jsx)(Yh,{name:l?"droplet-off":"droplet"})})}),Jq=gf(()=>{const a=ff(),d=Ua("Swatch"),l=Hm.default.useCallback(Y=>{a.selectedShapesArray.forEach(ka=>{ka.update({fill:Y,
stroke:Y})});a.persist()},[]),H=Hm.default.useCallback(Y=>{a.selectedShapesArray.forEach(ka=>{ka.update({opacity:Y})});a.persist()},[]);return(0,Kj.jsx)(Ag,{popoverSide:"top",color:d[0].props.noFill?d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:H,setColor:l})}),QH=gf(()=>{const a=ff(),d=Hm.default.useCallback(l=>{a.api.convertShapes(l.currentTarget.dataset.tool)},[]);return(0,Kj.jsx)(mC,{popoverSide:"top",chevron:!1,setGeometry:d})}),RH=gf(()=>{const a=ff(),{handlers:{t:d}}=
Hm.default.useContext(yj),l=Ua("StrokeType"),H=l.every(Y=>"dashed"===Y.props.strokeType)?"dashed":l.every(Y=>"line"===Y.props.strokeType)?"line":"mixed";return(0,Kj.jsx)(Je,{title:d("whiteboard/stroke-type"),options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:H,onValueChange:Y=>{l.forEach(ka=>{ka.update({strokeType:Y})});a.persist()}})}),SH=gf(()=>{const a=ff(),{handlers:{t:d}}=Hm.default.useContext(yj),l=Ua("ArrowMode");var H=l.every(ka=>
{var oa;return"arrow"===(null==(oa=ka.props.decorations)?void 0:oa.start)});const Y=l.every(ka=>{var oa;return"arrow"===(null==(oa=ka.props.decorations)?void 0:oa.end)});H=[H?"start":null,Y?"end":null].filter(gg);return(0,Kj.jsx)(ea,{title:d("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:H,onValueChange:ka=>{l.forEach(oa=>{var Fa=oa.update;var Qa={start:ka.includes("start")?"arrow":null,end:ka.includes("end")?"arrow":null};
Fa.call(oa,{decorations:Qa})});a.persist()}})}),TH=gf(()=>{const a=ff(),{handlers:{t:d}}=Hm.default.useContext(yj),l=Ua("TextStyle"),H=l.every(ka=>500<ka.props.fontWeight),Y=l.every(ka=>ka.props.italic);return(0,Kj.jsxs)("span",{className:"flex gap-1",children:[(0,Kj.jsx)(ua,{tooltip:d("whiteboard/bold"),className:"tl-button",pressed:H,onPressedChange:ka=>{l.forEach(oa=>{oa.update({fontWeight:ka?700:400});oa.onResetBounds()});a.persist()},children:(0,Kj.jsx)(Yh,{name:"bold"})}),(0,Kj.jsx)(ua,{tooltip:d("whiteboard/italic"),
className:"tl-button",pressed:Y,onPressedChange:ka=>{l.forEach(oa=>{oa.update({italic:ka});oa.onResetBounds()});a.persist()},children:(0,Kj.jsx)(Yh,{name:"italic"})})]})}),UH=gf(()=>{var a;const d=ff(),l=d.selectedShapesArray[0];return(0,Kj.jsx)(cs,{onRefsChange:H=>{l.update({refs:H});d.persist()},refs:null!=(a=l.props.refs)?a:[],shapeType:l.props.type,side:"right",pageId:"logseq-portal"===l.props.type?l.props.pageId:void 0,portalType:"logseq-portal"===l.props.type?l.props.blockType:void 0})});mm.set("Geometry",
QH);mm.set("AutoResizing",JH);mm.set("LogseqPortalViewMode",KH);mm.set("ScaleLevel",LH);mm.set("YoutubeLink",NH);mm.set("TwitterLink",OH);mm.set("IFrameSource",MH);mm.set("NoFill",PH);mm.set("Swatch",Jq);mm.set("StrokeType",RH);mm.set("ArrowMode",SH);mm.set("TextStyle",TH);mm.set("Links",UH);var oD=a=>{var d;return(null!=(d=ju[a])?d:[]).filter(gg)},pD=a=>{const d=a.map(H=>H.props.type),l=new Set(0<a.length?oD(d[0]):[]);for(let H=1;H<d.length&&0<l.size;H++){const Y=oD(d[H]);l.forEach(ka=>{Y.includes(ka)||
l.delete(ka)})}1<a.length&&mD.forEach(H=>{l.has(H)&&l.delete(H)});return Array.from(l).sort((H,Y)=>lD.indexOf(H)-lD.indexOf(Y)).map(H=>mm.get(H))},Bv=V(586),VH=gf(({shapes:a,offsets:d,hidden:l})=>{const H=ff(),Y=bv.useRef(null),ka=bv.useRef(null);bv.useLayoutEffect(()=>{setTimeout(()=>{const Fa=ka.current;if(Fa){var {offsetWidth:Qa,offsetHeight:Wa}=Fa;Y.current=[Qa,Wa]}})});bv.useLayoutEffect(()=>{var Fa;const Qa=ka.current;if(Qa){var Wa=null!=(Fa=Y.current)?Fa:[0,0];Fa=0;if(116>d.top){var db=d.height/
2+40;140>d.bottom&&(db+=d.bottom-140)}else db=-(d.height/2+40);16>d.left+d.width/2-Wa[0]/2?Fa+=-(d.left+d.width/2-Wa[0]/2-16):16>d.right+d.width/2-Wa[0]/2&&(Fa+=d.right+d.width/2-Wa[0]/2-16);var [jb,Mb]=[Fa,db];Qa.style.transform=`translateX(${jb}px) translateY(${Mb}px)`}},[d]);if(!H)return null;const oa=pD(a);return(0,Bv.jsx)(up,{centered:!0,children:0<oa.length&&(0,Bv.jsx)("div",{ref:ka,className:"tl-toolbar tl-context-bar",style:{visibility:l?"hidden":"visible",pointerEvents:l?"none":"all"},children:oa.map((Fa,
Qa)=>(0,Bv.jsxs)(bv.Fragment,{children:[(0,Bv.jsx)(Fa,{}),Qa<oa.length-1&&(0,Bv.jsx)(Sp,{className:"tl-toolbar-separator",orientation:"vertical"})]},Qa))})})}),jz=vf(V(22)),nm=V(22),[WH]=mk("ContextMenu",[ij]),Cv=ij(),[qD,rD]=WH("ContextMenu"),XH=(0,nm.forwardRef)((a,d)=>{const {__scopeContextMenu:l,disabled:H=!1}=a,Y=If(a,["__scopeContextMenu","disabled"]),ka=rD("ContextMenuTrigger",l),oa=Cv(l),Fa=(0,nm.useRef)({x:0,y:0}),Qa=(0,nm.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(ne({width:0,height:0},
Fa.current))}),Wa=(0,nm.useRef)(0),db=(0,nm.useCallback)(()=>window.clearTimeout(Wa.current),[]);(0,nm.useEffect)(()=>db,[db]);(0,nm.useEffect)(()=>void(H&&db()),[H,db]);return(0,nm.createElement)(nm.Fragment,null,(0,nm.createElement)(xj,Ye({},oa,{virtualRef:Qa})),(0,nm.createElement)(Tl.span,Ye({"data-state":ka.open?"open":"closed","data-disabled":H?"":void 0},Y,{ref:d,style:ne({WebkitTouchCallout:"none"},a.style),onContextMenu:H?a.onContextMenu:Uf(a.onContextMenu,jb=>{db();Fa.current={x:jb.clientX,
y:jb.clientY};ka.onOpenChange(!0);jb.preventDefault()}),onPointerDown:H?a.onPointerDown:Uf(a.onPointerDown,vb(jb=>{db();Wa.current=window.setTimeout(()=>{Fa.current={x:jb.clientX,y:jb.clientY};ka.onOpenChange(!0)},700)})),onPointerMove:H?a.onPointerMove:Uf(a.onPointerMove,vb(db)),onPointerCancel:H?a.onPointerCancel:Uf(a.onPointerCancel,vb(db)),onPointerUp:H?a.onPointerUp:Uf(a.onPointerUp,vb(db))})))}),sD=(0,nm.forwardRef)((a,d)=>{var {__scopeContextMenu:l}=a;const H=If(a,["__scopeContextMenu"]),Y=
rD("ContextMenuContent",l);l=Cv(l);const ka=(0,nm.useRef)(!1);return(0,nm.createElement)(Ms,Ye({},l,H,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:oa=>{var Fa;null===(Fa=a.onCloseAutoFocus)||void 0===Fa||Fa.call(a,oa);!oa.defaultPrevented&&ka.current&&oa.preventDefault();ka.current=!1},onInteractOutside:oa=>{var Fa;null===(Fa=a.onInteractOutside)||void 0===Fa||Fa.call(a,oa);oa.defaultPrevented||Y.modal||(ka.current=!0)},style:qf(ne({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Jm=(0,nm.forwardRef)((a,d)=>{var {__scopeContextMenu:l}=a;a=If(a,["__scopeContextMenu"]);l=Cv(l);return(0,nm.createElement)(Ou,Ye({},l,a,{ref:d}))}),Fp=(0,nm.forwardRef)((a,d)=>{var {__scopeContextMenu:l}=a;a=If(a,["__scopeContextMenu"]);l=Cv(l);return(0,nm.createElement)(py,Ye({},l,a,{ref:d}))}),Dv=a=>{const {__scopeContextMenu:d,children:l,onOpenChange:H,dir:Y,modal:ka=!0}=a,[oa,Fa]=(0,nm.useState)(!1);a=Cv(d);const Qa=Gf(H),Wa=(0,nm.useCallback)(db=>{Fa(db);Qa(db)},[Qa]);return(0,nm.createElement)(qD,
{scope:d,open:oa,onOpenChange:Wa,modal:ka},(0,nm.createElement)(Ot,Ye({},a,{dir:Y,open:oa,onOpenChange:Wa,modal:ka}),l))},Ef=V(586),kz=gf(function({children:a,collisionRef:d}){var l,H,Y,ka,oa,Fa,Qa,Wa,db,jb,Mb,Ub,Nb,lc,xc,$b,nc;const jc=ff(),{handlers:Ic}=jz.useContext(yj),Jc=Ic.t,Gd=jz.useRef(null),Xd=me=>{me();jc.transition("select")},Re=jz.useMemo(()=>Hf(),[]);return(0,Ef.jsxs)(Dv,{onOpenChange:me=>{me&&!jc.isIn("select.contextMenu")?jc.transition("select").selectedTool.transition("contextMenu"):
!me&&jc.isIn("select.contextMenu")&&jc.selectedTool.transition("idle")},children:[(0,Ef.jsx)(XH,{disabled:jc.editingShape&&0!==Object.keys(jc.editingShape).length,children:a}),(0,Ef.jsx)(sD,{className:"tl-menu tl-context-menu",ref:Gd,onEscapeKeyDown:()=>jc.transition("select"),collisionBoundary:d.current,asChild:!0,tabIndex:-1,children:(0,Ef.jsxs)("div",{children:[1<(null==(l=jc.selectedShapes)?void 0:l.size)&&!jc.readOnly&&(null==(H=jc.selectedShapesArray)?void 0:H.some(me=>!me.props.isLocked))&&
(0,Ef.jsxs)(Ef.Fragment,{children:[(0,Ef.jsxs)(Jm,{children:[(0,Ef.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,Ef.jsx)(ja,{tooltip:Jc("whiteboard/align-left"),onClick:()=>Xd(()=>jc.align("left")),children:(0,Ef.jsx)(Yh,{name:"layout-align-left"})}),(0,Ef.jsx)(ja,{tooltip:Jc("whiteboard/align-center-horizontally"),onClick:()=>Xd(()=>jc.align("centerHorizontal")),children:(0,Ef.jsx)(Yh,{name:"layout-align-center"})}),(0,Ef.jsx)(ja,{tooltip:Jc("whiteboard/align-right"),onClick:()=>
Xd(()=>jc.align("right")),children:(0,Ef.jsx)(Yh,{name:"layout-align-right"})}),(0,Ef.jsx)(Sp,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Ef.jsx)(ja,{tooltip:Jc("whiteboard/distribute-horizontally"),onClick:()=>Xd(()=>jc.distribute("horizontal")),children:(0,Ef.jsx)(Yh,{name:"layout-distribute-vertical"})})]}),(0,Ef.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,Ef.jsx)(ja,{tooltip:Jc("whiteboard/align-top"),onClick:()=>Xd(()=>jc.align("top")),children:(0,Ef.jsx)(Yh,
{name:"layout-align-top"})}),(0,Ef.jsx)(ja,{tooltip:Jc("whiteboard/align-center-vertically"),onClick:()=>Xd(()=>jc.align("centerVertical")),children:(0,Ef.jsx)(Yh,{name:"layout-align-middle"})}),(0,Ef.jsx)(ja,{tooltip:Jc("whiteboard/align-bottom"),onClick:()=>Xd(()=>jc.align("bottom")),children:(0,Ef.jsx)(Yh,{name:"layout-align-bottom"})}),(0,Ef.jsx)(Sp,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Ef.jsx)(ja,{tooltip:Jc("whiteboard/distribute-vertically"),onClick:()=>Xd(()=>jc.distribute("vertical")),
children:(0,Ef.jsx)(Yh,{name:"layout-distribute-horizontal"})})]})]}),(0,Ef.jsx)(Fp,{className:"menu-separator"}),(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.packIntoRectangle),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"layout-grid"}),Jc("whiteboard/pack-into-rectangle")]}),(0,Ef.jsx)(Fp,{className:"menu-separator"})]}),0<(null==(Y=jc.selectedShapes)?void 0:Y.size)&&(0,Ef.jsxs)(Ef.Fragment,{children:[(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.api.zoomToSelection),
children:[Jc("whiteboard/zoom-to-fit"),(0,Ef.jsx)(Sn,{action:"whiteboard/zoom-to-fit"})]}),(0,Ef.jsx)(Fp,{className:"menu-separator"})]}),(jc.selectedShapesArray.some(me=>"group"===me.type||jc.getParentGroup(me))||1<jc.selectedShapesArray.length)&&(null==(ka=jc.selectedShapesArray)?void 0:ka.some(me=>!me.props.isLocked))&&!jc.readOnly&&(0,Ef.jsxs)(Ef.Fragment,{children:[jc.selectedShapesArray.some(me=>"group"===me.type||jc.getParentGroup(me))&&(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>
Xd(jc.api.unGroup),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"ungroup"}),Jc("whiteboard/ungroup"),(0,Ef.jsx)(Sn,{action:"whiteboard/ungroup"})]}),1<jc.selectedShapesArray.length&&(null==(oa=jc.selectedShapesArray)?void 0:oa.some(me=>!me.props.isLocked))&&(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.api.doGroup),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"group"}),Jc("whiteboard/group"),(0,Ef.jsx)(Sn,{action:"whiteboard/group"})]}),(0,Ef.jsx)(Fp,{className:"menu-separator"})]}),
0<(null==(Fa=jc.selectedShapes)?void 0:Fa.size)&&(null==(Qa=jc.selectedShapesArray)?void 0:Qa.some(me=>!me.props.isLocked))&&(0,Ef.jsxs)(Ef.Fragment,{children:[!jc.readOnly&&(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.cut),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"cut"}),Jc("whiteboard/cut")]}),(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.copy),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"copy"}),Jc("whiteboard/copy"),(0,Ef.jsx)(Sn,{action:"editor/copy"})]})]}),
!jc.readOnly&&(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.paste),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"clipboard"}),Jc("whiteboard/paste"),(0,Ef.jsx)("div",{className:"tl-menu-right-slot",children:(0,Ef.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Ef.jsx)("code",{children:EA})," ",(0,Ef.jsx)("code",{children:"v"})]})})]}),1===(null==(Wa=jc.selectedShapes)?void 0:Wa.size)&&!jc.readOnly&&(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(()=>jc.paste(void 0,
!0)),children:[Jc("whiteboard/paste-as-link"),(0,Ef.jsx)("div",{className:"tl-menu-right-slot",children:(0,Ef.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Ef.jsx)("code",{children:EA})," ",(0,Ef.jsx)("code",{children:"⇧"})," ",(0,Ef.jsx)("code",{children:"v"})]})})]}),0<(null==(db=jc.selectedShapes)?void 0:db.size)&&(0,Ef.jsxs)(Ef.Fragment,{children:[(0,Ef.jsx)(Fp,{className:"menu-separator"}),(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(()=>{var me,Le;return Ic.exportToImage(jc.currentPageId,
{x:jc.selectionBounds.minX+jc.viewport.camera.point[0]-8,y:jc.selectionBounds.minY+jc.viewport.camera.point[1]-8,width:(null==(me=jc.selectionBounds)?void 0:me.width)+16,height:(null==(Le=jc.selectionBounds)?void 0:Le.height)+16,zoom:jc.viewport.camera.zoom})}),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"file-export"}),Jc("whiteboard/export"),(0,Ef.jsx)("div",{className:"tl-menu-right-slot",children:(0,Ef.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,Ef.jsx)(Fp,{className:"menu-separator"}),
(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.api.selectAll),children:[Jc("whiteboard/select-all"),(0,Ef.jsx)(Sn,{action:"editor/select-parent"})]}),1<(null==(jb=jc.selectedShapes)?void 0:jb.size)&&(0,Ef.jsx)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.api.deselectAll),children:Jc("whiteboard/deselect-all")}),!jc.readOnly&&0<(null==(Mb=jc.selectedShapes)?void 0:Mb.size)&&(null==(Ub=jc.selectedShapesArray)?void 0:Ub.some(me=>!me.props.isLocked))&&(0,Ef.jsxs)(Jm,{className:"tl-menu-item",
onClick:()=>Xd(()=>jc.setLocked(!0)),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"lock"}),Jc("whiteboard/lock"),(0,Ef.jsx)(Sn,{action:"whiteboard/lock"})]}),!jc.readOnly&&0<(null==(Nb=jc.selectedShapes)?void 0:Nb.size)&&(null==(lc=jc.selectedShapesArray)?void 0:lc.some(me=>me.props.isLocked))&&(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(()=>jc.setLocked(!1)),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"lock-open"}),Jc("whiteboard/unlock"),(0,Ef.jsx)(Sn,{action:"whiteboard/unlock"})]}),
0<(null==(xc=jc.selectedShapes)?void 0:xc.size)&&!jc.readOnly&&(null==($b=jc.selectedShapesArray)?void 0:$b.some(me=>!me.props.isLocked))&&(0,Ef.jsxs)(Ef.Fragment,{children:[(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.api.deleteShapes),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"backspace"}),Jc("whiteboard/delete"),(0,Ef.jsx)(Sn,{action:"editor/delete"})]}),1<(null==(nc=jc.selectedShapes)?void 0:nc.size)&&!jc.readOnly&&(0,Ef.jsxs)(Ef.Fragment,{children:[(0,Ef.jsx)(Fp,{className:"menu-separator"}),
(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.flipHorizontal),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"flip-horizontal"}),Jc("whiteboard/flip-horizontally")]}),(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.flipVertical),children:[(0,Ef.jsx)(Yh,{className:"tl-menu-icon",name:"flip-vertical"}),Jc("whiteboard/flip-vertically")]})]}),!jc.readOnly&&(0,Ef.jsxs)(Ef.Fragment,{children:[(0,Ef.jsx)(Fp,{className:"menu-separator"}),(0,Ef.jsxs)(Jm,{className:"tl-menu-item",
onClick:()=>Xd(jc.bringToFront),children:[Jc("whiteboard/move-to-front"),(0,Ef.jsx)(Sn,{action:"whiteboard/bring-to-front"})]}),(0,Ef.jsxs)(Jm,{className:"tl-menu-item",onClick:()=>Xd(jc.sendToBack),children:[Jc("whiteboard/move-to-back"),(0,Ef.jsx)(Sn,{action:"whiteboard/send-to-back"})]})]}),Re&&(0,Ef.jsx)(Jm,{className:"tl-menu-item",onClick:()=>{1===jc.selectedShapesArray.length?console.log(Ab(jc.selectedShapesArray[0].serialized)):console.log(jc.selectedShapesArray.map(me=>Ab(me.serialized)))},
children:Jc("whiteboard/dev-print-shape-props")})]})]})})]})}),lz=vf(V(22)),mz=V(586),tD=gf(({shape:a})=>{const d=ff(),{handlers:l}=lz.default.useContext(yj),H=l.t,Y=lz.default.useMemo(()=>{var ka;const oa=[...(null!=(ka=a.props.refs)?ka:[])].map(Fa=>[Fa,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&oa.unshift([a.props.pageId,!1]);return oa.filter(Fa=>Fa[0].toLowerCase()!==d.currentPage.name&&l.getBlockPageName(Fa[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);
return 0===Y.length?null:(0,mz.jsx)("div",{className:"tl-quick-links",title:H("whiteboard/shape-quick-links"),children:Y.map(([ka,oa])=>(0,mz.jsx)("div",{className:"tl-quick-links-row",children:(0,mz.jsx)(Ky,{id:ka,showReferenceContent:oa})},ka))})}),ds=vf(V(22)),Kq=vf(V(22)),uD=[".png",".svg",".jpg",".jpeg",".gif"],vD=[".mp4",".webm",".ogg"],YH=(a,d,l)=>yi(void 0,[a,d,l],function*(H,{point:Y,shiftKey:ka,dataTransfer:oa,fromDrop:Fa},Qa){function Wa(ld,qd){return yi(this,null,function*(){const ie=
Object.values(H.assets).find(mf=>mf.src===ld);return ie?ie:{id:ml(),type:qd?"video":"image",src:ld,size:yield kj(Qa.makeAssetUrl(ld),qd)}})}function db(ld){return yi(this,null,function*(){const qd=ld.filter(ie=>"unknown"!==ec(ie.name)).map(ie=>yi(this,null,function*(){try{const mf=yield Qa.saveAsset(ie);return yield Wa(mf,"video"===ec(ie.name))}catch(mf){console.error(mf)}return null}));return(yield Promise.all(qd)).filter(gg)})}function jb(ld){return[qf(ne({},kr.defaultProps),{html:ld,point:[Y[0],
Y[1]]})]}function Mb(ld){return yi(this,null,function*(){return wc(Nb,$b,xc,nc,lc,Xd)(ld)})}function Ub(){return yi(this,null,function*(){const ld=yield navigator.clipboard.read(),qd=wc(nc,lc,Xd);return(yield Promise.all(ld.map(ie=>qd(ie)))).flat().filter(gg)})}function Nb(ld){return yi(this,null,function*(){var qd=Array.from(ld.files);return 0<qd.length?(Le=qd=yield db(qd),qd.map((ie,mf)=>{const sf=qf(ne({},"video"===ie.type?vv.defaultProps:sv.defaultProps),{id:ml(),assetId:ie.id,opacity:1});ie.size&&
Object.assign(sf,{point:[Y[0]-ie.size[0]/4+16*mf,Y[1]-ie.size[1]/4+16*mf],size:le.div(ie.size,2)});return sf})):null})}function lc(ld){return yi(this,null,function*(){if(ld.types.includes("text/plain")&&(ka||Fa))return null;const qd=yield Uc(ld,"text/html");return qd?wc(jc,jb)(qd):null})}function xc(ld){return yi(this,null,function*(){var qd,ie,mf,sf,$f,Kf,Xf=ld.getData("block-uuid");if(Xf){Xf=Xf.trim();const Yg=null==(mf=null==(ie=null==(qd=window.logseq)?void 0:qd.api)?void 0:ie.get_selected_blocks)?
void 0:mf.call(ie);qd=Yg&&1<(null==Yg?void 0:Yg.length)?Yg.map(Lf=>Lf.uuid):[Xf];null==(Kf=null==($f=null==(sf=window.logseq)?void 0:sf.api)?void 0:$f.set_blocks_id)?void 0:Kf.call($f,qd);sf=qd.map(Lf=>Gd(`((${Lf}))`));return(yield Promise.all(sf)).flat().filter(gg).map((Lf,Dh)=>qf(ne({},Lf),{point:[Y[0]+(lm.defaultProps.size[0]+16)*Dh,Y[1]]}))}return null})}function $b(ld){return yi(this,null,function*(){var qd=ld.getData("page-name");return qd?(qd=qd.trim(),Gd(`[[${qd}]]`)):null})}function nc(ld){return yi(this,
null,function*(){var qd=yield Uc(ld,"text/plain");return qd?(qd=qd.trim(),wc(Ic,Jc)(qd)):null})}function jc(ld){if(ld=H.api.getClonedShapesFromTldrString(decodeURIComponent(ld),Y)){const {shapes:qd,assets:ie,bindings:mf}=ld;Bf.push(...ie);Ue.push(...mf);return qd}return null}function Ic(ld){return yi(this,null,function*(){try{const ie=new URL(ld);var qd=ie.host&&["http:","https:"].includes(ie.protocol)}catch(ie){qd=!1}return qd&&!ka?dt.test(ld)?[qf(ne({},cq.defaultProps),{url:ld,point:[Y[0],Y[1]]})]:
Qw.test(ld)?[qf(ne({},as.defaultProps),{url:ld,point:[Y[0],Y[1]]})]:[qf(ne({},Wg.defaultProps),{url:ld,point:[Y[0],Y[1]]})]:null})}function Jc(ld){return ld.startsWith("\x3ciframe")?[qf(ne({},kr.defaultProps),{html:ld,point:[Y[0],Y[1]]})]:null}function Gd(ld){return yi(this,null,function*(){if(/^\(\(.*\)\)$/.test(ld)&&40===ld.length){var qd=ld.slice(2,-2);if(Ok(qd))return[qf(ne({},lm.defaultProps),{point:[Y[0],Y[1]],size:[400,0],pageId:qd,fill:H.settings.color,stroke:H.settings.color,scaleLevel:H.settings.scaleLevel,
blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(ld))return qd=ld.slice(2,-2),[qf(ne({},lm.defaultProps),{point:[Y[0],Y[1]],size:[400,0],pageId:qd,fill:H.settings.color,stroke:H.settings.color,scaleLevel:H.settings.scaleLevel,blockType:"P"})];return null})}function Xd(ld){return yi(this,null,function*(){var qd=yield Uc(ld,"text/plain");return qd&&(qd=qd.trim(),qd=null==Qa?void 0:Qa.addNewBlock(qd))?[qf(ne({},lm.defaultProps),{size:[400,0],point:[Y[0],Y[1]],pageId:qd,fill:H.settings.color,stroke:H.settings.color,
scaleLevel:H.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var Re,me;let Le=[],Bf=[];const Ue=[];H.cursors.setCursor("progress");let df=[];try{oa?df.push(...(null!=(Re=yield Mb(oa))?Re:[])):df.push(...(null!=(me=yield Ub())?me:[]))}catch(ld){console.error(ld)}const Ud=df.map(ld=>qf(ne({},ld),{parentId:H.currentPageId,isLocked:!1,id:Ok(ld.id)?ld.id:ml()})),pd=null==oa?void 0:oa.types.every(ld=>"Files"===ld);H.wrapUpdate(()=>{var ld=[...Le,...Bf];0<ld.length&&H.createAssets(ld);0<Ud.length&&
H.createShapes(Ud);H.currentPage.updateBindings(Object.fromEntries(Ue.map(qd=>[qd.id,qd])));if(1===H.selectedShapesArray.length&&1===Ud.length&&Fa){ld=H.selectedShapesArray[0];const qd=H.getShapeById(Ud[0].id);H.createNewLineBinding(ld,qd)}H.setSelectedShapes(Ud.map(qd=>qd.id));H.selectedTool.transition("idle");H.cursors.setCursor("default");(Fa||pd)&&H.packIntoRectangle()})}),wD=vf(V(22)),nr=vf(V(22)),Lq=V(586),nz=[wv,Sw,Vw,Tw,Uw,xv,mr,Gn,iu,fz,dq,Wm],Zw=a=>{const {renderers:d}=Jt.useContext(yj);
return(0,Lq.jsx)(d.BacklinksCount,qf(ne({},a),{options:{"portal?":!1}}))},oz=()=>{const a=Jt.useRef(null),d=ff(),l=Jt.useMemo(()=>({ContextBar:VH,BacklinksCount:Zw,QuickLinks:tD}),[]);return(0,Lq.jsx)(kz,{collisionRef:a,children:(0,Lq.jsx)("div",{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":d.uuid,children:(0,Lq.jsx)($F,{components:l,children:(0,Lq.jsx)(DC,{})})})})},xD=a=>{var {onPersist:d,readOnly:l,model:H}=a;a=If(a,["onPersist","readOnly","model"]);const Y=wd(),ka=jd(),oa=
Sd(),Fa=l?null:Ae(),Qa=Jt.useCallback((Wa,db)=>{null==d?void 0:d(Wa,db)},[H]);return(0,Lq.jsx)(WF,qf(ne({Shapes:ez,Tools:nz,onDrop:Y,onPaste:ka,onCopy:oa,readOnly:l,onCanvasDBClick:Fa,onPersist:Qa,model:H},a),{children:(0,Lq.jsx)(oz,{})}))},yD=function(a){var {renderers:d,handlers:l}=a;a=If(a,["renderers","handlers"]);const H={renderers:Jt.useMemo(()=>Object.fromEntries(Object.entries(d).map(([Y,ka])=>[Y,Jt.memo(ka)])),[]),handlers:l};return(0,Lq.jsx)(yj.Provider,{value:H,children:(0,Lq.jsx)(xD,ne({},
a))})}};
'use strict';var Kpd=function(a){return a},Lpd=function(a,b){return $APP.vh.j(function(c){var d=$APP.kf(c);c=$APP.G.j(d,$APP.xD);d=$APP.G.j(d,$APP.SG);return new $APP.m(null,2,[$APP.tl,$APP.u.C(c),$APP.mHb,$APP.Xy.j(d,new $APP.O(null,2,5,$APP.R,[$APP.eF,$APP.mHb],null))],null)},$APP.Pf.j(function(c){return $APP.eF.C($APP.SG.C(c))},$APP.OH(a,b,new $APP.m(null,1,[$APP.Ft,new $APP.O(null,2,5,$APP.R,[$APP.xD,$APP.SG],null)],null))))},Mpd=function(a){return $APP.Hq.G(a,$APP.F([$APP.Iq,!0]))},Npd=function(a,
b,c,d){var e=$APP.UH(a);b=new $APP.m(null,2,[$APP.fF,$APP.gjb,$APP.hF,new $APP.m(null,6,[$APP.tl,$APP.wa(b,"id"),$APP.W,$APP.wa(b,"name"),$APP.SI,Mpd($APP.wa(b,"bindings")),$APP.mHb,$APP.wa(b,"nonce"),$APP.nHb,Mpd(c),$APP.jHb,d],null)],null);c=$APP.qx();e=$APP.sI.C(e);e=$APP.n(e)?e:$APP.qx();return new $APP.m(null,5,[$APP.Br,a,$APP.uH,"whiteboard",$APP.SG,b,$APP.tI,c,$APP.sI,e],null)},Opd=function(a,b,c,d,e,f){a=Mpd(a.getCleanUpAssets());var g=b.shapes,h=$APP.vh.j(function(E){return $APP.wa(E,"id")},
g),l=$APP.bh(h,$APP.qj.C(g.length));g=$APP.Zg($APP.vh.j(function(E){E=$APP.kf(E);E=$APP.G.j(E,$APP.tl);return $APP.T.F(Mpd(b.getShapeById(E).serialized),$APP.my,$APP.G.j(l,E))},$APP.VA.j(c,d)));d=$APP.Zg($APP.vh.j($APP.tl,d));var p=$APP.Zg($APP.vh.j($APP.tl,c)),q=$APP.Zg($APP.Gm.j($APP.Rj,$APP.VA.j(p,d)));c=$APP.Zg($APP.Pf.j(function(E){E=$APP.tl.C(E);return q.C?q.C(E):q.call(null,E)},g));var r=$APP.Gm.j($APP.Rj,$APP.VA.j(d,p)),t=$APP.sC();d=$APP.x(r)?$APP.vh.j(function(E){return $APP.Xy.j(E,new $APP.O(null,
2,5,$APP.R,[$APP.SG,$APP.eF],null))},function(){var E=new $APP.O(null,1,5,$APP.R,[$APP.Gz],null),H=$APP.pj.j(function(K){return new $APP.O(null,2,5,$APP.R,[$APP.xD,$APP.Wh(K)],null)},r);return $APP.RF?$APP.RF(t,E,H):$APP.SF.call(null,t,E,H)}()):null;p=$APP.pj.j(function(E){return new $APP.O(null,2,5,$APP.R,[$APP.gLa,new $APP.O(null,2,5,$APP.R,[$APP.xD,$APP.Wh(E)],null)],null)},r);var y=$APP.VA.j(g,c),z=$APP.x(y)?function(){var E=new $APP.O(null,1,5,$APP.R,[$APP.Gz],null),H=$APP.pj.j(function(K){return new $APP.O(null,
2,5,$APP.R,[$APP.xD,$APP.Wh($APP.tl.C(K))],null)},y);return $APP.RF?$APP.RF(t,E,H):$APP.SF.call(null,t,E,H)}():null;return new $APP.m(null,4,[$APP.Cuc,Npd(e,b,a,h),$APP.WKc,$APP.vh.j(function(E){return $APP.Wd(q,$APP.u.C($APP.xD.C(E)))?$APP.T.F(E,$APP.tI,$APP.qx()):$APP.fub(E)},$APP.vh.j(function(E){E=new $APP.m(null,2,[$APP.fF,$APP.XN,$APP.eF,E],null);E=new $APP.m(null,3,[$APP.PF,new $APP.m(null,1,[$APP.Br,$APP.Ar.C?$APP.Ar.C(e):$APP.Ar.call(null,e)],null),$APP.bG,new $APP.m(null,1,[$APP.Br,e],null),
$APP.SG,E],null);var H=$APP.mjb(E,e);return $APP.Nl.G($APP.F([E,H]))},g)),$APP.qG,p,$APP.QYb,new $APP.m(null,3,[$APP.ZDb,$APP.Hb(f),$APP.utb,f,$APP.tw,new $APP.m(null,5,[$APP.ZN,e,$APP.DHb,d,$APP.EHb,c,$APP.FHb,y,$APP.GHb,z],null)],null)],null)},Ppd=function(a,b,c){var d=$APP.$c($APP.A(b.pages)),e=d.shapes,f=$APP.UH(a);f=$APP.Xy.j(f,new $APP.O(null,3,5,$APP.R,[$APP.SG,$APP.hF,$APP.jHb],null));var g=$APP.bh(f,$APP.qj.C($APP.Vc(f)));e=$APP.Zg($APP.Sn.j(function(q,r){var t=r.id;return new $APP.m(null,
2,[$APP.tl,t,$APP.mHb,$APP.B.j(q,$APP.G.j(g,t))?r.nonce:Date.now()],null)},e));var h=$APP.sC();f=function(){var q=$APP.Xy.j($APP.v($APP.Lad),new $APP.O(null,2,5,$APP.R,[h,a],null));return $APP.n(q)?q:$APP.Zg($APP.vh.j(function(r){return $APP.Kr.F(r,$APP.tl,$APP.u)},Lpd(h,a)))}();b=Opd(b,d,e,f,a,c);f=$APP.kf(b);d=$APP.G.j(f,$APP.Cuc);b=$APP.G.j(f,$APP.WKc);c=$APP.G.j(f,$APP.qG);f=$APP.G.j(f,$APP.QYb);d=$APP.Vk.G(c,new $APP.O(null,1,5,$APP.R,[d],null),$APP.F([b]));var l=$APP.Xy.j(f,new $APP.O(null,
2,5,$APP.R,[$APP.tw,$APP.EHb],null)),p=$APP.Xy.j(f,new $APP.O(null,2,5,$APP.R,[$APP.tw,$APP.DHb],null));l=$APP.n($APP.xf(function(q){return $APP.B.j("group",$APP.Im.C(q))},l))?$APP.T.F(f,$APP.HHb,$APP.jw):$APP.n(function(){var q=$APP.lf(p);return $APP.n(q)?$APP.wf(function(r){return $APP.B.j("group",$APP.Im.C(r))},p):q}())?$APP.T.F(f,$APP.HHb,$APP.Jvc):$APP.n($APP.xf(function(q){return $APP.B.j("line",$APP.Im.C(q))&&$APP.B.j("arrow ",$APP.To.C($APP.ttc.C(q)))},l))?$APP.T.F(f,$APP.HHb,$APP.UGc):f;
b=$APP.x($APP.Vk.j(b,c))?l:$APP.T.F(f,$APP.rYa,!0);$APP.Ih.R($APP.Lad,$APP.Iv,new $APP.O(null,2,5,$APP.R,[h,a],null),e);if($APP.Wd(new $APP.Vg(null,new $APP.m(null,1,[$APP.UGc,null],null),null),$APP.HHb.C(b)))return $APP.vC($APP.cYc,new $APP.m(null,2,[$APP.ez,d,$APP.QYb,b],null));e=$APP.cYc.C($APP.v($APP.tC));$APP.Vk.j($APP.ez.C(e),d);$APP.Nl.G($APP.F([b,$APP.QYb.C(e)]));$APP.vC($APP.cYc,$APP.jf);return null},Qpd=function(a){a=$APP.NH(a);return $APP.Gm.j($APP.ejb,a)},Rpd=function(a){var b=$APP.fz.C($APP.UH(a));
a=Qpd(a);a=$APP.Pf.j(function(d){return $APP.B.j(b,$APP.fz.C($APP.bG.C(d)))},a);var c=$APP.Zg($APP.Gm.j($APP.Db,$APP.vh.j(function(d){return $APP.Xy.F(d,new $APP.O(null,2,5,$APP.R,[$APP.cG,$APP.fz],null),null)},a)));a=$APP.Gm.j(function(d){d=$APP.fz.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},Spd=function(){return $APP.em(null,function(){return $APP.em(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.em(a.text(),function(b){return $APP.em($APP.Hr($APP.jf,
b),function(c){return $APP.Xl(c)})})})})},Tpd=function(a){var b=$APP.X0a();return($APP.od(b)||$APP.B.j(1,$APP.Vc(b))&&$APP.B.j(a,$APP.Br.C($APP.A(b))))&&$APP.Hb($APP.Xy.j($APP.v($APP.tC),new $APP.O(null,1,5,$APP.R,[$APP.DUa],null)))},Upd=function(a){return null!=a?$APP.hm($APP.em(null,function(){return $APP.em(Spd(),function(b){var c=$APP.kf(b);b=$APP.G.j(c,$APP.qI);c=$APP.G.j(c,$APP.nx);var d=$APP.A(b);b=$APP.kHb(d,c);d=$APP.djb(d);c=$APP.nHb.C(d);d=$APP.SI.C(d);a.cloneShapesIntoCurrentPage($APP.Gi(new $APP.m(null,
3,[$APP.vHb,b,$APP.nHb,c,$APP.SI,d],null)));b=$APP.FUa();return $APP.Xl(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},Vpd=function(a){a.cleanup($APP.vh.j(function(b){return b.id},a.shapes))},Ypd=function(a,b){b=$APP.Hq.G(b,$APP.F([new $APP.m(null,1,[$APP.Iq,!0],null)]));b=$APP.kf(b);var c=$APP.G.j(b,Wpd),d=$APP.G.j(b,$APP.FK),e=$APP.G.j(b,Xpd),f=$APP.sC();return $APP.em(null,function(){return $APP.em($APP.n(d)?$APP.Bdb(f,a,new $APP.m(null,1,[$APP.Ox,
100],null)):null,function(g){return $APP.em($APP.n(c)?$APP.Gdb(a,10):null,function(h){return $APP.em($APP.n(e)?$APP.Hdb(a,100):null,function(l){return $APP.Xl($APP.Gi(new $APP.m(null,3,[$APP.qI,h,$APP.nx,g,$APP.oL,l],null)))})})})})},Zpd=function(a){return $APP.bm($APP.WAb($APP.sC(),new $APP.O(null,1,5,$APP.R,[$APP.Hq.C(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.C.F(c,0,null),$APP.C.F(c,1,null),c=$APP.C.F(c,2,null),$APP.YAb($APP.n(c)?c:b)):null})},$pd=function(){return $APP.dEb(null)},
aqd=function(){return $APP.gEb(null)},pqd=function(a){return $APP.Hg([bqd,cqd,dqd,eqd,fqd,gqd,$APP.XD,hqd,iqd,jqd,kqd,$APP.t0,lqd,mqd,nqd,oqd],[function(b){return $APP.Br.C($APP.o_a($APP.sC(),$APP.xi(b)))},function(b){return $APP.VH(b,!1)},function(b){return $APP.oHb(b)},$APP.Kx,function(b){return $APP.Yzb(b,new $APP.m(null,1,[$APP.LS,!1],null))},$APP.oI,Ypd,Zpd,Kpd,function(b,c){return $APP.kx(b,$APP.F([$APP.mx,c]))},function(b){var c=$APP.u,d=c.C,e=$APP.AB(),f=$APP.UH(a),g=Rpd(a);b=new $APP.m(null,
6,[$APP.cG,$APP.Ug($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.R,[$APP.fz],null)),$APP.xD,e,$APP.uD,$APP.n(b)?b:"",$APP.uG,$APP.Cr,$APP.PF,new $APP.m(null,2,[$APP.Br,$APP.Ar.C?$APP.Ar.C(a):$APP.Ar.call(null,a),$APP.ux,a],null),$APP.bG,new $APP.m(null,1,[$APP.Br,a],null)],null);$APP.TF(new $APP.O(null,1,5,$APP.R,[b],null));return d.call(c,e)},function(b){return $APP.NL.G($APP.F([$APP.wh.C(b)]))},function(b,c){return $APP.RD(function(){return(0,$APP.bTb)(b,$APP.Nl.G($APP.F([$APP.Hq.G(c,$APP.F([$APP.Iq,!0])),
new $APP.m(null,1,[$APP.MS,!0],null)])))})},function(b,c){return $APP.sD($APP.sC(),$APP.fz.C($APP.UH(b)),$APP.wh.C(c))},function(b){var c=$APP.Sw(b)?$APP.Br.C($APP.o_a($APP.sC(),$APP.xi(b))):null;c=$APP.n(c)?c:b;var d=$APP.PH(c),e=$APP.oI(c);return $APP.n(d)?$APP.n(e)?$APP.AN(c,new $APP.m(null,1,[$APP.zN,b],null)):$APP.xN($APP.VH(b,!1)):null},function(b){return $APP.Gi($APP.jH($APP.xi(b)))}])},oqd=new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),lqd=new $APP.N(null,"exportToImage",
"exportToImage",-154356643),kqd=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),qqd=new $APP.N(null,"KeyboardShortcut","KeyboardShortcut",1250004264),Xpd=new $APP.N(null,"files?","files?",-1267491104),bqd=new $APP.N(null,"getBlockPageName","getBlockPageName",-1656908032),rqd=new $APP.N(null,"renderers","renderers",-1460292282),sqd=new $APP.N(null,"model","model",331153215),cqd=new $APP.N(null,"getRedirectPageName","getRedirectPageName",-1858136925),eqd=new $APP.N(null,"isMobile","isMobile",
-2043133877),tqd=new $APP.N(null,"onMount","onMount",-876858467),fqd=new $APP.N(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),iqd=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),uqd=new $APP.N(null,"onPersist","onPersist",-1848738852),vqd=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),jqd=new $APP.N(null,"copyToClipboard","copyToClipboard",1092115063),nqd=new $APP.N(null,"redirectToPage","redirectToPage",87147838),dqd=new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",
554297706),hqd=new $APP.N(null,"saveAsset","saveAsset",-668047853),wqd=new $APP.N(null,"BacklinksCount","BacklinksCount",364670631),xqd=new $APP.N(null,"Block","Block",-1959785792),mqd=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),yqd=new $APP.N(null,"Page","Page",-1267059506),Wpd=new $APP.N(null,"pages?","pages?",-2065014049),zqd=new $APP.N(null,"PageName","PageName",-164991013),Aqd=new $APP.N(null,"Tweet","Tweet",-452258680),gqd=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",
-134150579),Bqd=new $APP.N(null,"BlockReference","BlockReference",-120254741);$APP.bda("tldraw");var Cqd=$APP.om(590);var Dqd,Eqd;$APP.Fgd={};Dqd=$APP.lT($APP.wa(Cqd,"App"));$APP.Igd=$APP.wa(Cqd,"generateJSXFromModel");
Eqd=new $APP.m(null,8,[yqd,$APP.gs($APP.ks,function(a){return(0,$APP.Nfd)(new $APP.m(null,2,[$APP.ZN,$APP.VH($APP.wa(a,"pageName"),!1),$APP.MS,!0],null))},null,"frontend.extensions.tldraw/page-cp"),xqd,$APP.gs($APP.ks,function(a){a=$APP.Wh($APP.wa(a,"blockId"));var b=$APP.TTa($APP.o$b);a=b.C?b.C(a):b.call(null,a);return $APP.Qr(a)},null,"frontend.extensions.tldraw/block-cp"),vqd,$APP.gs($APP.ks,function(a){return $APP.Qr($APP.cW(new $APP.m(null,1,[$APP.LZ,!0],null),$APP.sC(),$APP.Wh($APP.wa(a,"blockId")),
new $APP.m(null,2,[$APP.M_b,$APP.wa(a,"endSeparator"),$APP.N_b,$APP.wa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),Aqd,$APP.gs($APP.ks,function(a){return(0,$APP.CZb)($APP.wa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),zqd,$APP.gs($APP.ks,function(a){return(0,$APP.QV)(new $APP.m(null,1,[$APP.LZ,!0],null),new $APP.m(null,1,[$APP.Br,$APP.wa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),wqd,function(a){return $APP.zf.j($APP.Lgd,$APP.vh.j(function(b){return $APP.Hq.G($APP.wa(a,
b),$APP.F([new $APP.m(null,1,[$APP.Iq,!0],null)]))},new $APP.O(null,3,5,$APP.R,["id","className","options"],null)))},Bqd,$APP.gs($APP.ks,function(a){return(0,$APP.MYb)($APP.jf,$APP.wa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),qqd,$APP.gs($APP.ks,function(a){a=$APP.PIb($APP.wh.C($APP.wa(a,"action")));return $APP.Qr($APP.oT(a))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);
$APP.Ggd=$APP.gs($APP.ks,function(a,b){function c(l){if($APP.n(l)){l.appUndo=$pd;l.appRedo=aqd;var p=$APP.wa(l,"api");return $APP.n(p)?$APP.bm(d?Upd(p):null,function(){Vpd(l.currentPage);$APP.PUa(l,b);return h.C?h.C(l):h.call(null,l)}):null}return null}var d=Tpd(a),e=$APP.wHb(a),f=$APP.ts(null),g=$APP.C.F(f,0,null),h=$APP.C.F(f,1,null);$APP.us(function(){$APP.n($APP.n(g)?b:g)&&$APP.PUa(g,b);return function(){return $APP.Ec}},new $APP.O(null,2,5,$APP.R,[b,g],null));return $APP.n(e)?$APP.X("div",{style:{overscrollBehavior:"none"},
onBlur:function(l){l=$APP.wa(l,"target").tagName;var p=new $APP.Vg(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.wD():null},onWheel:$APP.ex,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.Hb(g)?$APP.X("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.Qr($APP.vT("Loading onboarding whiteboard ..."))]):null,$APP.Qr(function(){var l=new $APP.m(null,6,[rqd,Eqd,$APP.UB,
pqd(a),tqd,c,$APP.tMc,!0,uqd,function(p,q){$APP.vC(new $APP.O(null,2,5,$APP.R,[$APP.vOc,$APP.sC()],null),$APP.qx());return $APP.n(!1)?(console.time("tldraw persist"),p=Ppd(a,p,q.replace),console.timeEnd("tldraw persist"),p):Ppd(a,p,q.replace)},sqd,e],null);return Dqd.C?Dqd.C(l):Dqd.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Ya.Xi();
}).call(this);