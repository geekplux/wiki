(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))C(v);new MutationObserver(v=>{for(const j of v)if(j.type==="childList")for(const y of j.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&C(y)}).observe(document,{childList:!0,subtree:!0});function x(v){const j={};return v.integrity&&(j.integrity=v.integrity),v.referrerPolicy&&(j.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?j.credentials="include":v.crossOrigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function C(v){if(v.ep)return;v.ep=!0;const j=x(v);fetch(v.href,j)}})();var $o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mr={},Ei={get exports(){return mr},set exports(c){mr=c}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(c,s){(function(x,C){c.exports=C()})(self,()=>(()=>{var x={227:(y,u,_)=>{var F=_(155);u.formatArgs=function(z){if(z[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+z[0]+(this.useColors?"%c ":" ")+"+"+y.exports.humanize(this.diff),!this.useColors)return;const Y="color: "+this.color;z.splice(1,0,Y,"color: inherit");let w=0,m=0;z[0].replace(/%[a-zA-Z%]/g,S=>{S!=="%%"&&(w++,S==="%c"&&(m=w))}),z.splice(m,0,Y)},u.save=function(z){try{z?u.storage.setItem("debug",z):u.storage.removeItem("debug")}catch{}},u.load=function(){let z;try{z=u.storage.getItem("debug")}catch{}return!z&&F!==void 0&&"env"in F&&(z=F.env.DEBUG),z},u.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},u.storage=function(){try{return localStorage}catch{}}(),u.destroy=(()=>{let z=!1;return()=>{z||(z=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),u.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],u.log=console.debug||console.log||(()=>{}),y.exports=_(447)(u);const{formatters:D}=y.exports;D.j=function(z){try{return JSON.stringify(z)}catch(Y){return"[UnexpectedJSONParseError]: "+Y.message}}},447:(y,u,_)=>{y.exports=function(F){function D(w){let m,S,L,Q=null;function H(...G){if(!H.enabled)return;const Z=H,U=Number(new Date),q=U-(m||U);Z.diff=q,Z.prev=m,Z.curr=U,m=U,G[0]=D.coerce(G[0]),typeof G[0]!="string"&&G.unshift("%O");let a=0;G[0]=G[0].replace(/%([a-zA-Z%])/g,(d,k)=>{if(d==="%%")return"%";a++;const I=D.formatters[k];if(typeof I=="function"){const X=G[a];d=I.call(Z,X),G.splice(a,1),a--}return d}),D.formatArgs.call(Z,G),(Z.log||D.log).apply(Z,G)}return H.namespace=w,H.useColors=D.useColors(),H.color=D.selectColor(w),H.extend=z,H.destroy=D.destroy,Object.defineProperty(H,"enabled",{enumerable:!0,configurable:!1,get:()=>Q!==null?Q:(S!==D.namespaces&&(S=D.namespaces,L=D.enabled(w)),L),set:G=>{Q=G}}),typeof D.init=="function"&&D.init(H),H}function z(w,m){const S=D(this.namespace+(m===void 0?":":m)+w);return S.log=this.log,S}function Y(w){return w.toString().substring(2,w.toString().length-2).replace(/\.\*\?$/,"*")}return D.debug=D,D.default=D,D.coerce=function(w){return w instanceof Error?w.stack||w.message:w},D.disable=function(){const w=[...D.names.map(Y),...D.skips.map(Y).map(m=>"-"+m)].join(",");return D.enable(""),w},D.enable=function(w){let m;D.save(w),D.namespaces=w,D.names=[],D.skips=[];const S=(typeof w=="string"?w:"").split(/[\s,]+/),L=S.length;for(m=0;m<L;m++)S[m]&&((w=S[m].replace(/\*/g,".*?"))[0]==="-"?D.skips.push(new RegExp("^"+w.slice(1)+"$")):D.names.push(new RegExp("^"+w+"$")))},D.enabled=function(w){if(w[w.length-1]==="*")return!0;let m,S;for(m=0,S=D.skips.length;m<S;m++)if(D.skips[m].test(w))return!1;for(m=0,S=D.names.length;m<S;m++)if(D.names[m].test(w))return!0;return!1},D.humanize=_(824),D.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(F).forEach(w=>{D[w]=F[w]}),D.names=[],D.skips=[],D.formatters={},D.selectColor=function(w){let m=0;for(let S=0;S<w.length;S++)m=(m<<5)-m+w.charCodeAt(S),m|=0;return D.colors[Math.abs(m)%D.colors.length]},D.enable(D.load()),D}},856:function(y){y.exports=function(){function u(A){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},u(A)}function _(A,M){return _=Object.setPrototypeOf||function(V,oe){return V.__proto__=oe,V},_(A,M)}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function D(A,M,V){return D=F()?Reflect.construct:function(oe,ge,Me){var tt=[null];tt.push.apply(tt,ge);var $e=new(Function.bind.apply(oe,tt));return Me&&_($e,Me.prototype),$e},D.apply(null,arguments)}function z(A){return Y(A)||w(A)||m(A)||L()}function Y(A){if(Array.isArray(A))return S(A)}function w(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}function m(A,M){if(A){if(typeof A=="string")return S(A,M);var V=Object.prototype.toString.call(A).slice(8,-1);return V==="Object"&&A.constructor&&(V=A.constructor.name),V==="Map"||V==="Set"?Array.from(A):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?S(A,M):void 0}}function S(A,M){(M==null||M>A.length)&&(M=A.length);for(var V=0,oe=new Array(M);V<M;V++)oe[V]=A[V];return oe}function L(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Q=Object.hasOwnProperty,H=Object.setPrototypeOf,G=Object.isFrozen,Z=Object.getPrototypeOf,U=Object.getOwnPropertyDescriptor,q=Object.freeze,a=Object.seal,d=Object.create,k=typeof Reflect<"u"&&Reflect,I=k.apply,X=k.construct;I||(I=function(A,M,V){return A.apply(M,V)}),q||(q=function(A){return A}),a||(a=function(A){return A}),X||(X=function(A,M){return D(A,z(M))});var ne=ae(Array.prototype.forEach),ue=ae(Array.prototype.pop),ke=ae(Array.prototype.push),Le=ae(String.prototype.toLowerCase),Be=ae(String.prototype.match),ye=ae(String.prototype.replace),Ue=ae(String.prototype.indexOf),h=ae(String.prototype.trim),B=ae(RegExp.prototype.test),R=De(TypeError);function ae(A){return function(M){for(var V=arguments.length,oe=new Array(V>1?V-1:0),ge=1;ge<V;ge++)oe[ge-1]=arguments[ge];return I(A,M,oe)}}function De(A){return function(){for(var M=arguments.length,V=new Array(M),oe=0;oe<M;oe++)V[oe]=arguments[oe];return X(A,V)}}function W(A,M){H&&H(A,null);for(var V=M.length;V--;){var oe=M[V];if(typeof oe=="string"){var ge=Le(oe);ge!==oe&&(G(M)||(M[V]=ge),oe=ge)}A[oe]=!0}return A}function ee(A){var M,V=d(null);for(M in A)I(Q,A,[M])&&(V[M]=A[M]);return V}function fe(A,M){for(;A!==null;){var V=U(A,M);if(V){if(V.get)return ae(V.get);if(typeof V.value=="function")return ae(V.value)}A=Z(A)}function oe(ge){return console.warn("fallback value for",ge),null}return oe}var Ee=q(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Te=q(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),We=q(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),at=q(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),be=q(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),he=q(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Fe=q(["#text"]),Ae=q(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Oe=q(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ze=q(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ne=q(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Mt=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Lt=a(/<%[\w\W]*|[\w\W]*%>/gm),qo=a(/^data-[\-\w.\u00B7-\uFFFF]/),Ro=a(/^aria-[\-\w]+$/),Wo=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Qo=a(/^(?:\w+script|data):/i),st=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),fo=a(/^html$/i),Go=function(){return typeof window>"u"?null:window},Jo=function(A,M){if(u(A)!=="object"||typeof A.createPolicy!="function")return null;var V=null,oe="data-tt-policy-suffix";M.currentScript&&M.currentScript.hasAttribute(oe)&&(V=M.currentScript.getAttribute(oe));var ge="dompurify"+(V?"#"+V:"");try{return A.createPolicy(ge,{createHTML:function(Me){return Me}})}catch{return console.warn("TrustedTypes policy "+ge+" could not be created."),null}};function ht(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Go(),M=function(n){return ht(n)};if(M.version="2.3.8",M.removed=[],!A||!A.document||A.document.nodeType!==9)return M.isSupported=!1,M;var V=A.document,oe=A.document,ge=A.DocumentFragment,Me=A.HTMLTemplateElement,tt=A.Node,$e=A.Element,ot=A.NodeFilter,mt=A.NamedNodeMap,Bt=mt===void 0?A.NamedNodeMap||A.MozNamedAttrMap:mt,$t=A.HTMLFormElement,ho=A.DOMParser,mo=A.trustedTypes,yt=$e.prototype,yo=fe(yt,"cloneNode"),bo=fe(yt,"nextSibling"),Vo=fe(yt,"childNodes"),lt=fe(yt,"parentNode");if(typeof Me=="function"){var Nt=oe.createElement("template");Nt.content&&Nt.content.ownerDocument&&(oe=Nt.content.ownerDocument)}var Qe=Jo(mo,V),vo=Qe?Qe.createHTML(""):"",bt=oe,Ht=bt.implementation,ko=bt.createNodeIterator,Co=bt.createDocumentFragment,Zo=bt.getElementsByTagName,Pt=V.importNode,_o={};try{_o=ee(oe).documentMode?oe.documentMode:{}}catch{}var we={};M.isSupported=typeof lt=="function"&&Ht&&Ht.createHTMLDocument!==void 0&&_o!==9;var ct,Ge,qt=Mt,Rt=Lt,Dt=qo,je=Ro,Wt=Qo,vt=st,Qt=Wo,Ce=null,Gt=W({},[].concat(z(Ee),z(Te),z(We),z(be),z(Fe))),_e=null,Jt=W({},[].concat(z(Ae),z(Oe),z(ze),z(Ne))),pe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),kt=null,Vt=null,Zt=!0,Kt=!0,wo=!1,ut=!1,ie=!1,Yt=!1,Xt=!1,rt=!1,Je=!1,dt=!1,eo=!0,Tt=!0,nt=!1,Ve={},gt=null,xo=W({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),So=null,Lo=W({},["audio","video","img","source","image","track"]),to=null,Ft=W({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),oo="http://www.w3.org/1998/Math/MathML",At="http://www.w3.org/2000/svg",Ze="http://www.w3.org/1999/xhtml",Et=Ze,Bo=!1,Do=["application/xhtml+xml","text/html"],Ko="text/html",pt=null,Yo=oe.createElement("form"),It=function(n){return n instanceof RegExp||n instanceof Function},ro=function(n){pt&&pt===n||(n&&u(n)==="object"||(n={}),n=ee(n),Ce="ALLOWED_TAGS"in n?W({},n.ALLOWED_TAGS):Gt,_e="ALLOWED_ATTR"in n?W({},n.ALLOWED_ATTR):Jt,to="ADD_URI_SAFE_ATTR"in n?W(ee(Ft),n.ADD_URI_SAFE_ATTR):Ft,So="ADD_DATA_URI_TAGS"in n?W(ee(Lo),n.ADD_DATA_URI_TAGS):Lo,gt="FORBID_CONTENTS"in n?W({},n.FORBID_CONTENTS):xo,kt="FORBID_TAGS"in n?W({},n.FORBID_TAGS):{},Vt="FORBID_ATTR"in n?W({},n.FORBID_ATTR):{},Ve="USE_PROFILES"in n&&n.USE_PROFILES,Zt=n.ALLOW_ARIA_ATTR!==!1,Kt=n.ALLOW_DATA_ATTR!==!1,wo=n.ALLOW_UNKNOWN_PROTOCOLS||!1,ut=n.SAFE_FOR_TEMPLATES||!1,ie=n.WHOLE_DOCUMENT||!1,rt=n.RETURN_DOM||!1,Je=n.RETURN_DOM_FRAGMENT||!1,dt=n.RETURN_TRUSTED_TYPE||!1,Xt=n.FORCE_BODY||!1,eo=n.SANITIZE_DOM!==!1,Tt=n.KEEP_CONTENT!==!1,nt=n.IN_PLACE||!1,Qt=n.ALLOWED_URI_REGEXP||Qt,Et=n.NAMESPACE||Ze,n.CUSTOM_ELEMENT_HANDLING&&It(n.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(pe.tagNameCheck=n.CUSTOM_ELEMENT_HANDLING.tagNameCheck),n.CUSTOM_ELEMENT_HANDLING&&It(n.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(pe.attributeNameCheck=n.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),n.CUSTOM_ELEMENT_HANDLING&&typeof n.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(pe.allowCustomizedBuiltInElements=n.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ct=ct=Do.indexOf(n.PARSER_MEDIA_TYPE)===-1?Ko:n.PARSER_MEDIA_TYPE,Ge=ct==="application/xhtml+xml"?function(E){return E}:Le,ut&&(Kt=!1),Je&&(rt=!0),Ve&&(Ce=W({},z(Fe)),_e=[],Ve.html===!0&&(W(Ce,Ee),W(_e,Ae)),Ve.svg===!0&&(W(Ce,Te),W(_e,Oe),W(_e,Ne)),Ve.svgFilters===!0&&(W(Ce,We),W(_e,Oe),W(_e,Ne)),Ve.mathMl===!0&&(W(Ce,be),W(_e,ze),W(_e,Ne))),n.ADD_TAGS&&(Ce===Gt&&(Ce=ee(Ce)),W(Ce,n.ADD_TAGS)),n.ADD_ATTR&&(_e===Jt&&(_e=ee(_e)),W(_e,n.ADD_ATTR)),n.ADD_URI_SAFE_ATTR&&W(to,n.ADD_URI_SAFE_ATTR),n.FORBID_CONTENTS&&(gt===xo&&(gt=ee(gt)),W(gt,n.FORBID_CONTENTS)),Tt&&(Ce["#text"]=!0),ie&&W(Ce,["html","head","body"]),Ce.table&&(W(Ce,["tbody"]),delete kt.tbody),q&&q(n),pt=n)},no=W({},["mi","mo","mn","ms","mtext"]),To=W({},["foreignobject","desc","title","annotation-xml"]),Xo=W({},["title","style","font","a","script"]),Ot=W({},Te);W(Ot,We),W(Ot,at);var io=W({},be);W(io,he);var er=function(n){var E=lt(n);E&&E.tagName||(E={namespaceURI:Ze,tagName:"template"});var T=Le(n.tagName),se=Le(E.tagName);return n.namespaceURI===At?E.namespaceURI===Ze?T==="svg":E.namespaceURI===oo?T==="svg"&&(se==="annotation-xml"||no[se]):Boolean(Ot[T]):n.namespaceURI===oo?E.namespaceURI===Ze?T==="math":E.namespaceURI===At?T==="math"&&To[se]:Boolean(io[T]):n.namespaceURI===Ze&&!(E.namespaceURI===At&&!To[se])&&!(E.namespaceURI===oo&&!no[se])&&!io[T]&&(Xo[T]||!Ot[T])},He=function(n){ke(M.removed,{element:n});try{n.parentNode.removeChild(n)}catch{try{n.outerHTML=vo}catch{n.remove()}}},Fo=function(n,E){try{ke(M.removed,{attribute:E.getAttributeNode(n),from:E})}catch{ke(M.removed,{attribute:null,from:E})}if(E.removeAttribute(n),n==="is"&&!_e[n])if(rt||Je)try{He(E)}catch{}else try{E.setAttribute(n,"")}catch{}},Ao=function(n){var E,T;if(Xt)n="<remove></remove>"+n;else{var se=Be(n,/^[\r\n\t ]+/);T=se&&se[0]}ct==="application/xhtml+xml"&&(n='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+n+"</body></html>");var me=Qe?Qe.createHTML(n):n;if(Et===Ze)try{E=new ho().parseFromString(me,ct)}catch{}if(!E||!E.documentElement){E=Ht.createDocument(Et,"template",null);try{E.documentElement.innerHTML=Bo?"":me}catch{}}var xe=E.body||E.documentElement;return n&&T&&xe.insertBefore(oe.createTextNode(T),xe.childNodes[0]||null),Et===Ze?Zo.call(E,ie?"html":"body")[0]:ie?E.documentElement:xe},Ct=function(n){return ko.call(n.ownerDocument||n,n,ot.SHOW_ELEMENT|ot.SHOW_COMMENT|ot.SHOW_TEXT,null,!1)},tr=function(n){return n instanceof $t&&(typeof n.nodeName!="string"||typeof n.textContent!="string"||typeof n.removeChild!="function"||!(n.attributes instanceof Bt)||typeof n.removeAttribute!="function"||typeof n.setAttribute!="function"||typeof n.namespaceURI!="string"||typeof n.insertBefore!="function")},_t=function(n){return u(tt)==="object"?n instanceof tt:n&&u(n)==="object"&&typeof n.nodeType=="number"&&typeof n.nodeName=="string"},Pe=function(n,E,T){we[n]&&ne(we[n],function(se){se.call(M,E,T,pt)})},ao=function(n){var E;if(Pe("beforeSanitizeElements",n,null),tr(n)||B(/[\u0080-\uFFFF]/,n.nodeName))return He(n),!0;var T=Ge(n.nodeName);if(Pe("uponSanitizeElement",n,{tagName:T,allowedTags:Ce}),n.hasChildNodes()&&!_t(n.firstElementChild)&&(!_t(n.content)||!_t(n.content.firstElementChild))&&B(/<[/\w]/g,n.innerHTML)&&B(/<[/\w]/g,n.textContent)||T==="select"&&B(/<template/i,n.innerHTML))return He(n),!0;if(!Ce[T]||kt[T]){if(!kt[T]&&so(T)&&(pe.tagNameCheck instanceof RegExp&&B(pe.tagNameCheck,T)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(T)))return!1;if(Tt&&!gt[T]){var se=lt(n)||n.parentNode,me=Vo(n)||n.childNodes;if(me&&se)for(var xe=me.length-1;xe>=0;--xe)se.insertBefore(yo(me[xe],!0),bo(n))}return He(n),!0}return n instanceof $e&&!er(n)?(He(n),!0):T!=="noscript"&&T!=="noembed"||!B(/<\/no(script|embed)/i,n.innerHTML)?(ut&&n.nodeType===3&&(E=n.textContent,E=ye(E,qt," "),E=ye(E,Rt," "),n.textContent!==E&&(ke(M.removed,{element:n.cloneNode()}),n.textContent=E)),Pe("afterSanitizeElements",n,null),!1):(He(n),!0)},Eo=function(n,E,T){if(eo&&(E==="id"||E==="name")&&(T in oe||T in Yo))return!1;if(!(Kt&&!Vt[E]&&B(Dt,E))){if(!(Zt&&B(je,E))){if(!_e[E]||Vt[E]){if(!(so(n)&&(pe.tagNameCheck instanceof RegExp&&B(pe.tagNameCheck,n)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(n))&&(pe.attributeNameCheck instanceof RegExp&&B(pe.attributeNameCheck,E)||pe.attributeNameCheck instanceof Function&&pe.attributeNameCheck(E))||E==="is"&&pe.allowCustomizedBuiltInElements&&(pe.tagNameCheck instanceof RegExp&&B(pe.tagNameCheck,T)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(T))))return!1}else if(!to[E]){if(!B(Qt,ye(T,vt,""))){if((E!=="src"&&E!=="xlink:href"&&E!=="href"||n==="script"||Ue(T,"data:")!==0||!So[n])&&!(wo&&!B(Wt,ye(T,vt,"")))){if(T)return!1}}}}}return!0},so=function(n){return n.indexOf("-")>0},wt=function(n){var E,T,se,me;Pe("beforeSanitizeAttributes",n,null);var xe=n.attributes;if(xe){var Se={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_e};for(me=xe.length;me--;){var xt=E=xe[me],qe=xt.name,re=xt.namespaceURI;if(T=qe==="value"?E.value:h(E.value),se=Ge(qe),Se.attrName=se,Se.attrValue=T,Se.keepAttr=!0,Se.forceKeepAttr=void 0,Pe("uponSanitizeAttribute",n,Se),T=Se.attrValue,!Se.forceKeepAttr&&(Fo(qe,n),Se.keepAttr))if(B(/\/>/i,T))Fo(qe,n);else{ut&&(T=ye(T,qt," "),T=ye(T,Rt," "));var it=Ge(n.nodeName);if(Eo(it,se,T))try{re?n.setAttributeNS(re,qe,T):n.setAttribute(qe,T),ue(M.removed)}catch{}}}Pe("afterSanitizeAttributes",n,null)}},lo=function n(E){var T,se=Ct(E);for(Pe("beforeSanitizeShadowDOM",E,null);T=se.nextNode();)Pe("uponSanitizeShadowNode",T,null),ao(T)||(T.content instanceof ge&&n(T.content),wt(T));Pe("afterSanitizeShadowDOM",E,null)};return M.sanitize=function(n,E){var T,se,me,xe,Se;if((Bo=!n)&&(n="<!-->"),typeof n!="string"&&!_t(n)){if(typeof n.toString!="function")throw R("toString is not a function");if(typeof(n=n.toString())!="string")throw R("dirty is not a string, aborting")}if(!M.isSupported){if(u(A.toStaticHTML)==="object"||typeof A.toStaticHTML=="function"){if(typeof n=="string")return A.toStaticHTML(n);if(_t(n))return A.toStaticHTML(n.outerHTML)}return n}if(Yt||ro(E),M.removed=[],typeof n=="string"&&(nt=!1),nt){if(n.nodeName){var xt=Ge(n.nodeName);if(!Ce[xt]||kt[xt])throw R("root node is forbidden and cannot be sanitized in-place")}}else if(n instanceof tt)(se=(T=Ao("<!---->")).ownerDocument.importNode(n,!0)).nodeType===1&&se.nodeName==="BODY"||se.nodeName==="HTML"?T=se:T.appendChild(se);else{if(!rt&&!ut&&!ie&&n.indexOf("<")===-1)return Qe&&dt?Qe.createHTML(n):n;if(!(T=Ao(n)))return rt?null:dt?vo:""}T&&Xt&&He(T.firstChild);for(var qe=Ct(nt?n:T);me=qe.nextNode();)me.nodeType===3&&me===xe||ao(me)||(me.content instanceof ge&&lo(me.content),wt(me),xe=me);if(xe=null,nt)return n;if(rt){if(Je)for(Se=Co.call(T.ownerDocument);T.firstChild;)Se.appendChild(T.firstChild);else Se=T;return _e.shadowroot&&(Se=Pt.call(V,Se,!0)),Se}var re=ie?T.outerHTML:T.innerHTML;return ie&&Ce["!doctype"]&&T.ownerDocument&&T.ownerDocument.doctype&&T.ownerDocument.doctype.name&&B(fo,T.ownerDocument.doctype.name)&&(re="<!DOCTYPE "+T.ownerDocument.doctype.name+`>
`+re),ut&&(re=ye(re,qt," "),re=ye(re,Rt," ")),Qe&&dt?Qe.createHTML(re):re},M.setConfig=function(n){ro(n),Yt=!0},M.clearConfig=function(){pt=null,Yt=!1},M.isValidAttribute=function(n,E,T){pt||ro({});var se=Ge(n),me=Ge(E);return Eo(se,me,T)},M.addHook=function(n,E){typeof E=="function"&&(we[n]=we[n]||[],ke(we[n],E))},M.removeHook=function(n){if(we[n])return ue(we[n])},M.removeHooks=function(n){we[n]&&(we[n]=[])},M.removeAllHooks=function(){we={}},M}return ht()}()},729:y=>{var u=Object.prototype.hasOwnProperty,_="~";function F(){}function D(m,S,L){this.fn=m,this.context=S,this.once=L||!1}function z(m,S,L,Q,H){if(typeof L!="function")throw new TypeError("The listener must be a function");var G=new D(L,Q||m,H),Z=_?_+S:S;return m._events[Z]?m._events[Z].fn?m._events[Z]=[m._events[Z],G]:m._events[Z].push(G):(m._events[Z]=G,m._eventsCount++),m}function Y(m,S){--m._eventsCount==0?m._events=new F:delete m._events[S]}function w(){this._events=new F,this._eventsCount=0}Object.create&&(F.prototype=Object.create(null),new F().__proto__||(_=!1)),w.prototype.eventNames=function(){var m,S,L=[];if(this._eventsCount===0)return L;for(S in m=this._events)u.call(m,S)&&L.push(_?S.slice(1):S);return Object.getOwnPropertySymbols?L.concat(Object.getOwnPropertySymbols(m)):L},w.prototype.listeners=function(m){var S=_?_+m:m,L=this._events[S];if(!L)return[];if(L.fn)return[L.fn];for(var Q=0,H=L.length,G=new Array(H);Q<H;Q++)G[Q]=L[Q].fn;return G},w.prototype.listenerCount=function(m){var S=_?_+m:m,L=this._events[S];return L?L.fn?1:L.length:0},w.prototype.emit=function(m,S,L,Q,H,G){var Z=_?_+m:m;if(!this._events[Z])return!1;var U,q,a=this._events[Z],d=arguments.length;if(a.fn){switch(a.once&&this.removeListener(m,a.fn,void 0,!0),d){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,S),!0;case 3:return a.fn.call(a.context,S,L),!0;case 4:return a.fn.call(a.context,S,L,Q),!0;case 5:return a.fn.call(a.context,S,L,Q,H),!0;case 6:return a.fn.call(a.context,S,L,Q,H,G),!0}for(q=1,U=new Array(d-1);q<d;q++)U[q-1]=arguments[q];a.fn.apply(a.context,U)}else{var k,I=a.length;for(q=0;q<I;q++)switch(a[q].once&&this.removeListener(m,a[q].fn,void 0,!0),d){case 1:a[q].fn.call(a[q].context);break;case 2:a[q].fn.call(a[q].context,S);break;case 3:a[q].fn.call(a[q].context,S,L);break;case 4:a[q].fn.call(a[q].context,S,L,Q);break;default:if(!U)for(k=1,U=new Array(d-1);k<d;k++)U[k-1]=arguments[k];a[q].fn.apply(a[q].context,U)}}return!0},w.prototype.on=function(m,S,L){return z(this,m,S,L,!1)},w.prototype.once=function(m,S,L){return z(this,m,S,L,!0)},w.prototype.removeListener=function(m,S,L,Q){var H=_?_+m:m;if(!this._events[H])return this;if(!S)return Y(this,H),this;var G=this._events[H];if(G.fn)G.fn!==S||Q&&!G.once||L&&G.context!==L||Y(this,H);else{for(var Z=0,U=[],q=G.length;Z<q;Z++)(G[Z].fn!==S||Q&&!G[Z].once||L&&G[Z].context!==L)&&U.push(G[Z]);U.length?this._events[H]=U.length===1?U[0]:U:Y(this,H)}return this},w.prototype.removeAllListeners=function(m){var S;return m?(S=_?_+m:m,this._events[S]&&Y(this,S)):(this._events=new F,this._eventsCount=0),this},w.prototype.off=w.prototype.removeListener,w.prototype.addListener=w.prototype.on,w.prefixed=_,w.EventEmitter=w,y.exports=w},717:y=>{typeof Object.create=="function"?y.exports=function(u,_){u.super_=_,u.prototype=Object.create(_.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}})}:y.exports=function(u,_){u.super_=_;var F=function(){};F.prototype=_.prototype,u.prototype=new F,u.prototype.constructor=u}},824:y=>{var u=1e3,_=60*u,F=60*_,D=24*F,z=7*D,Y=365.25*D;function w(m,S,L,Q){var H=S>=1.5*L;return Math.round(m/L)+" "+Q+(H?"s":"")}y.exports=function(m,S){S=S||{};var L=typeof m;if(L==="string"&&m.length>0)return function(Q){if(!((Q=String(Q)).length>100)){var H=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Q);if(H){var G=parseFloat(H[1]);switch((H[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return G*Y;case"weeks":case"week":case"w":return G*z;case"days":case"day":case"d":return G*D;case"hours":case"hour":case"hrs":case"hr":case"h":return G*F;case"minutes":case"minute":case"mins":case"min":case"m":return G*_;case"seconds":case"second":case"secs":case"sec":case"s":return G*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return G;default:return}}}}(m);if(L==="number"&&isFinite(m))return S.long?function(Q){var H=Math.abs(Q);return H>=D?w(Q,H,D,"day"):H>=F?w(Q,H,F,"hour"):H>=_?w(Q,H,_,"minute"):H>=u?w(Q,H,u,"second"):Q+" ms"}(m):function(Q){var H=Math.abs(Q);return H>=D?Math.round(Q/D)+"d":H>=F?Math.round(Q/F)+"h":H>=_?Math.round(Q/_)+"m":H>=u?Math.round(Q/u)+"s":Q+"ms"}(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))}},520:(y,u,_)=>{var F=_(155),D=F.platform==="win32",z=_(539);function Y(a,d){for(var k=[],I=0;I<a.length;I++){var X=a[I];X&&X!=="."&&(X===".."?k.length&&k[k.length-1]!==".."?k.pop():d&&k.push(".."):k.push(X))}return k}function w(a){for(var d=a.length-1,k=0;k<=d&&!a[k];k++);for(var I=d;I>=0&&!a[I];I--);return k===0&&I===d?a:k>I?[]:a.slice(k,I+1)}var m=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,S=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,L={};function Q(a){var d=m.exec(a),k=(d[1]||"")+(d[2]||""),I=d[3]||"",X=S.exec(I);return[k,X[1],X[2],X[3]]}function H(a){var d=m.exec(a),k=d[1]||"",I=!!k&&k[1]!==":";return{device:k,isUnc:I,isAbsolute:I||!!d[2],tail:d[3]}}function G(a){return"\\\\"+a.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}L.resolve=function(){for(var a="",d="",k=!1,I=arguments.length-1;I>=-1;I--){var X;if(I>=0?X=arguments[I]:a?(X=F.env["="+a])&&X.substr(0,3).toLowerCase()===a.toLowerCase()+"\\"||(X=a+"\\"):X=F.cwd(),!z.isString(X))throw new TypeError("Arguments to path.resolve must be strings");if(X){var ne=H(X),ue=ne.device,ke=ne.isUnc,Le=ne.isAbsolute,Be=ne.tail;if((!ue||!a||ue.toLowerCase()===a.toLowerCase())&&(a||(a=ue),k||(d=Be+"\\"+d,k=Le),a&&k))break}}return ke&&(a=G(a)),a+(k?"\\":"")+(d=Y(d.split(/[\\\/]+/),!k).join("\\"))||"."},L.normalize=function(a){var d=H(a),k=d.device,I=d.isUnc,X=d.isAbsolute,ne=d.tail,ue=/[\\\/]$/.test(ne);return(ne=Y(ne.split(/[\\\/]+/),!X).join("\\"))||X||(ne="."),ne&&ue&&(ne+="\\"),I&&(k=G(k)),k+(X?"\\":"")+ne},L.isAbsolute=function(a){return H(a).isAbsolute},L.join=function(){for(var a=[],d=0;d<arguments.length;d++){var k=arguments[d];if(!z.isString(k))throw new TypeError("Arguments to path.join must be strings");k&&a.push(k)}var I=a.join("\\");return/^[\\\/]{2}[^\\\/]/.test(a[0])||(I=I.replace(/^[\\\/]{2,}/,"\\")),L.normalize(I)},L.relative=function(a,d){a=L.resolve(a),d=L.resolve(d);for(var k=a.toLowerCase(),I=d.toLowerCase(),X=w(d.split("\\")),ne=w(k.split("\\")),ue=w(I.split("\\")),ke=Math.min(ne.length,ue.length),Le=ke,Be=0;Be<ke;Be++)if(ne[Be]!==ue[Be]){Le=Be;break}if(Le==0)return d;var ye=[];for(Be=Le;Be<ne.length;Be++)ye.push("..");return(ye=ye.concat(X.slice(Le))).join("\\")},L._makeLong=function(a){if(!z.isString(a))return a;if(!a)return"";var d=L.resolve(a);return/^[a-zA-Z]\:\\/.test(d)?"\\\\?\\"+d:/^\\\\[^?.]/.test(d)?"\\\\?\\UNC\\"+d.substring(2):a},L.dirname=function(a){var d=Q(a),k=d[0],I=d[1];return k||I?(I&&(I=I.substr(0,I.length-1)),k+I):"."},L.basename=function(a,d){var k=Q(a)[2];return d&&k.substr(-1*d.length)===d&&(k=k.substr(0,k.length-d.length)),k},L.extname=function(a){return Q(a)[3]},L.format=function(a){if(!z.isObject(a))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);var d=a.root||"";if(!z.isString(d))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);var k=a.dir,I=a.base||"";return k?k[k.length-1]===L.sep?k+I:k+L.sep+I:I},L.parse=function(a){if(!z.isString(a))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var d=Q(a);if(!d||d.length!==4)throw new TypeError("Invalid path '"+a+"'");return{root:d[0],dir:d[0]+d[1].slice(0,-1),base:d[2],ext:d[3],name:d[2].slice(0,d[2].length-d[3].length)}},L.sep="\\",L.delimiter=";";var Z=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,U={};function q(a){return Z.exec(a).slice(1)}U.resolve=function(){for(var a="",d=!1,k=arguments.length-1;k>=-1&&!d;k--){var I=k>=0?arguments[k]:F.cwd();if(!z.isString(I))throw new TypeError("Arguments to path.resolve must be strings");I&&(a=I+"/"+a,d=I[0]==="/")}return(d?"/":"")+(a=Y(a.split("/"),!d).join("/"))||"."},U.normalize=function(a){var d=U.isAbsolute(a),k=a&&a[a.length-1]==="/";return(a=Y(a.split("/"),!d).join("/"))||d||(a="."),a&&k&&(a+="/"),(d?"/":"")+a},U.isAbsolute=function(a){return a.charAt(0)==="/"},U.join=function(){for(var a="",d=0;d<arguments.length;d++){var k=arguments[d];if(!z.isString(k))throw new TypeError("Arguments to path.join must be strings");k&&(a+=a?"/"+k:k)}return U.normalize(a)},U.relative=function(a,d){a=U.resolve(a).substr(1),d=U.resolve(d).substr(1);for(var k=w(a.split("/")),I=w(d.split("/")),X=Math.min(k.length,I.length),ne=X,ue=0;ue<X;ue++)if(k[ue]!==I[ue]){ne=ue;break}var ke=[];for(ue=ne;ue<k.length;ue++)ke.push("..");return(ke=ke.concat(I.slice(ne))).join("/")},U._makeLong=function(a){return a},U.dirname=function(a){var d=q(a),k=d[0],I=d[1];return k||I?(I&&(I=I.substr(0,I.length-1)),k+I):"."},U.basename=function(a,d){var k=q(a)[2];return d&&k.substr(-1*d.length)===d&&(k=k.substr(0,k.length-d.length)),k},U.extname=function(a){return q(a)[3]},U.format=function(a){if(!z.isObject(a))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);var d=a.root||"";if(!z.isString(d))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);return(a.dir?a.dir+U.sep:"")+(a.base||"")},U.parse=function(a){if(!z.isString(a))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var d=q(a);if(!d||d.length!==4)throw new TypeError("Invalid path '"+a+"'");return d[1]=d[1]||"",d[2]=d[2]||"",d[3]=d[3]||"",{root:d[0],dir:d[0]+d[1].slice(0,-1),base:d[2],ext:d[3],name:d[2].slice(0,d[2].length-d[3].length)}},U.sep="/",U.delimiter=":",y.exports=D?L:U,y.exports.posix=U,y.exports.win32=L},155:y=>{var u,_,F=y.exports={};function D(){throw new Error("setTimeout has not been defined")}function z(){throw new Error("clearTimeout has not been defined")}function Y(U){if(u===setTimeout)return setTimeout(U,0);if((u===D||!u)&&setTimeout)return u=setTimeout,setTimeout(U,0);try{return u(U,0)}catch{try{return u.call(null,U,0)}catch{return u.call(this,U,0)}}}(function(){try{u=typeof setTimeout=="function"?setTimeout:D}catch{u=D}try{_=typeof clearTimeout=="function"?clearTimeout:z}catch{_=z}})();var w,m=[],S=!1,L=-1;function Q(){S&&w&&(S=!1,w.length?m=w.concat(m):L=-1,m.length&&H())}function H(){if(!S){var U=Y(Q);S=!0;for(var q=m.length;q;){for(w=m,m=[];++L<q;)w&&w[L].run();L=-1,q=m.length}w=null,S=!1,function(a){if(_===clearTimeout)return clearTimeout(a);if((_===z||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(a);try{_(a)}catch{try{return _.call(null,a)}catch{return _.call(this,a)}}}(U)}}function G(U,q){this.fun=U,this.array=q}function Z(){}F.nextTick=function(U){var q=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)q[a-1]=arguments[a];m.push(new G(U,q)),m.length!==1||S||Y(H)},G.prototype.run=function(){this.fun.apply(null,this.array)},F.title="browser",F.browser=!0,F.env={},F.argv=[],F.version="",F.versions={},F.on=Z,F.addListener=Z,F.once=Z,F.off=Z,F.removeListener=Z,F.removeAllListeners=Z,F.emit=Z,F.prependListener=Z,F.prependOnceListener=Z,F.listeners=function(U){return[]},F.binding=function(U){throw new Error("process.binding is not supported")},F.cwd=function(){return"/"},F.chdir=function(U){throw new Error("process.chdir is not supported")},F.umask=function(){return 0}},384:y=>{y.exports=function(u){return u&&typeof u=="object"&&typeof u.copy=="function"&&typeof u.fill=="function"&&typeof u.readUInt8=="function"}},539:(y,u,_)=>{var F=_(155),D=/%[sdj%]/g;u.format=function(h){if(!a(h)){for(var B=[],R=0;R<arguments.length;R++)B.push(w(arguments[R]));return B.join(" ")}R=1;for(var ae=arguments,De=ae.length,W=String(h).replace(D,function(fe){if(fe==="%%")return"%";if(R>=De)return fe;switch(fe){case"%s":return String(ae[R++]);case"%d":return Number(ae[R++]);case"%j":try{return JSON.stringify(ae[R++])}catch{return"[Circular]"}default:return fe}}),ee=ae[R];R<De;ee=ae[++R])U(ee)||!I(ee)?W+=" "+ee:W+=" "+w(ee);return W},u.deprecate=function(h,B){if(d(_.g.process))return function(){return u.deprecate(h,B).apply(this,arguments)};if(F.noDeprecation===!0)return h;var R=!1;return function(){if(!R){if(F.throwDeprecation)throw new Error(B);F.traceDeprecation?console.trace(B):console.error(B),R=!0}return h.apply(this,arguments)}};var z,Y={};function w(h,B){var R={seen:[],stylize:S};return arguments.length>=3&&(R.depth=arguments[2]),arguments.length>=4&&(R.colors=arguments[3]),Z(B)?R.showHidden=B:B&&u._extend(R,B),d(R.showHidden)&&(R.showHidden=!1),d(R.depth)&&(R.depth=2),d(R.colors)&&(R.colors=!1),d(R.customInspect)&&(R.customInspect=!0),R.colors&&(R.stylize=m),L(R,h,R.depth)}function m(h,B){var R=w.styles[B];return R?"\x1B["+w.colors[R][0]+"m"+h+"\x1B["+w.colors[R][1]+"m":h}function S(h,B){return h}function L(h,B,R){if(h.customInspect&&B&&ue(B.inspect)&&B.inspect!==u.inspect&&(!B.constructor||B.constructor.prototype!==B)){var ae=B.inspect(R,h);return a(ae)||(ae=L(h,ae,R)),ae}var De=function(be,he){if(d(he))return be.stylize("undefined","undefined");if(a(he)){var Fe="'"+JSON.stringify(he).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return be.stylize(Fe,"string")}if(q(he))return be.stylize(""+he,"number");if(Z(he))return be.stylize(""+he,"boolean");if(U(he))return be.stylize("null","null")}(h,B);if(De)return De;var W=Object.keys(B),ee=function(be){var he={};return be.forEach(function(Fe,Ae){he[Fe]=!0}),he}(W);if(h.showHidden&&(W=Object.getOwnPropertyNames(B)),ne(B)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return Q(B);if(W.length===0){if(ue(B)){var fe=B.name?": "+B.name:"";return h.stylize("[Function"+fe+"]","special")}if(k(B))return h.stylize(RegExp.prototype.toString.call(B),"regexp");if(X(B))return h.stylize(Date.prototype.toString.call(B),"date");if(ne(B))return Q(B)}var Ee,Te="",We=!1,at=["{","}"];return G(B)&&(We=!0,at=["[","]"]),ue(B)&&(Te=" [Function"+(B.name?": "+B.name:"")+"]"),k(B)&&(Te=" "+RegExp.prototype.toString.call(B)),X(B)&&(Te=" "+Date.prototype.toUTCString.call(B)),ne(B)&&(Te=" "+Q(B)),W.length!==0||We&&B.length!=0?R<0?k(B)?h.stylize(RegExp.prototype.toString.call(B),"regexp"):h.stylize("[Object]","special"):(h.seen.push(B),Ee=We?function(be,he,Fe,Ae,Oe){for(var ze=[],Ne=0,Mt=he.length;Ne<Mt;++Ne)Ue(he,String(Ne))?ze.push(H(be,he,Fe,Ae,String(Ne),!0)):ze.push("");return Oe.forEach(function(Lt){Lt.match(/^\d+$/)||ze.push(H(be,he,Fe,Ae,Lt,!0))}),ze}(h,B,R,ee,W):W.map(function(be){return H(h,B,R,ee,be,We)}),h.seen.pop(),function(be,he,Fe){return be.reduce(function(Ae,Oe){return Oe.indexOf(`
`)>=0,Ae+Oe.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Fe[0]+(he===""?"":he+`
 `)+" "+be.join(`,
  `)+" "+Fe[1]:Fe[0]+he+" "+be.join(", ")+" "+Fe[1]}(Ee,Te,at)):at[0]+Te+at[1]}function Q(h){return"["+Error.prototype.toString.call(h)+"]"}function H(h,B,R,ae,De,W){var ee,fe,Ee;if((Ee=Object.getOwnPropertyDescriptor(B,De)||{value:B[De]}).get?fe=Ee.set?h.stylize("[Getter/Setter]","special"):h.stylize("[Getter]","special"):Ee.set&&(fe=h.stylize("[Setter]","special")),Ue(ae,De)||(ee="["+De+"]"),fe||(h.seen.indexOf(Ee.value)<0?(fe=U(R)?L(h,Ee.value,null):L(h,Ee.value,R-1)).indexOf(`
`)>-1&&(fe=W?fe.split(`
`).map(function(Te){return"  "+Te}).join(`
`).substr(2):`
`+fe.split(`
`).map(function(Te){return"   "+Te}).join(`
`)):fe=h.stylize("[Circular]","special")),d(ee)){if(W&&De.match(/^\d+$/))return fe;(ee=JSON.stringify(""+De)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ee=ee.substr(1,ee.length-2),ee=h.stylize(ee,"name")):(ee=ee.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ee=h.stylize(ee,"string"))}return ee+": "+fe}function G(h){return Array.isArray(h)}function Z(h){return typeof h=="boolean"}function U(h){return h===null}function q(h){return typeof h=="number"}function a(h){return typeof h=="string"}function d(h){return h===void 0}function k(h){return I(h)&&ke(h)==="[object RegExp]"}function I(h){return typeof h=="object"&&h!==null}function X(h){return I(h)&&ke(h)==="[object Date]"}function ne(h){return I(h)&&(ke(h)==="[object Error]"||h instanceof Error)}function ue(h){return typeof h=="function"}function ke(h){return Object.prototype.toString.call(h)}function Le(h){return h<10?"0"+h.toString(10):h.toString(10)}u.debuglog=function(h){if(d(z)&&(z=F.env.NODE_DEBUG||""),h=h.toUpperCase(),!Y[h])if(new RegExp("\\b"+h+"\\b","i").test(z)){var B=F.pid;Y[h]=function(){var R=u.format.apply(u,arguments);console.error("%s %d: %s",h,B,R)}}else Y[h]=function(){};return Y[h]},u.inspect=w,w.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},w.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},u.isArray=G,u.isBoolean=Z,u.isNull=U,u.isNullOrUndefined=function(h){return h==null},u.isNumber=q,u.isString=a,u.isSymbol=function(h){return typeof h=="symbol"},u.isUndefined=d,u.isRegExp=k,u.isObject=I,u.isDate=X,u.isError=ne,u.isFunction=ue,u.isPrimitive=function(h){return h===null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||typeof h=="symbol"||h===void 0},u.isBuffer=_(384);var Be=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ye(){var h=new Date,B=[Le(h.getHours()),Le(h.getMinutes()),Le(h.getSeconds())].join(":");return[h.getDate(),Be[h.getMonth()],B].join(" ")}function Ue(h,B){return Object.prototype.hasOwnProperty.call(h,B)}u.log=function(){console.log("%s - %s",ye(),u.format.apply(u,arguments))},u.inherits=_(717),u._extend=function(h,B){if(!B||!I(B))return h;for(var R=Object.keys(B),ae=R.length;ae--;)h[R[ae]]=B[R[ae]];return h}}},C={};function v(y){var u=C[y];if(u!==void 0)return u.exports;var _=C[y]={exports:{}};return x[y].call(_.exports,_,_.exports,v),_.exports}v.n=y=>{var u=y&&y.__esModule?()=>y.default:()=>y;return v.d(u,{a:u}),u},v.d=(y,u)=>{for(var _ in u)v.o(u,_)&&!v.o(y,_)&&Object.defineProperty(y,_,{enumerable:!0,get:u[_]})},v.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),v.o=(y,u)=>Object.prototype.hasOwnProperty.call(y,u),v.r=y=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})};var j={};return(()=>{v.r(j),v.d(j,{LSPluginUser:()=>fr,setupPluginUserInstance:()=>Zr});var y=v(520);v(856);const u=function(){this.__data__=[],this.size=0},_=function(t,e){return t===e||t!=t&&e!=e},F=function(t,e){for(var o=t.length;o--;)if(_(t[o][0],e))return o;return-1};var D=Array.prototype.splice;const z=function(t){var e=this.__data__,o=F(e,t);return!(o<0)&&(o==e.length-1?e.pop():D.call(e,o,1),--this.size,!0)},Y=function(t){var e=this.__data__,o=F(e,t);return o<0?void 0:e[o][1]},w=function(t){return F(this.__data__,t)>-1},m=function(t,e){var o=this.__data__,r=F(o,t);return r<0?(++this.size,o.push([t,e])):o[r][1]=e,this};function S(t){var e=-1,o=t==null?0:t.length;for(this.clear();++e<o;){var r=t[e];this.set(r[0],r[1])}}S.prototype.clear=u,S.prototype.delete=z,S.prototype.get=Y,S.prototype.has=w,S.prototype.set=m;const L=S,Q=function(){this.__data__=new L,this.size=0},H=function(t){var e=this.__data__,o=e.delete(t);return this.size=e.size,o},G=function(t){return this.__data__.get(t)},Z=function(t){return this.__data__.has(t)},U=typeof $o=="object"&&$o&&$o.Object===Object&&$o;var q=typeof self=="object"&&self&&self.Object===Object&&self;const a=U||q||Function("return this")(),d=a.Symbol;var k=Object.prototype,I=k.hasOwnProperty,X=k.toString,ne=d?d.toStringTag:void 0;const ue=function(t){var e=I.call(t,ne),o=t[ne];try{t[ne]=void 0;var r=!0}catch{}var i=X.call(t);return r&&(e?t[ne]=o:delete t[ne]),i};var ke=Object.prototype.toString;const Le=function(t){return ke.call(t)};var Be=d?d.toStringTag:void 0;const ye=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Be&&Be in Object(t)?ue(t):Le(t)},Ue=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},h=function(t){if(!Ue(t))return!1;var e=ye(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},B=a["__core-js_shared__"];var R,ae=(R=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"";const De=function(t){return!!ae&&ae in t};var W=Function.prototype.toString;const ee=function(t){if(t!=null){try{return W.call(t)}catch{}try{return t+""}catch{}}return""};var fe=/^\[object .+?Constructor\]$/,Ee=Function.prototype,Te=Object.prototype,We=Ee.toString,at=Te.hasOwnProperty,be=RegExp("^"+We.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const he=function(t){return!(!Ue(t)||De(t))&&(h(t)?be:fe).test(ee(t))},Fe=function(t,e){return t?.[e]},Ae=function(t,e){var o=Fe(t,e);return he(o)?o:void 0},Oe=Ae(a,"Map"),ze=Ae(Object,"create"),Ne=function(){this.__data__=ze?ze(null):{},this.size=0},Mt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var Lt=Object.prototype.hasOwnProperty;const qo=function(t){var e=this.__data__;if(ze){var o=e[t];return o==="__lodash_hash_undefined__"?void 0:o}return Lt.call(e,t)?e[t]:void 0};var Ro=Object.prototype.hasOwnProperty;const Wo=function(t){var e=this.__data__;return ze?e[t]!==void 0:Ro.call(e,t)},Qo=function(t,e){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=ze&&e===void 0?"__lodash_hash_undefined__":e,this};function st(t){var e=-1,o=t==null?0:t.length;for(this.clear();++e<o;){var r=t[e];this.set(r[0],r[1])}}st.prototype.clear=Ne,st.prototype.delete=Mt,st.prototype.get=qo,st.prototype.has=Wo,st.prototype.set=Qo;const fo=st,Go=function(){this.size=0,this.__data__={hash:new fo,map:new(Oe||L),string:new fo}},Jo=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},ht=function(t,e){var o=t.__data__;return Jo(e)?o[typeof e=="string"?"string":"hash"]:o.map},A=function(t){var e=ht(this,t).delete(t);return this.size-=e?1:0,e},M=function(t){return ht(this,t).get(t)},V=function(t){return ht(this,t).has(t)},oe=function(t,e){var o=ht(this,t),r=o.size;return o.set(t,e),this.size+=o.size==r?0:1,this};function ge(t){var e=-1,o=t==null?0:t.length;for(this.clear();++e<o;){var r=t[e];this.set(r[0],r[1])}}ge.prototype.clear=Go,ge.prototype.delete=A,ge.prototype.get=M,ge.prototype.has=V,ge.prototype.set=oe;const Me=ge,tt=function(t,e){var o=this.__data__;if(o instanceof L){var r=o.__data__;if(!Oe||r.length<199)return r.push([t,e]),this.size=++o.size,this;o=this.__data__=new Me(r)}return o.set(t,e),this.size=o.size,this};function $e(t){var e=this.__data__=new L(t);this.size=e.size}$e.prototype.clear=Q,$e.prototype.delete=H,$e.prototype.get=G,$e.prototype.has=Z,$e.prototype.set=tt;const ot=$e,mt=function(){try{var t=Ae(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Bt=function(t,e,o){e=="__proto__"&&mt?mt(t,e,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[e]=o},$t=function(t,e,o){(o!==void 0&&!_(t[e],o)||o===void 0&&!(e in t))&&Bt(t,e,o)},ho=function(t){return function(e,o,r){for(var i=-1,l=Object(e),g=r(e),p=g.length;p--;){var b=g[t?p:++i];if(o(l[b],b,l)===!1)break}return e}}();var mo=s&&!s.nodeType&&s,yt=mo&&!0&&c&&!c.nodeType&&c,yo=yt&&yt.exports===mo?a.Buffer:void 0,bo=yo?yo.allocUnsafe:void 0;const Vo=function(t,e){if(e)return t.slice();var o=t.length,r=bo?bo(o):new t.constructor(o);return t.copy(r),r},lt=a.Uint8Array,Nt=function(t){var e=new t.constructor(t.byteLength);return new lt(e).set(new lt(t)),e},Qe=function(t,e){var o=e?Nt(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)},vo=function(t,e){var o=-1,r=t.length;for(e||(e=Array(r));++o<r;)e[o]=t[o];return e};var bt=Object.create;const Ht=function(){function t(){}return function(e){if(!Ue(e))return{};if(bt)return bt(e);t.prototype=e;var o=new t;return t.prototype=void 0,o}}(),ko=function(t,e){return function(o){return t(e(o))}},Co=ko(Object.getPrototypeOf,Object);var Zo=Object.prototype;const Pt=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||Zo)},_o=function(t){return typeof t.constructor!="function"||Pt(t)?{}:Ht(Co(t))},we=function(t){return t!=null&&typeof t=="object"},ct=function(t){return we(t)&&ye(t)=="[object Arguments]"};var Ge=Object.prototype,qt=Ge.hasOwnProperty,Rt=Ge.propertyIsEnumerable;const Dt=ct(function(){return arguments}())?ct:function(t){return we(t)&&qt.call(t,"callee")&&!Rt.call(t,"callee")},je=Array.isArray,Wt=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},vt=function(t){return t!=null&&Wt(t.length)&&!h(t)},Qt=function(t){return we(t)&&vt(t)},Ce=function(){return!1};var Gt=s&&!s.nodeType&&s,_e=Gt&&!0&&c&&!c.nodeType&&c,Jt=_e&&_e.exports===Gt?a.Buffer:void 0;const pe=(Jt?Jt.isBuffer:void 0)||Ce;var kt=Function.prototype,Vt=Object.prototype,Zt=kt.toString,Kt=Vt.hasOwnProperty,wo=Zt.call(Object);const ut=function(t){if(!we(t)||ye(t)!="[object Object]")return!1;var e=Co(t);if(e===null)return!0;var o=Kt.call(e,"constructor")&&e.constructor;return typeof o=="function"&&o instanceof o&&Zt.call(o)==wo};var ie={};ie["[object Float32Array]"]=ie["[object Float64Array]"]=ie["[object Int8Array]"]=ie["[object Int16Array]"]=ie["[object Int32Array]"]=ie["[object Uint8Array]"]=ie["[object Uint8ClampedArray]"]=ie["[object Uint16Array]"]=ie["[object Uint32Array]"]=!0,ie["[object Arguments]"]=ie["[object Array]"]=ie["[object ArrayBuffer]"]=ie["[object Boolean]"]=ie["[object DataView]"]=ie["[object Date]"]=ie["[object Error]"]=ie["[object Function]"]=ie["[object Map]"]=ie["[object Number]"]=ie["[object Object]"]=ie["[object RegExp]"]=ie["[object Set]"]=ie["[object String]"]=ie["[object WeakMap]"]=!1;const Yt=function(t){return we(t)&&Wt(t.length)&&!!ie[ye(t)]},Xt=function(t){return function(e){return t(e)}};var rt=s&&!s.nodeType&&s,Je=rt&&!0&&c&&!c.nodeType&&c,dt=Je&&Je.exports===rt&&U.process,eo=function(){try{var t=Je&&Je.require&&Je.require("util").types;return t||dt&&dt.binding&&dt.binding("util")}catch{}}(),Tt=eo&&eo.isTypedArray;const nt=Tt?Xt(Tt):Yt,Ve=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]};var gt=Object.prototype.hasOwnProperty;const xo=function(t,e,o){var r=t[e];gt.call(t,e)&&_(r,o)&&(o!==void 0||e in t)||Bt(t,e,o)},So=function(t,e,o,r){var i=!o;o||(o={});for(var l=-1,g=e.length;++l<g;){var p=e[l],b=r?r(o[p],t[p],p,o,t):void 0;b===void 0&&(b=t[p]),i?Bt(o,p,b):xo(o,p,b)}return o},Lo=function(t,e){for(var o=-1,r=Array(t);++o<t;)r[o]=e(o);return r};var to=/^(?:0|[1-9]\d*)$/;const Ft=function(t,e){var o=typeof t;return!!(e=e??9007199254740991)&&(o=="number"||o!="symbol"&&to.test(t))&&t>-1&&t%1==0&&t<e};var oo=Object.prototype.hasOwnProperty;const At=function(t,e){var o=je(t),r=!o&&Dt(t),i=!o&&!r&&pe(t),l=!o&&!r&&!i&&nt(t),g=o||r||i||l,p=g?Lo(t.length,String):[],b=p.length;for(var $ in t)!e&&!oo.call(t,$)||g&&($=="length"||i&&($=="offset"||$=="parent")||l&&($=="buffer"||$=="byteLength"||$=="byteOffset")||Ft($,b))||p.push($);return p},Ze=function(t){var e=[];if(t!=null)for(var o in Object(t))e.push(o);return e};var Et=Object.prototype.hasOwnProperty;const Bo=function(t){if(!Ue(t))return Ze(t);var e=Pt(t),o=[];for(var r in t)(r!="constructor"||!e&&Et.call(t,r))&&o.push(r);return o},Do=function(t){return vt(t)?At(t,!0):Bo(t)},Ko=function(t){return So(t,Do(t))},pt=function(t,e,o,r,i,l,g){var p=Ve(t,o),b=Ve(e,o),$=g.get(b);if($)$t(t,o,$);else{var N=l?l(p,b,o+"",t,e,g):void 0,P=N===void 0;if(P){var J=je(b),te=!J&&pe(b),K=!J&&!te&&nt(b);N=b,J||te||K?je(p)?N=p:Qt(p)?N=vo(p):te?(P=!1,N=Vo(b,!0)):K?(P=!1,N=Qe(b,!0)):N=[]:ut(b)||Dt(b)?(N=p,Dt(p)?N=Ko(p):Ue(p)&&!h(p)||(N=_o(b))):P=!1}P&&(g.set(b,N),i(N,b,r,l,g),g.delete(b)),$t(t,o,N)}},Yo=function t(e,o,r,i,l){e!==o&&ho(o,function(g,p){if(l||(l=new ot),Ue(g))pt(e,o,p,r,t,i,l);else{var b=i?i(Ve(e,p),g,p+"",e,o,l):void 0;b===void 0&&(b=g),$t(e,p,b)}},Do)},It=function(t){return t},ro=function(t,e,o){switch(o.length){case 0:return t.call(e);case 1:return t.call(e,o[0]);case 2:return t.call(e,o[0],o[1]);case 3:return t.call(e,o[0],o[1],o[2])}return t.apply(e,o)};var no=Math.max;const To=function(t,e,o){return e=no(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,l=no(r.length-e,0),g=Array(l);++i<l;)g[i]=r[e+i];i=-1;for(var p=Array(e+1);++i<e;)p[i]=r[i];return p[e]=o(g),ro(t,this,p)}},Xo=function(t){return function(){return t}},Ot=mt?function(t,e){return mt(t,"toString",{configurable:!0,enumerable:!1,value:Xo(e),writable:!0})}:It;var io=Date.now;const er=function(t){var e=0,o=0;return function(){var r=io(),i=16-(r-o);if(o=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Ot),He=function(t,e){return er(To(t,e,It),t+"")},Fo=function(t,e,o){if(!Ue(o))return!1;var r=typeof e;return!!(r=="number"?vt(o)&&Ft(e,o.length):r=="string"&&e in o)&&_(o[e],t)},Ao=function(t){return He(function(e,o){var r=-1,i=o.length,l=i>1?o[i-1]:void 0,g=i>2?o[2]:void 0;for(l=t.length>3&&typeof l=="function"?(i--,l):void 0,g&&Fo(o[0],o[1],g)&&(l=i<3?void 0:l,i=1),e=Object(e);++r<i;){var p=o[r];p&&t(e,p,r,l)}return e})}(function(t,e,o){Yo(t,e,o)});var Ct=function(){return Ct=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ct.apply(this,arguments)};function tr(t){return t.toLowerCase()}var _t=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Pe=/[^A-Z0-9]+/gi;function ao(t,e,o){return e instanceof RegExp?t.replace(e,o):e.reduce(function(r,i){return r.replace(i,o)},t)}function Eo(t,e){return e===void 0&&(e={}),function(o,r){r===void 0&&(r={});for(var i=r.splitRegexp,l=i===void 0?_t:i,g=r.stripRegexp,p=g===void 0?Pe:g,b=r.transform,$=b===void 0?tr:b,N=r.delimiter,P=N===void 0?" ":N,J=ao(ao(o,l,"$1\0$2"),p,"\0"),te=0,K=J.length;J.charAt(te)==="\0";)te++;for(;J.charAt(K-1)==="\0";)K--;return J.slice(te,K).split("\0").map($).join(P)}(t,Ct({delimiter:"."},e))}var so=v(729),wt=v.n(so);function lo(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const n=navigator.platform.toLowerCase()==="win32"?y.win32:y.posix,E=function(t,e){return e===void 0&&(e={}),Eo(t,Ct({delimiter:"_"},e))},T=Ao;class se extends wt(){constructor(e,o){super(),lo(this,"_tag",void 0),lo(this,"_opts",void 0),lo(this,"_logs",[]),this._tag=e,this._opts=o}write(e,o,r){var i;o!=null&&o.length&&o[o.length-1]===!0&&(r=!0,o.pop());const l=o.reduce((p,b)=>(b&&b instanceof Error?p+=`${b.message} ${b.stack}`:p+=b.toString(),p),`[${this._tag}][${new Date().toLocaleTimeString()}] `);var g;this._logs.push([e,l]),(r||(i=this._opts)!==null&&i!==void 0&&i.console)&&((g=console)===null||g===void 0||g[e==="ERROR"?"error":"debug"](`${e}: ${l}`)),this.emit("change")}clear(){this._logs=[],this.emit("change")}info(...e){this.write("INFO",e)}error(...e){this.write("ERROR",e)}warn(...e){this.write("WARN",e)}setTag(e){this._tag=e}toJSON(){return this._logs}}function me(t,...e){try{const o=new URL(t);if(!o.origin)throw new Error(null);const r=n.join(t.substr(o.origin.length),...e);return o.origin+r}catch{return n.join(t,...e)}}function xe(t,e){let o,r,i=!1;const l=p=>b=>{t&&clearTimeout(t),p(b),i=!0},g=new Promise((p,b)=>{o=l(p),r=l(b),t&&(t=setTimeout(()=>r(new Error(`[deferred timeout] ${e}`)),t))});return{created:Date.now(),setTag:p=>e=p,resolve:o,reject:r,promise:g,get settled(){return i}}}const Se=new Map;window.__injectedUIEffects=Se;var xt=v(227),qe=v.n(xt);function re(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const it="application/x-postmate-v1+json";let kr=0;const yn={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},or=(t,e)=>(typeof e!="string"||t.origin===e)&&!!t.data&&(typeof t.data!="object"||"postmate"in t.data)&&t.data.type===it&&!!yn[t.data.postmate];class bn{constructor(e){re(this,"parent",void 0),re(this,"frame",void 0),re(this,"child",void 0),re(this,"events",{}),re(this,"childOrigin",void 0),re(this,"listener",void 0),this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=o=>{if(!or(o,this.childOrigin))return!1;const{data:r,name:i}=((o||{}).data||{}).value||{};o.data.postmate==="emit"&&i in this.events&&this.events[i].forEach(l=>{l.call(this,r)})},this.parent.addEventListener("message",this.listener,!1)}get(e,...o){return new Promise(r=>{const i=++kr,l=g=>{g.data.uid===i&&g.data.postmate==="reply"&&(this.parent.removeEventListener("message",l,!1),r(g.data.value))};this.parent.addEventListener("message",l,!1),this.child.postMessage({postmate:"request",type:it,property:e,args:o,uid:i},this.childOrigin)})}call(e,o){this.child.postMessage({postmate:"call",type:it,property:e,data:o},this.childOrigin)}on(e,o){this.events[e]||(this.events[e]=[]),this.events[e].push(o)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class vn{constructor(e){re(this,"model",void 0),re(this,"parent",void 0),re(this,"parentOrigin",void 0),re(this,"child",void 0),this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",o=>{if(!or(o,this.parentOrigin))return;const{property:r,uid:i,data:l,args:g}=o.data;o.data.postmate!=="call"?((p,b,$)=>{const N=typeof p[b]=="function"?p[b].apply(null,$):p[b];return Promise.resolve(N)})(this.model,r,g).then(p=>{o.source.postMessage({property:r,postmate:"reply",type:it,uid:i,value:p},o.origin)}):r in this.model&&typeof this.model[r]=="function"&&this.model[r](l)})}emit(e,o){this.parent.postMessage({postmate:"emit",type:it,value:{name:e,data:o}},this.parentOrigin)}}class rr{constructor(e){re(this,"container",void 0),re(this,"parent",void 0),re(this,"frame",void 0),re(this,"child",void 0),re(this,"childOrigin",void 0),re(this,"url",void 0),re(this,"model",void 0),this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const o=(l=>{const g=document.createElement("a");g.href=l;const p=g.protocol.length>4?g.protocol:window.location.protocol,b=g.host.length?g.port==="80"||g.port==="443"?g.hostname:g.host:window.location.host;return g.origin||`${p}//${b}`})(e=e||this.url);let r,i=0;return new Promise((l,g)=>{const p=$=>!!or($,o)&&($.data.postmate==="handshake-reply"?(clearInterval(r),this.parent.removeEventListener("message",p,!1),this.childOrigin=$.origin,l(new bn(this))):g("Failed handshake"));this.parent.addEventListener("message",p,!1);const b=()=>{i++,this.child.postMessage({postmate:"handshake",type:it,model:this.model},o),i===5&&clearInterval(r)};this.frame.addEventListener("load",()=>{b(),r=setInterval(b,500)}),this.frame.src=e})}destroy(){this.frame.parentNode.removeChild(this.frame)}}re(rr,"debug",!1),re(rr,"Model",void 0);class kn{constructor(e){re(this,"child",void 0),re(this,"model",void 0),re(this,"parent",void 0),re(this,"parentOrigin",void 0),this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,o)=>{const r=i=>{if(i.data.postmate){if(i.data.postmate==="handshake"){this.child.removeEventListener("message",r,!1),i.source.postMessage({postmate:"handshake-reply",type:it},i.origin),this.parentOrigin=i.origin;const l=i.data.model;return l&&Object.keys(l).forEach(g=>{this.model[g]=l[g]}),e(new vn(this))}return o("Handshake Reply Failed")}};this.child.addEventListener("message",r,!1)})}}function co(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const{importHTML:Cn,createSandboxContainer:_n}=window.QSandbox||{};function wn(t,e){return t.startsWith("http")?fetch(t,e):(t=t.replace("file://",""),new Promise(async(o,r)=>{try{const i=await window.apis.doAction(["readFile",t]);o({text:()=>i})}catch(i){console.error(i),r(i)}}))}class xn extends wt(){constructor(e){super(),co(this,"_pluginLocal",void 0),co(this,"_frame",void 0),co(this,"_root",void 0),co(this,"_loaded",!1),co(this,"_unmountFns",[]),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){const{name:e,entry:o}=this._pluginLocal.options;if(this.loaded||!o)return;const{template:r,execScripts:i}=await Cn(o,{fetch:wn});this._mount(r,document.body);const l=_n(e,{elementGetter:()=>{var p;return(p=this._root)===null||p===void 0?void 0:p.firstChild}}).instance.proxy;l.__shadow_mode__=!0,l.LSPluginLocal=this._pluginLocal,l.LSPluginShadow=this,l.LSPluginUser=l.logseq=new fr(this._pluginLocal.toJSON(),this._pluginLocal.caller);const g=await i(l,!0);this._unmountFns.push(g.unmount),this._loaded=!0}_mount(e,o){const r=this._frame=document.createElement("div");r.classList.add("lsp-shadow-sandbox"),r.id=this._pluginLocal.id,this._root=r.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,o.appendChild(r),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){var e,o;(e=this.frame)===null||e===void 0||(o=e.parentNode)===null||o===void 0||o.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var e;return(e=this._root)===null||e===void 0?void 0:e.firstChild}get frame(){return this._frame}}function Ke(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const ft=qe()("LSPlugin:caller"),uo="#await#response#",Sn="#lspmsg#",Cr="#lspmsg#error#",Io=t=>`#lspmsg#${t}`;class Ln extends wt(){constructor(e){super(),Ke(this,"_pluginLocal",void 0),Ke(this,"_connected",!1),Ke(this,"_parent",void 0),Ke(this,"_child",void 0),Ke(this,"_shadow",void 0),Ke(this,"_status",void 0),Ke(this,"_userModel",{}),Ke(this,"_call",void 0),Ke(this,"_callUserModel",void 0),Ke(this,"_debugTag",""),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const o=this,r=this._pluginLocal!=null;let i=0;const l=new Map,g=xe(6e4),p=this._extendUserModel({"#lspmsg#ready#":async N=>{p[Io(N?.pid)]=({type:P,payload:J})=>{ft(`[host (_call) -> *user] ${this._debugTag}`,P,J),o.emit(P,J)},await g.resolve()},"#lspmsg#beforeunload#":async N=>{const P=xe(1e4);o.emit("beforeunload",Object.assign({actor:P},N)),await P.promise},"#lspmsg#settings#":async({type:N,payload:P})=>{o.emit("settings:changed",P)},[Sn]:async({ns:N,type:P,payload:J})=>{ft(`[host (async) -> *user] ${this._debugTag} ns=${N} type=${P}`,J),N&&N.startsWith("hook")?o.emit(`${N}:${P}`,J):o.emit(P,J)},"#lspmsg#reply#":({_sync:N,result:P})=>{if(ft(`[sync host -> *user] #${N}`,P),l.has(N)){const J=l.get(N);J&&(P!=null&&P.hasOwnProperty(Cr)?J.reject(P[Cr]):J.resolve(P),l.delete(N))}},...e});var b;if(r)return await g.promise,JSON.parse(JSON.stringify((b=this._pluginLocal)===null||b===void 0?void 0:b.toJSON()));const $=new kn(p).sendHandshakeReply();return this._status="pending",await $.then(N=>{this._child=N,this._connected=!0,this._call=async(P,J={},te)=>{if(te){const K=++i;l.set(K,te),J._sync=K,te.setTag(`async call #${K}`),ft(`async call #${K}`)}return N.emit(Io(p.baseInfo.id),{type:P,payload:J}),te?.promise},this._callUserModel=async(P,J)=>{try{p[P](J)}catch{ft(`[model method] #${P} not existed`)}},setInterval(()=>{if(l.size>100)for(const[P,J]of l)J.settled&&l.delete(P)},18e5)}).finally(()=>{this._status=void 0}),await g.promise,p.baseInfo}async call(e,o={}){var r;return(r=this._call)===null||r===void 0?void 0:r.call(this,e,o)}async callAsync(e,o={}){var r;const i=xe(1e4);return(r=this._call)===null||r===void 0?void 0:r.call(this,e,o,i)}async callUserModel(e,...o){var r;return(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[e,...o])}async callUserModelAsync(e,...o){var r;return e=`${uo}${e}`,(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[e,...o])}async _setupIframeSandbox(){const e=this._pluginLocal,o=e.id,r=`${o}_lsp_main`,i=new URL(e.options.entry);i.searchParams.set("__v__",e.options.version);const l=document.querySelector(`#${r}`);l&&l.parentElement.removeChild(l);const g=document.createElement("div");g.classList.add("lsp-iframe-sandbox-container"),g.id=r,g.dataset.pid=o;try{var p;const P=(p=await this._pluginLocal._loadLayoutsData())===null||p===void 0?void 0:p.$$0;if(P){g.dataset.inited_layout="true";let{width:J,height:te,left:K,top:le,vw:ve,vh:Ie}=P;K=Math.max(K,0),K=typeof ve=="number"?`${Math.min(100*K/ve,99)}%`:`${K}px`,le=Math.max(le,45),le=typeof Ie=="number"?`${Math.min(100*le/Ie,99)}%`:`${le}px`,Object.assign(g.style,{width:J+"px",height:te+"px",left:K,top:le})}}catch(P){console.error("[Restore Layout Error]",P)}document.body.appendChild(g);const b=new rr({id:o+"_iframe",container:g,url:i.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}});let $,N=b.sendHandshake();return this._status="pending",new Promise((P,J)=>{$=setTimeout(()=>{J(new Error("handshake Timeout")),b.destroy()},4e3),N.then(te=>{this._parent=te,this._connected=!0,this.emit("connected"),te.on(Io(e.id),({type:K,payload:le})=>{var ve,Ie;ft("[user -> *host] ",K,le),(ve=this._pluginLocal)===null||ve===void 0||ve.emit(K,le||{}),(Ie=this._pluginLocal)===null||Ie===void 0||Ie.caller.emit(K,le||{})}),this._call=async(...K)=>{await te.call(Io(e.id),{type:K[0],payload:Object.assign(K[1]||{},{$$pid:e.id})})},this._callUserModel=async(K,...le)=>{if(K.startsWith(uo))return await te.get(K.replace(uo,""),...le);te.call(K,le?.[0])},P(null)}).catch(te=>{J(te)}).finally(()=>{clearTimeout($)})}).catch(P=>{throw ft("[iframe sandbox] error",P),P}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const e=this._pluginLocal,o=this._shadow=new xn(e);try{this._status="pending",await o.load(),this._connected=!0,this.emit("connected"),this._call=async(r,i={},l)=>{var g;return l&&(i.actor=l),(g=this._pluginLocal)===null||g===void 0||g.emit(r,Object.assign(i,{$$pid:e.id})),l?.promise},this._callUserModel=async(...r)=>{var i;let l=r[0];(i=l)!==null&&i!==void 0&&i.startsWith(uo)&&(l=l.replace(uo,""));const g=r[1]||{},p=this._userModel[l];typeof p=="function"&&await p.call(null,g)}}catch(r){throw ft("[shadow sandbox] error",r),r}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxShadowContainer(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxIframeRoot(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame}_getSandboxShadowRoot(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame}set debugTag(e){this._debugTag=e}async destroy(){var e;let o=null;this._parent&&(o=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(o=this._getSandboxShadowContainer(),this._shadow.destroy()),(e=o)===null||e===void 0||e.parentNode.removeChild(o)}}function _r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class wr{constructor(e,o){_r(this,"ctx",void 0),_r(this,"opts",void 0),this.ctx=e,this.opts=o}get ctxId(){return this.ctx.baseInfo.id}setItem(e,o){var r;return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,o,(r=this.opts)===null||r===void 0?void 0:r.assets]})}getItem(e){var o;return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e,(o=this.opts)===null||o===void 0?void 0:o.assets]})}removeItem(e){var o;return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e,(o=this.opts)===null||o===void 0?void 0:o.assets]})}allKeys(){var e;return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}clear(){var e;return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}hasItem(e){var o;return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e,(o=this.opts)===null||o===void 0?void 0:o.assets]})}}class Bn{constructor(e){var o,r,i;i=void 0,(r="ctx")in(o=this)?Object.defineProperty(o,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[r]=i,this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...o){var r,i;const l=this.ensureHostScope();return e=(r=E(e))===null||r===void 0?void 0:r.toLowerCase(),(i=l.logseq.api["exper_"+e])===null||i===void 0?void 0:i.apply(l,o)}async loadScripts(...e){(e=e.map(o=>o!=null&&o.startsWith("http")?o:this.ctx.resolveResourceFullUrl(o))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,o){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,o)}registerExtensionsEnhancer(e,o){const r=this.ensureHostScope();return e==="katex"&&r.katex&&o(r.katex).catch(console.error),r.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,o)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}function jt(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const xr=t=>`task_callback_${t}`;class Dn{constructor(e,o,r={}){jt(this,"_client",void 0),jt(this,"_requestId",void 0),jt(this,"_requestOptions",void 0),jt(this,"_promise",void 0),jt(this,"_aborted",!1),this._client=e,this._requestId=o,this._requestOptions=r,this._promise=new Promise((p,b)=>{if(!this._requestId)return b(null);this._client.once(xr(this._requestId),$=>{$&&$ instanceof Error?b($):p($)})});const{success:i,fail:l,final:g}=this._requestOptions;this._promise.then(p=>{i?.(p)}).catch(p=>{l?.(p)}).finally(()=>{g?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class nr extends so.EventEmitter{constructor(e){super(),jt(this,"_ctx",void 0),this._ctx=e,this.ctx.caller.on("#lsp#request#callback",o=>{const r=o?.requestId;r&&this.emit(xr(r),o?.payload)})}static createRequestTask(e,o,r){return new Dn(e,o,r)}async _request(e){const o=this.ctx.baseInfo.id,{success:r,fail:i,final:l,...g}=e,p=this.ctx.Experiments.invokeExperMethod("request",o,g),b=nr.createRequestTask(this.ctx.Request,p,e);return g.abortable?b:b.promise}get ctx(){return this._ctx}}const Tn=ko(Object.keys,Object);var Fn=Object.prototype.hasOwnProperty;const An=function(t){if(!Pt(t))return Tn(t);var e=[];for(var o in Object(t))Fn.call(t,o)&&o!="constructor"&&e.push(o);return e},ir=function(t){return vt(t)?At(t):An(t)},En=function(t,e){return t&&ho(t,e,ir)},In=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},On=function(t){return this.__data__.has(t)};function Oo(t){var e=-1,o=t==null?0:t.length;for(this.__data__=new Me;++e<o;)this.add(t[e])}Oo.prototype.add=Oo.prototype.push=In,Oo.prototype.has=On;const jn=Oo,Un=function(t,e){for(var o=-1,r=t==null?0:t.length;++o<r;)if(e(t[o],o,t))return!0;return!1},zn=function(t,e){return t.has(e)},Sr=function(t,e,o,r,i,l){var g=1&o,p=t.length,b=e.length;if(p!=b&&!(g&&b>p))return!1;var $=l.get(t),N=l.get(e);if($&&N)return $==e&&N==t;var P=-1,J=!0,te=2&o?new jn:void 0;for(l.set(t,e),l.set(e,t);++P<p;){var K=t[P],le=e[P];if(r)var ve=g?r(le,K,P,e,t,l):r(K,le,P,t,e,l);if(ve!==void 0){if(ve)continue;J=!1;break}if(te){if(!Un(e,function(Ie,Ye){if(!zn(te,Ye)&&(K===Ie||i(K,Ie,o,r,l)))return te.push(Ye)})){J=!1;break}}else if(K!==le&&!i(K,le,o,r,l)){J=!1;break}}return l.delete(t),l.delete(e),J},Mn=function(t){var e=-1,o=Array(t.size);return t.forEach(function(r,i){o[++e]=[i,r]}),o},$n=function(t){var e=-1,o=Array(t.size);return t.forEach(function(r){o[++e]=r}),o};var Lr=d?d.prototype:void 0,ar=Lr?Lr.valueOf:void 0;const Nn=function(t,e,o,r,i,l,g){switch(o){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!l(new lt(t),new lt(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=Mn;case"[object Set]":var b=1&r;if(p||(p=$n),t.size!=e.size&&!b)return!1;var $=g.get(t);if($)return $==e;r|=2,g.set(t,e);var N=Sr(p(t),p(e),r,i,l,g);return g.delete(t),N;case"[object Symbol]":if(ar)return ar.call(t)==ar.call(e)}return!1},Hn=function(t,e){for(var o=-1,r=e.length,i=t.length;++o<r;)t[i+o]=e[o];return t},Pn=function(t,e,o){var r=e(t);return je(t)?r:Hn(r,o(t))},qn=function(t,e){for(var o=-1,r=t==null?0:t.length,i=0,l=[];++o<r;){var g=t[o];e(g,o,t)&&(l[i++]=g)}return l},Rn=function(){return[]};var Wn=Object.prototype.propertyIsEnumerable,Br=Object.getOwnPropertySymbols;const Qn=Br?function(t){return t==null?[]:(t=Object(t),qn(Br(t),function(e){return Wn.call(t,e)}))}:Rn,Dr=function(t){return Pn(t,ir,Qn)};var Gn=Object.prototype.hasOwnProperty;const Jn=function(t,e,o,r,i,l){var g=1&o,p=Dr(t),b=p.length;if(b!=Dr(e).length&&!g)return!1;for(var $=b;$--;){var N=p[$];if(!(g?N in e:Gn.call(e,N)))return!1}var P=l.get(t),J=l.get(e);if(P&&J)return P==e&&J==t;var te=!0;l.set(t,e),l.set(e,t);for(var K=g;++$<b;){var le=t[N=p[$]],ve=e[N];if(r)var Ie=g?r(ve,le,N,e,t,l):r(le,ve,N,t,e,l);if(!(Ie===void 0?le===ve||i(le,ve,o,r,l):Ie)){te=!1;break}K||(K=N=="constructor")}if(te&&!K){var Ye=t.constructor,Mo=e.constructor;Ye==Mo||!("constructor"in t)||!("constructor"in e)||typeof Ye=="function"&&Ye instanceof Ye&&typeof Mo=="function"&&Mo instanceof Mo||(te=!1)}return l.delete(t),l.delete(e),te},sr=Ae(a,"DataView"),lr=Ae(a,"Promise"),cr=Ae(a,"Set"),ur=Ae(a,"WeakMap");var Tr="[object Map]",Fr="[object Promise]",Ar="[object Set]",Er="[object WeakMap]",Ir="[object DataView]",Vn=ee(sr),Zn=ee(Oe),Kn=ee(lr),Yn=ee(cr),Xn=ee(ur),St=ye;(sr&&St(new sr(new ArrayBuffer(1)))!=Ir||Oe&&St(new Oe)!=Tr||lr&&St(lr.resolve())!=Fr||cr&&St(new cr)!=Ar||ur&&St(new ur)!=Er)&&(St=function(t){var e=ye(t),o=e=="[object Object]"?t.constructor:void 0,r=o?ee(o):"";if(r)switch(r){case Vn:return Ir;case Zn:return Tr;case Kn:return Fr;case Yn:return Ar;case Xn:return Er}return e});const Or=St;var jr="[object Arguments]",Ur="[object Array]",jo="[object Object]",zr=Object.prototype.hasOwnProperty;const ei=function(t,e,o,r,i,l){var g=je(t),p=je(e),b=g?Ur:Or(t),$=p?Ur:Or(e),N=(b=b==jr?jo:b)==jo,P=($=$==jr?jo:$)==jo,J=b==$;if(J&&pe(t)){if(!pe(e))return!1;g=!0,N=!1}if(J&&!N)return l||(l=new ot),g||nt(t)?Sr(t,e,o,r,i,l):Nn(t,e,b,o,r,i,l);if(!(1&o)){var te=N&&zr.call(t,"__wrapped__"),K=P&&zr.call(e,"__wrapped__");if(te||K){var le=te?t.value():t,ve=K?e.value():e;return l||(l=new ot),i(le,ve,o,r,l)}}return!!J&&(l||(l=new ot),Jn(t,e,o,r,i,l))},Mr=function t(e,o,r,i,l){return e===o||(e==null||o==null||!we(e)&&!we(o)?e!=e&&o!=o:ei(e,o,r,i,t,l))},ti=function(t,e,o,r){var i=o.length,l=i,g=!r;if(t==null)return!l;for(t=Object(t);i--;){var p=o[i];if(g&&p[2]?p[1]!==t[p[0]]:!(p[0]in t))return!1}for(;++i<l;){var b=(p=o[i])[0],$=t[b],N=p[1];if(g&&p[2]){if($===void 0&&!(b in t))return!1}else{var P=new ot;if(r)var J=r($,N,b,t,e,P);if(!(J===void 0?Mr(N,$,3,r,P):J))return!1}}return!0},$r=function(t){return t==t&&!Ue(t)},oi=function(t){for(var e=ir(t),o=e.length;o--;){var r=e[o],i=t[r];e[o]=[r,i,$r(i)]}return e},Nr=function(t,e){return function(o){return o!=null&&o[t]===e&&(e!==void 0||t in Object(o))}},ri=function(t){var e=oi(t);return e.length==1&&e[0][2]?Nr(e[0][0],e[0][1]):function(o){return o===t||ti(o,t,e)}},dr=function(t){return typeof t=="symbol"||we(t)&&ye(t)=="[object Symbol]"};var ni=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ii=/^\w*$/;const gr=function(t,e){if(je(t))return!1;var o=typeof t;return!(o!="number"&&o!="symbol"&&o!="boolean"&&t!=null&&!dr(t))||ii.test(t)||!ni.test(t)||e!=null&&t in Object(e)};function pr(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var o=function(){var r=arguments,i=e?e.apply(this,r):r[0],l=o.cache;if(l.has(i))return l.get(i);var g=t.apply(this,r);return o.cache=l.set(i,g)||l,g};return o.cache=new(pr.Cache||Me),o}pr.Cache=Me;const ai=pr;var si=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,li=/\\(\\)?/g;const ci=function(t){var e=ai(t,function(r){return o.size===500&&o.clear(),r}),o=e.cache;return e}(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(si,function(o,r,i,l){e.push(i?l.replace(li,"$1"):r||o)}),e}),ui=function(t,e){for(var o=-1,r=t==null?0:t.length,i=Array(r);++o<r;)i[o]=e(t[o],o,t);return i};var Hr=d?d.prototype:void 0,Pr=Hr?Hr.toString:void 0;const di=function t(e){if(typeof e=="string")return e;if(je(e))return ui(e,t)+"";if(dr(e))return Pr?Pr.call(e):"";var o=e+"";return o=="0"&&1/e==-1/0?"-0":o},gi=function(t){return t==null?"":di(t)},qr=function(t,e){return je(t)?t:gr(t,e)?[t]:ci(gi(t))},Uo=function(t){if(typeof t=="string"||dr(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e},Rr=function(t,e){for(var o=0,r=(e=qr(e,t)).length;t!=null&&o<r;)t=t[Uo(e[o++])];return o&&o==r?t:void 0},pi=function(t,e,o){var r=t==null?void 0:Rr(t,e);return r===void 0?o:r},fi=function(t,e){return t!=null&&e in Object(t)},hi=function(t,e,o){for(var r=-1,i=(e=qr(e,t)).length,l=!1;++r<i;){var g=Uo(e[r]);if(!(l=t!=null&&o(t,g)))break;t=t[g]}return l||++r!=i?l:!!(i=t==null?0:t.length)&&Wt(i)&&Ft(g,i)&&(je(t)||Dt(t))},mi=function(t,e){return t!=null&&hi(t,e,fi)},yi=function(t,e){return gr(t)&&$r(e)?Nr(Uo(t),e):function(o){var r=pi(o,t);return r===void 0&&r===e?mi(o,t):Mr(e,r,3)}},bi=function(t){return function(e){return e?.[t]}},vi=function(t){return function(e){return Rr(e,t)}},ki=function(t){return gr(t)?bi(Uo(t)):vi(t)},Ci=function(t){return typeof t=="function"?t:t==null?It:typeof t=="object"?je(t)?yi(t[0],t[1]):ri(t):ki(t)},_i=function(t,e){var o={};return e=Ci(e),En(t,function(r,i,l){Bt(o,e(r,i,l),r)}),o};function Wr(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class wi{constructor(e,o){Wr(this,"ctx",void 0),Wr(this,"serviceHooks",void 0),this.ctx=e,this.serviceHooks=o,e._execCallableAPI("register-search-service",e.baseInfo.id,o.name,o.options),Object.entries({query:{f:"onQuery",args:["graph","q",!0],reply:!0,transformOutput:r=>(je(r?.blocks)&&(r.blocks=r.blocks.map(i=>i&&_i(i,(l,g)=>`block/${g}`))),r)},rebuildBlocksIndice:{f:"onIndiceInit",args:["graph","blocks"]},transactBlocks:{f:"onBlocksChanged",args:["graph","data"]},truncateBlocks:{f:"onIndiceReset",args:["graph"]},removeDb:{f:"onGraph",args:["graph"]}}).forEach(([r,i])=>{const l=(g=>`service:search:${g}:${o.name}`)(r);e.caller.on(l,async g=>{if(h(o?.[i.f])){let p=null;try{p=await o[i.f].apply(o,(i.args||[]).map(b=>{if(g){if(b===!0)return g;if(g.hasOwnProperty(b)){const $=g[b];return delete g[b],$}}})),i.transformOutput&&(p=i.transformOutput(p))}catch(b){console.error("[SearchService] ",b),p=b}finally{i.reply&&e.caller.call(`${l}:reply`,p)}}})})}}function Re(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const xi=Symbol.for("proxy-continue"),Si=qe()("LSPlugin:user"),Qr=new se("",{console:!0});function Ut(t,e,o){var r;if(typeof o!="function")return!1;const{key:i,label:l,desc:g,palette:p,keybinding:b,extras:$}=e,N=`SimpleCommandHook${i}${++Vr}`;this.Editor["on"+N](o),(r=this.caller)===null||r===void 0||r.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:i,label:l,type:t,desc:g,keybinding:b,extras:$},["editor/hook",N]],p]})}function Gr(t){return!(typeof(e=t)!="string"||e.length!==36||!/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e))||(Qr.error(`#${t} is not a valid UUID string.`),!1);var e}let zo=null,Jr=new Map;const Li={async getInfo(t){return zo||(zo=await this._execCallableAPIAsync("get-app-info")),typeof t=="string"?zo[t]:zo},registerCommand:Ut,registerSearchService(t){if(Jr.has(t.name))throw new Error(`SearchService: #${t.name} has registered!`);Jr.set(t.name,new wi(this,t))},registerCommandPalette(t,e){const{key:o,label:r,keybinding:i}=t;return Ut.call(this,"$palette$",{key:o,label:r,palette:!0,keybinding:i},e)},registerCommandShortcut(t,e){const{binding:o}=t,r="$shortcut$",i=r+E(o);return Ut.call(this,r,{key:i,palette:!1,keybinding:t},e)},registerUIItem(t,e){var o;const r=this.baseInfo.id;(o=this.caller)===null||o===void 0||o.call("api:call",{method:"register-plugin-ui-item",args:[r,t,e]})},registerPageMenuItem(t,e){if(typeof e!="function")return!1;const o=t+"_"+this.baseInfo.id,r=t;Ut.call(this,"page-menu-item",{key:o,label:r},e)},onBlockRendererSlotted(t,e){if(!Gr(t))return;const o=this.baseInfo.id,r=`hook:editor:${E(`slot:${t}`)}`;return this.caller.on(r,e),this.App._installPluginHook(o,r),()=>{this.caller.off(r,e),this.App._uninstallPluginHook(o,r)}},invokeExternalPlugin(t,...e){var o;if(!(t=(o=t)===null||o===void 0?void 0:o.trim()))return;let[r,i]=t.split(".");if(!["models","commands"].includes(i?.toLowerCase()))throw new Error("Type only support '.models' or '.commands' currently.");const l=t.replace(`${r}.${i}.`,"");if(!r||!i||!l)throw new Error(`Illegal type of #${t} to invoke external plugin.`);return this._execCallableAPIAsync("invoke_external_plugin_cmd",r,i.toLowerCase(),l,e)},setFullScreen(t){const e=(...o)=>this._callWin("setFullScreen",...o);t==="toggle"?this._callWin("isFullScreen").then(o=>{o?e():e(!0)}):t?e(!0):e()}};let Vr=0;const Bi={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t,e){var o;Si("Register slash command #",this.baseInfo.id,t,e),typeof e=="function"&&(e=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e]]),e=e.map(r=>{const[i,...l]=r;if(i==="editor/hook"){let g=l[0],p=()=>{var $;($=this.caller)===null||$===void 0||$.callUserModel(g)};typeof g=="function"&&(p=g);const b=`SlashCommandHook${i}${++Vr}`;r[1]=b,this.Editor["on"+b](p)}return r}),(o=this.caller)===null||o===void 0||o.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,e]]})},registerBlockContextMenuItem(t,e){if(typeof e!="function")return!1;const o=t+"_"+this.baseInfo.id;Ut.call(this,"block-context-menu-item",{key:o,label:t},e)},registerHighlightContextMenuItem(t,e,o){if(typeof e!="function")return!1;const r=t+"_"+this.baseInfo.id;Ut.call(this,"highlight-context-menu-item",{key:r,label:t,extras:o},e)},scrollToBlockInPage(t,e,o){const r="block-content-"+e;o!=null&&o.replaceState?this.App.replaceState("page",{name:t},{anchor:r}):this.App.pushState("page",{name:t},{anchor:r})}},Di={onBlockChanged(t,e){if(!Gr(t))return;const o=this.baseInfo.id,r=`hook:db:${E(`block:${t}`)}`,i=({block:l,txData:g,txMeta:p})=>{l.uuid===t&&e(l,g,p)};return this.caller.on(r,i),this.App._installPluginHook(o,r),()=>{this.caller.off(r,i),this.App._uninstallPluginHook(o,r)}},datascriptQuery(t,...e){return e.pop(),e!=null&&e.some(o=>typeof o=="function")?this.Experiments.ensureHostScope().logseq.api.datascript_query(t,...e):this._execCallableAPIAsync("datascript_query",t,...e)}},Ti={},Fi={},Ai={makeSandboxStorage(){return new wr(this,{assets:!0})}};class fr extends wt(){constructor(e,o){super(),Re(this,"_baseInfo",void 0),Re(this,"_caller",void 0),Re(this,"_version","0.0.14"),Re(this,"_debugTag",""),Re(this,"_settingsSchema",void 0),Re(this,"_connected",!1),Re(this,"_ui",new Map),Re(this,"_mFileStorage",void 0),Re(this,"_mRequest",void 0),Re(this,"_mExperiments",void 0),Re(this,"_beforeunloadCallback",void 0),this._baseInfo=e,this._caller=o,o.on("sys:ui:visible",r=>{r!=null&&r.toggle&&this.toggleMainUI()}),o.on("settings:changed",r=>{const i=Object.assign({},this.settings),l=Object.assign(this._baseInfo.settings,r);this.emit("settings:changed",{...l},i)}),o.on("beforeunload",async r=>{const{actor:i,...l}=r,g=this._beforeunloadCallback;try{g&&await g(l),i?.resolve(null)}catch(p){console.debug(`${o.debugTag} [beforeunload] `,p),i?.reject(p)}})}async ready(e,o){if(!this._connected)try{var r;typeof e=="function"&&(o=e,e={});let i=await this._caller.connectToParent(e);this._connected=!0,i=T(this._baseInfo,i),(r=i)!==null&&r!==void 0&&r.id&&(this._debugTag=this._caller.debugTag=`#${i.id} [${i.name}]`,this.logger.setTag(this._debugTag)),this._settingsSchema&&(i.settings=function(l,g){const p=(g||[]).reduce((b,$)=>("default"in $&&(b[$.key]=$.default),b),{});return Object.assign(p,l)}(i.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema));try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(l){console.warn(l)}o&&o.call(this,i)}catch(i){console.error(`${this._debugTag} [Ready Error]`,i)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){typeof e=="function"&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){const o="settings:changed";return this.on(o,e),()=>this.off(o,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const o={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",o),this.emit("ui:visible:changed",o),this._ui.set(o.key,o)}showMainUI(e){const o={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",o),this.emit("ui:visible:changed",o),this._ui.set(o.key,o)}toggleMainUI(){const o=this._ui.get(0);o&&o.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const e=this._ui.get(0);return Boolean(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get effect(){return(e=this)&&(((o=e.baseInfo)===null||o===void 0?void 0:o.effect)||!((r=e.baseInfo)!==null&&r!==void 0&&r.iir));var e,o,r}get logger(){return Qr}get settings(){var e;return(e=this.baseInfo)===null||e===void 0?void 0:e.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),me(this._baseInfo.lsr,e)}_makeUserProxy(e,o){const r=this,i=this.caller;return new Proxy(e,{get(l,g,p){const b=l[g];return function(...$){if(b){const P=b.apply(r,$.concat(o));if(P!==xi)return P}if(o){const P=g.toString().match(/^(once|off|on)/i);if(P!=null){const J=P[0].toLowerCase(),te=P.input.slice(J.length),K=J==="off",le=r.baseInfo.id,ve=`hook:${o}:${E(te)}`,Ie=$[0];i[J](ve,Ie);const Ye=()=>{i.off(ve,Ie),i.listenerCount(ve)||r.App._uninstallPluginHook(le,ve)};return K?void Ye():(r.App._installPluginHook(le,ve),Ye)}}let N=g;return["git","ui","assets"].includes(o)&&(N=o+"_"+N),i.callAsync("api:call",{tag:o,method:N,args:$})}}})}_execCallableAPIAsync(e,...o){return this._caller.callAsync("api:call",{method:e,args:o})}_execCallableAPI(e,...o){this._caller.call("api:call",{method:e,args:o})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(Li,"app")}get Editor(){return this._makeUserProxy(Bi,"editor")}get DB(){return this._makeUserProxy(Di,"db")}get Git(){return this._makeUserProxy(Ti,"git")}get UI(){return this._makeUserProxy(Fi,"ui")}get Assets(){return this._makeUserProxy(Ai,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new wr(this)),e}get Request(){let e=this._mRequest;return e||(e=this._mRequest=new nr(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new Bn(this)),e}}function Zr(t,e){return new fr(t,e)}if(window.__LSP__HOST__==null){const t=new Ln(null);window.logseq=Zr({},t)}})(),j})())})(Ei,mr);const Ii={title:"Awesome Styler",icon:"./icon.png",id:"logseq-awesome-styler"},ce=parent.document,en=ce.documentElement,de=ce.body,f={themeWarningMsg:' Switch to "Awesome Styler" theme to enable settings',pluginID:Ii.id,oldPluginConfig:null,pluginConfig:null,isPresetWrittenToSettings:!1,isPredefinedPresetClonedToCustom:!1,isSettingsItemWrittenToCustomPreset:!1,isPluginEnabled:"is-awSt-enabled",isAwesomeStylerTheme:!1,isAwesomeStylerThemeAttr:"awstTheme",isAwStSettingsPopupOpenedAttr:"isAwstSettingsPopupOpened",isLsSettingsOpenedAttr:"isLsSettingsOpened",isLsPluginsOpenedAttr:"isLsPluginsOpened",themeMode:""},Oi="3.7.1",ji=(c,s)=>Object.keys(c).filter(C=>C==="presetCustom"||C==="presetCustom2"||C==="presetCustom3"?!1:c[C]!==s[C]),Ui=async()=>{const c=await fetch(`https://api.github.com/repos/yoyurec/${f.pluginID}/releases/latest`,{headers:{Accept:"application/vnd.github.v3+json"}});if(!c.ok){const x=`An error has occurred: ${c.status}`;throw new Error(x)}const s=await c.json();s&&s.tag_name.replace("v","").localeCompare(Oi,void 0,{numeric:!0,sensitivity:"base"})==1&&logseq.UI.showMsg(`"${f.pluginID}" new version is available! Please, update!`,"warning",{timeout:3e4})},zi=(c,s,x)=>{const C=ce.getElementById(c);C&&(tn(c,s),C.contentDocument?.head.insertAdjacentHTML("beforeend",`<style id='${s}'>
            ${x}
        </style>`))},tn=(c,s)=>{const x=ce.getElementById(c);x&&x.contentDocument?.getElementById(s)?.remove()},Mi=()=>{const c=ce.createElement("span");c.textContent="span",c.style.color="var(--ls-primary-text-color)",c.style.backgroundColor="var(--ls-primary-background-color)",de.insertAdjacentElement("beforeend",c);const s=getComputedStyle(c).color.trim(),x=getComputedStyle(c).backgroundColor.trim();c.remove();const C=ce.createElement("a");C.style.border="1px solid var(--ls-border-color)",C.style.backgroundColor="var(--ls-a-chosen-bg)",de.insertAdjacentElement("beforeend",C);const v=getComputedStyle(C).color.trim(),j=getComputedStyle(C).backgroundColor.trim(),y=getComputedStyle(C).borderColor.trim();return C.remove(),`
        :root {
            --ls-primary-text-color:${s};
            --ls-primary-background-color:${x};
            --ls-link-text-color:${v};
            --ls-a-chosen-bg:${j};
            --ls-border-color:${y};
        }
    `};function et(c,s,x){return Math.min(Math.max(c,x),s)}class $i extends Error{constructor(s){super(`Failed to parse color: "${s}"`)}}var go=$i;function zt(c){if(typeof c!="string")throw new go(c);if(c.trim().toLowerCase()==="transparent")return[0,0,0,0];let s=c.trim();s=Gi.test(c)?Pi(c):c;const x=qi.exec(s);if(x){const y=Array.from(x).slice(1);return[...y.slice(0,3).map(u=>parseInt(po(u,2),16)),parseInt(po(y[3]||"f",2),16)/255]}const C=Ri.exec(s);if(C){const y=Array.from(C).slice(1);return[...y.slice(0,3).map(u=>parseInt(u,16)),parseInt(y[3]||"ff",16)/255]}const v=Wi.exec(s);if(v){const y=Array.from(v).slice(1);return[...y.slice(0,3).map(u=>parseInt(u,10)),parseFloat(y[3]||"1")]}const j=Qi.exec(s);if(j){const[y,u,_,F]=Array.from(j).slice(1).map(parseFloat);if(et(0,100,u)!==u)throw new go(c);if(et(0,100,_)!==_)throw new go(c);return[...Ji(y,u,_),Number.isNaN(F)?1:F]}throw new go(c)}function Ni(c){let s=5381,x=c.length;for(;x;)s=s*33^c.charCodeAt(--x);return(s>>>0)%2341}const Kr=c=>parseInt(c.replace(/_/g,""),36),Hi="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((c,s)=>{const x=Kr(s.substring(0,3)),C=Kr(s.substring(3)).toString(16);let v="";for(let j=0;j<6-C.length;j++)v+="0";return c[x]=`${v}${C}`,c},{});function Pi(c){const s=c.toLowerCase().trim(),x=Hi[Ni(s)];if(!x)throw new go(c);return`#${x}`}const po=(c,s)=>Array.from(Array(s)).map(()=>c).join(""),qi=new RegExp(`^#${po("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Ri=new RegExp(`^#${po("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Wi=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${po(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Qi=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Gi=/^[a-z]+$/i,Yr=c=>Math.round(c*255),Ji=(c,s,x)=>{let C=x/100;if(s===0)return[C,C,C].map(Yr);const v=(c%360+360)%360/60,j=(1-Math.abs(2*C-1))*(s/100),y=j*(1-Math.abs(v%2-1));let u=0,_=0,F=0;v>=0&&v<1?(u=j,_=y):v>=1&&v<2?(u=y,_=j):v>=2&&v<3?(_=j,F=y):v>=3&&v<4?(_=y,F=j):v>=4&&v<5?(u=y,F=j):v>=5&&v<6&&(u=j,F=y);const D=C-j/2,z=u+D,Y=_+D,w=F+D;return[z,Y,w].map(Yr)};function Vi(c){const[s,x,C,v]=zt(c).map((z,Y)=>Y===3?z:z/255),j=Math.max(s,x,C),y=Math.min(s,x,C),u=(j+y)/2;if(j===y)return[0,0,u,v];const _=j-y,F=u>.5?_/(2-j-y):_/(j+y);return[60*(s===j?(x-C)/_+(x<C?6:0):x===j?(C-s)/_+2:(s-x)/_+4),F,u,v]}function Zi(c,s,x,C){return`hsla(${(c%360).toFixed()}, ${et(0,100,s*100).toFixed()}%, ${et(0,100,x*100).toFixed()}%, ${parseFloat(et(0,1,C).toFixed(3))})`}function on(c,s){const[x,C,v,j]=Vi(c);return Zi(x,C,v-s,j)}function rn(c){if(c==="transparent")return 0;function s(j){const y=j/255;return y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4)}const[x,C,v]=zt(c);return .2126*s(x)+.7152*s(C)+.0722*s(v)}function nn(c,s,x,C){return`rgba(${et(0,255,c).toFixed()}, ${et(0,255,s).toFixed()}, ${et(0,255,x).toFixed()}, ${parseFloat(et(0,1,C).toFixed(3))})`}function Ki(c,s,x){const C=(U,q)=>q===3?U:U/255,[v,j,y,u]=zt(c).map(C),[_,F,D,z]=zt(s).map(C),Y=z-u,w=x*2-1,S=((w*Y===-1?w:w+Y/(1+w*Y))+1)/2,L=1-S,Q=(v*L+_*S)*255,H=(j*L+F*S)*255,G=(y*L+D*S)*255,Z=z*x+u*(1-x);return nn(Q,H,G,Z)}function hr(c,s){return on(c,-s)}function No(c,s){const[x,C,v,j]=zt(c);return nn(x,C,v,j-s)}function Yi(c){return rn(c)>.179}function an(c){return Yi(c)?"#000":"#fff"}function Xe(c){const[s,x,C,v]=zt(c);let j=y=>{const u=et(0,255,y).toString(16);return u.length===1?`0${u}`:u};return`#${j(s)}${j(x)}${j(C)}${v<1?j(Math.round(v*255)):""}`}const Po=["Solarized_default","Chocolate","Logseq_original","Mia_quattro","Bear","Nord","Darcula","Custom","Custom2","Custom3"],Xr=["Fira Sans (theme default)","Inter (Logseq default)","Mulish","iA Writer Quattro","OS System default"],O={Solarized_default:{fontContentName:"Fira Sans (theme default)",fontContentSize:"16px",fontUiName:"OS System default",fontUiSize:"13px",colorLightTitleText:"#009991",colorLightContentText:"#354145",colorLightContentTextBold:"#354145",colorLightContentTextItalic:"#354145",colorLightLink:"#009991",colorLightLinkExt:"#B88726",colorLightTagText:"#FEF8EC",colorLightTag:"#5B99B9",colorLightUiRSidebarBg:"#EDE4D4",colorLightUiLSidebarBg:"#EDE4D4",colorLightUiLSidebarBgAccent:"#FEF8EC",colorLightUiLSidebarText:"#354145",colorLightUiBodyBg:"#F1EBDF",colorLightContentBg:"#FEF8EC",colorLightContentPropsBg:"#F1EBDF",colorLightContentAltBg:"#F0E9DB",colorLightH1:"#354145",colorLightH2:"#354145",colorLightH3:"#354145",colorLightH4:"#354145",colorLightH5:"#354145",colorLightH6:"#354145",colorLightMarkBg:"#F9D86C",colorLightMarkText:"#354145",colorLightQuoteBg:"#D7EADD",colorLightQuoteText:"#354145",colorLightFlashcardBg:"#FEF8EC",colorLightFlashcardText:"#354145",colorLightInlineCodeText:"#354145",colorLightInlineCodeBg:"#F0E9DB",colorDarkTitleText:"#B88726",colorDarkContentText:"#AFB6B6",colorDarkContentTextBold:"#AFB6B6",colorDarkContentTextItalic:"#AFB6B6",colorDarkLink:"#B88726",colorDarkLinkExt:"#738500",colorDarkTagText:"#FFFFFF",colorDarkTag:"#3A6E88",colorDarkH1:"#AFB6B6",colorDarkH2:"#AFB6B6",colorDarkH3:"#AFB6B6",colorDarkH4:"#AFB6B6",colorDarkH5:"#AFB6B6",colorDarkH6:"#AFB6B6",colorDarkUiLSidebarBg:"#002933",colorDarkUiLSidebarBgAccent:"#00323d",colorDarkUiLSidebarText:"#AFB6B6",colorDarkUiRSidebarBg:"#002933",colorDarkUiBodyBg:"#002E38",colorDarkContentBg:"#00323d",colorDarkContentPropsBg:"#073945",colorDarkContentAltBg:"#002E38",colorDarkMarkBg:"#F9D86C",colorDarkMarkText:"#334247",colorDarkQuoteBg:"#223F3F",colorDarkQuoteText:"#AFB6B6",colorDarkFlashcardBg:"#00323d",colorDarkFlashcardText:"#AFB6B6",colorDarkInlineCodeText:"#AFB6B6",colorDarkInlineCodeBg:"#073945",backgroundURLLight:"lsp://logseq.io/logseq-awesome-styler/dist/img/bg.webp",backgroundURLDark:"lsp://logseq.io/logseq-awesome-styler/dist/img/bg.webp"},Logseq_original:{fontContentName:"Inter (Logseq default)",fontContentSize:"16px",fontUiName:"OS System default",fontUiSize:"13px",colorLightTitleText:"#433F38",colorLightContentText:"#433F38",colorLightContentTextBold:"#433F38",colorLightContentTextItalic:"#433F38",colorLightLink:"#106BA3",colorLightLinkExt:"#106BA3",colorLightTagText:"#FFFFFF",colorLightTag:"#106BA3",colorLightUiRSidebarBg:"#F7F7F7",colorLightUiLSidebarBg:"#F7F7F7",colorLightUiLSidebarBgAccent:"#FFFFFF",colorLightUiLSidebarText:"#433F38",colorLightUiBodyBg:"#FFFFFF",colorLightContentBg:"#FFFFFF",colorLightContentPropsBg:"#F7F7F7",colorLightContentAltBg:"#F7F7F7",colorLightH1:"#433F38",colorLightH2:"#433F38",colorLightH3:"#433F38",colorLightH4:"#433F38",colorLightH5:"#433F38",colorLightH6:"#433F38",colorLightMarkBg:"#FEF3AC",colorLightMarkText:"#262626",colorLightQuoteBg:"#FBFAF8",colorLightQuoteText:"#433F38",colorLightFlashcardBg:"#FFFFFF",colorLightFlashcardText:"#433F38",colorLightInlineCodeText:"#433F38",colorLightInlineCodeBg:"#F7F7F7",colorDarkTitleText:"#A4B5B6",colorDarkContentText:"#A4B5B6",colorDarkContentTextBold:"#A4B5B6",colorDarkContentTextItalic:"#A4B5B6",colorDarkLink:"#8ABBBB",colorDarkLinkExt:"#8ABBBB",colorDarkTagText:"#262626",colorDarkTag:"#8ABBBB",colorDarkUiLSidebarBg:"#023643",colorDarkUiLSidebarBgAccent:"#002B36",colorDarkUiLSidebarText:"#A4B5B6",colorDarkUiRSidebarBg:"#023643",colorDarkUiBodyBg:"#002B36",colorDarkContentBg:"#002B36",colorDarkContentPropsBg:"#083643",colorDarkContentAltBg:"#083643",colorDarkH1:"#A4B5B6",colorDarkH2:"#A4B5B6",colorDarkH3:"#A4B5B6",colorDarkH4:"#A4B5B6",colorDarkH5:"#A4B5B6",colorDarkH6:"#A4B5B6",colorDarkMarkBg:"#FEF4AE",colorDarkMarkText:"#262626",colorDarkQuoteBg:"#083643",colorDarkQuoteText:"#A4B5B6",colorDarkFlashcardBg:"#002B36",colorDarkFlashcardText:"#A4B5B6",colorDarkInlineCodeText:"#A4B5B6",colorDarkInlineCodeBg:"#01222A",backgroundURLLight:"",backgroundURLDark:""},Chocolate:{fontContentName:"Mulish",fontContentSize:"16px",fontUiName:"OS System default",fontUiSize:"13px",colorLightTitleText:"#2D3D43",colorLightContentText:"#2D3D43",colorLightContentTextBold:"#C26356",colorLightContentTextItalic:"#9A6064",colorLightLink:"#368B96",colorLightLinkExt:"#738A8C",colorLightTagText:"#E9DED8",colorLightTag:"#CA7B70",colorLightUiLSidebarBg:"#E1D1C7",colorLightUiLSidebarBgAccent:"#E9DED8",colorLightUiLSidebarText:"#2D3D43",colorLightUiRSidebarBg:"#E1D1C7",colorLightUiBodyBg:"#E3D6CE",colorLightContentBg:"#E9DED8",colorLightContentPropsBg:"#D7D5D1",colorLightContentAltBg:"#E3D6CE",colorLightH1:"#2D3D43",colorLightH2:"#2D3D43",colorLightH3:"#2D3D43",colorLightH4:"#2D3D43",colorLightH5:"#2D3D43",colorLightH6:"#2D3D43",colorLightMarkBg:"#E5D1CB",colorLightMarkText:"#C26256",colorLightQuoteBg:"#D9C5C0",colorLightQuoteText:"#9A6064",colorLightFlashcardBg:"#E9DED8",colorLightFlashcardText:"#9A6064",colorLightInlineCodeText:"#2D3D43",colorLightInlineCodeBg:"#E5D6D0",colorDarkTitleText:"#B5937D",colorDarkContentText:"#B5937D",colorDarkContentTextBold:"#D54455",colorDarkContentTextItalic:"#C26356",colorDarkLink:"#56B6C2",colorDarkLinkExt:"#73898C",colorDarkTagText:"#ECE4DF",colorDarkTag:"#B33D4B",colorDarkUiLSidebarBg:"#34282B",colorDarkUiLSidebarBgAccent:"#2B2124",colorDarkUiLSidebarText:"#B5937D",colorDarkUiRSidebarBg:"#34282B",colorDarkUiBodyBg:"#2B2124",colorDarkContentBg:"#2B2124",colorDarkContentPropsBg:"#303134",colorDarkContentAltBg:"#34282B",colorDarkH1:"#B5937D",colorDarkH2:"#B5937D",colorDarkH3:"#B5937D",colorDarkH4:"#B5937D",colorDarkH5:"#B5937D",colorDarkH6:"#B5937D",colorDarkMarkBg:"#3D2529",colorDarkMarkText:"#D54455",colorDarkQuoteBg:"#492E2E",colorDarkQuoteText:"#C26356",colorDarkFlashcardBg:"#2B2124",colorDarkFlashcardText:"#C26356",colorDarkInlineCodeText:"#B5937D",colorDarkInlineCodeBg:"#34282B",backgroundURLLight:"lsp://logseq.io/logseq-awesome-styler/dist/img/chocolate-bg-light.webp",backgroundURLDark:"lsp://logseq.io/logseq-awesome-styler/dist/img/chocolate-bg-dark.webp"},Mia_quattro:{fontContentName:"iA Writer Quattro",fontContentSize:"16px",fontUiName:"OS System default",fontUiSize:"13px",colorLightTitleText:"#1A1A1A",colorLightContentText:"#1A1A1A",colorLightContentTextBold:"#1A1A1A",colorLightContentTextItalic:"#1A1A1A",colorLightLink:"#0B82B9",colorLightLinkExt:"#0B82B9",colorLightTagText:"#1A1A1A",colorLightTag:"#F7F7F7",colorLightUiRSidebarBg:"#EAEAEA",colorLightUiLSidebarBg:"#EAEAEA",colorLightUiLSidebarBgAccent:"#F7F7F7",colorLightUiLSidebarText:"#1A1A1A",colorLightUiBodyBg:"#F7F7F7",colorLightContentBg:"#F7F7F7",colorLightContentPropsBg:"#EAEAEA",colorLightContentAltBg:"#EAEAEA",colorLightH1:"#1A1A1A",colorLightH2:"#1A1A1A",colorLightH3:"#1A1A1A",colorLightH4:"#1A1A1A",colorLightH5:"#1A1A1A",colorLightH6:"#1A1A1A",colorLightMarkBg:"#FDEB95",colorLightMarkText:"#262626",colorLightQuoteBg:"#EAEAEA",colorLightQuoteText:"#1A1A1A",colorLightFlashcardBg:"#F7F7F7",colorLightFlashcardText:"#1A1A1A",colorLightInlineCodeText:"#1A1A1A",colorLightInlineCodeBg:"#EAEAEA",colorDarkTitleText:"#CCCCCC",colorDarkContentText:"#CCCCCC",colorDarkContentTextBold:"#CCCCCC",colorDarkContentTextItalic:"#CCCCCC",colorDarkLink:"#18BDEC",colorDarkLinkExt:"#18BDEC",colorDarkTagText:"#CCCCCC",colorDarkTag:"#18181A",colorDarkUiLSidebarBg:"#27272A",colorDarkUiLSidebarBgAccent:"#18181A",colorDarkUiLSidebarText:"#CCCCCC",colorDarkUiRSidebarBg:"#27272A",colorDarkUiBodyBg:"#18181A",colorDarkContentBg:"#18181A",colorDarkContentPropsBg:"#27272A",colorDarkContentAltBg:"#27272A",colorDarkH1:"#CCCCCC",colorDarkH2:"#CCCCCC",colorDarkH3:"#CCCCCC",colorDarkH4:"#CCCCCC",colorDarkH5:"#CCCCCC",colorDarkH6:"#CCCCCC",colorDarkMarkBg:"#FCE386",colorDarkMarkText:"#262626",colorDarkQuoteBg:"#27272A",colorDarkQuoteText:"#CCCCCC",colorDarkFlashcardBg:"#18181A",colorDarkFlashcardText:"#CCCCCC",colorDarkInlineCodeText:"#CCCCCC",colorDarkInlineCodeBg:"#27272A",backgroundURLLight:"",backgroundURLDark:""},Bear:{fontContentName:"Mulish",fontContentSize:"16px",fontUiName:"OS System default",fontUiSize:"14px",colorLightTitleText:"#2E3234",colorLightContentText:"#2E3234",colorLightContentTextBold:"#2E3234",colorLightContentTextItalic:"#2E3234",colorLightLink:"#CF4444",colorLightLinkExt:"#CF4444",colorLightTagText:"#FFFFFF",colorLightTag:"#A3A3A3",colorLightUiRSidebarBg:"#FBFBFB",colorLightUiLSidebarBg:"#2E3234",colorLightUiLSidebarBgAccent:"#CF4444",colorLightUiLSidebarText:"#CFCFCF",colorLightUiBodyBg:"#FBFBFB",colorLightContentBg:"#FBFBFB",colorLightContentPropsBg:"#F7F7F7",colorLightContentAltBg:"#FFFFFF",colorLightH1:"#2E3234",colorLightH2:"#2E3234",colorLightH3:"#2E3234",colorLightH4:"#2E3234",colorLightH5:"#2E3234",colorLightH6:"#2E3234",colorLightMarkBg:"#FEF3AC",colorLightMarkText:"#2E3234",colorLightQuoteBg:"#E4ECF8",colorLightQuoteText:"#2E3234",colorLightFlashcardBg:"#FBFBFB",colorLightFlashcardText:"#2E3234",colorLightInlineCodeText:"#2E3234",colorLightInlineCodeBg:"#FFFFFF",colorDarkTitleText:"#EFF1F5",colorDarkContentText:"#EFF1F5",colorDarkContentTextBold:"#EFF1F5",colorDarkContentTextItalic:"#EFF1F5",colorDarkLink:"#F5C662",colorDarkLinkExt:"#F5C662",colorDarkTagText:"#FFFFFF",colorDarkTag:"#7A7C7F",colorDarkUiLSidebarBg:"#1E232F",colorDarkUiLSidebarBgAccent:"#F5C662",colorDarkUiLSidebarText:"#B1BACD",colorDarkUiRSidebarBg:"#282F3E",colorDarkUiBodyBg:"#282F3E",colorDarkContentBg:"#282F3E",colorDarkContentPropsBg:"#262D3B",colorDarkContentAltBg:"#262D3B",colorDarkH1:"#EFF1F5",colorDarkH2:"#EFF1F5",colorDarkH3:"#EFF1F5",colorDarkH4:"#EFF1F5",colorDarkH5:"#EFF1F5",colorDarkH6:"#EFF1F5",colorDarkMarkBg:"#FEF3AC",colorDarkMarkText:"#262626",colorDarkQuoteBg:"#293950",colorDarkQuoteText:"#EFF1F5",colorDarkFlashcardBg:"#282F3E",colorDarkFlashcardText:"#EFF1F5",colorDarkInlineCodeText:"#EFF1F5",colorDarkInlineCodeBg:"#1E232F"},Nord:{fontContentName:"Fira Sans (theme default)",fontContentSize:"16px",fontUiName:"OS System default",fontUiSize:"13px",colorLightTitleText:"#5E81AC",colorLightContentText:"#3B4252",colorLightContentTextBold:"#3B4252",colorLightContentTextItalic:"#3B4252",colorLightLink:"#81A1C1",colorLightLinkExt:"#8FBCBB",colorLightTagText:"#ECEFF4",colorLightTag:"#5E81AC",colorLightUiLSidebarBg:"#E5E9F0",colorLightUiLSidebarText:"#3B4252",colorLightUiLSidebarBgAccent:"#81A1C1",colorLightUiRSidebarBg:"#ECEFF4",colorLightUiBodyBg:"#ECEFF4",colorLightContentBg:"#ECEFF4",colorLightContentPropsBg:"#E5E9F0",colorLightContentAltBg:"#E5E9F0",colorLightH1:"#3B4252",colorLightH2:"#3B4252",colorLightH3:"#3B4252",colorLightH4:"#3B4252",colorLightH5:"#3B4252",colorLightH6:"#3B4252",colorLightMarkBg:"#EBCB8B",colorLightMarkText:"#3B4252",colorLightQuoteBg:"#D8DEE9",colorLightQuoteText:"#3B4252",colorLightFlashcardBg:"#ECEFF4",colorLightFlashcardText:"#3B4252",colorLightInlineCodeBg:"#D8DEE9",colorLightInlineCodeText:"#3B4252",colorDarkTitleText:"#5E81AC",colorDarkContentText:"#D8DEE9",colorDarkContentTextBold:"#D8DEE9",colorDarkContentTextItalic:"#D8DEE9",colorDarkLink:"#81A1C1",colorDarkLinkExt:"#8FBCBB",colorDarkTagText:"#ECEFF4",colorDarkTag:"#5E81AC",colorDarkUiLSidebarBg:"#3B4252",colorDarkUiLSidebarText:"#D8DEE9",colorDarkUiLSidebarBgAccent:"#81A1C1",colorDarkUiRSidebarBg:"#2E3440",colorDarkUiBodyBg:"#2E3440",colorDarkContentBg:"#2E3440",colorDarkContentPropsBg:"#3B4252",colorDarkContentAltBg:"#3B4252",colorDarkH1:"#D8DEE9",colorDarkH2:"#D8DEE9",colorDarkH3:"#D8DEE9",colorDarkH4:"#D8DEE9",colorDarkH5:"#D8DEE9",colorDarkH6:"#D8DEE9",colorDarkMarkBg:"#EBCB8B",colorDarkMarkText:"#3B4252",colorDarkQuoteBg:"#4C566A",colorDarkQuoteText:"#D8DEE9",colorDarkFlashcardBg:"#2E3440",colorDarkFlashcardText:"#D8DEE9",colorDarkInlineCodeBg:"#3B4252",colorDarkInlineCodeText:"#D8DEE9",backgroundURLLight:"",backgroundURLDark:""},Darcula:{fontContentName:"OS System default",fontContentSize:"16px",fontUiName:"OS System default",fontUiSize:"13px",colorLightTitleText:"#C13F8E",colorLightContentText:"#282A36",colorLightContentTextBold:"#282A36",colorLightContentTextItalic:"#282A36",colorLightLink:"#855FBF",colorLightLinkExt:"#007E90",colorLightTagText:"#F8F8F2",colorLightTag:"#A0651B",colorLightUiLSidebarBg:"#E1E1DB",colorLightUiLSidebarText:"#282A36",colorLightUiLSidebarBgAccent:"#BD93F9",colorLightUiRSidebarBg:"#F8F8F2",colorLightUiBodyBg:"#F8F8F2",colorLightContentBg:"#F8F8F2",colorLightContentPropsBg:"#EAEAE5",colorLightContentAltBg:"#EAEAE5",colorLightH1:"#C13F8E",colorLightH2:"#C13F8E",colorLightH3:"#C13F8E",colorLightH4:"#C13F8E",colorLightH5:"#C13F8E",colorLightH6:"#C13F8E",colorLightMarkBg:"#F1FA8C",colorLightMarkText:"#282A36",colorLightQuoteBg:"#B6BCCE",colorLightQuoteText:"#f8f8f2",colorLightFlashcardBg:"#F8F8F2",colorLightFlashcardText:"#282A36",colorLightInlineCodeText:"#282a36",colorLightInlineCodeBg:"#F8F8F2",colorDarkTitleText:"#FF79C6",colorDarkContentText:"#E6E6E6",colorDarkContentTextBold:"#BDBDBD",colorDarkContentTextItalic:"#E6E6E6",colorDarkLink:"#BD93F9",colorDarkLinkExt:"#7DD4E8",colorDarkTagText:"#282A36",colorDarkTag:"#FFB86C",colorDarkUiLSidebarBg:"#323545",colorDarkUiLSidebarText:"#A2ADB8",colorDarkUiLSidebarBgAccent:"#BD93F9",colorDarkUiRSidebarBg:"#323545",colorDarkUiBodyBg:"#272A36",colorDarkContentBg:"#272A36",colorDarkContentPropsBg:"#323341",colorDarkContentAltBg:"#323341",colorDarkH1:"#FF79C6",colorDarkH2:"#FF79C6",colorDarkH3:"#FF79C6",colorDarkH4:"#FF79C6",colorDarkH5:"#FF79C6",colorDarkH6:"#FF79C6",colorDarkMarkBg:"#F1FA8C",colorDarkMarkText:"#44475A",colorDarkQuoteBg:"#323341",colorDarkQuoteText:"#E6E6E6",colorDarkFlashcardBg:"#272A36",colorDarkFlashcardText:"#E6E6E6",colorDarkInlineCodeBg:"#323545",colorDarkInlineCodeText:"#E6E6E6",backgroundURLLight:"",backgroundURLDark:""}},Xi=[{key:"presetHeading",title:"Presets",description:"Built-in themes + 3 custom slots",type:"heading",default:null},{key:"presetName",title:" Built-in presets are read-only!",description:'(press ">>" button to copy values from predefined preset to your "Custom (1,2,3)")',type:"enum",enumPicker:"select",enumChoices:Po,default:"Solarized_default"},{key:"presetCustom",title:"Custom theme configuration",description:"",type:"object",default:O.Solarized_default},{key:"presetCustom2",title:"Custom2 theme configuration",description:"",type:"object",default:O.Solarized_default},{key:"presetCustom3",title:"Custom3 theme configuration",description:"",type:"object",default:O.Solarized_default},{key:"fontHeading",title:"Font",description:"",type:"heading",default:null},{key:"fontContentName",title:"Content font name",description:"",type:"enum",enumPicker:"select",enumChoices:Xr,default:O.Solarized_default.fontContentName},{key:"fontContentSize",title:"Content font size",description:"",type:"string",default:O.Solarized_default.fontContentSize},{key:"fontUiName",title:"UI font name",description:"",type:"enum",enumPicker:"select",enumChoices:Xr,default:O.Solarized_default.fontUiName},{key:"fontUiSize",title:"UI font size",description:"",type:"string",default:O.Solarized_default.fontUiSize},{key:"colorLightHeading",title:"Colors",description:"light mode (switch to dark to see it`s settings)",type:"heading",default:null},{key:"colorLightUiLSidebarBg",title:"Left sidebar background",description:"",type:"string",default:O.Solarized_default.colorLightUiLSidebarBg},{key:"colorLightUiLSidebarText",title:"Left sidebar text",description:"",type:"string",default:O.Solarized_default.colorLightUiLSidebarText},{key:"colorLightUiLSidebarBgAccent",title:"Left sidebar accent",description:"",type:"string",default:O.Solarized_default.colorLightUiLSidebarBgAccent},{key:"colorLightUiRSidebarBg",title:"Right sidebar background",description:"",type:"string",default:O.Solarized_default.colorLightUiRSidebarBg},{key:"colorLightUiBodyBg",title:"Body bg",description:"",type:"string",default:O.Solarized_default.colorLightUiBodyBg},{key:"colorLightContentBg",title:"Content bg",description:"",type:"string",default:O.Solarized_default.colorLightContentBg},{key:"colorLightContentPropsBg",title:"Props bg",description:"",type:"string",default:O.Solarized_default.colorLightContentPropsBg},{key:"colorLightContentAltBg",title:"References bg",description:"",type:"string",default:O.Solarized_default.colorLightContentAltBg},{key:"colorLightTitleText",title:"Page title",description:"",type:"string",default:O.Solarized_default.colorLightTitleText},{key:"colorLightContentText",title:"Text",description:"",type:"string",default:O.Solarized_default.colorLightContentText},{key:"colorLightContentTextBold",title:"Bold",description:"",type:"string",default:O.Solarized_default.colorLightContentTextBold},{key:"colorLightContentTextItalic",title:"Italic",description:"",type:"string",default:O.Solarized_default.colorLightContentTextItalic},{key:"colorLightLink",title:"Link (internal)",description:"",type:"string",default:O.Solarized_default.colorLightLink},{key:"colorLightLinkExt",title:"Link (external)",description:"",type:"string",default:O.Solarized_default.colorLightLinkExt},{key:"colorLightTagText",title:"Tag text",description:"",type:"string",default:O.Solarized_default.colorLightTagText},{key:"colorLightTag",title:"Tag bg",description:"",type:"string",default:O.Solarized_default.colorLightTag},{key:"colorLightH1",title:"H1",description:"",type:"string",default:O.Solarized_default.colorLightH1},{key:"colorLightH2",title:"H2",description:"",type:"string",default:O.Solarized_default.colorLightH2},{key:"colorLightH3",title:"H3",description:"",type:"string",default:O.Solarized_default.colorLightH3},{key:"colorLightH4",title:"H4",description:"",type:"string",default:O.Solarized_default.colorLightH4},{key:"colorLightH5",title:"H5",description:"",type:"string",default:O.Solarized_default.colorLightH5},{key:"colorLightH6",title:"H6",description:"",type:"string",default:O.Solarized_default.colorLightH6},{key:"colorLightMarkBg",title:"Highlight bg",description:"",type:"string",default:O.Solarized_default.colorLightMarkBg},{key:"colorLightMarkText",title:"Highlight text",description:"",type:"string",default:O.Solarized_default.colorLightMarkText},{key:"colorLightQuoteBg",title:"Quote bg",description:"",type:"string",default:O.Solarized_default.colorLightQuoteBg},{key:"colorLightQuoteText",title:"Quote text",description:"",type:"string",default:O.Solarized_default.colorLightQuoteText},{key:"colorLightFlashcardBg",title:"Flashcard bg",description:"",type:"string",default:O.Solarized_default.colorLightFlashcardBg},{key:"colorLightFlashcardText",title:"Flashcard text",description:"",type:"string",default:O.Solarized_default.colorLightFlashcardText},{key:"colorLightInlineCodeBg",title:"Code bg",description:"",type:"string",default:O.Solarized_default.colorLightInlineCodeBg},{key:"colorLightInlineCodeText",title:"Code text",description:"",type:"string",default:O.Solarized_default.colorLightInlineCodeText},{key:"colorDarkHeading",title:"Colors",description:"dark mode (switch to light to see it`s settings)",type:"heading",default:null},{key:"colorDarkUiLSidebarBg",title:"Left sidebar background",description:"",type:"string",default:O.Solarized_default.colorDarkUiLSidebarBg},{key:"colorDarkUiLSidebarText",title:"Left sidebar text",description:"",type:"string",default:O.Solarized_default.colorDarkUiLSidebarText},{key:"colorDarkUiLSidebarBgAccent",title:"Left sidebar accent",description:"",type:"string",default:O.Solarized_default.colorDarkUiLSidebarBgAccent},{key:"colorDarkUiRSidebarBg",title:"Right sidebar background",description:"",type:"string",default:O.Solarized_default.colorDarkUiRSidebarBg},{key:"colorDarkUiBodyBg",title:"Body bg",description:"",type:"string",default:O.Solarized_default.colorDarkUiBodyBg},{key:"colorDarkContentBg",title:"Content bg",description:"",type:"string",default:O.Solarized_default.colorDarkContentBg},{key:"colorDarkContentPropsBg",title:"Props bg",description:"",type:"string",default:O.Solarized_default.colorDarkContentPropsBg},{key:"colorDarkContentAltBg",title:"References bg",description:"",type:"string",default:O.Solarized_default.colorDarkContentAltBg},{key:"colorDarkTitleText",title:"Page title",description:"",type:"string",default:O.Solarized_default.colorDarkTitleText},{key:"colorDarkContentText",title:"Text",description:"",type:"string",default:O.Solarized_default.colorDarkContentText},{key:"colorDarkContentTextBold",title:"Bold",description:"",type:"string",default:O.Solarized_default.colorDarkContentTextBold},{key:"colorDarkContentTextItalic",title:"Italic",description:"",type:"string",default:O.Solarized_default.colorDarkContentTextItalic},{key:"colorDarkLink",title:"Link (internal)",description:"",type:"string",default:O.Solarized_default.colorDarkLink},{key:"colorDarkLinkExt",title:"Link (external)",description:"",type:"string",default:O.Solarized_default.colorDarkLinkExt},{key:"colorDarkTagText",title:"Tag text",description:"",type:"string",default:O.Solarized_default.colorDarkTagText},{key:"colorDarkTag",title:"Tag bg",description:"",type:"string",default:O.Solarized_default.colorDarkTag},{key:"colorDarkH1",title:"H1",description:"",type:"string",default:O.Solarized_default.colorDarkH1},{key:"colorDarkH2",title:"H2",description:"",type:"string",default:O.Solarized_default.colorDarkH2},{key:"colorDarkH3",title:"H3",description:"",type:"string",default:O.Solarized_default.colorDarkH3},{key:"colorDarkH4",title:"H4",description:"",type:"string",default:O.Solarized_default.colorDarkH4},{key:"colorDarkH5",title:"H5",description:"",type:"string",default:O.Solarized_default.colorDarkH5},{key:"colorDarkH6",title:"H6",description:"",type:"string",default:O.Solarized_default.colorDarkH6},{key:"colorDarkMarkBg",title:"Highlight bg",description:"",type:"string",default:O.Solarized_default.colorDarkMarkBg},{key:"colorDarkMarkText",title:"Highlight text",description:"",type:"string",default:O.Solarized_default.colorDarkMarkText},{key:"colorDarkQuoteBg",title:"Quote bg",description:"",type:"string",default:O.Solarized_default.colorDarkQuoteBg},{key:"colorDarkQuoteText",title:"Quote text",description:"",type:"string",default:O.Solarized_default.colorDarkQuoteText},{key:"colorDarkFlashcardBg",title:"Flashcard bg",description:"",type:"string",default:O.Solarized_default.colorDarkFlashcardBg},{key:"colorDarkFlashcardText",title:"Flashcard text",description:"",type:"string",default:O.Solarized_default.colorDarkFlashcardText},{key:"colorDarkInlineCodeBg",title:"Code bg",description:"",type:"string",default:O.Solarized_default.colorDarkInlineCodeBg},{key:"colorDarkInlineCodeText",title:"Code text",description:"",type:"string",default:O.Solarized_default.colorDarkInlineCodeText},{key:"backgroundHeading",title:"Background image",description:"switch to light/dark to see it`s own settings",type:"heading",default:null},{key:"backgroundURLLight",title:"Background URL (set empty to disable feature)",description:"",type:"string",default:O.Solarized_default.backgroundURLLight},{key:"backgroundURLDark",title:"Background URL (set empty to disable feature)",description:"",type:"string",default:O.Solarized_default.backgroundURLDark},{key:"bannersPluginHeading",title:"Banners plugin support",description:"Install plugin https://github.com/yoyurec/logseq-banners-plugin",type:"heading",default:null},{key:"bannersAsBackground",title:"",description:"Use banner image as blurred background?",type:"boolean",default:!1},{key:"bannersIconGlow",title:"",description:"Add glow to banner icon?",type:"boolean",default:!1},{key:"sizeHeading",title:"Sizes",description:"",type:"heading",default:null},{key:"contentMaxWidth",title:"Content max width (px, %, vw)",description:"",type:"string",default:"1100px"},{key:"contentWideMaxWidth",title:"Content max width in wide mode (in px, %, vw)",description:"",type:"string",default:"100%"},{key:"leftSidebarWidth",title:"Left sidebar width (in px, %, vw)",description:"",type:"string",default:"250px"},{key:"rightSidebarWidth",title:"Right sidebar width (in px, %, vw)",description:"",type:"string",default:"420px"},{key:"otherHeading",title:"Other",description:"",type:"heading",default:null},{key:"featureUpdaterEnabled",title:"",description:"Enable new version notifier on app load?",type:"boolean",default:!0}],sn=()=>{f.isThemeChosen&&(ea(),ia(),ra())},ea=()=>{f.pluginConfig.presetName==="Custom"||f.pluginConfig.presetName==="Custom2"||f.pluginConfig.presetName==="Custom3"?ta():oa()},ta=()=>{const c=ce.querySelector(`.panel-wrap[data-id="${f.pluginID}"]`);if(!c)return!1;const s=c.querySelectorAll('.desc-item:not([data-key*="Width"]):not([data-key*="banners"]) :is(input, select)');if(s.length)for(let x=0;x<s.length;x++){const C=s[x];C.disabled=!1}},oa=()=>{const c=ce.querySelector(`.panel-wrap[data-id="${f.pluginID}"]`);if(!c)return!1;const s=c.querySelectorAll('.desc-item:not([data-key*="Width"]):not([data-key*="banners"]) :is(input, select)');if(s.length)for(let C=0;C<s.length;C++){const v=s[C];v.disabled=!0}const x=c.querySelector('[data-key="presetName"] .form-select');x.disabled=!1},ra=()=>{const c=ce.querySelector('.panel-wrap[data-id="logseq-awesome-styler"]');if(!c)return;if(c.getElementsByClassName("color-input-helper").length)return!1;const x=en.getAttribute("data-theme")||"";f.themeMode=x.charAt(0).toUpperCase()+x.slice(1);const C=c.querySelectorAll(`.desc-item.as-input[data-key^="color${f.themeMode}"]`);if(C.length)for(let v=0;v<C.length;v++){const j=C[v],y=j.getAttribute("data-key")||"",u=j.getElementsByTagName("input")[0];if(u.classList.add("color-input-helper"),Ho(u),f.pluginConfig.presetName!=="Custom"&&f.pluginConfig.presetName!=="Custom2"&&f.pluginConfig.presetName!=="Custom3")continue;u.addEventListener("keyup",F=>{const D=F.target;Ho(D)}),u.addEventListener("change",F=>{const D=F.target;Ho(D)});const _=parent.Pickr.create({el:u,theme:"monolith",position:"bottom-end",useAsButton:!0,autoReposition:!0,adjustableNumbers:!0,components:{hue:!0,opacity:!1,interaction:{input:!0,hex:!0,hsla:!0}}});_.on("show",()=>{_.setColor(u.value)}),_.on("change",F=>{const D=F.toHEXA().toString();u.value=D,Ho(u),logseq.updateSettings({[y]:D})})}},Ho=c=>{const s=c.value;c.style.backgroundColor=s,c.style.color=an(s)},na=c=>{const s=c.currentTarget;if(!s)return;const x=ce.querySelector('.desc-item[data-key="presetName"] .form-select');if(!x)return;const C=O[x.value],v=s.getAttribute("data-dest"),j=`preset${v}`,y={};y[j]=C,f.isPredefinedPresetClonedToCustom=!0,logseq.updateSettings(y),logseq.updateSettings({presetName:v})},ia=()=>{if(f.pluginConfig.presetName!=="Custom"||f.pluginConfig.presetName!=="Custom2"||f.pluginConfig.presetName!=="Custom3"){if(ce.querySelector(`.panel-wrap[data-id="${f.pluginID}"] .preset-clone-button`))return;const s=ce.querySelector('.desc-item[data-key="presetName"] .form-select');if(!s)return;s?.insertAdjacentHTML("afterend",`
            <button data-dest="Custom" class="button preset-clone-button" title="Clone preset values to your Custom preset and switch to it">
                <i class="ti ti-chevrons-right"></i> to 1st
            </button>
            <button data-dest="Custom2" class="button preset-clone-button" title="Clone preset values to your Custom2 preset and switch to it">
                <i class="ti ti-chevrons-right"></i> to 2nd
            </button>
            <button data-dest="Custom3" class="button preset-clone-button" title="Clone preset values to your Custom3 preset and switch to it">
                <i class="ti ti-chevrons-right"></i> to 3rd
            </button>
            `);const x=[...ce.querySelectorAll(`.panel-wrap[data-id="${f.pluginID}"] .preset-clone-button`)];if(x.length)for(let C=0;C<x.length;C++)x[C].addEventListener("click",na)}};let yr,ln,br,cn,vr,un;const aa=()=>{da(),ga(),fa(),ha(),ya()},sa=()=>{pa(),ma()},la=c=>{for(let s=0;s<c.length;s++){const x=c[s],C=x.addedNodes[0],v=x.removedNodes[0];C&&C.childNodes.length&&(C.querySelector("#settings.cp__settings-main")&&(de.dataset[f.isLsSettingsOpenedAttr]=""),C.querySelector(".cp__plugins-page")&&(de.dataset[f.isLsPluginsOpenedAttr]=""),C.querySelector('.panel-wrap[data-id="logseq-awesome-styler"]')&&(de.dataset[f.isAwStSettingsPopupOpenedAttr]="",setTimeout(()=>{sn()},500))),v&&v.childNodes.length&&(v.querySelector("#settings.cp__settings-main")&&delete de.dataset[f.isLsSettingsOpenedAttr],v.querySelector(".cp__plugins-page")&&delete de.dataset[f.isLsPluginsOpenedAttr],v.querySelector('.panel-wrap[data-id="logseq-awesome-styler"]')&&delete de.dataset[f.isAwStSettingsPopupOpenedAttr])}},ca=c=>{for(let s=0;s<c.length;s++){const x=c[s],C=x.addedNodes[0],v=x.removedNodes[0];C&&C.childNodes.length&&C.classList.contains("is-sub-modal")&&ba(),v&&v.childNodes.length&&v.classList.contains("is-sub-modal")&&va()}},ua=c=>{for(let s=0;s<c.length;s++){const v=c[s].addedNodes[0].parentElement;v&&v.dataset.id==="logseq-awesome-styler"&&setTimeout(()=>{sn()},500)}},da=()=>{ln={childList:!0},yr=new MutationObserver(la)},ga=()=>{const c=ce.querySelector(".ui__modal-panel");c&&yr.observe(c,ln)},pa=()=>{yr.disconnect()},fa=()=>{cn={childList:!0},br=new MutationObserver(ca)},ha=()=>{const c=ce.querySelector(".theme-inner");c&&br.observe(c,cn)},ma=()=>{br.disconnect()},ya=()=>{un={childList:!0,subtree:!0},vr=new MutationObserver(ua)},ba=()=>{const c=ce.querySelector(".ui__modal.is-sub-modal");c&&vr.observe(c,un)},va=()=>{vr.disconnect()},ka=async()=>{Ca(),wa()},Ca=()=>{f.isPresetWrittenToSettings=!0,f.pluginConfig.presetName.startsWith("Custom")?logseq.updateSettings(f.pluginConfig[`preset${f.pluginConfig.presetName}`]):logseq.updateSettings(O[f.pluginConfig.presetName]),delete de.dataset.awstPreset,de.dataset.awstPreset=f.pluginConfig.presetName},_a=c=>{f.isSettingsItemWrittenToCustomPreset=!0,logseq.updateSettings({[`preset${f.pluginConfig.presetName}`]:c})},wa=()=>{if(f.isLsSettingsOpenedAttr in de.dataset){const c=ce.querySelector(".is-sub-modal .ui__modal-close"),s=ce.querySelector(`.settings-plugin-item[data-id="${f.pluginID}"]`);if(!s)return;const x=ce.querySelectorAll(`.settings-plugin-list .settings-plugin-item:not([data-id="${f.pluginID}"])`);if(x.length>0)x[0].click(),setTimeout(()=>{s.click()},100);else{c.click();const C=ce.querySelector('.settings-menu-link[data-id="plugins"]');setTimeout(()=>{C.click()},100),setTimeout(()=>{s.click()},100)}}f.isLsPluginsOpenedAttr in de.dataset&&(ce.querySelector(".is-sub-modal .ui__modal-close").click(),logseq.showSettingsUI()),f.isAwStSettingsPopupOpenedAttr in de.dataset&&(ce.querySelector(".ui__modal:not(.is-sub-modal) .ui__modal-close").click(),logseq.showSettingsUI())},xa=()=>{const c=en.getAttribute("data-theme")||"",s=c.charAt(0).toUpperCase()+c.slice(1);f.themeMode=s;const x=f.pluginConfig[`color${s}UiLSidebarBg`],C=f.pluginConfig[`color${s}UiRSidebarBg`];rn(x)<.2?de.dataset.awstLsidebarIsDark="":delete de.dataset.awstLsidebarIsDark;const v=f.pluginConfig[`backgroundURL${s}`];v?de.dataset.awstBgImage="":delete de.dataset.awstBgImage;let j="";switch(f.pluginConfig.fontContentName){case"Fira Sans (theme default)":j="--awSt-font-fira-sans";break;case"iA Writer Quattro":j="--awSt-font-aiwriter-quattro";break;case"Mulish":j="--awSt-font-mulish";break;case"Inter (Logseq default)":j="--awSt-font-default-inter";break;case"OS System default":j="--awSt-font-os-system";break;default:j="--awSt-font-fira-sans"}let y="";switch(f.pluginConfig.fontUiName){case"Fira Sans (theme default)":y="--awSt-font-fira-sans";break;case"iA Writer Quattro":y="--awSt-font-aiwriter-quattro";break;case"Mulish":y="--awSt-font-mulish";break;case"Inter (Logseq default)":y="--awSt-font-default-inter";break;case"OS System default":y="--awSt-font-os-system";break;default:y="--awSt-font-fira-sans"}f.pluginConfig.bannersAsBackground?de.dataset.awstBannersAsBg="":delete de.dataset.awstBannersAsBg;let u="";return f.pluginConfig.bannersIconGlow||(u="--awSt-banner-iconGlow: none;"),`
        :root {
            /* colors */

            --awSt-ui-lsidebar-bg-user: ${x};
            --awSt-ui-lsidebar-bg-accent-user: ${f.pluginConfig[`color${s}UiLSidebarBgAccent`]};
            --awSt-ui-lsidebar-text-hover-user: ${Xe(an(f.pluginConfig[`color${s}UiLSidebarBgAccent`]))};
            --awSt-ui-lsidebar-text-user: ${f.pluginConfig[`color${s}UiLSidebarText`]};

            --awSt-ui-rsidebar-bg-user: ${C};

            --awSt-ui-body-bg-user: ${f.pluginConfig[`color${s}UiBodyBg`]};

            --awSt-content-bg-alt-0-user: ${Xe(on(f.pluginConfig[`color${s}ContentAltBg`],.02))};
            --awSt-content-bg-alt-user: ${f.pluginConfig[`color${s}ContentAltBg`]};
            --awSt-content-bg-alt-2-user: ${Xe(hr(f.pluginConfig[`color${s}ContentAltBg`],.02))};
            --awSt-content-bg-alt-3-user: ${Xe(hr(f.pluginConfig[`color${s}ContentAltBg`],.04))};

            --awSt-content-bg-user: ${f.pluginConfig[`color${s}ContentBg`]};
            --awSt-content-props-bg-user: ${f.pluginConfig[`color${s}ContentPropsBg`]};

            --awSt-title-text-user: ${f.pluginConfig[`color${s}TitleText`]};
            --awSt-content-text-user: ${f.pluginConfig[`color${s}ContentText`]};
            --awSt-content-text-alt-user: ${Xe(hr(f.pluginConfig[`color${s}ContentText`],.2))};
            --awSt-content-text-op-user: ${Xe(No(f.pluginConfig[`color${s}ContentText`],.85))};
            --awSt-ui-scroll-user: ${Xe(No(f.pluginConfig[`color${s}Link`],.75))};

            --awSt-content-text-bold-user: ${f.pluginConfig[`color${s}ContentTextBold`]};
            --awSt-content-text-italic-user: ${f.pluginConfig[`color${s}ContentTextItalic`]};

            --awSt-link-user: ${f.pluginConfig[`color${s}Link`]};
            --awSt-link-lighter-user: ${Xe(No(f.pluginConfig[`color${s}Link`],.85))};
            --awSt-link-ext-user: ${f.pluginConfig[`color${s}LinkExt`]};
            --awSt-link-ext-lighter-user: ${Xe(No(f.pluginConfig[`color${s}LinkExt`],.85))};
            --awSt-tag-bg-user: ${f.pluginConfig[`color${s}Tag`]};
            --awSt-tag-text-user: ${f.pluginConfig[`color${s}TagText`]};

            --awSt-mark-bg-user: ${f.pluginConfig[`color${s}MarkBg`]};
            --awSt-mark-text-user: ${f.pluginConfig[`color${s}MarkText`]};
            --awSt-quote-bg-user: ${f.pluginConfig[`color${s}QuoteBg`]};
            --awSt-quote-text-user: ${f.pluginConfig[`color${s}QuoteText`]};
            --awSt-inline-code-text-user: ${f.pluginConfig[`color${s}InlineCodeText`]};
            --awSt-inline-code-bg-user: ${f.pluginConfig[`color${s}InlineCodeBg`]};

            --awSt-flashcard-bg-user: ${f.pluginConfig[`color${s}FlashcardBg`]};
            --awSt-flashcard-text-user: ${f.pluginConfig[`color${s}FlashcardText`]};

            --awSt-selected-user: ${Xe(Ki(f.pluginConfig[`color${s}ContentBg`],f.pluginConfig[`color${s}Link`],.2))};

            --awSt-h1-user: ${f.pluginConfig[`color${s}H1`]};
            --awSt-h2-user: ${f.pluginConfig[`color${s}H2`]};
            --awSt-h3-user: ${f.pluginConfig[`color${s}H3`]};
            --awSt-h4-user: ${f.pluginConfig[`color${s}H4`]};
            --awSt-h5-user: ${f.pluginConfig[`color${s}H5`]};
            --awSt-h6-user: ${f.pluginConfig[`color${s}H6`]};


            /* fonts */
            --awSt-content-font-user: var(${j});
            --awSt-content-font-size: ${f.pluginConfig.fontContentSize};
            --awSt-ui-font-user: var(${y});
            --awSt-ui-font-size: ${f.pluginConfig.fontUiSize};

            /* bg */
            --awSt-bg-url: url('${v}');
            /* banners */
            ${u}
            /* sizes */
            --awSt-content-max-width: ${f.pluginConfig.contentMaxWidth};
            --ls-main-content-max-width-wide: ${f.pluginConfig.contentWideMaxWidth};
            --ls-left-sidebar-width: ${f.pluginConfig.leftSidebarWidth};
            --ls-right-sidebar-width: ${f.pluginConfig.rightSidebarWidth};
        }
    `},Sa=`.ui__modal .ui__modal-panel>.absolute{z-index:10}html[data-theme=dark] .ui__modal .ui__button{opacity:.8!important}html[data-theme=dark] .ui__modal .ui__button:hover{opacity:.9!important}.cp__plugins-settings-inner>.edit-file{z-index:1}.settings-modal .heading-item{border-color:var(--ls-link-text-color);padding-bottom:3px;clear:both}.settings-modal .heading-item h2{color:var(--ls-link-text-color)}.settings-modal .desc-item{position:relative;padding:8px;margin:0 12px}.settings-modal .desc-item+.desc-item{border-top:1px solid #88888850}.settings-modal .desc-item :is(h2,strong){font-weight:500!important}.settings-modal .desc-item>.form-control{padding:0}.settings-modal .form-input:not(.color-input-helper){font-size:.9em;background-color:var(--ls-primary-background-color)!important}.settings-modal .form-input:focus{border-color:transparent;background-color:none;box-shadow:0 0 4px var(--ls-link-text-color)}.settings-modal .form-checkbox{top:2px;margin-right:6px;background-color:var(--ls-link-text-color)}.settings-modal .form-checkbox:hover{transform:none}.settings-modal .form-radio{color:var(--ls-link-text-color);background-color:var(--ls-link-text-color)}.settings-modal .form-radio:focus{box-shadow:none}.settings-modal .form-select:focus{border-color:transparent;background-color:var(--ls-primary-background-color);box-shadow:0 0 4px var(--ls-link-text-color)}.settings-modal .form-select option{background-color:var(--ls-primary-background-color);color:var(--ls-primary-text-color)}.settings-modal .desc-item>h2 :is(code,.ls-icon-caret-right){display:none}.settings-modal .desc-item .wrap .pl-1{padding:0}.settings-modal .heading-item small:empty,.settings-modal .desc-item small:empty{display:none}[data-is-ls-settings-opened] .ui__modal,[data-is-awst-settings-popup-opened] .ui__modal{justify-content:flex-end!important}[data-is-ls-settings-opened] .ui__modal-overlay>div,[data-is-awst-settings-popup-opened] .ui__modal-overlay>div{opacity:0}.cp__settings-inner>aside ul>li.active,.cp__settings-inner>aside ul>li:hover{background-color:var(--ls-primary-background-color)}.cp__settings-inner aside strong{color:var(--ls-primary-text-color)}.cp__settings-inner aside a:hover strong{color:var(--ls-link-text-hover-color)}.dark-theme .panel-wrap[data-id=logseq-awesome-styler] :is(.heading-item,.desc-item)[data-key*=light],.dark-theme .panel-wrap[data-id=logseq-awesome-styler] :is(.heading-item,.desc-item)[data-key*=Light]{display:none}.light-theme .panel-wrap[data-id=logseq-awesome-styler] :is(.heading-item,.desc-item)[data-key*=dark],.light-theme .panel-wrap[data-id=logseq-awesome-styler] :is(.heading-item,.desc-item)[data-key*=Dark]{display:none}.panel-wrap[data-id=logseq-awesome-styler] [data-key^=presetCustom]{display:none}.panel-wrap[data-id=logseq-awesome-styler] [data-key=presetName] small{display:block}.panel-wrap[data-id=logseq-awesome-styler] [data-key=presetName] .form-select{float:left}.panel-wrap[data-id=logseq-awesome-styler] .preset-clone-button{margin:3px 0 0 6px;display:inline-block;border:1px solid #88888850;font-size:var(--awSt-ui-text-size)}.panel-wrap[data-id=logseq-awesome-styler] .preset-clone-button .ti{font-size:var(--awSt-content-font-size)}body[data-awst-preset^=Custom] .panel-wrap[data-id=logseq-awesome-styler] .preset-clone-button{display:none}.cp__settings-inner>article{overflow:unset}.panel-wrap[data-id=logseq-awesome-styler]{transform:translateZ(0)}.panel-wrap[data-id=logseq-awesome-styler] .desc-item.as-input[data-key^=color] .form-control{width:140px!important}.panel-wrap[data-id=logseq-awesome-styler] .color-input-helper{width:90px!important;cursor:pointer;border:1px solid currentColor;text-transform:uppercase}.panel-wrap[data-id=logseq-awesome-styler] .pcr-app[data-theme=monolith]{width:270px}.panel-wrap[data-id=logseq-awesome-styler] :is(input,select):disabled{cursor:not-allowed}.settings-modal .form-select{width:200px!important}.panel-wrap[data-id=logseq-awesome-styler] :is([data-key^="fontContentName"],[data-key^="fontContentSize"],[data-key^="fontUiName"],[data-key^="fontUiSize"]){float:left;width:40%;margin:0!important}.panel-wrap[data-id=logseq-awesome-styler] [data-key^=fontUiName]{clear:both}.panel-wrap[data-id=logseq-awesome-styler] :is(.desc-item[data-key^="colorLight"],.desc-item[data-key^="colorDark"]){width:106px;float:left;margin:0}.panel-wrap[data-id=logseq-awesome-styler] :is(.desc-item[data-key^="colorLight"],.desc-item[data-key^="colorDark"]) small{display:none}.panel-wrap[data-id=logseq-awesome-styler] :is(.desc-item[data-key="colorLightUiBodyBg"],.desc-item[data-key="colorDarkUiBodyBg"],.desc-item[data-key="colorLightTitleText"],.desc-item[data-key="colorDarkTitleText"],.desc-item[data-key="colorLightLink"],.desc-item[data-key="colorDarkLink"],.desc-item[data-key="colorLightH1"],.desc-item[data-key="colorDarkH1"],.desc-item[data-key="colorLightMarkBg"],.desc-item[data-key="colorDarkMarkBg"],.desc-item[data-key="colorLightQuoteBg"],.desc-item[data-key="colorDarkQuoteBg"],.desc-item[data-key="colorLightFlashcardBg"],.desc-item[data-key="colorDarkFlashcardBg"],.desc-item[data-key="colorLightInlineCodeBg"],.desc-item[data-key="colorDarkInlineCodeBg"]){clear:both}.panel-wrap[data-id=logseq-awesome-styler] .desc-item:not([data-key^="color"]){margin:0 12px 0 32px}.panel-wrap[data-id=logseq-awesome-styler] .heading-item h2:before,.panel-wrap[data-id=logseq-awesome-styler] .desc-item[data-key] small:before{display:inline-block;margin-right:4px;font-family:tabler-icons;font-size:16px;font-weight:400}.panel-wrap[data-id=logseq-awesome-styler] .heading-item h2:before{font-size:22px;line-height:0;transform:translateY(3px)}.panel-wrap[data-id=logseq-awesome-styler] .desc-item[data-key] small:before{transform:translateY(1px)}.panel-wrap[data-id=logseq-awesome-styler] .heading-item[data-key=presetHeading] h2:before{content:"\\ebcb"}.panel-wrap[data-id=logseq-awesome-styler] .heading-item[data-key=fontHeading] h2:before{content:"\\ebc5"}.panel-wrap[data-id=logseq-awesome-styler] .heading-item[data-key=colorLightHeading] h2:before{content:"\\eb30";margin-top:24px}.panel-wrap[data-id=logseq-awesome-styler] .heading-item[data-key=colorDarkHeading] h2:before{content:"\\eaf8";margin-top:24px}.panel-wrap[data-id=logseq-awesome-styler] .heading-item[data-key=backgroundHeading] h2:before{content:"\\eb0a";margin-top:24px}.panel-wrap[data-id=logseq-awesome-styler] .heading-item[data-key=bannersPluginHeading] h2:before{content:"\\ead7"}.panel-wrap[data-id=logseq-awesome-styler] .heading-item[data-key=sizeHeading] h2:before{content:"\\ee7b"}.panel-wrap[data-id=logseq-awesome-styler] .heading-item[data-key=otherHeading] h2:before{content:"\\ea03"}body:not([data-awst-theme]) .panel-wrap[data-id=logseq-awesome-styler]:before{content:'\\26a0  Switch to "Awesome Styler" theme to enable settings'}body:not([data-awst-theme]) .panel-wrap[data-id=logseq-awesome-styler] .cp__plugins-settings-inner{display:none}
`,La=()=>{logseq.useSettingsSchema(Xi),f.pluginConfig=logseq.settings,logseq.provideStyle({key:"awSt-settings-css",style:Sa})},Ba=()=>{ce.head.querySelector('style[data-injected-style^="awSt-settings-css"]')?.remove()},Da=async(c,s)=>{if(f.oldPluginConfig={...s},f.pluginConfig={...c},f.isSettingsItemWrittenToCustomPreset){f.isSettingsItemWrittenToCustomPreset=!1;return}if(f.isPredefinedPresetClonedToCustom){f.isPredefinedPresetClonedToCustom=!1;return}if(f.isPresetWrittenToSettings){f.isPresetWrittenToSettings=!1;return}const x=ji(f.oldPluginConfig,f.pluginConfig);x.length&&(x.includes("presetName")?ka():f.pluginConfig.presetName.startsWith("Custom")&&_a({[x[0]]:c[x[0]]}),setTimeout(()=>{dn()},500))},dn=async()=>{const c=xa();logseq.provideStyle({key:"awSt-vars-css",style:c}),setTimeout(()=>{const s=Mi();zi("logseq-awesome-styler_iframe","awSt-main-vars",s),de.classList.contains("is-awUi-enabled")&&logseq.App.invokeExternalPlugin("logseq-awesome-ui.models.onThemeChangedCallback")},500)},Ta=async()=>{ce.head.querySelector('style[data-injected-style^="awSt-vars-css"]')?.remove(),tn("logseq-awesome-styler_iframe","awSt-main-vars")},Fa=()=>{const c=document.getElementById("app"),s=document.getElementById("app-inner");document.getElementById("app-settings-btn").addEventListener("click",Ea),document.querySelector(".awSt-presets")?.remove();const C=document.createElement("div");C.classList.add("awSt-presets");for(let v=0;v<Po.length;++v){const j=Po[v],y=document.createElement("a");y.classList.add("awSt-presets__item"),j===f.pluginConfig.presetName&&y.classList.add("chosen"),y.id=j,y.textContent=j.replace("_"," "),C.appendChild(y)}s.appendChild(C),c.addEventListener("click",Aa)},Aa=c=>{const s=c.target;s.classList.contains("awSt-presets__item")&&logseq.updateSettings({presetName:s.id}),gn()},Ea=()=>{logseq.showSettingsUI()},Ia=()=>{if(!f.isThemeChosen){Oa();return}Ua(),Fa(),logseq.showMainUI()},Oa=()=>{parent.window.logseq.api.show_themes(),logseq.UI.showMsg('Choose "Awesome Styler" theme first!',"warning",{timeout:5e3})},gn=async()=>{logseq.hideMainUI()},ja=()=>{logseq.isMainUIVisible?gn():Ia()},Ua=()=>{const c=ce.getElementById("awSt-presets-button");if(c){const s=c.getBoundingClientRect(),x=document.getElementById("app-inner");Object.assign(x.style,{top:`${s.top+40}px`,left:`${s.left-140}px`,height:`${Po.length*36+38}px`})}},za=`[data-pid=logseq-awesome-styler]{z-index:999!important}
`,Ma=async()=>{de.classList.add(f.isPluginEnabled),Na(),hn()&&pn()},$a=async()=>{de.classList.remove(f.isPluginEnabled),Ha(),sa(),fn()},Na=async()=>{La(),Pa(),logseq.provideModel({togglePresetsPanel:ja}),qa(),logseq.provideStyle({key:"awSt-plugin-css",style:za}),f.pluginConfig.featureUpdaterEnabled&&setTimeout(()=>{Ui()},8e3),logseq.App.onThemeChanged(()=>{mn()}),logseq.App.onThemeModeChanged(()=>{Wa()}),logseq.onSettingsChanged((c,s)=>{Da(c,s)}),logseq.beforeunload(async()=>{$a()})},Ha=()=>{Ba(),ce.head.querySelector('style[data-injected-style^="awSt-plugin-css"]')?.remove()},Pa=()=>{const c=`lsp://logseq.io/${f.pluginID}/dist/assets/awesomeStylerExt.css`,s={name:"Awesome Styler Light",url:c,description:"Light customizable theme theme with extra stuff",mode:"light",pid:f.pluginID},x={name:"Awesome Styler Dark",url:c,description:"Dark customizable theme theme with extra stuff",mode:"dark",pid:f.pluginID};logseq.provideTheme(s),logseq.provideTheme(x)},qa=()=>{logseq.App.registerUIItem("toolbar",{key:"AwesomeStyler",template:`
                <button
                class="button" id="awSt-presets-button"
                data-on-click="togglePresetsPanel" data-rect>
                    <span class="ti ti-palette"></span>
                </button>
            `})},pn=async()=>{f.isThemeChosen=!0,de.dataset[f.isAwesomeStylerThemeAttr]="",de.dataset.awstPreset=f.pluginConfig.presetName,setTimeout(()=>{dn()},500),setTimeout(()=>{aa(),Ra()},1e3)},fn=()=>{f.isThemeChosen=!1,delete de.dataset[f.isAwesomeStylerThemeAttr],delete de.dataset.awstPreset,Ta()},Ra=()=>{const c=ce.createElement("script");c.type="text/javascript",c.async=!0,c.src=`lsp://logseq.io/${f.pluginID}/dist/assets/awesomeStylerExt.js`,ce.getElementsByTagName("head")[0].appendChild(c)},hn=()=>!!ce.querySelector(`link[href="lsp://logseq.io/${f.pluginID}/dist/assets/awesomeStylerExt.css"]`),mn=()=>{hn()?(console.log("AwesomeStyler: switching to its theme detected!"),pn()):fn()},Wa=()=>{mn()};const Qa=async()=>{console.log("AwesomeStyler: plugin loaded"),Ma()};logseq.ready(Qa).catch(null);
//# sourceMappingURL=awesomeStylerInt.js.map
