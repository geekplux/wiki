(function(){
shadow$provide[586]=function(wa,W,Ta,I){function q(w,B,C){var a,K={},r=null,h=null;void 0!==C&&(r=""+C);void 0!==B.key&&(r=""+B.key);void 0!==B.ref&&(h=B.ref);for(a in B)t.call(B,a)&&!d.hasOwnProperty(a)&&(K[a]=B[a]);if(w&&w.defaultProps)for(a in B=w.defaultProps,B)void 0===K[a]&&(K[a]=B[a]);return{$$typeof:R,type:w,key:r,ref:h,props:K,_owner:A.current}}W(19);wa=W(22);var R=60103;I.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(W=Symbol.for,R=W("react.element"),I.Fragment=W("react.fragment"));
var A=wa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t=Object.prototype.hasOwnProperty,d={key:!0,ref:!0,__self:!0,__source:!0};I.jsx=q;I.jsxs=q};
shadow$provide[588]=function(wa,W,Ta,I){Ta.exports=W(586)};
shadow$provide[589]=function(wa,W,Ta,I){function q(rc){for(var Ed="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+rc,wd=1;wd<arguments.length;wd++)Ed+="\x26args[]\x3d"+encodeURIComponent(arguments[wd]);return"Minified React error #"+rc+"; visit "+Ed+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function R(rc){if(null==rc)return null;if("function"===typeof rc)return rc.displayName||rc.name||null;if("string"===typeof rc)return rc;
switch(rc){case M:return"Fragment";case aa:return"Portal";case D:return"Profiler";case S:return"StrictMode";case ba:return"Suspense";case H:return"SuspenseList"}if("object"===typeof rc)switch(rc.$$typeof){case P:return(rc.displayName||"Context")+".Consumer";case O:return(rc._context.displayName||"Context")+".Provider";case da:var Ed=rc.render;Ed=Ed.displayName||Ed.name||"";return rc.displayName||(""!==Ed?"ForwardRef("+Ed+")":"ForwardRef");case ja:return R(rc.type);case ca:return R(rc._render);case N:Ed=
rc._payload;rc=rc._init;try{return R(rc(Ed))}catch(wd){}}return null}function A(rc,Ed){for(var wd=rc._threadCount|0;wd<=Ed;wd++)rc[wd]=rc._currentValue2,rc._threadCount=wd+1}function t(rc,Ed,wd,Zd){if(Zd&&(Zd=rc.contextType,"object"===typeof Zd&&null!==Zd))return A(Zd,wd),Zd[wd];if(rc=rc.contextTypes){wd={};for(var ud in rc)wd[ud]=Ed[ud];Ed=wd}else Ed=ya;return Ed}function d(rc){if(Ea.call(Xa,rc))return!0;if(Ea.call(Oa,rc))return!1;if(Ua.test(rc))return Xa[rc]=!0;Oa[rc]=!0;return!1}function w(rc,
Ed,wd,Zd){if(null!==wd&&0===wd.type)return!1;switch(typeof Ed){case "function":case "symbol":return!0;case "boolean":if(Zd)return!1;if(null!==wd)return!wd.acceptsBooleans;rc=rc.toLowerCase().slice(0,5);return"data-"!==rc&&"aria-"!==rc;default:return!1}}function B(rc,Ed,wd,Zd){if(null===Ed||"undefined"===typeof Ed||w(rc,Ed,wd,Zd))return!0;if(Zd)return!1;if(null!==wd)switch(wd.type){case 3:return!Ed;case 4:return!1===Ed;case 5:return isNaN(Ed);case 6:return isNaN(Ed)||1>Ed}return!1}function C(rc,Ed,
wd,Zd,ud,Qd,od){this.acceptsBooleans=2===Ed||3===Ed||4===Ed;this.attributeName=Zd;this.attributeNamespace=ud;this.mustUseProperty=wd;this.propertyName=rc;this.type=Ed;this.sanitizeURL=Qd;this.removeEmptyString=od}function a(rc){return rc[1].toUpperCase()}function K(rc){if("boolean"===typeof rc||"number"===typeof rc)return""+rc;rc=""+rc;var Ed=db.exec(rc);if(Ed){var wd="",Zd,ud=0;for(Zd=Ed.index;Zd<rc.length;Zd++){switch(rc.charCodeAt(Zd)){case 34:Ed="\x26quot;";break;case 38:Ed="\x26amp;";break;case 39:Ed=
"\x26#x27;";break;case 60:Ed="\x26lt;";break;case 62:Ed="\x26gt;";break;default:continue}ud!==Zd&&(wd+=rc.substring(ud,Zd));ud=Zd+1;wd+=Ed}rc=ud!==Zd?wd+rc.substring(ud,Zd):wd}return rc}function r(rc,Ed){var wd=Ma.hasOwnProperty(rc)?Ma[rc]:null,Zd;if(Zd="style"!==rc)Zd=null!==wd?0===wd.type:!(2<rc.length)||"o"!==rc[0]&&"O"!==rc[0]||"n"!==rc[1]&&"N"!==rc[1]?!1:!0;if(Zd||B(rc,Ed,wd,!1))return"";if(null!==wd){rc=wd.attributeName;Zd=wd.type;if(3===Zd||4===Zd&&!0===Ed)return rc+'\x3d""';wd.sanitizeURL&&
(Ed=""+Ed);return rc+'\x3d"'+(K(Ed)+'"')}return d(rc)?rc+'\x3d"'+(K(Ed)+'"'):""}function h(rc,Ed){return rc===Ed&&(0!==rc||1/rc===1/Ed)||rc!==rc&&Ed!==Ed}function k(){if(null===oa)throw Error(q(321));return oa}function f(){if(0<Ab)throw Error(q(312));return{memoizedState:null,queue:null,next:null}}function v(){null===sa?null===Ca?(Aa=!1,Ca=sa=f()):(Aa=!0,sa=Ca):null===sa.next?(Aa=!1,sa=sa.next=f()):(Aa=!0,sa=sa.next);return sa}function x(rc,Ed,wd,Zd){for(;Ja;)Ja=!1,Ab+=1,sa=null,wd=rc(Ed,Zd);L();
return wd}function L(){oa=null;Ja=!1;Ca=null;Ab=0;sa=Sa=null}function z(rc,Ed){return"function"===typeof Ed?Ed(rc):Ed}function u(rc,Ed,wd){oa=k();sa=v();if(Aa){var Zd=sa.queue;Ed=Zd.dispatch;if(null!==Sa&&(wd=Sa.get(Zd),void 0!==wd)){Sa.delete(Zd);Zd=sa.memoizedState;do Zd=rc(Zd,wd.action),wd=wd.next;while(null!==wd);sa.memoizedState=Zd;return[Zd,Ed]}return[sa.memoizedState,Ed]}rc=rc===z?"function"===typeof Ed?Ed():Ed:void 0!==wd?wd(Ed):Ed;sa.memoizedState=rc;rc=sa.queue={last:null,dispatch:null};
rc=rc.dispatch=l.bind(null,oa,rc);return[sa.memoizedState,rc]}function m(rc,Ed){oa=k();sa=v();Ed=void 0===Ed?null:Ed;if(null!==sa){var wd=sa.memoizedState;if(null!==wd&&null!==Ed){var Zd=wd[1];a:if(null===Zd)Zd=!1;else{for(var ud=0;ud<Zd.length&&ud<Ed.length;ud++)if(!Na(Ed[ud],Zd[ud])){Zd=!1;break a}Zd=!0}if(Zd)return wd[0]}}rc=rc();sa.memoizedState=[rc,Ed];return rc}function l(rc,Ed,wd){if(!(25>Ab))throw Error(q(301));if(rc===oa)if(Ja=!0,rc={action:wd,next:null},null===Sa&&(Sa=new Map),wd=Sa.get(Ed),
void 0===wd)Sa.set(Ed,rc);else{for(Ed=wd;null!==Ed.next;)Ed=Ed.next;Ed.next=rc}}function J(){}function Y(rc){switch(rc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F(rc){if(void 0===rc||null===rc)return rc;var Ed="";E.Children.forEach(rc,function(wd){null!=wd&&(Ed+=wd)});return Ed}function ha(rc,Ed){if(void 0===rc)throw Error(q(152,R(Ed)||"Component"));}function T(rc,Ed,wd){function Zd(od,
Td){var Nb=Td.prototype&&Td.prototype.isReactComponent,hc=t(Td,Ed,wd,Nb),Zb=[],sb=!1,ob={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Zb)return null},enqueueReplaceState:function(te,td){sb=!0;Zb=[td]},enqueueSetState:function(te,td){if(null===Zb)return null;Zb.push(td)}};if(Nb){if(Nb=new Td(od.props,hc,ob),"function"===typeof Td.getDerivedStateFromProps){var cc=Td.getDerivedStateFromProps.call(null,od.props,Nb.state);null!=cc&&(Nb.state=Z({},Nb.state,cc))}}else if(oa={},
Nb=Td(od.props,hc,ob),Nb=x(Td,od.props,Nb,hc),null==Nb||null==Nb.render){rc=Nb;ha(rc,Td);return}Nb.props=od.props;Nb.context=hc;Nb.updater=ob;ob=Nb.state;void 0===ob&&(Nb.state=ob=null);if("function"===typeof Nb.UNSAFE_componentWillMount||"function"===typeof Nb.componentWillMount)if("function"===typeof Nb.componentWillMount&&"function"!==typeof Td.getDerivedStateFromProps&&Nb.componentWillMount(),"function"===typeof Nb.UNSAFE_componentWillMount&&"function"!==typeof Td.getDerivedStateFromProps&&Nb.UNSAFE_componentWillMount(),
Zb.length){ob=Zb;var vc=sb;Zb=null;sb=!1;if(vc&&1===ob.length)Nb.state=ob[0];else{cc=vc?ob[0]:Nb.state;var Uc=!0;for(vc=vc?1:0;vc<ob.length;vc++){var dd=ob[vc];dd="function"===typeof dd?dd.call(Nb,cc,od.props,hc):dd;null!=dd&&(Uc?(Uc=!1,cc=Z({},cc,dd)):Z(cc,dd))}Nb.state=cc}}else Zb=null;rc=Nb.render();ha(rc,Td);if("function"===typeof Nb.getChildContext&&(od=Td.childContextTypes,"object"===typeof od)){var Md=Nb.getChildContext(),ce;for(ce in Md)if(!(ce in od))throw Error(q(108,R(Td)||"Unknown",ce));
}Md&&(Ed=Z({},Ed,Md))}for(;E.isValidElement(rc);){var ud=rc,Qd=ud.type;if("function"!==typeof Qd)break;Zd(ud,Qd)}return{child:rc,context:Ed}}var Z=W(19),E=W(22),aa=60106,M=60107,S=60108,D=60114,O=60109,P=60110,da=60112,ba=60113,H=60120,ja=60115,N=60116,ca=60121,ia=60117,ea=60119,qa=60129,za=60131;"function"===typeof Symbol&&Symbol.for&&(wa=Symbol.for,aa=wa("react.portal"),M=wa("react.fragment"),S=wa("react.strict_mode"),D=wa("react.profiler"),O=wa("react.provider"),P=wa("react.context"),da=wa("react.forward_ref"),
ba=wa("react.suspense"),H=wa("react.suspense_list"),ja=wa("react.memo"),N=wa("react.lazy"),ca=wa("react.block"),ia=wa("react.fundamental"),ea=wa("react.scope"),qa=wa("react.debug_trace_mode"),za=wa("react.legacy_hidden"));wa=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var ya={},Ha=new Uint16Array(16);for(W=0;15>W;W++)Ha[W]=W+1;Ha[15]=0;var Ua=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ea=Object.prototype.hasOwnProperty,Oa={},Xa={},Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(rc){Ma[rc]=new C(rc,0,!1,rc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(rc){var Ed=rc[0];Ma[Ed]=new C(Ed,1,!1,rc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(rc){Ma[rc]=
new C(rc,2,!1,rc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(rc){Ma[rc]=new C(rc,2,!1,rc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(rc){Ma[rc]=new C(rc,3,!1,rc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(rc){Ma[rc]=new C(rc,3,!0,rc,null,!1,!1)});["capture","download"].forEach(function(rc){Ma[rc]=new C(rc,4,!1,rc,null,!1,!1)});["cols","rows","size","span"].forEach(function(rc){Ma[rc]=new C(rc,6,!1,rc,null,!1,!1)});["rowSpan","start"].forEach(function(rc){Ma[rc]=new C(rc,5,!1,rc.toLowerCase(),null,!1,!1)});var fb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(rc){var Ed=
rc.replace(fb,a);Ma[Ed]=new C(Ed,1,!1,rc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(rc){var Ed=rc.replace(fb,a);Ma[Ed]=new C(Ed,1,!1,rc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(rc){var Ed=rc.replace(fb,a);Ma[Ed]=new C(Ed,1,!1,rc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(rc){Ma[rc]=new C(rc,1,!1,rc.toLowerCase(),null,!1,!1)});
Ma.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(rc){Ma[rc]=new C(rc,1,!1,rc.toLowerCase(),null,!0,!0)});var db=/["'&<>]/,Na="function"===typeof Object.is?Object.is:h,oa=null,Ca=null,sa=null,Aa=!1,Ja=!1,Sa=null,Ab=0,jb=null,Ob={readContext:function(rc){var Ed=jb.threadID;A(rc,Ed);return rc[Ed]},useContext:function(rc){k();var Ed=jb.threadID;A(rc,Ed);return rc[Ed]},useMemo:m,useReducer:u,useRef:function(rc){oa=
k();sa=v();var Ed=sa.memoizedState;return null===Ed?(rc={current:rc},sa.memoizedState=rc):Ed},useState:function(rc){return u(z,rc)},useLayoutEffect:function(){},useCallback:function(rc,Ed){return m(function(){return rc},Ed)},useImperativeHandle:J,useEffect:J,useDebugValue:J,useDeferredValue:function(rc){k();return rc},useTransition:function(){k();return[function(rc){rc()},!1]},useOpaqueIdentifier:function(){return(jb.identifierPrefix||"")+"R:"+(jb.uniqueID++).toString(36)},useMutableSource:function(rc,
Ed){k();return Ed(rc._source)}},Xb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},jc=Z({menuitem:!0},Xb),Pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pb=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(rc){pb.forEach(function(Ed){Ed=Ed+rc.charAt(0).toUpperCase()+rc.substring(1);Pa[Ed]=Pa[rc]})});var qb=/([A-Z])/g,$b=/^ms-/,Jc=E.Children.toArray,
bd=wa.ReactCurrentDispatcher,Pc={listing:!0,pre:!0,textarea:!0},Fb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,yc={},Vc={},jd=Object.prototype.hasOwnProperty,Ld={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Kd=function(){function rc(wd,Zd,ud){E.isValidElement(wd)?wd.type!==M?wd=[wd]:(wd=wd.props.children,wd=E.isValidElement(wd)?[wd]:Jc(wd)):wd=Jc(wd);wd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:wd,childIndex:0,context:ya,footer:""};
var Qd=Ha[0];if(0===Qd){var od=Ha;Qd=od.length;var Td=2*Qd;if(!(65536>=Td))throw Error(q(304));var Nb=new Uint16Array(Td);Nb.set(od);Ha=Nb;Ha[0]=Qd+1;for(od=Qd;od<Td-1;od++)Ha[od]=od+1;Ha[Td-1]=0}else Ha[0]=Ha[Qd];this.threadID=Qd;this.stack=[wd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Zd;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=ud&&ud.identifierPrefix||""}
var Ed=rc.prototype;Ed.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var wd=this.threadID;Ha[wd]=Ha[0];Ha[0]=wd}};Ed.pushProvider=function(wd){var Zd=++this.contextIndex,ud=wd.type._context,Qd=this.threadID;A(ud,Qd);var od=ud[Qd];this.contextStack[Zd]=ud;this.contextValueStack[Zd]=od;ud[Qd]=wd.props.value};Ed.popProvider=function(){var wd=this.contextIndex,Zd=this.contextStack[wd],ud=this.contextValueStack[wd];this.contextStack[wd]=null;this.contextValueStack[wd]=
null;this.contextIndex--;Zd[this.threadID]=ud};Ed.clearProviders=function(){for(var wd=this.contextIndex;0<=wd;wd--)this.contextStack[wd][this.threadID]=this.contextValueStack[wd]};Ed.read=function(wd){if(this.exhausted)return null;var Zd=jb;jb=this;var ud=bd.current;bd.current=Ob;try{for(var Qd=[""],od=!1;Qd[0].length<wd;){if(0===this.stack.length){this.exhausted=!0;var Td=this.threadID;Ha[Td]=Ha[0];Ha[0]=Td;break}var Nb=this.stack[this.stack.length-1];if(od||Nb.childIndex>=Nb.children.length){var hc=
Nb.footer;""!==hc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Nb.type)this.currentSelectValue=null;else if(null!=Nb.type&&null!=Nb.type.type&&Nb.type.type.$$typeof===O)this.popProvider(Nb.type);else if(Nb.type===ba){this.suspenseDepth--;var Zb=Qd.pop();if(od){od=!1;var sb=Nb.fallbackFrame;if(!sb)throw Error(q(303));this.stack.push(sb);Qd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Qd[this.suspenseDepth]+=Zb}Qd[this.suspenseDepth]+=hc}else{var ob=Nb.children[Nb.childIndex++],
cc="";try{cc+=this.render(ob,Nb.context,Nb.domNamespace)}catch(vc){if(null!=vc&&"function"===typeof vc.then)throw Error(q(294));throw vc;}finally{}Qd.length<=this.suspenseDepth&&Qd.push("");Qd[this.suspenseDepth]+=cc}}return Qd[0]}finally{bd.current=ud,jb=Zd,L()}};Ed.render=function(wd,Zd,ud){if("string"===typeof wd||"number"===typeof wd){ud=""+wd;if(""===ud)return"";if(this.makeStaticMarkup)return K(ud);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+K(ud);this.previousWasTextNode=!0;return K(ud)}Zd=
T(wd,Zd,this.threadID);wd=Zd.child;Zd=Zd.context;if(null===wd||!1===wd)return"";if(!E.isValidElement(wd)){if(null!=wd&&null!=wd.$$typeof){ud=wd.$$typeof;if(ud===aa)throw Error(q(257));throw Error(q(258,ud.toString()));}wd=Jc(wd);this.stack.push({type:null,domNamespace:ud,children:wd,childIndex:0,context:Zd,footer:""});return""}var Qd=wd.type;if("string"===typeof Qd)return this.renderDOM(wd,Zd,ud);switch(Qd){case za:case qa:case S:case D:case H:case M:return wd=Jc(wd.props.children),this.stack.push({type:null,
domNamespace:ud,children:wd,childIndex:0,context:Zd,footer:""}),"";case ba:throw Error(q(294));case ea:throw Error(q(343));}if("object"===typeof Qd&&null!==Qd)switch(Qd.$$typeof){case da:oa={};var od=Qd.render(wd.props,wd.ref);od=x(Qd.render,wd.props,od,wd.ref);od=Jc(od);this.stack.push({type:null,domNamespace:ud,children:od,childIndex:0,context:Zd,footer:""});return"";case ja:return wd=[E.createElement(Qd.type,Z({ref:wd.ref},wd.props))],this.stack.push({type:null,domNamespace:ud,children:wd,childIndex:0,
context:Zd,footer:""}),"";case O:return Qd=Jc(wd.props.children),ud={type:wd,domNamespace:ud,children:Qd,childIndex:0,context:Zd,footer:""},this.pushProvider(wd),this.stack.push(ud),"";case P:Qd=wd.type;od=wd.props;var Td=this.threadID;A(Qd,Td);Qd=Jc(od.children(Qd[Td]));this.stack.push({type:wd,domNamespace:ud,children:Qd,childIndex:0,context:Zd,footer:""});return"";case ia:throw Error(q(338));case N:return Qd=wd.type,od=Qd._init,Qd=od(Qd._payload),wd=[E.createElement(Qd,Z({ref:wd.ref},wd.props))],
this.stack.push({type:null,domNamespace:ud,children:wd,childIndex:0,context:Zd,footer:""}),""}throw Error(q(130,null==Qd?Qd:typeof Qd,""));};Ed.renderDOM=function(wd,Zd,ud){var Qd=wd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===ud&&Y(Qd);if(!yc.hasOwnProperty(Qd)){if(!Fb.test(Qd))throw Error(q(65,Qd));yc[Qd]=!0}var od=wd.props;if("input"===Qd)od=Z({type:void 0},od,{defaultChecked:void 0,defaultValue:void 0,value:null!=od.value?od.value:od.defaultValue,checked:null!=od.checked?od.checked:od.defaultChecked});
else if("textarea"===Qd){var Td=od.value;if(null==Td){Td=od.defaultValue;var Nb=od.children;if(null!=Nb){if(null!=Td)throw Error(q(92));if(Array.isArray(Nb)){if(!(1>=Nb.length))throw Error(q(93));Nb=Nb[0]}Td=""+Nb}null==Td&&(Td="")}od=Z({},od,{value:void 0,children:""+Td})}else if("select"===Qd)this.currentSelectValue=null!=od.value?od.value:od.defaultValue,od=Z({},od,{value:void 0});else if("option"===Qd){Nb=this.currentSelectValue;var hc=F(od.children);if(null!=Nb){var Zb=null!=od.value?od.value+
"":hc;Td=!1;if(Array.isArray(Nb))for(var sb=0;sb<Nb.length;sb++){if(""+Nb[sb]===Zb){Td=!0;break}}else Td=""+Nb===Zb;od=Z({selected:void 0,children:void 0},od,{selected:Td,children:hc})}}if(Td=od){if(jc[Qd]&&(null!=Td.children||null!=Td.dangerouslySetInnerHTML))throw Error(q(137,Qd));if(null!=Td.dangerouslySetInnerHTML){if(null!=Td.children)throw Error(q(60));if(!("object"===typeof Td.dangerouslySetInnerHTML&&"__html"in Td.dangerouslySetInnerHTML))throw Error(q(61));}if(null!=Td.style&&"object"!==
typeof Td.style)throw Error(q(62));}Td=od;Nb=this.makeStaticMarkup;hc=1===this.stack.length;Zb="\x3c"+wd.type;a:if(-1===Qd.indexOf("-"))sb="string"===typeof Td.is;else switch(Qd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":sb=!1;break a;default:sb=!0}for(td in Td)if(jd.call(Td,td)){var ob=Td[td];if(null!=ob){if("style"===td){var cc=void 0,vc="",Uc="";for(cc in ob)if(ob.hasOwnProperty(cc)){var dd=
0===cc.indexOf("--"),Md=ob[cc];if(null!=Md){if(dd)var ce=cc;else if(ce=cc,Vc.hasOwnProperty(ce))ce=Vc[ce];else{var te=ce.replace(qb,"-$1").toLowerCase().replace($b,"-ms-");ce=Vc[ce]=te}vc+=Uc+ce+":";Uc=cc;dd=null==Md||"boolean"===typeof Md||""===Md?"":dd||"number"!==typeof Md||0===Md||Pa.hasOwnProperty(Uc)&&Pa[Uc]?(""+Md).trim():Md+"px";vc+=dd;Uc=";"}}ob=vc||null}cc=null;sb?Ld.hasOwnProperty(td)||(cc=td,cc=d(cc)&&null!=ob?cc+'\x3d"'+(K(ob)+'"'):""):cc=r(td,ob);cc&&(Zb+=" "+cc)}}Nb||hc&&(Zb+=' data-reactroot\x3d""');
var td=Zb;Td="";Xb.hasOwnProperty(Qd)?td+="/\x3e":(td+="\x3e",Td="\x3c/"+wd.type+"\x3e");a:{Nb=od.dangerouslySetInnerHTML;if(null!=Nb){if(null!=Nb.__html){Nb=Nb.__html;break a}}else if(Nb=od.children,"string"===typeof Nb||"number"===typeof Nb){Nb=K(Nb);break a}Nb=null}null!=Nb?(od=[],Pc.hasOwnProperty(Qd)&&"\n"===Nb.charAt(0)&&(td+="\n"),td+=Nb):od=Jc(od.children);wd=wd.type;ud=null==ud||"http://www.w3.org/1999/xhtml"===ud?Y(wd):"http://www.w3.org/2000/svg"===ud&&"foreignObject"===wd?"http://www.w3.org/1999/xhtml":
ud;this.stack.push({domNamespace:ud,type:Qd,children:od,childIndex:0,context:Zd,footer:Td});this.previousWasTextNode=!1;return td};return rc}();I.renderToNodeStream=function(){throw Error(q(207));};I.renderToStaticMarkup=function(rc,Ed){rc=new Kd(rc,!0,Ed);try{return rc.read(Infinity)}finally{rc.destroy()}};I.renderToStaticNodeStream=function(){throw Error(q(208));};I.renderToString=function(rc,Ed){rc=new Kd(rc,!1,Ed);try{return rc.read(Infinity)}finally{rc.destroy()}};I.version="17.0.2"};
shadow$provide[591]=function(wa,W,Ta,I){Ta.exports=W(589)};
shadow$provide[592]=function(wa,W,Ta,I){function q(){if(!Qp&&(Qp="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qp))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qp(wg)}function R(b,g=0){return(Ul[b[g+0]]+Ul[b[g+1]]+Ul[b[g+2]]+Ul[b[g+3]]+"-"+Ul[b[g+4]]+Ul[b[g+5]]+"-"+Ul[b[g+6]]+Ul[b[g+7]]+"-"+Ul[b[g+8]]+Ul[b[g+9]]+"-"+Ul[b[g+10]]+Ul[b[g+11]]+Ul[b[g+12]]+Ul[b[g+13]]+Ul[b[g+14]]+
Ul[b[g+15]]).toLowerCase()}function A(b){let g=0;var p=0;for(var G of b)g+=G.w*G.h,p=Math.max(p,G.w);b.sort((pa,Ga)=>Ga.h-pa.h);p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),p),h:Infinity}];let X=G=0;for(const pa of b)for(b=p.length-1;0<=b;b--){var la=p[b];if(!(pa.w>la.w||pa.h>la.h)){pa.x=la.x;pa.y=la.y;X=Math.max(X,pa.y+pa.h);G=Math.max(G,pa.x+pa.w);pa.w===la.w&&pa.h===la.h?(la=p.pop(),b<p.length&&(p[b]=la)):pa.h===la.h?(la.x+=pa.w,la.w-=pa.w):(pa.w!==la.w&&p.push({x:la.x+pa.w,y:la.y,w:la.w-
pa.w,h:pa.h}),la.y+=pa.h,la.h-=pa.h);break}}return{w:G,h:X,fill:g/(G*X)||0}}function t(b,...g){return{didIntersect:0<g.length,message:b,points:g}}function d(b,g,p=0){const G=[b[0]+g[0]/2,b[1]+g[1]/2],X=Fd.rotWith(b,G,p),la=Fd.rotWith(Fd.add(b,[g[0],0]),G,p),pa=Fd.rotWith(Fd.add(b,g),G,p);b=Fd.rotWith(Fd.add(b,[0,g[1]]),G,p);return[["top",[X,la]],["right",[la,pa]],["bottom",[pa,b]],["left",[b,X]]]}function w(b,g,p,G){const [X,la]=b,[pa,Ga]=g,[Qa,Za]=p,[eb,mb]=G;return Ga/pa!==(mb-Za)/(eb-Qa)&&(g=pa*
(mb-Za)-Ga*(eb-Qa),0!==g&&(b=((la-Za)*(eb-Qa)-(X-Qa)*(mb-Za))/g,g=((la-Za)*pa-(X-Qa)*Ga)/g,0<=b&&0<=g&&1>=g))?t("intersection",[X+b*pa,la+b*Ga]):t("no intersection")}function B(b,g,p,G,X=0){return k(p,G,X,b,g)}function C(b,g,p,G=0){const {minX:X,minY:la,width:pa,height:Ga}=p;return B(b,g,[X,la],[pa,Ga],G)}function a(b,g,p,G){var X=Fd.sub(b,p);p=Fd.sub(G,p);g=Fd.sub(g,b);G=p[0]*X[1]-p[1]*X[0];X=g[0]*X[1]-g[1]*X[0];p=p[1]*g[0]-p[0]*g[1];return 0===G||0===X?t("coincident"):0===p?t("parallel"):0!==p&&
(G/=p,X/=p,0<=G&&1>=G&&0<=X&&1>=X)?t("intersection",Fd.add(b,Fd.mul(g,G))):t("no intersection")}function K(b,g,p,G){var X=(g[0]-b[0])*(g[0]-b[0])+(g[1]-b[1])*(g[1]-b[1]),la=2*((g[0]-b[0])*(b[0]-p[0])+(g[1]-b[1])*(b[1]-p[1]));p=la*la-4*X*(p[0]*p[0]+p[1]*p[1]+b[0]*b[0]+b[1]*b[1]-2*(p[0]*b[0]+p[1]*b[1])-G*G);if(0>p)return t("outside");if(0===p)return t("tangent");G=Math.sqrt(p);p=(-la+G)/(2*X);X=(-la-G)/(2*X);if((0>p||1<p)&&(0>X||1<X))return 0>p&&0>X||1<p&&1<X?t("outside"):t("inside");la=[];0<=p&&1>=
p&&la.push(Fd.lrp(b,g,p));0<=X&&1>=X&&la.push(Fd.lrp(b,g,X));return t("intersection",...la)}function r(b,g,p,G,X,la=0){if(0===G||0===X||Fd.isEqual(b,g))return t("no intersection");G=0>G?G:-G;X=0>X?X:-X;b=Fd.sub(Fd.rotWith(b,p,-la),p);g=Fd.sub(Fd.rotWith(g,p,-la),p);var pa=Fd.sub(g,b),Ga=pa[0]*pa[0]/G/G+pa[1]*pa[1]/X/X;pa=2*b[0]*pa[0]/G/G+2*b[1]*pa[1]/X/X;const Qa=[];G=pa*pa-4*Ga*(b[0]*b[0]/G/G+b[1]*b[1]/X/X-1);0===G?Qa.push(-pa/2/Ga):0<G&&(G=Math.sqrt(G),Qa.push((-pa+G)/2/Ga),Qa.push((-pa-G)/2/Ga));
Ga=Qa.filter(Za=>0<=Za&&1>=Za).map(Za=>Fd.add(p,Fd.add(b,Fd.mul(Fd.sub(g,b),Za)))).map(Za=>Fd.rotWith(Za,p,la));return t("intersection",...Ga)}function h(b,g,p){const G=[];for(let X=1;X<p.length;X++){const la=a(b,g,p[X-1],p[X]);la&&G.push(...la.points)}return 0===G.length?t("no intersection"):t("intersection",...p)}function k(b,g,p,G,X){return d(b,g,p).reduce((la,[pa,[Ga,Qa]])=>{(Ga=w(G,X,Ga,Qa))&&la.push(t(pa,...Ga.points));return la},[]).filter(la=>la.didIntersect)}function f(b,g,p,G){return d(b,
g).reduce((X,[la,[pa,Ga]])=>{(pa=a(p,G,pa,Ga))&&X.push(t(la,...pa.points));return X},[]).filter(X=>X.didIntersect)}function v(b,g,p,G){return d(b,g).reduce((X,[la,[pa,Ga]])=>{(pa=K(pa,Ga,p,G))&&X.push(lf(pe({},pa),{message:la}));return X},[]).filter(X=>X.didIntersect)}function x(b,g,p,G,X,la=0){return d(b,g).reduce((pa,[Ga,[Qa,Za]])=>{(Qa=r(Qa,Za,p,G,X,la))&&pa.push(lf(pe({},Qa),{message:Ga}));return pa},[]).filter(pa=>pa.didIntersect)}function L(b,g,p){return d(b,g).reduce((G,[X,[la,pa]])=>{la=h(la,
pa,p);la.didIntersect&&G.push(t(X,...la.points));return G},[]).filter(G=>G.didIntersect)}function z(b,g,p){return d(b,g).reduce((G,[X,[la,pa]])=>{{const Ga=[];for(let Qa=1;Qa<p.length+1;Qa++){const Za=a(la,pa,p[Qa-1],p[Qa%p.length]);Za&&Ga.push(...Za.points)}la=0===Ga.length?t("no intersection"):t("intersection",...p)}la.didIntersect&&G.push(t(X,...la.points));return G},[]).filter(G=>G.didIntersect)}function u(b,g,p,G=0,X,la){return g===p?v(X,la,b,g):x(X,la,b,g,p,G)}function m(b,g,p){const {minX:G,
minY:X,width:la,height:pa}=b;return f([G,X],[la,pa],g,p)}function l(b){for(var g=arguments.length,p=Array(1<g?g-1:0),G=1;G<g;G++)p[G-1]=arguments[G];throw Error("number"===typeof b?"[MobX] minified error nr: "+b+(p.length?" "+p.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+b);}function J(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof wa?wa:"undefined"!==
typeof self?self:Fr}function Y(){Kc||l("Proxy not available")}function F(b){var g=!1;return function(){if(!g)return g=!0,b.apply(this,arguments)}}function ha(b){return"function"===typeof b}function T(b){switch(typeof b){case "string":case "symbol":case "number":return!0}return!1}function Z(b){return null!==b&&"object"===typeof b}function E(b){if(!Z(b))return!1;b=Object.getPrototypeOf(b);if(null==b)return!0;b=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;return"function"===typeof b&&b.toString()===
hd}function aa(b){return(b=null==b?void 0:b.constructor)?"GeneratorFunction"===b.name||"GeneratorFunction"===b.displayName?!0:!1:!1}function M(b,g,p){Da(b,g,{enumerable:!1,writable:!0,configurable:!0,value:p})}function S(b,g,p){Da(b,g,{enumerable:!1,writable:!1,configurable:!0,value:p})}function D(b,g){var p="isMobX"+b;g.prototype[p]=!0;return function(G){return Z(G)&&!0===G[p]}}function O(b){return b instanceof Map}function P(b){return b instanceof Set}function da(b){var g=Object.keys(b);if(!Ee)return g;
var p=Object.getOwnPropertySymbols(b);return p.length?[].concat(g,p.filter(function(G){return gb.propertyIsEnumerable.call(b,G)})):g}function ba(b){return null===b?null:"object"===typeof b?""+b:b}function H(b,g){return gb.hasOwnProperty.call(b,g)}function ja(b,g){for(var p=0;p<g.length;p++){var G=g[p];G.enumerable=G.enumerable||!1;G.configurable=!0;"value"in G&&(G.writable=!0);Object.defineProperty(b,G.key,G)}}function N(b,g,p){g&&ja(b.prototype,g);p&&ja(b,p);Object.defineProperty(b,"prototype",{writable:!1});
return b}function ca(){ca=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var p=arguments[g],G;for(G in p)Object.prototype.hasOwnProperty.call(p,G)&&(b[G]=p[G])}return b};return ca.apply(this,arguments)}function ia(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;ea(b,g)}function ea(b,g){ea=Object.setPrototypeOf||function(p,G){p.__proto__=G;return p};return ea(b,g)}function qa(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return b}function za(b,g){if(b){if("string"===typeof b)return ya(b,g);var p=Object.prototype.toString.call(b).slice(8,-1);"Object"===p&&b.constructor&&(p=b.constructor.name);if("Map"===p||"Set"===p)return Array.from(b);if("Arguments"===p||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return ya(b,g)}}function ya(b,g){if(null==g||g>b.length)g=b.length;for(var p=0,G=Array(g);p<g;p++)G[p]=b[p];return G}function Ha(b,g){var p="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(p)return(p=
p.call(b)).next.bind(p);if(Array.isArray(b)||(p=za(b))||g&&b&&"number"===typeof b.length){p&&(b=p);var G=0;return function(){return G>=b.length?{done:!0}:{done:!1,value:b[G++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ua(b){return Object.assign(function(g,p){Ea(g,p,b)},b)}function Ea(b,g,p){H(b,af)||M(b,af,ca({},b[af]));p.annotationType_!==Xd&&(b[af][g]=p)}function Oa(b){H(b,
af)||M(b,af,ca({},b[af]));return b[af]}function Xa(b,g,p){void 0===g&&(g=Rd);void 0===p&&(p=Rd);b=new lh(b);g!==Rd&&Nc(uD,b,g,void 0);p!==Rd&&wc(b,p);return b}function Ma(b,g,p){return Wb(b)?b:Array.isArray(b)?ug.array(b,{name:p}):E(b)?ug.object(b,void 0,{name:p}):O(b)?ug.map(b,{name:p}):P(b)?ug.set(b,{name:p}):"function"!==typeof b||dd(b)||Mc(b)?b:aa(b)?Us(b):Ts(p,b)}function fb(b){return b}function db(b,g){return{annotationType_:b,options_:g,make_:Na,extend_:oa}}function Na(b,g,p,G){var X;if(null!=
(X=this.options_)&&X.bound)return null===this.extend_(b,g,p,!1)?0:1;if(G===b.target_)return null===this.extend_(b,g,p,!1)?0:2;if(dd(p.value))return 1;b=Ca(b,this,g,p,!1);Da(G,g,b);return 2}function oa(b,g,p,G){p=Ca(b,this,g,p);return b.defineProperty_(g,p,G)}function Ca(b,g,p,G,X){var la,pa,Ga,Qa,Za,eb,mb;void 0===X&&(X=Df.safeDescriptors);G=G.value;if(null!=(la=g.options_)&&la.bound){var Lb;G=G.bind(null!=(Lb=b.proxy_)?Lb:b.target_)}return{value:Pc(null!=(pa=null==(Ga=g.options_)?void 0:Ga.name)?
pa:p.toString(),G,null!=(Qa=null==(Za=g.options_)?void 0:Za.autoAction)?Qa:!1,null!=(eb=g.options_)&&eb.bound?null!=(mb=b.proxy_)?mb:b.target_:void 0),configurable:X?b.isPlainObject_:!0,enumerable:!1,writable:X?!1:!0}}function sa(b,g){return{annotationType_:b,options_:g,make_:Aa,extend_:Ja}}function Aa(b,g,p,G){var X;if(G===b.target_)return null===this.extend_(b,g,p,!1)?0:2;if(null!=(X=this.options_)&&X.bound&&(!H(b.target_,g)||!Mc(b.target_[g]))&&null===this.extend_(b,g,p,!1))return 0;if(Mc(p.value))return 1;
b=Sa(b,this,g,p,!1,!1);Da(G,g,b);return 2}function Ja(b,g,p,G){var X;p=Sa(b,this,g,p,null==(X=this.options_)?void 0:X.bound);return b.defineProperty_(g,p,G)}function Sa(b,g,p,G,X,la){void 0===la&&(la=Df.safeDescriptors);g=G.value;Mc(g)||(g=Us(g));if(X){var pa;g=g.bind(null!=(pa=b.proxy_)?pa:b.target_);g.isMobXFlow=!0}return{value:g,configurable:la?b.isPlainObject_:!0,enumerable:!1,writable:la?!1:!0}}function Ab(b,g){return{annotationType_:b,options_:g,make_:jb,extend_:Ob}}function jb(b,g,p){return null===
this.extend_(b,g,p,!1)?0:1}function Ob(b,g,p,G){return b.defineComputedProperty_(g,ca({},this.options_,{get:p.get,set:p.set}),G)}function Xb(b,g){return{annotationType_:b,options_:g,make_:jc,extend_:Pa}}function jc(b,g,p){return null===this.extend_(b,g,p,!1)?0:1}function Pa(b,g,p,G){var X,la;return b.defineObservableProperty_(g,p.value,null!=(X=null==(la=this.options_)?void 0:la.enhancer)?X:Ma,G)}function pb(b){return{annotationType_:"true",options_:b,make_:qb,extend_:$b}}function qb(b,g,p,G){var X,
la;if(p.get)return Pg.make_(b,g,p,G);if(p.set){p=Pc(g.toString(),p.set);if(G===b.target_)return null===b.defineProperty_(g,{configurable:Df.safeDescriptors?b.isPlainObject_:!0,set:p})?0:2;Da(G,g,{configurable:!0,set:p});return 2}if(G!==b.target_&&"function"===typeof p.value){var pa;if(aa(p.value)){var Ga;return(null!=(Ga=this.options_)&&Ga.autoBind?Us.bound:Us).make_(b,g,p,G)}return(null!=(pa=this.options_)&&pa.autoBind?Ts.bound:Ts).make_(b,g,p,G)}pa=!1===(null==(X=this.options_)?void 0:X.deep)?ug.ref:
ug;if("function"===typeof p.value&&null!=(la=this.options_)&&la.autoBind){var Qa;p.value=p.value.bind(null!=(Qa=b.proxy_)?Qa:b.target_)}return pa.make_(b,g,p,G)}function $b(b,g,p,G){var X,la;if(p.get)return Pg.extend_(b,g,p,G);if(p.set)return b.defineProperty_(g,{configurable:Df.safeDescriptors?b.isPlainObject_:!0,set:Pc(g.toString(),p.set)},G);if("function"===typeof p.value&&null!=(X=this.options_)&&X.autoBind){var pa;p.value=p.value.bind(null!=(pa=b.proxy_)?pa:b.target_)}return(!1===(null==(la=
this.options_)?void 0:la.deep)?ug.ref:ug).extend_(b,g,p,G)}function Jc(b){if(!0===b.deep)var g=Ma;else{if(!1===b.deep)b=fb;else{b=b.defaultDecorator;var p;b=b?null!=(g=null==(p=b.options_)?void 0:p.enhancer)?g:Ma:Ma}g=b}return g}function bd(b,g,p){if(T(g))Ea(b,g,kf);else return Wb(b)?b:E(b)?ug.object(b,g,p):Array.isArray(b)?ug.array(b,g):O(b)?ug.map(b,g):P(b)?ug.set(b,g):"object"===typeof b&&null!==b?b:ug.box(b,g)}function Pc(b,g,p,G){function X(){a:{var la=G||this,pa=arguments,Ga=Df.trackingDerivation,
Qa=!p||!Ga;od();var Za=Df.allowStateChanges;Qa&&(rc(),Za=yc(!0));var eb=Ed(!0),mb=yD++,Lb=cu;cu=mb;try{var Vb=g.apply(la,pa);break a}catch(ec){var Pb=ec;throw ec;}finally{cu!==mb&&l(30),cu=Lb,void 0!==Pb&&(Df.suppressReactionErrors=!0),Df.allowStateChanges=Za,Df.allowStateReads=eb,Td(),Qa&&(Df.trackingDerivation=Ga),Df.suppressReactionErrors=!1}Vb=void 0}return Vb}void 0===p&&(p=!1);X.isMobxAction=!0;zD&&(yy.value=b,Object.defineProperty(X,"name",yy));return X}function Fb(b,g){b=yc(b);try{return g()}finally{Df.allowStateChanges=
b}}function yc(b){var g=Df.allowStateChanges;Df.allowStateChanges=b;return g}function Vc(b){switch(b.dependenciesState_){case Gj.UP_TO_DATE_:return!1;case Gj.NOT_TRACKING_:case Gj.STALE_:return!0;case Gj.POSSIBLY_STALE_:for(var g=Ed(!0),p=rc(),G=b.observing_,X=G.length,la=0;la<X;la++){var pa=G[la];if(et(pa)){if(Df.disableErrorBoundaries)pa.get();else try{pa.get()}catch(Ga){return Df.trackingDerivation=p,Df.allowStateReads=g,!0}if(b.dependenciesState_===Gj.STALE_)return Df.trackingDerivation=p,Df.allowStateReads=
g,!0}}wd(b);Df.trackingDerivation=p;Df.allowStateReads=g;return!1}}function jd(b,g,p){var G=Ed(!0);wd(b);b.newObserving_=Array(b.observing_.length+100);b.unboundDepsCount_=0;b.runId_=++Df.runId;var X=Df.trackingDerivation;Df.trackingDerivation=b;Df.inBatch++;if(!0===Df.disableErrorBoundaries)var la=g.call(p);else try{la=g.call(p)}catch(eb){la=new er(eb)}Df.inBatch--;Df.trackingDerivation=X;var pa=b.observing_;g=b.observing_=b.newObserving_;p=Gj.UP_TO_DATE_;X=0;for(var Ga=b.unboundDepsCount_,Qa=0;Qa<
Ga;Qa++){var Za=g[Qa];0===Za.diffValue_&&(Za.diffValue_=1,X!==Qa&&(g[X]=Za),X++);Za.dependenciesState_>p&&(p=Za.dependenciesState_)}g.length=X;b.newObserving_=null;for(Ga=pa.length;Ga--;)Qa=pa[Ga],0===Qa.diffValue_&&ud(Qa,b),Qa.diffValue_=0;for(;X--;)pa=g[X],1===pa.diffValue_&&(pa.diffValue_=0,Ga=b,pa.observers_.add(Ga),pa.lowestObserverState_>Ga.dependenciesState_&&(pa.lowestObserverState_=Ga.dependenciesState_));p!==Gj.UP_TO_DATE_&&(b.dependenciesState_=p,b.onBecomeStale_());Df.allowStateReads=
G;return la}function Ld(b){var g=b.observing_;b.observing_=[];for(var p=g.length;p--;)ud(g[p],b);b.dependenciesState_=Gj.NOT_TRACKING_}function Kd(b){var g=rc();try{return b()}finally{Df.trackingDerivation=g}}function rc(){var b=Df.trackingDerivation;Df.trackingDerivation=null;return b}function Ed(b){var g=Df.allowStateReads;Df.allowStateReads=b;return g}function wd(b){if(b.dependenciesState_!==Gj.UP_TO_DATE_){b.dependenciesState_=Gj.UP_TO_DATE_;b=b.observing_;for(var g=b.length;g--;)b[g].lowestObserverState_=
Gj.UP_TO_DATE_}}function Zd(){(Df.pendingReactions.length||Df.inBatch||Df.isRunningReactions)&&l(36);By=!0;if(iu){var b=J();0===--b.__mobxInstanceCount&&(b.__mobxGlobals=void 0);Df=new gu}}function ud(b,g){b.observers_["delete"](g);0===b.observers_.size&&Qd(b)}function Qd(b){!1===b.isPendingUnobservation_&&(b.isPendingUnobservation_=!0,Df.pendingUnobservations.push(b))}function od(){Df.inBatch++}function Td(){if(0===--Df.inBatch){0<Df.inBatch||Df.isRunningReactions||ju(ob);for(var b=Df.pendingUnobservations,
g=0;g<b.length;g++){var p=b[g];p.isPendingUnobservation_=!1;0===p.observers_.size&&(p.isBeingObserved_&&(p.isBeingObserved_=!1,p.onBUO()),p instanceof dt&&p.suspend_())}Df.pendingUnobservations=[]}}function Nb(b){var g=Df.trackingDerivation;if(null!==g)return g.runId_!==b.lastAccessedBy_&&(b.lastAccessedBy_=g.runId_,g.newObserving_[g.unboundDepsCount_++]=b,!b.isBeingObserved_&&Df.trackingContext&&(b.isBeingObserved_=!0,b.onBO())),b.isBeingObserved_;0===b.observers_.size&&0<Df.inBatch&&Qd(b);return!1}
function hc(b){b.lowestObserverState_!==Gj.STALE_&&(b.lowestObserverState_=Gj.STALE_,b.observers_.forEach(function(g){if(g.dependenciesState_===Gj.UP_TO_DATE_)g.onBecomeStale_();g.dependenciesState_=Gj.STALE_}))}function Zb(b){b.lowestObserverState_!==Gj.STALE_&&(b.lowestObserverState_=Gj.STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Gj.POSSIBLY_STALE_?g.dependenciesState_=Gj.STALE_:g.dependenciesState_===Gj.UP_TO_DATE_&&(b.lowestObserverState_=Gj.UP_TO_DATE_)}))}function sb(b){b.lowestObserverState_===
Gj.UP_TO_DATE_&&(b.lowestObserverState_=Gj.POSSIBLY_STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Gj.UP_TO_DATE_&&(g.dependenciesState_=Gj.POSSIBLY_STALE_,g.onBecomeStale_())}))}function ob(){Df.isRunningReactions=!0;for(var b=Df.pendingReactions,g=0;0<b.length;){++g===FD&&(console.error("[mobx] cycle in reaction: "+b[0]),b.splice(0));for(var p=b.splice(0),G=0,X=p.length;G<X;G++)p[G].runReaction_()}Df.isRunningReactions=!1}function cc(b){var g=ju;ju=function(p){return b(function(){return g(p)})}}
function vc(b){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Uc(b){return function(g,p){if(ha(g))return Pc(g.name||"\x3cunnamed action\x3e",g,b);if(ha(p))return Pc(g,p,b);if(T(p))return Ea(g,p,b?xy:vy);if(T(g))return Ua(db(b?"autoAction":uy,{name:g,autoAction:b}))}}function dd(b){return ha(b)&&!0===b.isMobxAction}function Md(b,g){function p(){b(Qa)}var G,X;void 0===g&&(g=sc);var la=null!=(G=null==(X=g)?void 0:X.name)?G:"Autorun";if(g.scheduler||g.delay){var pa=
ce(g),Ga=!1;var Qa=new Vr(la,function(){Ga||(Ga=!0,pa(function(){Ga=!1;Qa.isDisposed_||Qa.track(p)}))},g.onError,g.requiresObservable)}else Qa=new Vr(la,function(){this.track(p)},g.onError,g.requiresObservable);Qa.schedule_();return Qa.getDisposer_()}function ce(b){return b.scheduler?b.scheduler:b.delay?function(g){return setTimeout(g,b.delay)}:tD}function te(b,g,p){function G(){eb=!1;if(!Pb.isDisposed_){var ec=!1;Pb.track(function(){var gc=Fb(!1,function(){return b(Pb)});ec=Za||!Vb(mb,gc);Lb=mb;
mb=gc});Za&&p.fireImmediately?pa(mb,Lb,Pb):!Za&&ec&&pa(mb,Lb,Pb);Za=!1}}var X;void 0===p&&(p=sc);var la=null!=(X=p.name)?X:"Reaction",pa=pg(la,p.onError?td(p.onError,g):g),Ga=!p.scheduler&&!p.delay,Qa=ce(p),Za=!0,eb=!1,mb,Lb,Vb=p.compareStructural?qe.structural:p.equals||qe["default"],Pb=new Vr(la,function(){Za||Ga?G():eb||(eb=!0,Qa(G))},p.onError,p.requiresObservable);Pb.schedule_();return Pb.getDisposer_()}function td(b,g){return function(){try{return g.apply(this,arguments)}catch(p){b.call(this,
p)}}}function wc(b,g,p){return Nc(vD,b,g,p)}function Nc(b,g,p,G){var X="function"===typeof G?Eg(g,p):Eg(g),la=ha(G)?G:p,pa=b+"L";X[pa]?X[pa].add(la):X[pa]=new Set([la]);return function(){var Ga=X[pa];Ga&&(Ga["delete"](la),0===Ga.size&&delete X[pa])}}function Je(b){!0===b.isolateGlobalState&&Zd();var g=b.useProxies,p=b.enforceActions;void 0!==g&&(Df.useProxies="always"===g?!0:"never"===g?!1:"undefined"!==typeof Proxy);"ifavailable"===g&&(Df.verifyProxies=!0);void 0!==p&&(g="always"===p?"always":"observed"===
p,Df.enforceActions=g,Df.allowStateChanges=!0===g||"always"===g?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(G){G in b&&(Df[G]=!!b[G])});Df.allowStateReads=!Df.observableRequiresReaction;b.reactionScheduler&&cc(b.reactionScheduler)}function tc(b,g,p,G){var X=Dh(g),la=Dd(b,G)[of];od();try{ig(X).forEach(function(pa){la.extend_(pa,X[pa],p?pa in p?p[pa]:!0:!0)})}finally{Td()}return b}function Ie(b){var g=
{name:b.name_};b.observing_&&0<b.observing_.length&&(g.dependencies=Array.from(new Set(b.observing_)).map(Ie));return g}function Sb(){this.message="FLOW_CANCELLED"}function Mc(b){return!0===(null==b?void 0:b.isMobXFlow)}function Wb(b,g){return b?void 0!==g?Yd(b)?b[of].values_.has(g):!1:Yd(b)||!!b[of]||ih(b)||du(b)||et(b):!1}function fd(b){if(Yd(b))return b[of].ownKeys_();l(38)}function ue(b,g,p){b.set(g,p);return p}function me(b,g){if(null==b||"object"!==typeof b||b instanceof Date||!Wb(b))return b;
if(DD(b)||et(b))return me(b.get(),g);if(g.has(b))return g.get(b);if(kb(b)){var p=ue(g,b,Array(b.length));b.forEach(function(pa,Ga){p[Ga]=me(pa,g)});return p}if(Pq(b)){var G=ue(g,b,new Set);b.forEach(function(pa){G.add(me(pa,g))});return G}if(Up(b)){var X=ue(g,b,new Map);b.forEach(function(pa,Ga){X.set(Ga,me(pa,g))});return X}var la=ue(g,b,{});fd(b).forEach(function(pa){gb.propertyIsEnumerable.call(b,pa)&&(la[pa]=me(b[pa],g))});return la}function Fc(b,g){return me(b,new Map)}function Bb(){l("trace() is not available in production builds");
for(var b=!1,g=arguments.length,p=Array(g),G=0;G<g;G++)p[G]=arguments[G];"boolean"===typeof p[p.length-1]&&(b=p.pop());a:{switch(p.length){case 0:g=Df.trackingDerivation;break a;case 1:g=Eg(p[0]);break a;case 2:g=Eg(p[0],p[1]);break a}g=void 0}if(!g)return l("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");g.isTracing_===Ur.NONE&&console.log("[mobx.trace] '"+g.name_+"' tracing enabled");g.isTracing_=b?
Ur.BREAK:Ur.LOG}function Jd(b,g){void 0===g&&(g=void 0);od();try{return b.apply(g)}finally{Td()}}function ee(b){return void 0!==b.interceptors_&&0<b.interceptors_.length}function sd(b,g){var p=b.interceptors_||(b.interceptors_=[]);p.push(g);return F(function(){var G=p.indexOf(g);-1!==G&&p.splice(G,1)})}function pc(b,g){var p=rc();try{var G=[].concat(b.interceptors_||[]);b=0;for(var X=G.length;b<X&&((g=G[b](g))&&!g.type&&l(14),g);b++);return g}finally{Df.trackingDerivation=p}}function Ke(b){return void 0!==
b.changeListeners_&&0<b.changeListeners_.length}function cg(b,g){var p=b.changeListeners_||(b.changeListeners_=[]);p.push(g);return F(function(){var G=p.indexOf(g);-1!==G&&p.splice(G,1)})}function cf(b,g){var p=rc();if(b=b.changeListeners_){b=b.slice();for(var G=0,X=b.length;G<X;G++)b[G](g);Df.trackingDerivation=p}}function Ag(b,g,p){var G=Dd(b,p)[of];od();try{var X;null!=(X=g)?X:g=Oa(b);ig(g).forEach(function(la){return G.make_(la,g[la])})}finally{Td()}return b}function ab(b,g,p,G){void 0===p&&(p=
"ObservableArray");void 0===G&&(G=!1);Y();g=new Mv(p,g,G,!1);S(g.values_,of,g);p=new Proxy(g.values_,qD);g.proxy_=p;b&&b.length&&(G=yc(!0),g.spliceWithArray_(0,0,b),Df.allowStateChanges=G);return p}function Cb(b,g){"function"===typeof Array.prototype[b]&&(bu[b]=g(b))}function cb(b){return function(){var g=this[of];g.atom_.reportObserved();g=g.dehanceValues_(g.values_);return g[b].apply(g,arguments)}}function Db(b){return function(g,p){var G=this,X=this[of];X.atom_.reportObserved();return X.dehanceValues_(X.values_)[b](function(la,
pa){return g.call(p,la,pa,G)})}}function ic(b){return function(){var g=this,p=this[of];p.atom_.reportObserved();p=p.dehanceValues_(p.values_);var G=arguments[0];arguments[0]=function(X,la,pa){return G(X,la,pa,g)};return p[b].apply(p,arguments)}}function kb(b){return Z(b)&&pD(b[of])}function id(b){if(O(b)||Up(b))return b;if(Array.isArray(b))return new Map(b);if(E(b)){var g=new Map,p;for(p in b)g.set(p,b[p]);return g}return l(21,b)}function Dd(b,g){var p;if(H(b,of))return b;var G=null!=(p=null==g?void 0:
g.name)?p:"ObservableObject";p=ly;var X=new Map;G=String(G);var la;var pa=g?null!=(la=g.defaultDecorator)?la:pb(g):void 0;g=new p(b,X,G,pa);M(b,of,g);return b}function le(b){return ky[b]||(ky[b]={get:function(){return this[of].getObservablePropValue_(b)},set:function(g){return this[of].setObservablePropValue_(b,g)}})}function Yd(b){return Z(b)?kD(b[of]):!1}function Ve(b){return{enumerable:!1,configurable:!0,get:function(){return this[of].get_(b)},set:function(g){this[of].set_(b,g)}}}function ve(b){if(b>
Jv){for(var g=Jv;g<b+100;g++)Da(Kv.prototype,""+g,Ve(g));Jv=b}}function hf(b,g,p){return new Kv(b,g,p)}function Eg(b,g){if("object"===typeof b&&null!==b){if(kb(b))return void 0!==g&&l(23),b[of].atom_;if(Pq(b))return b[of];if(Up(b)){if(void 0===g)return b.keysAtom_;var p=b.data_.get(g)||b.hasMap_.get(g);p||l(25,g,zb(b));return p}if(Yd(b)){if(!g)return l(26);(p=b[of].values_.get(g))||l(27,g,zb(b));return p}if(ih(b)||et(b)||du(b))return b}else if(ha(b)&&du(b[of]))return b[of];l(28)}function vf(b,g){b||
l(29);if(void 0!==g)return vf(Eg(b,g));if(ih(b)||et(b)||du(b)||Up(b)||Pq(b))return b;if(b[of])return b[of];l(24,b)}function zb(b,g){if(void 0!==g)b=Eg(b,g);else{if(dd(b))return b.name;b=Yd(b)||Up(b)||Pq(b)?vf(b):Eg(b)}return b.name_}function ta(b,g,p){void 0===p&&(p=-1);return ra(b,g,p)}function ra(b,g,p,G,X){if(b===g)return 0!==b||1/b===1/g;if(null==b||null==g)return!1;if(b!==b)return g!==g;var la=typeof b;if("function"!==la&&"object"!==la&&"object"!=typeof g)return!1;la=gy.call(b);if(la!==gy.call(g))return!1;
switch(la){case "[object RegExp]":case "[object String]":return""+b===""+g;case "[object Number]":return+b!==+b?+g!==+g:0===+b?1/+b===1/g:+b===+g;case "[object Date]":case "[object Boolean]":return+b===+g;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(b)===Symbol.valueOf.call(g);case "[object Map]":case "[object Set]":0<=p&&p++}b=Ia(b);g=Ia(g);la="[object Array]"===la;if(!la){if("object"!=typeof b||"object"!=typeof g)return!1;var pa=b.constructor,Ga=g.constructor;if(pa!==
Ga&&!(ha(pa)&&pa instanceof pa&&ha(Ga)&&Ga instanceof Ga)&&"constructor"in b&&"constructor"in g)return!1}if(0===p)return!1;0>p&&(p=-1);G=G||[];X=X||[];for(pa=G.length;pa--;)if(G[pa]===b)return X[pa]===g;G.push(b);X.push(g);if(la){pa=b.length;if(pa!==g.length)return!1;for(;pa--;)if(!ra(b[pa],g[pa],p-1,G,X))return!1}else{la=Object.keys(b);pa=la.length;if(Object.keys(g).length!==pa)return!1;for(;pa--;)if(Ga=la[pa],!H(g,Ga)||!ra(b[Ga],g[Ga],p-1,G,X))return!1}G.pop();X.pop();return!0}function Ia(b){return kb(b)?
b.slice():O(b)||Up(b)||P(b)||Pq(b)?Array.from(b.entries()):b}function bb(b){b[Symbol.iterator]=Ib;return b}function Ib(){return this}function mc(b,g){const p=new Set(g),G=Object.values(b),X=new Set(G.filter(la=>p.has(la.toId)||p.has(la.fromId)));b=X.size;for(g=-1;0!==g;)X.forEach(la=>{la=la.fromId;for(const pa of G)pa.fromId===la&&X.add(pa),pa.toId===la&&X.add(pa)}),g=X.size-b,b=X.size;return Array.from(X.values())}function Rc(b,g,p,G,X,la,pa,Ga){if(X=g.getBindingPoint(X,la,pa,Ga))return{id:G,type:"line",
fromId:b.id,toId:g.id,handleId:p,point:ne.toFixed(X.point),distance:X.distance}}function nd(b,g){const p=b.getCenter(),G=g.getCenter();var X=gl();X=lf(pe({},Qs.defaultProps),{id:X,type:Qs.id,parentId:b.props.parentId,point:p});b=Rc(X,b,"start",gl(),p,p,ne.uni(ne.sub(G,p)),!1);g=Rc(X,g,"end",gl(),G,G,ne.uni(ne.sub(p,G)),!1);return b&&g?(X.handles.start.point=[0,0],X.handles.end.point=ne.sub(G,p),X.handles.start.bindingId=b.id,X.handles.end.bindingId=g.id,[X,[b,g]]):null}function xe(){return new LD}
function Ue(){return new WeakMap}function Nf(b){if(!b)return Pv(null);var g=b.constructor;if(g===Object)return b===Object.prototype?{}:Pv(b);if(~MD.call(g).indexOf("[native code]"))try{return new g}catch(p){}return Pv(b)}function kg(b){var g="";b.global&&(g+="g");b.ignoreCase&&(g+="i");b.multiline&&(g+="m");b.unicode&&(g+="u");b.sticky&&(g+="y");return g}function Lf(b){return b.flags}function zf(b){b=OD.call(b);return b.substring(8,b.length-1)}function Xf(b){return b[Symbol.toStringTag]||zf(b)}function Tg(b){return Py(b).concat(aw(b))}
function ni(b,g,p){for(var G=YD(b),X=0,la=G.length,pa,Ga;X<la;++X)if(pa=G[X],"callee"!==pa&&"caller"!==pa)if(Ga=Qy(b,pa)){Ga.get||Ga.set||(Ga.value=p.copier(Ga.value,p));try{JD(g,pa,Ga)}catch(Qa){g[pa]=Ga.value}}else g[pa]=p.copier(b[pa],p);return g}function wh(b,g){var p=new g.Constructor;g.cache.set(b,p);b.forEach(function(G,X){p.set(X,g.copier(G,g))});return p}function ti(b,g){var p=Nf(g.prototype);g.cache.set(b,p);for(var G in b)Zy.call(b,G)&&(p[G]=g.copier(b[G],g));return p}function ei(b,g){var p=
Nf(g.prototype);g.cache.set(b,p);for(var G in b)Zy.call(b,G)&&(p[G]=g.copier(b[G],g));G=aw(b);for(var X=0,la=G.length,pa;X<la;++X)pa=G[X],XD.call(b,pa)&&(p[pa]=g.copier(b[pa],g));return p}function Bg(b,g){return new g.Constructor(b.valueOf())}function Sh(b,g){return b}function df(b,g){var p=new g.Constructor;g.cache.set(b,p);b.forEach(function(G){p.add(g.copier(G,g))});return p}function Th(b){function g(la,pa){pa.prototype=pa.Constructor=void 0;if(!la||"object"!==typeof la)return la;if(pa.cache.has(la))return pa.cache.get(la);
pa.prototype=la.__proto__||$D(la);pa.Constructor=pa.prototype&&pa.prototype.constructor;if(!pa.Constructor||pa.Constructor===Object)return X(la,pa);if(ZD(la))return G(la,pa);var Ga=p[KD(la)];return Ga?Ga(la,pa):"function"===typeof la.then?la:X(la,pa)}b=Wv({},bz,b);var p={Arguments:b.object,Array:b.array,ArrayBuffer:b.arrayBuffer,Blob:b.blob,Boolean:Bg,DataView:b.dataView,Date:b.date,Error:b.error,Float32Array:b.arrayBuffer,Float64Array:b.arrayBuffer,Int8Array:b.arrayBuffer,Int16Array:b.arrayBuffer,
Int32Array:b.arrayBuffer,Map:b.map,Number:Bg,Object:b.object,Promise:Sh,RegExp:b.regExp,Set:b.set,String:Bg,WeakMap:Sh,WeakSet:Sh,Uint8Array:b.arrayBuffer,Uint8ClampedArray:b.arrayBuffer,Uint16Array:b.arrayBuffer,Uint32Array:b.arrayBuffer,Uint64Array:b.arrayBuffer},G=p.Array,X=p.Object;return function(la){return g(la,{Constructor:void 0,cache:ID(),copier:g,prototype:void 0})}}function Hi(b,g){return(0,cE.default)(b,g,{arrayMerge:(p,G,X)=>G})}function Rl(b,g,p,G=!1){const [X,la]=g,[pa,Ga]=p;b=pa+(b-
X)/(la-X)*(Ga-pa);return G?pa<Ga?Math.max(Math.min(b,Ga),pa):Math.max(Math.min(b,pa),Ga):b}function Jj(b,g){return new Promise((p,G)=>{if(g){const X=document.createElement("video");X.addEventListener("loadedmetadata",function(){p([this.videoWidth,this.videoHeight])},!1);X.src=b}else{const X=new Image;X.onload=()=>p([X.width,X.height]);X.src=b;X.onerror=la=>G(la)}})}function hg(b){return Object.values(Mq).includes(b)}function Yg(b,g){return hg(b)||null==b?`var(--ls-wb-${g}-color-${b?b:"default"})`:
b}function Kk(){var b;null==(b=document.getElementById("__textLabelMeasure"))?void 0:b.remove();b=document.createElement("pre");b.id="__textLabelMeasure";Object.assign(b.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});b.tabIndex=-1;document.body.appendChild(b);
return b}function Zh(b,g,p=0){var G,X,la;if(!b)return[16,32];let pa;pa="string"===typeof g?g:`${null!=(G=g.fontStyle)?G:"normal"} ${null!=(X=g.fontVariant)?X:"normal"} ${null!=(la=g.fontWeight)?la:"normal"} ${g.fontSize}px/${g.fontSize*g.lineHeight}px ${g.fontFamily}`;if(!Vv.has(`${b}-${pa}-${p}`)){if(!gq)return[10,10];gq.parentNode||document.body.appendChild(gq);gq.innerHTML=`${b}&#8203;`;gq.style.font=pa;gq.style.padding=p+"px";g=gq.getBoundingClientRect();Vv.set(`${b}-${pa}-${p}`,[Math.ceil(g.width||
1),Math.ceil(g.height||1)])}return Vv.get(`${b}-${pa}-${p}`)}function gk(b){try{if("string"!==typeof b||!Cr.test(b))throw TypeError("Invalid UUID");let g;const p=new Uint8Array(16);p[0]=(g=parseInt(b.slice(0,8),16))>>>24;p[1]=g>>>16&255;p[2]=g>>>8&255;p[3]=g&255;p[4]=(g=parseInt(b.slice(9,13),16))>>>8;p[5]=g&255;p[6]=(g=parseInt(b.slice(14,18),16))>>>8;p[7]=g&255;p[8]=(g=parseInt(b.slice(19,23),16))>>>8;p[9]=g&255;p[10]=(g=parseInt(b.slice(24,36),16))/1099511627776&255;p[11]=g/4294967296&255;p[12]=
g>>>24&255;p[13]=g>>>16&255;p[14]=g>>>8&255;p[15]=g&255;return!0}catch(g){return!1}}function hk(b,g=0,p){let G;return function(...X){null==p?void 0:p(...X);clearTimeout(G);G=setTimeout(()=>b.apply(X),g)}}function Lk(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function xh(){var b,g,p;return(null==(p=null==(g=null==(b=null==window?void 0:window.logseq)?void 0:b.api)?void 0:g.get_state_from_store)?void 0:p.call(g,"ui/developer-mode?"))||!1}function ui(b){return!!b}function Pj(b=0){return new Promise(g=>
setTimeout(g,b))}function tm(b="noid"){Tv[b]||(Tv[b]=Yy.createContext({}));return Tv[b]}function wi(b="noid"){return Yy.useContext(tm(b))}function Kj(b){const {callbacks:g}=wi(),p=Xy.useRef(-1);return Xy.useMemo(()=>{const G=X=>{var la,pa;const {order:Ga=0}=X;if(!Ga){var Qa=X.target;Qa.removeEventListener("pointerup",G);Qa.releasePointerCapture(X.pointerId);null==(la=g.onPointerUp)?void 0:la.call(g,{type:"selection",handle:b,order:Ga},X);la=Date.now();Qa=la-p.current;300<Qa?p.current=la:300>=Qa&&
(null==(pa=g.onDoubleClick)?void 0:pa.call(g,{type:"selection",handle:b,order:Ga},X),p.current=-1);X.order=Ga+1}};return{onPointerDown:X=>{var la;const {order:pa=0}=X;if(!pa){var Ga=Qj(X.currentTarget);Ga.setPointerCapture(X.pointerId);Ga.addEventListener("pointerup",G);null==(la=g.onPointerDown)?void 0:la.call(g,{type:"selection",handle:b,order:pa},X);X.order=pa+1}},onPointerMove:X=>{var la;const {order:pa=0}=X;pa||(null==(la=g.onPointerMove)?void 0:la.call(g,{type:"selection",handle:b,order:pa},
X),X.order=pa+1)},onPointerEnter:X=>{var la;const {order:pa=0}=X;pa||(null==(la=g.onPointerEnter)?void 0:la.call(g,{type:"selection",handle:b,order:pa},X),X.order=pa+1)},onPointerLeave:X=>{var la;const {order:pa=0}=X;pa||(null==(la=g.onPointerLeave)?void 0:la.call(g,{type:"selection",handle:b,order:pa},X),X.order=pa+1)},onKeyDown:X=>{var la;null==(la=g.onKeyDown)?void 0:la.call(g,{type:"selection",handle:b,order:-1},X)},onKeyUp:X=>{var la;null==(la=g.onKeyUp)?void 0:la.call(g,{type:"selection",handle:b,
order:-1},X)}}},[g])}function Qj(b){var g;if(null==(g=b.namespaceURI)?0:g.endsWith("svg")){if(b.parentElement)return Qj(b.parentElement);throw Error("Could not find a parent element of an HTML type!");}return b}function Dl(b,g,p){const G=ft.useRef(!1),X=ft.useCallback(()=>{var la;if(G.current){const pa=null==(la=b.current)?void 0:la.getBoundingClientRect();pa&&(la={minX:pa.left,maxX:pa.left+pa.width,minY:pa.top,maxY:pa.top+pa.height,width:pa.width,height:pa.height},g.updateBounds(la),null==p?void 0:
p(la))}else G.current=!0},[b,p]);ft.useEffect(()=>{const la=b.current?UD(b.current):document,pa=hk(X,100);la.addEventListener("scroll",pa);window.addEventListener("resize",pa);return()=>{la.removeEventListener("scroll",pa);window.removeEventListener("resize",pa)}},[]);ft.useLayoutEffect(()=>{const la=new ResizeObserver(pa=>{pa[0].contentRect&&X()});b.current&&la.observe(b.current);return()=>{la.disconnect()}},[b]);ft.useEffect(()=>{X();setTimeout(()=>{var la,pa;null==(pa=null==(la=b.current)?void 0:
la.querySelector(".tl-canvas"))?void 0:pa.focus()})},[b])}function ql(b,g){return Object.keys(g).reduce((p,G)=>{const X=g[G];return X?p+`${`--${b}-${G}`}: ${X};
`:p},"")}function Sl(b,g,p=".logseq-tldraw"){Sv.useLayoutEffect(()=>{const G=document.createElement("style"),X=ql(b,g);G.setAttribute("id",`${b}-theme`);G.setAttribute("data-selector",p);G.innerHTML=`
        ${p} {
          ${X}
        }
      `;document.head.appendChild(G);return()=>{G&&document.head.contains(G)&&document.head.removeChild(G)}},[b,g,p])}function jk(b,g){Sv.useLayoutEffect(()=>{if(Rv.get(b))return()=>{};const p=document.createElement("style");p.innerHTML=g;p.setAttribute("id",b);document.head.appendChild(p);Rv.set(b,p);return()=>{p&&document.head.contains(p)&&(document.head.removeChild(p),Rv.delete(b))}},[b,g])}function kk(b,g){const p=Sv.useMemo(()=>pe(pe({},SD),b),[b]);Sl("tl",p,g);jk("tl-canvas",TD)}function Ak(b=
"noid"){Qv[b]||(Qv[b]=Ty.createContext({}));return Qv[b]}function bf(b="noid"){return Ty.useContext(Ak(b))}function vg(){const b=bf(),{callbacks:g}=wi(),p=Uy.useRef(-1);return Uy.useMemo(()=>({onPointerDown:G=>{var X,la,pa;const {order:Ga=0}=G;Ga||(null==(X=G.currentTarget)?void 0:X.setPointerCapture(G.pointerId));G.isPrimary&&(null==(la=g.onPointerDown)?void 0:la.call(g,{type:"canvas",order:Ga},G),X=Date.now(),la=X-p.current,300<la?p.current=X:300>=la&&(null==(pa=g.onDoubleClick)?void 0:pa.call(g,
{type:"canvas",order:Ga},G),p.current=-1))},onPointerMove:G=>{var X;const {order:la=0}=G;null==(X=g.onPointerMove)?void 0:X.call(g,{type:"canvas",order:la},G)},onPointerUp:G=>{var X,la;const {order:pa=0}=G;pa||(null==(X=G.currentTarget)?void 0:X.releasePointerCapture(G.pointerId));null==(la=g.onPointerUp)?void 0:la.call(g,{type:"canvas",order:pa},G)},onPointerEnter:G=>{var X;const {order:la=0}=G;null==(X=g.onPointerEnter)?void 0:X.call(g,{type:"canvas",order:la},G)},onPointerLeave:G=>{var X;const {order:la=
0}=G;null==(X=g.onPointerLeave)?void 0:X.call(g,{type:"canvas",order:la},G)},onDrop:G=>ai(this,null,function*(){G.preventDefault();"clientX"in G&&b.drop(G.dataTransfer,[G.clientX,G.clientY])}),onDragOver:G=>{G.preventDefault()},onTouchEnd:G=>{let X=b.selectedTool.id;"pencil"!==X&&"highlighter"!==X||G.preventDefault()}}),[g])}function sj(b,g,p){return 0===g||Infinity===Math.abs(g)?Math.pow(b,5*p):b*g*p/(g+p*b)}function Eh(b,g,p,G=.15){return 0===G?Math.max(g,Math.min(b,p)):b<g?-sj(g-b,p-g,G)+g:b>p?
+sj(b-p,p-g,G)+p:b}function Ii(b,[g,p],[G,X]){const [[la,pa],[Ga,Qa]]=b;return[Eh(g,la,pa,G),Eh(p,Ga,Qa,X)]}function Oh(b,g,p){g in b?Object.defineProperty(b,g,{value:p,enumerable:!0,configurable:!0,writable:!0}):b[g]=p;return b}function fi(b,g){var p=Object.keys(b);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(b);g&&(G=G.filter(function(X){return Object.getOwnPropertyDescriptor(b,X).enumerable}));p.push.apply(p,G)}return p}function Hg(b){for(var g=1;g<arguments.length;g++){var p=
null!=arguments[g]?arguments[g]:{};g%2?fi(Object(p),!0).forEach(function(G){Oh(b,G,p[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(p)):fi(Object(p)).forEach(function(G){Object.defineProperty(b,G,Object.getOwnPropertyDescriptor(p,G))})}return b}function lk(b){return b?b[0].toUpperCase()+b.slice(1):""}function Mk(b=!1,g){return b&&!RD.includes(g)}function Ph(b,g="",p=!1){const G=Sy[b];g=G?G[g]||g:g;return"on"+lk(b)+lk(g)+(Mk(p,g)?"Capture":"")}function Ni(b){b=
b.substring(2).toLowerCase();const g=!!~b.indexOf("passive");g&&(b=b.replace("passive",""));var p=zp.includes(b)?"capturecapture":"capture";(p=!!~b.indexOf(p))&&(b=b.replace("capture",""));return{device:b,capture:p,passive:g}}function Vh(b,g=""){const p=Sy[b];return b+(p?p[g]||g:g)}function cl(b){return"touches"in b?"touch":"pointerType"in b?b.pointerType:"mouse"}function Bk(b){return Array.from(b.touches).filter(g=>{var p,G;return g.target===b.currentTarget||(null===(p=b.currentTarget)||void 0===
p?void 0:null===(G=p.contains)||void 0===G?void 0:G.call(p,g.target))})}function Rj(b){return"touches"in b?("touchend"===b.type||"touchcancel"===b.type?b.changedTouches:b.targetTouches)[0]:b}function rl(b,g){const p=g.clientX-b.clientX,G=g.clientY-b.clientY;return{angle:-(180*Math.atan2(p,G))/Math.PI,distance:Math.hypot(p,G),origin:[(g.clientX+b.clientX)/2,(g.clientY+b.clientY)/2]}}function en(b){return Bk(b).map(g=>g.identifier)}function mk(b,g){const [p,G]=Array.from(b.touches).filter(X=>g.includes(X.identifier));
return rl(p,G)}function Ei(b){const g=Rj(b);return"touches"in b?g.identifier:g.pointerId}function tj(b){b=Rj(b);return[b.clientX,b.clientY]}function $h(b){let {deltaX:g,deltaY:p,deltaMode:G}=b;1===G?(g*=40,p*=40):2===G&&(g*=800,p*=800);return[g,p]}function Vi(b,...g){return"function"===typeof b?b(...g):b}function Qh(){}function ij(...b){return 0===b.length?Qh:1===b.length?b[0]:function(){let g;for(const p of b)g=p.apply(this,arguments)||g;return g}}function xi([b,g],p){b=Math.abs(b);g=Math.abs(g);
if(b>g&&b>p)return"x";if(g>b&&g>p)return"y"}function dl(b){const [g,p]=b.overflow,[G,X]=b._delta,[la,pa]=b._direction;if(0>g&&0<G&&0>la||0<g&&0>G&&0<la)b._movement[0]=b._movementBound[0];if(0>p&&0<X&&0>pa||0<p&&0>X&&0<pa)b._movement[1]=b._movementBound[1]}function el(b){Zv.set(b.key,b.engine);$v.set(b.key,b.resolver)}function Wi(b={},g){const p={};for(const [G,X]of Object.entries(g))switch(typeof X){case "function":p[G]=X.call(p,b[G],G,b);break;case "object":p[G]=Wi(b[G],X);break;case "boolean":X&&
(p[G]=b[G])}return p}function Qg(b,g,p={}){const {target:G,eventOptions:X,window:la,enabled:pa,transform:Ga}=b;var Qa=hE;if(null==b)b={};else{if(null==b)var Za={};else{Za={};var eb=Object.keys(b),mb;for(mb=0;mb<eb.length;mb++){var Lb=eb[mb];0<=Qa.indexOf(Lb)||(Za[Lb]=b[Lb])}}if(Object.getOwnPropertySymbols)for(mb=Object.getOwnPropertySymbols(b),Lb=0;Lb<mb.length;Lb++)eb=mb[Lb],0<=Qa.indexOf(eb)||Object.prototype.propertyIsEnumerable.call(b,eb)&&(Za[eb]=b[eb]);b=Za}p.shared=Wi({target:G,eventOptions:X,
window:la,enabled:pa,transform:Ga},gE);if(g){var Vb=$v.get(g);p[g]=Wi(Hg({shared:p.shared},b),Vb)}else for(Vb in b)(g=$v.get(Vb))&&(p[Vb]=Wi(Hg({shared:p.shared},b[Vb]),g));return p}function Oi(b,g){b.gestures.add(g);b.gestureEventStores[g]=new gz(b,g);b.gestureTimeoutStores[g]=new iE}function Rh(b,g,p,G,X,la){if(b.has(p)&&Zv.has(G)){var pa=p+"Start",Ga=p+"End";X[G]=Qa=>{let Za=void 0;if(Qa.first&&pa in g)g[pa](Qa);p in g&&(Za=g[p](Qa));if(Qa.last&&Ga in g)g[Ga](Qa);return Za};la[G]=la[G]||{}}}function Tj(b,
g={},p,G){const X=Yv.default.useMemo(()=>new jE(b),[]);X.applyHandlers(b,G);X.applyConfig(g,p);Yv.default.useEffect(X.effect.bind(X));Yv.default.useEffect(()=>X.clean.bind(X),[]);if(void 0===g.target)return X.bind.bind(X)}function Ih(b){b.forEach(el);return function(g,p){p=p||{};const G={},X={},la=new Set;for(let Lb in g)HE.test(Lb)?(la.add(RegExp.lastMatch),X[Lb]=g[Lb]):G[Lb]=g[Lb];const [pa,Ga,Qa]=[X,G,la];g={};Rh(Qa,pa,"onDrag","drag",g,p);Rh(Qa,pa,"onWheel","wheel",g,p);Rh(Qa,pa,"onScroll","scroll",
g,p);Rh(Qa,pa,"onPinch","pinch",g,p);Rh(Qa,pa,"onMove","move",g,p);Rh(Qa,pa,"onHover","hover",g,p);const {handlers:Za,nativeHandlers:eb,config:mb}={handlers:g,config:p,nativeHandlers:Ga};return Tj(Za,mb,void 0,eb)}}function Ji(b,g){return Ih([oE,mE,nE,fE,lE,kE])(b,g||{})}function Ok(b){const {viewport:g,inputs:p,callbacks:G}=wi(),X=lu.useRef(void 0),la=lu.useRef([0,0]),pa=lu.useRef(0),Ga=lu.useMemo(()=>({onWheel:Qa=>{var Za;({event:Qa}=Qa);Qa.preventDefault();const {deltaY:eb,deltaX:mb}=Qa;var Lb=
0;if(Qa.ctrlKey||Qa.metaKey){Lb=Math.sign(Qa.deltaY);let gc=eb;10<Math.abs(Qa.deltaY)&&(gc=10*Lb);Lb=gc}const [Vb,Pb,ec]=[mb,eb,Lb];"pinching"===p.state||pa.current>=Qa.timeStamp||(pa.current=Qa.timeStamp,(Qa.altKey||Qa.ctrlKey||Qa.metaKey)&&0===Qa.buttons?(Lb=g.bounds,Qa=null!=(Za=p.currentScreenPoint)?Za:[Lb.width/2,Lb.height/2],Za=g.camera.zoom,g.onZoom(Qa,Za-ec/100*Za)):(Za=ne.mul(Qa.shiftKey&&!Lk()?[Pb,0]:[Vb,Pb],.8),ne.isEqual(Za,[0,0])||g.panCamera(Za)))},onPinchStart:({event:Qa,delta:Za,offset:eb,
origin:mb})=>{var Lb;const Vb=b.current;Qa instanceof WheelEvent||!(Qa.target===Vb||null!=Vb&&Vb.contains(Qa.target))||(null==(Lb=G.onPinchStart)?void 0:Lb.call(G,{type:"canvas",order:0,delta:[...Za,eb[0]],offset:eb,point:ne.sub(mb,p.containerOffset)},Qa),X.current=mb,la.current=[0,0])},onPinchEnd:({event:Qa,offset:Za,origin:eb})=>{var mb;const Lb=b.current;Qa instanceof WheelEvent||!(Qa.target===Lb||null!=Lb&&Lb.contains(Qa.target))||"pinching"!==p.state||(null==(mb=G.onPinchEnd)?void 0:mb.call(G,
{type:"canvas",order:0,delta:[0,0,Za[0]],offset:Za,point:ne.sub(eb,p.containerOffset)},Qa),la.current=[0,0])},onPinch:({event:Qa,offset:Za,origin:eb})=>{var mb,Lb=b.current;if(!(Qa instanceof WheelEvent)&&(Qa.target===Lb||null!=Lb&&Lb.contains(Qa.target))){X.current||(X.current=eb);Lb=ne.sub(X.current,eb);var Vb=ne.sub(Lb,la.current);null==(mb=G.onPinch)?void 0:mb.call(G,{type:"canvas",order:0,delta:[...Vb,Za[0]],offset:Za,point:ne.sub(eb,p.containerOffset)},Qa);la.current=Lb}}}),[G]);Ji(Ga,{target:b,
eventOptions:{passive:!1},pinch:{from:[g.camera.zoom,g.camera.zoom],scaleBounds:()=>({from:g.camera.zoom,max:Qo.maxZoom,min:Qo.minZoom})}})}function jj(b,g,p,G){Xv.useLayoutEffect(()=>{b.current.style.transform=`translate(
        calc(${g.minX}px - var(--tl-padding)),
        calc(${g.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[g.minX,g.minY,p,g.rotation]);Xv.useLayoutEffect(()=>{const X=b.current;X.style.width=`calc(${Math.floor(g.width)}px + (var(--tl-padding) * 2))`;X.style.height=`calc(${Math.floor(g.height)}px + (var(--tl-padding) * 2))`},[g.width,g.height]);Xv.useLayoutEffect(()=>{const X=b.current;void 0!==G&&(X.style.zIndex=G.toString())},[G])}function zj(b,g){const {onPersist:p,onSave:G,onSaveAs:X,onError:la,onMount:pa,onCreateAssets:Ga,onCreateShapes:Qa,onDeleteAssets:Za,onDeleteShapes:eb,
onDrop:mb,onPaste:Lb,onCopy:Vb,onCanvasDBClick:Pb}=g;fz.useLayoutEffect(()=>{const ec=[];if(b)return window.tlapps=window.tlapps||{},window.tlapps[b.uuid]=b,pa&&pa(b,null),()=>{ec.forEach(gc=>gc());window.tlapps&&delete window.tlapps[b.uuid]}},[b]);fz.useLayoutEffect(()=>{const ec=[];p&&ec.push(b.subscribe("persist",p));G&&ec.push(b.subscribe("save",G));X&&ec.push(b.subscribe("saveAs",X));la&&ec.push(b.subscribe("error",la));Qa&&ec.push(b.subscribe("create-shapes",Qa));Ga&&ec.push(b.subscribe("create-assets",
Ga));eb&&ec.push(b.subscribe("delete-shapes",eb));Za&&ec.push(b.subscribe("delete-assets",Za));mb&&ec.push(b.subscribe("drop",mb));Lb&&ec.push(b.subscribe("paste",Lb));Vb&&ec.push(b.subscribe("copy",Vb));Pb&&ec.push(b.subscribe("canvas-dbclick",Pb));return()=>ec.forEach(gc=>gc())},[b,p,G,X,la])}function un(b){if("app"in b)return b.app;const [g]=sz.useState(()=>new WD(b.model,b.Shapes,b.Tools,b.readOnly));sz.useLayoutEffect(()=>{g.initKeyboardShortcuts();return()=>{g.dispose()}},[g]);return g}function Pk(b,
g){IE.useEffect(()=>{"model"in g&&g.model&&b.loadDocumentModel(g.model)},[g.model])}function El(b){const g=wi(),{viewport:{bounds:p}}=g;JE.useEffect(()=>{const G=pa=>{pa.preventDefault()},X=pa=>{if(0!==pa.touches.length){var Ga=pa.touches[0].pageX,Qa=pa.touches[0].radiusX||0;(10>Ga-Qa||Ga+Qa>p.width-10)&&pa.preventDefault()}},la=b.current;if(!la)return()=>{};la.addEventListener("touchstart",G,{passive:!0});la.addEventListener("gestureend",G,{passive:!0});la.addEventListener("gesturechange",G,{passive:!0});
la.addEventListener("gesturestart",G,{passive:!0});la.addEventListener("touchstart",X,{passive:!0});return()=>{la&&(la.removeEventListener("touchstart",G),la.removeEventListener("gestureend",G),la.removeEventListener("gesturechange",G),la.removeEventListener("gesturestart",G),la.removeEventListener("touchstart",X))}},[b,p.width])}function Km(b,g){const {inputs:p,callbacks:G}=wi();return KE.useMemo(()=>({onPointerDown:X=>{var la,pa;const {order:Ga=0}=X;Ga||(null==(la=X.currentTarget)?void 0:la.setPointerCapture(X.pointerId));
la=b.props.handles[g];null==(pa=G.onPointerDown)?void 0:pa.call(G,{type:"handle",shape:b,handle:la,id:g,order:Ga},X);X.order=Ga+1},onPointerMove:X=>{var la;const {order:pa=0}=X,Ga=b.props.handles[g];null==(la=G.onPointerMove)?void 0:la.call(G,{type:"handle",shape:b,handle:Ga,id:g,order:pa},X);X.order=pa+1},onPointerUp:X=>{var la,pa;const {order:Ga=0}=X;Ga||(null==(la=X.currentTarget)?void 0:la.releasePointerCapture(X.pointerId));la=b.props.handles[g];null==(pa=G.onPointerUp)?void 0:pa.call(G,{type:"handle",
shape:b,handle:la,id:g,order:Ga},X);X.order=Ga+1},onPointerEnter:X=>{var la;const {order:pa=0}=X,Ga=b.props.handles[g];null==(la=G.onPointerEnter)?void 0:la.call(G,{type:"handle",shape:b,handle:Ga,id:g,order:pa},X);X.order=pa+1},onPointerLeave:X=>{var la;const {order:pa=0}=X,Ga=b.props.handles[g];null==(la=G.onPointerLeave)?void 0:la.call(G,{type:"handle",shape:b,handle:Ga,id:g,order:pa},X);X.order=pa+1},onKeyUp:X=>{var la;const pa=b.props.handles[g];null==(la=G.onKeyUp)?void 0:la.call(G,{type:"handle",
shape:b,handle:pa,id:g,order:-1},X)},onKeyDown:X=>{var la;const pa=b.props.handles[g];null==(la=G.onKeyDown)?void 0:la.call(G,{type:"handle",shape:b,handle:pa,id:g,order:-1},X)}}),[b.id,p,G])}function kj(b,g,p=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${g})${p?" scale(-1,-1) translate(0, -32)":""}'>`+b.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}
function Lm(b,g,p=0){LE.useEffect(()=>{const G=b.current;G&&(G.style.cursor=eE[g](zm.radiansToDegrees(p)))},[g,p])}function gm(b){const {viewport:g}=wi(),p=bf();ME.useLayoutEffect(()=>Md(()=>{const G=hk(()=>{var X;null==(X=b.current)?void 0:X.style.setProperty("--tl-zoom",g.camera.zoom.toString())},200);"pinching"!==p.inputs.state&&null!=g.camera.zoom&&G()}),[])}function Dk(b,g=0){const [p,G]=(0,tz.useState)(b);(0,tz.useEffect)(()=>{let X=!1;const la=setTimeout(()=>{X||G(b)},g);return()=>{X=!0;clearTimeout(la)}},
[b,g]);return p}function bk(){const b=bf();uz.useEffect(()=>{te(()=>pe({},b.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+b.currentPageId,JSON.stringify(b.viewport.camera))})},[b.viewport.camera]);uz.useEffect(()=>{var g;const p=JSON.parse(null!=(g=window.sessionStorage.getItem("logseq.tldraw.camera:"+b.currentPageId))?g:"null");p?b.viewport.update(p):b.selectedIds.size?b.api.zoomToSelection():b.api.zoomToFit()},[b])}function hm(b){b()}function Ck(b){return Ie(Eg(b,void 0))}
function zg(b){return{reaction:b,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+OE}}function um(b){var g=new Map,p=1,G=new b(function(X){var la=g.get(X);la&&(la.reaction.dispose(),g.delete(X))});return{addReactionToTrack:function(X,la,pa){var Ga=p++;G.register(pa,Ga,X);X.current=zg(la);X.current.finalizationRegistryCleanupToken=Ga;g.set(Ga,X.current);return X.current},recordReactionAsCommitted:function(X){G.unregister(X);X.current&&X.current.finalizationRegistryCleanupToken&&g.delete(X.current.finalizationRegistryCleanupToken)},
forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function th(){function b(){void 0===G&&(G=setTimeout(g,1E4))}function g(){G=void 0;var X=Date.now();p.forEach(function(la){var pa=la.current;pa&&X>=pa.cleanAt&&(pa.reaction.dispose(),la.current=null,p.delete(la))});0<p.size&&b()}var p=new Set,G;return{addReactionToTrack:function(X,la,pa){X.current=zg(la);p.add(X);b();return X.current},recordReactionAsCommitted:function(X){p.delete(X)},forceCleanupTimerToRunNowForTests:function(){G&&
(clearTimeout(G),g())},resetCleanupScheduleForTests:function(){var X;if(0<p.size){try{for(var la=PE(p),pa=la.next();!pa.done;pa=la.next()){var Ga=pa.value,Qa=Ga.current;Qa&&(Qa.reaction.dispose(),Ga.current=null)}}catch(eb){var Za={error:eb}}finally{try{pa&&!pa.done&&(X=la.return)&&X.call(la)}finally{if(Za)throw Za.error;}}p.clear()}G&&(clearTimeout(G),G=void 0)}}}function dj(){return new uE}function Qk(b,g){void 0===g&&(g="observed");var p=iz(jt.default.useState(dj),1)[0],G=iz(jt.default.useState(),
2)[1],X=jt.default.useRef(null);if(!X.current)var la=new Vr("observer".concat(g),function(){pa.mounted?G([]):pa.changedBeforeMount=!0}),pa=QE(X,la,p);p=X.current.reaction;jt.default.useDebugValue(p,Ck);jt.default.useEffect(function(){qE(X);X.current?(X.current.mounted=!0,X.current.changedBeforeMount&&(X.current.changedBeforeMount=!1,G([]))):(X.current={reaction:new Vr("observer".concat(g),function(){G([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},G([]));return function(){X.current.reaction.dispose();
X.current=null}},[]);var Ga,Qa;p.track(function(){try{Ga=b()}catch(Za){Qa=Za}});if(Qa)throw Qa;return Ga}function ef(b,g){var p;if(lz&&b.$$typeof===lz)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");g=null!==(p=null===g||void 0===g?void 0:g.forwardRef)&&void 0!==p?p:!1;var G=b,X=b.displayName||b.name;if(jz&&b.$$typeof===jz&&(g=!0,G=b.render,"function"!==
typeof G))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");p=function(la,pa){return Qk(function(){return G(la,pa)},X)};""!==X&&(p.displayName=X);b.contextTypes&&(p.contextTypes=b.contextTypes);g&&(p=(0,bs.forwardRef)(p));p=(0,bs.memo)(p);lj(b,p);return p}function lj(b,g){Object.keys(b).forEach(function(p){rE[p]||Object.defineProperty(g,p,Object.getOwnPropertyDescriptor(b,p))})}function nk(b){var g=b.render;b=b.children||g;return"function"!==typeof b?null:Qk(b)}function Gk(b){const g=
bf(),{callbacks:p}=wi(),G=kz.useRef(!1);kz.useEffect(()=>{const X=Qa=>{var Za,eb;if(null==(Za=b.current)?0:Za.contains(document.activeElement))null==(eb=p.onKeyDown)?void 0:eb.call(p,{type:"canvas",order:-1},Qa),G.current=Qa.shiftKey},la=Qa=>{var Za,eb;if(null==(Za=b.current)?0:Za.contains(document.activeElement))null==(eb=p.onKeyUp)?void 0:eb.call(p,{type:"canvas",order:-1},Qa),G.current=Qa.shiftKey},pa=Qa=>{var Za,eb,mb;!g.editingShape&&(null==(Za=b.current)?0:Za.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(mb=null==(eb=document.activeElement)?void 0:eb.tagName)?mb:"")&&(Qa.preventDefault(),g.paste(Qa,G.current))},Ga=Qa=>{var Za,eb,mb;!g.editingShape&&0<g.selectedShapes.size&&(null==(Za=b.current)?0:Za.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(mb=null==(eb=document.activeElement)?void 0:eb.tagName)?mb:"")&&(Qa.preventDefault(),g.copy())};window.addEventListener("keydown",X);window.addEventListener("keyup",la);document.addEventListener("paste",
pa);document.addEventListener("copy",Ga);return()=>{window.removeEventListener("keydown",X);window.removeEventListener("keyup",la);document.removeEventListener("paste",pa);document.removeEventListener("copy",Ga)}},[])}function im(b){const {inputs:g,callbacks:p}=wi(),G=Az.useRef(-1);return Az.useMemo(()=>({onPointerDown:X=>{var la,pa;const {order:Ga=0}=X;Ga||(null==(la=X.currentTarget)?void 0:la.setPointerCapture(X.pointerId));null==(pa=p.onPointerDown)?void 0:pa.call(p,{type:"shape",shape:b,order:Ga},
X);X.order=Ga+1},onPointerMove:X=>{var la;const {order:pa=0}=X;null==(la=p.onPointerMove)?void 0:la.call(p,{type:"shape",shape:b,order:pa},X);X.order=pa+1},onPointerUp:X=>{var la,pa,Ga;const {order:Qa=0}=X;Qa||(null==(la=X.currentTarget)?void 0:la.releasePointerCapture(X.pointerId));null==(pa=p.onPointerUp)?void 0:pa.call(p,{type:"shape",shape:b,order:Qa},X);la=Date.now();pa=la-G.current;300<pa?G.current=la:300>=pa&&(null==(Ga=p.onDoubleClick)?void 0:Ga.call(p,{type:"shape",shape:b,order:Qa},X),G.current=
-1);X.order=Qa+1},onPointerEnter:X=>{var la;const {order:pa=0}=X;null==(la=p.onPointerEnter)?void 0:la.call(p,{type:"shape",shape:b,order:pa},X);X.order=pa+1},onPointerLeave:X=>{var la;const {order:pa=0}=X;null==(la=p.onPointerLeave)?void 0:la.call(p,{type:"shape",shape:b,order:pa},X);X.order=pa+1},onKeyUp:X=>{var la;null==(la=p.onKeyUp)?void 0:la.call(p,{type:"shape",shape:b,order:-1},X)},onKeyDown:X=>{var la;null==(la=p.onKeyDown)?void 0:la.call(p,{type:"shape",shape:b,order:-1},X)}}),[b.id,g,p])}
function qg(b){var {viewport:g,inputs:p,callbacks:G,components:X}=b;b=Af(b,["viewport","inputs","callbacks","components"]);return(0,nb.jsx)(cF,{id:b.id,viewport:g,inputs:p,callbacks:G,components:X,meta:b.meta,children:(0,nb.jsx)(aF,pe({},b))})}function ff(){ff=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var p=arguments[g],G;for(G in p)Object.prototype.hasOwnProperty.call(p,G)&&(b[G]=p[G])}return b};return ff.apply(this,arguments)}function If(b,g,{checkForDefaultPrevented:p=
!0}={}){return function(G){null===b||void 0===b||b(G);if(!1===p||!G.defaultPrevented)return null===g||void 0===g?void 0:g(G)}}function Hk(...b){return g=>b.forEach(p=>{"function"===typeof p?p(g):null!==p&&void 0!==p&&(p.current=g)})}function Cf(...b){return(0,fF.useCallback)(Hk(...b),b)}function Aj(b,g=[]){let p=[];const G=()=>{const X=p.map(la=>(0,hr.createContext)(la));return function(la){const pa=(null===la||void 0===la?void 0:la[b])||X;return(0,hr.useMemo)(()=>({[`__scope${b}`]:lf(pe({},la),{[b]:pa})}),
[la,pa])}};G.scopeName=b;return[function(X,la){function pa(Za){const {scope:eb,children:mb}=Za,Lb=Af(Za,["scope","children"]);Za=(null===eb||void 0===eb?void 0:eb[b][Qa])||Ga;const Vb=(0,hr.useMemo)(()=>Lb,Object.values(Lb));return(0,hr.createElement)(Za.Provider,{value:Vb},mb)}const Ga=(0,hr.createContext)(la),Qa=p.length;p=[...p,la];pa.displayName=X+"Provider";return[pa,function(Za,eb){if(eb=(0,hr.useContext)((null===eb||void 0===eb?void 0:eb[b][Qa])||Ga))return eb;if(void 0!==la)return la;throw Error(`\`${Za}\` must be used within \`${X}\``);
}]},fl(G,...g)]}function fl(...b){const g=b[0];if(1===b.length)return g;const p=()=>{const G=b.map(X=>({useScope:X(),scopeName:X.scopeName}));return function(X){const la=G.reduce((pa,{useScope:Ga,scopeName:Qa})=>{Ga=Ga(X)[`__scope${Qa}`];return pe(pe({},pa),Ga)},{});return(0,hr.useMemo)(()=>({[`__scope${g.scopeName}`]:la}),[la])}};p.scopeName=g.scopeName;return p}function rg(b){return(0,$m.isValidElement)(b)&&b.type===Lz}function mj(b,g){const p=pe({},g);for(const G in g){const X=b[G],la=g[G];/^on[A-Z]/.test(G)?
X&&la?p[G]=(...pa)=>{la(...pa);X(...pa)}:X&&(p[G]=X):"style"===G?p[G]=pe(pe({},X),la):"className"===G&&(p[G]=[X,la].filter(Boolean).join(" "))}return pe(pe({},b),p)}function tl(b,g){b&&(0,gF.flushSync)(()=>b.dispatchEvent(g))}function sf(b){const g=(0,ew.useRef)(b);(0,ew.useEffect)(()=>{g.current=b});return(0,ew.useMemo)(()=>(...p)=>{var G;return null===(G=g.current)||void 0===G?void 0:G.call(g,...p)},[])}function ok(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const p=sf(b);
(0,hF.useEffect)(()=>{const G=X=>{"Escape"===X.key&&p(X)};g.addEventListener("keydown",G);return()=>g.removeEventListener("keydown",G)},[p,g])}function Sj(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const p=sf(b),G=(0,Ln.useRef)(!1),X=(0,Ln.useRef)(()=>{});(0,Ln.useEffect)(()=>{const la=Ga=>{if(Ga.target&&!G.current){let Qa=function(){Wm("dismissableLayer.pointerDownOutside",p,Za,{discrete:!0})};const Za={originalEvent:Ga};"touch"===Ga.pointerType?(g.removeEventListener("click",
X.current),X.current=Qa,g.addEventListener("click",X.current,{once:!0})):Qa()}G.current=!1},pa=window.setTimeout(()=>{g.addEventListener("pointerdown",la)},0);return()=>{window.clearTimeout(pa);g.removeEventListener("pointerdown",la);g.removeEventListener("click",X.current)}},[g,p]);return{onPointerDownCapture:()=>G.current=!0}}function Tl(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const p=sf(b),G=(0,Ln.useRef)(!1);(0,Ln.useEffect)(()=>{const X=la=>{la.target&&!G.current&&
Wm("dismissableLayer.focusOutside",p,{originalEvent:la},{discrete:!1})};g.addEventListener("focusin",X);return()=>g.removeEventListener("focusin",X)},[g,p]);return{onFocusCapture:()=>G.current=!0,onBlurCapture:()=>G.current=!1}}function Nk(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}function Wm(b,g,p,{discrete:G}){const X=p.originalEvent.target;p=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:p});g&&X.addEventListener(b,g,{once:!0});G?tl(X,p):X.dispatchEvent(p)}
function zi(b){const [g,p]=Nz.useState(kF());Pm(()=>{b||p(G=>null!==G&&void 0!==G?G:String(Oz++))},[b]);return b||(g?`radix-${g}`:"")}function Xi(b){return b.split("-")[0]}function Fk(b){return["top","bottom"].includes(Xi(b))?"x":"y"}function pk(b){return"y"===b?"height":"width"}function vl(b,g,p){let {reference:G,floating:X}=b;var la=G.x+G.width/2-X.width/2;const pa=G.y+G.height/2-X.height/2;b=Fk(g);var Ga=pk(b);Ga=G[Ga]/2-X[Ga]/2;const Qa="x"===b;switch(Xi(g)){case "top":la={x:la,y:G.y-X.height};
break;case "bottom":la={x:la,y:G.y+G.height};break;case "right":la={x:G.x+G.width,y:pa};break;case "left":la={x:G.x-X.width,y:pa};break;default:la={x:G.x,y:G.y}}switch(g.split("-")[1]){case "start":la[b]-=Ga*(p&&Qa?-1:1);break;case "end":la[b]+=Ga*(p&&Qa?-1:1)}return la}function fn(b){return"number"!=typeof b?pe({top:0,right:0,bottom:0,left:0},b):{top:b,right:b,bottom:b,left:b}}function Xm(b){return lf(pe({},b),{top:b.y,left:b.x,right:b.x+b.width,bottom:b.y+b.height})}function sl(b,g){return ai(this,
null,function*(){var p;void 0===g&&(g={});const {x:G,y:X,platform:la,rects:pa,elements:Ga,strategy:Qa}=b,{boundary:Za="clippingAncestors",rootBoundary:eb="viewport",elementContext:mb="floating",altBoundary:Lb=!1,padding:Vb=0}=g,Pb=fn(Vb),ec=Ga[Lb?"floating"===mb?"reference":"floating":mb],gc=Xm(yield la.getClippingRect({element:null==(p=yield null==la.isElement?void 0:la.isElement(ec))||p?ec:ec.contextElement||(yield null==la.getDocumentElement?void 0:la.getDocumentElement(Ga.floating)),boundary:Za,
rootBoundary:eb,strategy:Qa}));p=Xm(la.convertOffsetParentRelativeRectToViewportRelativeRect?yield la.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===mb?lf(pe({},pa.floating),{x:G,y:X}):pa.reference,offsetParent:yield null==la.getOffsetParent?void 0:la.getOffsetParent(Ga.floating),strategy:Qa}):pa[mb]);return{top:gc.top-p.top+Pb.top,bottom:p.bottom-gc.bottom+Pb.bottom,left:gc.left-p.left+Pb.left,right:p.right-gc.right+Pb.right}})}function wm(b){return b.replace(/left|right|bottom|top/g,
g=>lF[g])}function ul(b,g,p){void 0===p&&(p=!1);const G=b.split("-")[1],X=Fk(b);b=pk(X);p="x"===X?G===(p?"end":"start")?"right":"left":"start"===G?"bottom":"top";return g.reference[b]>g.floating[b]&&(p=wm(p)),{main:p,cross:wm(p)}}function Vj(b){return b.replace(/start|end/g,g=>mF[g])}function Rk(b,g){return{top:b.top-g.height,right:b.right-g.width,bottom:b.bottom-g.height,left:b.left-g.width}}function qk(b){return Rz.some(g=>0<=b[g])}function ek(b){return null==b?window:b&&b.document&&b.location&&
b.alert&&b.setInterval?b:(b=b.ownerDocument)&&b.defaultView||window}function Tk(b){return ek(b).getComputedStyle(b)}function Dj(b){return b&&b.document&&b.location&&b.alert&&b.setInterval?"":b?(b.nodeName||"").toLowerCase():""}function Vl(){const b=navigator.userAgentData;return null!=b&&b.brands?b.brands.map(g=>g.brand+"/"+g.version).join(" "):navigator.userAgent}function Mj(b){return b instanceof ek(b).HTMLElement}function Cj(b){return b instanceof ek(b).Element}function Uj(b){return"undefined"==
typeof ShadowRoot?!1:b instanceof ek(b).ShadowRoot||b instanceof ShadowRoot}function jm(b){const {overflow:g,overflowX:p,overflowY:G}=Tk(b);return/auto|scroll|overlay|hidden/.test(g+G+p)}function lm(b){const g=/firefox/i.test(Vl());b=Tk(b);return"none"!==b.transform||"none"!==b.perspective||"paint"===b.contain||["transform","perspective"].includes(b.willChange)||g&&"filter"===b.willChange||g&&!!b.filter&&"none"!==b.filter}function hl(){return!/^((?!chrome|android).)*safari/i.test(Vl())}function uj(b,
g,p){var G,X,la,pa;void 0===g&&(g=!1);void 0===p&&(p=!1);var Ga=b.getBoundingClientRect();let Qa=1,Za=1;g&&Mj(b)&&(Qa=0<b.offsetWidth&&qu(Ga.width)/b.offsetWidth||1,Za=0<b.offsetHeight&&qu(Ga.height)/b.offsetHeight||1);b=Cj(b)?ek(b):window;g=!hl()&&p;p=(Ga.left+(g&&null!=(G=null==(X=b.visualViewport)?void 0:X.offsetLeft)?G:0))/Qa;G=(Ga.top+(g&&null!=(la=null==(pa=b.visualViewport)?void 0:pa.offsetTop)?la:0))/Za;la=Ga.width/Qa;Ga=Ga.height/Za;return{width:la,height:Ga,top:G,right:p+la,bottom:G+Ga,
left:p,x:p,y:G}}function xl(b){return(g=b,(g instanceof ek(g).Node?b.ownerDocument:b.document)||window.document).documentElement;var g}function dk(b){return Cj(b)?{scrollLeft:b.scrollLeft,scrollTop:b.scrollTop}:{scrollLeft:b.pageXOffset,scrollTop:b.pageYOffset}}function rk(b){return uj(xl(b)).left+dk(b).scrollLeft}function Nh(b){return"html"===Dj(b)?b:b.assignedSlot||b.parentNode||(Uj(b)?b.host:null)||xl(b)}function yj(b){return Mj(b)&&"fixed"!==getComputedStyle(b).position?b.offsetParent:null}function sk(b){for(var g=
ek(b),p=yj(b);p&&["table","td","th"].includes(Dj(p))&&"static"===getComputedStyle(p).position;)p=yj(p);if(!p||"html"!==Dj(p)&&("body"!==Dj(p)||"static"!==getComputedStyle(p).position||lm(p))){if(!p)a:{b=Nh(b);for(Uj(b)&&(b=b.host);Mj(b)&&!["html","body"].includes(Dj(b));){if(lm(b)){p=b;break a}b=b.parentNode}p=null}g=p||g}return g}function zk(b){if(Mj(b))return{width:b.offsetWidth,height:b.offsetHeight};b=uj(b);return{width:b.width,height:b.height}}function zh(b){const g=Nh(b);return["html","body",
"#document"].includes(Dj(g))?b.ownerDocument.body:Mj(g)&&jm(g)?g:zh(g)}function Zg(b,g){var p;void 0===g&&(g=[]);var G=zh(b);b=G===(null==(p=b.ownerDocument)?void 0:p.body);p=ek(G);G=b?[p].concat(p.visualViewport||[],jm(G)?G:[]):G;g=g.concat(G);return b?g:g.concat(Zg(G))}function Jg(b,g,p){return"viewport"===g?Xm(function(G,X){var la=ek(G),pa=xl(G);la=la.visualViewport;G=pa.clientWidth;pa=pa.clientHeight;let Ga=0,Qa=0;if(la){G=la.width;pa=la.height;const Za=hl();(Za||!Za&&"fixed"===X)&&(Ga=la.offsetLeft,
Qa=la.offsetTop)}return{width:G,height:pa,x:Ga,y:Qa}}(b,p)):Cj(g)?function(G,X){var la=uj(G,!1,"fixed"===X);X=la.top+G.clientTop;la=la.left+G.clientLeft;return{top:X,left:la,x:la,y:X,right:la+G.clientWidth,bottom:X+G.clientHeight,width:G.clientWidth,height:G.clientHeight}}(g,p):Xm(function(G){var X;const la=xl(G);var pa=dk(G);const Ga=null==(X=G.ownerDocument)?void 0:X.body;X=kt(la.scrollWidth,la.clientWidth,Ga?Ga.scrollWidth:0,Ga?Ga.clientWidth:0);const Qa=kt(la.scrollHeight,la.clientHeight,Ga?Ga.scrollHeight:
0,Ga?Ga.clientHeight:0);G=-pa.scrollLeft+rk(G);pa=-pa.scrollTop;return"rtl"===Tk(Ga||la).direction&&(G+=kt(la.clientWidth,Ga?Ga.clientWidth:0)-X),{width:X,height:Qa,x:G,y:pa}}(xl(b)))}function ik(b){const g=Zg(b),p=["absolute","fixed"].includes(Tk(b).position)&&Mj(b)?sk(b):b;return Cj(p)?g.filter(G=>{var X;if(X=Cj(G))a:if(X=null==p.getRootNode?void 0:p.getRootNode(),G.contains(p))X=!0;else{if(X&&Uj(X)){X=p;do{if(X&&G===X){X=!0;break a}X=X.parentNode||X.host}while(X)}X=!1}return X&&"body"!==Dj(G)}):
[]}function Mh(b,g,p,G){void 0===G&&(G={});const {ancestorScroll:X=!0,ancestorResize:la=!0,elementResize:pa=!0,animationFrame:Ga=!1}=G,Qa=X&&!Ga,Za=la&&!Ga,eb=Qa||Za?[...(Cj(b)?Zg(b):[]),...Zg(g)]:[];eb.forEach(Pb=>{Qa&&Pb.addEventListener("scroll",p,{passive:!0});Za&&Pb.addEventListener("resize",p)});let mb,Lb=null;if(pa){let Pb=!0;Lb=new ResizeObserver(()=>{Pb||p();Pb=!1});Cj(b)&&!Ga&&Lb.observe(b);Lb.observe(g)}let Vb=Ga?uj(b):null;return Ga&&function ec(){const gc=uj(b);!Vb||gc.x===Vb.x&&gc.y===
Vb.y&&gc.width===Vb.width&&gc.height===Vb.height||p();Vb=gc;mb=requestAnimationFrame(ec)}(),p(),()=>{var ec;eb.forEach(gc=>{Qa&&gc.removeEventListener("scroll",p);Za&&gc.removeEventListener("resize",p)});null==(ec=Lb)||ec.disconnect();Lb=null;Ga&&cancelAnimationFrame(mb)}}function Yi(b,g){if(b===g)return!0;if(typeof b!==typeof g)return!1;if("function"===typeof b&&b.toString()===g.toString())return!0;let p,G;if(b&&g&&"object"==typeof b){if(Array.isArray(b)){var X=b.length;if(X!=g.length)return!1;for(p=
X;0!==p--;)if(!Yi(b[p],g[p]))return!1;return!0}G=Object.keys(b);X=G.length;if(X!==Object.keys(g).length)return!1;for(p=X;0!==p--;)if(!Object.prototype.hasOwnProperty.call(g,G[p]))return!1;for(p=X;0!==p--;)if(X=G[p],!("_owner"===X&&b.$$typeof||Yi(b[X],g[X])))return!1;return!0}return b!==b&&g!==g}function Cg(b){const g=fo.useRef(b);hw(()=>{g.current=b});return g}function Zi(b){let {middleware:g,placement:p="bottom",strategy:G="absolute",whileElementsMounted:X}=void 0===b?{}:b;const la=fo.useRef(null),
pa=fo.useRef(null),Ga=Cg(X),Qa=fo.useRef(null),[Za,eb]=fo.useState({x:null,y:null,strategy:G,placement:p,middlewareData:{}}),[mb,Lb]=fo.useState(g);Yi(null==mb?void 0:mb.map(oc=>{({options:oc}=oc);return oc}),null==g?void 0:g.map(oc=>{({options:oc}=oc);return oc}))||Lb(g);const Vb=fo.useCallback(()=>{la.current&&pa.current&&pF(la.current,pa.current,{middleware:mb,placement:p,strategy:G}).then(oc=>{Pb.current&&qF.flushSync(()=>{eb(oc)})})},[mb,p,G]);hw(()=>{Pb.current&&Vb()},[Vb]);const Pb=fo.useRef(!1);
hw(()=>{Pb.current=!0;return()=>{Pb.current=!1}},[]);const ec=fo.useCallback(()=>{"function"===typeof Qa.current&&(Qa.current(),Qa.current=null);if(la.current&&pa.current)if(Ga.current){const oc=Ga.current(la.current,pa.current,Vb);Qa.current=oc}else Vb()},[Vb,Ga]),gc=fo.useCallback(oc=>{la.current=oc;ec()},[ec]),Tb=fo.useCallback(oc=>{pa.current=oc;ec()},[ec]),nc=fo.useMemo(()=>({reference:la,floating:pa}),[]);return fo.useMemo(()=>lf(pe({},Za),{update:Vb,refs:nc,reference:gc,floating:Tb}),[Za,Vb,
nc,gc,Tb])}function Wf(b){const [g,p]=(0,sF.useState)(void 0);Pm(()=>{if(b){p({width:b.offsetWidth,height:b.offsetHeight});const G=new ResizeObserver(X=>{if(Array.isArray(X)&&X.length){X=X[0];if("borderBoxSize"in X){X=X.borderBoxSize;var la=Array.isArray(X)?X[0]:X;X=la.inlineSize;la=la.blockSize}else X=b.offsetWidth,la=b.offsetHeight;p({width:X,height:la})}});G.observe(b,{box:"border-box"});return()=>G.unobserve(b)}p(void 0)},[b]);return g}function Mg(b){return void 0!==b}function Ej(b){return null!==
b}function pi(b){const [g,p="center"]=b.split("-");return[g,p]}function rh(b,g){return(0,Bp.useReducer)((p,G)=>{G=g[p][G];return null!==G&&void 0!==G?G:p},b)}function xg(b){const [g,p]=(0,Bp.useState)(),G=(0,Bp.useRef)({}),X=(0,Bp.useRef)(b),la=(0,Bp.useRef)("none"),[pa,Ga]=rh(b?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Bp.useEffect)(()=>{const Qa=oh(G.current);
la.current="mounted"===pa?Qa:"none"},[pa]);Pm(()=>{const Qa=G.current,Za=X.current;if(Za!==b){const eb=la.current,mb=oh(Qa);b?Ga("MOUNT"):"none"===mb||"none"===(null===Qa||void 0===Qa?void 0:Qa.display)?Ga("UNMOUNT"):Za&&eb!==mb?Ga("ANIMATION_OUT"):Ga("UNMOUNT");X.current=b}},[b,Ga]);Pm(()=>{if(g){const Qa=eb=>{const mb=oh(G.current).includes(eb.animationName);eb.target===g&&mb&&(0,CF.flushSync)(()=>Ga("ANIMATION_END"))},Za=eb=>{eb.target===g&&(la.current=oh(G.current))};g.addEventListener("animationstart",
Za);g.addEventListener("animationcancel",Qa);g.addEventListener("animationend",Qa);return()=>{g.removeEventListener("animationstart",Za);g.removeEventListener("animationcancel",Qa);g.removeEventListener("animationend",Qa)}}Ga("ANIMATION_END")},[g,Ga]);return{isPresent:["mounted","unmountSuspended"].includes(pa),ref:(0,Bp.useCallback)(Qa=>{Qa&&(G.current=getComputedStyle(Qa));p(Qa)},[])}}function oh(b){return(null===b||void 0===b?void 0:b.animationName)||"none"}function Nj({prop:b,defaultProp:g,onChange:p=
()=>{}}){const [G,X]=Ki({defaultProp:g,onChange:p}),la=void 0!==b;g=la?b:G;const pa=sf(p);p=(0,ru.useCallback)(Ga=>{la?(Ga="function"===typeof Ga?Ga(b):Ga,Ga!==b&&pa(Ga)):X(Ga)},[la,b,X,pa]);return[g,p]}function Ki({defaultProp:b,onChange:g}){b=(0,ru.useState)(b);const [p]=b,G=(0,ru.useRef)(p),X=sf(g);(0,ru.useEffect)(()=>{G.current!==p&&(X(p),G.current=p)},[p,G,X]);return b}function bj(b,g){const p=Math.abs(g.top-b.y),G=Math.abs(g.bottom-b.y),X=Math.abs(g.right-b.x);b=Math.abs(g.left-b.x);switch(Math.min(p,
G,X,b)){case b:return"left";case X:return"right";case p:return"top";case G:return"bottom";default:return null}}function Rb(b){b=b.slice();b.sort((g,p)=>g.x<p.x?-1:g.x>p.x?1:g.y<p.y?-1:g.y>p.y?1:0);return fc(b)}function fc(b){if(1>=b.length)return b.slice();const g=[];for(var p=0;p<b.length;p++){for(var G=b[p];2<=g.length;){var X=g[g.length-1],la=g[g.length-2];if((X.x-la.x)*(G.y-la.y)>=(X.y-la.y)*(G.x-la.x))g.pop();else break}g.push(G)}g.pop();p=[];for(G=b.length-1;0<=G;G--){for(X=b[G];2<=p.length;){la=
p[p.length-1];const pa=p[p.length-2];if((la.x-pa.x)*(X.y-pa.y)>=(la.y-pa.y)*(X.x-pa.x))p.pop();else break}p.push(X)}p.pop();return 1===g.length&&1===p.length&&g[0].x===p[0].x&&g[0].y===p[0].y?g:g.concat(p)}function dc(b){var {side:g,content:p,sideOffset:G=10}=b;b=Af(b,["side","content","sideOffset"]);return p?(0,nb.jsx)(OF,{delayDuration:300,children:(0,nb.jsxs)(PF,{children:[(0,nb.jsx)(QF,{asChild:!0,children:b.children}),(0,nb.jsx)(RF,{children:(0,nb.jsxs)(SF,lf(pe({className:"tl-tooltip-content",
sideOffset:G,side:g},b),{children:[p,(0,nb.jsx)(TF,{className:"tl-tooltip-arrow"})]}))})]})}):(0,nb.jsx)(nb.Fragment,{children:b.children})}function ka(b){var {className:g,tooltip:p,tooltipSide:G}=b;b=Af(b,["className","tooltip","tooltipSide"]);return(0,nb.jsx)(dc,{content:p,side:G,children:(0,nb.jsx)("button",pe({className:"tl-button "+(null!=g?g:"")},b))})}function Eb(b){var g=b+"CollectionProvider";const [p,G]=Aj(g),[X,la]=p(g,{collectionRef:{current:null},itemMap:new Map}),pa=eb=>{const {scope:mb,
children:Lb}=eb;eb=gp.default.useRef(null);const Vb=gp.default.useRef(new Map).current;return gp.default.createElement(X,{scope:mb,itemMap:Vb,collectionRef:eb},Lb)};Object.assign(pa,{displayName:g});const Ga=b+"CollectionSlot";g=gp.default.forwardRef((eb,mb)=>{const {scope:Lb,children:Vb}=eb;eb=la(Ga,Lb);mb=Cf(mb,eb.collectionRef);return gp.default.createElement(fp,{ref:mb},Vb)});Object.assign(g,{displayName:Ga});const Qa=b+"CollectionItemSlot",Za=gp.default.forwardRef((eb,mb)=>{const {scope:Lb,children:Vb}=
eb,Pb=Af(eb,["scope","children"]),ec=gp.default.useRef(null);eb=Cf(mb,ec);const gc=la(Qa,Lb);gp.default.useEffect(()=>{gc.itemMap.set(ec,pe({ref:ec},Pb));return()=>void gc.itemMap.delete(ec)});return gp.default.createElement(fp,{["data-radix-collection-item"]:"",ref:eb},Vb)});Object.assign(Za,{displayName:Qa});return[{Provider:pa,Slot:g,ItemSlot:Za},function(eb){const mb=la(b+"CollectionConsumer",eb);return gp.default.useCallback(()=>{const Lb=mb.collectionRef.current;if(!Lb)return[];const Vb=Array.from(Lb.querySelectorAll("[data-radix-collection-item]"));
return Array.from(mb.itemMap.values()).sort((Pb,ec)=>Vb.indexOf(Pb.ref.current)-Vb.indexOf(ec.ref.current))},[mb.collectionRef,mb.itemMap])},G]}function Ub(b){const g=(0,eA.useContext)(VF);return b||g||"ltr"}function vb(){(0,WF.useEffect)(()=>{var b,g;const p=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(b=p[0])&&void 0!==b?b:yb());document.body.insertAdjacentElement("beforeend",null!==(g=p[1])&&void 0!==g?g:yb());ow++;return()=>{1===
ow&&document.querySelectorAll("[data-radix-focus-guard]").forEach(G=>G.remove());ow--}},[])}function yb(){const b=document.createElement("span");b.setAttribute("data-radix-focus-guard","");b.tabIndex=0;b.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return b}function Qb(b,{select:g=!1}={}){const p=document.activeElement;for(const G of b)if(Bc(G,{select:g}),document.activeElement!==p)break}function tb(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,
{acceptNode:p=>{const G="INPUT"===p.tagName&&"hidden"===p.type;return p.disabled||p.hidden||G?NodeFilter.FILTER_SKIP:0<=p.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function Mb(b,g){for(const p of b)if(!ac(p,{upTo:g}))return p}function ac(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function Bc(b,{select:g=!1}=
{}){if(b&&b.focus){const p=document.activeElement;b.focus({preventScroll:!0});b!==p&&b instanceof HTMLInputElement&&"select"in b&&g&&b.select()}}function Oc(b,g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function Tc(b){return b.filter(g=>"A"!==g.tagName)}function xd(b,g,p){b=b.key;p="rtl"!==p?b:"ArrowLeft"===b?"ArrowRight":"ArrowRight"===b?"ArrowLeft":b;if("vertical"!==g||!["ArrowLeft","ArrowRight"].includes(p))if("horizontal"!==g||!["ArrowUp","ArrowDown"].includes(p))return cG[p]}function Sd(b){const g=
document.activeElement;for(const p of b){if(p===g)break;p.focus();if(document.activeElement!==g)break}}function Gd(b,g){return b.map((p,G)=>b[(g+G)%b.length])}function Cd(b,g){var p=(0,gG.useState)(function(){return{value:b,callback:g,facade:{get current(){return p.value},set current(G){var X=p.value;X!==G&&(p.value=G,p.callback(G,X))}}}})[0];p.callback=g;return p.facade}function Id(b,g){return Cd(g||null,function(p){return b.forEach(function(G){"function"===typeof G?G(p):G&&(G.current=p);return G})})}
function ye(b){return b}function Zf(b,g){void 0===g&&(g=ye);var p=[],G=!1;return{read:function(){if(G)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return p.length?p[p.length-1]:b},useMedium:function(X){var la=g(X,G);p.push(la);return function(){p=p.filter(function(pa){return pa!==la})}},assignSyncMedium:function(X){for(G=!0;p.length;){var la=p;p=[];la.forEach(X)}p={push:function(pa){return X(pa)},filter:function(){return p}}},assignMedium:function(X){G=
!0;var la=[];if(p.length){var pa=p;p=[];pa.forEach(X);la=p}var Ga=function(){var Qa=la;la=[];Qa.forEach(X)};Promise.resolve().then(Ga);p={push:function(Qa){la.push(Qa);Promise.resolve().then(Ga)},filter:function(Qa){la=la.filter(Qa);return p}}}}}function we(b){const g=document.activeElement;for(const p of b){if(p===g)break;p.focus();if(document.activeElement!==g)break}}function Ze(b,g){return b.map((p,G)=>b[(g+G)%b.length])}function Pe(b,g,p){const G=1<g.length&&Array.from(g).every(la=>la===g[0])?
g[0]:g,X=p?b.indexOf(p):-1;b=Ze(b,Math.max(X,0));1===G.length&&(b=b.filter(la=>la!==p));b=b.find(la=>la.toLowerCase().startsWith(G.toLowerCase()));return b!==p?b:void 0}function Re(b){return g=>"mouse"===g.pointerType?b(g):void 0}function sg(b,[g,p]){return Math.min(p,Math.max(g,b))}function Vf(b){const g=(0,PA.useRef)({value:b,previous:b});return(0,PA.useMemo)(()=>{g.current.value!==b&&(g.current.previous=g.current.value,g.current.value=b);return g.current.previous},[b])}function ej(b=[],g,p){b=
[...b];b[p]=g;return b.sort((G,X)=>G-X)}function Tf(b,g,p){return 100/(p-g)*(b-g)}function ng(b,g){if(2<g)return`Value ${b+1} of ${g}`;if(2===g)return["Minimum","Maximum"][b]}function ph(b,g){if(1===b.length)return 0;b=b.map(G=>Math.abs(G-g));const p=Math.min(...b);return b.indexOf(p)}function Sg(b,g,p){b/=2;const G=bh([0,50],[0,b]);return(b-G(g)*p)*p}function Ug(b){return b.slice(0,-1).map((g,p)=>b[p+1]-g)}function bh(b,g){return p=>b[0]===b[1]||g[0]===g[1]?g[0]:g[0]+(g[1]-g[0])/(b[1]-b[0])*(p-b[0])}
function Dg(b,g){g=Math.pow(10,g);return Math.round(b*g)/g}function og(b){function g(Qa){return Qa?(0,nb.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Qa},children:(0,nb.jsx)("div",{className:`w-full h-full bg-${Qa}-500`})}):(0,nb.jsx)("div",{className:"tl-color-bg",children:(0,nb.jsx)(Bh,{name:"color-swatch"})})}var {color:p,opacity:G,popoverSide:X,setColor:la,setOpacity:pa}=b;b=Af(b,["color","opacity","popoverSide","setColor","setOpacity"]);const Ga=cH.default.useMemo(()=>{let Qa="";
return hk(Za=>{la(Qa)},100,Za=>{Qa=Za.target.value})},[]);return(0,nb.jsx)(XA,lf(pe({},b),{border:!0,arrow:!0,side:X,label:(0,nb.jsx)(dc,{content:"Color",side:X,sideOffset:14,children:g(p)}),children:(0,nb.jsxs)("div",{className:"p-1",children:[(0,nb.jsx)("div",{className:"tl-color-palette",children:Object.values(Mq).map(Qa=>(0,nb.jsx)("button",{className:`tl-color-drip m-1${Qa===p?" active":""}`,onClick:()=>la(Qa),children:g(Qa)},Qa))}),(0,nb.jsxs)("div",{className:"flex items-center tl-custom-color",
children:[(0,nb.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${hg(p)?"":"active"}`,children:(0,nb.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,nb.jsx)("input",pe({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:p,onChange:Ga,style:{opacity:hg(p)?0:1}},b))})}),(0,nb.jsx)("label",{for:"tl-custom-color-input",className:"cursor-pointer",children:"Select custom color"})]}),pa&&(0,nb.jsx)("div",{className:"mx-1 my-2",children:(0,nb.jsxs)(ZG,{defaultValue:[null!=
G?G:0],onValueCommit:Qa=>pa(Qa[0]),max:1,step:.1,"aria-label":"Opacity",className:"tl-slider-root",children:[(0,nb.jsx)($G,{className:"tl-slider-track",children:(0,nb.jsx)(aH,{className:"tl-slider-range"})}),(0,nb.jsx)(bH,{className:"tl-slider-thumb"})]})})]})}))}function ch(b,g){b&&(0,eH.flushSync)(()=>b.dispatchEvent(g))}function Qf(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const p=sf(b),G=(0,Mn.useRef)(!1),X=(0,Mn.useRef)(()=>{});(0,Mn.useEffect)(()=>{const la=Ga=>
{if(Ga.target&&!G.current){let Qa=function(){li("dismissableLayer.pointerDownOutside",p,Za,{discrete:!0})};const Za={originalEvent:Ga};"touch"===Ga.pointerType?(g.removeEventListener("click",X.current),X.current=Qa,g.addEventListener("click",X.current,{once:!0})):Qa()}G.current=!1},pa=window.setTimeout(()=>{g.addEventListener("pointerdown",la)},0);return()=>{window.clearTimeout(pa);g.removeEventListener("pointerdown",la);g.removeEventListener("click",X.current)}},[g,p]);return{onPointerDownCapture:()=>
G.current=!0}}function cj(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const p=sf(b),G=(0,Mn.useRef)(!1);(0,Mn.useEffect)(()=>{const X=la=>{la.target&&!G.current&&li("dismissableLayer.focusOutside",p,{originalEvent:la},{discrete:!1})};g.addEventListener("focusin",X);return()=>g.removeEventListener("focusin",X)},[g,p]);return{onFocusCapture:()=>G.current=!0,onBlurCapture:()=>G.current=!1}}function vh(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}
function li(b,g,p,{discrete:G}){const X=p.originalEvent.target;p=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:p});g&&X.addEventListener(b,g,{once:!0});G?ch(X,p):X.dispatchEvent(p)}function fk(b,{select:g=!1}={}){const p=document.activeElement;for(const G of b)if($i(G,{select:g}),document.activeElement!==p)break}function Bi(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,{acceptNode:p=>{const G="INPUT"===p.tagName&&"hidden"===p.type;return p.disabled||p.hidden||G?NodeFilter.FILTER_SKIP:
0<=p.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function wk(b,g){for(const p of b)if(!Ql(p,{upTo:g}))return p}function Ql(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function $i(b,{select:g=!1}={}){if(b&&b.focus){const p=document.activeElement;b.focus({preventScroll:!0});b!==p&&b instanceof HTMLInputElement&&"select"in
b&&g&&b.select()}}function pm(b,g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function Sm(b){return b.filter(g=>"A"!==g.tagName)}function tg(b){return void 0!==b}function bn(b){return null!==b}function an(b){const [g,p="center"]=b.split("-");return[g,p]}function cm(b){const g=sf(b),p=(0,yf.useRef)(""),G=(0,yf.useRef)(0);b=(0,yf.useCallback)(la=>{la=p.current+la;g(la);(function Qa(Ga){p.current=Ga;window.clearTimeout(G.current);""!==Ga&&(G.current=window.setTimeout(()=>Qa(""),1E3))})(la)},
[g]);const X=(0,yf.useCallback)(()=>{p.current="";window.clearTimeout(G.current)},[]);(0,yf.useEffect)(()=>()=>window.clearTimeout(G.current),[]);return[p,b,X]}function $k(b,g,p){const G=1<g.length&&Array.from(g).every(la=>la===g[0])?g[0]:g,X=p?b.indexOf(p):-1;b=Zj(b,Math.max(X,0));1===G.length&&(b=b.filter(la=>la!==p));b=b.find(la=>la.textValue.toLowerCase().startsWith(G.toLowerCase()));return b!==p?b:void 0}function Zj(b,g){return b.map((p,G)=>b[(g+G)%b.length])}function Hj(b){var {options:g,tooltip:p,
popoverSide:G,chevron:X=!0,value:la,onValueChange:pa}=b;b=Af(b,"options tooltip popoverSide chevron value onValueChange".split(" "));const [Ga,Qa]=dH.useState(!1);return(0,nb.jsx)("div",lf(pe({},b),{className:"tl-select-input",children:(0,nb.jsxs)(NH,{open:Ga,onOpenChange:Qa,value:la,onValueChange:pa,children:[(0,nb.jsx)(dc,{content:p,side:G,children:(0,nb.jsxs)(OH,{className:"tl-select-input-trigger",children:[(0,nb.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,nb.jsx)(PH,{})}),
X&&(0,nb.jsx)(QH,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,nb.jsx)(Bh,{name:Ga?"chevron-up":"chevron-down"})})]})}),(0,nb.jsx)(RH,{className:"tl-select-input-portal",children:(0,nb.jsxs)(SH,{className:"tl-select-input-content",side:G,position:"popper",sideOffset:14,align:"center",children:[(0,nb.jsx)(WH,{}),(0,nb.jsx)(TH,{className:"tl-select-input-viewport",children:g.map(Za=>(0,nb.jsx)(UH,{className:"tl-select-input-select-item",value:Za.value,children:(0,nb.jsx)(VH,{children:Za.label})},
Za.value))}),(0,nb.jsx)(XH,{})]})})]})}))}function Kh(b){var {scaleLevel:g,compact:p,popoverSide:G}=b;Af(b,["scaleLevel","compact","popoverSide"]);const X=bf();return(0,nb.jsx)(Hj,{tooltip:"Scale level",options:[{label:p?"XS":"Extra Small",value:"xs"},{label:p?"SM":"Small",value:"sm"},{label:p?"MD":"Medium",value:"md"},{label:p?"LG":"Large",value:"lg"},{label:p?"XL":"Extra Large",value:"xl"},{label:p?"XXL":"Huge",value:"xxl"}],value:g,popoverSide:G,chevron:!p,onValueChange:la=>{X.api.setScaleLevel(la)}})}
function ri(b,g){return function(p){return b(g(p))}}function qm(b,g){return g(b)}function rm(b,g){return function(p){return b(g,p)}}function Ti(b,g){return function(){return b(g)}}function al(b,g){g(b);return b}function re(){for(var b=arguments.length,g=Array(b),p=0;p<b;p++)g[p]=arguments[p];return g}function Mf(b){b()}function Me(b){return function(){return b}}function gf(){for(var b=arguments.length,g=Array(b),p=0;p<b;p++)g[p]=arguments[p];return function(){g.map(Mf)}}function Gi(){}function dg(b,
g){return b(1,g)}function hj(b,g){b(0,g)}function Fh(b){b(2)}function Gl(b){return b(4)}function be(b,g){return dg(b,rm(g,0))}function Le(b,g){var p=b(1,function(G){p();g(G)});return p}function Uf(){var b=[];return function(g,p){switch(g){case 2:b.splice(0,b.length);break;case 1:return b.push(p),function(){var G=b.indexOf(p);-1<G&&b.splice(G,1)};case 0:b.slice().forEach(function(G){G(p)});break;default:throw Error("unrecognized action "+g);}}}function Pd(b){var g=b,p=Uf();return function(G,X){switch(G){case 1:X(g);
break;case 0:g=X;break;case 4:return g}return p(G,X)}}function Ol(b){var g,p;return function(G,X){switch(G){case 1:if(X){if(p===X)break;g&&g();p=X;return g=b(1,X)}g&&g();return Gi;case 2:g&&g();p=null;break;default:throw Error("unrecognized action "+G);}}}function rj(b){return al(Uf(),function(g){return be(b,g)})}function Si(b,g){return al(Pd(g),function(p){return be(b,p)})}function Ci(){for(var b=arguments.length,g=Array(b),p=0;p<b;p++)g[p]=arguments[p];return function(G){return g.reduceRight(qm,
G)}}function He(b){for(var g=arguments.length,p=Array(1<g?g-1:0),G=1;G<g;G++)p[G-1]=arguments[G];var X=Ci.apply(void 0,p);return function(la,pa){switch(la){case 1:return dg(b,X(pa));case 2:b(2);break;default:throw Error("unrecognized action "+la);}}}function Kf(b,g){return b===g}function jg(b){void 0===b&&(b=Kf);var g;return function(p){return function(G){b(g,G)||(g=G,p(G))}}}function Vg(b){return function(g){return function(p){b(p)&&g(p)}}}function $f(b){return function(g){return ri(g,b)}}function Pf(b){return function(g){return function(){return g(b)}}}
function pl(b,g){return function(p){return function(G){return p(g=b(g,G))}}}function Vk(b){return function(g){return function(p){0<b?b--:g(p)}}}function Jf(b){var g,p;return function(G){return function(X){g=X;p||=setTimeout(function(){p=void 0;G(g)},b)}}}function Hl(b){var g,p;return function(G){return function(X){g=X;p&&clearTimeout(p);p=setTimeout(function(){G(g)},b)}}}function eg(){for(var b=arguments.length,g=Array(b),p=0;p<b;p++)g[p]=arguments[p];var G=Array(g.length),X=0,la=null,pa=Math.pow(2,
g.length)-1;g.forEach(function(Ga,Qa){var Za=Math.pow(2,Qa);dg(Ga,function(eb){var mb=X;X|=Za;G[Qa]=eb;mb!==pa&&X===pa&&la&&(la(),la=null)})});return function(Ga){return function(Qa){var Za=function(){return Ga([Qa].concat(G))};X===pa?Za():la=Za}}}function si(){for(var b=arguments.length,g=Array(b),p=0;p<b;p++)g[p]=arguments[p];return function(G,X){switch(G){case 1:return gf.apply(void 0,g.map(function(la){return la(1,X)}));case 2:break;default:throw Error("unrecognized action "+G);}}}function Ah(b,
g){void 0===g&&(g=Kf);return He(b,jg(g))}function Mi(){for(var b=Uf(),g=arguments.length,p=Array(g),G=0;G<g;G++)p[G]=arguments[G];var X=Array(p.length),la=0,pa=Math.pow(2,p.length)-1;p.forEach(function(Ga,Qa){var Za=Math.pow(2,Qa);dg(Ga,function(eb){X[Qa]=eb;la|=Za;la===pa&&b(0,X)})});return function(Ga,Qa){switch(Ga){case 1:return la===pa&&Qa(X),b(1,Qa);case 2:b(2);break;default:throw Error("unrecognized action "+Ga);}}}function sh(b,g,p){void 0===g&&(g=[]);p=(void 0===p?{singleton:!0}:p).singleton;
return{id:Symbol(),constructor:b,dependencies:g,singleton:p}}function dm(b){var g=new Map;return function X(G){var la=G.id,pa=G.constructor,Ga=G.dependencies;if((G=G.singleton)&&g.has(la))return g.get(la);pa=pa(Ga.map(function(Qa){return X(Qa)}));G&&g.set(la,pa);return pa}(b)}function xm(b,g){if(null==b)return{};var p={},G=Object.keys(b),X;for(X=0;X<G.length;X++){var la=G[X];0<=g.indexOf(la)||(p[la]=b[la])}return p}function Oj(b,g){if(b){if("string"===typeof b)return $n(b,g);var p=Object.prototype.toString.call(b).slice(8,
-1);"Object"===p&&b.constructor&&(p=b.constructor.name);if("Map"===p||"Set"===p)return Array.from(b);if("Arguments"===p||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return $n(b,g)}}function $n(b,g){if(null==g||g>b.length)g=b.length;for(var p=0,G=Array(g);p<g;p++)G[p]=b[p];return G}function Al(b,g){var p="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(p)return(p=p.call(b)).next.bind(p);if(Array.isArray(b)||(p=Oj(b))||g&&b&&"number"===typeof b.length){p&&(b=p);var G=0;return function(){return G>=
b.length?{done:!0}:{done:!1,value:b[G++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function gi(b,g){for(var p={},G={},X=0,la=b.length;X<la;)G[b[X]]=1,X+=1;for(var pa in g)G.hasOwnProperty(pa)||(p[pa]=g[pa]);return p}function Tm(b,g,p){function G(mb,Lb){mb.propsReady&&(0,mb.propsReady)(0,!1);for(var Vb=Al(pa),Pb;!(Pb=Vb()).done;)Pb=Pb.value,(0,mb[g.required[Pb]])(0,Lb[Pb]);for(Vb=Al(Ga);!(Pb=
Vb()).done;)if(Pb=Pb.value,Pb in Lb)(0,mb[g.optional[Pb]])(0,Lb[Pb]);mb.propsReady&&(0,mb.propsReady)(0,!0)}function X(mb){return Qa.reduce(function(Lb,Vb){Lb[Vb]=function(Pb){(0,mb[g.methods[Vb]])(0,Pb)};return Lb},{})}function la(mb){return Za.reduce(function(Lb,Vb){Lb[Vb]=Ol(mb[g.events[Vb]]);return Lb},{})}var pa=Object.keys(g.required||{}),Ga=Object.keys(g.optional||{}),Qa=Object.keys(g.methods||{}),Za=Object.keys(g.events||{}),eb=(0,Nn.createContext)({});return{Component:(0,Nn.forwardRef)(function(mb,
Lb){var Vb=mb.children,Pb=xm(mb,cI),ec=(0,Nn.useState)(function(){return al(dm(b),function(Tb){return G(Tb,Pb)})})[0],gc=(0,Nn.useState)(Ti(la,ec))[0];Lu(function(){for(var Tb=Al(Za),nc;!(nc=Tb()).done;)if(nc=nc.value,nc in Pb)(0,gc[nc])(1,Pb[nc]);return function(){Object.values(gc).map(Fh)}},[Pb,gc,ec]);Lu(function(){G(ec,Pb)});(0,Nn.useImperativeHandle)(Lb,Me(X(ec)));return(0,Nn.createElement)(eb.Provider,{value:ec},p?(0,Nn.createElement)(p,gi([].concat(pa,Ga,Za),Pb),Vb):Vb)}),usePublisher:function(mb){return(0,Nn.useCallback)(rm(hj,
(0,Nn.useContext)(eb)[mb]),[mb])},useEmitterValue:function(mb){var Lb=(0,Nn.useContext)(eb)[mb];mb=(0,Nn.useState)(Ti(Gl,Lb));var Vb=mb[0],Pb=mb[1];Lu(function(){return dg(Lb,function(ec){ec!==Vb&&Pb(Me(ec))})},[Lb,Vb]);return Vb},useEmitter:function(mb,Lb){var Vb=(0,Nn.useContext)(eb)[mb];Lu(function(){return Vb(1,Lb)},[Lb,Vb])}}}function lg(){return lg=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var p=arguments[g],G;for(G in p)Object.prototype.hasOwnProperty.call(p,G)&&(b[G]=
p[G])}return b},lg.apply(this,arguments)}function Ai(b,g){if(null==b)return{};var p,G,X={},la=Object.keys(b);for(G=0;G<la.length;G++)0<=g.indexOf(p=la[G])||(X[p]=b[p]);return X}function sn(b,g){(null==g||g>b.length)&&(g=b.length);for(var p=0,G=Array(g);p<g;p++)G[p]=b[p];return G}function Xl(b,g){var p="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(p)return(p=p.call(b)).next.bind(p);if(Array.isArray(b)||(p=function(X,la){if(X){if("string"==typeof X)return sn(X,la);var pa=Object.prototype.toString.call(X).slice(8,
-1);return"Object"===pa&&X.constructor&&(pa=X.constructor.name),"Map"===pa||"Set"===pa?Array.from(X):"Arguments"===pa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pa)?sn(X,la):void 0}}(b))||g&&b&&"number"==typeof b.length){p&&(b=p);var G=0;return function(){return G>=b.length?{done:!0}:{done:!1,value:b[G++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ij(b,g){void 0===g&&
(g=!0);var p=(0,ji.useRef)(null),G=function(la){};if("undefined"!=typeof ResizeObserver){var X=new ResizeObserver(function(la){la=la[0].target;null!==la.offsetParent&&b(la)});G=function(la){la&&g?(X.observe(la),p.current=la):(p.current&&X.unobserve(p.current),p.current=null)}}return{ref:p,callbackRef:G}}function Yf(b,g){return void 0===g&&(g=!0),Ij(b,g).callbackRef}function Ui(b,g,p,G,X,la,pa){return Ij(function(Ga){for(var Qa=function(mb,Lb,Vb,Pb){Vb=mb.length;if(0===Vb)return null;for(var ec=[],
gc=0;gc<Vb;gc++){var Tb=mb.item(gc);if(Tb&&void 0!==Tb.dataset.index){var nc=parseInt(Tb.dataset.index),oc=parseFloat(Tb.dataset.knownSize),Ec=Lb(Tb,"offsetHeight");if(0===Ec&&Pb("Zero-sized element, this should not happen",{child:Tb},Fm.ERROR),Ec!==oc)Tb=ec[ec.length-1],0===ec.length||Tb.size!==Ec||Tb.endIndex!==nc-1?ec.push({startIndex:nc,endIndex:nc,size:Ec}):ec[ec.length-1].endIndex++}}return ec}(Ga.children,g,0,X),Za=Ga.parentElement;!Za.dataset.virtuosoScroller;)Za=Za.parentElement;var eb="window"===
Za.firstElementChild.dataset.viewportType;G({scrollTop:Math.max(pa?pa.scrollTop:eb?window.pageYOffset||document.documentElement.scrollTop:Za.scrollTop,0),scrollHeight:pa?pa.scrollHeight:eb?document.documentElement.scrollHeight:Za.scrollHeight,viewportHeight:pa?pa.offsetHeight:eb?window.innerHeight:Za.offsetHeight});null==la||la(function(mb,Lb,Vb){return"normal"===Lb||null!=Lb&&Lb.endsWith("px")||Vb("row-gap was not resolved to pixel value correctly",Lb,Fm.WARN),"normal"===Lb?0:parseInt(null!=Lb?Lb:
"0",10)}(0,getComputedStyle(Ga).rowGap,X));null!==Qa&&b(Qa)},p)}function il(b,g){return Math.round(b.getBoundingClientRect()[g])}function Im(b,g,p,G,X){void 0===G&&(G=Gi);var la=(0,ji.useRef)(null),pa=(0,ji.useRef)(null),Ga=(0,ji.useRef)(null),Qa=(0,ji.useRef)(!1),Za=(0,ji.useCallback)(function(eb){eb=eb.target;var mb=eb===window||eb===document,Lb=mb?window.pageYOffset||document.documentElement.scrollTop:eb.scrollTop,Vb=mb?document.documentElement.scrollHeight:eb.scrollHeight,Pb=mb?window.innerHeight:
eb.offsetHeight;eb=function(){b({scrollTop:Math.max(Lb,0),scrollHeight:Vb,viewportHeight:Pb})};Qa.current?(0,dI.flushSync)(eb):eb();Qa.current=!1;null!==pa.current&&(Lb===pa.current||0>=Lb||Lb===Vb-Pb)&&(pa.current=null,g(!0),Ga.current&&(clearTimeout(Ga.current),Ga.current=null))},[b,g]);return(0,ji.useEffect)(function(){var eb=X||la.current;return G(X||la.current),Za({target:eb}),eb.addEventListener("scroll",Za,{passive:!0}),function(){G(null);eb.removeEventListener("scroll",Za)}},[la,Za,p,G,X]),
{scrollerRef:la,scrollByCallback:function(eb){Qa.current=!0;la.current.scrollBy(eb)},scrollToCallback:function(eb){var mb=la.current;if(mb&&!("offsetHeight"in mb&&0===mb.offsetHeight)){var Lb,Vb,Pb,ec="smooth"===eb.behavior;if(mb===window?(Vb=Math.max(il(document.documentElement,"height"),document.documentElement.scrollHeight),Lb=window.innerHeight,Pb=document.documentElement.scrollTop):(Vb=mb.scrollHeight,Lb=il(mb,"height"),Pb=mb.scrollTop),eb.top=Math.ceil(Math.max(Math.min(Vb-Lb,eb.top),0)),1.01>
Math.abs(Lb-Vb)||eb.top===Pb)return b({scrollTop:Pb,scrollHeight:Vb,viewportHeight:Lb}),void(ec&&g(!0));ec?(pa.current=eb.top,Ga.current&&clearTimeout(Ga.current),Ga.current=setTimeout(function(){Ga.current=null;pa.current=null;g(!0)},1E3)):pa.current=null;mb.scrollTo(eb)}}}}function y(b,g,p,G,X){return void 0===G&&(G=Qi),void 0===X&&(X=Qi),{k:b,v:g,lvl:p,l:G,r:X}}function V(b,g){if(b===Qi)return Qi;var p=b.k,G=b.l,X=b.r;if(g===p){if(G===Qi)return X;if(X===Qi)return G;g=rb(G);return Dc(Yb(b,{k:g[0],
v:g[1],l:ub(G)}))}return Dc(Yb(b,g<p?{l:V(G,g)}:{r:V(X,g)}))}function xa(b,g,p){return(void 0===p&&(p="k"),b===Qi)?[-Infinity,void 0]:b[p]===g?[b.k,b.v]:b[p]<g?(g=xa(b.r,g,p),-Infinity===g[0]?[b.k,b.v]:g):xa(b.l,g,p)}function ua(b,g,p){return b===Qi?y(g,p,1):g===b.k?Yb(b,{k:g,v:p}):rd(Ce(Yb(b,g<b.k?{l:ua(b.l,g,p)}:{r:ua(b.r,g,p)})))}function Fa(b,g,p){if(b===Qi)return[];var G=b.k,X=b.v,la=b.r,pa=[];return G>g&&(pa=pa.concat(Fa(b.l,g,p))),G>=g&&G<=p&&pa.push({k:G,v:X}),G<=p&&(pa=pa.concat(Fa(la,g,
p))),pa}function $a(b){return b===Qi?[]:[].concat($a(b.l),[{k:b.k,v:b.v}],$a(b.r))}function rb(b){return b.r===Qi?[b.k,b.v]:rb(b.r)}function ub(b){return b.r===Qi?b.l:Dc(Yb(b,{r:ub(b.r)}))}function Yb(b,g){return y(void 0!==g.k?g.k:b.k,void 0!==g.v?g.v:b.v,void 0!==g.lvl?g.lvl:b.lvl,void 0!==g.l?g.l:b.l,void 0!==g.r?g.r:b.r)}function Cc(b){return b===Qi||b.lvl>b.r.lvl}function Dc(b){var g=b.l,p=b.r,G=b.lvl;if(p.lvl>=G-1&&g.lvl>=G-1)return b;if(G>p.lvl+1){if(Cc(g))return Ce(Yb(b,{lvl:G-1}));if(g===
Qi||g.r===Qi)throw Error("Unexpected empty nodes");return Yb(g.r,{l:Yb(g,{r:g.r.l}),r:Yb(b,{l:g.r.r,lvl:G-1}),lvl:G})}if(Cc(b))return rd(Yb(b,{lvl:G-1}));if(p===Qi||p.l===Qi)throw Error("Unexpected empty nodes");g=p.l;var X=Cc(g)?p.lvl-1:p.lvl;return Yb(g,{l:Yb(b,{r:g.l,lvl:G-1}),r:rd(Yb(p,{l:g.r,lvl:X})),lvl:g.lvl+1})}function Hd(b,g,p){return b===Qi?[]:Nd(Fa(b,xa(b,g)[0],p),function(G){return{index:G.k,value:G.v}})}function Nd(b,g){var p=b.length;if(0===p)return[];var G=g(b[0]),X=G.index;G=G.value;
for(var la=[],pa=1;pa<p;pa++){var Ga=g(b[pa]),Qa=Ga.index;Ga=Ga.value;la.push({start:X,end:Qa-1,value:G});X=Qa;G=Ga}return la.push({start:X,end:Infinity,value:G}),la}function rd(b){var g=b.r,p=b.lvl;return g===Qi||g.r===Qi||g.lvl!==p||g.r.lvl!==p?b:Yb(g,{l:Yb(b,{r:g.l}),lvl:p+1})}function Ce(b){var g=b.l;return g===Qi||g.lvl!==b.lvl?b:Yb(g,{r:Yb(b,{l:g.r})})}function Bf(b,g,p,G){void 0===G&&(G=0);for(var X=b.length-1;G<=X;){var la=Math.floor((G+X)/2),pa=p(b[la],g);if(0===pa)return la;if(-1===pa){if(2>
X-G)return la-1;X=la-1}else{if(X===G)return la;G=la+1}}throw Error("Failed binary finding record in array - "+b.join(",")+", searched for "+g);}function Ng(b){var g=b.size,p=b.startIndex,G=b.endIndex;return function(X){return X.start===p&&(X.end===G||Infinity===X.end)&&X.value===g}}function vj(b,g){b=b.index;return g===b?0:g<b?-1:1}function yg(b,g){b=b.offset;return g===b?0:g<b?-1:1}function qh(b){return{index:b.index,value:b}}function ci(b,g,p,G){var X=0,la=0,pa=0,Ga;0!==g?(pa=b[Ga=Bf(b,g-1,vj)].offset,
la=xa(p,g-1),X=la[0],la=la[1],b.length&&b[Ga].size===xa(p,g)[1]&&--Ga,b=b.slice(0,Ga+1)):b=[];for(g=Xl(Hd(p,g,Infinity));!(p=g()).done;)Ga=p.value,p=Ga.start,Ga=Ga.value,X=p-X,pa=X*la+pa+X*G,b.push({offset:pa,size:Ga,index:p}),X=p,la=Ga;return{offsetTree:b,lastIndex:X,lastOffset:pa,lastSize:la}}function Di(b,g){var p=g[0],G=g[1],X=g[3];0<p.length&&(0,g[2])("received item sizes",p,Fm.DEBUG);var la=b.sizeTree;g=la;var pa=0;if(0<G.length&&la===Qi&&2===p.length){var Ga=p[0].size,Qa=p[1].size;g=G.reduce(function(eb,
mb){return ua(ua(eb,mb,Ga),mb+1,Qa)},g)}else p=function(eb,mb){var Lb,Vb=eb===Qi?0:Infinity;for(mb=Xl(mb);!(Lb=mb()).done;){var Pb=Lb.value;Lb=Pb.size;var ec=Pb.startIndex,gc=Pb.endIndex;if(Vb=Math.min(Vb,ec),eb===Qi)eb=ua(eb,0,Lb);else{var Tb=Hd(eb,ec-1,gc+1);if(!Tb.some(Ng(Pb))){var nc,oc=Pb=!1;for(Tb=Xl(Tb);!(nc=Tb()).done;){var Ec=nc.value;nc=Ec.start;var Sc=Ec.end;Ec=Ec.value;Pb?(gc>=nc||Lb===Ec)&&(eb=V(eb,nc)):(oc=Ec!==Lb,Pb=!0);Sc>gc&&gc>=nc&&Ec!==Lb&&(eb=ua(eb,gc+1,Ec))}oc&&(eb=ua(eb,ec,Lb))}}}return[eb,
Vb]}(g,p),g=p[0],pa=p[1];if(g===la)return b;b=ci(b.offsetTree,pa,g,X);var Za=b.offsetTree;return{sizeTree:g,offsetTree:Za,lastIndex:b.lastIndex,lastOffset:b.lastOffset,lastSize:b.lastSize,groupOffsetTree:G.reduce(function(eb,mb){return ua(eb,mb,Gh(mb,Za,X))},Qi),groupIndices:G}}function Gh(b,g,p){if(0===g.length)return 0;g=g[Bf(g,b,vj)];b-=g.index;b=g.size*b+(b-1)*p+g.offset;return 0<b?b+p:b}function gg(b,g,p){if(void 0!==b.groupIndex)return g.groupIndices[b.groupIndex]+1;b=Rf("LAST"===b.index?p:
b.index,g);return Math.max(0,b,Math.min(p,b))}function Rf(b,g){if(g.groupOffsetTree===Qi)return b;for(var p=0;g.groupIndices[p]<=b+p;)p++;return b+p}function Ch(b){b="number"==typeof b?{index:b}:b;return b.align||(b.align="start"),b.behavior&&hI||(b.behavior="auto"),b.offset||(b.offset=0),b}function jh(b){return!!b&&("smooth"===b?"smooth":"auto")}function Fj(b){return b.reduce(function(g,p){return g.groupIndices.push(g.totalCount),g.totalCount+=p+1,g},{totalCount:0,groupIndices:[]})}function oi(b,
g){return!(!b||b[0]!==g[0]||b[1]!==g[1])}function ak(b,g){return!(!b||b.startIndex!==g.startIndex||b.endIndex!==g.endIndex)}function Pl(b,g,p){return"number"==typeof b?"up"===p&&"top"===g||"down"===p&&"bottom"===g?b:0:"up"===p?"top"===g?b.main:b.reverse:"bottom"===g?b.main:b.reverse}function Uk(b,g,p){if(0===b.length)return[];if(g.groupOffsetTree===Qi)return b.map(function(Qa){return lg({},Qa,{index:Qa.index+p,originalIndex:Qa.index})});var G,X=[],la=Hd(g.groupOffsetTree,b[0].index,b[b.length-1].index),
pa=void 0,Ga=0;for(b=Xl(b);!(G=b()).done;)G=G.value,(!pa||pa.end<G.index)&&(pa=la.shift(),Ga=g.groupIndices.indexOf(pa.start)),X.push(lg({},G.index===pa.start?{type:"group",index:Ga}:{index:G.index-(Ga+1)+p,groupIndex:Ga},{size:G.size,offset:G.offset,originalIndex:G.index,data:G.data}));return X}function km(b,g,p,G,X,la){var pa=0,Ga=0;0<b.length&&(pa=b[0].offset,Ga=b[b.length-1],Ga=Ga.offset+Ga.size);var Qa=p-X.lastIndex,Za=pa;G=X.lastOffset+Qa*X.lastSize+(Qa-1)*G-Ga;return{items:Uk(b,X,la),topItems:Uk(g,
X,la),topListHeight:g.reduce(function(eb,mb){return mb.size+eb},0),offsetTop:pa,offsetBottom:G,top:Za,bottom:Ga,totalCount:p,firstItemIndex:la}}function ap(b){var g,p=!1;return function(){return p||(p=!0,g=b()),g}}function gn(b,g){var p=(0,ji.useRef)(null),G=(0,ji.useCallback)(function(Qa){if(null!==Qa&&Qa.offsetParent){var Za=Qa.getBoundingClientRect();Qa=Za.width;if(g){var eb=g.getBoundingClientRect();Za=Za.top-eb.top;eb=eb.height-Math.max(0,Za);Za+=g.scrollTop}else eb=window.innerHeight-Math.max(0,
Za.top),Za=Za.top+window.pageYOffset;p.current={offsetTop:Za,visibleHeight:eb,visibleWidth:Qa};b(p.current)}},[b,g]),X=Ij(G),la=X.callbackRef,pa=X.ref,Ga=(0,ji.useCallback)(function(){G(pa.current)},[G,pa]);return(0,ji.useEffect)(function(){if(g){g.addEventListener("scroll",Ga);var Qa=new ResizeObserver(Ga);return Qa.observe(g),function(){g.removeEventListener("scroll",Ga);Qa.unobserve(g)}}return window.addEventListener("scroll",Ga),window.addEventListener("resize",Ga),function(){window.removeEventListener("scroll",
Ga);window.removeEventListener("resize",Ga)}},[Ga,g]),la}function $g(b){return b}function ym(b,g){var p=Uf();return dg(p,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+g,"color: red;","color: inherit;","color: blue;")}),be(p,b),p}function di(b,g){if("string"!=typeof b)return{context:g}}function Un(b){var g=b.usePublisher,p=b.useEmitter,G=b.useEmitterValue;return gh.memo(function(X){var la=X.style,pa=X.children;X=Ai(X,vI);var Ga=g("scrollContainerState"),Qa=
G("ScrollerComponent"),Za=g("smoothScrollTargetReached"),eb=G("scrollerRef"),mb=G("context");Ga=Im(Ga,Za,Qa,eb);Za=Ga.scrollerRef;eb=Ga.scrollByCallback;return p("scrollTo",Ga.scrollToCallback),p("scrollBy",eb),(0,ji.createElement)(Qa,lg({ref:Za,style:lg({},CI,la),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},X,di(Qa,mb)),pa)})}function cn(b){var g=b.usePublisher,p=b.useEmitter,G=b.useEmitterValue;return gh.memo(function(X){var la=X.style,pa=X.children;X=Ai(X,wI);var Ga=
g("windowScrollContainerState"),Qa=G("ScrollerComponent"),Za=g("smoothScrollTargetReached"),eb=G("totalListHeight"),mb=G("deviation"),Lb=G("customScrollParent"),Vb=G("context");Za=Im(Ga,Za,Qa,Gi,Lb);var Pb=Za.scrollerRef;Ga=Za.scrollByCallback;Za=Za.scrollToCallback;return eI(function(){return Pb.current=Lb||window,function(){Pb.current=null}},[Pb,Lb]),p("windowScrollTo",Za),p("scrollBy",Ga),(0,ji.createElement)(Qa,lg({style:lg({position:"relative"},la,0!==eb?{height:eb+mb}:{}),"data-virtuoso-scroller":!0},
X,di(Qa,Vb)),pa)})}function Vn(b,g,p){return Array.from({length:g-b+1}).map(function(G,X){return{index:X+b,data:null==p?void 0:p[X+b]}})}function Co(b,g){return b&&b.column===g.column&&b.row===g.row}function sm(b,g,p,G){var X=p.height;return void 0===X||0===G.length?{top:0,bottom:0}:{top:Um(b,g,p,G[0].index),bottom:Um(b,g,p,G[G.length-1].index)+X}}function Um(b,g,p,G){var X=g.column;b=ks(1,Ou((b.width+X)/(p.width+X)));G=Ou(G/b);p=G*p.height+ks(0,G-1)*g.row;return 0<p?p+g.row:p}function bl(b,g,p){return"normal"===
g||null!=g&&g.endsWith("px")||p(b+" was not resolved to pixel value correctly",g,Fm.WARN),"normal"===g?0:parseInt(null!=g?g:"0",10)}function xk(b,g){xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,G){p.__proto__=G;return p};return xk(b,g)}function tn(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;xk(b,g)}function wn(b){wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)};return wn(b)}function vn(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}function Fo(b,g,p){Fo=vn()?Reflect.construct.bind():function(G,X,la){var pa=[null];pa.push.apply(pa,X);G=new (Function.bind.apply(G,pa));la&&xk(G,la.prototype);return G};return Fo.apply(null,arguments)}function Xn(b){var g="function"===typeof Map?new Map:void 0;Xn=function(p){function G(){return Fo(p,
arguments,wn(this).constructor)}if(null===p||-1===Function.toString.call(p).indexOf("[native code]"))return p;if("function"!==typeof p)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof g){if(g.has(p))return g.get(p);g.set(p,G)}G.prototype=Object.create(p.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}});return xk(G,p)};return Xn(b)}function $o(b,g,p){return Math.round(255*b)+","+Math.round(255*g)+","+Math.round(255*p)}function Sk(b,
g,p,G){void 0===G&&(G=$o);if(0===g)return G(p,p,p);b=(b%360+360)%360/60;var X=(1-Math.abs(2*p-1))*g,la=X*(1-Math.abs(b%2-1)),pa=g=0,Ga=0;0<=b&&1>b?(g=X,pa=la):1<=b&&2>b?(g=la,pa=X):2<=b&&3>b?(pa=X,Ga=la):3<=b&&4>b?(pa=la,Ga=X):4<=b&&5>b?(g=la,Ga=X):5<=b&&6>b&&(g=X,Ga=la);p-=X/2;return G(g+p,pa+p,Ga+p)}function rp(b){if("string"!==typeof b)throw new jp(3);if("string"===typeof b){var g=b.toLowerCase();b=yB[g]?"#"+yB[g]:b}if(b.match(gJ))return{red:parseInt(""+b[1]+b[2],16),green:parseInt(""+b[3]+b[4],
16),blue:parseInt(""+b[5]+b[6],16)};if(b.match(hJ))return g=parseFloat((parseInt(""+b[7]+b[8],16)/255).toFixed(2)),{red:parseInt(""+b[1]+b[2],16),green:parseInt(""+b[3]+b[4],16),blue:parseInt(""+b[5]+b[6],16),alpha:g};if(b.match(iJ))return{red:parseInt(""+b[1]+b[1],16),green:parseInt(""+b[2]+b[2],16),blue:parseInt(""+b[3]+b[3],16)};if(b.match(jJ))return g=parseFloat((parseInt(""+b[4]+b[4],16)/255).toFixed(2)),{red:parseInt(""+b[1]+b[1],16),green:parseInt(""+b[2]+b[2],16),blue:parseInt(""+b[3]+b[3],
16),alpha:g};if(g=Mw.exec(b))return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10)};if(g=kJ.exec(b.substring(0,50)))return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10),alpha:1<parseFloat(""+g[4])?parseFloat(""+g[4])/100:parseFloat(""+g[4])};var p=lJ.exec(b);if(p){g=parseInt(""+p[1],10);var G=parseInt(""+p[2],10)/100;p=parseInt(""+p[3],10)/100;g="rgb("+Sk(g,G,p)+")";G=Mw.exec(g);if(!G)throw new jp(4,b,g);return{red:parseInt(""+G[1],10),
green:parseInt(""+G[2],10),blue:parseInt(""+G[3],10)}}if(g=mJ.exec(b.substring(0,50))){G=parseInt(""+g[1],10);p=parseInt(""+g[2],10)/100;var X=parseInt(""+g[3],10)/100;G="rgb("+Sk(G,p,X)+")";p=Mw.exec(G);if(!p)throw new jp(4,b,G);return{red:parseInt(""+p[1],10),green:parseInt(""+p[2],10),blue:parseInt(""+p[3],10),alpha:1<parseFloat(""+g[4])?parseFloat(""+g[4])/100:parseFloat(""+g[4])}}throw new jp(5);}function Mm(b){b=b.toString(16);return 1===b.length?"0"+b:b}function dn(b,g,p){return Nw("#"+Mm(Math.round(255*
b))+Mm(Math.round(255*g))+Mm(Math.round(255*p)))}function Wn(b,g,p){if("number"===typeof b&&"number"===typeof g&&"number"===typeof p)return Nw("#"+Mm(b)+Mm(g)+Mm(p));if("object"===typeof b&&void 0===g&&void 0===p)return Nw("#"+Mm(b.red)+Mm(b.green)+Mm(b.blue));throw new jp(6);}function Gn(b){if("object"!==typeof b)throw new jp(8);if("number"===typeof b.red&&"number"===typeof b.green&&"number"===typeof b.blue&&"number"===typeof b.alpha){if("object"===typeof b)b=1<=b.alpha?Wn(b.red,b.green,b.blue):
"rgba("+b.red+","+b.green+","+b.blue+","+b.alpha+")";else throw new jp(7);return b}if("number"===typeof b.red&&"number"===typeof b.green&&"number"===typeof b.blue&&("number"!==typeof b.alpha||"undefined"===typeof b.alpha))return Wn(b);if("number"===typeof b.hue&&"number"===typeof b.saturation&&"number"===typeof b.lightness&&"number"===typeof b.alpha){if("object"===typeof b)b=1<=b.alpha?Sk(b.hue,b.saturation,b.lightness,dn):"rgba("+Sk(b.hue,b.saturation,b.lightness)+","+b.alpha+")";else throw new jp(2);
return b}if("number"===typeof b.hue&&"number"===typeof b.saturation&&"number"===typeof b.lightness&&("number"!==typeof b.alpha||"undefined"===typeof b.alpha)){if("object"===typeof b)b=Sk(b.hue,b.saturation,b.lightness,dn);else throw new jp(1);return b}throw new jp(8);}function Do(b,g,p){return function(){var G=p.concat(Array.prototype.slice.call(arguments));return G.length>=g?b.apply(this,G):Do(b,g,G)}}function Eo(b,g){if("transparent"===g)return g;g=rp(g);var p=g.red/255,G=g.green/255,X=g.blue/255,
la=Math.max(p,G,X),pa=Math.min(p,G,X),Ga=(la+pa)/2;if(la===pa)g=void 0!==g.alpha?{hue:0,saturation:0,lightness:Ga,alpha:g.alpha}:{hue:0,saturation:0,lightness:Ga};else{var Qa=la-pa;pa=.5<Ga?Qa/(2-la-pa):Qa/(la+pa);switch(la){case p:p=(G-X)/Qa+(G<X?6:0);break;case G:p=(X-p)/Qa+2;break;default:p=(p-G)/Qa+4}p*=60;g=void 0!==g.alpha?{hue:p,saturation:pa,lightness:Ga,alpha:g.alpha}:{hue:p,saturation:pa,lightness:Ga}}Ga=ff;b=g.lightness-parseFloat(b);return Gn(Ga({},g,{lightness:Math.max(0,Math.min(1,b))}))}
function em(b,g){var p;void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));void 0!==g.opacity&&(g.opacity=Math.min(1,Math.max(g.opacity,0)));let G=null!=(p=g.fill)?p:b.props.fill;void 0===G||hg(G)||"var(--ls-secondary-background-color)"===G||g.noFill||!MJ.includes(b.props.type)||(b=nJ(.3,G),g.stroke=b);return g}function oo({strokeWidth:b,size:g,mode:p}){return"svg"===p?(0,nb.jsx)("rect",{className:"tl-binding-indicator",x:b,y:b,rx:2,ry:2,width:Math.max(0,g[0]-2*b),height:Math.max(0,
g[1]-2*b),strokeWidth:4*b}):(0,nb.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function Wl(){const b=bf();return"panning"===b.inputs.state||"pinching"===b.inputs.state}function Vm({left:b,middle:g,right:p,stroke:G,strokeWidth:X}){return(0,nb.jsxs)("g",{children:[(0,nb.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${b} L ${g} ${p}`}),(0,nb.jsx)("path",{d:`M ${b} L ${g} ${p}`,fill:"none",
stroke:G,strokeWidth:X,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Yn(b,g,p){g=K(b,g,b,p).points;if(!g)return console.warn("Could not find an intersection for the arrow head."),{left:b,right:b};g=(p=g[0])?ne.rotWith(p,b,Math.PI/6):b;b=p?ne.rotWith(p,b,-Math.PI/6):b;return{left:g,right:b}}function Go(b,g,p){const {left:G,right:X}=Yn(b,g,p);return`M ${G} L ${b} ${X}`}function Lo(b,g,p,G,X){b=b.strokeWidth;var la=ne.dist(g,p);b=Math.min(la/3,16*b);la=[];la.push(`M ${g} L ${p}`);
G&&la.push(Go(g,p,b));X&&la.push(Go(p,g,b));return la.join(" ")}function Fl({id:b,bounds:g,labelSize:p,offset:G,scale:X=1}){return(0,nb.jsx)("defs",{children:(0,nb.jsxs)("mask",{id:b+"_clip",children:[(0,nb.jsx)("rect",{x:-100,y:-100,width:g.width+200,height:g.height+200,fill:"white"}),(0,nb.jsx)("rect",{x:g.width/2-p[0]/2*X+((null==G?void 0:G[0])||0),y:g.height/2-p[1]/2*X+((null==G?void 0:G[1])||0),width:p[0]*X,height:p[1]*X,rx:4*X,ry:4*X,fill:"black"})]})})}function Ko(b,g,p,G=X=>X){return b*G(.5-
g*(.5-p))}function Ho(b){return[-b[0],-b[1]]}function Bl(b,g){return[b[0]+g[0],b[1]+g[1]]}function yk(b,g){return[b[0]-g[0],b[1]-g[1]]}function Cl(b,g){return[b[0]*g,b[1]*g]}function fm(b){return[b[1],-b[0]]}function Op(b,g){return b[0]===g[0]&&b[1]===g[1]}function Io(b){return b[0]*b[0]+b[1]*b[1]}function Jo(b){var g=Math.hypot(b[0],b[1]);return[b[0]/g,b[1]/g]}function La(b,g){return Math.hypot(b[1]-g[1],b[0]-g[0])}function Ya(b,g,p){let G=Math.sin(p);p=Math.cos(p);let X=b[0]-g[0];b=b[1]-g[1];return[X*
p-b*G+g[0],X*G+b*p+g[1]]}function Ka(b,g,p){return Bl(b,Cl(yk(g,b),p))}function hb(b,g,p){return Bl(b,Cl(g,p))}function Jb(b,g={}){let {size:p=16,smoothing:G=.5,thinning:X=.5,simulatePressure:la=!0,easing:pa=ed=>ed,start:Ga={},end:Qa={},last:Za=!1}=g,{cap:eb=!0,easing:mb=ed=>ed*(2-ed)}=Ga,{cap:Lb=!0,easing:Vb=ed=>--ed*ed*ed+1}=Qa;if(0===b.length||0>=p)return[];var Pb=b[b.length-1].runningLength;let ec=!1===Ga.taper?0:!0===Ga.taper?Math.max(p,Pb):Ga.taper,gc=!1===Qa.taper?0:!0===Qa.taper?Math.max(p,
Pb):Qa.taper;var Tb=Math.pow(p*G,2);g=[];let nc=[];var oc=b.slice(0,10).reduce((ed,ld)=>{var $d=ld.pressure;la&&(ld=os(1,ld.distance/p),$d=os(1,1-ld),$d=os(1,ed+.275*($d-ed)*ld));return(ed+$d)/2},b[0].pressure),Ec=Ko(p,X,b[b.length-1].pressure,pa),Sc;let vd=b[0].vector;var Wd=b[0].point;let he=Wd;var De=Wd;let Ye=he;var jf=!1;for(var Ne=0;Ne<b.length;Ne++){var {pressure:Ae}=b[Ne];let {point:ed,vector:ld,distance:$d,runningLength:Oe}=b[Ne];if(Ne<b.length-1&&3>Pb-Oe)continue;X?(la&&(Ec=os(1,$d/p),Ae=
os(1,1-Ec),Ae=os(1,oc+.275*(Ae-oc)*Ec)),Ec=Ko(p,X,Ae,pa)):Ec=p/2;void 0===Sc&&(Sc=Ec);var Ad=Oe<ec?mb(Oe/ec):1,ad=Pb-Oe<gc?Vb((Pb-Oe)/gc):1;Ec=Math.max(.01,Ec*Math.min(Ad,ad));ad=(Ne<b.length-1?b[Ne+1]:b[Ne]).vector;let mf=Ne<b.length-1?ld[0]*ad[0]+ld[1]*ad[1]:1;Ad=null!==mf&&0>mf;if(0>ld[0]*vd[0]+ld[1]*vd[1]&&!jf||Ad){Wd=Cl(fm(vd),Ec);for(let Sf=1/13,qf=0;1>=qf;qf+=Sf)De=Ya(yk(ed,Wd),ed,ut*qf),g.push(De),Ye=Ya(Bl(ed,Wd),ed,ut*-qf),nc.push(Ye);Wd=De;he=Ye;Ad&&(jf=!0)}else(jf=!1,Ne===b.length-1)?(Ae=
Cl(fm(ld),Ec),g.push(yk(ed,Ae)),nc.push(Bl(ed,Ae))):(oc=Cl(fm(Ka(ad,ld,mf)),Ec),De=yk(ed,oc),(1>=Ne||Io(yk(Wd,De))>Tb)&&(g.push(De),Wd=De),Ye=Bl(ed,oc),(1>=Ne||Io(yk(he,Ye))>Tb)&&(nc.push(Ye),he=Ye),oc=Ae,vd=ld)}Pb=b[0].point.slice(0,2);Tb=1<b.length?b[b.length-1].point.slice(0,2):Bl(b[0].point,[1,1]);De=[];jf=[];if(1===b.length){if(!ec&&!gc||Za){b=hb(Pb,Jo(fm(yk(Pb,Tb))),-(Sc||Ec));g=[];for(let ed=1/13,ld=ed;1>=ld;ld+=ed)g.push(Ya(b,Pb,2*ut*ld));return g}}else{if(!(ec||gc&&1===b.length))if(eb)for(let ed=
1/13,ld=ed;1>=ld;ld+=ed)Sc=Ya(nc[0],Pb,ut*ld),De.push(Sc);else Ne=yk(g[0],nc[0]),Sc=Cl(Ne,.5),Ne=Cl(Ne,.51),De.push(yk(Pb,Sc),yk(Pb,Ne),Bl(Pb,Ne),Bl(Pb,Sc));Sc=fm(Ho(b[b.length-1].vector));if(gc||ec&&1===b.length)jf.push(Tb);else if(Lb){b=hb(Tb,Sc,Ec);for(let ed=1/29,ld=ed;1>ld;ld+=ed)jf.push(Ya(b,Tb,3*ut*ld))}else jf.push(Bl(Tb,Cl(Sc,Ec)),Bl(Tb,Cl(Sc,.99*Ec)),yk(Tb,Cl(Sc,.99*Ec)),yk(Tb,Cl(Sc,Ec)))}return g.concat(jf,nc.reverse(),De)}function uc(b,g={}){var p;let {streamline:G=.5,size:X=16,last:la=
!1}=g;if(0===b.length)return[];g=.15+.85*(1-G);b=Array.isArray(b[0])?b:b.map(({x:mb,y:Lb,pressure:Vb=.5})=>[mb,Lb,Vb]);if(2===b.length){var pa=b[1];b=b.slice(0,-1);for(var Ga=1;5>Ga;Ga++)b.push(Ka(b[0],pa,Ga/4))}1===b.length&&(b=[...b,[...Bl(b[0],[1,1]),...b[0].slice(2)]]);pa=[{point:[b[0][0],b[0][1]],pressure:0<=b[0][2]?b[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ga=!1;let Qa=0,Za=pa[0],eb=b.length-1;for(let mb=1;mb<b.length;mb++){let Lb=la&&mb===eb?b[mb].slice(0,2):Ka(Za.point,b[mb],g);
if(Op(Za.point,Lb))continue;let Vb=La(Lb,Za.point);if(Qa+=Vb,mb<eb&&!Ga){if(Qa<X)continue;Ga=!0}Za={point:Lb,pressure:0<=b[mb][2]?b[mb][2]:.5,vector:Jo(yk(Za.point,Lb)),distance:Vb,runningLength:Qa};pa.push(Za)}return pa[0].vector=(null==(p=pa[1])?void 0:p.vector)||[0,0],pa}function Zc(b,g=4/3){return(new Zw(b)).exportAsSVG(g)}function Od(b,g=4/3){return(new Zw(b)).generatePreviewJsx(void 0,g)}function je({id:b,type:g,onRemove:p,showContent:G}){const X=bf(),{handlers:la}=aI.default.useContext(mn);
return(0,nb.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,nb.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,nb.jsx)(kB,{id:b,showReferenceContent:G})}),(0,nb.jsx)("div",{className:"flex-1"}),la.getBlockPageName(b)!==X.currentPage.name&&(0,nb.jsx)(ka,{tooltip:"Open Page",type:"button",onClick:()=>null==la?void 0:la.redirectToPage(b),children:(0,nb.jsx)(Bh,{name:"open-as-page"})}),(0,nb.jsx)(ka,{tooltip:"Open Page in Right Sidebar",
type:"button",onClick:()=>null==la?void 0:la.sidebarAddBlock(b,"B"===g?"block":"page"),children:(0,nb.jsx)(Bh,{name:"move-to-sidebar-right"})}),p&&(0,nb.jsx)(ka,{className:"tl-shape-links-panel-item-remove-button",tooltip:"Remove link",type:"button",onClick:p,children:(0,nb.jsx)(Bh,{name:"x",className:"!translate-y-0"})})]})}function Fe({options:b,value:g,onValueChange:p}){return(0,nb.jsx)(bC,{className:"tl-toggle-group-input",type:"single",value:g,onValueChange:p,children:b.map(G=>(0,nb.jsx)(dc,
{content:G.tooltip,children:(0,nb.jsx)("div",{className:"inline-block",children:(0,nb.jsx)(cC,{className:"tl-toggle-group-input-button",value:G.value,disabled:G.value===g,children:(0,nb.jsx)(Bh,{name:G.icon})})})},G.value))})}function fa({options:b,value:g,onValueChange:p}){return(0,nb.jsx)(bC,{className:"tl-toggle-group-input",type:"multiple",value:g,onValueChange:p,children:b.map(G=>(0,nb.jsx)(cC,{className:"tl-toggle-group-input-button",value:G.value,children:(0,nb.jsx)(Bh,{name:G.icon})},G.value))})}
function va(b){var {toggle:g=!0,pressed:p,onPressedChange:G,className:X,tooltip:la}=b;b=Af(b,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,nb.jsx)(dc,{content:la,children:(0,nb.jsx)("div",{className:"inline-block",children:(0,nb.jsx)(EJ,lf(pe({},b),{"data-toggle":g,className:"tl-toggle-input"+(X?" "+X:""),pressed:p,onPressedChange:G}))})})}function Wa(b){return bf().selectedShapesArray.filter(g=>!g.props.isLocked).filter(g=>{var p;return null==(p=$w[g.props.type])?void 0:
p.includes(b)})}function xb(b){return g=>"mouse"!==g.pointerType?b(g):void 0}function bc(b){b=b.match(/\.[0-9a-z]+$/i);if(!b)return"unknown";b=b[0].toLowerCase();return jK.includes(b)?"image":kK.includes(b)?"video":"unknown"}function xc(...b){return(...g)=>ai(this,null,function*(){for(const p of b){const G=yield p(...g);if(G&&0<G.length)return G}return null})}function Wc(b,g){return ai(this,null,function*(){return b.types.includes(g)?b instanceof DataTransfer?b.getData(g):yield(yield b.getType(g)).text():
null})}function pd(){const {handlers:b}=hC.useContext(mn);return hC.useCallback((g,p)=>ai(this,null,function*(){if(p.shiftKey&&1===g.selectedShapesArray.length){var G=yield navigator.clipboard.read();let X;0<G.length&&(G=(yield(yield G[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(G)&&40===G.length?(G=G.slice(2,-2),gk(G)&&(X=G)):/^\[\[.*\]\]$/.test(G)&&(X=G.slice(2,-2)));if(X){g.selectedShapesArray[0].update({refs:[X]});g.persist();return}}lK(g,p,b)}),[])}function Bd(){const b=pd();
return iK.useCallback((g,p)=>ai(this,[g,p],function*(G,{dataTransfer:X,point:la}){b(G,{point:la,shiftKey:!1,dataTransfer:X,fromDrop:!0})}),[])}function Vd(){const {handlers:b}=iC.useContext(mn);return iC.useCallback((g,{text:p,html:G})=>{b.copyToClipboard(p,G)},[])}function ze(){return mK.default.useCallback(b=>ai(this,null,function*(){setTimeout(()=>{b.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var $e=Object.create,tf=Object.defineProperty,Fg=Object.defineProperties,
Ig=Object.getOwnPropertyDescriptor,yi=Object.getOwnPropertyDescriptors,Ek=Object.getOwnPropertyNames,ck=Object.getOwnPropertySymbols,Wh=Object.getPrototypeOf,Lj=Object.prototype.hasOwnProperty,wl=Object.prototype.propertyIsEnumerable,xn=(b,g,p)=>g in b?tf(b,g,{enumerable:!0,configurable:!0,writable:!0,value:p}):b[g]=p,pe=(b,g)=>{for(var p in g||={})Lj.call(g,p)&&xn(b,p,g[p]);if(ck)for(p of ck(g))wl.call(g,p)&&xn(b,p,g[p]);return b},lf=(b,g)=>Fg(b,yi(g)),Af=(b,g)=>{var p={},G;for(G in b)Lj.call(b,
G)&&0>g.indexOf(G)&&(p[G]=b[G]);if(null!=b&&ck)for(G of ck(b))0>g.indexOf(G)&&wl.call(b,G)&&(p[G]=b[G]);return p},mh=(b,g)=>function(){return g||(0,b[Ek(b)[0]])((g={exports:{}}).exports,g),g.exports},Jm=(b,g,p,G)=>{if(g&&"object"===typeof g||"function"===typeof g)for(let X of Ek(g))Lj.call(b,X)||X===p||tf(b,X,{get:()=>g[X],enumerable:!(G=Ig(g,X))||G.enumerable});return b},uf=(b,g,p)=>(p=null!=b?$e(Wh(b)):{},Jm(!g&&b&&b.__esModule?p:tf(p,"default",{value:b,enumerable:!0}),b)),de=(b,g,p,G)=>{for(var X=
1<G?void 0:G?Ig(g,p):g,la=b.length-1,pa;0<=la;la--)if(pa=b[la])X=(G?pa(g,p,X):pa(X))||X;G&&X&&tf(g,p,X);return X},ib=(b,g,p)=>{xn(b,"symbol"!==typeof g?g+"":g,p);return p},ai=(b,g,p)=>new Promise((G,X)=>{var la=Qa=>{try{Ga(p.next(Qa))}catch(Za){X(Za)}},pa=Qa=>{try{Ga(p.throw(Qa))}catch(Za){X(Za)}},Ga=Qa=>Qa.done?G(Qa.value):Promise.resolve(Qa.value).then(la,pa);Ga((p=p.apply(b,g)).next())}),vm=mh({["../../node_modules/mousetrap/mousetrap.js"](b,g){(function(p,G,X){function la(gc,Tb,nc){gc.addEventListener?
gc.addEventListener(Tb,nc,!1):gc.attachEvent("on"+Tb,nc)}function pa(gc){if("keypress"==gc.type){var Tb=String.fromCharCode(gc.which);gc.shiftKey||(Tb=Tb.toLowerCase());return Tb}return mb[gc.which]?mb[gc.which]:Lb[gc.which]?Lb[gc.which]:String.fromCharCode(gc.which).toLowerCase()}function Ga(gc){return"shift"==gc||"ctrl"==gc||"alt"==gc||"meta"==gc}function Qa(gc,Tb){var nc,oc=[];"+"===gc?gc=["+"]:(gc=gc.replace(/\+{2}/g,"+plus"),gc=gc.split("+"));for(nc=0;nc<gc.length;++nc){var Ec=gc[nc];Pb[Ec]&&
(Ec=Pb[Ec]);Tb&&"keypress"!=Tb&&Vb[Ec]&&(Ec=Vb[Ec],oc.push("shift"));Ga(Ec)&&oc.push(Ec)}gc=Ec;if(!Tb){if(!ec){ec={};for(var Sc in mb)95<Sc&&112>Sc||mb.hasOwnProperty(Sc)&&(ec[mb[Sc]]=Sc)}Tb=ec[gc]?"keydown":"keypress"}"keypress"==Tb&&oc.length&&(Tb="keydown");return{key:Ec,modifiers:oc,action:Tb}}function Za(gc,Tb){return null===gc||gc===G?!1:gc===Tb?!0:Za(gc.parentNode,Tb)}function eb(gc){function Tb(Ae){Ae=Ae||{};var Ad=!1,ad;for(ad in he)Ae[ad]?Ad=!0:he[ad]=0;Ad||(Ne=!1)}function nc(Ae,Ad,ad,
ed,ld,$d){var Oe,mf=[],Sf=ad.type;if(!Wd._callbacks[Ae])return[];"keyup"==Sf&&Ga(Ae)&&(Ad=[Ae]);for(Oe=0;Oe<Wd._callbacks[Ae].length;++Oe){var qf=Wd._callbacks[Ae][Oe];if((ed||!qf.seq||he[qf.seq]==qf.level)&&Sf==qf.action){var Gf;(Gf="keypress"==Sf&&!ad.metaKey&&!ad.ctrlKey)||(Gf=qf.modifiers,Gf=Ad.sort().join(",")===Gf.sort().join(","));Gf&&(Gf=ed&&qf.seq==ed&&qf.level==$d,(!ed&&qf.combo==ld||Gf)&&Wd._callbacks[Ae].splice(Oe,1),mf.push(qf))}}return mf}function oc(Ae,Ad,ad,ed){Wd.stopCallback(Ad,
Ad.target||Ad.srcElement,ad,ed)||!1!==Ae(Ad,ad)||(Ad.preventDefault?Ad.preventDefault():Ad.returnValue=!1,Ad.stopPropagation?Ad.stopPropagation():Ad.cancelBubble=!0)}function Ec(Ae){"number"!==typeof Ae.which&&(Ae.which=Ae.keyCode);var Ad=pa(Ae);if(Ad)if("keyup"==Ae.type&&Ye===Ad)Ye=!1;else{var ad=Wd,ed=ad.handleKey,ld=[];Ae.shiftKey&&ld.push("shift");Ae.altKey&&ld.push("alt");Ae.ctrlKey&&ld.push("ctrl");Ae.metaKey&&ld.push("meta");ed.call(ad,Ad,ld,Ae)}}function Sc(Ae,Ad,ad,ed){function ld(Sf){return function(){Ne=
Sf;++he[Ae];clearTimeout(De);De=setTimeout(Tb,1E3)}}function $d(Sf){oc(ad,Sf,Ae);"keyup"!==ed&&(Ye=pa(Sf));setTimeout(Tb,10)}for(var Oe=he[Ae]=0;Oe<Ad.length;++Oe){var mf=Oe+1===Ad.length?$d:ld(ed||Qa(Ad[Oe+1]).action);vd(Ad[Oe],mf,ed,Ae,Oe)}}function vd(Ae,Ad,ad,ed,ld){Wd._directMap[Ae+":"+ad]=Ad;Ae=Ae.replace(/\s+/g," ");var $d=Ae.split(" ");1<$d.length?Sc(Ae,$d,Ad,ad):(ad=Qa(Ae,ad),Wd._callbacks[ad.key]=Wd._callbacks[ad.key]||[],nc(ad.key,ad.modifiers,{type:ad.action},ed,Ae,ld),Wd._callbacks[ad.key][ed?
"unshift":"push"]({callback:Ad,modifiers:ad.modifiers,action:ad.action,seq:ed,level:ld,combo:Ae}))}var Wd=this;gc=gc||G;if(!(Wd instanceof eb))return new eb(gc);Wd.target=gc;Wd._callbacks={};Wd._directMap={};var he={},De,Ye=!1,jf=!1,Ne=!1;Wd._handleKey=function(Ae,Ad,ad){var ed=nc(Ae,Ad,ad),ld;Ad={};var $d=0,Oe=!1;for(ld=0;ld<ed.length;++ld)ed[ld].seq&&($d=Math.max($d,ed[ld].level));for(ld=0;ld<ed.length;++ld)ed[ld].seq?ed[ld].level==$d&&(Oe=!0,Ad[ed[ld].seq]=1,oc(ed[ld].callback,ad,ed[ld].combo,
ed[ld].seq)):Oe||oc(ed[ld].callback,ad,ed[ld].combo);ed="keypress"==ad.type&&jf;ad.type!=Ne||Ga(Ae)||ed||Tb(Ad);jf=Oe&&"keydown"==ad.type};Wd._bindMultiple=function(Ae,Ad,ad){for(var ed=0;ed<Ae.length;++ed)vd(Ae[ed],Ad,ad)};la(gc,"keypress",Ec);la(gc,"keydown",Ec);la(gc,"keyup",Ec)}if(p){var mb={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",
93:"meta",224:"meta"},Lb={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vb={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","\x26":"7","*":"8","(":"9",")":"0",_:"-","+":"\x3d",":":";",'"':"'","\x3c":",","\x3e":".","?":"/","|":"\\"},Pb={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},ec;for(X=1;20>X;++X)mb[111+X]="f"+X;for(X=
0;9>=X;++X)mb[X+96]=X.toString();eb.prototype.bind=function(gc,Tb,nc){gc=gc instanceof Array?gc:[gc];this._bindMultiple.call(this,gc,Tb,nc);return this};eb.prototype.unbind=function(gc,Tb){return this.bind.call(this,gc,function(){},Tb)};eb.prototype.trigger=function(gc,Tb){if(this._directMap[gc+":"+Tb])this._directMap[gc+":"+Tb]({},gc);return this};eb.prototype.reset=function(){this._callbacks={};this._directMap={};return this};eb.prototype.stopCallback=function(gc,Tb){if(-1<(" "+Tb.className+" ").indexOf(" mousetrap ")||
Za(Tb,this.target))return!1;if("composedPath"in gc&&"function"===typeof gc.composedPath){var nc=gc.composedPath()[0];nc!==gc.target&&(Tb=nc)}return"INPUT"==Tb.tagName||"SELECT"==Tb.tagName||"TEXTAREA"==Tb.tagName||Tb.isContentEditable};eb.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};eb.addKeycodes=function(gc){for(var Tb in gc)gc.hasOwnProperty(Tb)&&(mb[Tb]=gc[Tb]);ec=null};eb.init=function(){var gc=eb(G),Tb;for(Tb in gc)"_"!==Tb.charAt(0)&&(eb[Tb]=function(nc){return function(){return gc[nc].apply(gc,
arguments)}}(Tb))};eb.init();p.Mousetrap=eb;"undefined"!==typeof g&&g.exports&&(g.exports=eb);"function"===typeof define&&define.amd&&define(function(){return eb})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}),Dr=mh({["../../node_modules/rbush/rbush.min.js"](b,g){!function(p,G){"object"==typeof b&&"undefined"!=typeof g?g.exports=G():"function"==typeof define&&define.amd?define(G):(p=p||self).RBush=G()}(b,function(){function p(Tb,nc,oc,Ec,Sc){!function Ne(Wd,
he,De,Ye,jf){for(;Ye>De;){if(600<Ye-De){var Ae=Ye-De+1,Ad=he-De+1,ad=Math.log(Ae),ed=.5*Math.exp(2*ad/3);ad=.5*Math.sqrt(ad*ed*(Ae-ed)/Ae)*(0>Ad-Ae/2?-1:1);Ne(Wd,he,Math.max(De,Math.floor(he-Ad*ed/Ae+ad)),Math.min(Ye,Math.floor(he+(Ae-Ad)*ed/Ae+ad)),jf)}Ae=Wd[he];Ad=De;ed=Ye;G(Wd,De,he);for(0<jf(Wd[Ye],Ae)&&G(Wd,De,Ye);Ad<ed;){G(Wd,Ad,ed);Ad++;for(ed--;0>jf(Wd[Ad],Ae);)Ad++;for(;0<jf(Wd[ed],Ae);)ed--}0===jf(Wd[De],Ae)?G(Wd,De,ed):G(Wd,++ed,Ye);ed<=he&&(De=ed+1);he<=ed&&(Ye=ed-1)}}(Tb,nc,oc||0,Ec||
Tb.length-1,Sc||X)}function G(Tb,nc,oc){var Ec=Tb[nc];Tb[nc]=Tb[oc];Tb[oc]=Ec}function X(Tb,nc){return Tb<nc?-1:Tb>nc?1:0}function la(Tb,nc){pa(Tb,0,Tb.children.length,nc,Tb)}function pa(Tb,nc,oc,Ec,Sc){Sc||=Pb(null);Sc.minX=1/0;Sc.minY=1/0;Sc.maxX=-1/0;for(Sc.maxY=-1/0;nc<oc;nc++){var vd=Tb.children[nc];Ga(Sc,Tb.leaf?Ec(vd):vd)}return Sc}function Ga(Tb,nc){return Tb.minX=Math.min(Tb.minX,nc.minX),Tb.minY=Math.min(Tb.minY,nc.minY),Tb.maxX=Math.max(Tb.maxX,nc.maxX),Tb.maxY=Math.max(Tb.maxY,nc.maxY),
Tb}function Qa(Tb,nc){return Tb.minX-nc.minX}function Za(Tb,nc){return Tb.minY-nc.minY}function eb(Tb){return(Tb.maxX-Tb.minX)*(Tb.maxY-Tb.minY)}function mb(Tb){return Tb.maxX-Tb.minX+(Tb.maxY-Tb.minY)}function Lb(Tb,nc){return Tb.minX<=nc.minX&&Tb.minY<=nc.minY&&nc.maxX<=Tb.maxX&&nc.maxY<=Tb.maxY}function Vb(Tb,nc){return nc.minX<=Tb.maxX&&nc.minY<=Tb.maxY&&nc.maxX>=Tb.minX&&nc.maxY>=Tb.minY}function Pb(Tb){return{children:Tb,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ec(Tb,
nc,oc,Ec,Sc){for(var vd=[nc,oc];vd.length;)if(!((oc=vd.pop())-(nc=vd.pop())<=Ec)){var Wd=nc+Math.ceil((oc-nc)/Ec/2)*Ec;p(Tb,Wd,nc,oc,Sc);vd.push(nc,Wd,Wd,oc)}}var gc=function(Tb){void 0===Tb&&(Tb=9);this._maxEntries=Math.max(4,Tb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return gc.prototype.all=function(){return this._all(this.data,[])},gc.prototype.search=function(Tb){var nc=this.data,oc=[];if(!Vb(Tb,nc))return oc;for(var Ec=this.toBBox,Sc=[];nc;){for(var vd=0;vd<
nc.children.length;vd++){var Wd=nc.children[vd],he=nc.leaf?Ec(Wd):Wd;Vb(Tb,he)&&(nc.leaf?oc.push(Wd):Lb(Tb,he)?this._all(Wd,oc):Sc.push(Wd))}nc=Sc.pop()}return oc},gc.prototype.collides=function(Tb){var nc=this.data;if(!Vb(Tb,nc))return!1;for(var oc=[];nc;){for(var Ec=0;Ec<nc.children.length;Ec++){var Sc=nc.children[Ec],vd=nc.leaf?this.toBBox(Sc):Sc;if(Vb(Tb,vd)){if(nc.leaf||Lb(Tb,vd))return!0;oc.push(Sc)}}nc=oc.pop()}return!1},gc.prototype.load=function(Tb){if(!Tb||!Tb.length)return this;if(Tb.length<
this._minEntries){for(var nc=0;nc<Tb.length;nc++)this.insert(Tb[nc]);return this}Tb=this._build(Tb.slice(),0,Tb.length-1,0);this.data.children.length?this.data.height===Tb.height?this._splitRoot(this.data,Tb):(this.data.height<Tb.height&&(nc=this.data,this.data=Tb,Tb=nc),this._insert(Tb,this.data.height-Tb.height-1,!0)):this.data=Tb;return this},gc.prototype.insert=function(Tb){return Tb&&this._insert(Tb,this.data.height-1),this},gc.prototype.clear=function(){return this.data=Pb([]),this},gc.prototype.remove=
function(Tb,nc){if(!Tb)return this;for(var oc,Ec,Sc,vd=this.data,Wd=this.toBBox(Tb),he=[],De=[];vd||he.length;){if(vd||(vd=he.pop(),Ec=he[he.length-1],oc=De.pop(),Sc=!0),vd.leaf){a:{var Ye=Tb;var jf=vd.children,Ne=nc;if(Ne){for(var Ae=0;Ae<jf.length;Ae++)if(Ne(Ye,jf[Ae])){Ye=Ae;break a}Ye=-1}else Ye=jf.indexOf(Ye)}if(-1!==Ye)return vd.children.splice(Ye,1),he.push(vd),this._condense(he),this}Sc||vd.leaf||!Lb(vd,Wd)?Ec?(oc++,vd=Ec.children[oc],Sc=!1):vd=null:(he.push(vd),De.push(oc),oc=0,Ec=vd,vd=
vd.children[0])}return this},gc.prototype.toBBox=function(Tb){return Tb},gc.prototype.compareMinX=function(Tb,nc){return Tb.minX-nc.minX},gc.prototype.compareMinY=function(Tb,nc){return Tb.minY-nc.minY},gc.prototype.toJSON=function(){return this.data},gc.prototype.fromJSON=function(Tb){return this.data=Tb,this},gc.prototype._all=function(Tb,nc){for(var oc=[];Tb;)Tb.leaf?nc.push.apply(nc,Tb.children):oc.push.apply(oc,Tb.children),Tb=oc.pop();return nc},gc.prototype._build=function(Tb,nc,oc,Ec){var Sc,
vd=oc-nc+1,Wd=this._maxEntries;if(vd<=Wd)return la(Sc=Pb(Tb.slice(nc,oc+1)),this.toBBox),Sc;Ec||(Ec=Math.ceil(Math.log(vd)/Math.log(Wd)),Wd=Math.ceil(vd/Math.pow(Wd,Ec-1)));(Sc=Pb([])).leaf=!1;Sc.height=Ec;vd=Math.ceil(vd/Wd);Wd=vd*Math.ceil(Math.sqrt(Wd));for(ec(Tb,nc,oc,Wd,this.compareMinX);nc<=oc;nc+=Wd){var he=Math.min(nc+Wd-1,oc);ec(Tb,nc,he,vd,this.compareMinY);for(var De=nc;De<=he;De+=vd)Sc.children.push(this._build(Tb,De,Math.min(De+vd-1,he),Ec-1))}return la(Sc,this.toBBox),Sc},gc.prototype._chooseSubtree=
function(Tb,nc,oc,Ec){for(;Ec.push(nc),!nc.leaf&&Ec.length-1!==oc;){for(var Sc=1/0,vd=1/0,Wd=void 0,he=0;he<nc.children.length;he++){var De=nc.children[he],Ye=eb(De),jf=(Ne=Tb,Ae=De,(Math.max(Ae.maxX,Ne.maxX)-Math.min(Ae.minX,Ne.minX))*(Math.max(Ae.maxY,Ne.maxY)-Math.min(Ae.minY,Ne.minY))-Ye);jf<vd?(vd=jf,Sc=Ye<Sc?Ye:Sc,Wd=De):jf===vd&&Ye<Sc&&(Sc=Ye,Wd=De)}nc=Wd||nc.children[0]}var Ne,Ae;return nc},gc.prototype._insert=function(Tb,nc,oc){oc=oc?Tb:this.toBBox(Tb);var Ec=[],Sc=this._chooseSubtree(oc,
this.data,nc,Ec);Sc.children.push(Tb);for(Ga(Sc,oc);0<=nc&&Ec[nc].children.length>this._maxEntries;)this._split(Ec,nc),nc--;this._adjustParentBBoxes(oc,Ec,nc)},gc.prototype._split=function(Tb,nc){var oc=Tb[nc],Ec=oc.children.length,Sc=this._minEntries;this._chooseSplitAxis(oc,Sc,Ec);Ec=this._chooseSplitIndex(oc,Sc,Ec);Ec=Pb(oc.children.splice(Ec,oc.children.length-Ec));Ec.height=oc.height;Ec.leaf=oc.leaf;la(oc,this.toBBox);la(Ec,this.toBBox);nc?Tb[nc-1].children.push(Ec):this._splitRoot(oc,Ec)},gc.prototype._splitRoot=
function(Tb,nc){this.data=Pb([Tb,nc]);this.data.height=Tb.height+1;this.data.leaf=!1;la(this.data,this.toBBox)},gc.prototype._chooseSplitIndex=function(Tb,nc,oc){for(var Ec,Sc,vd,Wd,he,De,Ye,jf=1/0,Ne=1/0,Ae=nc;Ae<=oc-nc;Ae++){var Ad=pa(Tb,0,Ae,this.toBBox),ad=pa(Tb,Ae,oc,this.toBBox),ed=(Sc=Ad,vd=ad,Wd=void 0,he=void 0,De=void 0,Ye=void 0,Wd=Math.max(Sc.minX,vd.minX),he=Math.max(Sc.minY,vd.minY),De=Math.min(Sc.maxX,vd.maxX),Ye=Math.min(Sc.maxY,vd.maxY),Math.max(0,De-Wd)*Math.max(0,Ye-he));Ad=eb(Ad)+
eb(ad);ed<jf?(jf=ed,Ec=Ae,Ne=Ad<Ne?Ad:Ne):ed===jf&&Ad<Ne&&(Ne=Ad,Ec=Ae)}return Ec||oc-nc},gc.prototype._chooseSplitAxis=function(Tb,nc,oc){var Ec=Tb.leaf?this.compareMinX:Qa,Sc=Tb.leaf?this.compareMinY:Za;this._allDistMargin(Tb,nc,oc,Ec)<this._allDistMargin(Tb,nc,oc,Sc)&&Tb.children.sort(Ec)},gc.prototype._allDistMargin=function(Tb,nc,oc,Ec){Tb.children.sort(Ec);Ec=this.toBBox;for(var Sc=pa(Tb,0,nc,Ec),vd=pa(Tb,oc-nc,oc,Ec),Wd=mb(Sc)+mb(vd),he=nc;he<oc-nc;he++){var De=Tb.children[he];Ga(Sc,Tb.leaf?
Ec(De):De);Wd+=mb(Sc)}for(oc=oc-nc-1;oc>=nc;oc--)Sc=Tb.children[oc],Ga(vd,Tb.leaf?Ec(Sc):Sc),Wd+=mb(vd);return Wd},gc.prototype._adjustParentBBoxes=function(Tb,nc,oc){for(;0<=oc;oc--)Ga(nc[oc],Tb)},gc.prototype._condense=function(Tb){for(var nc=Tb.length-1,oc=void 0;0<=nc;nc--)0===Tb[nc].children.length?0<nc?(oc=Tb[nc-1].children).splice(oc.indexOf(Tb[nc]),1):this.clear():la(Tb[nc],this.toBBox)},gc})}}),Sp=mh({["../../node_modules/fast-deep-equal/index.js"](b,g){g.exports=function la(G,X){if(G===
X)return!0;if(G&&X&&"object"==typeof G&&"object"==typeof X){if(G.constructor!==X.constructor)return!1;var pa;if(Array.isArray(G)){var Ga=G.length;if(Ga!=X.length)return!1;for(pa=Ga;0!==pa--;)if(!la(G[pa],X[pa]))return!1;return!0}if(G.constructor===RegExp)return G.source===X.source&&G.flags===X.flags;if(G.valueOf!==Object.prototype.valueOf)return G.valueOf()===X.valueOf();if(G.toString!==Object.prototype.toString)return G.toString()===X.toString();var Qa=Object.keys(G);Ga=Qa.length;if(Ga!==Object.keys(X).length)return!1;
for(pa=Ga;0!==pa--;)if(!Object.prototype.hasOwnProperty.call(X,Qa[pa]))return!1;for(pa=Ga;0!==pa--;)if(Ga=Qa[pa],!la(G[Ga],X[Ga]))return!1;return!0}return G!==G&&X!==X}}}),Kq=mh({["../../../node_modules/deepmerge/dist/cjs.js"](b,g){function p(mb,Lb){return!1!==Lb.clone&&Lb.isMergeableObject(mb)?Qa(Array.isArray(mb)?[]:{},mb,Lb):mb}function G(mb,Lb,Vb){return mb.concat(Lb).map(function(Pb){return p(Pb,Vb)})}function X(mb){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(mb).filter(function(Lb){return mb.propertyIsEnumerable(Lb)}):
[]}function la(mb){return Object.keys(mb).concat(X(mb))}function pa(mb,Lb){try{return Lb in mb}catch(Vb){return!1}}function Ga(mb,Lb,Vb){var Pb={};Vb.isMergeableObject(mb)&&la(mb).forEach(function(ec){Pb[ec]=p(mb[ec],Vb)});la(Lb).forEach(function(ec){if(!pa(mb,ec)||Object.hasOwnProperty.call(mb,ec)&&Object.propertyIsEnumerable.call(mb,ec))if(pa(mb,ec)&&Vb.isMergeableObject(Lb[ec])){if(Vb.customMerge){var gc=Vb.customMerge(ec);gc="function"===typeof gc?gc:Qa}else gc=Qa;Pb[ec]=gc(mb[ec],Lb[ec],Vb)}else Pb[ec]=
p(Lb[ec],Vb)});return Pb}function Qa(mb,Lb,Vb){Vb=Vb||{};Vb.arrayMerge=Vb.arrayMerge||G;Vb.isMergeableObject=Vb.isMergeableObject||Za;Vb.cloneUnlessOtherwiseSpecified=p;var Pb=Array.isArray(Lb),ec=Array.isArray(mb);return Pb!==ec?p(Lb,Vb):Pb?Vb.arrayMerge(mb,Lb,Vb):Ga(mb,Lb,Vb)}var Za=function(mb){var Lb;if(Lb=!!mb&&"object"===typeof mb)Lb=Object.prototype.toString.call(mb),Lb=!("[object RegExp]"===Lb||"[object Date]"===Lb||mb.$$typeof===eb);return Lb},eb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):
60103;Qa.all=function(mb,Lb){if(!Array.isArray(mb))throw Error("first argument should be an array");return mb.reduce(function(Vb,Pb){return Qa(Vb,Pb,Lb)},{})};g.exports=Qa}}),Pp=mh({["../../node_modules/tslib/tslib.js"](b,g){var p,G,X,la,pa,Ga,Qa,Za,eb,mb,Lb,Vb,Pb,ec,gc,Tb,nc,oc,Ec,Sc,vd,Wd,he,De,Ye;(function(jf){function Ne(Ad,ad){Ad!==Ae&&("function"===typeof Object.create?Object.defineProperty(Ad,"__esModule",{value:!0}):Ad.__esModule=!0);return function(ed,ld){return Ad[ed]=ad?ad(ed,ld):ld}}var Ae=
"object"===typeof wa?wa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Ad){jf(Ne(Ae,Ne(Ad)))}):"object"===typeof g&&"object"===typeof g.exports?jf(Ne(Ae,Ne(g.exports))):jf(Ne(Ae))})(function(jf){var Ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ad,ad){Ad.__proto__=ad}||function(Ad,ad){for(var ed in ad)Object.prototype.hasOwnProperty.call(ad,ed)&&(Ad[ed]=ad[ed])};p=function(Ad,ad){function ed(){this.constructor=
Ad}if("function"!==typeof ad&&null!==ad)throw new TypeError("Class extends value "+String(ad)+" is not a constructor or null");Ne(Ad,ad);Ad.prototype=null===ad?Object.create(ad):(ed.prototype=ad.prototype,new ed)};G=Object.assign||function(Ad){for(var ad,ed=1,ld=arguments.length;ed<ld;ed++){ad=arguments[ed];for(var $d in ad)Object.prototype.hasOwnProperty.call(ad,$d)&&(Ad[$d]=ad[$d])}return Ad};X=function(Ad,ad){var ed={},ld;for(ld in Ad)Object.prototype.hasOwnProperty.call(Ad,ld)&&0>ad.indexOf(ld)&&
(ed[ld]=Ad[ld]);if(null!=Ad&&"function"===typeof Object.getOwnPropertySymbols){var $d=0;for(ld=Object.getOwnPropertySymbols(Ad);$d<ld.length;$d++)0>ad.indexOf(ld[$d])&&Object.prototype.propertyIsEnumerable.call(Ad,ld[$d])&&(ed[ld[$d]]=Ad[ld[$d]])}return ed};la=function(Ad,ad,ed,ld){var $d=arguments.length,Oe=3>$d?ad:null===ld?ld=Object.getOwnPropertyDescriptor(ad,ed):ld,mf;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)Oe=Reflect.decorate(Ad,ad,ed,ld);else for(var Sf=Ad.length-
1;0<=Sf;Sf--)if(mf=Ad[Sf])Oe=(3>$d?mf(Oe):3<$d?mf(ad,ed,Oe):mf(ad,ed))||Oe;return 3<$d&&Oe&&Object.defineProperty(ad,ed,Oe),Oe};pa=function(Ad,ad){return function(ed,ld){ad(ed,ld,Ad)}};Ga=function(Ad,ad){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Ad,ad)};Qa=function(Ad,ad,ed,ld){function $d(Oe){return Oe instanceof ed?Oe:new ed(function(mf){mf(Oe)})}return new (ed||=Promise)(function(Oe,mf){function Sf(hh){try{Gf(ld.next(hh))}catch(Ef){mf(Ef)}}function qf(hh){try{Gf(ld["throw"](hh))}catch(Ef){mf(Ef)}}
function Gf(hh){hh.done?Oe(hh.value):$d(hh.value).then(Sf,qf)}Gf((ld=ld.apply(Ad,ad||[])).next())})};Za=function(Ad,ad){function ed(Gf){return function(hh){return ld([Gf,hh])}}function ld(Gf){if(Oe)throw new TypeError("Generator is already executing.");for(;$d;)try{if(Oe=1,mf&&(Sf=Gf[0]&2?mf["return"]:Gf[0]?mf["throw"]||((Sf=mf["return"])&&Sf.call(mf),0):mf.next)&&!(Sf=Sf.call(mf,Gf[1])).done)return Sf;if(mf=0,Sf)Gf=[Gf[0]&2,Sf.value];switch(Gf[0]){case 0:case 1:Sf=Gf;break;case 4:return $d.label++,
{value:Gf[1],done:!1};case 5:$d.label++;mf=Gf[1];Gf=[0];continue;case 7:Gf=$d.ops.pop();$d.trys.pop();continue;default:if(!(Sf=$d.trys,Sf=0<Sf.length&&Sf[Sf.length-1])&&(6===Gf[0]||2===Gf[0])){$d=0;continue}if(3===Gf[0]&&(!Sf||Gf[1]>Sf[0]&&Gf[1]<Sf[3]))$d.label=Gf[1];else if(6===Gf[0]&&$d.label<Sf[1])$d.label=Sf[1],Sf=Gf;else if(Sf&&$d.label<Sf[2])$d.label=Sf[2],$d.ops.push(Gf);else{Sf[2]&&$d.ops.pop();$d.trys.pop();continue}}Gf=ad.call(Ad,$d)}catch(hh){Gf=[6,hh],mf=0}finally{Oe=Sf=0}if(Gf[0]&5)throw Gf[1];
return{value:Gf[0]?Gf[1]:void 0,done:!0}}var $d={label:0,sent:function(){if(Sf[0]&1)throw Sf[1];return Sf[1]},trys:[],ops:[]},Oe,mf,Sf,qf;return qf={next:ed(0),"throw":ed(1),"return":ed(2)},"function"===typeof Symbol&&(qf[Symbol.iterator]=function(){return this}),qf};eb=function(Ad,ad){for(var ed in Ad)"default"===ed||Object.prototype.hasOwnProperty.call(ad,ed)||Ye(ad,Ad,ed)};Ye=Object.create?function(Ad,ad,ed,ld){void 0===ld&&(ld=ed);var $d=Object.getOwnPropertyDescriptor(ad,ed);if(!$d||("get"in
$d?!ad.__esModule:$d.writable||$d.configurable))$d={enumerable:!0,get:function(){return ad[ed]}};Object.defineProperty(Ad,ld,$d)}:function(Ad,ad,ed,ld){void 0===ld&&(ld=ed);Ad[ld]=ad[ed]};mb=function(Ad){var ad="function"===typeof Symbol&&Symbol.iterator,ed=ad&&Ad[ad],ld=0;if(ed)return ed.call(Ad);if(Ad&&"number"===typeof Ad.length)return{next:function(){Ad&&ld>=Ad.length&&(Ad=void 0);return{value:Ad&&Ad[ld++],done:!Ad}}};throw new TypeError(ad?"Object is not iterable.":"Symbol.iterator is not defined.");
};Lb=function(Ad,ad){var ed="function"===typeof Symbol&&Ad[Symbol.iterator];if(!ed)return Ad;Ad=ed.call(Ad);var ld,$d=[];try{for(;(void 0===ad||0<ad--)&&!(ld=Ad.next()).done;)$d.push(ld.value)}catch(mf){var Oe={error:mf}}finally{try{ld&&!ld.done&&(ed=Ad["return"])&&ed.call(Ad)}finally{if(Oe)throw Oe.error;}}return $d};Vb=function(){for(var Ad=[],ad=0;ad<arguments.length;ad++)Ad=Ad.concat(Lb(arguments[ad]));return Ad};Pb=function(){for(var Ad=0,ad=0,ed=arguments.length;ad<ed;ad++)Ad+=arguments[ad].length;
Ad=Array(Ad);var ld=0;for(ad=0;ad<ed;ad++)for(var $d=arguments[ad],Oe=0,mf=$d.length;Oe<mf;Oe++,ld++)Ad[ld]=$d[Oe];return Ad};ec=function(Ad,ad,ed){if(ed||2===arguments.length)for(var ld=0,$d=ad.length,Oe;ld<$d;ld++)!Oe&&ld in ad||(Oe||=Array.prototype.slice.call(ad,0,ld),Oe[ld]=ad[ld]);return Ad.concat(Oe||Array.prototype.slice.call(ad))};gc=function(Ad){return this instanceof gc?(this.v=Ad,this):new gc(Ad)};Tb=function(Ad,ad,ed){function ld(Ef){qf[Ef]&&(Gf[Ef]=function(kh){return new Promise(function(uh,
qj){1<hh.push([Ef,kh,uh,qj])||$d(Ef,kh)})})}function $d(Ef,kh){try{var uh=qf[Ef](kh);uh.value instanceof gc?Promise.resolve(uh.value.v).then(Oe,mf):Sf(hh[0][2],uh)}catch(qj){Sf(hh[0][3],qj)}}function Oe(Ef){$d("next",Ef)}function mf(Ef){$d("throw",Ef)}function Sf(Ef,kh){(Ef(kh),hh.shift(),hh.length)&&$d(hh[0][0],hh[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qf=ed.apply(Ad,ad||[]),Gf,hh=[];return Gf={},ld("next"),ld("throw"),ld("return"),Gf[Symbol.asyncIterator]=
function(){return this},Gf};nc=function(Ad){function ad($d,Oe){ed[$d]=Ad[$d]?function(mf){return(ld=!ld)?{value:gc(Ad[$d](mf)),done:"return"===$d}:Oe?Oe(mf):mf}:Oe}var ed,ld;return ed={},ad("next"),ad("throw",function($d){throw $d;}),ad("return"),ed[Symbol.iterator]=function(){return this},ed};oc=function(Ad){function ad(Oe){$d[Oe]=Ad[Oe]&&function(mf){return new Promise(function(Sf,qf){mf=Ad[Oe](mf);ed(Sf,qf,mf.done,mf.value)})}}function ed(Oe,mf,Sf,qf){Promise.resolve(qf).then(function(Gf){Oe({value:Gf,
done:Sf})},mf)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ld=Ad[Symbol.asyncIterator],$d;return ld?ld.call(Ad):(Ad="function"===typeof mb?mb(Ad):Ad[Symbol.iterator](),$d={},ad("next"),ad("throw"),ad("return"),$d[Symbol.asyncIterator]=function(){return this},$d)};Ec=function(Ad,ad){Object.defineProperty?Object.defineProperty(Ad,"raw",{value:ad}):Ad.raw=ad;return Ad};var Ae=Object.create?function(Ad,ad){Object.defineProperty(Ad,"default",{enumerable:!0,
value:ad})}:function(Ad,ad){Ad["default"]=ad};Sc=function(Ad){if(Ad&&Ad.__esModule)return Ad;var ad={};if(null!=Ad)for(var ed in Ad)"default"!==ed&&Object.prototype.hasOwnProperty.call(Ad,ed)&&Ye(ad,Ad,ed);Ae(ad,Ad);return ad};vd=function(Ad){return Ad&&Ad.__esModule?Ad:{"default":Ad}};Wd=function(Ad,ad,ed,ld){if("a"===ed&&!ld)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof ad?Ad!==ad||!ld:!ad.has(Ad))throw new TypeError("Cannot read private member from an object whose class did not declare it");
return"m"===ed?ld:"a"===ed?ld.call(Ad):ld?ld.value:ad.get(Ad)};he=function(Ad,ad,ed,ld,$d){if("m"===ld)throw new TypeError("Private method is not writable");if("a"===ld&&!$d)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof ad?Ad!==ad||!$d:!ad.has(Ad))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===ld?$d.call(Ad,ed):$d?$d.value=ed:ad.set(Ad,ed),ed};De=function(Ad,ad){if(null===ad||"object"!==typeof ad&&
"function"!==typeof ad)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Ad?ad===Ad:Ad.has(ad)};jf("__extends",p);jf("__assign",G);jf("__rest",X);jf("__decorate",la);jf("__param",pa);jf("__metadata",Ga);jf("__awaiter",Qa);jf("__generator",Za);jf("__exportStar",eb);jf("__createBinding",Ye);jf("__values",mb);jf("__read",Lb);jf("__spread",Vb);jf("__spreadArrays",Pb);jf("__spreadArray",ec);jf("__await",gc);jf("__asyncGenerator",Tb);jf("__asyncDelegator",nc);jf("__asyncValues",
oc);jf("__makeTemplateObject",Ec);jf("__importStar",Sc);jf("__importDefault",vd);jf("__classPrivateFieldGet",Wd);jf("__classPrivateFieldSet",he);jf("__classPrivateFieldIn",De)})}}),Er={};((b,g)=>{for(var p in g)tf(b,p,{get:g[p],enumerable:!0})})(Er,{App:()=>rK,PreviewManager:()=>Zw,generateJSXFromModel:()=>Od,generateSVGFromModel:()=>Zc});Ta.exports=(b=>Jm(tf({},"__esModule",{value:!0}),b))(Er);var Mq=(b=>{b.Yellow="yellow";b.Red="red";b.Pink="pink";b.Green="green";b.Blue="blue";b.Purple="purple";
b.Gray="gray";b.Default="";return b})(Mq||{}),Rp=(b=>{b.Box="box";b.Ellipse="ellipse";b.Polygon="polygon";return b})(Rp||{}),Qp,wg=new Uint8Array(16),Cr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ul=[];for(let b=0;256>b;++b)Ul.push((b+256).toString(16).slice(1));var Zn,po,pp=0,qp=0,gl=function(b,g,p){p=g&&p||0;const G=g||Array(16);b=b||{};let X=b.node||Zn;var la=void 0!==b.clockseq?b.clockseq:po;if(null==X||null==la){var pa=
b.random||(b.rng||q)();null==X&&(X=Zn=[pa[0]|1,pa[1],pa[2],pa[3],pa[4],pa[5]]);null==la&&(la=po=(pa[6]<<8|pa[7])&16383)}pa=void 0!==b.msecs?b.msecs:Date.now();let Ga=void 0!==b.nsecs?b.nsecs:qp+1;const Qa=pa-pp+(Ga-qp)/1E4;0>Qa&&void 0===b.clockseq&&(la=la+1&16383);(0>Qa||pa>pp)&&void 0===b.nsecs&&(Ga=0);if(1E4<=Ga)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");pp=pa;qp=Ga;po=la;pa+=122192928E5;b=(1E4*(pa&268435455)+Ga)%4294967296;G[p++]=b>>>24&255;G[p++]=b>>>16&255;G[p++]=b>>>8&255;
G[p++]=b&255;b=pa/4294967296*1E4&268435455;G[p++]=b>>>8&255;G[p++]=b&255;G[p++]=b>>>24&15|16;G[p++]=b>>>16&255;G[p++]=la>>>8|128;G[p++]=la&255;for(la=0;6>la;++la)G[p+la]=X[la];return g||R(G)},nh=class{static clamp(b,g,p){return Math.max(g,"undefined"!==typeof p?Math.min(b,p):b)}static clampV(b,g,p){return b.map(G=>p?nh.clamp(G,g,p):nh.clamp(G,g))}static cross(b,g,p){return(g[0]-b[0])*(p[1]-b[1])-(p[0]-b[0])*(g[1]-b[1])}static snap(b,g=1){return[Math.round(b[0]/g)*g,Math.round(b[1]/g)*g]}},Fd=nh;Fd.neg=
b=>[-b[0],-b[1]];Fd.add=(b,g)=>[b[0]+g[0],b[1]+g[1]];Fd.addScalar=(b,g)=>[b[0]+g,b[1]+g];Fd.sub=(b,g)=>[b[0]-g[0],b[1]-g[1]];Fd.subScalar=(b,g)=>[b[0]-g,b[1]-g];Fd.vec=(b,g)=>[g[0]-b[0],g[1]-b[1]];Fd.mul=(b,g)=>[b[0]*g,b[1]*g];Fd.mulV=(b,g)=>[b[0]*g[0],b[1]*g[1]];Fd.div=(b,g)=>[b[0]/g,b[1]/g];Fd.divV=(b,g)=>[b[0]/g[0],b[1]/g[1]];Fd.per=b=>[b[1],-b[0]];Fd.dpr=(b,g)=>b[0]*g[0]+b[1]*g[1];Fd.cpr=(b,g)=>b[0]*g[1]-g[0]*b[1];Fd.len2=b=>b[0]*b[0]+b[1]*b[1];Fd.len=b=>Math.hypot(b[0],b[1]);Fd.pry=(b,g)=>nh.dpr(b,
g)/nh.len(g);Fd.uni=b=>nh.div(b,nh.len(b));Fd.normalize=b=>nh.uni(b);Fd.tangent=(b,g)=>nh.uni(nh.sub(b,g));Fd.dist2=(b,g)=>nh.len2(nh.sub(b,g));Fd.dist=(b,g)=>Math.hypot(b[1]-g[1],b[0]-g[0]);Fd.fastDist=(b,g)=>{b=[g[0]-b[0],g[1]-b[1]];g=[Math.abs(b[0]),Math.abs(b[1])];let p=1/Math.max(g[0],g[1]);p*=1.29289-(g[0]+g[1])*p*.29289;return[b[0]*p,b[1]*p]};Fd.ang=(b,g)=>Math.atan2(nh.cpr(b,g),nh.dpr(b,g));Fd.angle=(b,g)=>Math.atan2(g[1]-b[1],g[0]-b[0]);Fd.med=(b,g)=>nh.mul(nh.add(b,g),.5);Fd.rot=(b,g=0)=>
[b[0]*Math.cos(g)-b[1]*Math.sin(g),b[0]*Math.sin(g)+b[1]*Math.cos(g)];Fd.rotWith=(b,g,p=0)=>{if(0===p)return b;const G=Math.sin(p);p=Math.cos(p);const X=b[0]-g[0];b=b[1]-g[1];return[X*p-b*G+g[0],X*G+b*p+g[1]]};Fd.isEqual=(b,g)=>b[0]===g[0]&&b[1]===g[1];Fd.lrp=(b,g,p)=>nh.add(b,nh.mul(nh.sub(g,b),p));Fd.int=(b,g,p,G,X=1)=>{p=(nh.clamp(p,G)-p)/(G-p);return nh.add(nh.mul(b,1-p),nh.mul(g,X))};Fd.ang3=(b,g,p)=>{b=nh.vec(g,b);g=nh.vec(g,p);return nh.ang(b,g)};Fd.abs=b=>[Math.abs(b[0]),Math.abs(b[1])];Fd.rescale=
(b,g)=>{const p=nh.len(b);return[g*b[0]/p,g*b[1]/p]};Fd.isLeft=(b,g,p)=>(g[0]-b[0])*(p[1]-b[1])-(p[0]-b[0])*(g[1]-b[1]);Fd.clockwise=(b,g,p)=>0<nh.isLeft(b,g,p);Fd.toFixed=b=>b.map(g=>Math.round(100*g)/100);Fd.nearestPointOnLineThroughPoint=(b,g,p)=>nh.add(b,nh.mul(g,nh.pry(nh.sub(p,b),g)));Fd.distanceToLineThroughPoint=(b,g,p)=>nh.dist(p,nh.nearestPointOnLineThroughPoint(b,g,p));Fd.nearestPointOnLineSegment=(b,g,p,G=!0)=>{const X=nh.uni(nh.sub(g,b));p=nh.add(b,nh.mul(X,nh.pry(nh.sub(p,b),X)));if(G){if(p[0]<
Math.min(b[0],g[0]))return b[0]<g[0]?b:g;if(p[0]>Math.max(b[0],g[0]))return b[0]>g[0]?b:g;if(p[1]<Math.min(b[1],g[1]))return b[1]<g[1]?b:g;if(p[1]>Math.max(b[1],g[1]))return b[1]>g[1]?b:g}return p};Fd.distanceToLineSegment=(b,g,p,G=!0)=>nh.dist(p,nh.nearestPointOnLineSegment(b,g,p,G));Fd.nudge=(b,g,p)=>nh.isEqual(b,g)?b:nh.add(b,nh.mul(nh.uni(nh.sub(g,b)),p));Fd.nudgeAtAngle=(b,g,p)=>[Math.cos(g)*p+b[0],Math.sin(g)*p+b[1]];Fd.toPrecision=(b,g=4)=>[+b[0].toPrecision(g),+b[1].toPrecision(g)];Fd.pointsBetween=
(b,g,p=6)=>Array.from(Array(p)).map((G,X)=>{G=X/(p-1);X=Math.min(1,.5+Math.abs(.5-G));return[...nh.lrp(b,g,G),X]});Fd.slope=(b,g)=>b[0]===g[0]?NaN:(b[1]-g[1])/(b[0]-g[0]);Fd.toAngle=b=>{b=Math.atan2(b[1],b[0]);return 0>b?b+2*Math.PI:b};Fd.max=(...b)=>[Math.max(...b.map(g=>g[0])),Math.max(...b.map(g=>g[1]))];Fd.min=(...b)=>[Math.min(...b.map(g=>g[0])),Math.min(...b.map(g=>g[1]))];var ne=Fd,wf=class{static getRectangleSides(b,g,p=0){const G=[b[0]+g[0]/2,b[1]+g[1]/2],X=Fd.rotWith(b,G,p),la=Fd.rotWith(Fd.add(b,
[g[0],0]),G,p),pa=Fd.rotWith(Fd.add(b,g),G,p);b=Fd.rotWith(Fd.add(b,[0,g[1]]),G,p);return[["top",[X,la]],["right",[la,pa]],["bottom",[pa,b]],["left",[b,X]]]}static getBoundsSides(b){return wf.getRectangleSides([b.minX,b.minY],[b.width,b.height])}static expandBounds(b,g){return{minX:b.minX-g,minY:b.minY-g,maxX:b.maxX+g,maxY:b.maxY+g,width:b.width+2*g,height:b.height+2*g}}static boundsCollide(b,g){return!(b.maxX<g.minX||b.minX>g.maxX||b.maxY<g.minY||b.minY>g.maxY)}static boundsContain(b,g){return Array.isArray(g)?
b.minX<g[0]&&b.minY<g[1]&&b.maxY>g[1]&&b.maxX>g[0]:b.minX<g.minX&&b.minY<g.minY&&b.maxY>g.maxY&&b.maxX>g.maxX}static boundsContained(b,g){return wf.boundsContain(g,b)}static boundsAreEqual(b,g){return!(g.maxX!==b.maxX||g.minX!==b.minX||g.maxY!==b.maxY||g.minY!==b.minY)}static getBoundsFromPoints(b,g=0){let p=Infinity,G=Infinity,X=-Infinity,la=-Infinity;if(2>b.length)G=p=0,la=X=1;else for(const pa of b)p=Math.min(pa[0],p),G=Math.min(pa[1],G),X=Math.max(pa[0],X),la=Math.max(pa[1],la);return 0!==g?wf.getBoundsFromPoints(b.map(pa=>
Fd.rotWith(pa,[(p+X)/2,(G+la)/2],g))):{minX:p,minY:G,maxX:X,maxY:la,width:Math.max(1,X-p),height:Math.max(1,la-G)}}static centerBounds(b,g){const p=wf.getBoundsCenter(b);return wf.translateBounds(b,[g[0]-p[0],g[1]-p[1]])}static snapBoundsToGrid(b,g){const p=Math.round(b.minX/g)*g,G=Math.round(b.minY/g)*g,X=Math.round(b.maxX/g)*g;b=Math.round(b.maxY/g)*g;return{minX:p,minY:G,maxX:X,maxY:b,width:Math.max(1,X-p),height:Math.max(1,b-G)}}static translateBounds(b,g){return{minX:b.minX+g[0],minY:b.minY+
g[1],maxX:b.maxX+g[0],maxY:b.maxY+g[1],width:b.width,height:b.height}}static multiplyBounds(b,g){const p=wf.getBoundsCenter(b);return wf.centerBounds({minX:b.minX*g,minY:b.minY*g,maxX:b.maxX*g,maxY:b.maxY*g,width:b.width*g,height:b.height*g},[p[0]*g,p[1]*g])}static divideBounds(b,g){const p=wf.getBoundsCenter(b);return wf.centerBounds({minX:b.minX/g,minY:b.minY/g,maxX:b.maxX/g,maxY:b.maxY/g,width:b.width/g,height:b.height/g},[p[0]/g,p[1]/g])}static getRotatedBounds(b,g=0){b=wf.getRotatedCorners(b,
g);let p=g=Infinity,G=-Infinity,X=-Infinity;for(const la of b)g=Math.min(la[0],g),p=Math.min(la[1],p),G=Math.max(la[0],G),X=Math.max(la[1],X);return{minX:g,minY:p,maxX:G,maxY:X,width:Math.max(1,G-g),height:Math.max(1,X-p),rotation:0}}static getRotatedEllipseBounds(b,g,p,G,X=0){var la=Math.cos(X);const pa=Math.sin(X);X=Math.hypot(p*la,G*pa);la=Math.hypot(p*pa,G*la);return{minX:b+p-X,minY:g+G-la,maxX:b+p+X,maxY:g+G+la,width:2*X,height:2*la}}static getExpandedBounds(b,g){const p=Math.min(b.minX,g.minX),
G=Math.min(b.minY,g.minY),X=Math.max(b.maxX,g.maxX);b=Math.max(b.maxY,g.maxY);return{minX:p,minY:G,maxX:X,maxY:b,width:Math.abs(X-p),height:Math.abs(b-G)}}static getCommonBounds(b){if(2>b.length)return b[0];let g=b[0];for(let p=1;p<b.length;p++)g=wf.getExpandedBounds(g,b[p]);return g}static getRotatedCorners(b,g=0){const p=[b.minX+b.width/2,b.minY+b.height/2];b=[[b.minX,b.minY],[b.maxX,b.minY],[b.maxX,b.maxY],[b.minX,b.maxY]];return g?b.map(G=>Fd.rotWith(G,p,g)):b}static getTransformedBoundingBox(b,
g,p,G=0,X=!1){const [la,pa]=[b.minX,b.minY],[Ga,Qa]=[b.maxX,b.maxY];let [Za,eb]=[b.minX,b.minY],[mb,Lb]=[b.maxX,b.maxY];if("center"===g)return{minX:Za+p[0],minY:eb+p[1],maxX:mb+p[0],maxY:Lb+p[1],width:mb-Za,height:Lb-eb,scaleX:1,scaleY:1};const [Vb,Pb]=Fd.rot(p,-G);switch(g){case "top_edge":case "top_left_corner":case "top_right_corner":eb+=Pb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Lb+=Pb}switch(g){case "left_edge":case "top_left_corner":case "bottom_left_corner":Za+=
Vb;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":mb+=Vb}var ec=Ga-la;const gc=Qa-pa;var Tb=(mb-Za)/ec,nc=(Lb-eb)/gc;b=0>Tb;p=0>nc;var oc=Math.abs(mb-Za),Ec=Math.abs(Lb-eb);if(X)switch(X=ec/gc,ec=X<oc/Ec,nc=1/X*(0>nc?1:-1)*oc,Tb=Ec*(0>Tb?1:-1)*X,g){case "top_left_corner":ec?eb=Lb+nc:Za=mb+Tb;break;case "top_right_corner":ec?eb=Lb+nc:mb=Za-Tb;break;case "bottom_right_corner":ec?Lb=eb-nc:mb=Za-Tb;break;case "bottom_left_corner":ec?Lb=eb-nc:Za=mb+Tb;break;case "bottom_edge":case "top_edge":oc=
(Za+mb)/2;Ec*=X;Za=oc-Ec/2;mb=oc+Ec/2;break;case "left_edge":case "right_edge":Ec=(eb+Lb)/2,oc/=X,eb=Ec-oc/2,Lb=Ec+oc/2}if(0!==G%(2*Math.PI)){oc=[0,0];Ec=Fd.med([la,pa],[Ga,Qa]);Tb=Fd.med([Za,eb],[mb,Lb]);switch(g){case "top_left_corner":oc=Fd.sub(Fd.rotWith([mb,Lb],Tb,G),Fd.rotWith([Ga,Qa],Ec,G));break;case "top_right_corner":oc=Fd.sub(Fd.rotWith([Za,Lb],Tb,G),Fd.rotWith([la,Qa],Ec,G));break;case "bottom_right_corner":oc=Fd.sub(Fd.rotWith([Za,eb],Tb,G),Fd.rotWith([la,pa],Ec,G));break;case "bottom_left_corner":oc=
Fd.sub(Fd.rotWith([mb,eb],Tb,G),Fd.rotWith([Ga,pa],Ec,G));break;case "top_edge":oc=Fd.sub(Fd.rotWith(Fd.med([Za,Lb],[mb,Lb]),Tb,G),Fd.rotWith(Fd.med([la,Qa],[Ga,Qa]),Ec,G));break;case "left_edge":oc=Fd.sub(Fd.rotWith(Fd.med([mb,eb],[mb,Lb]),Tb,G),Fd.rotWith(Fd.med([Ga,pa],[Ga,Qa]),Ec,G));break;case "bottom_edge":oc=Fd.sub(Fd.rotWith(Fd.med([Za,eb],[mb,eb]),Tb,G),Fd.rotWith(Fd.med([la,pa],[Ga,pa]),Ec,G));break;case "right_edge":oc=Fd.sub(Fd.rotWith(Fd.med([Za,eb],[Za,Lb]),Tb,G),Fd.rotWith(Fd.med([la,
pa],[la,Qa]),Ec,G))}[Za,eb]=Fd.sub([Za,eb],oc);[mb,Lb]=Fd.sub([mb,Lb],oc)}mb<Za&&([mb,Za]=[Za,mb]);Lb<eb&&([Lb,eb]=[eb,Lb]);return{minX:Za,minY:eb,maxX:mb,maxY:Lb,width:mb-Za,height:Lb-eb,scaleX:(mb-Za)/(Ga-la||1)*(b?-1:1),scaleY:(Lb-eb)/(Qa-pa||1)*(p?-1:1)}}static getTransformAnchor(b,g,p){let G=b;switch(b){case "top_left_corner":G=g&&p?"bottom_right_corner":g?"top_right_corner":p?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":G=g&&p?"bottom_left_corner":g?"top_left_corner":
p?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":G=g&&p?"top_left_corner":g?"bottom_left_corner":p?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":G=g&&p?"top_right_corner":g?"bottom_right_corner":p?"top_left_corner":"top_right_corner"}return G}static getRelativeTransformedBoundingBox(b,g,p,G,X){G=b.minX+(G?g.maxX-p.maxX:p.minX-g.minX)/g.width*b.width;X=b.minY+(X?g.maxY-p.maxY:p.minY-g.minY)/g.height*b.height;const la=p.width/g.width*b.width;b=p.height/
g.height*b.height;return{minX:G,minY:X,maxX:G+la,maxY:X+b,width:la,height:b}}static getRotatedSize(b,g){const p=Fd.div(b,2);b=[[0,0],[b[0],0],b,[0,b[1]]].map(G=>Fd.rotWith(G,p,g));b=wf.getBoundsFromPoints(b);return[b.width,b.height]}static getBoundsCenter(b){return[b.minX+b.width/2,b.minY+b.height/2]}static getBoundsWithCenter(b){const g=wf.getBoundsCenter(b);return lf(pe({},b),{midX:g[0],midY:g[1]})}static getCommonTopLeft(b){const g=[Infinity,Infinity];b.forEach(p=>{g[0]=Math.min(g[0],p[0]);g[1]=
Math.min(g[1],p[1])});return g}static getTLSnapPoints(b,g,p){const G=pe({},b);b=[0,0];const X=[],la={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},pa=["midX","minX","maxX"],Ga=["midY","minY","maxY"];g=g.map(Lb=>{const Vb=pa.flatMap((ec,gc)=>pa.map((Tb,nc)=>{const oc=G[ec]-Lb[Tb];return{f:ec,t:Tb,gap:oc,distance:Math.abs(oc),isCareful:0===gc||3===gc+nc}})),Pb=Ga.flatMap((ec,
gc)=>Ga.map((Tb,nc)=>{const oc=G[ec]-Lb[Tb];return{f:ec,t:Tb,gap:oc,distance:Math.abs(oc),isCareful:0===gc||3===gc+nc}}));return[Lb,Vb,Pb]});let Qa=Infinity,Za=Infinity,eb=Infinity,mb=Infinity;g.forEach(([,Lb,Vb])=>{Lb.forEach(Pb=>{Pb.distance<p&&Pb.distance<eb&&(eb=Pb.distance,Qa=Pb.gap)});Vb.forEach(Pb=>{Pb.distance<p&&Pb.distance<mb&&(mb=Pb.distance,Za=Pb.gap)})});g.forEach(([Lb,Vb,Pb])=>{Infinity!==Qa&&Vb.forEach(ec=>{2>Math.abs(ec.gap-Qa)&&(la[ec.f]=lf(pe({},la[ec.f]),{isSnapped:!0,to:Lb[ec.t],
B:Lb,distance:ec.distance}))});Infinity!==Za&&Pb.forEach(ec=>{2>Math.abs(ec.gap-Za)&&(la[ec.f]=lf(pe({},la[ec.f]),{isSnapped:!0,to:Lb[ec.t],B:Lb,distance:ec.distance}))})});b[0]=Infinity===Qa?0:Qa;b[1]=Infinity===Za?0:Za;G.minX-=b[0];G.midX-=b[0];G.maxX-=b[0];G.minY-=b[1];G.midY-=b[1];G.maxY-=b[1];pa.forEach(Lb=>{Lb=la[Lb];if(Lb.isSnapped){var {id:Vb,B:Pb}=Lb;Lb=G[Vb];X.push("minX"===Vb?[[Lb,G.midY],[Lb,Pb.minY],[Lb,Pb.maxY]]:[[Lb,G.minY],[Lb,G.maxY],[Lb,Pb.minY],[Lb,Pb.maxY]])}});Ga.forEach(Lb=>
{Lb=la[Lb];if(Lb.isSnapped){var {id:Vb,B:Pb}=Lb;Lb=G[Vb];X.push("midY"===Vb?[[G.midX,Lb],[Pb.minX,Lb],[Pb.maxX,Lb]]:[[G.minX,Lb],[G.maxX,Lb],[Pb.minX,Lb],[Pb.maxX,Lb]])}});return{offset:b,snapLines:X}}static ensureRatio(b,g){const {width:p,height:G}=b,X=pe({},b);p/G<g?(X.width=G*g,X.maxX+=p-b.width):(X.height=p/g,X.maxY+=G-b.height);return X}static getDistributions(b,g){var p=b.map(la=>{const pa=la.getBounds();return{id:la.id,point:[pa.minX,pa.minY],bounds:pa,center:la.getCenter()}});b=p.length;var G=
wf.getCommonBounds(p.map(({bounds:la})=>la));const X=[];switch(g){case "horizontal":g=p.reduce((la,pa)=>la+pa.bounds.width,0);if(g>G.width){const la=p.sort((Za,eb)=>Za.bounds.minX-eb.bounds.minX)[0],pa=p.sort((Za,eb)=>eb.bounds.maxX-Za.bounds.maxX)[0];G=p.filter(Za=>Za!==la&&Za!==pa).sort((Za,eb)=>Za.center[0]-eb.center[0]);const Ga=(pa.center[0]-la.center[0])/(b-1),Qa=la.center[0]+Ga;G.forEach(({id:Za,point:eb,bounds:mb},Lb)=>{X.push({id:Za,prev:eb,next:[Qa+Ga*Lb-mb.width/2,mb.minY]})})}else{p=p.sort((Ga,
Qa)=>Ga.center[0]-Qa.center[0]);let la=G.minX;const pa=(G.width-g)/(b-1);p.forEach(({id:Ga,point:Qa,bounds:Za})=>{X.push({id:Ga,prev:Qa,next:[la,Za.minY]});la+=Za.width+pa})}break;case "vertical":if(g=p.reduce((la,pa)=>la+pa.bounds.height,0),g>G.height){const la=p.sort((Za,eb)=>Za.bounds.minY-eb.bounds.minY)[0],pa=p.sort((Za,eb)=>eb.bounds.maxY-Za.bounds.maxY)[0];G=p.filter(Za=>Za!==la&&Za!==pa).sort((Za,eb)=>Za.center[1]-eb.center[1]);const Ga=(pa.center[1]-la.center[1])/(b-1),Qa=la.center[1]+Ga;
G.forEach(({id:Za,point:eb,bounds:mb},Lb)=>{X.push({id:Za,prev:eb,next:[mb.minX,Qa+Ga*Lb-mb.height/2]})})}else{p=p.sort((Ga,Qa)=>Ga.center[1]-Qa.center[1]);let la=G.minY;const pa=(G.height-g)/(b-1);p.forEach(({id:Ga,point:Qa,bounds:Za})=>{X.push({id:Ga,prev:Qa,next:[Za.minX,la]});la+=Za.height+pa})}}return X}static getPackedDistributions(b){const g=wf.getCommonBounds(b.map(({bounds:X})=>X)),p=[g.minX,g.minY],G=Object.fromEntries(b.map(X=>[X.id,[X.bounds.minX,X.bounds.minY]]));b=b.filter(X=>{var la,
pa,Ga,Qa;return!((null==(pa=null==(la=X.props.handles)?void 0:la.start)?0:pa.bindingId)||(null==(Qa=null==(Ga=X.props.handles)?void 0:Ga.end)?0:Qa.bindingId))}).map(X=>{const la=X.getBounds();return{id:X.id,w:la.width+16,h:la.height+16,x:la.minX,y:la.minY}});A(b);return b.map(({id:X,x:la,y:pa})=>({id:X,prev:G[X],next:[la+p[0],pa+p[1]]}))}},no=class{static pointInCircle(b,g,p){return Fd.dist(b,g)<=p}static pointInEllipse(b,g,p,G,X=0){X=X||0;var la=Math.cos(X);X=Math.sin(X);g=Fd.sub(b,g);b=la*g[0]+
X*g[1];la=X*g[0]-la*g[1];return 1>=b*b/(p*p)+la*la/(G*G)}static pointInRect(b,g){return!(b[0]<g[0]||b[0]>b[0]+g[0]||b[1]<g[1]||b[1]>b[1]+g[1])}static pointInPolygon(b,g){let p=0;g.forEach((G,X)=>{X=g[(X+1)%g.length];G[1]<=b[1]?X[1]>b[1]&&0<Fd.cross(G,X,b)&&(p+=1):X[1]<=b[1]&&0>Fd.cross(G,X,b)&&--p});return 0!==p}static pointInBounds(b,g){return!(b[0]<g.minX||b[0]>g.maxX||b[1]<g.minY||b[1]>g.maxY)}static pointInPolyline(b,g,p=3){for(let G=1;G<g.length;G++)if(Fd.distanceToLineSegment(g[G-1],g[G],b)<
p)return!0;return!1}static _getSqSegDist(b,g,p){let G=g[0];g=g[1];let X=p[0]-G,la=p[1]-g;if(0!==X||0!==la){const pa=((b[0]-G)*X+(b[1]-g)*la)/(X*X+la*la);1<pa?(G=p[0],g=p[1]):0<pa&&(G+=X*pa,g+=la*pa)}X=b[0]-G;la=b[1]-g;return X*X+la*la}static _simplifyStep(b,g,p,G,X){let la=G,pa=-1;for(let Ga=g+1;Ga<p;Ga++){const Qa=no._getSqSegDist(b[Ga],b[g],b[p]);Qa>la&&(pa=Ga,la=Qa)}-1<pa&&la>G&&(1<pa-g&&no._simplifyStep(b,g,pa,G,X),X.push(b[pa]),1<p-pa&&no._simplifyStep(b,pa,p,G,X))}static simplify2(b,g=1){if(2>=
b.length)return b;g*=g;var p=b[0],G=b[1];const X=[p];for(let la=1,pa=b.length;la<pa;la++)G=b[la],(G[0]-p[0])*(G[0]-p[0])+(G[1]-p[1])*(G[1]-p[1])>g&&(X.push(G),p=G);p!==G&&X.push(G);p=X.length-1;G=[X[0]];no._simplifyStep(X,0,p,g,G);G.push(X[p],b[b.length-1]);return G}static pointNearToPolyline(b,g,p=8){const G=g.length;for(let X=1;X<G;X++)if(Fd.distanceToLineSegment(g[X-1],g[X],b)<p)return!0;return!1}},Bj=no;ib(Bj,"simplify",(b,g=1)=>{var p=b.length;const G=b[0],X=b[p-1],[la,pa]=G,[Ga,Qa]=X;if(2<p){let Za=
0,eb=0;const mb=Fd.len2([Qa-pa,Ga-la]);for(let Lb=1;Lb<p-1;Lb++){const [Vb,Pb]=b[Lb],ec=Math.pow(Vb*(Qa-pa)+la*(Pb-Qa)+Ga*(pa-Pb),2)/mb;Za>ec||(Za=ec,eb=Lb)}if(Za>g)return p=no.simplify(b.slice(0,eb+1),g),b=no.simplify(b.slice(eb+1),g),p.concat(b.slice(1))}return[G,X]});var Lq=uf(vm()),Nq=({target:b},g)=>{b=b&&b.tagName;return!!(b&&g&&g.includes(b))},Oq=class{static registerShortcut(b,g){Lq.default.bind(b,(p,G)=>{var X;p.preventDefault();Nq(p,["INPUT","TEXTAREA","SELECT"])||(null==(X=p.target)?0:
X.isContentEditable)||g(p,G)},"keydown");return()=>{Lq.default.unbind(b,"keydown")}}},Hn=Math.PI,mo=Hn/2,zl=2*Hn,Br={},Ar={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",
center:"grab",background:"grab"},zm=class{static circleFromThreePoints(b,g,p){const [G,X]=b,[la,pa]=g,[Ga,Qa]=p;g=G*(pa-Qa)-X*(la-Ga)+la*Qa-Ga*pa;b=-((G*G+X*X)*(Qa-pa)+(la*la+pa*pa)*(X-Qa)+(Ga*Ga+Qa*Qa)*(pa-X))/(2*g);g=-((G*G+X*X)*(la-Ga)+(la*la+pa*pa)*(Ga-G)+(Ga*Ga+Qa*Qa)*(G-la))/(2*g);return[b,g,Math.hypot(b-G,g-X)]}static perimeterOfEllipse(b,g){const p=Math.pow(b-g,2)/Math.pow(b+g,2);return Hn*(b+g)*(1+3*p/(10+Math.sqrt(4-3*p)))}static shortAngleDist(b,g){b=(g-b)%zl;return 2*b%zl-b}static longAngleDist(b,
g){return zl-zm.shortAngleDist(b,g)}static lerpAngles(b,g,p){return b+zm.shortAngleDist(b,g)*p}static angleDelta(b,g){return zm.shortAngleDist(b,g)}static getSweep(b,g,p){return zm.angleDelta(ne.angle(b,g),ne.angle(b,p))}static clampRadians(b){return(zl+b)%zl}static snapAngleToSegments(b,g){g=zl/g;b=Math.floor((zm.clampRadians(b)+g/2)/g)*g%zl;b<Hn&&(b+=zl);b>Hn&&(b-=zl);return b}static isAngleBetween(b,g,p){if(p===b||p===g)return!0;g=(g-b+mo)%mo;return g<=Hn!==(p-b+mo)%mo>g}static degreesToRadians(b){return b*
Hn/180}static radiansToDegrees(b){return 180*b/Hn}static getArcLength(b,g,p,G){b=zm.getSweep(b,p,G);return b/zl*zl*g}static getSweepFlag(b,g,p){p=ne.angle(b,p);return 0<(ne.angle(b,g)-p+3*Hn)%zl-Hn?0:1}static getLargeArcFlag(b,g,p){b=ne.angle(p,b);g=(ne.angle(p,g)-b+3*Hn)%zl-Hn;return Math.abs(g)>mo?0:1}static getArcDashOffset(b,g,p,G,X){const la=zm.getSweepFlag(b,p,G);g=zm.getArcLength(b,g,p,G);return-(0>la?g:zl*b[2]-g)/2+X}static getEllipseDashOffset(b,g){return-(zl*b[2])/2+-g}static radiansToCardinalDirection(b){return b<
.25*Math.PI?"north":b<.75*Math.PI?"east":b<1.25*Math.PI?"south":b<1.75*Math.PI?"west":"north"}},Ik=class{static getPolygonCentroid(b){var g=b.map(p=>p[0]);b=b.map(p=>p[1]);g=Math.min(...g)+Math.max(...g);b=Math.min(...b)+Math.max(...b);return[g?g/2:0,b?b/2:0]}};ib(Ik,"getEdges",b=>{const g=b.length;return b.map((p,G)=>[p,b[(G+1)%g]])});ib(Ik,"getEdgeOutwardNormal",(b,g)=>ne.per(ne.uni(ne.sub(g,b))));ib(Ik,"getEdgeInwardNormal",(b,g)=>ne.neg(Ik.getEdgeOutwardNormal(b,g)));ib(Ik,"getOffsetEdge",(b,
g,p)=>{p=ne.mul(ne.per(ne.uni(ne.sub(g,b))),p);return[ne.add(b,p),ne.add(g,p)]});ib(Ik,"getOffsetEdges",(b,g)=>b.map(([p,G])=>Ik.getOffsetEdge(p,G,g)));ib(Ik,"getOffsetPolygon",(b,g)=>{if(1>b.length)throw Error("Expected at least one point.");if(1===b.length)return b=b[0],[ne.add(b,[-g,-g]),ne.add(b,[g,-g]),ne.add(b,[g,g]),ne.add(b,[-g,g])];if(2===b.length){const [p,G]=b;return[...Ik.getOffsetEdge(p,G,g),...Ik.getOffsetEdge(G,p,g)]}return Ik.getOffsetEdges(Ik.getEdges(b),g).flatMap((p,G,X)=>{{G=X[(G+
1)%X.length];const la=Fd.slope(p[0],p[1]);X=Fd.slope(G[0],G[1]);la!==X?Number.isNaN(la)&&!Number.isNaN(X)?p=[p[0][0],(p[0][0]-G[0][0])*X+G[0][1]]:Number.isNaN(X)&&!Number.isNaN(la)?p=[G[0][0],(G[0][0]-p[0][0])*la+p[0][1]]:(p=(la*p[0][0]-X*G[0][0]+G[0][1]-p[0][1])/(la-X),p=[p,X*(p-G[0][0])+G[0][1]]):p=void 0}if(void 0===p)throw Error("Expected an intersection");return p})});ib(Ik,"getPolygonVertices",(b,g,p=0,G=1)=>{b=ne.div(b,2);const [X,la]=[Math.max(1,b[0]-p),Math.max(1,b[1]-p)];p=[];for(let Za=
0,eb=zl/g;Za<g;Za++){var pa=(-mo+Za*eb)%zl,Ga=(-mo+(Za+1)*eb)%zl;pa=ne.add(b,[X*Math.cos(pa),la*Math.sin(pa)]);Ga=ne.add(b,[X*Math.cos(Ga),la*Math.sin(Ga)]);var Qa=ne.med(pa,Ga);Qa=ne.nudge(Qa,b,ne.dist(b,Qa)*(1-G));p.push(pa,Qa,Ga)}return p});ib(Ik,"getTriangleVertices",(b,g=0,p=1)=>{const [G,X]=b;var la=1-p;b=[G/2,g/2];p=[G-g,X-g];g=[g/2,X-g];const pa=Ik.getPolygonCentroid([b,p,g]),Ga=ne.med(b,p),Qa=ne.med(p,g),Za=ne.med(g,b),eb=ne.dist(Ga,pa)*la,mb=ne.dist(Qa,pa)*la;la*=ne.dist(Za,pa);return[b,
eb?ne.nudge(Ga,pa,eb):Ga,p,mb?ne.nudge(Qa,pa,mb):Qa,g,la?ne.nudge(Za,pa,la):Za]});ib(Ik,"getStarVertices",(b,g,p,G=1)=>{const X=ne.div(g,2),la=ne.mul(X,G/2),pa=zl/p/2;return Array.from(Array(2*p)).map((Ga,Qa)=>{Ga=-mo+Qa*pa;const [Za,eb]=Qa%2?la:X;return ne.add(b,[Za*Math.cos(Ga),eb*Math.sin(Ga)])})});var Ps=class{static getCurvedPathForPolygon(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],p=b.length;for(let G=1;G<p;G++){const [X,
la]=b[G],[pa,Ga]=b[(G+1)%p];g.push(X,la,(X+pa)/2,(la+Ga)/2)}g.push("Z");return g.join(" ")}static getCurvedPathForPoints(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],p=b.length;for(let G=1;G<p-1;G++){const [X,la]=b[G],[pa,Ga]=b[G+1];g.push(X,la,(X+pa)/2,(la+Ga)/2)}return g.join(" ")}static getSvgPathFromStroke(b,g=!0){const p=b.length;if(4>p)return"";let G=b[0],X=b[1];var la=b[2];la=`M${G[0].toFixed(2)},${G[1].toFixed(2)} Q${X[0].toFixed(2)},${X[1].toFixed(2)} ${((X[0]+
la[0])/2).toFixed(2)},${((X[1]+la[1])/2).toFixed(2)} T`;for(let pa=2,Ga=p-1;pa<Ga;pa++)G=b[pa],X=b[pa+1],la+=`${((G[0]+X[0])/2).toFixed(2)},${((G[1]+X[1])/2).toFixed(2)} `;g&&(la+="Z");return la}static getSvgPathFromStrokePoints(b,g=!1){const p=b.length;if(4>p)return"";let G=b[0].point,X=b[1].point;var la=b[2].point;la=`M${G[0].toFixed(2)},${G[1].toFixed(2)} Q${X[0].toFixed(2)},${X[1].toFixed(2)} ${((X[0]+la[0])/2).toFixed(2)},${((X[1]+la[1])/2).toFixed(2)} T`;for(let pa=2,Ga=p-1;pa<Ga;pa++)G=b[pa].point,
X=b[pa+1].point,la+=`${((G[0]+X[0])/2).toFixed(2)},${((G[1]+X[1])/2).toFixed(2)} `;g&&(la+="Z");return la}};ib(Ps,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var Fr={},U=Object.assign,ma=Object.getOwnPropertyDescriptor,Da=Object.defineProperty,gb=Object.prototype,Hb=[];Object.freeze(Hb);var sc={};Object.freeze(sc);var Kc="undefined"!==typeof Proxy,hd=Object.toString(),Rd=function(){},Ee="undefined"!==typeof Object.getOwnPropertySymbols,ig="undefined"!==typeof Reflect&&Reflect.ownKeys?
Reflect.ownKeys:Ee?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:Object.getOwnPropertyNames,Dh=Object.getOwnPropertyDescriptors||function(b){var g={};ig(b).forEach(function(p){g[p]=ma(b,p)});return g},af=Symbol("mobx-stored-annotations"),of=Symbol("mobx administration"),lh=function(){function b(p){void 0===p&&(p="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;
this.lowestObserverState_=Gj.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=p}var g=b.prototype;g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(p){return p()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(p){return p()})};g.reportObserved=function(){return Nb(this)};g.reportChanged=function(){od();hc(this);Td()};g.toString=function(){return this.name_};return b}(),ih=D("Atom",lh),qe={identity:function(b,g){return b===g},structural:function(b,g){return ta(b,g)},"default":function(b,
g){return Object.is?Object.is(b,g):b===g?0!==b||1/b===1/g:b!==b&&g!==g},shallow:function(b,g){return ta(b,g,1)}},Xd="override",oe=pb(),Xe={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Xe);var kf=Xb("observable"),Lh=Xb("observable.ref",{enhancer:fb}),Gg=Xb("observable.shallow",{enhancer:function(b,g,p){if(void 0===b||null===b||Yd(b)||kb(b)||Up(b)||Pq(b))return b;if(Array.isArray(b))return ug.array(b,{name:p,deep:!1});if(E(b))return ug.object(b,void 0,{name:p,deep:!1});if(O(b))return ug.map(b,
{name:p,deep:!1});if(P(b))return ug.set(b,{name:p,deep:!1})}}),Hh=Xb("observable.struct",{enhancer:function(b,g){return ta(b,g)?g:b}}),mi=Ua(kf);Object.assign(bd,mi);var Uh={box:function(b,g){g=g||Xe;return new dr(b,Jc(g),g.name,!0,g.equals)},array:function(b,g){g=g||Xe;return(!1===Df.useProxies||!1===g.proxy?hf:ab)(b,Jc(g),g.name)},map:function(b,g){g=g||Xe;return new ty(b,Jc(g),g.name)},set:function(b,g){g=g||Xe;return new jy(b,Jc(g),g.name)},object:function(b,g,p){if(!1===Df.useProxies||!1===(null==
p?void 0:p.proxy))p=Dd({},p);else{var G={},X,la;Y();G=Dd(G,p);p=null!=(la=(X=G[of]).proxy_)?la:X.proxy_=new Proxy(G,sD)}return tc(p,b,g)},ref:Ua(Lh),shallow:Ua(Gg),deep:mi,struct:Ua(Hh)},ug=U(bd,Uh),Wt=Ab("computed"),AD=Ab("computed.struct",{equals:qe.structural}),Pg=function(b,g){if(T(g))return Ea(b,g,Wt);if(E(b))return Ua(Ab("computed",b));g=E(g)?g:{};g.get=b;g.name||(g.name=b.name||"");return new dt(g)};Object.assign(Pg,Wt);Pg.struct=Ua(AD);var zy,Ay,cu=0,yD=1,zD=null!=(zy=null==(Ay=ma(function(){},
"name"))?void 0:Ay.configurable)?zy:!1,yy={value:"action",configurable:!0,writable:!1,enumerable:!1};var BD=Symbol.toPrimitive;var dr=function(b){function g(G,X,la,pa,Ga){void 0===la&&(la="ObservableValue");void 0===Ga&&(Ga=qe["default"]);pa=b.call(this,la)||this;pa.enhancer=void 0;pa.hasUnreportedChange_=!1;pa.interceptors_=void 0;pa.changeListeners_=void 0;pa.value_=void 0;pa.dehancer=void 0;pa.enhancer=X;pa.name_=la;pa.equals=Ga;pa.value_=X(G,void 0,la);return pa}ia(g,b);var p=g.prototype;p.dehanceValue=
function(G){return void 0!==this.dehancer?this.dehancer(G):G};p.set=function(G){G=this.prepareNewValue_(G);G!==Df.UNCHANGED&&this.setNewValue_(G)};p.prepareNewValue_=function(G){if(ee(this)){G=pc(this,{object:this,type:bp,newValue:G});if(!G)return Df.UNCHANGED;G=G.newValue}G=this.enhancer(G,this.value_,this.name_);return this.equals(this.value_,G)?Df.UNCHANGED:G};p.setNewValue_=function(G){var X=this.value_;this.value_=G;this.reportChanged();Ke(this)&&cf(this,{type:bp,object:this,newValue:G,oldValue:X})};
p.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};p.intercept_=function(G){return sd(this,G)};p.observe_=function(G,X){X&&G({observableKind:"value",debugObjectName:this.name_,object:this,type:bp,newValue:this.value_,oldValue:void 0});return cg(this,G)};p.raw=function(){return this.value_};p.toJSON=function(){return this.get()};p.toString=function(){return this.name_+"["+this.value_+"]"};p.valueOf=function(){return ba(this.get())};p[BD]=function(){return this.valueOf()};
return g}(lh),DD=D("ObservableValue",dr);var ED=Symbol.toPrimitive;var dt=function(){function b(p){this.dependenciesState_=Gj.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Gj.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new er(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=
void 0;this.isTracing_=Ur.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;p.get||l(31);this.derivation=p.get;this.name_=p.name||"ComputedValue";p.set&&(this.setter_=Pc("ComputedValue-setter",p.set));this.equals_=p.equals||(p.compareStructural||p.struct?qe.structural:qe["default"]);this.scope_=p.context;this.requiresReaction_=p.requiresReaction;this.keepAlive_=!!p.keepAlive}var g=b.prototype;g.onBecomeStale_=function(){sb(this)};g.onBO=function(){this.onBOL&&
this.onBOL.forEach(function(p){return p()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(p){return p()})};g.get=function(){this.isComputing_&&l(32,this.name_,this.derivation);if(0!==Df.inBatch||0!==this.observers_.size||this.keepAlive_){if(Nb(this),Vc(this)){var p=Df.trackingContext;this.keepAlive_&&!p&&(Df.trackingContext=this);this.trackAndCompute()&&Zb(this);Df.trackingContext=p}}else Vc(this)&&(this.warnAboutUntrackedRead_(),od(),this.value_=this.computeValue_(!1),Td());p=this.value_;
if(p instanceof er)throw p.cause;return p};g.set=function(p){if(this.setter_){this.isRunningSetter_&&l(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,p)}finally{this.isRunningSetter_=!1}}else l(34,this.name_)};g.trackAndCompute=function(){var p=this.value_,G=this.dependenciesState_===Gj.NOT_TRACKING_,X=this.computeValue_(!0);if(p=G||p instanceof er||X instanceof er||!this.equals_(p,X))this.value_=X;return p};g.computeValue_=function(p){this.isComputing_=!0;var G=yc(!1);
if(p)var X=jd(this,this.derivation,this.scope_);else if(!0===Df.disableErrorBoundaries)X=this.derivation.call(this.scope_);else try{X=this.derivation.call(this.scope_)}catch(la){X=new er(la)}Df.allowStateChanges=G;this.isComputing_=!1;return X};g.suspend_=function(){this.keepAlive_||(Ld(this),this.value_=void 0)};g.observe_=function(p,G){var X=this,la=!0,pa=void 0;return Md(function(){var Ga=X.get();if(!la||G){var Qa=rc();p({observableKind:"computed",debugObjectName:X.name_,type:bp,object:X,newValue:Ga,
oldValue:pa});Df.trackingDerivation=Qa}la=!1;pa=Ga})};g.warnAboutUntrackedRead_=function(){};g.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};g.valueOf=function(){return ba(this.get())};g[ED]=function(){return this.valueOf()};return b}(),et=D("ComputedValue",dt),Gj;(function(b){b[b.NOT_TRACKING_=-1]="NOT_TRACKING_";b[b.UP_TO_DATE_=0]="UP_TO_DATE_";b[b.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";b[b.STALE_=2]="STALE_"})(Gj||={});var Ur;(function(b){b[b.NONE=0]="NONE";b[b.LOG=1]=
"LOG";b[b.BREAK=2]="BREAK"})(Ur||={});var er=function(b){this.cause=void 0;this.cause=b},gu=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=
this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},iu=!0,By=!1,Df=function(){var b=J();0<b.__mobxInstanceCount&&!b.__mobxGlobals&&(iu=!1);b.__mobxGlobals&&b.__mobxGlobals.version!==(new gu).version&&(iu=!1);if(iu){if(b.__mobxGlobals)return b.__mobxInstanceCount+=1,b.__mobxGlobals.UNCHANGED||(b.__mobxGlobals.UNCHANGED={}),b.__mobxGlobals;b.__mobxInstanceCount=1;return b.__mobxGlobals=new gu}setTimeout(function(){By||l(35)},
1);return new gu}(),Vr=function(){function b(p,G,X,la){void 0===p&&(p="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Gj.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=Ur.NONE;this.name_=p;this.onInvalidate_=G;this.errorHandler_=X;this.requiresObservable_=la}var g=b.prototype;g.onBecomeStale_=
function(){this.schedule_()};g.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Df.pendingReactions.push(this),0<Df.inBatch||Df.isRunningReactions||ju(ob))};g.isScheduled=function(){return this.isScheduled_};g.runReaction_=function(){if(!this.isDisposed_){od();this.isScheduled_=!1;var p=Df.trackingContext;Df.trackingContext=this;if(Vc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(G){this.reportExceptionInDerivation_(G)}}Df.trackingContext=p;Td()}};g.track=function(p){if(!this.isDisposed_){od();
this.isRunning_=!0;var G=Df.trackingContext;Df.trackingContext=this;p=jd(this,p,void 0);Df.trackingContext=G;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Ld(this);p instanceof er&&this.reportExceptionInDerivation_(p.cause);Td()}};g.reportExceptionInDerivation_=function(p){var G=this;if(this.errorHandler_)this.errorHandler_(p,this);else{if(Df.disableErrorBoundaries)throw p;Df.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",p);Df.globalReactionErrorHandlers.forEach(function(X){return X(p,
G)})}};g.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(od(),Ld(this),Td()))};g.getDisposer_=function(){var p=this.dispose.bind(this);p[of]=this;return p};g.toString=function(){return"Reaction["+this.name_+"]"};g.trace=function(p){void 0===p&&(p=!1);Bb(this,p)};return b}(),FD=100,ju=function(b){return b()},du=D("Reaction",Vr),uy="action",vy=db(uy),rD=db("action.bound",{bound:!0}),xy=db("autoAction",{autoAction:!0}),xD=db("autoAction.bound",{autoAction:!0,bound:!0}),pg=
Uc(!1);Object.assign(pg,vy);var Ts=Uc(!0);Object.assign(Ts,xy);pg.bound=Ua(rD);Ts.bound=Ua(xD);var tD=function(b){return b()},uD="onBO",vD="onBUO",wD=0;Sb.prototype=Object.create(Error.prototype);var wy=sa("flow"),CD=sa("flow.bound",{bound:!0}),Us=Object.assign(function(b,g){if(T(g))return Ea(b,g,wy);var p=b.name||"\x3cunnamed flow\x3e";g=function(){var G=arguments,X=++wD,la=pg(p+" - runid: "+X+" - init",b).apply(this,G),pa,Ga=void 0;G=new Promise(function(Qa,Za){function eb(Pb){Ga=void 0;try{var ec=
pg(p+" - runid: "+X+" - yield "+Vb++,la.next).call(la,Pb)}catch(gc){return Za(gc)}Lb(ec)}function mb(Pb){Ga=void 0;try{var ec=pg(p+" - runid: "+X+" - yield "+Vb++,la["throw"]).call(la,Pb)}catch(gc){return Za(gc)}Lb(ec)}function Lb(Pb){if(ha(null==Pb?void 0:Pb.then))Pb.then(Lb,Za);else{if(Pb.done)return Qa(Pb.value);Ga=Promise.resolve(Pb.value);return Ga.then(eb,mb)}}var Vb=0;pa=Za;eb(void 0)});G.cancel=pg(p+" - runid: "+X+" - cancel",function(){try{if(Ga){var Qa=Ga;ha(Qa.cancel)&&Qa.cancel()}var Za=
la["return"](void 0),eb=Promise.resolve(Za.value);eb.then(Rd,Rd);ha(eb.cancel)&&eb.cancel();pa(new Sb)}catch(mb){pa(mb)}});return G};g.isMobXFlow=!0;return g},wy);Us.bound=Ua(CD);var sD={has:function(b,g){return b[of].has_(g)},get:function(b,g){return b[of].get_(g)},set:function(b,g,p){var G;return T(g)?null!=(G=b[of].set_(g,p,!0))?G:!0:!1},deleteProperty:function(b,g){var p;return T(g)?null!=(p=b[of].delete_(g,!0))?p:!0:!1},defineProperty:function(b,g,p){var G;return null!=(G=b[of].defineProperty_(g,
p))?G:!0},ownKeys:function(b){return b[of].ownKeys_()},preventExtensions:function(b){l(13)}},bp="update",qD={get:function(b,g){var p=b[of];return g===of?p:"length"===g?p.getArrayLength_():"string"!==typeof g||isNaN(g)?H(bu,g)?bu[g]:b[g]:p.get_(parseInt(g))},set:function(b,g,p){var G=b[of];"length"===g&&G.setArrayLength_(p);"symbol"===typeof g||isNaN(g)?b[g]=p:G.set_(parseInt(g),p);return!0},preventExtensions:function(){l(15)}},Mv=function(){function b(p,G,X,la){void 0===p&&(p="ObservableArray");this.atom_=
this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=X;this.legacyMode_=la;this.atom_=new lh(p);this.enhancer_=function(pa,Ga){return G(pa,Ga,"ObservableArray[..]")}}var g=b.prototype;g.dehanceValue_=function(p){return void 0!==this.dehancer?this.dehancer(p):p};g.dehanceValues_=function(p){return void 0!==this.dehancer&&0<p.length?p.map(this.dehancer):p};g.intercept_=function(p){return sd(this,
p)};g.observe_=function(p,G){void 0===G&&(G=!1);G&&p({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return cg(this,p)};g.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};g.setArrayLength_=function(p){("number"!==typeof p||isNaN(p)||0>p)&&l("Out of range: "+p);var G=this.values_.length;if(p!==G)if(p>G){for(var X=Array(p-G),la=0;la<
p-G;la++)X[la]=void 0;this.spliceWithArray_(G,0,X)}else this.spliceWithArray_(p,G-p)};g.updateArrayLength_=function(p,G){p!==this.lastKnownLength_&&l(16);this.lastKnownLength_+=G;this.legacyMode_&&0<G&&ve(p+G+1)};g.spliceWithArray_=function(p,G,X){var la=this,pa=this.values_.length;void 0===p?p=0:p>pa?p=pa:0>p&&(p=Math.max(0,pa+p));G=1===arguments.length?pa-p:void 0===G||null===G?0:Math.max(0,Math.min(G,pa-p));void 0===X&&(X=Hb);if(ee(this)){var Ga=pc(this,{object:this.proxy_,type:"splice",index:p,
removedCount:G,added:X});if(!Ga)return Hb;G=Ga.removedCount;X=Ga.added}X=0===X.length?X:X.map(function(Qa){return la.enhancer_(Qa,void 0)});this.legacyMode_&&this.updateArrayLength_(pa,X.length-G);pa=this.spliceItemsIntoValues_(p,G,X);0===G&&0===X.length||this.notifyArraySplice_(p,X,pa);return this.dehanceValues_(pa)};g.spliceItemsIntoValues_=function(p,G,X){if(1E4>X.length){var la;return(la=this.values_).splice.apply(la,[p,G].concat(X))}la=this.values_.slice(p,p+G);var pa=this.values_.slice(p+G);
this.values_.length+=X.length-G;for(G=0;G<X.length;G++)this.values_[p+G]=X[G];for(G=0;G<pa.length;G++)this.values_[p+X.length+G]=pa[G];return la};g.notifyArrayChildUpdate_=function(p,G,X){var la=!this.owned_&&!1,pa=Ke(this);p=pa||la?{observableKind:"array",object:this.proxy_,type:bp,debugObjectName:this.atom_.name_,index:p,newValue:G,oldValue:X}:null;this.atom_.reportChanged();pa&&cf(this,p)};g.notifyArraySplice_=function(p,G,X){var la=!this.owned_&&!1,pa=Ke(this);p=pa||la?{observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:p,removed:X,added:G,removedCount:X.length,addedCount:G.length}:null;this.atom_.reportChanged();pa&&cf(this,p)};g.get_=function(p){if(this.legacyMode_&&p>=this.values_.length)console.warn("[mobx] Out of bounds read: "+p);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[p])};g.set_=function(p,G){var X=this.values_;this.legacyMode_&&p>X.length&&l(17,p,X.length);if(p<X.length){var la=X[p];if(ee(this)){G=pc(this,
{type:bp,object:this.proxy_,index:p,newValue:G});if(!G)return;G=G.newValue}G=this.enhancer_(G,la);G!==la&&(X[p]=G,this.notifyArrayChildUpdate_(p,G,la))}else{p=Array(p+1-X.length);for(la=0;la<p.length-1;la++)p[la]=void 0;p[p.length-1]=G;this.spliceWithArray_(X.length,0,p)}};return b}(),bu={clear:function(){return this.splice(0)},replace:function(b){var g=this[of];return g.spliceWithArray_(0,g.values_.length,b)},toJSON:function(){return this.slice()},splice:function(b,g){for(var p=arguments.length,
G=Array(2<p?p-2:0),X=2;X<p;X++)G[X-2]=arguments[X];p=this[of];switch(arguments.length){case 0:return[];case 1:return p.spliceWithArray_(b);case 2:return p.spliceWithArray_(b,g)}return p.spliceWithArray_(b,g,G)},spliceWithArray:function(b,g,p){return this[of].spliceWithArray_(b,g,p)},push:function(){for(var b=this[of],g=arguments.length,p=Array(g),G=0;G<g;G++)p[G]=arguments[G];b.spliceWithArray_(b.values_.length,0,p);return b.values_.length},pop:function(){return this.splice(Math.max(this[of].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var b=this[of],g=arguments.length,p=Array(g),G=0;G<g;G++)p[G]=arguments[G];b.spliceWithArray_(0,0,p);return b.values_.length},reverse:function(){Df.trackingDerivation&&l(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){Df.trackingDerivation&&l(37,"sort");var b=this.slice();b.sort.apply(b,arguments);this.replace(b);return this},remove:function(b){var g=this[of];b=g.dehanceValues_(g.values_).indexOf(b);
return-1<b?(this.splice(b,1),!0):!1}};Cb("concat",cb);Cb("flat",cb);Cb("includes",cb);Cb("indexOf",cb);Cb("join",cb);Cb("lastIndexOf",cb);Cb("slice",cb);Cb("toString",cb);Cb("toLocaleString",cb);Cb("every",Db);Cb("filter",Db);Cb("find",Db);Cb("findIndex",Db);Cb("flatMap",Db);Cb("forEach",Db);Cb("map",Db);Cb("some",Db);Cb("reduce",ic);Cb("reduceRight",ic);var pD=D("ObservableArrayAdministration",Mv),oD={};var mD=Symbol.iterator;var nD=Symbol.toStringTag;var ty=function(){function b(p,G,X){var la=this;
void 0===G&&(G=Ma);void 0===X&&(X="ObservableMap");this.name_=this.enhancer_=void 0;this[of]=oD;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=G;this.name_=X;ha(Map)||l(18);this.keysAtom_=Xa("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Fb(!0,function(){la.merge(p)})}var g=b.prototype;g.has_=function(p){return this.data_.has(p)};g.has=function(p){var G=this;if(!Df.trackingDerivation)return this.has_(p);var X=this.hasMap_.get(p);
if(!X){var la=X=new dr(this.has_(p),fb,"ObservableMap.key?",!1);this.hasMap_.set(p,la);wc(la,function(){return G.hasMap_["delete"](p)})}return X.get()};g.set=function(p,G){var X=this.has_(p);if(ee(this)){G=pc(this,{type:X?bp:"add",object:this,newValue:G,name:p});if(!G)return this;G=G.newValue}X?this.updateValue_(p,G):this.addValue_(p,G);return this};g["delete"]=function(p){var G=this;if(ee(this)&&!pc(this,{type:"delete",object:this,name:p}))return!1;if(this.has_(p)){var X=Ke(this),la=X?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(p).value_,name:p}:null;Jd(function(){var pa;G.keysAtom_.reportChanged();null==(pa=G.hasMap_.get(p))?void 0:pa.setNewValue_(!1);G.data_.get(p).setNewValue_(void 0);G.data_["delete"](p)});X&&cf(this,la);return!0}return!1};g.updateValue_=function(p,G){var X=this.data_.get(p);G=X.prepareNewValue_(G);if(G!==Df.UNCHANGED){var la=Ke(this);p=la?{observableKind:"map",debugObjectName:this.name_,type:bp,object:this,oldValue:X.value_,
name:p,newValue:G}:null;X.setNewValue_(G);la&&cf(this,p)}};g.addValue_=function(p,G){var X=this;Jd(function(){var Ga,Qa=new dr(G,X.enhancer_,"ObservableMap.key",!1);X.data_.set(p,Qa);G=Qa.value_;null==(Ga=X.hasMap_.get(p))?void 0:Ga.setNewValue_(!0);X.keysAtom_.reportChanged()});var la=Ke(this),pa=la?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:p,newValue:G}:null;la&&cf(this,pa)};g.get=function(p){return this.has(p)?this.dehanceValue_(this.data_.get(p).get()):this.dehanceValue_(void 0)};
g.dehanceValue_=function(p){return void 0!==this.dehancer?this.dehancer(p):p};g.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};g.values=function(){var p=this,G=this.keys();return bb({next:function(){var X=G.next(),la=X.done;X=X.value;return{done:la,value:la?void 0:p.get(X)}}})};g.entries=function(){var p=this,G=this.keys();return bb({next:function(){var X=G.next(),la=X.done;X=X.value;return{done:la,value:la?void 0:[X,p.get(X)]}}})};g[mD]=function(){return this.entries()};
g.forEach=function(p,G){for(var X=Ha(this),la;!(la=X()).done;)la=la.value,p.call(G,la[1],la[0],this)};g.merge=function(p){var G=this;Up(p)&&(p=new Map(p));Jd(function(){E(p)?da(p).forEach(function(X){return G.set(X,p[X])}):Array.isArray(p)?p.forEach(function(X){return G.set(X[0],X[1])}):O(p)?(p.constructor!==Map&&l(19,p),p.forEach(function(X,la){return G.set(la,X)})):null!==p&&void 0!==p&&l(20,p)});return this};g.clear=function(){var p=this;Jd(function(){Kd(function(){for(var G=Ha(p.keys()),X;!(X=
G()).done;)p["delete"](X.value)})})};g.replace=function(p){var G=this;Jd(function(){for(var X=id(p),la=new Map,pa=!1,Ga=Ha(G.data_.keys()),Qa;!(Qa=Ga()).done;)if(Qa=Qa.value,!X.has(Qa))if(G["delete"](Qa))pa=!0;else{var Za=G.data_.get(Qa);la.set(Qa,Za)}for(X=Ha(X.entries());!(Ga=X()).done;)Qa=Ga.value,Ga=Qa[0],Za=Qa[1],Qa=G.data_.has(Ga),G.set(Ga,Za),G.data_.has(Ga)&&(Za=G.data_.get(Ga),la.set(Ga,Za),Qa||(pa=!0));if(!pa)if(G.data_.size!==la.size)G.keysAtom_.reportChanged();else for(pa=G.data_.keys(),
X=la.keys(),Ga=pa.next(),Qa=X.next();!Ga.done;){if(Ga.value!==Qa.value){G.keysAtom_.reportChanged();break}Ga=pa.next();Qa=X.next()}G.data_=la});return this};g.toString=function(){return"[object ObservableMap]"};g.toJSON=function(){return Array.from(this)};g.observe_=function(p,G){return cg(this,p)};g.intercept_=function(p){return sd(this,p)};N(b,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:nD,get:function(){return"Map"}}]);return b}(),Up=D("ObservableMap",
ty),hD={};var iD=Symbol.iterator;var jD=Symbol.toStringTag;var jy=function(){function b(p,G,X){void 0===G&&(G=Ma);void 0===X&&(X="ObservableSet");this.name_=void 0;this[of]=hD;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=X;ha(Set)||l(22);this.atom_=Xa(this.name_);this.enhancer_=function(la,pa){return G(la,pa,X)};p&&this.replace(p)}var g=b.prototype;g.dehanceValue_=function(p){return void 0!==this.dehancer?this.dehancer(p):p};
g.clear=function(){var p=this;Jd(function(){Kd(function(){for(var G=Ha(p.data_.values()),X;!(X=G()).done;)p["delete"](X.value)})})};g.forEach=function(p,G){for(var X=Ha(this),la;!(la=X()).done;)la=la.value,p.call(G,la,la,this)};g.add=function(p){var G=this;if(ee(this)&&!pc(this,{type:"add",object:this,newValue:p}))return this;if(!this.has(p)){Jd(function(){G.data_.add(G.enhancer_(p,void 0));G.atom_.reportChanged()});var X=Ke(this),la=X?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:p}:null;X&&cf(this,la)}return this};g["delete"]=function(p){var G=this;if(ee(this)&&!pc(this,{type:"delete",object:this,oldValue:p}))return!1;if(this.has(p)){var X=Ke(this),la=X?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:p}:null;Jd(function(){G.atom_.reportChanged();G.data_["delete"](p)});X&&cf(this,la);return!0}return!1};g.has=function(p){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(p))};g.entries=function(){var p=0,G=Array.from(this.keys()),
X=Array.from(this.values());return bb({next:function(){var la=p;p+=1;return la<X.length?{value:[G[la],X[la]],done:!1}:{done:!0}}})};g.keys=function(){return this.values()};g.values=function(){this.atom_.reportObserved();var p=this,G=0,X=Array.from(this.data_.values());return bb({next:function(){return G<X.length?{value:p.dehanceValue_(X[G++]),done:!1}:{done:!0}}})};g.replace=function(p){var G=this;Pq(p)&&(p=new Set(p));Jd(function(){Array.isArray(p)?(G.clear(),p.forEach(function(X){return G.add(X)})):
P(p)?(G.clear(),p.forEach(function(X){return G.add(X)})):null!==p&&void 0!==p&&l("Cannot initialize set from "+p)});return this};g.observe_=function(p,G){return cg(this,p)};g.intercept_=function(p){return sd(this,p)};g.toJSON=function(){return Array.from(this)};g.toString=function(){return"[object ObservableSet]"};g[iD]=function(){return this.values()};N(b,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:jD,get:function(){return"Set"}}]);return b}(),Pq=D("ObservableSet",
jy),ky=Object.create(null),ly=function(){function b(p,G,X,la){void 0===G&&(G=new Map);void 0===la&&(la=oe);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=p;this.values_=G;this.name_=X;this.defaultAnnotation_=la;this.keysAtom_=new lh("ObservableObject.keys");this.isPlainObject_=E(this.target_)}var g=b.prototype;g.getObservablePropValue_=function(p){return this.values_.get(p).get()};
g.setObservablePropValue_=function(p,G){var X=this.values_.get(p);if(X instanceof dt)return X.set(G),!0;if(ee(this)){G=pc(this,{type:bp,object:this.proxy_||this.target_,name:p,newValue:G});if(!G)return null;G=G.newValue}G=X.prepareNewValue_(G);if(G!==Df.UNCHANGED){var la=Ke(this);p=la?{type:bp,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:X.value_,name:p,newValue:G}:null;X.setNewValue_(G);la&&cf(this,p)}return!0};g.get_=function(p){Df.trackingDerivation&&
!H(this.target_,p)&&this.has_(p);return this.target_[p]};g.set_=function(p,G,X){void 0===X&&(X=!1);if(H(this.target_,p)){if(this.values_.has(p))return this.setObservablePropValue_(p,G);if(X)return Reflect.set(this.target_,p,G);this.target_[p]=G;return!0}return this.extend_(p,{value:G,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,X)};g.has_=function(p){if(!Df.trackingDerivation)return p in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var G=this.pendingKeys_.get(p);
G||(G=new dr(p in this.target_,fb,"ObservableObject.key?",!1),this.pendingKeys_.set(p,G));return G.get()};g.make_=function(p,G){!0===G&&(G=this.defaultAnnotation_);if(!1!==G){if(!(p in this.target_)){var X;if(null!=(X=this.target_[af])&&X[p])return;l(1,G.annotationType_,this.name_+"."+p.toString())}for(X=this.target_;X&&X!==gb;){var la=ma(X,p);if(la){la=G.make_(this,p,la,X);if(0===la)return;if(1===la)break}X=Object.getPrototypeOf(X)}var pa;null==(pa=this.target_[af])?!0:delete pa[p]}};g.extend_=function(p,
G,X,la){void 0===la&&(la=!1);!0===X&&(X=this.defaultAnnotation_);if(!1===X)return this.defineProperty_(p,G,la);if(G=X.extend_(this,p,G,la)){var pa;null==(pa=this.target_[af])?!0:delete pa[p]}return G};g.defineProperty_=function(p,G,X){void 0===X&&(X=!1);try{od();var la=this.delete_(p);if(!la)return la;if(ee(this)){var pa=pc(this,{object:this.proxy_||this.target_,name:p,type:"add",newValue:G.value});if(!pa)return null;var Ga=pa.newValue;G.value!==Ga&&(G=ca({},G,{value:Ga}))}if(X){if(!Reflect.defineProperty(this.target_,
p,G))return!1}else Da(this.target_,p,G);this.notifyPropertyAddition_(p,G.value)}finally{Td()}return!0};g.defineObservableProperty_=function(p,G,X,la){void 0===la&&(la=!1);try{od();var pa=this.delete_(p);if(!pa)return pa;if(ee(this)){var Ga=pc(this,{object:this.proxy_||this.target_,name:p,type:"add",newValue:G});if(!Ga)return null;G=Ga.newValue}var Qa=le(p),Za={configurable:Df.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Qa.get,set:Qa.set};if(la){if(!Reflect.defineProperty(this.target_,
p,Za))return!1}else Da(this.target_,p,Za);var eb=new dr(G,X,"ObservableObject.key",!1);this.values_.set(p,eb);this.notifyPropertyAddition_(p,eb.value_)}finally{Td()}return!0};g.defineComputedProperty_=function(p,G,X){void 0===X&&(X=!1);try{od();var la=this.delete_(p);if(!la)return la;if(ee(this)&&!pc(this,{object:this.proxy_||this.target_,name:p,type:"add",newValue:void 0}))return null;G.name||(G.name="ObservableObject.key");G.context=this.proxy_||this.target_;var pa=le(p),Ga={configurable:Df.safeDescriptors?
this.isPlainObject_:!0,enumerable:!1,get:pa.get,set:pa.set};if(X){if(!Reflect.defineProperty(this.target_,p,Ga))return!1}else Da(this.target_,p,Ga);this.values_.set(p,new dt(G));this.notifyPropertyAddition_(p,void 0)}finally{Td()}return!0};g.delete_=function(p,G){void 0===G&&(G=!1);if(!H(this.target_,p))return!0;if(ee(this)&&!pc(this,{object:this.proxy_||this.target_,name:p,type:"remove"}))return null;try{var X,la;od();var pa=Ke(this),Ga=this.values_.get(p),Qa=void 0;if(!Ga&&pa){var Za;Qa=null==(Za=
ma(this.target_,p))?void 0:Za.value}if(G){if(!Reflect.deleteProperty(this.target_,p))return!1}else delete this.target_[p];Ga&&(this.values_["delete"](p),Ga instanceof dr&&(Qa=Ga.value_),hc(Ga));this.keysAtom_.reportChanged();null==(X=this.pendingKeys_)?void 0:null==(la=X.get(p))?void 0:la.set(p in this.target_);if(pa){var eb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Qa,name:p};pa&&cf(this,eb)}}finally{Td()}return!0};g.observe_=function(p,
G){return cg(this,p)};g.intercept_=function(p){return sd(this,p)};g.notifyPropertyAddition_=function(p,G){var X,la,pa=Ke(this);pa&&(G=pa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:p,newValue:G}:null,pa&&cf(this,G));null==(X=this.pendingKeys_)?void 0:null==(la=X.get(p))?void 0:la.set(!0);this.keysAtom_.reportChanged()};g.ownKeys_=function(){this.keysAtom_.reportObserved();return ig(this.target_)};g.keys_=function(){this.keysAtom_.reportObserved();
return Object.keys(this.target_)};return b}(),kD=D("ObservableObjectAdministration",ly),lD=Ve(0),Jv=0,my=function(){};(function(b,g){Object.setPrototypeOf?Object.setPrototypeOf(b.prototype,g):void 0!==b.prototype.__proto__?b.prototype.__proto__=g:b.prototype=g})(my,Array.prototype);var Kv=function(b,g,p){function G(la,pa,Ga,Qa){void 0===Ga&&(Ga="ObservableArray");void 0===Qa&&(Qa=!1);var Za=b.call(this)||this;pa=new Mv(Ga,pa,Qa,!0);pa.proxy_=qa(Za);S(qa(Za),of,pa);la&&la.length&&(pa=yc(!0),Za.spliceWithArray(0,
0,la),Df.allowStateChanges=pa);Object.defineProperty(qa(Za),"0",lD);return Za}ia(G,b);var X=G.prototype;X.concat=function(){this[of].atom_.reportObserved();for(var la=arguments.length,pa=Array(la),Ga=0;Ga<la;Ga++)pa[Ga]=arguments[Ga];return Array.prototype.concat.apply(this.slice(),pa.map(function(Qa){return kb(Qa)?Qa.slice():Qa}))};X[p]=function(){var la=this,pa=0;return bb({next:function(){return pa<la.length?{value:la[pa++],done:!1}:{done:!0,value:void 0}}})};N(G,[{key:"length",get:function(){return this[of].getArrayLength_()},
set:function(la){this[of].setArrayLength_(la)}},{key:g,get:function(){return"Array"}}]);return G}(my,Symbol.toStringTag,Symbol.iterator);Object.entries(bu).forEach(function(b){var g=b[0];b=b[1];"concat"!==g&&M(Kv.prototype,g,b)});ve(1E3);var gy=gb.toString;["Symbol","Map","Set"].forEach(function(b){"undefined"===typeof J()[b]&&l("MobX requires global '"+b+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:vc,extras:{getDebugName:zb},
$mobx:of});var nb=W(588),Am=class{constructor(b){ib(this,"props");ib(this,"aspectRatio");ib(this,"type");ib(this,"hideCloneHandles",!1);ib(this,"hideResizeHandles",!1);ib(this,"hideRotateHandle",!1);ib(this,"hideContextBar",!1);ib(this,"hideSelectionDetail",!1);ib(this,"hideSelection",!1);ib(this,"canChangeAspectRatio",!0);ib(this,"canUnmount",!0);ib(this,"canResize",[!0,!0]);ib(this,"canScale",!0);ib(this,"canFlip",!0);ib(this,"canEdit",!1);ib(this,"canBind",!1);ib(this,"nonce");ib(this,"bindingDistance",
4);ib(this,"isDirty",!1);ib(this,"lastSerialized");ib(this,"getCenter",()=>wf.getBoundsCenter(this.bounds));ib(this,"getRotatedBounds",()=>{const {bounds:la,props:{rotation:pa}}=this;return pa?wf.getBoundsFromPoints(wf.getRotatedCorners(la,pa)):la});ib(this,"hitTestPoint",la=>{var pa=this.rotatedBounds;if(!this.props.rotation)return Bj.pointInBounds(la,pa);pa=wf.getRotatedCorners(pa,this.props.rotation);return Bj.pointInPolygon(la,pa)});ib(this,"hitTestLineSegment",(la,pa)=>{const Ga=wf.getBoundsFromPoints([la,
pa]),{rotatedBounds:Qa,props:{rotation:Za=0}}=this;return wf.boundsContain(Qa,Ga)||Za?h(la,pa,wf.getRotatedCorners(this.bounds)).didIntersect:0<m(Qa,la,pa).length});ib(this,"hitTestBounds",la=>{const {rotatedBounds:pa,props:{rotation:Ga=0}}=this,Qa=wf.getRotatedCorners(this.bounds,Ga);return wf.boundsContain(la,pa)||0<z([la.minX,la.minY],[la.width,la.height],Qa).length});ib(this,"getExpandedBounds",()=>wf.expandBounds(this.getBounds(),this.bindingDistance));ib(this,"getBindingPoint",(la,pa,Ga,Qa)=>
{var Za=this.getBounds(),eb=this.getExpandedBounds();if(Bj.pointInBounds(la,eb)){var mb=C(pa,Ga,eb).filter(Lb=>Lb.didIntersect).map(Lb=>Lb.points[0]);if(mb.length)return Ga=this.getCenter(),mb=mb.sort((Lb,Vb)=>ne.dist(Vb,pa)-ne.dist(Lb,pa))[0],mb=ne.med(la,mb),Qa?(Qa=2>ne.dist(la,Ga)?Ga:la,Za=0):(Qa=2>ne.distanceToLineSegment(la,mb,Ga)?Ga:mb,Za=Bj.pointInBounds(la,Za)?this.bindingDistance:Math.max(this.bindingDistance,wf.getBoundsSides(Za).map(Lb=>ne.distanceToLineSegment(Lb[1][0],Lb[1][1],la)).sort((Lb,
Vb)=>Lb-Vb)[0])),eb=ne.divV(ne.sub(Qa,[eb.minX,eb.minY]),[eb.width,eb.height]),{point:ne.clampV(eb,0,1),distance:Za}}});ib(this,"getSerialized",()=>Fc(lf(pe({},this.props),{type:this.type,nonce:this.nonce})));ib(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Jd(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});ib(this,"validateProps",la=>la);ib(this,
"update",(la,pa=!1,Ga=!1)=>{pa||this.isDirty||this.setIsDirty(!0);pa||Ga||this.incNonce();Object.assign(this.props,this.validateProps(la));return this});ib(this,"clone",()=>new this.constructor(this.serialized));ib(this,"onResetBounds",la=>this);ib(this,"scale",[1,1]);ib(this,"onResizeStart",la=>{var pa;this.scale=[...(null!=(pa=this.props.scale)?pa:[1,1])];return this});ib(this,"onResize",(la,pa)=>{const {bounds:Ga,rotation:Qa,scale:[Za,eb]}=pa;la=[...this.scale];0>Za&&(la[0]*=-1);0>eb&&(la[1]*=
-1);this.update({point:[Ga.minX,Ga.minY],scale:la,rotation:Qa});return this});ib(this,"onHandleChange",(la,{id:pa,delta:Ga})=>{if(void 0!==la.handles){var Qa=fr(la.handles);Qa[pa]=lf(pe({},Qa[pa]),{point:ne.add(Ga,la.handles[pa].point)});var Za=wf.getCommonTopLeft(Object.values(Qa).map(eb=>eb.point));Object.values(Qa).forEach(eb=>{eb.point=ne.sub(eb.point,Za)});this.update({point:ne.add(la.point,Za),handles:Qa})}});var g,p;const G=this.constructor.id,X=null!=(g=this.constructor.defaultProps)?g:{};
this.type=G;this.props=pe(pe({scale:[1,1]},X),b);this.nonce=null!=(p=b.nonce)?p:Date.now();Ag(this)}get id(){return this.props.id}setNonce(b){this.nonce=b}incNonce(){this.nonce++}setIsDirty(b){this.isDirty=b}setLastSerialized(b){this.lastSerialized=b}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(b){b=this.getBounds();const {stroke:g,strokeWidth:p,strokeType:G,
opacity:X,fill:la,noFill:pa,borderRadius:Ga}=this.props;return(0,nb.jsx)("rect",{fill:pa?"none":Yg(la,"background"),stroke:Yg(g,"stroke"),strokeWidth:null!=p?p:2,strokeDasharray:"dashed"===G?"8 2":void 0,fillOpacity:null!=X?X:.2,width:b.width,height:b.height,rx:Ga,ry:Ga})}};ib(Am,"type");de([ug],Am.prototype,"props",2);de([ug],Am.prototype,"canResize",2);de([ug],Am.prototype,"nonce",2);de([ug],Am.prototype,"isDirty",2);de([ug],Am.prototype,"lastSerialized",2);de([Pg],Am.prototype,"id",1);de([pg],
Am.prototype,"setNonce",1);de([pg],Am.prototype,"incNonce",1);de([pg],Am.prototype,"setIsDirty",1);de([pg],Am.prototype,"setLastSerialized",1);de([Pg],Am.prototype,"center",1);de([Pg],Am.prototype,"bounds",1);de([Pg],Am.prototype,"rotatedBounds",1);de([Pg],Am.prototype,"serialized",1);de([pg],Am.prototype,"update",2);var yn=class extends Am{constructor(b={}){super(b);ib(this,"canBind",!0);ib(this,"getBounds",()=>{const [g,p]=this.props.point,[G,X]=this.props.size;return{minX:g,minY:p,maxX:g+G,maxY:p+
X,width:G,height:X}});ib(this,"getRotatedBounds",()=>wf.getBoundsFromPoints(wf.getRotatedCorners(this.bounds,this.props.rotation)));ib(this,"onResize",(g,p)=>{const {bounds:G,rotation:X,scale:[la,pa]}=p;g=[...this.scale];0>la&&(g[0]*=-1);0>pa&&(g[1]*=-1);this.update({point:[G.minX,G.minY],scale:g,rotation:X});return this.update({rotation:X,point:[G.minX,G.minY],size:[Math.max(1,G.width),Math.max(1,G.height)],scale:g})});ib(this,"validateProps",g=>{void 0!==g.size&&(g.size[0]=Math.max(g.size[0],1),
g.size[1]=Math.max(g.size[1],1));return g});Ag(this)}};ib(yn,"id","box");ib(yn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var Gr=class extends Am{constructor(b={}){super(b);ib(this,"getBounds",()=>{const {pointBounds:g,props:{point:p}}=this;return wf.translateBounds(g,p)});ib(this,"getRotatedBounds",()=>{const {props:{rotation:g,point:p},bounds:G,rotatedPoints:X}=this;return g?wf.translateBounds(wf.getBoundsFromPoints(X),p):G});ib(this,"normalizedPoints",[]);
ib(this,"isResizeFlippedX",!1);ib(this,"isResizeFlippedY",!1);ib(this,"onResizeStart",()=>{var g;const {bounds:p,props:{points:G}}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const X=[p.width,p.height];this.normalizedPoints=G.map(la=>Fd.divV(la,X));return this});ib(this,"onResize",(g,p)=>{const {bounds:G,scale:[X,la]}=p,pa=[G.width,G.height];g=[...this.scale];0>X&&(g[0]*=-1);0>la&&(g[1]*=-1);return this.update(X||la?{point:[G.minX,G.minY],points:this.normalizedPoints.map(Ga=>Fd.mulV(Ga,
pa).concat(Ga[2])),scale:g}:{point:[G.minX,G.minY],points:this.normalizedPoints.map(Ga=>Fd.mulV(Ga,pa).concat(Ga[2]))})});ib(this,"hitTestPoint",g=>{const {props:{points:p,point:G}}=this;return Bj.pointNearToPolyline(Fd.sub(g,G),p)});ib(this,"hitTestLineSegment",(g,p)=>{const {bounds:G,props:{points:X,point:la}}=this;if(Bj.pointInBounds(g,G)||Bj.pointInBounds(p,G)||0<m(G,g,p).length){const pa=Fd.sub(g,la),Ga=Fd.sub(p,la);return h(pa,Ga,X).didIntersect||!!X.find(Qa=>5>Fd.dist(pa,Qa)||5>Fd.dist(Ga,
Qa))}return!1});ib(this,"hitTestBounds",g=>{const {rotatedBounds:p,props:{points:G,point:X}}=this,la=wf.translateBounds(g,Fd.neg(X));return wf.boundsContain(g,p)||G.every(pa=>Bj.pointInBounds(pa,la))||wf.boundsCollide(g,p)&&0<L([la.minX,la.minY],[la.width,la.height],G).length});Ag(this)}get pointBounds(){const {props:{points:b}}=this;return wf.getBoundsFromPoints(b)}get rotatedPoints(){const {props:{point:b,points:g,rotation:p},center:G}=this;if(!p)return g;const X=Fd.sub(G,b);return g.map(la=>Fd.rotWith(la,
X,p))}};ib(Gr,"id","draw");ib(Gr,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});de([Pg],Gr.prototype,"pointBounds",1);de([Pg],Gr.prototype,"rotatedPoints",1);var Gv=class extends yn{constructor(b={}){super(b);ib(this,"getBounds",()=>{const {props:{point:[g,p],size:[G,X]}}=this;return wf.getRotatedEllipseBounds(g,p,G/2,X/2,0)});ib(this,"getRotatedBounds",()=>{const {props:{point:[g,p],size:[G,X],rotation:la}}=this;return wf.getRotatedEllipseBounds(g,p,G/
2,X/2,la)});ib(this,"hitTestPoint",g=>{const {props:{size:p,rotation:G},center:X}=this;return Bj.pointInEllipse(g,X,p[0],p[1],G||0)});ib(this,"hitTestLineSegment",(g,p)=>{const {props:{size:[G,X],rotation:la=0},center:pa}=this;return r(g,p,pa,G,X,la).didIntersect});ib(this,"hitTestBounds",g=>{const {props:{size:[p,G],rotation:X=0},rotatedBounds:la}=this;var pa;if(!(pa=wf.boundsContain(g,la))){const {minX:Ga,minY:Qa,width:Za,height:eb}=g;pa=0<u(this.center,p/2,G/2,X,[Ga,Qa],[Za,eb]).length}return pa});
Ag(this)}};ib(Gv,"id","ellipse");ib(Gv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var Hv=class extends yn{constructor(b={}){super(b);ib(this,"onResetBounds",g=>{const {clipping:p,size:G,point:X}=this.props;if(p){const [la,pa,Ga,Qa]=Array.isArray(p)?p:[p,p,p,p];return this.update({clipping:0,point:[X[0]-Qa,X[1]-la],size:[G[0]+(Qa-pa),G[1]+(la-Ga)]})}if(g.asset){const {size:[la,pa]}=g.asset;this.update({clipping:0,point:[X[0]+G[0]/2-la/2,X[1]+G[1]/2-pa/
2],size:[la,pa]})}return this});ib(this,"onResize",(g,p)=>{const {bounds:G,clip:X,scale:la}=p;({clipping:p}=this.props);const {clipping:pa}=g;if(X){const {point:[Ga,Qa],size:[Za,eb]}=g,[mb,Lb,Vb,Pb]=pa?Array.isArray(pa)?pa:[pa,pa,pa,pa]:[0,0,0,0];p=[mb+(G.minY-Qa),Lb+(G.maxX-(Ga+Za)),Vb+(G.maxY-(Qa+eb)),Pb+(G.minX-Ga)]}else void 0!==pa&&(p=Array.isArray(pa)?pa:[pa,pa,pa,pa],p=[p[0]*la[1],p[1]*la[0],p[2]*la[1],p[3]*la[0]]);if(p&&Array.isArray(p)){const Ga=p;Ga.every((Qa,Za)=>0===Za||Qa===Ga[Za-1])&&
(p=Ga[0])}return this.update({point:[G.minX,G.minY],size:[Math.max(1,G.width),Math.max(1,G.height)],clipping:p})});Ag(this)}};ib(Hv,"id","ellipse");ib(Hv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var hy=class extends Am{constructor(b={}){super(b);ib(this,"getBounds",()=>{const {points:g,props:{point:p}}=this;return wf.translateBounds(wf.getBoundsFromPoints(g),p)});ib(this,"getRotatedBounds",()=>{const {rotatedPoints:g,
props:{point:p}}=this;return wf.translateBounds(wf.getBoundsFromPoints(g),p)});ib(this,"normalizedHandles",[]);ib(this,"onResizeStart",()=>{var g;const {props:{handles:p},bounds:G}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const X=[G.width,G.height];this.normalizedHandles=Object.values(p).map(la=>Fd.divV(la.point,X));return this});ib(this,"onResize",(g,p)=>{const {bounds:G,scale:[X,la]}=p,{props:{handles:pa},normalizedHandles:Ga}=this,Qa=[G.width,G.height];g=[...this.scale];0>X&&(g[0]*=
-1);0>la&&(g[1]*=-1);return this.update({point:[G.minX,G.minY],handles:Object.values(pa).map((Za,eb)=>lf(pe({},Za),{point:Fd.mulV(Ga[eb],Qa)})),scale:g})});ib(this,"hitTestPoint",g=>{const {points:p}=this;return Bj.pointNearToPolyline(Fd.sub(g,this.props.point),p)});ib(this,"hitTestLineSegment",(g,p)=>{const {bounds:G,points:X,props:{point:la}}=this;if(Bj.pointInBounds(g,G)||Bj.pointInBounds(p,G)||0<m(G,g,p).length){const pa=Fd.sub(g,la),Ga=Fd.sub(p,la);return h(pa,Ga,X).didIntersect||!!X.find(Qa=>
5>Fd.dist(pa,Qa)||5>Fd.dist(Ga,Qa))}return!1});ib(this,"hitTestBounds",g=>{const {rotatedBounds:p,points:G,props:{point:X}}=this,la=wf.translateBounds(g,Fd.neg(X));return wf.boundsContain(g,p)||G.every(pa=>Bj.pointInBounds(pa,la))||wf.boundsCollide(g,p)&&0<L([la.minX,la.minY],[la.width,la.height],G).length});ib(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=hy.defaultProps.handles);return g});Ag(this)}get points(){return Object.values(this.props.handles).map(b=>
b.point)}get centroid(){const {points:b}=this;return Ik.getPolygonCentroid(b)}get rotatedPoints(){const {centroid:b,props:{handles:g,rotation:p}}=this;return p?Object.values(g).map(G=>Fd.rotWith(G.point,b,p)):this.points}},Hr=hy;ib(Hr,"id","polyline");ib(Hr,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});de([Pg],Hr.prototype,"points",1);de([Pg],Hr.prototype,"centroid",1);de([Pg],Hr.prototype,"rotatedPoints",1);var iy=class extends Hr{constructor(b={}){super(b);
ib(this,"hideResizeHandles",!0);ib(this,"hideRotateHandle",!0);ib(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=iy.defaultProps.handles);return g});ib(this,"getHandlesChange",(g,p)=>{var G=Hi(g.handles,p);G=Hi(G,{start:{point:ne.toFixed(G.start.point)},end:{point:ne.toFixed(G.end.point)}});if(!ne.isEqual(G.start.point,G.end.point)){p={point:g.point,handles:fr(G)};g=g.point;G=wf.translateBounds(wf.getBoundsFromPoints(Object.values(G).map(la=>
la.point)),p.point);var X=ne.sub([G.minX,G.minY],g);ne.isEqual(X,[0,0])||(Object.values(p.handles).forEach(la=>{la.point=ne.toFixed(ne.sub(la.point,X))}),p.point=ne.toFixed(ne.add(p.point,X)));return p}});Ag(this)}},Qs=iy;ib(Qs,"id","line");ib(Qs,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Tp=class extends yn{constructor(b={}){super(b);ib(this,"getRotatedBounds",()=>{const {rotatedVertices:g,
props:{point:p},offset:G}=this;return wf.translateBounds(wf.getBoundsFromPoints(g),Fd.add(p,G))});ib(this,"hitTestPoint",g=>{const {vertices:p}=this;return Bj.pointInPolygon(Fd.add(g,this.props.point),p)});ib(this,"hitTestLineSegment",(g,p)=>{const {vertices:G,props:{point:X}}=this;return h(Fd.sub(g,X),Fd.sub(p,X),G).didIntersect});ib(this,"hitTestBounds",g=>{const {rotatedBounds:p,offset:G,rotatedVertices:X,props:{point:la}}=this,pa=wf.translateBounds(g,Fd.neg(Fd.add(la,G)));return wf.boundsContain(g,
p)||X.every(Ga=>Bj.pointInBounds(Ga,pa))||0<z([pa.minX,pa.minY],[pa.width,pa.height],X).length});ib(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.sides&&3>g.sides&&(g.sides=3);return g});Ag(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:b},vertices:g}=this;return g.map(p=>Fd.add(p,b))}get centroid(){const {vertices:b}=this;return Ik.getPolygonCentroid(b)}get rotatedVertices(){const {vertices:b,centroid:g,props:{rotation:p}}=this;return p?b.map(G=>
Fd.rotWith(G,g,p)):b}get offset(){const {props:{size:[b,g]}}=this,p=wf.getBoundsCenter(wf.getBoundsFromPoints(this.vertices));return Fd.sub(Fd.div([b,g],2),p)}getVertices(b=0){const {ratio:g,sides:p,size:G}=this.props;return 3===p?Ik.getTriangleVertices(G,b,g):Ik.getPolygonVertices(G,p,b,g)}};ib(Tp,"id","polygon");ib(Tp,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});de([Pg],Tp.prototype,"vertices",1);de([Pg],Tp.prototype,"pageVertices",
1);de([Pg],Tp.prototype,"centroid",1);de([Pg],Tp.prototype,"rotatedVertices",1);de([Pg],Tp.prototype,"offset",1);var Iv=class extends yn{constructor(b={}){super(b);ib(this,"canEdit",!0);ib(this,"canFlip",!1);Ag(this)}};ib(Iv,"id","text");ib(Iv,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var au=class extends yn{constructor(b={}){super(b);ib(this,"canEdit",!1);ib(this,"canFlip",!1);ib(this,"getBounds",()=>wf.getCommonBounds(this.shapes.map(g=>
g.getBounds())));Ag(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};ib(au,"id","group");ib(au,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});de([Pg],au.prototype,"shapes",1);var Ir=class{constructor(){ib(this,"_id");ib(this,"_initial");ib(this,"_states");ib(this,"_isActive",!1);ib(this,"cursor");ib(this,"_disposables",[]);ib(this,"children",new Map([]));ib(this,"registerStates",
p=>{p.forEach(G=>this.children.set(G.id,new G(this,this)));return this});ib(this,"deregisterStates",p=>{p.forEach(G=>{var X;null==(X=this.children.get(G.id))?void 0:X.dispose();this.children.delete(G.id)});return this});ib(this,"currentState",{});ib(this,"transition",(p,G={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${p}.`);const X=this.children.get(p),la=this.currentState;if(!X)throw Error(`Could not find a state named ${p}.`);Jd(()=>{this.currentState?
(la._events.onExit(lf(pe({},G),{toId:p})),la.dispose(),X.registerKeyboardShortcuts(),this.setCurrentState(X),this._events.onTransition(lf(pe({},G),{fromId:la.id,toId:p})),X._events.onEnter(lf(pe({},G),{fromId:la.id}))):(this.currentState=X,X._events.onEnter(lf(pe({},G),{fromId:""})))});return this});ib(this,"isIn",p=>{p=p.split(".").reverse();let G=this;for(;0<p.length;){const X=p.pop();if(!X)return!0;if(G.currentState.id===X){if(0===p.length)return!0;G=G.currentState}else break}return!1});ib(this,
"isInAny",(...p)=>p.some(this.isIn));ib(this,"forwardEvent",(p,...G)=>{var X,la;(null==(la=null==(X=this.currentState)?void 0:X._events)?0:la[p])&&Jd(()=>{var pa;return null==(pa=this.currentState._events)?void 0:pa[p](...G)})});ib(this,"_events",{onTransition:p=>{var G;null==(G=this.onTransition)?void 0:G.call(this,p)},onEnter:p=>{var G;this._isActive=!0;this.initial&&this.transition(this.initial,p);null==(G=this.onEnter)?void 0:G.call(this,p)},onExit:p=>{var G,X,la;this._isActive=!1;null==(X=null==
(G=this.currentState)?void 0:G.onExit)?void 0:X.call(G,{toId:"parent"});null==(la=this.onExit)?void 0:la.call(this,p)},onPointerDown:(p,G)=>{var X;null==(X=this.onPointerDown)?void 0:X.call(this,p,G);this.forwardEvent("onPointerDown",p,G)},onPointerUp:(p,G)=>{var X;null==(X=this.onPointerUp)?void 0:X.call(this,p,G);this.forwardEvent("onPointerUp",p,G)},onPointerMove:(p,G)=>{var X;null==(X=this.onPointerMove)?void 0:X.call(this,p,G);this.forwardEvent("onPointerMove",p,G)},onPointerEnter:(p,G)=>{var X;
null==(X=this.onPointerEnter)?void 0:X.call(this,p,G);this.forwardEvent("onPointerEnter",p,G)},onPointerLeave:(p,G)=>{var X;null==(X=this.onPointerLeave)?void 0:X.call(this,p,G);this.forwardEvent("onPointerLeave",p,G)},onDoubleClick:(p,G)=>{var X;null==(X=this.onDoubleClick)?void 0:X.call(this,p,G);this.forwardEvent("onDoubleClick",p,G)},onKeyDown:(p,G)=>{var X;this._events.onModifierKey(p,G);null==(X=this.onKeyDown)?void 0:X.call(this,p,G);this.forwardEvent("onKeyDown",p,G)},onKeyUp:(p,G)=>{var X;
this._events.onModifierKey(p,G);null==(X=this.onKeyUp)?void 0:X.call(this,p,G);this.forwardEvent("onKeyUp",p,G)},onPinchStart:(p,G)=>{var X;null==(X=this.onPinchStart)?void 0:X.call(this,p,G);this.forwardEvent("onPinchStart",p,G)},onPinch:(p,G)=>{var X;null==(X=this.onPinch)?void 0:X.call(this,p,G);this.forwardEvent("onPinch",p,G)},onPinchEnd:(p,G)=>{var X;null==(X=this.onPinchEnd)?void 0:X.call(this,p,G);this.forwardEvent("onPinchEnd",p,G)},onModifierKey:(p,G)=>{switch(G.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(p,
G)}}});ib(this,"onEnter");ib(this,"onExit");ib(this,"onTransition");ib(this,"onPointerDown");ib(this,"onPointerUp");ib(this,"onPointerMove");ib(this,"onPointerEnter");ib(this,"onPointerLeave");ib(this,"onDoubleClick");ib(this,"onKeyDown");ib(this,"onKeyUp");ib(this,"onPinchStart");ib(this,"onPinch");ib(this,"onPinchEnd");const b=this.constructor.initial,g=this.constructor.states;this._id=this.constructor.id;this._initial=b;this._states=g}dispose(){this._disposables.forEach(b=>b());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(b=>[b,...b.descendants])}setCurrentState(b){this.currentState=b}};ib(Ir,"id");ib(Ir,"shortcuts");de([ug],Ir.prototype,"currentState",2);de([pg],Ir.prototype,"setCurrentState",1);var Lv=class extends Ir{constructor(b,g){var p,G;super();ib(this,"registerKeyboardShortcuts",
()=>{var X;null!=(X=this._shortcuts)&&X.length&&this._disposables.push(...this._shortcuts.map(({keys:la,fn:pa})=>Oq.registerShortcut(la,Ga=>{this.isActive&&pa(this.root,this,Ga)})))});ib(this,"_root");ib(this,"_parent");ib(this,"_shortcuts",[]);ib(this,"children",new Map([]));ib(this,"registerStates",X=>{X.forEach(la=>this.children.set(la.id,new la(this,this._root)));return this});ib(this,"deregisterStates",X=>{X.forEach(la=>{var pa;null==(pa=this.children.get(la.id))?void 0:pa.dispose();this.children.delete(la.id)});
return this});this._parent=b;this._root=g;this.states&&0<this.states.length&&(this.registerStates(this.states),b=null!=(p=this.initial)?p:this.states[0].id,p=this.children.get(b))&&(this.setCurrentState(p),null==(G=this.currentState)?void 0:G._events.onEnter({fromId:"initial"}));this._shortcuts=this.constructor.shortcuts;Ag(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,
this]:[this]}};ib(Lv,"cursor");var Vp=class extends Lv{constructor(){super(...arguments);ib(this,"isLocked",!1);ib(this,"previous");ib(this,"onEnter",({fromId:b})=>{this.previous=b;this.cursor&&this.app.cursors.setCursor(this.cursor)});ib(this,"onTransition",b=>{({toId:b}=b);b=this.children.get(b);this.app.cursors.reset();b.cursor?this.app.cursors.setCursor(b.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Fi=class extends Lv{get app(){return this.root}get tool(){return this.parent}},
ny=class extends Fi{constructor(){super(...arguments);ib(this,"cursor","crosshair");ib(this,"creatingShape");ib(this,"aspectRatio");ib(this,"initialBounds",{});ib(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g,currentPoint:p}}=this.app;var {Shape:G}=this.tool;G=new G({id:gl(),type:G.id,parentId:b.id,point:[...g],fill:this.app.settings.color,stroke:this.app.settings.color,size:ne.abs(ne.sub(p,g))});this.initialBounds={minX:g[0],minY:g[1],maxX:g[0]+1,maxY:g[1]+1,width:1,height:1};G.canChangeAspectRatio||
(G.aspectRatio?(this.aspectRatio=G.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=G;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(G);this.app.setSelectedShapes([G])});ib(this,"onPointerMove",b=>{if(!b.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:b}=
this);var {currentPoint:g,originPoint:p,shiftKey:G}=this.app.inputs;b=wf.getTransformedBoundingBox(b,"bottom_right_corner",ne.sub(g,p),0,G||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[b.minX,b.minY],size:[b.width,b.height]})}});ib(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");
this.app.persist()});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};ib(ny,"id","creating");var oy=class extends Fi{constructor(){super(...arguments);ib(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});ib(this,"onPinchStart",(...b)=>{var g,p;this.app.transition("select",{returnTo:this.app.currentState.id});null==(p=(g=this.app._events).onPinchStart)?
void 0:p.call(g,...b)});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};ib(oy,"id","idle");var py=class extends Fi{constructor(){super(...arguments);ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Fd.dist(b,g)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});ib(this,"onPointerUp",()=>{this.tool.transition("idle")})}};ib(py,"id","pointing");var sp=class extends Vp{constructor(){super(...arguments);
ib(this,"cursor","crosshair")}};ib(sp,"id","box");ib(sp,"states",[oy,py,ny]);ib(sp,"initial","idle");var qy=class extends Fi{constructor(){super(...arguments);ib(this,"shape",{});ib(this,"points",[[0,0,.5]]);ib(this,"persistDebounced",hk(this.app.persist,200));ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ib(this,"onEnter",()=>{var b;const {Shape:g,previousShape:p}=this.tool;var {originPoint:G}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
p){this.shape=p;var {shape:X}=this;var la=X.props.points[X.props.points.length-1];const Ga=Fd.sub(G,X.props.point).concat(null!=(b=G[2])?b:.5);this.points=[...X.props.points,la,la];const Qa=Math.ceil(Fd.dist(la,G)/16);for(let Za=0,eb=Za/(Qa-1);Za<Qa;Za++){b=this.points;G=b.push;X=Fd.lrp(la,Ga,eb);var pa=la[2];G.call(b,X.concat.call(X,pa+(Ga[2]-pa)*eb))}this.addNextPoint(Ga)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(la=G[2])?la:.5]],this.shape=new g({id:gl(),type:g.id,parentId:this.app.currentPage.id,
point:G.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});ib(this,"onPointerMove",()=>{const {shape:b}=this,{currentPoint:g,previousPoint:p}=this.app.inputs;Fd.isEqual(p,g)||this.addNextPoint(Fd.sub(g,b.props.point).concat(g[2]))});ib(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,
points:this.tool.simplify?Bj.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let b=this.app.selectedTool.id;"pencil"===b||"highlighter"===b?this.persistDebounced():this.app.persist()});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(b){const {shape:g}=this,p=Fd.min(b,
[0,0]);this.points.push(b);0>p[0]||0>p[1]?(this.points=this.points.map(G=>Fd.sub(G,p).concat(G[2])),g.update({point:Fd.add(g.props.point,p),points:this.points})):g.update({points:this.points})}};ib(qy,"id","creating");var ry=class extends Fi{constructor(){super(...arguments);ib(this,"onPointerDown",(b,g)=>{b.order||this.app.readOnly||this.tool.transition("creating")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};
ib(ry,"id","idle");var sy=class extends Fi{constructor(){super(...arguments);ib(this,"origin",[0,0]);ib(this,"prevDelta",[0,0]);ib(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});ib(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});ib(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};ib(sy,"id","pinching");var Rs=class extends Vp{constructor(){super(...arguments);ib(this,"cursor","crosshair");ib(this,"simplify",!0);ib(this,"simplifyTolerance",
1);ib(this,"previousShape");ib(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};ib(Rs,"id","draw");ib(Rs,"states",[ry,qy,sy]);ib(Rs,"initial","idle");var Zx=class extends Fi{constructor(){super(...arguments);ib(this,"points",[[0,0,.5]]);ib(this,"hitShapes",new Set);ib(this,"onEnter",()=>{const {originPoint:b}=this.app.inputs;this.points=[b];this.hitShapes.clear()});ib(this,"onPointerMove",()=>{const {currentPoint:b,previousPoint:g}=this.app.inputs;Fd.isEqual(g,b)||(this.points.push(b),
this.app.shapesInViewport.filter(p=>p.hitTestLineSegment(g,b)).forEach(p=>this.hitShapes.add(p)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});ib(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};ib(Zx,"id","erasing");var $x=class extends Fi{constructor(){super(...arguments);ib(this,"onPointerDown",
(b,g)=>{b.order||this.tool.transition("pointing")});ib(this,"onPinchStart",(...b)=>{var g,p;this.app.transition("select",{returnTo:this.app.currentState.id});null==(p=(g=this.app._events).onPinchStart)?void 0:p.call(g,...b)});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};ib($x,"id","idle");var ay=class extends Fi{constructor(){super(...arguments);ib(this,"onEnter",()=>{const {currentPoint:b}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(g=>
g.hitTestPoint(b)))});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Fd.dist(b,g)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});ib(this,"onPointerUp",()=>{const b=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(b);this.tool.transition("idle")})}};ib(ay,"id","pointing");var Yt=class extends Vp{constructor(){super(...arguments);ib(this,"cursor","crosshair")}};ib(Yt,"id","erase");ib(Yt,"states",[$x,ay,Zx]);ib(Yt,
"initial","idle");var Fv=class extends Fi{constructor(){super(...arguments);ib(this,"handle",{});ib(this,"handleId","end");ib(this,"currentShape",{});ib(this,"initialShape",{});ib(this,"bindableShapeIds",[]);ib(this,"startBindingShapeId");ib(this,"newStartBindingId","");ib(this,"draggedBindingId","");ib(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,previousPoint:g,originPoint:p,currentPoint:G,modKey:X,altKey:la}}=this.app;var pa=this.app.getShapeById(this.initialShape.id),{handles:Ga}=this.initialShape,
Qa=this.handleId,Za="start"===this.handleId?"end":"start";if(!ne.isEqual(g,G)){var eb=ne.sub(G,p);if(b){var mb=Ga[Za].point,Lb=ne.add(Ga[Qa].point,eb),Vb=ne.angle(mb,Lb);mb=ne.rotWith(Lb,mb,zm.snapAngleToSegments(Vb,24)-Vb);eb=ne.add(eb,ne.sub(mb,Lb))}eb=ne.add(Ga[Qa].point,eb);Ga={[Qa]:lf(pe({},Ga[Qa]),{point:ne.toFixed(eb),bindingId:void 0})};var Pb=this.currentShape.getHandlesChange(this.initialShape,Ga);if(Pb){Ga=Hi(pa.props,Pb);var ec={},gc;Qa=Ga.handles[Qa];Za=Ga.handles[Za];if(this.startBindingShapeId){var Tb;
if(eb=this.app.getShapeById(this.startBindingShapeId)){Lb=eb.getCenter();mb=Ga.handles.end;var nc=ne.add(Ga.handles.start.point,Ga.point);ne.isEqual(nc,Lb)&&nc[1]++;Vb=eb.hitTestPoint(G);nc=ne.uni(ne.sub(nc,Lb));const oc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];X||eb.hitTestPoint(ne.add(Ga.point,mb.point))||(Tb=Rc(pa.props,eb,"start",this.newStartBindingId,Lb,Lb,nc,Vb));Tb&&!oc?(ec[this.newStartBindingId]=Tb,Ga.handles.start.bindingId=Tb.id):!Tb&&oc&&(console.log("removing start binding"),
delete ec[this.newStartBindingId],Ga.handles.start.bindingId=void 0)}}if(!X){Tb=ne.add(Za.point,Ga.point);Za=ne.add(Qa.point,Ga.point);Qa=ne.uni(ne.sub(Za,Tb));const oc=ne.add(Ga.point,Ga.handles.start.point),Ec=ne.add(Ga.point,Ga.handles.end.point);eb=this.bindableShapeIds.map(Sc=>this.app.getShapeById(Sc)).sort((Sc,vd)=>vd.nonce-Sc.nonce).filter(Sc=>![oc,Ec].every(vd=>Sc.hitTestPoint(vd)));for(const Sc of eb)if(gc=Rc(pa.props,Sc,this.handleId,this.draggedBindingId,Za,Tb,Qa,la))break}gc?(ec[this.draggedBindingId]=
gc,Ga=Hi(Ga,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(pa=pa.props.handles[this.handleId].bindingId,void 0!==pa&&(delete ec[pa],Ga=Hi(Ga,{handles:{[this.handleId]:{bindingId:void 0}}})));Pb=this.currentShape.getHandlesChange(Ga,Ga.handles);Jd(()=>{var oc;if(Pb){this.currentShape.update(Pb);this.app.currentPage.updateBindings(ec);const Ec=Object.values(null!=(oc=Pb.handles)?oc:{}).map(Sc=>Sc.bindingId).map(Sc=>this.app.currentPage.bindings[Sc]).filter(Boolean).flatMap(Sc=>[Sc.toId,
Sc.fromId].filter(Boolean));this.app.setBindingShapes(Ec)}})}}});ib(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});ib(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};ib(Fv,"id","creating");var by=class extends Fv{constructor(){super(...arguments);
ib(this,"onEnter",()=>{var b;this.app.history.pause();this.newStartBindingId=gl();this.draggedBindingId=gl();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:g}=this.tool;const {originPoint:p}=this.app.inputs;g=new g(lf(pe({},g.defaultProps),{id:gl(),type:g.id,parentId:this.app.currentPage.id,point:p,fill:this.app.settings.color,stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=Fc(g.props);this.currentShape=g;this.app.currentPage.addShapes(g);
this.app.setSelectedShapes([g]);if(this.startBindingShapeId=null==(b=this.bindableShapeIds.map(G=>this.app.getShapeById(G)).filter(G=>Bj.pointInBounds(p,G.bounds))[0])?void 0:b.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};ib(by,"id","creating");var cy=class extends Fi{constructor(){super(...arguments);ib(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});ib(this,"onPinchStart",
(...b)=>{var g,p;this.app.transition("select",{returnTo:this.app.currentState.id});null==(p=(g=this.app._events).onPinchStart)?void 0:p.call(g,...b)});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});ib(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b)}});ib(this,"onPointerLeave",b=>{b.order||
"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};ib(cy,"id","idle");var dy=class extends Fi{constructor(){super(...arguments);ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Fd.dist(b,g)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};ib(dy,"id","pointing");var Zt=class extends Vp{constructor(){super(...arguments);ib(this,"cursor","crosshair")}};ib(Zt,"id","line");ib(Zt,
"states",[cy,dy,by]);ib(Zt,"initial","idle");var ey=class extends Fi{constructor(){super(...arguments);ib(this,"cursor","crosshair");ib(this,"creatingShape");ib(this,"aspectRatio");ib(this,"initialBounds",{});ib(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g}}=this.app,{Shape:p}=this.tool,G=new p({id:gl(),type:p.id,parentId:b.id,point:[...g],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=G;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);
Jd(()=>{this.app.currentPage.addShapes(G);const {bounds:X}=G;G.update({point:ne.sub(g,[X.width/2,X.height/2])});this.app.transition("select");this.app.setSelectedShapes([G]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};ib(ey,"id","creating");var fy=class extends Fi{constructor(){super(...arguments);ib(this,"onPointerDown",(b,g)=>{b.order||this.app.readOnly||this.tool.transition("creating")});ib(this,"onPinchStart",(...b)=>{var g,p;this.app.transition("select",
{returnTo:this.app.currentState.id});null==(p=(g=this.app._events).onPinchStart)?void 0:p.call(g,...b)});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};ib(fy,"id","idle");var $t=class extends Vp{constructor(){super(...arguments);ib(this,"cursor","crosshair")}};ib($t,"id","box");ib($t,"states",[fy,ey]);ib($t,"initial","idle");var gD=uf(Dr()),fD=class extends gD.default{constructor(){super(...arguments);ib(this,"toBBox",b=>b.rotatedBounds)}},Sx=class extends Fi{constructor(){super(...arguments);
ib(this,"initialSelectedIds",[]);ib(this,"initialSelectedShapes",[]);ib(this,"tree",new fD);ib(this,"onEnter",()=>{const {selectedShapes:b,currentPage:g,selectedIds:p}=this.app;this.initialSelectedIds=Array.from(p.values());this.initialSelectedShapes=Array.from(b.values());this.tree.load(g.shapes)});ib(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});ib(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,ctrlKey:g,originPoint:p,currentPoint:G}}=this.app,
X=wf.getBoundsFromPoints([G,p],0);this.app.setBrush(X);const la=[...(new Set(this.tree.search(X).filter(pa=>g?wf.boundsContain(X,pa.rotatedBounds):pa.hitTestBounds(X)).filter(pa=>"group"!==pa.type).map(pa=>{var Ga;return null!=(Ga=this.app.getParentGroup(pa))?Ga:pa})))];b?la.every(pa=>this.initialSelectedShapes.includes(pa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(pa=>!la.includes(pa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...la]))]):this.app.setSelectedShapes(la);
this.app.viewport.panToPointWhenOutOfBounds(G)});ib(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});ib(this,"handleModifierKey",(b,g)=>{switch(g.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};ib(Sx,"id","brushing");var Tx=class extends Fi{constructor(){super(...arguments);ib(this,"onEnter",b=>{var g;const {selectedIds:p,selectedShapes:G,inputs:{shiftKey:X}}=this.app;if("shape"===b.type&&
!G.has(b.shape)){const la=null!=(g=this.app.getParentGroup(b.shape))?g:b.shape;X?this.app.setSelectedShapes([...Array.from(p.values()),la.id]):this.app.setSelectedShapes([la])}});ib(this,"onPointerDown",()=>{this.tool.transition("idle")})}};ib(Tx,"id","contextMenu");var Ux=class extends Fi{constructor(){super(...arguments);ib(this,"onEnter",b=>{"pinching"===b.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});ib(this,"onExit",()=>{});ib(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);
break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b);break;case "canvas":this.app.setHoveredShape(void 0)}});ib(this,"onPointerDown",(b,g)=>{const {selectedShapes:p,inputs:{ctrlKey:G}}=this.app;if(2===g.button)this.tool.transition("contextMenu",b);else if(G)this.tool.transition("pointingCanvas");else switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");
break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",b)}break;case "shape":if(p.has(b.shape))this.tool.transition("pointingSelectedShape",b);else{const {selectionBounds:X,inputs:la}=this.app;X&&Bj.pointInBounds(la.currentPoint,X)?this.tool.transition("pointingShapeBehindBounds",b):this.tool.transition("pointingShape",b)}break;case "handle":this.tool.transition("pointingHandle",b);break;case "canvas":this.tool.transition("pointingCanvas");
break;case "minimap":this.tool.transition("pointingMinimap",pe(pe({},g),b))}});ib(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ib(this,"onDoubleClick",b=>{if(!b.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var g=this.app.selectedShapesArray[0];if(g.canEdit&&!g.props.isLocked)switch(b.type){case "shape":this.tool.transition("editingShape",
b);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:g})}}});ib(this,"onKeyDown",(b,g)=>{({selectedShapesArray:b}=this.app);switch(g.key){case "Enter":1===b.length&&b[0].canEdit&&!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:b[0],order:0});break;case "Escape":b.length&&this.app.setSelectedShapes([])}})}};ib(Ux,"id","idle");var Vx=class extends Fi{constructor(){super(...arguments);ib(this,"onEnter",
b=>{var g;const {selectedIds:p,inputs:{shiftKey:G}}=this.app,X=null!=(g=this.app.getParentGroup(b.shape))?g:b.shape;G?this.app.setSelectedShapes([...Array.from(p.values()),X.id]):this.app.setSelectedShapes([X])});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Fd.dist(b,g)&&!this.app.readOnly&&this.tool.transition("translating")});ib(this,"onPointerUp",()=>{this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};
ib(Vx,"id","pointingShape");var Wx=class extends Fi{constructor(){super(...arguments);ib(this,"cursor","move");ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Fd.dist(b,g)&&!this.app.readOnly&&this.tool.transition("translating")});ib(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ib(Wx,"id","pointingBoundsBackground");var Xx=class extends Fi{constructor(){super(...arguments);
ib(this,"onEnter",()=>{var b;const {shiftKey:g}=this.app.inputs;g||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(b=window.getSelection())?void 0:b.removeAllRanges())});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Fd.dist(b,g)&&this.tool.transition("brushing")});ib(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,
event:g})});ib(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};ib(Xx,"id","pointingCanvas");var Yx=class extends Fi{constructor(){super(...arguments);ib(this,"cursor","move");ib(this,"isCloning",!1);ib(this,"didClone",!1);ib(this,"initialPoints",{});ib(this,"initialShapePoints",{});ib(this,"initialClonePoints",{});ib(this,"clones",[]);ib(this,"onEnter",()=>{var b;this.app.history.pause();const {allSelectedShapesArray:g,inputs:p}=this.app;this.initialPoints=
this.initialShapePoints=Object.fromEntries(g.map(({id:G,props:{point:X}})=>[G,X.slice()]));document.querySelectorAll("input,textarea").forEach(G=>G.blur());null==(b=document.getSelection())?void 0:b.empty();p.altKey?this.startCloning():this.moveSelectedShapesToPointer()});ib(this,"onExit",()=>{this.app.history.resume();this.app.persist();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});ib(this,"onPointerMove",()=>{const {inputs:{currentPoint:b}}=
this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenOutOfBounds(b)});ib(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ib(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(p=>{p.update({point:this.initialPoints[p.id]})}),this.tool.transition("idle")}});
ib(this,"onKeyUp",(b,g)=>{switch(g.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:p,allSelectedShapes:G}=this.app;p.removeShapes(...G);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:b,originPoint:g,currentPoint:p}}=this.app,{initialPoints:G}=this,X=Fd.sub(p,g);b&&(Math.abs(X[0])<Math.abs(X[1])?
X[0]=0:X[1]=0);Jd(()=>{this.app.allSelectedShapesArray.forEach(la=>{la.props.isLocked||la.update({point:Fd.add(G[la.id],X)})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(b=>{const g=this.app.getShapeClass(b.type);if(!g)throw Error("Could not find that shape class.");return new g(lf(pe({},b.serialized),{id:gl(),type:b.type,point:this.initialPoints[b.id],rotation:b.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:b,
props:{point:g}})=>[b,g.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(b=>{b.update({point:this.initialPoints[b.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};ib(Yx,"id","translating");var Rx=class extends Fi{constructor(){super(...arguments);ib(this,"pointedSelectedShape");ib(this,"onEnter",b=>{this.pointedSelectedShape=
b.shape});ib(this,"onExit",()=>{this.pointedSelectedShape=void 0});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Fd.dist(b,g)&&!this.app.readOnly&&this.tool.transition("translating")});ib(this,"onPointerUp",()=>{const {shiftKey:b,currentPoint:g}=this.app.inputs;var {selectedShapesArray:p}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(b)({selectedIds:p}=this.app),p=Array.from(p.values()),p.splice(p.indexOf(this.pointedSelectedShape.id),
1),this.app.setSelectedShapes(p);else{if(1===p.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof yn&&Bj.pointInBounds(g,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,
event:g})})}};ib(Rx,"id","pointingSelectedShape");var nz=class extends Fi{constructor(){super(...arguments);ib(this,"info",{});ib(this,"onEnter",b=>{this.info=b;this.updateCursor()});ib(this,"onExit",()=>{this.app.cursors.reset()});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Fd.dist(b,g)&&this.tool.transition("resizing",this.info)});ib(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",
{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Ar[this.info.handle],this.app.selectionBounds.rotation)}};ib(nz,"id","pointingResizeHandle");var Ey=class extends Fi{constructor(){super(...arguments);ib(this,"isSingle",!1);ib(this,"handle","bottom_right_corner");ib(this,"snapshots",{});ib(this,"initialCommonBounds",{});ib(this,"selectionRotation",0);ib(this,"resizeType","corner");ib(this,"onEnter",b=>{var g,p;const {history:G,selectedShapesArray:X,selectionBounds:la}=this.app;if(!la)throw Error("Expected a selected bounds.");
this.handle=b.handle;this.resizeType="left_edge"===b.handle||"right_edge"===b.handle?"horizontal-edge":"top_edge"===b.handle||"bottom_edge"===b.handle?"vertical-edge":"corner";this.app.cursors.setCursor(Ey.CURSORS[b.handle],null==(g=this.app.selectionBounds)?void 0:g.rotation);G.pause();const pa=wf.getBoundsFromPoints(X.map(Ga=>wf.getBoundsCenter(Ga.bounds)));this.selectionRotation=(this.isSingle=1===X.length)?null!=(p=X[0].props.rotation)?p:0:0;this.initialCommonBounds=pe({},la);this.snapshots=Object.fromEntries(X.map(Ga=>
{const Qa=pe({},Ga.bounds),[Za,eb]=wf.getBoundsCenter(Qa);return[Ga.id,{props:Ga.serialized,bounds:Qa,transformOrigin:[(Za-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(eb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(Za-pa.minX)/pa.width,(eb-pa.minY)/pa.height],isAspectRatioLocked:Ga.props.isAspectRatioLocked||!(Ga.canChangeAspectRatio&&!Ga.props.rotation)}]}));X.forEach(Ga=>{var Qa;null==(Qa=Ga.onResizeStart)?void 0:Qa.call(Ga,{isSingle:this.isSingle})})});
ib(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});ib(this,"onPointerMove",()=>{const {inputs:{altKey:b,shiftKey:g,ctrlKey:p,originPoint:G,currentPoint:X}}=this.app,{handle:la,snapshots:pa,initialCommonBounds:Ga}=this;let Qa=Fd.sub(X,G);b&&(Qa=Fd.mul(Qa,2));const Za=this.app.selectedShapes.values().next().value;let eb=wf.getTransformedBoundingBox(Ga,la,Qa,this.selectionRotation,g||this.isSingle&&(p?!("clipping"in
Za.props):!Za.canChangeAspectRatio||Za.props.isAspectRatioLocked));b&&(eb=pe(pe({},eb),wf.centerBounds(eb,wf.getBoundsCenter(Ga))));const {scaleX:mb,scaleY:Lb}=eb;this.app.selectedShapes.forEach(Vb=>{var Pb,ec;const {props:gc,bounds:Tb,transformOrigin:nc}=pa[Vb.id];let oc=wf.getRelativeTransformedBoundingBox(eb,Ga,Tb,0>mb,0>Lb);if(Vb.canResize.some(vd=>vd)||Vb.props.isSizeLocked||!this.isSingle){var Ec=[mb,Lb],Sc=null!=(Pb=gc.rotation)?Pb:0;Pb=wf.getBoundsCenter(oc);Vb.canFlip||(Ec=Fd.abs(Ec));Vb.canScale||
(Ec=null!=(ec=gc.scale)?ec:[1,1]);if(Sc&&0>mb&&0<=Lb||0>Lb&&0<=mb)Sc*=-1;Vb.onResize(gc,{center:Pb,rotation:Sc,scale:Ec,bounds:oc,type:la,clip:p,transformOrigin:nc})}});this.updateCursor(mb,Lb);this.app.viewport.panToPointWhenOutOfBounds(X)});ib(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(p=>{p.update(pe({},this.snapshots[p.id].props))}),this.tool.transition("idle")}})}updateCursor(b,
g){var p,G,X,la;const pa=0>b&&0<=g;b=0>g&&0<=b;switch(this.handle){case "top_left_corner":case "bottom_right_corner":pa||b?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(p=this.app.selectionBounds)?void 0:p.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(G=this.app.selectionBounds)?void 0:G.rotation);break;case "top_right_corner":case "bottom_left_corner":pa||b?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",
null==(X=this.app.selectionBounds)?void 0:X.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(la=this.app.selectionBounds)?void 0:la.rotation)}}},Nv=Ey;ib(Nv,"id","resizing");ib(Nv,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var Fy=class extends Fi{constructor(){super(...arguments);
ib(this,"cursor","rotate");ib(this,"handle","");ib(this,"onEnter",b=>{this.app.history.pause();this.handle=b.handle;this.updateCursor()});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Fd.dist(b,g)&&this.tool.transition("rotating",{handle:this.handle})});ib(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Ar[this.handle],
this.app.selectionRotation)}};ib(Fy,"id","pointingRotateHandle");var Gy=class extends Fi{constructor(){super(...arguments);ib(this,"info",{});ib(this,"onEnter",b=>{this.info=b});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Fd.dist(b,g)&&!this.app.readOnly&&this.tool.transition("translating")});ib(this,"onPointerUp",()=>{const {selectedIds:b,inputs:{shiftKey:g}}=this.app;g?this.app.setSelectedShapes([...Array.from(b.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ib(Gy,"id","pointingShapeBehindBounds");var Ov=class extends Fi{constructor(){super(...arguments);ib(this,"cursor","rotate");ib(this,"snapshot",{});ib(this,"initialCommonCenter",[0,0]);ib(this,"initialCommonBounds",{});ib(this,"initialAngle",0);ib(this,"initialSelectionRotation",0);ib(this,"handle","");ib(this,"onEnter",b=>{const {history:g,selectedShapesArray:p,selectionBounds:G}=this.app;
if(!G)throw Error("Expected selected bounds.");g.pause();this.handle=b.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=pe({},G);this.initialCommonCenter=wf.getBoundsCenter(G);this.initialAngle=Fd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(p.map(X=>[X.id,{point:[...X.props.point],center:[...X.center],rotation:X.props.rotation,handles:"handles"in X?fr(X.handles):void 0}]));this.updateCursor()});ib(this,"onExit",
()=>{this.app.history.resume();this.snapshot={}});ib(this,"onPointerMove",()=>{const {selectedShapes:b,inputs:{shiftKey:g,currentPoint:p}}=this.app,{snapshot:G,initialCommonCenter:X,initialAngle:la,initialSelectionRotation:pa}=this;let Ga=Fd.angle(X,p)-la;g&&(Ga=zm.snapAngleToSegments(Ga,24));b.forEach(Za=>{var eb=G[Za.id];let mb=0;if(g){var {rotation:Lb=0}=eb;mb=zm.snapAngleToSegments(Lb,24)-Lb}const Vb=Fd.sub(eb.center,eb.point);Lb=Fd.rotWith(eb.center,X,Ga);if("handles"in Za){eb=eb.handles;const Pb=
eb.map(gc=>Fd.rotWith(gc.point,Vb,Ga)),ec=wf.getCommonTopLeft(Pb);Za.update({point:Fd.add(ec,Fd.sub(Lb,Vb)),handles:eb.map((gc,Tb)=>lf(pe({},gc),{point:Fd.sub(Pb[Tb],ec)}))})}else Za.update({point:Fd.sub(Lb,Vb),rotation:zm.clampRadians((eb.rotation||0)+Ga+mb)})});const Qa=zm.clampRadians(pa+Ga);this.app.setSelectionRotation(g?zm.snapAngleToSegments(Qa,24):Qa);this.updateCursor()});ib(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ib(this,"onKeyDown",
(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(p=>{p.update(this.snapshot[p.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(Ar[this.handle],this.app.selectionRotation)}};ib(Ov,"id","rotating");var Hy=class extends Fi{constructor(){super(...arguments);ib(this,"onPinch",(b,g)=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});ib(this,"onPinchEnd",()=>{this.tool.transition("idle")});ib(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
ib(Hy,"id","pinching");var Iy=class extends Fv{constructor(){super(...arguments);ib(this,"cursor","grabbing");ib(this,"onEnter",b=>{this.app.history.pause();this.newStartBindingId=gl();this.draggedBindingId=gl();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=b.id;this.currentShape=b.shape;this.initialShape=Fc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};ib(Iy,"id","translatingHandle");var Jy=class extends Fi{constructor(){super(...arguments);
ib(this,"cursor","grabbing");ib(this,"info",{});ib(this,"onEnter",b=>{this.info=b});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Fd.dist(b,g)&&this.tool.transition("translatingHandle",this.info)});ib(this,"onPointerUp",()=>{this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ib(Jy,"id","pointingHandle");var Ky=class extends Fi{constructor(){super(...arguments);ib(this,"handle");ib(this,"onEnter",
b=>{var g;this.app.cursors.setCursor(Ar[b.handle],null!=(g=this.app.selectionBounds.rotation)?g:0);this.handle=b.handle});ib(this,"onExit",()=>{this.app.cursors.reset()});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ib(this,"onPointerDown",b=>{switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
b);break;default:this.tool.transition("pointingResizeHandle",b)}}});ib(this,"onPointerLeave",()=>{this.tool.transition("idle")});ib(this,"onDoubleClick",b=>{var g;if(!b.order&&1===this.app.selectedShapes.size){var p=this.app.selectedShapes.values().next().value;if(!p.canEdit||this.app.readOnly||p.props.isLocked)p.onResetBounds({asset:p.props.assetId?this.app.assets[p.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(b.type){case "shape":this.tool.transition("editingShape",
b);break;case "selection":null==(g=p.onResetBounds)?void 0:g.call(p,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:p})}}})}};ib(Ky,"id","hoveringSelectionHandle");var Ly=class extends Fi{constructor(){super(...arguments);ib(this,"editingShape",{});ib(this,"onEnter",b=>{this.editingShape=b.shape;this.app.setEditingShape(b.shape)});ib(this,"onExit",()=>{var b;if(this.editingShape&&"text"in this.editingShape.props){const g=
this.editingShape.props.text.trim();""===g&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:g}))}this.app.persist();this.app.setEditingShape();null==(b=document.querySelector(".tl-canvas"))?void 0:b.focus()});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ib(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.editingShape)break;this.tool.transition("idle",
b);break;case "canvas":b.order||this.tool.transition("idle",b)}});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":Jd(()=>{g.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};ib(Ly,"id","editingShape");var My=class extends Fi{constructor(){super(...arguments);ib(this,"minimapZoom",1);ib(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});ib(this,"getCameraPoint",b=>{const g=document.querySelector(".tl-preview-minimap svg");
var p=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(g&&p){const G=g.getBoundingClientRect();this.minimapRect.height=G.height;this.minimapRect.width=G.width;this.minimapRect.minX=G.left;this.minimapRect.minY=G.top;this.minimapRect.maxX=G.right;this.minimapRect.maxY=G.bottom;this.minimapZoom=+g.dataset.commonBoundWidth/this.minimapRect.width;b=Fd.sub(b,[this.minimapRect.minX,this.minimapRect.minY]);p=p.getBoundingClientRect();p=Fd.mul(Fd.sub(b,[p.left+p.width/2,p.top+p.height/
2]),this.minimapZoom);return Fd.sub(this.app.viewport.camera.point,p)}});ib(this,"onEnter",b=>{(b=this.getCameraPoint([b.clientX,b.clientY]))?this.app.viewport.update({point:b}):this.tool.transition("idle")});ib(this,"onPointerMove",(b,g)=>{"clientX"in g&&(b=this.getCameraPoint([g.clientX,g.clientY]))&&this.app.viewport.update({point:b})});ib(this,"onPointerUp",()=>{this.tool.transition("idle")})}};ib(My,"id","pointingMinimap");var Wr=class extends Vp{constructor(){super(...arguments);ib(this,"returnTo",
"");ib(this,"onEnter",b=>{this.returnTo=null==b?void 0:b.returnTo})}};ib(Wr,"id","select");ib(Wr,"initial","idle");ib(Wr,"shortcut",["1","s"]);ib(Wr,"states",[Ux,Sx,Tx,Xx,Vx,Gy,Rx,Wx,Ky,nz,Fy,My,Jy,Iy,Yx,Nv,Ov,Ov,Hy,Ly]);var Cy=class extends Fi{constructor(){super(...arguments);ib(this,"cursor","grabbing");ib(this,"originalScreenPoint",[]);ib(this,"originalCameraPoint",[]);ib(this,"prevState","idle");ib(this,"onEnter",b=>{this.prevState=null==b?void 0:b.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;
this.originalCameraPoint=this.app.viewport.camera.point});ib(this,"onPointerMove",(b,g)=>{b=ne.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:ne.sub(this.originalCameraPoint,ne.div(b,this.app.viewport.camera.zoom))})});ib(this,"onPointerUp",()=>{var b;this.tool.transition(null!=(b=this.prevState)?b:"idle")})}};ib(Cy,"id","panning");var Dy=class extends Fi{constructor(){super(...arguments);ib(this,"onEnter",b=>{this.parent.prevTool&&b.exit&&(this.app.setCurrentState(this.parent.prevTool),
setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});ib(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning")})}};ib(Dy,"id","idle");var oz=class extends Fi{constructor(){super(...arguments);ib(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning",{prevState:"idleHold"})});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ib(oz,"id","idleHold");var Oy=class extends Fi{constructor(){super(...arguments);
ib(this,"origin",[0,0]);ib(this,"prevDelta",[0,0]);ib(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});ib(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});ib(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};ib(Oy,"id","pinching");var Xr=class extends Vp{constructor(){super(...arguments);ib(this,"cursor","grab");ib(this,"prevTool",null);ib(this,"onEnter",b=>{this.prevTool=null==b?void 0:b.prevTool});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});
ib(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};ib(Xr,"id","move");ib(Xr,"shortcut",["2","m"]);ib(Xr,"states",[Dy,oz,Cy,Oy]);ib(Xr,"initial","idle");var Dm=class{constructor(b,g={}){ib(this,"lastShapesNounces",null);ib(this,"app");ib(this,"id");ib(this,"name");ib(this,"shapes",[]);ib(this,"bindings",{});ib(this,"nonce",0);ib(this,"bringForward",Ga=>{const Qa=this.parseShapesArg(Ga);Qa.sort((Za,eb)=>this.shapes.indexOf(eb)-this.shapes.indexOf(Za)).map(Za=>this.shapes.indexOf(Za)).forEach(Za=>
{if(Za!==this.shapes.length-1&&!Qa.includes(this.shapes[Za+1])){var eb=this.shapes[Za];this.shapes[Za]=this.shapes[Za+1];this.shapes[Za+1]=eb}});this.app.persist();return this});ib(this,"sendBackward",Ga=>{const Qa=this.parseShapesArg(Ga);Qa.sort((Za,eb)=>this.shapes.indexOf(Za)-this.shapes.indexOf(eb)).map(Za=>this.shapes.indexOf(Za)).forEach(Za=>{if(0!==Za&&!Qa.includes(this.shapes[Za-1])){var eb=this.shapes[Za];this.shapes[Za]=this.shapes[Za-1];this.shapes[Za-1]=eb}});this.app.persist();return this});
ib(this,"bringToFront",Ga=>{const Qa=this.parseShapesArg(Ga);this.shapes=this.shapes.filter(Za=>!Qa.includes(Za)).concat(Qa);this.app.persist();return this});ib(this,"sendToBack",Ga=>{const Qa=this.parseShapesArg(Ga);this.shapes=Qa.concat(this.shapes.filter(Za=>!Qa.includes(Za)));this.app.persist();return this});ib(this,"flip",(Ga,Qa)=>{Ga=this.parseShapesArg(Ga);const Za=wf.getCommonBounds(Ga.map(eb=>eb.bounds));Ga.forEach(eb=>{var mb;const Lb=wf.getRelativeTransformedBoundingBox(Za,Za,eb.bounds,
"horizontal"===Qa,"vertical"===Qa);if(eb.serialized)eb.onResize(eb.serialized,{bounds:Lb,center:wf.getBoundsCenter(Lb),rotation:null!=(mb=eb.props.rotation)?mb:-0,type:"top_left_corner",scale:eb.canFlip&&eb.props.scale?"horizontal"===Qa?[-eb.props.scale[0],1]:[1,-eb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});ib(this,"getShapeById",Ga=>this.shapes.find(Qa=>Qa.id===Ga));ib(this,"cleanup",Ga=>{Ga=mc(this.bindings,Ga);const Qa=new Set;let Za=!1,eb=!1;const mb=
fr(this.bindings);Ga.forEach(Lb=>{var Vb;if(this.bindings[Lb.id]){var Pb=this.getShapeById(Lb.toId),ec=this.getShapeById(Lb.fromId);Pb&&ec?Qa.has(ec.id)||(Lb=this.updateArrowBindings(ec),Qa.add(ec.id),Lb&&(ec=pe(pe({},ec.props),Lb),Za=!0,null==(Vb=this.getShapeById(ec.id))?void 0:Vb.update(ec,!1,!0))):(delete mb[Lb.id],eb=!0)}});Object.keys(mb).forEach(Lb=>{const Vb=this.bindings[Lb];0===this.shapes.filter(Pb=>Pb.id===Vb.fromId||Pb.id===Vb.toId).length&&(delete mb[Lb],eb=!0)});eb&&this.update({bindings:mb});
(Za||eb)&&this.app.persist(!0)});ib(this,"updateArrowBindings",Ga=>{var Qa,Za,eb,mb={start:fr(Ga.props.handles.start),end:fr(Ga.props.handles.end)},Lb={isBound:!1,handle:Ga.props.handles.start,point:ne.add(Ga.props.handles.start.point,Ga.props.point)},Vb={isBound:!1,handle:Ga.props.handles.end,point:ne.add(Ga.props.handles.end.point,Ga.props.point)};if(Ga.props.handles.start.bindingId){var Pb=void 0!==(null==(Qa=Ga.props.decorations)?void 0:Qa.start);Qa=Ga.props.handles.start;var ec=this.bindings[Ga.props.handles.start.bindingId],
gc=this.getShapeById(null==ec?void 0:ec.toId);if(gc){Lb=gc.getBounds();var Tb=gc.getExpandedBounds(),nc=wf.expandBounds(Lb,Pb?ec.distance:1);const {minX:oc,minY:Ec,width:Sc,height:vd}=Tb,Wd=ne.add([oc,Ec],ne.mulV([Sc,vd],ne.rotWith(ec.point,[.5,.5],gc.props.rotation||0)));Lb={isBound:!0,hasDecoration:Pb,binding:ec,handle:Qa,point:Wd,target:gc,bounds:Lb,expandedBounds:Tb,intersectBounds:nc,center:gc.getCenter()}}}if(Ga.props.handles.end.bindingId&&(Pb=void 0!==(null==(Za=Ga.props.decorations)?void 0:
Za.end),Za=Ga.props.handles.end,Qa=this.bindings[Ga.props.handles.end.bindingId],ec=this.getShapeById(null==Qa?void 0:Qa.toId))){Vb=ec.getBounds();gc=ec.getExpandedBounds();Tb=Pb?wf.expandBounds(Vb,Qa.distance):Vb;const {minX:oc,minY:Ec,width:Sc,height:vd}=gc;nc=ne.add([oc,Ec],ne.mulV([Sc,vd],ne.rotWith(Qa.point,[.5,.5],ec.props.rotation||0)));Vb={isBound:!0,hasDecoration:Pb,binding:Qa,handle:Za,point:nc,target:ec,bounds:Vb,expandedBounds:gc,intersectBounds:Tb,center:ec.getCenter()}}for(const oc of["end",
"start"]){Za="start"===oc?Lb:Vb;const Ec="start"===oc?Vb:Lb;if(Za.isBound)if(Za.binding.distance){if(Pb=ne.uni(ne.sub(Za.point,Ec.point)),Qa=C(Ec.point,Pb,Za.intersectBounds,Za.target.props.rotation).filter(Sc=>Sc.didIntersect).map(Sc=>Sc.points[0]).sort((Sc,vd)=>ne.dist(Sc,Ec.point)-ne.dist(vd,Ec.point)),Qa[0])if(ec=void 0,Ec.isBound&&(ec=C(Ec.point,Pb,Ec.intersectBounds,Ec.target.props.rotation).filter(Sc=>Sc.didIntersect).map(Sc=>Sc.points[0]).sort((Sc,vd)=>ne.dist(Sc,Ec.point)-ne.dist(vd,Ec.point))[0]),
Ec.isBound&&(2>Qa.length||ec&&Qa[0]&&10>Math.ceil(ne.dist(Qa[0],ec))||wf.boundsContain(Za.expandedBounds,Ec.expandedBounds)||wf.boundsCollide(Za.expandedBounds,Ec.expandedBounds)))Pb=ne.uni(ne.sub(Ec.point,Za.point)),Qa=C(Za.point,Pb,Za.bounds,Za.target.props.rotation).filter(Sc=>Sc.didIntersect).map(Sc=>Sc.points[0]),Qa[0]&&(mb[oc].point=ne.toFixed(ne.sub(Qa[0],Ga.props.point)),mb["start"===oc?"end":"start"].point=ne.toFixed(ne.add(ne.sub(Qa[0],Ga.props.point),ne.mul(Pb,Math.min(ne.dist(Qa[0],Ec.point),
10*(wf.boundsContain(Ec.bounds,Za.intersectBounds)?-1:1))))));else{if(!Ec.isBound&&(Qa[0]&&10>ne.dist(Qa[0],Ec.point)||Bj.pointInBounds(Ec.point,Za.intersectBounds)))return mb=ne.uni(ne.sub(Za.center,Ec.point)),null==(eb=Ga.getHandlesChange)?void 0:eb.call(Ga,Ga.props,{[oc]:lf(pe({},Ga.props.handles[oc]),{point:ne.toFixed(ne.add(ne.sub(Ec.point,Ga.props.point),ne.mul(mb,10)))})});Qa[0]&&(mb[oc].point=ne.toFixed(ne.sub(Qa[0],Ga.props.point)))}}else mb[oc].point=ne.sub(Za.point,Ga.props.point)}return Ga.getHandlesChange(Ga.props,
mb)});const {id:p,name:G,shapes:X=[],bindings:la={},nonce:pa}=g;this.id=p;this.name=G;this.bindings=Object.assign({},la);this.app=b;this.nonce=pa||0;this.addShapes(...X);Ag(this);Md(()=>{const Ga=0<this.shapes.length?Object.fromEntries(this.shapes.map(Qa=>[Qa.id,Qa.nonce])):null;if(this.lastShapesNounces&&Ga){const Qa=this.lastShapesNounces,Za=[...(new Set([...Object.keys(Ga),...Object.keys(Qa)]))].filter(eb=>Qa[eb]!==Ga[eb]);requestAnimationFrame(()=>{this.cleanup(Za)})}Ga&&(this.lastShapesNounces=
Ga)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(b=>b.serialized).filter(b=>!!b).map(b=>Fc(b)),bindings:fr(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(b=>[b.id,b]))}update(b){Object.assign(this,b);return this}updateBindings(b){Object.assign(this.bindings,b);return this}updateShapesIndex(b){this.shapes.sort((g,p)=>b.indexOf(g.id)-b.indexOf(p.id));return this}addShapes(...b){if(0!==b.length)return b="getBounds"in b[0]?b:b.map(g=>
new (this.app.getShapeClass(g.type))(g)),this.shapes.push(...b),b}parseShapesArg(b){return"string"===typeof b[0]?this.shapes.filter(g=>b.includes(g.id)):b}removeShapes(...b){const g=this.parseShapesArg(b);this.shapes=this.shapes.filter(p=>!g.includes(p));return g}getBindableShapes(){return this.shapes.filter(b=>b.canBind).sort((b,g)=>g.nonce-b.nonce).map(b=>b.id)}};de([ug],Dm.prototype,"id",2);de([ug],Dm.prototype,"name",2);de([ug],Dm.prototype,"shapes",2);de([ug],Dm.prototype,"bindings",2);de([Pg],
Dm.prototype,"serialized",1);de([Pg],Dm.prototype,"shapesById",1);de([ug],Dm.prototype,"nonce",2);de([pg],Dm.prototype,"update",1);de([pg],Dm.prototype,"updateBindings",1);de([pg],Dm.prototype,"updateShapesIndex",1);de([pg],Dm.prototype,"addShapes",1);de([pg],Dm.prototype,"removeShapes",1);de([pg],Dm.prototype,"bringForward",2);de([pg],Dm.prototype,"sendBackward",2);de([pg],Dm.prototype,"bringToFront",2);de([pg],Dm.prototype,"sendToBack",2);de([pg],Dm.prototype,"cleanup",2);var Zk=class{constructor(){ib(this,
"shiftKey",!1);ib(this,"ctrlKey",!1);ib(this,"modKey",!1);ib(this,"altKey",!1);ib(this,"spaceKey",!1);ib(this,"isPinching",!1);ib(this,"currentScreenPoint",[0,0]);ib(this,"currentPoint",[0,0]);ib(this,"previousScreenPoint",[0,0]);ib(this,"previousPoint",[0,0]);ib(this,"originScreenPoint",[0,0]);ib(this,"originPoint",[0,0]);ib(this,"pointerIds",new Set);ib(this,"state","idle");ib(this,"containerOffset",[0,0]);ib(this,"onPointerDown",(b,g)=>{this.pointerIds.add(g.pointerId);this.updateModifiers(g);
this.originScreenPoint=this.currentScreenPoint;this.originPoint=b;this.state="pointing"});ib(this,"onPointerMove",(b,g)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(g),this.previousPoint=this.currentPoint,this.currentPoint=b)});ib(this,"onPointerUp",(b,g)=>{this.pointerIds.clear();this.updateModifiers(g);this.state="idle"});ib(this,"onKeyDown",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!0}});ib(this,"onKeyUp",b=>{this.updateModifiers(b);
switch(b.key){case " ":this.spaceKey=!1}});ib(this,"onPinchStart",(b,g)=>{this.updateModifiers(g);this.state="pinching"});ib(this,"onPinch",(b,g)=>{"pinching"===this.state&&this.updateModifiers(g)});ib(this,"onPinchEnd",(b,g)=>{"pinching"===this.state&&(this.updateModifiers(g),this.state="idle")});Ag(this)}updateContainerOffset(b){Object.assign(this.containerOffset,b)}updateModifiers(b){b.isPrimary&&("clientX"in b&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=ne.sub([b.clientX,
b.clientY],this.containerOffset)),"shiftKey"in b&&(this.shiftKey=b.shiftKey,this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.modKey=Lk()?b.metaKey:b.ctrlKey))}};de([ug],Zk.prototype,"shiftKey",2);de([ug],Zk.prototype,"ctrlKey",2);de([ug],Zk.prototype,"modKey",2);de([ug],Zk.prototype,"altKey",2);de([ug],Zk.prototype,"spaceKey",2);de([ug],Zk.prototype,"isPinching",2);de([ug],Zk.prototype,"currentScreenPoint",2);de([ug],Zk.prototype,"currentPoint",2);de([ug],Zk.prototype,"previousScreenPoint",2);de([ug],
Zk.prototype,"previousPoint",2);de([ug],Zk.prototype,"originScreenPoint",2);de([ug],Zk.prototype,"originPoint",2);de([ug],Zk.prototype,"state",2);de([ug],Zk.prototype,"containerOffset",2);de([pg],Zk.prototype,"updateContainerOffset",1);de([pg],Zk.prototype,"updateModifiers",1);de([pg],Zk.prototype,"onPointerDown",2);de([pg],Zk.prototype,"onPointerMove",2);de([pg],Zk.prototype,"onPointerUp",2);de([pg],Zk.prototype,"onKeyDown",2);de([pg],Zk.prototype,"onKeyUp",2);de([pg],Zk.prototype,"onPinchStart",
2);de([pg],Zk.prototype,"onPinch",2);de([pg],Zk.prototype,"onPinchEnd",2);var vE=(b,g=100)=>-(Math.cos(Math.PI*Fd.clamp(b/g,0,1))-1)/2,it=class{constructor(){ib(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});ib(this,"camera",{point:[0,0],zoom:1});ib(this,"updateBounds",b=>{this.bounds=b;return this});ib(this,"panCamera",b=>this.update({point:Fd.sub(this.camera.point,Fd.div(b,this.camera.zoom))}));ib(this,"panToPointWhenOutOfBounds",b=>{const g=Fd.sub([this.currentView.maxX,
this.currentView.maxY],b);b=Fd.sub([this.currentView.minX,this.currentView.minY],b);this.panCamera(Fd.mul([0>g[0]?g[0]:0<b[0]?b[0]:0,0>g[1]?g[1]:0<b[1]?b[1]:0],-it.panMultiplier))});ib(this,"update",({point:b,zoom:g})=>{void 0===b||isNaN(b[0])||isNaN(b[1])||(this.camera.point=b);void 0===g||isNaN(g)||(this.camera.zoom=Math.min(4,Math.max(.1,g)));return this});ib(this,"getPagePoint",b=>{const {camera:g,bounds:p}=this;return Fd.sub(Fd.div(Fd.sub(b,[p.minX,p.minY]),g.zoom),g.point)});ib(this,"getScreenPoint",
b=>{const {camera:g}=this;return Fd.mul(Fd.add(b,g.point),g.zoom)});ib(this,"onZoom",(b,g,p=!1)=>this.pinchZoom(b,[0,0],g,p));ib(this,"pinchZoom",(b,g,p,G=!1)=>{var {camera:X}=this;g=Fd.sub(X.point,Fd.div(g,X.zoom));p=Fd.clamp(p,it.minZoom,it.maxZoom);X=Fd.div(b,X.zoom);b=Fd.div(b,p);b=Fd.toFixed(Fd.add(g,Fd.sub(b,X)));G?this.animateCamera({point:b,zoom:p}):this.update({point:b,zoom:p});return this});ib(this,"setZoom",(b,g=!1)=>{const {bounds:p}=this;this.onZoom([p.width/2,p.height/2],b,g)});ib(this,
"zoomIn",()=>{const {camera:b}=this;this.setZoom(b.zoom/.8,!0)});ib(this,"zoomOut",()=>{const {camera:b}=this;this.setZoom(.8*b.zoom,!0)});ib(this,"resetZoom",()=>{this.setZoom(1,!0);return this});ib(this,"animateCamera",({point:b,zoom:g})=>this.animateToViewport({minX:-b[0],minY:-b[1],maxX:this.bounds.width/g-b[0],maxY:this.bounds.height/g-b[1],width:this.bounds.width/g,height:this.bounds.height/g}));ib(this,"animateToViewport",b=>{const g=performance.now(),p=pe({},this.currentView),G=()=>{var X=
performance.now()-g;X=vE(X);var la=p.minX+(b.minX-p.minX)*X;this.update({point:[-la,-(p.minY+(b.minY-p.minY)*X)],zoom:this.bounds.width/(p.maxX+(b.maxX-p.maxX)*X-la)});1>X&&requestAnimationFrame(G)};G()});ib(this,"zoomToBounds",({width:b,height:g,minX:p,minY:G})=>{const {bounds:X,camera:la}=this;let pa=Math.min((X.width-100)/b,(X.height-100)/g);pa=Math.min(1,Math.max(it.minZoom,la.zoom===pa||1>la.zoom?Math.min(1,pa):pa));b=Fd.add([-p,-G],[(X.width-b*pa)/2/pa,(X.height-g*pa)/2/pa]);this.animateCamera({point:b,
zoom:pa})});Ag(this)}get currentView(){const {bounds:b,camera:{point:g,zoom:p}}=this,G=b.width/p,X=b.height/p;return{minX:-g[0],minY:-g[1],maxX:G-g[0],maxY:X-g[1],width:G,height:X}}},Qo=it;ib(Qo,"minZoom",.1);ib(Qo,"maxZoom",4);ib(Qo,"panMultiplier",.05);de([ug],Qo.prototype,"bounds",2);de([ug],Qo.prototype,"camera",2);de([pg],Qo.prototype,"updateBounds",2);de([pg],Qo.prototype,"update",2);de([Pg],Qo.prototype,"currentView",1);var ND=class{constructor(b){ib(this,"app");ib(this,"editShape",g=>{(null==
g?0:g.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:g});return this});ib(this,"hoverShape",g=>{this.app.setHoveredShape(g);return this});ib(this,"createShapes",(...g)=>{this.app.createShapes(g);return this});ib(this,"updateShapes",(...g)=>{this.app.updateShapes(g);return this});ib(this,"deleteShapes",(...g)=>{this.app.deleteShapes(g.length?g:this.app.selectedShapesArray);return this});ib(this,"selectShapes",(...g)=>{this.app.setSelectedShapes(g);return this});
ib(this,"deselectShapes",(...g)=>{const p="string"===typeof g[0]?g:g.map(G=>G.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(G=>!p.includes(G.id)));return this});ib(this,"flipHorizontal",(...g)=>{this.app.flipHorizontal(g);return this});ib(this,"flipVertical",(...g)=>{this.app.flipVertical(g);return this});ib(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(g=>!this.app.shapesInGroups().includes(g)));return this});ib(this,"deselectAll",()=>{this.app.setSelectedShapes([]);
return this});ib(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});ib(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});ib(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});ib(this,"zoomToFit",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=wf.getCommonBounds(g.map(p=>p.bounds));this.app.viewport.zoomToBounds(g);return this});ib(this,"cameraToCenter",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=wf.getCommonBounds(g.map(p=>
p.bounds));this.app.viewport.update({point:ne.add(ne.neg(wf.getBoundsCenter(g)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});ib(this,"zoomToSelection",()=>{const {selectionBounds:g}=this.app;if(!g)return this;this.app.viewport.zoomToBounds(g);return this});ib(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:ne.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});ib(this,"toggleGrid",()=>{const {settings:g}=
this.app;g.update({showGrid:!g.showGrid});return this});ib(this,"setColor",g=>{const {settings:p}=this.app;p.update({color:g});this.app.selectedShapesArray.forEach(G=>{G.props.isLocked||G.update({fill:g,stroke:g})});this.app.persist();return this});ib(this,"setScaleLevel",g=>{const {settings:p}=this.app;p.update({scaleLevel:g});this.app.selectedShapes.forEach(G=>{G.props.isLocked||G.setScaleLevel(g)});this.app.persist();return this});ib(this,"save",()=>{this.app.save();return this});ib(this,"saveAs",
()=>{this.app.save();return this});ib(this,"undo",()=>{this.app.undo();return this});ib(this,"redo",()=>{this.app.redo();return this});ib(this,"persist",()=>{this.app.persist();return this});ib(this,"createNewLineBinding",(g,p)=>this.app.createNewLineBinding(g,p));ib(this,"cloneShapes",({shapes:g,assets:p,bindings:G,point:X=[0,0]})=>{const la=wf.getCommonBounds(g.filter(Qa=>"group"!==Qa.type).map(Qa=>{var Za,eb,mb,Lb,Vb,Pb,ec,gc,Tb,nc,oc,Ec,Sc,vd,Wd,he;return{minX:null!=(eb=null==(Za=Qa.point)?void 0:
Za[0])?eb:X[0],minY:null!=(Lb=null==(mb=Qa.point)?void 0:mb[1])?Lb:X[1],width:null!=(Pb=null==(Vb=Qa.size)?void 0:Vb[0])?Pb:4,height:null!=(gc=null==(ec=Qa.size)?void 0:ec[1])?gc:4,maxX:(null!=(nc=null==(Tb=Qa.point)?void 0:Tb[0])?nc:X[0])+(null!=(Ec=null==(oc=Qa.size)?void 0:oc[0])?Ec:4),maxY:(null!=(vd=null==(Sc=Qa.point)?void 0:Sc[1])?vd:X[1])+(null!=(he=null==(Wd=Qa.size)?void 0:Wd[1])?he:4)}})),pa=g.map(Qa=>lf(pe({},Qa),{id:gl(),point:[X[0]+Qa.point[0]-la.minX,X[1]+Qa.point[1]-la.minY]}));pa.forEach(Qa=>
{var Za;Qa.children&&0<(null==(Za=Qa.children)?void 0:Za.length)&&(Qa.children=Qa.children.map(eb=>{var mb;return null==(mb=pa[g.findIndex(Lb=>Lb.id===eb)])?void 0:mb.id}).filter(ui))});const Ga=[];pa.flatMap(Qa=>{var Za;return Object.values(null!=(Za=Qa.handles)?Za:{})}).forEach(Qa=>{if(Qa.bindingId){var Za=G[Qa.bindingId];if(Za){var eb=g.findIndex(Lb=>Lb.id===Za.fromId);const mb=g.findIndex(Lb=>Lb.id===Za.toId);Za&&-1!==eb&&-1!==mb?(eb=lf(pe({},Za),{id:gl(),fromId:pa[eb].id,toId:pa[mb].id}),Ga.push(eb),
Qa.bindingId=eb.id):Qa.bindingId=void 0}else console.warn("binding not found",Qa.bindingId)}});p=p.filter(Qa=>pa.some(Za=>Za.assetId===Qa.id));return{shapes:pa,assets:p,bindings:Ga}});ib(this,"getClonedShapesFromTldrString",(g,p)=>{try{{var G;const Za=null==(G=g.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:G[1];if(Za){try{var X=JSON.parse(Za)}catch(eb){X=null}var la=X}else la=void 0}g=la;if(!g)return null;const {shapes:pa,bindings:Ga,assets:Qa}=g;return this.cloneShapes({shapes:pa,bindings:Ga,
assets:Qa,point:p})}catch(pa){console.log(pa)}return null});ib(this,"cloneShapesIntoCurrentPage",g=>{(g=this.cloneShapes(g))&&this.addClonedShapes(g);return this});ib(this,"addClonedShapes",g=>{const {shapes:p,assets:G,bindings:X}=g;0<G.length&&this.app.createAssets(G);0<p.length&&this.app.createShapes(p);this.app.currentPage.updateBindings(Object.fromEntries(X.map(la=>[la.id,la])));this.app.selectedTool.transition("idle");return this});ib(this,"addClonedShapesFromTldrString",(g,p)=>{(g=this.getClonedShapesFromTldrString(g,
p))&&this.addClonedShapes(g);return this});ib(this,"doGroup",(g=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var p=[...g.filter(G=>"group"===G.type),...g.map(G=>this.app.getParentGroup(G))].filter(ui);this.app.currentPage.removeShapes(...p);g=g.filter(G=>"group"!==G.type);1<g.length&&(p=this.app.getShapeClass("group"),p=new p({id:gl(),type:p.id,parentId:this.app.currentPage.id,children:g.map(G=>G.id)}),this.app.currentPage.addShapes(p),this.app.setSelectedShapes([p]),this.app.bringForward(g));
this.app.persist()}});ib(this,"unGroup",(g=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){g=[...g.filter(G=>"group"===G.type),...g.map(G=>this.app.getParentGroup(G))].filter(ui);var p=this.app.shapesInGroups(g);0<g.length&&(this.app.currentPage.removeShapes(...g),this.app.persist(),this.app.setSelectedShapes(p))}});ib(this,"convertShapes",(g,p=this.app.allSelectedShapesArray)=>{const G=this.app.getShapeClass(g);this.app.currentPage.removeShapes(...p);p=p.map(X=>new G(lf(pe({},X.serialized),
{type:g})));this.app.currentPage.addShapes(...p);this.app.persist();this.app.setSelectedShapes(p)});ib(this,"setCollapsed",(g,p=this.app.allSelectedShapesArray)=>{p.forEach(G=>{"logseq-portal"===G.props.type&&G.setCollapsed(g)});this.app.persist()});this.app=b}},Zr=class{constructor(){ib(this,"cursor","default");ib(this,"rotation",0);ib(this,"reset",()=>{this.cursor="default"});ib(this,"setCursor",(b,g=0)=>{if(b!==this.cursor||g!==this.rotation)this.cursor=b,this.rotation=g});ib(this,"setRotation",
b=>{b!==this.rotation&&(this.rotation=b)});Ag(this)}};de([ug],Zr.prototype,"cursor",2);de([ug],Zr.prototype,"rotation",2);de([pg],Zr.prototype,"reset",2);de([pg],Zr.prototype,"setCursor",2);de([pg],Zr.prototype,"setRotation",2);var Yr=class{constructor(b){ib(this,"app");ib(this,"stack",[]);ib(this,"isPaused",!0);ib(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});ib(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});ib(this,"persist",(g=!1)=>{this.isPaused||this.creating||this.app.notify("persist",
{replace:g})});ib(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});ib(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});ib(this,"instantiateShape",g=>new (this.app.getShapeClass(g.type))(g));ib(this,"deserialize",g=>{Jd(()=>{var p,{pages:G}=g;const X=this.isPaused;this.pause();const la=[...this.app.selectedIds];try{const pa=new Map(this.app.pages),Ga=[];for(const Qa of G){const Za=
pa.get(Qa.id);if(void 0!==Za){const eb=new Map(Za.shapes.map(mb=>[mb.props.id,mb]));G=[];for(const mb of Qa.shapes){const Lb=eb.get(mb.id);void 0!==Lb?(Lb.nonce!==mb.nonce&&(Lb.update(mb,!0),Lb.nonce=mb.nonce,Lb.setLastSerialized(mb)),eb.delete(mb.id)):G.push(this.instantiateShape(mb))}0<eb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&Za.removeShapes(...eb.values());0<G.length&&Za.addShapes(...G);pa.delete(Qa.id);Za.updateBindings(Qa.bindings);Za.nonce=null!=(p=Qa.nonce)?p:0}else{const {id:eb,
name:mb,shapes:Lb,bindings:Vb,nonce:Pb}=Qa;Ga.push(new Dm(this.app,{id:eb,name:mb,nonce:Pb,bindings:Vb,shapes:Lb.map(ec=>this.instantiateShape(ec))}))}}0<Ga.length&&this.app.addPages(Ga);0<pa.size&&this.app.removePages(Array.from(pa.values()));this.app.setSelectedShapes(la).setErasingShapes([])}catch(pa){console.warn(pa)}X||this.resume()})});this.app=b;Ag(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};de([ug],Yr.prototype,"stack",2);de([pg],Yr.prototype,"persist",
2);de([pg],Yr.prototype,"undo",2);de([pg],Yr.prototype,"redo",2);de([pg],Yr.prototype,"deserialize",2);var $r=class{constructor(){ib(this,"mode","light");ib(this,"showGrid",!0);ib(this,"scaleLevel","md");ib(this,"color","");Ag(this)}update(b){Object.assign(this,b)}};de([ug],$r.prototype,"mode",2);de([ug],$r.prototype,"showGrid",2);de([ug],$r.prototype,"scaleLevel",2);de([ug],$r.prototype,"color",2);de([pg],$r.prototype,"update",1);var eh=class extends Ir{constructor(b,g,p,G){var X,la;super();ib(this,
"keybindingRegistered",!1);ib(this,"uuid",gl());ib(this,"readOnly");ib(this,"api");ib(this,"inputs",new Zk);ib(this,"cursors",new Zr);ib(this,"viewport",new Qo);ib(this,"settings",new $r);ib(this,"Tools",[]);ib(this,"history",new Yr(this));ib(this,"persist",this.history.persist);ib(this,"undo",this.history.undo);ib(this,"redo",this.history.redo);ib(this,"saving",!1);ib(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=
!1)}))});ib(this,"load",()=>{this.notify("load",null);return this});ib(this,"save",()=>{this.notify("save",null);return this});ib(this,"saveAs",()=>{this.notify("saveAs",null);return this});ib(this,"pages",new Map([["page",new Dm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));ib(this,"getPageById",pa=>{const Ga=this.pages.get(pa);if(!Ga)throw Error(`Could not find a page named ${pa}.`);return Ga});ib(this,"getShapeById",(pa,Ga=this.currentPage.id)=>{var Qa;return null==(Qa=this.getPageById(Ga))?
void 0:Qa.shapesById[pa]});ib(this,"createShapes",pa=>{if(this.readOnly)return this;(pa=this.currentPage.addShapes(...pa))&&this.notify("create-shapes",pa);this.persist();return this});ib(this,"updateShapes",pa=>{if(this.readOnly)return this;pa.forEach(Ga=>{const Qa=this.getShapeById(Ga.id);null==Qa?void 0:Qa.update(Ga);Ga.type!==(null==Qa?void 0:Qa.type)&&this.api.convertShapes(Ga.type,[Qa])});this.persist();return this});ib(this,"deleteShapes",pa=>{if(0===pa.length||this.readOnly)return this;pa=
pa.map(eb=>"string"===typeof eb?this.getShapeById(eb):eb).filter(ui).filter(eb=>!eb.props.isLocked);const Ga=this.shapesInGroups(pa);pa.forEach(eb=>{this.getParentGroup(eb)&&Ga.push(eb)});let Qa=new Set([...pa,...Ga].map(eb=>eb.id));Ga.forEach(eb=>{var mb;const Lb=this.getParentGroup(eb);if(Lb){const Vb=null==(mb=Lb.props.children)?void 0:mb.filter(Pb=>Pb!==eb.id);!Vb||1>=(null==Vb?void 0:Vb.length)?Qa.add(Lb.id):Lb.update({children:Vb})}});const Za=(eb,mb)=>{var Lb;[...Qa].includes(eb)&&"line"===
(null==(Lb=this.getShapeById(mb))?void 0:Lb.type)&&Qa.add(mb)};this.currentPage.shapes.filter(eb=>!eb.props.isLocked).flatMap(eb=>{var mb;return Object.values(null!=(mb=eb.props.handles)?mb:{})}).flatMap(eb=>eb.bindingId).filter(ui).map(eb=>{var mb,Lb;const Vb=null==(mb=this.currentPage.bindings[eb])?void 0:mb.toId;eb=null==(Lb=this.currentPage.bindings[eb])?void 0:Lb.fromId;Vb&&eb&&(Za(Vb,eb),Za(eb,Vb))});pa=[...Qa].map(eb=>this.getShapeById(eb));this.setSelectedShapes(this.selectedShapesArray.filter(eb=>
!Qa.has(eb.id)));(pa=this.currentPage.removeShapes(...pa))&&this.notify("delete-shapes",pa);this.persist();return this});ib(this,"bringForward",(pa=this.selectedShapesArray)=>{0<pa.length&&!this.readOnly&&this.currentPage.bringForward(pa);return this});ib(this,"sendBackward",(pa=this.selectedShapesArray)=>{0<pa.length&&!this.readOnly&&this.currentPage.sendBackward(pa);return this});ib(this,"sendToBack",(pa=this.selectedShapesArray)=>{0<pa.length&&!this.readOnly&&this.currentPage.sendToBack(pa);return this});
ib(this,"bringToFront",(pa=this.selectedShapesArray)=>{0<pa.length&&!this.readOnly&&this.currentPage.bringToFront(pa);return this});ib(this,"flipHorizontal",(pa=this.selectedShapesArray)=>{this.currentPage.flip(pa,"horizontal");return this});ib(this,"flipVertical",(pa=this.selectedShapesArray)=>{this.currentPage.flip(pa,"vertical");return this});ib(this,"align",(pa,Ga=this.selectedShapesArray)=>{if(2>Ga.length||this.readOnly)return this;const Qa=Ga.map(Vb=>{const Pb=Vb.getBounds();return{id:Vb.id,
point:[Pb.minX,Pb.minY],bounds:Pb}}),Za=wf.getCommonBounds(Qa.map(({bounds:Vb})=>Vb)),eb=Za.minX+Za.width/2,mb=Za.minY+Za.height/2,Lb=Object.fromEntries(Qa.map(({id:Vb,point:Pb,bounds:ec})=>[Vb,{prev:Pb,next:{top:[Pb[0],Za.minY],centerVertical:[Pb[0],mb-ec.height/2],bottom:[Pb[0],Za.maxY-ec.height],left:[Za.minX,Pb[1]],centerHorizontal:[eb-ec.width/2,Pb[1]],right:[Za.maxX-ec.width,Pb[1]]}[pa]}]));Ga.forEach(Vb=>{Lb[Vb.id]&&Vb.update({point:Lb[Vb.id].next})});this.persist();return this});ib(this,"distribute",
(pa,Ga=this.selectedShapesArray)=>{if(2>Ga.length||this.readOnly)return this;const Qa=Object.fromEntries(wf.getDistributions(Ga,pa).map(Za=>[Za.id,Za]));Ga.forEach(Za=>{Qa[Za.id]&&Za.update({point:Qa[Za.id].next})});this.persist();return this});ib(this,"packIntoRectangle",(pa=this.selectedShapesArray)=>{if(2>pa.length||this.readOnly)return this;const Ga=Object.fromEntries(wf.getPackedDistributions(pa).map(Qa=>[Qa.id,Qa]));pa.forEach(Qa=>{Ga[Qa.id]&&Qa.update({point:Ga[Qa.id].next})});this.persist();
return this});ib(this,"setLocked",pa=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(Ga=>{Ga.update({isLocked:pa})});this.persist();return this});ib(this,"assets",{});ib(this,"removeUnusedAssets",()=>{const pa=this.getCleanUpAssets();Object.keys(this.assets).forEach(Ga=>{pa.some(Qa=>Qa.id===Ga)||delete this.assets[Ga]});this.persist();return this});ib(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const Ga=this.allSelectedShapesArray;
var pa=JSON.stringify({shapes:Ga.map(Za=>Za.serialized),assets:this.getCleanUpAssets().filter(Za=>Ga.some(eb=>eb.props.assetId===Za.id)),bindings:Fc(this.currentPage.bindings)});pa=encodeURIComponent(`<whiteboard-tldr>${pa}</whiteboard-tldr>`);const Qa=this.selectedShapesArray.map(Za=>`((${Za.props.id}))`).join(" ");this.notify("copy",{text:Qa,html:pa})}});ib(this,"paste",(pa,Ga)=>{var Qa;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!Ga,dataTransfer:null!=
(Qa=null==pa?void 0:pa.clipboardData)?Qa:void 0})});ib(this,"cut",()=>{this.copy();this.api.deleteShapes()});ib(this,"drop",(pa,Ga)=>{this.notify("drop",{dataTransfer:pa,point:Ga?this.viewport.getPagePoint(Ga):wf.getBoundsCenter(this.viewport.currentView)})});ib(this,"selectTool",(pa,Ga={})=>{this.readOnly&&!["select","move"].includes(pa)||this.transition(pa,Ga)});ib(this,"editingId");ib(this,"setEditingShape",pa=>{this.editingId="string"===typeof pa?pa:null==pa?void 0:pa.id;return this});ib(this,
"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});ib(this,"hoveredId");ib(this,"setHoveredShape",pa=>{this.hoveredId="string"===typeof pa?pa:null==pa?void 0:pa.id;return this});ib(this,"selectedIds",new Set);ib(this,"selectedShapes",new Set);ib(this,"selectionRotation",0);ib(this,"setSelectedShapes",pa=>{var Ga;const {selectedIds:Qa,selectedShapes:Za}=this;Qa.clear();Za.clear();pa[0]&&"string"===typeof pa[0]?pa.forEach(mb=>Qa.add(mb)):pa.forEach(mb=>Qa.add(mb.id));
const eb=this.currentPage.shapes.filter(mb=>Qa.has(mb.id));eb.forEach(mb=>Za.add(mb));this.selectionRotation=1===eb.length?null!=(Ga=eb[0].props.rotation)?Ga:0:0;0===pa.length&&this.setEditingShape();return this});ib(this,"erasingIds",new Set);ib(this,"erasingShapes",new Set);ib(this,"setErasingShapes",pa=>{const {erasingIds:Ga,erasingShapes:Qa}=this;Ga.clear();Qa.clear();pa[0]&&"string"===typeof pa[0]?pa.forEach(Za=>Ga.add(Za)):pa.forEach(Za=>Ga.add(Za.id));this.currentPage.shapes.filter(Za=>Ga.has(Za.id)).forEach(Za=>
Qa.add(Za));return this});ib(this,"bindingIds");ib(this,"setBindingShapes",pa=>{this.bindingIds=pa;return this});ib(this,"clearBindingShape",()=>this.setBindingShapes());ib(this,"createNewLineBinding",(pa,Ga)=>{pa="string"===typeof pa?this.getShapeById(pa):pa;Ga="string"===typeof Ga?this.getShapeById(Ga):Ga;if((null==pa?0:pa.canBind)&&(null==Ga?0:Ga.canBind)&&(Ga=nd(pa,Ga))){const [Qa,Za]=Ga;this.createShapes([Qa]);this.currentPage.updateBindings(Object.fromEntries(Za.map(eb=>[eb.id,eb])));this.persist();
return!0}return!1});ib(this,"brush");ib(this,"setBrush",pa=>{this.brush=pa;return this});ib(this,"setCamera",(pa,Ga)=>{this.viewport.update({point:pa,zoom:Ga});return this});ib(this,"getPagePoint",pa=>{const {camera:Ga}=this.viewport;return Fd.sub(Fd.div(pa,Ga.zoom),Ga.point)});ib(this,"getScreenPoint",pa=>{const {camera:Ga}=this.viewport;return Fd.mul(Fd.add(pa,Ga.point),Ga.zoom)});ib(this,"Shapes",new Map);ib(this,"registerShapes",pa=>{pa.forEach(Ga=>{if("group"===Ga.id){const Qa=this;Ga.prototype.getShapes=
function(){var Za,eb;return null!=(eb=null==(Za=this.props.children)?void 0:Za.map(mb=>Qa.getShapeById(mb)).filter(Boolean))?eb:[]}}return this.Shapes.set(Ga.id,Ga)})});ib(this,"deregisterShapes",pa=>{pa.forEach(Ga=>this.Shapes.delete(Ga.id))});ib(this,"getShapeClass",pa=>{if(!pa)throw Error("No shape type provided.");const Ga=this.Shapes.get(pa);if(!Ga)throw Error(`Could not find shape class for ${pa}`);return Ga});ib(this,"wrapUpdate",pa=>{Jd(()=>{const Ga=!this.history.isPaused;Ga&&this.history.pause();
pa();Ga&&(this.history.resume(),this.persist())})});ib(this,"subscriptions",new Set([]));ib(this,"subscribe",(pa,Ga)=>{if(void 0===Ga)throw Error("Callback is required.");const Qa={event:pa,callback:Ga};this.subscriptions.add(Qa);return()=>this.unsubscribe(Qa)});ib(this,"unsubscribe",pa=>{this.subscriptions.delete(pa);return this});ib(this,"notify",(pa,Ga)=>{this.subscriptions.forEach(Qa=>{Qa.event===pa&&Qa.callback(this,Ga)});return this});ib(this,"onTransition",()=>{});ib(this,"onPointerDown",(pa,
Ga)=>{if(!this.editingShape&&1===Ga.button&&!this.isIn("move"))this.temporaryTransitionToMove(Ga);else if(2===Ga.button&&!this.editingShape)Ga.preventDefault(),this.transition("select");else if("clientX"in Ga)this.inputs.onPointerDown([...this.viewport.getPagePoint([Ga.clientX,Ga.clientY]),.5],Ga)});ib(this,"onPointerUp",(pa,Ga)=>{if(!this.editingShape&&1===Ga.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ga.stopPropagation(),Ga.preventDefault();else if("clientX"in Ga)this.inputs.onPointerUp([...this.viewport.getPagePoint([Ga.clientX,
Ga.clientY]),.5],Ga)});ib(this,"onPointerMove",(pa,Ga)=>{if("clientX"in Ga)this.inputs.onPointerMove([...this.viewport.getPagePoint([Ga.clientX,Ga.clientY]),.5],Ga)});ib(this,"onKeyDown",(pa,Ga)=>{if(this.editingShape||" "!==Ga.key||this.isIn("move"))this.inputs.onKeyDown(Ga);else this.temporaryTransitionToMove(Ga)});ib(this,"onKeyUp",(pa,Ga)=>{if(!this.editingShape&&" "===Ga.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ga.stopPropagation(),Ga.preventDefault();else this.inputs.onKeyUp(Ga)});
ib(this,"onPinchStart",(pa,Ga)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(pa.point),.5],Ga)});ib(this,"onPinch",(pa,Ga)=>{this.inputs.onPinch([...this.viewport.getPagePoint(pa.point),.5],Ga)});ib(this,"onPinchEnd",(pa,Ga)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(pa.point),.5],Ga)});this._states=[Wr,Xr];this.readOnly=G;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),G=null!=(X=this.initial)?X:this.states[0].id,X=this.children.get(G))&&
(this.currentState=X,null==(la=this.currentState)?void 0:la._events.onEnter({fromId:"initial"}));g&&this.registerShapes(g);p&&this.registerTools(p);this.history.resume();b&&this.history.deserialize(b);this.api=new ND(this);Ag(this);this.notify("mount",null)}dispose(){super.dispose();this.keybindingRegistered=!1;return this}initKeyboardShortcuts(){if(!this.keybindingRegistered){var b=this.constructor.shortcuts||[],g=Array.from(this.children.values()).filter(p=>p.constructor.shortcut).map(p=>({keys:p.constructor.shortcut,
fn:(G,X,la)=>{this.selectTool(p.id)}}));this._disposables.push(...[{keys:"shift+0",fn:()=>this.api.resetZoom()},{keys:"shift+1",fn:()=>this.api.zoomToFit()},{keys:"shift+2",fn:()=>this.api.zoomToSelection()},{keys:"mod+up",fn:()=>this.api.setCollapsed(!0)},{keys:"mod+down",fn:()=>this.api.setCollapsed(!1)},{keys:"mod+-",fn:()=>this.api.zoomOut()},{keys:"mod+\x3d",fn:()=>this.api.zoomIn()},{keys:"mod+x",fn:()=>this.cut()},{keys:"[",fn:()=>this.sendBackward()},{keys:"shift+[",fn:()=>this.sendToBack()},
{keys:"]",fn:()=>this.bringForward()},{keys:"shift+]",fn:()=>this.bringToFront()},{keys:"mod+a",fn:()=>{const {selectedTool:p}=this;"select"!==p.id&&this.selectTool("select");this.api.selectAll()}},{keys:"mod+shift+s",fn:()=>{this.saveAs();this.notify("saveAs",null)}},{keys:"mod+shift+v",fn:(p,G,X)=>{this.editingShape||(X.preventDefault(),this.paste(void 0,!0))}},{keys:["del","backspace"],fn:()=>{this.editingShape||(this.api.deleteShapes(),this.selectedTool.transition("idle"))}},{keys:"mod+g",fn:()=>
{this.api.doGroup()}},{keys:"mod+shift+g",fn:()=>{this.api.unGroup()}},{keys:"shift+g",fn:()=>{this.api.toggleGrid()}},{keys:"mod+l",fn:()=>{this.setLocked(!0)}},{keys:"mod+shift+l",fn:()=>{this.setLocked(!1)}},...b,...g].map(({keys:p,fn:G})=>Oq.registerShortcut(p,X=>{G(this,this,X)})));this.keybindingRegistered=!0}}loadDocumentModel(b){this.history.deserialize(b);b.assets&&0<b.assets.length&&this.addAssets(b.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(b){b.forEach(g=>
this.pages.set(g.id,g));this.persist();return this}removePages(b){b.forEach(g=>this.pages.delete(g.id));this.persist();return this}shapesInGroups(b=this.shapes){return b.flatMap(g=>g.props.children).filter(ui).map(g=>this.getShapeById(g)).filter(ui)}getParentGroup(b){return this.shapes.find(g=>{var p;return null==(p=g.props.children)?void 0:p.includes(b.id)})}addAssets(b){b.forEach(g=>this.assets[g.id]=g);this.persist();return this}removeAssets(b){"string"===typeof b[0]?b.forEach(g=>delete this.assets[g]):
b.forEach(g=>delete this.assets[g.id]);this.persist();return this}getCleanUpAssets(){const b=new Set;this.pages.forEach(g=>g.shapes.forEach(p=>{p.props.assetId&&this.assets[p.props.assetId]&&b.add(this.assets[p.props.assetId])}));return Array.from(b)}createAssets(b){this.addAssets(b);this.notify("create-assets",{assets:b});this.persist();return this}get selectedTool(){return this.currentState}registerTools(b){this.Tools=b;return this.registerStates(b)}get editingShape(){const {editingId:b,currentPage:g}=
this;return b?g.shapes.find(p=>p.id===b):void 0}get hoveredShape(){const {hoveredId:b,currentPage:g}=this;return b?g.shapes.find(p=>p.id===b):void 0}get hoveredGroup(){const {hoveredShape:b}=this;return b?this.shapes.find(g=>{var p;return"group"===g.type&&(null==(p=g.props.children)?void 0:p.includes(b.id))}):void 0}get selectedShapesArray(){const {selectedShapes:b,selectedTool:g}=this;return"select"!==g.id?[]:Array.from(b.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:b}=
this;return[...(new Set([...b,...this.shapesInGroups(b)]))]}setSelectionRotation(b){this.selectionRotation=b}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var b;const g=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(G=>{var X;return Object.values(null!=(X=G.props.handles)?X:{})}).flatMap(G=>G.bindingId).filter(ui).flatMap(G=>{var X,la;return[null==(X=this.currentPage.bindings[G])?void 0:X.fromId,null==(la=this.currentPage.bindings[G])?
void 0:la.toId]}).filter(ui):[],p=[...(null!=(b=this.bindingIds)?b:[]),...g];return p?this.currentPage.shapes.filter(G=>null==p?void 0:p.includes(G.id)):void 0}get currentGrid(){const {zoom:b}=this.viewport.camera;return.15>b?128:1>b?32:8}get shapes(){const {currentPage:{shapes:b}}=this;return Array.from(b.values())}get shapesInViewport(){const {selectedShapes:b,currentPage:g,viewport:{currentView:p}}=this;return g.shapes.filter(G=>!G.canUnmount||b.has(G)||wf.boundsContain(p,G.rotatedBounds)||wf.boundsCollide(p,
G.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:b,viewport:{currentView:g}}=this;if(b&&!wf.boundsContain(g,b)&&!wf.boundsCollide(g,b)){var p=wf.getBoundsCenter(b);return Fd.clampV([(p[0]-g.minX-g.width/2)/g.width,(p[1]-g.minY-g.height/2)/g.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:b}=this;if(0!==b.length)return 1===b.length?lf(pe({},b[0].bounds),{rotation:b[0].props.rotation}):wf.getCommonBounds(this.selectedShapesArray.map(g=>g.rotatedBounds))}get showSelection(){var b;
const {selectedShapesArray:g}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===g.length&&!(null==(b=g[0])?0:b.hideSelection)||1<g.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(b=>b.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:b}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<b.length&&!this.readOnly&&!b.every(g=>g.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<b.length&&!this.readOnly&&!b.some(g=>g.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===b.length&&!this.readOnly&&!b.every(g=>g.hideResizeHandles)}temporaryTransitionToMove(b){b.stopPropagation();b.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};ib(eh,"id","app");ib(eh,"initial","select");de([Pg],eh.prototype,"serialized",1);de([ug],eh.prototype,"pages",2);de([Pg],eh.prototype,
"currentPageId",1);de([Pg],eh.prototype,"currentPage",1);de([pg],eh.prototype,"addPages",1);de([pg],eh.prototype,"removePages",1);de([pg],eh.prototype,"createShapes",2);de([pg],eh.prototype,"updateShapes",2);de([pg],eh.prototype,"deleteShapes",2);de([ug],eh.prototype,"assets",2);de([pg],eh.prototype,"addAssets",1);de([pg],eh.prototype,"removeAssets",1);de([pg],eh.prototype,"removeUnusedAssets",2);de([Pg],eh.prototype,"selectedTool",1);de([ug],eh.prototype,"editingId",2);de([Pg],eh.prototype,"editingShape",
1);de([pg],eh.prototype,"setEditingShape",2);de([ug],eh.prototype,"hoveredId",2);de([Pg],eh.prototype,"hoveredShape",1);de([Pg],eh.prototype,"hoveredGroup",1);de([pg],eh.prototype,"setHoveredShape",2);de([ug],eh.prototype,"selectedIds",2);de([ug],eh.prototype,"selectedShapes",2);de([ug],eh.prototype,"selectionRotation",2);de([Pg],eh.prototype,"selectedShapesArray",1);de([Pg],eh.prototype,"allSelectedShapes",1);de([Pg],eh.prototype,"allSelectedShapesArray",1);de([pg],eh.prototype,"setSelectedShapes",
2);de([pg],eh.prototype,"setSelectionRotation",1);de([ug],eh.prototype,"erasingIds",2);de([ug],eh.prototype,"erasingShapes",2);de([Pg],eh.prototype,"erasingShapesArray",1);de([pg],eh.prototype,"setErasingShapes",2);de([ug],eh.prototype,"bindingIds",2);de([Pg],eh.prototype,"bindingShapes",1);de([pg],eh.prototype,"setBindingShapes",2);de([pg],eh.prototype,"createNewLineBinding",2);de([ug],eh.prototype,"brush",2);de([pg],eh.prototype,"setBrush",2);de([pg],eh.prototype,"setCamera",2);de([Pg],eh.prototype,
"currentGrid",1);de([Pg],eh.prototype,"shapes",1);de([Pg],eh.prototype,"shapesInViewport",1);de([Pg],eh.prototype,"selectionDirectionHint",1);de([Pg],eh.prototype,"selectionBounds",1);de([Pg],eh.prototype,"showSelection",1);de([Pg],eh.prototype,"showSelectionDetail",1);de([Pg],eh.prototype,"showSelectionRotation",1);de([Pg],eh.prototype,"showContextBar",1);de([Pg],eh.prototype,"showRotateHandles",1);de([Pg],eh.prototype,"showResizeHandles",1);var MD=Function.prototype.toString,Pv=Object.create,OD=
Object.prototype.toString,LD=function(){function b(){this._keys=[];this._values=[]}b.prototype.has=function(g){return!!~this._keys.indexOf(g)};b.prototype.get=function(g){return this._values[this._keys.indexOf(g)]};b.prototype.set=function(g,p){this._keys.push(g);this._values.push(p)};return b}(),ID="undefined"!==typeof WeakMap?Ue:xe,HD="g"===/test/g.flags?Lf:kg,KD="undefined"!==typeof Symbol?Xf:zf,JD=Object.defineProperty,Qy=Object.getOwnPropertyDescriptor,Py=Object.getOwnPropertyNames,aw=Object.getOwnPropertySymbols,
$y=Object.prototype,Zy=$y.hasOwnProperty,XD=$y.propertyIsEnumerable,az="function"===typeof aw,YD=az?Tg:Py,ZD=Array.isArray,Wv=Object.assign,$D=Object.getPrototypeOf,bz={array:function(b,g){var p=new g.Constructor;g.cache.set(b,p);for(var G=0,X=b.length;G<X;++G)p[G]=g.copier(b[G],g);return p},arrayBuffer:function(b,g){return b.slice(0)},blob:function(b,g){return b.slice(0,b.size,b.type)},dataView:function(b,g){return new g.Constructor(b.buffer.slice(0))},date:function(b,g){return new g.Constructor(b.getTime())},
error:Sh,map:wh,object:az?ei:ti,regExp:function(b,g){g=new g.Constructor(b.source,HD(b));g.lastIndex=b.lastIndex;return g},set:df},aE=Wv({},bz,{array:function(b,g){var p=new g.Constructor;g.cache.set(b,p);return ni(b,p,g)},map:function(b,g){return ni(b,wh(b,g),g)},object:function(b,g){var p=Nf(g.prototype);g.cache.set(b,p);return ni(b,p,g)},set:function(b,g){return ni(b,df(b,g),g)}});Th(Wv({},aE,{}));var bE=Th({});uf(Sp());var cE=uf(Kq()),fr=bE,eo=class{static insertTextFirefox(b,g){b.setRangeText(g,
b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const p=b.ownerDocument,G=p.activeElement;G!==b&&b.focus();p.execCommand("insertText",!1,g)||eo.insertTextFirefox(b,g);G===p.body?b.blur():G instanceof HTMLElement&&G!==b&&G.focus()}static set(b,g){b.select();eo.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:p}=b;return b.value.slice(g?g:void 0,p?p:void 0)}static wrapSelection(b,
g,p){const {selectionStart:G,selectionEnd:X}=b,la=eo.getSelection(b);eo.insert(b,g+la+(null!=p?p:g));b.selectionStart=(G||0)+g.length;b.selectionEnd=(X||0)+g.length}static replace(b,g,p){let G=0;b.value.replace(g,(...X)=>{const la=G+X[X.length-2],pa=X[0].length;b.selectionStart=la;b.selectionEnd=la+pa;X="string"===typeof p?p:p(...X);eo.insert(b,X);b.selectionStart=la;G+=X.length-pa;return X})}static findLineEnd(b,g){const p=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(p)?g:p+1}static indent(b){var g;
const {selectionStart:p,selectionEnd:G,value:X}=b;var la=X.slice(p,G);if((la=null==(g=/\n/g.exec(la))?void 0:g.length)&&0<la){g=X.lastIndexOf("\n",p-1)+1;var pa=b.value.slice(g,G-1);la=pa.replace(/^|\n/g,`$&${eo.INDENT}`);pa=la.length-pa.length;b.setSelectionRange(g,G-1);eo.insert(b,la);b.setSelectionRange(p+1,G+pa)}else eo.insert(b,eo.INDENT)}static unindent(b){const {selectionStart:g,selectionEnd:p,value:G}=b;var X=G.lastIndexOf("\n",g-1)+1;const la=eo.findLineEnd(G,p);var pa=b.value.slice(X,la);
const Ga=pa.replace(/(^|\n)(\t| {1,2})/g,"$1");pa=pa.length-Ga.length;b.setSelectionRange(X,la);eo.insert(b,Ga);X=(X=/\t| {1,2}/.exec(G.slice(X,g)))?X[0].length:0;b.setSelectionRange(g-X,Math.max(g-X,p-pa))}static normalizeText(b){return b.replace(eo.fixNewLines,"\n")}},as=eo;ib(as,"fixNewLines",/\r?\n|\r/g);ib(as,"INDENT","  ");var gq;"undefined"!==typeof window&&(gq=Kk());var Vv=new Map,Ro=Lk()?"":"Ctrl",WD=class extends eh{},Xy=uf(W(22)),VD=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var Yy=uf(W(22)),Tv={},ft=uf(W(22)),UD=b=>{for(b=b.parentElement;b&&b!==document.body;){const {overflowY:g}=window.getComputedStyle(b);if(b.scrollHeight>b.clientHeight&&("auto"===g||"scroll"===g||"overlay"===g))return b;b=b.parentElement}return document},Sv=uf(W(22)),Rv=new Map,SD={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",
binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},TD=((b,...g)=>b.reduce((p,G,X)=>p+G+(X<g.length?g[X]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,Uy=uf(W(22)),Ty=uf(W(22)),Qv={},Yk={toVector(b,g){void 0===b&&(b=g);return Array.isArray(b)?b:[b,b]},add(b,g){return[b[0]+g[0],b[1]+g[1]]},sub(b,g){return[b[0]-g[0],b[1]-g[1]]},addTo(b,g){b[0]+=g[0];b[1]+=g[1]},subTo(b,g){b[0]-=g[0];b[1]-=g[1]}},Sy={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},RD=["enter","leave"],zp=["gotpointercapture","lostpointercapture"],
to=class{constructor(b,g,p){this.ctrl=b;this.args=g;this.key=p;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(b){this.ctrl.state[this.key]=b}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:b,
shared:g,ingKey:p,args:G}=this;g[p]=b._active=b.active=b._blocked=b._force=!1;b._step=[!1,!1];b.intentional=!1;b._movement=[0,0];b._distance=[0,0];b._direction=[0,0];b._delta=[0,0];b._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];b.args=G;b.axis=void 0;b.memo=void 0;b.elapsedTime=0;b.direction=[0,0];b.distance=[0,0];b.overflow=[0,0];b._movementBound=[!1,!1];b.velocity=[0,0];b.movement=[0,0];b.delta=[0,0];b.timeStamp=0}start(b){const g=this.state,p=this.config;g._active||(this.reset(),this.computeInitial(),
g._active=!0,g.target=b.target,g.currentTarget=b.currentTarget,g.lastOffset=p.from?Vi(p.from,g):g.offset,g.offset=g.lastOffset);g.startTime=g.timeStamp=b.timeStamp}computeValues(b){const g=this.state;g._values=b;g.values=this.config.transform(b)}computeInitial(){const b=this.state;b._initial=b._values;b.initial=b.values}compute(b){const {state:g,config:p,shared:G}=this;g.args=this.args;var X=0;if(b){g.event=b;p.preventDefault&&b.cancelable&&g.event.preventDefault();g.type=b.type;G.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;G.locked=!!document.pointerLockElement;X=Object;var la=X.assign,pa={};"buttons"in b&&(pa.buttons=b.buttons);if("shiftKey"in b){const {shiftKey:Ec,altKey:Sc,metaKey:vd,ctrlKey:Wd}=b;Object.assign(pa,{shiftKey:Ec,altKey:Sc,metaKey:vd,ctrlKey:Wd})}la.call(X,G,pa);G.down=G.pressed=1===G.buttons%2||0<G.touches;X=b.timeStamp-g.timeStamp;g.timeStamp=b.timeStamp;g.elapsedTime=g.timeStamp-g.startTime}g._active&&(la=g._delta.map(Math.abs),Yk.addTo(g._distance,la));this.axisIntent&&this.axisIntent(b);
const [Ga,Qa]=g._movement,[Za,eb]=p.threshold,{_step:mb,values:Lb}=g;p.hasCustomTransform?(!1===mb[0]&&(mb[0]=Math.abs(Ga)>=Za&&Lb[0]),!1===mb[1]&&(mb[1]=Math.abs(Qa)>=eb&&Lb[1])):(!1===mb[0]&&(mb[0]=Math.abs(Ga)>=Za&&Math.sign(Ga)*Za),!1===mb[1]&&(mb[1]=Math.abs(Qa)>=eb&&Math.sign(Qa)*eb));g.intentional=!1!==mb[0]||!1!==mb[1];if(g.intentional){la=[0,0];if(p.hasCustomTransform){const [Ec,Sc]=Lb;la[0]=!1!==mb[0]?Ec-mb[0]:0;la[1]=!1!==mb[1]?Sc-mb[1]:0}else la[0]=!1!==mb[0]?Ga-mb[0]:0,la[1]=!1!==mb[1]?
Qa-mb[1]:0;this.restrictToAxis&&!g._blocked&&this.restrictToAxis(la);pa=g.offset;var Vb=g._active&&!g._blocked||g.active;Vb&&(g.first=g._active&&!g.active,g.last=!g._active&&g.active,g.active=G[this.ingKey]=g._active,b&&(g.first&&("bounds"in p&&(g._bounds=Vi(p.bounds,g)),this.setup&&this.setup()),g.movement=la,this.computeOffset()));var [Pb,ec]=g.offset,[[gc,Tb],[nc,oc]]=g._bounds;g.overflow=[Pb<gc?-1:Pb>Tb?1:0,ec<nc?-1:ec>oc?1:0];g._movementBound[0]=g.overflow[0]?!1===g._movementBound[0]?g._movement[0]:
g._movementBound[0]:!1;g._movementBound[1]=g.overflow[1]?!1===g._movementBound[1]?g._movement[1]:g._movementBound[1]:!1;g.offset=Ii(g._bounds,g.offset,g._active?p.rubberband||[0,0]:[0,0]);g.delta=Yk.sub(g.offset,pa);this.computeMovement();Vb&&(!g.last||32<X)&&(g.delta=Yk.sub(g.offset,pa),b=g.delta.map(Math.abs),Yk.addTo(g.distance,b),g.direction=g.delta.map(Math.sign),g._direction=g._delta.map(Math.sign),!g.first&&0<X&&(g.velocity=[b[0]/X,b[1]/X]))}}emit(){const b=this.state;var g=this.shared;const p=
this.config;b._active||this.clean();if(!b._blocked&&b.intentional||b._force||p.triggerAllEvents)g=this.handler(Hg(Hg(Hg({},g),b),{},{[this.aliasKey]:b.values})),void 0!==g&&(b.memo=g)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},gt=class extends to{constructor(...b){super(...b);Oh(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Yk.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
Yk.sub(this.state.offset,this.state.lastOffset)}axisIntent(b){const g=this.state,p=this.config;!g.axis&&b&&(b="object"===typeof p.axisThreshold?p.axisThreshold[cl(b)]:p.axisThreshold,g.axis=xi(g._movement,b));g._blocked=(p.lockDirection||!!p.axis)&&!g.axis||!!p.axis&&p.axis!==g.axis}restrictToAxis(b){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":b[1]=0;break;case "y":b[0]=0}}},QD=b=>b,Ry={enabled(b=!0){return b},eventOptions(b,g,p){return Hg(Hg({},p.shared.eventOptions),
b)},preventDefault(b=!1){return b},triggerAllEvents(b=!1){return b},rubberband(b=0){switch(b){case !0:return[.15,.15];case !1:return[0,0];default:return Yk.toVector(b)}},from(b){if("function"===typeof b)return b;if(null!=b)return Yk.toVector(b)},transform(b,g,p){b=b||p.shared.transform;this.hasCustomTransform=!!b;return b||QD},threshold(b){return Yk.toVector(b,0)}},gr=Hg(Hg({},Ry),{},{axis(b,g,{axis:p}){this.lockDirection="lock"===p;if(!this.lockDirection)return p},axisThreshold(b=0){return b},bounds(b=
{}){if("function"===typeof b)return la=>gr.bounds(b(la));if("current"in b)return()=>b.current;if("function"===typeof HTMLElement&&b instanceof HTMLElement)return b;const {left:g=-Infinity,right:p=Infinity,top:G=-Infinity,bottom:X=Infinity}=b;return[[g,p],[G,X]]}}),pz={ArrowRight:(b=1)=>[10*b,0],ArrowLeft:(b=1)=>[-10*b,0],ArrowUp:(b=1)=>[0,-10*b],ArrowDown:(b=1)=>[0,10*b]},Wy=class extends gt{constructor(...b){super(...b);Oh(this,"ingKey","dragging")}reset(){super.reset();const b=this.state;b._pointerId=
void 0;b._pointerActive=!1;b._keyboardActive=!1;b._preventScroll=!1;b._delayed=!1;b.swipe=[0,0];b.tap=!1;b.canceled=!1;b.cancel=this.cancel.bind(this)}setup(){const b=this.state;if(b._bounds instanceof HTMLElement){const g=b._bounds.getBoundingClientRect(),p=b.currentTarget.getBoundingClientRect();b._bounds=gr.bounds({left:g.left-p.left+b.offset[0],right:g.right-p.right+b.offset[0],top:g.top-p.top+b.offset[1],bottom:g.bottom-p.bottom+b.offset[1]})}}cancel(){const b=this.state;b.canceled||(b.canceled=
!0,b._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(b){const g=this.config,p=this.state;if(null==b.buttons||(Array.isArray(g.pointerButtons)?g.pointerButtons.includes(b.buttons):-1===g.pointerButtons||g.pointerButtons===b.buttons)){var G=this.ctrl.setEventIds(b);g.pointerCapture&&b.target.setPointerCapture(b.pointerId);
G&&1<G.size&&p._pointerActive||(this.start(b),this.setupPointer(b),p._pointerId=Ei(b),p._pointerActive=!0,this.computeValues(tj(b)),this.computeInitial(),g.preventScrollAxis&&"mouse"!==cl(b)?(p._active=!1,this.setupScrollPrevention(b)):0<g.delay?(this.setupDelayTrigger(b),g.triggerAllEvents&&(this.compute(b),this.emit())):this.startPointerDrag(b))}}startPointerDrag(b){const g=this.state;g._active=!0;g._preventScroll=!0;g._delayed=!1;this.compute(b);this.emit()}pointerMove(b){const g=this.state,p=
this.config;if(g._pointerActive&&(g.type!==b.type||b.timeStamp!==g.timeStamp)){var G=Ei(b);if(void 0===g._pointerId||G===g._pointerId)G=tj(b),document.pointerLockElement===b.target?g._delta=[b.movementX,b.movementY]:(g._delta=Yk.sub(G,g._values),this.computeValues(G)),Yk.addTo(g._movement,g._delta),this.compute(b),g._delayed&&g.intentional?(this.timeoutStore.remove("dragDelay"),g.active=!1,this.startPointerDrag(b)):p.preventScrollAxis&&!g._preventScroll?g.axis&&(g.axis===p.preventScrollAxis||"xy"===
p.preventScrollAxis?(g._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(b))):this.emit()}}pointerUp(b){this.ctrl.setEventIds(b);try{this.config.pointerCapture&&b.target.hasPointerCapture(b.pointerId)&&b.target.releasePointerCapture(b.pointerId)}catch(pa){}const g=this.state,p=this.config;if(g._active&&g._pointerActive){var G=Ei(b);if(void 0===g._pointerId||G===g._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(b);var [X,la]=g._distance;
g.tap=X<=p.tapsThreshold&&la<=p.tapsThreshold;if(g.tap&&p.filterTaps)g._force=!0;else{const [pa,Ga]=g.direction,[Qa,Za]=g.velocity,[eb,mb]=g.movement,[Lb,Vb]=p.swipe.velocity,[Pb,ec]=p.swipe.distance;g.elapsedTime<p.swipe.duration&&(Math.abs(Qa)>Lb&&Math.abs(eb)>Pb&&(g.swipe[0]=pa),Math.abs(Za)>Vb&&Math.abs(mb)>ec&&(g.swipe[1]=Ga))}this.emit()}}}pointerClick(b){!this.state.tap&&0<b.detail&&(b.preventDefault(),b.stopPropagation())}setupPointer(b){const g=this.config,p=g.device;g.pointerLock&&b.currentTarget.requestPointerLock();
g.pointerCapture||(this.eventStore.add(this.sharedConfig.window,p,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,p,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,p,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(b){this.state._preventScroll&&b.cancelable&&b.preventDefault()}setupScrollPrevention(b){this.state._preventScroll=
!1;"persist"in b&&"function"===typeof b.persist&&b.persist();const g=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",g);this.eventStore.add(this.sharedConfig.window,"touch","cancel",g);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,b)}setupDelayTrigger(b){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(b)},this.config.delay)}keyDown(b){const g=pz[b.key];if(g){const p=this.state,G=b.shiftKey?10:b.altKey?.1:1;this.start(b);p._delta=g(G);p._keyboardActive=!0;Yk.addTo(p._movement,p._delta);this.compute(b);this.emit()}}keyUp(b){b.key in pz&&(this.state._keyboardActive=!1,this.setActive(),this.compute(b),this.emit())}bind(b){const g=this.config.device;b(g,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(b(g,"change",this.pointerMove.bind(this)),b(g,"end",this.pointerUp.bind(this)),
b(g,"cancel",this.pointerUp.bind(this)),b("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(b("key","down",this.keyDown.bind(this)),b("key","up",this.keyUp.bind(this)));this.config.filterTaps&&b("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},eq="undefined"!==typeof window&&window.document&&window.document.createElement;try{var Vy="constructor"in GestureEvent}catch(b){Vy=!1}var Uv=Vy,fq=eq&&"ontouchstart"in window||eq&&1<window.navigator.maxTouchPoints,ez=eq&&
"ontouchstart"in window||eq&&1<window.navigator.maxTouchPoints,qz=eq&&"onpointerdown"in window,pE=eq&&"exitPointerLock"in window.document,rz={mouse:0,touch:0,pen:8},wE=Hg(Hg({},gr),{},{device(b,g,{pointer:{touch:p=!1,lock:G=!1,mouse:X=!1}={}}){this.pointerLock=G&&pE;return fq&&p?"touch":this.pointerLock?"mouse":qz&&!X?"pointer":fq?"touch":"mouse"},preventScrollAxis(b,g,{preventScroll:p}){this.preventScrollDelay="number"===typeof p?p:p||void 0===p&&b?250:void 0;if(ez&&!1!==p)return b?b:void 0!==p?
"y":void 0},pointerCapture(b,g,{pointer:{capture:p=!0,buttons:G=1,keys:X=!0}={}}){this.pointerButtons=G;this.keys=X;return!this.pointerLock&&"pointer"===this.device&&p},threshold(b,g,{filterTaps:p=!1,tapsThreshold:G=3,axis:X}){b=Yk.toVector(b,p?G:X?1:0);this.filterTaps=p;this.tapsThreshold=G;return b},swipe({velocity:b=.5,distance:g=50,duration:p=250}={}){return{velocity:this.transform(Yk.toVector(b)),distance:this.transform(Yk.toVector(g)),duration:p}},delay(b=0){switch(b){case !0:return 180;case !1:return 0;
default:return b}},axisThreshold(b){return b?Hg(Hg({},rz),b):rz}}),xE=class extends to{constructor(...b){super(...b);Oh(this,"ingKey","pinching");Oh(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const b=this.state;b._touchIds=[];b.canceled=!1;b.cancel=this.cancel.bind(this);b.turns=0}computeOffset(){const {type:b,movement:g,lastOffset:p}=this.state;this.state.offset="wheel"===b?Yk.add(g,p):[(1+g[0])*p[0],g[1]+
p[1]]}computeMovement(){const {offset:b,lastOffset:g}=this.state;this.state.movement=[b[0]/g[0],b[1]-g[1]]}axisIntent(){const b=this.state,[g,p]=b._movement;if(!b.axis){const G=30*Math.abs(g)-Math.abs(p);0>G?b.axis="angle":0<G&&(b.axis="scale")}}restrictToAxis(b){this.config.lockDirection&&("scale"===this.state.axis?b[1]=0:"angle"===this.state.axis&&(b[0]=0))}cancel(){const b=this.state;b.canceled||setTimeout(()=>{b.canceled=!0;b._active=!1;this.compute();this.emit()},0)}touchStart(b){this.ctrl.setEventIds(b);
var g=this.state;const p=this.ctrl.touchIds;g._active&&g._touchIds.every(G=>p.has(G))||2>p.size||(this.start(b),g._touchIds=Array.from(p).slice(0,2),g=mk(b,g._touchIds),this.pinchStart(b,g))}pointerStart(b){if(null==b.buttons||1===b.buttons%2){this.ctrl.setEventIds(b);b.target.setPointerCapture(b.pointerId);var g=this.state,p=g._pointerEvents,G=this.ctrl.pointerIds;g._active&&Array.from(p.keys()).every(X=>G.has(X))||(2>p.size&&p.set(b.pointerId,b),2>g._pointerEvents.size||(this.start(b),g=rl(...Array.from(p.values())),
this.pinchStart(b,g)))}}pinchStart(b,g){this.state.origin=g.origin;this.computeValues([g.distance,g.angle]);this.computeInitial();this.compute(b);this.emit()}touchMove(b){if(this.state._active){var g=mk(b,this.state._touchIds);this.pinchMove(b,g)}}pointerMove(b){var g=this.state._pointerEvents;g.has(b.pointerId)&&g.set(b.pointerId,b);this.state._active&&(g=rl(...Array.from(g.values())),this.pinchMove(b,g))}pinchMove(b,g){const p=this.state,G=g.angle-p._values[1];let X=0;270<Math.abs(G)&&(X+=Math.sign(G));
this.computeValues([g.distance,g.angle-360*X]);p.origin=g.origin;p.turns=X;p._movement=[p._values[0]/p._initial[0]-1,p._values[1]-p._initial[1]];this.compute(b);this.emit()}touchEnd(b){this.ctrl.setEventIds(b);this.state._active&&this.state._touchIds.some(g=>!this.ctrl.touchIds.has(g))&&(this.state._active=!1,this.compute(b),this.emit())}pointerEnd(b){const g=this.state;this.ctrl.setEventIds(b);try{b.target.releasePointerCapture(b.pointerId)}catch(p){}g._pointerEvents.has(b.pointerId)&&g._pointerEvents.delete(b.pointerId);
g._active&&2>g._pointerEvents.size&&(g._active=!1,this.compute(b),this.emit())}gestureStart(b){b.cancelable&&b.preventDefault();const g=this.state;g._active||(this.start(b),this.computeValues([b.scale,b.rotation]),g.origin=[b.clientX,b.clientY],this.compute(b),this.emit())}gestureMove(b){b.cancelable&&b.preventDefault();if(this.state._active){var g=this.state;this.computeValues([b.scale,b.rotation]);g.origin=[b.clientX,b.clientY];var p=g._movement;g._movement=[b.scale-1,b.rotation];g._delta=Yk.sub(g._movement,
p);this.compute(b);this.emit()}}gestureEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}wheel(b){const g=this.config.modifierKey;if(!g||b[g])this.state._active?this.wheelChange(b):this.wheelStart(b),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(b){this.start(b);this.wheelChange(b)}wheelChange(b){"uv"in b||b.cancelable&&b.preventDefault();const g=this.state;g._delta=[-$h(b)[1]/100*g.offset[0],0];Yk.addTo(g._movement,g._delta);dl(g);this.state.origin=
[b.clientX,b.clientY];this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){const g=this.config.device;g&&(b(g,"start",this[g+"Start"].bind(this)),b(g,"change",this[g+"Move"].bind(this)),b(g,"end",this[g+"End"].bind(this)),b(g,"cancel",this[g+"End"].bind(this)));this.config.pinchOnWheel&&b("wheel","",this.wheel.bind(this),{passive:!1})}},yE=Hg(Hg({},Ry),{},{device(b,g,{shared:p,pointer:{touch:G=!1}={}}){if(p.target&&!fq&&Uv)return"gesture";
if(fq&&G)return"touch";if(ez){if(qz)return"pointer";if(fq)return"touch"}},bounds(b,g,{scaleBounds:p={},angleBounds:G={}}){const X=pa=>{pa=Vi(p,pa);pa=Object.assign({},{min:-Infinity,max:Infinity},pa||{});return[pa.min,pa.max]},la=pa=>{pa=Vi(G,pa);pa=Object.assign({},{min:-Infinity,max:Infinity},pa||{});return[pa.min,pa.max]};return"function"!==typeof p&&"function"!==typeof G?[X(),la()]:pa=>[X(pa),la(pa)]},threshold(b,g,p){this.lockDirection="lock"===p.axis;return Yk.toVector(b,this.lockDirection?
[.1,3]:0)},modifierKey(b){return void 0===b?"ctrlKey":b},pinchOnWheel(b=!0){return b}}),zE=class extends gt{constructor(...b){super(...b);Oh(this,"ingKey","moving")}move(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.state._active?this.moveChange(b):this.moveStart(b),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(b){this.start(b);this.computeValues(tj(b));this.compute(b);this.computeInitial();this.emit()}moveChange(b){if(this.state._active){var g=tj(b),p=this.state;
p._delta=Yk.sub(g,p._values);Yk.addTo(p._movement,p._delta);this.computeValues(g);this.compute(b);this.emit()}}moveEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}bind(b){b("pointer","change",this.move.bind(this));b("pointer","leave",this.moveEnd.bind(this))}},AE=Hg(Hg({},gr),{},{mouseOnly:(b=!0)=>b}),BE=class extends gt{constructor(...b){super(...b);Oh(this,"ingKey","scrolling")}scroll(b){this.state._active||this.start(b);this.scrollChange(b);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(b){b.cancelable&&b.preventDefault();const g=this.state;var p,G;const {scrollX:X,scrollY:la,scrollLeft:pa,scrollTop:Ga}=b.currentTarget;var Qa=[null!==(p=null!==X&&void 0!==X?X:pa)&&void 0!==p?p:0,null!==(G=null!==la&&void 0!==la?la:Ga)&&void 0!==G?G:0];g._delta=Yk.sub(Qa,g._values);Yk.addTo(g._movement,g._delta);this.computeValues(Qa);this.compute(b);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("scroll",
"",this.scroll.bind(this))}},CE=gr,DE=class extends gt{constructor(...b){super(...b);Oh(this,"ingKey","wheeling")}wheel(b){this.state._active||this.start(b);this.wheelChange(b);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(b){const g=this.state;g._delta=$h(b);Yk.addTo(g._movement,g._delta);dl(g);this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("wheel","",this.wheel.bind(this))}},EE=gr,FE=class extends gt{constructor(...b){super(...b);
Oh(this,"ingKey","hovering")}enter(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.start(b),this.computeValues(tj(b)),this.compute(b),this.emit())}leave(b){if(!this.config.mouseOnly||"mouse"===b.pointerType){var g=this.state;if(g._active){g._active=!1;var p=tj(b);g._movement=g._delta=Yk.sub(p,g._values);this.computeValues(p);this.compute(b);g.delta=g.movement;this.emit()}}}bind(b){b("pointer","enter",this.enter.bind(this));b("pointer","leave",this.leave.bind(this))}},GE=Hg(Hg({},gr),{},{mouseOnly:(b=
!0)=>b}),Zv=new Map,$v=new Map,oE={key:"drag",engine:Wy,resolver:wE},kE={key:"hover",engine:FE,resolver:GE},lE={key:"move",engine:zE,resolver:AE},mE={key:"pinch",engine:xE,resolver:yE},nE={key:"scroll",engine:BE,resolver:CE},fE={key:"wheel",engine:DE,resolver:EE},Yv=uf(W(22)),gE={target(b){if(b)return()=>"current"in b?b.current:b},enabled(b=!0){return b},window(b=eq?window:void 0){return b},eventOptions({passive:b=!0,capture:g=!1}={}){return{passive:b,capture:g}},transform(b){return b}},hE=["target",
"eventOptions","window","enabled","transform"],gz=class{constructor(b,g){Oh(this,"_listeners",new Set);this._ctrl=b;this._gestureKey=g}add(b,g,p,G,X){const la=this._listeners,pa=Vh(g,p),Ga=Hg(Hg({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),X);b.addEventListener(pa,G,Ga);const Qa=()=>{b.removeEventListener(pa,G,Ga);la.delete(Qa)};la.add(Qa);return Qa}clean(){this._listeners.forEach(b=>b());this._listeners.clear()}},iE=class{constructor(){Oh(this,"_timeouts",new Map)}add(b,
g,p=140,...G){this.remove(b);this._timeouts.set(b,window.setTimeout(g,p,...G))}remove(b){(b=this._timeouts.get(b))&&window.clearTimeout(b)}clean(){this._timeouts.forEach(b=>void window.clearTimeout(b));this._timeouts.clear()}},jE=class{constructor(b){Oh(this,"gestures",new Set);Oh(this,"_targetEventStore",new gz(this));Oh(this,"gestureEventStores",{});Oh(this,"gestureTimeoutStores",{});Oh(this,"handlers",{});Oh(this,"config",{});Oh(this,"pointerIds",new Set);Oh(this,"touchIds",new Set);Oh(this,"state",
{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});b.drag&&Oi(this,"drag");b.wheel&&Oi(this,"wheel");b.scroll&&Oi(this,"scroll");b.move&&Oi(this,"move");b.pinch&&Oi(this,"pinch");b.hover&&Oi(this,"hover")}setEventIds(b){if("touches"in b)return this.touchIds=new Set(en(b));if("pointerId"in b)return"pointerup"===b.type||"pointercancel"===b.type?this.pointerIds.delete(b.pointerId):"pointerdown"===b.type&&this.pointerIds.add(b.pointerId),this.pointerIds}applyHandlers(b,g){this.handlers=b;this.nativeHandlers=
g}applyConfig(b,g){this.config=Qg(b,g,this.config)}clean(){this._targetEventStore.clean();for(const b of this.gestures)this.gestureEventStores[b].clean(),this.gestureTimeoutStores[b].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...b){var g=this.config.shared;const p={};let G;if(g.target&&(G=g.target(),!G))return;if(g.enabled){for(const X of this.gestures){const la=this.config[X],pa=hz(p,la.eventOptions,!!G);la.enabled&&(new (Zv.get(X))(this,
b,X)).bind(pa)}g=hz(p,g.eventOptions,!!G);for(const X in this.nativeHandlers)g(X,"",la=>this.nativeHandlers[X](Hg(Hg({},this.state.shared),{},{event:la,args:b})),void 0,!0)}for(const X in p)p[X]=ij(...p[X]);if(!G)return p;for(const X in p){const {device:la,capture:pa,passive:Ga}=Ni(X);this._targetEventStore.add(G,la,"",p[X],{capture:pa,passive:Ga})}}},hz=(b,g,p)=>(G,X,la,pa={},Ga=!1)=>{var Qa,Za;const eb=null!==(Qa=pa.capture)&&void 0!==Qa?Qa:g.capture;pa=null!==(Za=pa.passive)&&void 0!==Za?Za:g.passive;
G=Ga?G:Ph(G,X,eb);p&&pa&&(G+="Passive");b[G]=b[G]||[];b[G].push(la)},HE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,lu=uf(W(22)),Xv=uf(W(22)),fz=uf(W(22)),sz=uf(W(22)),IE=uf(W(22)),JE=uf(W(22)),KE=uf(W(22)),LE=uf(W(22)),eE={none:(b,g)=>"none",["default"]:(b,g)=>"default",pointer:(b,g)=>"pointer",crosshair:(b,g)=>"crosshair",move:(b,g)=>"move",wait:(b,g)=>"wait",progress:(b,g)=>"progress",grab:(b,g)=>kj('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
b,g),grabbing:(b,g)=>kj("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
b,g),text:(b,g)=>kj("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
b,g),["resize-edge"]:(b,g)=>kj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["resize-corner"]:(b,g)=>kj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b,g),["ew-resize"]:(b,g)=>kj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["ns-resize"]:(b,g)=>kj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
b+90,g),["nesw-resize"]:(b,g)=>kj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",b,g),["nwse-resize"]:(b,g)=>kj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b+90,g),rotate:(b,g)=>kj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+45,g),["nwse-rotate"]:(b,g)=>kj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b,g),["nesw-rotate"]:(b,g)=>kj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+90,g),["senw-rotate"]:(b,g)=>kj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+180,g),["swne-rotate"]:(b,g)=>kj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+270,g)},ME=uf(W(22));uf(W(22));var tz=W(22),uz=uf(W(22));if(!W(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!Ag)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var NE=W(31),jt=uf(W(22)),vz="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,OE=1E4,PE=function(b){var g="function"===typeof Symbol&&Symbol.iterator,p=g&&b[g],G=0;if(p)return p.call(b);if(b&&"number"===typeof b.length)return{next:function(){b&&G>=
b.length&&(b=void 0);return{value:b&&b[G++],done:!b}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.");},wz=vz?um(vz):th(),QE=wz.addReactionToTrack,qE=wz.recordReactionAsCommitted,iz=function(b,g){var p="function"===typeof Symbol&&b[Symbol.iterator];if(!p)return b;b=p.call(b);var G,X=[];try{for(;(void 0===g||0<g--)&&!(G=b.next()).done;)X.push(G.value)}catch(pa){var la={error:pa}}finally{try{G&&!G.done&&(p=b["return"])&&p.call(b)}finally{if(la)throw la.error;}}return X},
uE=function(){return function(){}}(),bs=W(22),mz="function"===typeof Symbol&&Symbol.for,jz=mz?Symbol.for("react.forward_ref"):"function"===typeof bs.forwardRef&&(0,bs.forwardRef)(function(b){return null}).$$typeof,lz=mz?Symbol.for("react.memo"):"function"===typeof bs.memo&&(0,bs.memo)(function(b){return null}).$$typeof,rE={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};nk.displayName="Observer";W(22);W(22);W(22);(function(b){b||=hm;Je({reactionScheduler:b})})(NE.unstable_batchedUpdates);
var tE=uf(W(22));nb=W(588);var vo=tE.forwardRef(function(b,g){var {children:p,opacity:G,centered:X,className:la=""}=b,pa=Af(b,["children","opacity","centered","className"]);return(0,nb.jsx)(nk,{children:()=>(0,nb.jsx)("div",{ref:g,className:`tl-positioned-div ${la}`,style:G?{opacity:G}:void 0,draggable:!1,children:(0,nb.jsx)("div",lf(pe({className:`tl-positioned-inner ${X?"tl-centered":""}`},pa),{children:p}))})})}),sE=uf(W(22));nb=W(588);var uo=sE.forwardRef(function(b,g){var {id:p,className:G="",
style:X,children:la}=b,pa=Af(b,["id","className","style","children"]);return(0,nb.jsx)(nk,{children:()=>(0,nb.jsx)("svg",{ref:g,style:X,className:`tl-positioned-svg ${G}`,children:(0,nb.jsx)("g",lf(pe({id:p,className:"tl-centered-g"},pa),{children:la}))})})}),ht=uf(W(22)),kz=uf(W(22)),ku=uf(W(22));nb=W(588);var hq=ef(function(b){var {id:g,bounds:p,zIndex:G,rotation:X=0,className:la="",children:pa}=b;b=Af(b,"id bounds zIndex rotation className children".split(" "));const Ga=ku.useRef(null);ku.useLayoutEffect(()=>
{Ga.current.style.transform=`translate(
        calc(${p.minX}px - var(--tl-padding)),
        calc(${p.minY}px - var(--tl-padding)))
        rotate(${X+(p.rotation||0)}rad)`},[p.minX,p.minY,X,p.rotation]);ku.useLayoutEffect(()=>{const Qa=Ga.current;Qa.style.width=`calc(${Math.floor(p.width)}px + (var(--tl-padding) * 2))`;Qa.style.height=`calc(${Math.floor(p.height)}px + (var(--tl-padding) * 2))`},[p.width,p.height]);ku.useLayoutEffect(()=>{const Qa=Ga.current;void 0!==G&&(Qa.style.zIndex=G.toString())},[G]);return(0,nb.jsx)("div",lf(pe({id:g,ref:Ga,className:`tl-positioned ${la}`,"aria-label":"container"},b),{children:pa}))}),
RE=uf(W(22));nb=W(588);var SE=ef(function({shapes:b,hidden:g,bounds:p,rotation:G=0}){const {components:{ContextBar:X},viewport:{bounds:la,camera:{point:[pa,Ga],zoom:Qa}}}=wi(),Za=RE.useRef(null);var eb=wf.getRotatedBounds(p,G);eb=wf.multiplyBounds(eb,Qa);jj(Za,p,G,10005);if(!X)throw Error("Expected a ContextBar component.");const mb=wf.translateBounds(eb,[pa*Qa,Ga*Qa]);return(0,nb.jsx)("div",{ref:Za,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,nb.jsx)(X,{hidden:g,shapes:b,bounds:p,offsets:{left:mb.minX,right:la.width-mb.maxX,top:mb.minY,bottom:la.height-mb.maxY,width:mb.width,height:mb.height},scaledBounds:eb,rotation:G})})}),xz=uf(W(22));nb=W(588);var yz=ef(function({children:b}){const g=xz.useRef(null),{viewport:p}=wi(),G=g.current,{zoom:X,point:la}=p.camera;xz.useEffect(()=>{G&&(G.style.transform=`scale(${X}) translate3d(${la[0]}px, ${la[1]}px, 0)`)},[X,la,G]);return(0,nb.jsx)("div",{ref:g,className:"tl-absolute tl-layer",
children:b})});nb=W(588);var zz=ef(function({shape:b,isHovered:g=!1,isSelected:p=!1,isBinding:G=!1,isEditing:X=!1,isLocked:la=!1,meta:pa}){const {bounds:Ga,props:{scale:Qa,rotation:Za=0},ReactIndicator:eb}=b;return(0,nb.jsx)(hq,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:Ga,rotation:Za,scale:Qa,zIndex:X?1E3:1E4,children:(0,nb.jsx)(uo,{children:(0,nb.jsx)("g",{className:`tl-indicator-container ${p?"tl-selected":"tl-hovered"} ${la?"tl-locked":""}`,children:(0,nb.jsx)(eb,{isEditing:X,
isBinding:G,isHovered:g,isLocked:la,isSelected:p,isErasing:!1,meta:pa})})})})}),Az=uf(W(22));nb=W(588);var TE=ef(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:p}},components:{QuickLinks:G}}=wi();var X=bf();const la=im(g);if(!G)throw Error("Expected a QuickLinks component.");X=50>b.height*p||!X.selectedShapesArray.includes(g);return(0,nb.jsx)(hq,{bounds:b,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,nb.jsx)(vo,{children:(0,nb.jsx)("span",lf(pe({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},la),{onPointerDown:pa=>pa.stopPropagation(),children:(0,nb.jsx)(G,{className:"tl-backlinks-count "+(X?"tl-backlinks-count-rounded":""),id:g.id,shape:g})}))})})});nb=W(588);var UE=ef(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:p}},components:{BacklinksCount:G}}=wi();var X=bf();if(!G)throw Error("Expected a BacklinksCount component.");const la=pa=>pa.stopPropagation();
X=50>b.height*p||!X.selectedShapesArray.includes(g)||g.hideSelection;return(0,nb.jsx)(hq,{bounds:b,className:"tl-backlinks-count-container",children:(0,nb.jsx)(vo,{children:(0,nb.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:la,onWheelCapture:la,onKeyDown:la,title:"Shape Backlinks",children:(0,nb.jsx)(G,{className:"tl-backlinks-count "+(X?"tl-backlinks-count-rounded":""),id:g.id,
shape:g})})})})}),VE=uf(W(22));nb=W(588);var WE=ef(function({bounds:b,hidden:g,shapes:p,rotation:G=0,detail:X="size"}){const {components:{SelectionDetail:la},viewport:{camera:{zoom:pa}}}=wi(),Ga=VE.useRef(null),Qa=wf.multiplyBounds(b,pa);jj(Ga,b,G,10003);if(!la)throw Error("Expected a SelectionDetail component.");return(0,nb.jsx)("div",{ref:Ga,className:`tl-counter-scaled-positioned ${g?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,nb.jsx)(la,
{shapes:p,bounds:b,scaledBounds:Qa,zoom:pa,rotation:G,detail:X})})});nb=W(588);var XE=ef(function({shape:b,isHovered:g=!1,isSelected:p=!1,isBinding:G=!1,isErasing:X=!1,isEditing:la=!1,onEditingEnd:pa,asset:Ga,meta:Qa,zIndex:Za}){const {bounds:eb,props:{rotation:mb,scale:Lb},ReactComponent:Vb}=b,Pb=bf(),ec=im(b);var gc=Pb.getParentGroup(b);gc=Pb.selectedIds.has(null==gc?void 0:gc.id);return(0,nb.jsx)(hq,{"data-shape-id":b.id,"data-html2canvas-ignore":!p&&!gc&&0!==Pb.selectedShapes.size||null,zIndex:Za,
"data-type":"Shape",bounds:eb,rotation:mb,scale:Lb,children:(0,nb.jsx)(Vb,{meta:Qa,isEditing:la,isBinding:G,isHovered:g,isSelected:p,isErasing:X,events:ec,asset:Ga,onEditingEnd:pa})})});nb=W(588);var Bz=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],YE=ef(function({size:b}){const {viewport:{camera:{point:g,zoom:p}}}=wi();return(0,nb.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,nb.jsx)("defs",{children:Bz.map(([G,
X,la],pa)=>{la=la*b*p;var Ga=g[0]*p,Qa=g[1]*p;Ga=0<Ga?Ga%la:la+Ga%la;Qa=0<Qa?Qa%la:la+Qa%la;G=Rl(p,[G,X],[0,1]);return(0,nb.jsx)("pattern",{id:`grid-${pa}`,width:la,height:la,patternUnits:"userSpaceOnUse",children:!(2<G||.1>G)&&(0,nb.jsx)("circle",{className:"tl-grid-dot",cx:Ga,cy:Qa,r:1.5,opacity:Math.max(0,Math.min(G,1))})},`grid-pattern-${pa}`)})}),Bz.map((G,X)=>(0,nb.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${X})`},`grid-rect-${X}`))]})}),Cz=ef(function({size:b}){return(0,nb.jsx)(YE,
{size:b})});nb=W(588);var Dz=ef(function({bounds:b}){const g=Kj("background");return(0,nb.jsx)(uo,lf(pe({"data-html2canvas-ignore":"true"},g),{children:(0,nb.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,b.width),height:Math.max(1,b.height),pointerEvents:"all",rx:8,ry:8})}))});W(22);nb=W(588);var Ez=ef(function({scaledBounds:b,shapes:g,detail:p="size",rotation:G=0}){var X;const la=1===g.length?G:null!=(X=b.rotation)?X:0;return(0,nb.jsx)(vo,{centered:!0,children:(0,nb.jsx)("div",{className:"tl-bounds-detail",
style:{transform:la<mo||la>3*mo?`rotate(${la}rad) translateY(${b.height/2+24}px)`:`rotate(${Math.PI+la}rad) translateY(${b.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===g.length&&"line"===g[0].type?`${ne.dist(g[0].props.handles.start.point,g[0].props.handles.end.point).toFixed()}`:"size"===p?`${b.width.toFixed()} \xD7 ${b.height.toFixed()}`:`\u2220${zm.radiansToDegrees(zm.clampRadians(G)).toFixed()}\xB0`})})});nb=W(588);var ZE={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},mu=ef(function({cx:b,cy:g,size:p,targetSize:G,corner:X,isHidden:la}){const pa=Kj(X);return(0,nb.jsxs)("g",lf(pe({opacity:la?0:1},pa),{children:[(0,nb.jsx)("rect",{className:"tl-transparent "+(la?"":ZE[X]),"aria-label":`${X} target`,x:b-1.25*G,y:g-1.25*G,width:2.5*G,height:2.5*G,pointerEvents:la?"none":"all"}),(0,nb.jsx)("rect",{className:"tl-corner-handle","aria-label":`${X} handle`,x:b-p/2,y:g-p/2,width:p,height:p,pointerEvents:"none"})]}))});
nb=W(588);var $E={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},nu=ef(function({x:b,y:g,width:p,height:G,targetSize:X,edge:la,disabled:pa,isHidden:Ga}){const Qa=Kj(la);return(0,nb.jsx)("rect",pe({pointerEvents:Ga||pa?"none":"all",className:"tl-transparent tl-edge-handle "+(Ga?"":$E[la]),"aria-label":`${la} target`,opacity:Ga?0:1,x:b-X,y:g-X,width:Math.max(1,p+2*X),height:Math.max(1,G+2*X)},Qa))});W(22);nb=W(588);ef(function({cx:b,cy:g,size:p,
targetSize:G,isHidden:X}){const la=Kj("rotate");return(0,nb.jsxs)("g",lf(pe({opacity:X?0:1},la),{children:[(0,nb.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:b,cy:g,r:G,pointerEvents:X?"none":"all"}),(0,nb.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:b,cy:g,r:p/2,pointerEvents:"none"})]}))});W(22);nb=W(588);var ou=ef(function({cx:b,cy:g,targetSize:p,corner:G,isHidden:X}){const la=Kj(G);return(0,nb.jsx)("g",lf(pe({opacity:X?0:1},la),{children:(0,nb.jsx)("rect",
{className:"tl-transparent","aria-label":`${G} target`,x:b-2.5*p,y:g-2.5*p,width:3*p,height:3*p,pointerEvents:X?"none":"all"})}))});nb=W(588);var Fz=ef(function({bounds:b,showResizeHandles:g,showRotateHandles:p,shapes:G}){var X,la;const pa=bf();let {width:Ga,height:Qa}=b;var Za=pa.viewport.camera.zoom;b=8/Za;Za=6/Za;const eb=1===G.length?G[0].canResize:[!0,!0],mb=null!=(la=null==(X=pa.editingShape)?void 0:X.props.borderRadius)?la:0;return(0,nb.jsx)(nb.Fragment,{children:0<G.length&&(0,nb.jsxs)(uo,
{children:[!pa.editingShape&&(0,nb.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ga,1),height:Math.max(Qa,1),rx:mb,ry:mb,pointerEvents:"none"}),(0,nb.jsx)(nu,{x:2*Za,y:0,width:Ga-4*Za,height:0,targetSize:Za,edge:"top_edge",disabled:!eb[1],isHidden:!g}),(0,nb.jsx)(nu,{x:Ga,y:2*Za,width:0,height:Qa-4*Za,targetSize:Za,edge:"right_edge",disabled:!eb[0],isHidden:!g}),(0,nb.jsx)(nu,{x:2*Za,y:Qa,width:Ga-4*Za,height:0,targetSize:Za,edge:"bottom_edge",disabled:!eb[1],isHidden:!g}),(0,nb.jsx)(nu,{x:0,
y:2*Za,width:0,height:Qa-4*Za,targetSize:Za,edge:"left_edge",disabled:!eb[0],isHidden:!g}),(0,nb.jsx)(ou,{cx:0,cy:0,targetSize:Za,corner:"top_left_resize_corner",isHidden:!p}),(0,nb.jsx)(ou,{cx:Ga+2*Za,cy:0,targetSize:Za,corner:"top_right_resize_corner",isHidden:!p}),(0,nb.jsx)(ou,{cx:Ga+2*Za,cy:Qa+2*Za,targetSize:Za,corner:"bottom_right_resize_corner",isHidden:!p}),(0,nb.jsx)(ou,{cx:0,cy:Qa+2*Za,targetSize:Za,corner:"bottom_left_resize_corner",isHidden:!p}),(null==eb?void 0:eb.every(Lb=>Lb))&&(0,nb.jsxs)(nb.Fragment,
{children:[(0,nb.jsx)(mu,{cx:0,cy:0,size:b,targetSize:Za,corner:"top_left_corner",isHidden:!g}),(0,nb.jsx)(mu,{cx:Ga,cy:0,size:b,targetSize:Za,corner:"top_right_corner",isHidden:!g}),(0,nb.jsx)(mu,{cx:Ga,cy:Qa,size:b,targetSize:Za,corner:"bottom_right_corner",isHidden:!g}),(0,nb.jsx)(mu,{cx:0,cy:Qa,size:b,targetSize:Za,corner:"bottom_left_corner",isHidden:!g})]})]})})});nb=W(588);var Gz=ef(function({bounds:b}){return(0,nb.jsx)(hq,{bounds:b,zIndex:10001,children:(0,nb.jsx)(uo,{children:(0,nb.jsx)("rect",
{className:"tl-brush",x:0,y:0,width:b.width,height:b.height})})})});nb=W(588);ef(function(){return(0,nb.jsx)(nb.Fragment,{})});nb=W(588);var Hz=ef(function({shape:b,handle:g,id:p}){b=Km(b,p);const [G,X]=g.point;return(0,nb.jsxs)("g",lf(pe({className:"tl-handle","aria-label":"handle"},b),{transform:`translate(${G}, ${X})`,children:[(0,nb.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,nb.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),Iz=uf(W(22));
nb=W(588);var bw=ef(function({direction:b}){const {viewport:{bounds:g}}=wi(),p=Iz.useRef(null);Iz.useLayoutEffect(()=>{const G=p.current;if(G){var X=[g.width/2,g.height/2],la=wf.getRectangleSides([12,12],[g.width-24,g.height-24]);for(const [,[pa,Ga]]of la)la=w(X,b,pa,Ga),la.didIntersect&&(la=la.points[0],G.style.transform=`translate(${la[0]-6}px,${la[1]-6}px) rotate(${ne.toAngle(b)}rad)`)}},[b,g]);return(0,nb.jsx)("div",{ref:p,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,nb.jsx)("svg",
{height:12,width:12,children:(0,nb.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});nb=W(588);var aF=ef(function({id:b,className:g,brush:p,shapes:G,assets:X,bindingShapes:la,editingShape:pa,hoveredShape:Ga,hoveredGroup:Qa,selectionBounds:Za,selectedShapes:eb,erasingShapes:mb,selectionDirectionHint:Lb,cursor:Vb="default",cursorRotation:Pb=0,selectionRotation:ec=0,showSelection:gc=!0,showHandles:Tb=!0,showSelectionRotation:nc=!1,showResizeHandles:oc=!0,showRotateHandles:Ec=!0,showSelectionDetail:Sc=!0,
showContextBar:vd=!0,showGrid:Wd=!0,gridSize:he=8,onEditingEnd:De=VD,theme:Ye=Br,children:jf}){var Ne;const Ae=ht.useRef(null),{viewport:Ad,components:ad,meta:ed}=wi(),ld=bf(),$d=ht.useCallback(qf=>{ld.inputs.updateContainerOffset([qf.minX,qf.minY])},[]);kk(Ye,b);El(Ae);Dl(Ae,Ad,$d);Ok(Ae);bk();Lm(Ae,Vb,Pb);gm(Ae);Gk(Ae);b=vg();const Oe=(Vb=1===(null==eb?void 0:eb.length)&&eb[0])&&"handles"in Vb.props?null==eb?void 0:eb[0]:void 0,mf=ht.useMemo(()=>new Set(eb||[]),[eb]),Sf=ht.useMemo(()=>new Set(mb||
[]),[mb]);Vb=1===(null==eb?void 0:eb.length)?eb[0]:void 0;Qa=[...(new Set([Qa,Ga]))].filter(ui);return(0,nb.jsxs)("div",{ref:Ae,className:`tl-container ${null!=g?g:""}`,children:[(0,nb.jsxs)("div",lf(pe({tabIndex:-1,className:"tl-absolute tl-canvas"},b),{children:[Wd&&ad.Grid&&(0,nb.jsx)(ad.Grid,{size:he}),(0,nb.jsxs)(yz,{children:[ad.SelectionBackground&&eb&&Za&&gc&&(0,nb.jsx)(hq,{"data-type":"SelectionBackground",bounds:Za,zIndex:2,"data-html2canvas-ignore":"true",children:(0,nb.jsx)(ad.SelectionBackground,
{shapes:eb,bounds:Za,showResizeHandles:oc,showRotateHandles:Ec})}),G&&G.map((qf,Gf)=>(0,nb.jsx)(XE,{shape:qf,asset:X&&qf.props.assetId?X[qf.props.assetId]:void 0,isEditing:qf===pa,isHovered:qf===Ga,isBinding:null==la?void 0:la.includes(qf),isSelected:mf.has(qf),isErasing:Sf.has(qf),meta:ed,zIndex:1E3+Gf,onEditingEnd:De},"shape_"+qf.id)),!ld.isIn("select.pinching")&&(null==eb?void 0:eb.map(qf=>(0,nb.jsx)(zz,{shape:qf,isEditing:qf===pa,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:qf.props.isLocked},
"selected_indicator_"+qf.id))),Qa.map(qf=>qf!==pa&&(0,nb.jsx)(zz,{shape:qf},"hovered_indicator_"+qf.id)),Vb&&ad.BacklinksCount&&(0,nb.jsx)(UE,{hidden:!1,bounds:Vb.bounds,shape:Vb}),Ga&&Ga!==Vb&&ad.QuickLinks&&(0,nb.jsx)(TE,{hidden:!1,bounds:Ga.bounds,shape:Ga}),p&&ad.Brush&&(0,nb.jsx)(ad.Brush,{bounds:p}),eb&&Za&&(0,nb.jsxs)(nb.Fragment,{children:[gc&&ad.SelectionForeground&&(0,nb.jsx)(hq,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:Za,zIndex:pa&&eb.includes(pa)?1002:
10002,children:(0,nb.jsx)(ad.SelectionForeground,{shapes:eb.filter(qf=>!qf.props.isLocked),bounds:Za,showResizeHandles:oc,showRotateHandles:Ec})}),Tb&&Oe&&ad.Handle&&(0,nb.jsx)(hq,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:Za,zIndex:10003,children:(0,nb.jsx)(uo,{children:Object.entries(null!=(Ne=Oe.props.handles)?Ne:{}).map(([qf,Gf])=>ht.createElement(ad.Handle,{key:`${Gf.id}_handle_${Gf.id}`,shape:Oe,handle:Gf,id:qf}))})}),eb&&ad.SelectionDetail&&(0,nb.jsx)(WE,
{"data-html2canvas-ignore":"true",shapes:eb,bounds:Za,detail:nc?"rotation":"size",hidden:!Sc,rotation:ec},"detail"+eb.map(qf=>qf.id).join(""))]})]}),Lb&&Za&&eb&&(0,nb.jsx)(bw,{direction:Lb,bounds:Za,shapes:eb}),(0,nb.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,nb.jsx)(yz,{children:eb&&Za&&(0,nb.jsx)(nb.Fragment,{children:eb&&ad.ContextBar&&(0,nb.jsx)(SE,{shapes:eb.filter(qf=>!qf.props.isLocked),hidden:!vd,bounds:Vb?Vb.bounds:Za,rotation:Vb?Vb.props.rotation:
0},"context"+eb.map(qf=>qf.id).join(""))})}),jf]})}),Jz=uf(W(22)),Kz=uf(W(22));nb=W(588);ef(function({children:b}){const g=Kz.useRef(null),{viewport:p}=wi();Kz.useEffect(()=>Md(()=>{const G=g.current;if(G){var {zoom:X,point:la}=p.camera;G.style.transform=`scale(${X}) translateX(${la[0]}px) translateY(${la[1]}px)`}}),[]);return(0,nb.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,nb.jsx)("g",{ref:g,pointerEvents:"none",children:b})})});nb=W(588);var bF=ef(function(b){const g=
un(b),p=Ak(b.id);Pk(g,b);zj(g,b);return(0,nb.jsx)(p.Provider,{value:g,children:b.children})});nb=W(588);var cF=ef(function({id:b="noid",viewport:g,inputs:p,callbacks:G=Br,meta:X=Br,components:la=Br,children:pa}){const [Ga,Qa]=Jz.useState(()=>{const {Brush:eb,ContextBar:mb,DirectionIndicator:Lb,Grid:Vb,Handle:Pb,SelectionBackground:ec,SelectionDetail:gc,SelectionForeground:Tb}=la,nc=Af(la,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));
return{id:b,viewport:g,inputs:p,callbacks:G,meta:X,components:lf(pe({},nc),{Brush:null===eb?void 0:Gz,ContextBar:mb,DirectionIndicator:null===Lb?void 0:bw,Grid:null===Vb?void 0:Cz,Handle:null===Pb?void 0:Hz,SelectionBackground:null===ec?void 0:Dz,SelectionDetail:null===gc?void 0:Ez,SelectionForeground:null===Tb?void 0:Fz})}});Jz.useLayoutEffect(()=>{const {Brush:eb,ContextBar:mb,DirectionIndicator:Lb,Grid:Vb,Handle:Pb,SelectionBackground:ec,SelectionDetail:gc,SelectionForeground:Tb}=la,nc=Af(la,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));
return Md(()=>{Qa({id:b,viewport:g,inputs:p,callbacks:G,meta:X,components:lf(pe({},nc),{Brush:null===eb?void 0:Gz,ContextBar:mb,DirectionIndicator:null===Lb?void 0:bw,Grid:null===Vb?void 0:Cz,Handle:null===Pb?void 0:Hz,SelectionBackground:null===ec?void 0:Dz,SelectionDetail:null===gc?void 0:Ez,SelectionForeground:null===Tb?void 0:Fz})})})},[]);const Za=tm(b);return(0,nb.jsx)(Za.Provider,{value:Ga,children:pa})});nb=W(588);nb=W(588);var dF=ef(function(b){const g=bf();return(0,nb.jsx)(qg,pe({viewport:g.viewport,
inputs:g.inputs,callbacks:g._events,brush:g.brush,editingShape:g.editingShape,hoveredShape:g.hoveredShape,hoveredGroup:g.hoveredGroup,bindingShapes:g.bindingShapes,selectionDirectionHint:g.selectionDirectionHint,selectionBounds:g.selectionBounds,selectedShapes:g.selectedShapesArray,erasingShapes:g.erasingShapesArray,shapes:g.shapes,assets:g.assets,showGrid:g.settings.showGrid,showSelection:g.showSelection,showSelectionRotation:g.showSelectionRotation,showResizeHandles:g.showResizeHandles,showRotateHandles:g.showRotateHandles,
showSelectionDetail:g.showSelectionDetail,showContextBar:g.showContextBar,cursor:g.cursors.cursor,cursorRotation:g.cursors.rotation,selectionRotation:g.selectionRotation,onEditingEnd:g.clearEditingState},b))});nb=W(588);var cs=uf(W(22)),pu=uf(W(22));nb=W(588);var eF="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),
Bh=b=>{var {name:g,className:p}=b;b=Af(b,["name","className"]);const G=eF.includes(g)?"tie tie-":"ti ti-";return(0,nb.jsx)("i",pe({className:[G+g,p].join(" ")},b))},fh=W(22),fF=W(22),hr=W(22),Ln=W(22),cw=W(22),gF=W(31),$m=W(22),fp=(0,$m.forwardRef)((b,g)=>{var {children:p}=b;b=Af(b,["children"]);const G=$m.Children.toArray(p),X=G.find(rg);if(X){const la=X.props.children;p=G.map(pa=>pa===X?1<$m.Children.count(la)?$m.Children.only(null):(0,$m.isValidElement)(la)?la.props.children:null:pa);return(0,$m.createElement)(dw,
ff({},b,{ref:g}),(0,$m.isValidElement)(la)?(0,$m.cloneElement)(la,void 0,p):null)}return(0,$m.createElement)(dw,ff({},b,{ref:g}),p)});fp.displayName="Slot";var dw=(0,$m.forwardRef)((b,g)=>{const {children:p}=b;b=Af(b,["children"]);return(0,$m.isValidElement)(p)?(0,$m.cloneElement)(p,lf(pe({},mj(b,p.props)),{ref:Hk(g,p.ref)})):1<$m.Children.count(p)?$m.Children.only(null):null});dw.displayName="SlotClone";var Lz=({children:b})=>(0,$m.createElement)($m.Fragment,null,b),kl="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,
g)=>{const p=(0,cw.forwardRef)((G,X)=>{var {asChild:la}=G;G=Af(G,["asChild"]);la=la?fp:g;(0,cw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,cw.createElement)(la,ff({},G,{ref:X}))});p.displayName=`Primitive.${g}`;return lf(pe({},b),{[g]:p})},{}),ew=W(22),hF=W(22),Mz,iF=(0,Ln.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fw=(0,Ln.forwardRef)((b,g)=>{var p;const {disableOutsidePointerEvents:G=!1,onEscapeKeyDown:X,onPointerDownOutside:la,
onFocusOutside:pa,onInteractOutside:Ga,onDismiss:Qa}=b,Za=Af(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),eb=(0,Ln.useContext)(iF),[mb,Lb]=(0,Ln.useState)(null),Vb=null!==(p=null===mb||void 0===mb?void 0:mb.ownerDocument)&&void 0!==p?p:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Pb]=(0,Ln.useState)({});g=Cf(g,oc=>Lb(oc));p=Array.from(eb.layers);var [ec]=[...eb.layersWithOutsidePointerEventsDisabled].slice(-1);
ec=p.indexOf(ec);const gc=mb?p.indexOf(mb):-1;p=0<eb.layersWithOutsidePointerEventsDisabled.size;const Tb=gc>=ec;ec=Sj(oc=>{const Ec=oc.target,Sc=[...eb.branches].some(vd=>vd.contains(Ec));Tb&&!Sc&&(null===la||void 0===la||la(oc),null===Ga||void 0===Ga||Ga(oc),oc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Vb);const nc=Tl(oc=>{const Ec=oc.target;[...eb.branches].some(Sc=>Sc.contains(Ec))||(null===pa||void 0===pa||pa(oc),null===Ga||void 0===Ga||Ga(oc),oc.defaultPrevented||null===Qa||void 0===
Qa||Qa())},Vb);ok(oc=>{gc===eb.layers.size-1&&(null===X||void 0===X||X(oc),!oc.defaultPrevented&&Qa&&(oc.preventDefault(),Qa()))},Vb);(0,Ln.useEffect)(()=>{if(mb)return G&&(0===eb.layersWithOutsidePointerEventsDisabled.size&&(Mz=Vb.body.style.pointerEvents,Vb.body.style.pointerEvents="none"),eb.layersWithOutsidePointerEventsDisabled.add(mb)),eb.layers.add(mb),Nk(),()=>{G&&1===eb.layersWithOutsidePointerEventsDisabled.size&&(Vb.body.style.pointerEvents=Mz)}},[mb,Vb,G,eb]);(0,Ln.useEffect)(()=>()=>
{mb&&(eb.layers.delete(mb),eb.layersWithOutsidePointerEventsDisabled.delete(mb),Nk())},[mb,eb]);(0,Ln.useEffect)(()=>{const oc=()=>Pb({});document.addEventListener("dismissableLayer.update",oc);return()=>document.removeEventListener("dismissableLayer.update",oc)},[]);return(0,Ln.createElement)(kl.div,ff({},Za,{ref:g,style:pe({pointerEvents:p?Tb?"auto":"none":void 0},b.style),onFocusCapture:If(b.onFocusCapture,nc.onFocusCapture),onBlurCapture:If(b.onBlurCapture,nc.onBlurCapture),onPointerDownCapture:If(b.onPointerDownCapture,
ec.onPointerDownCapture)}))}),Nz=uf(W(22)),jF=W(22),Pm=(null===globalThis||void 0===globalThis?0:globalThis.document)?jF.useLayoutEffect:()=>{},kF=Nz["useId".toString()]||(()=>{}),Oz=0,am=W(22),Pz=(b,g,p)=>ai(void 0,null,function*(){const {placement:G="bottom",strategy:X="absolute",middleware:la=[],platform:pa}=p,Ga=yield null==pa.isRTL?void 0:pa.isRTL(g);let Qa=yield pa.getElementRects({reference:b,floating:g,strategy:X}),{x:Za,y:eb}=vl(Qa,G,Ga),mb=G,Lb={},Vb=0;for(let Pb=0;Pb<la.length;Pb++){const {name:ec,
fn:gc}=la[Pb],{x:Tb,y:nc,data:oc,reset:Ec}=yield gc({x:Za,y:eb,initialPlacement:G,placement:mb,strategy:X,middlewareData:Lb,rects:Qa,platform:pa,elements:{reference:b,floating:g}});Za=null!=Tb?Tb:Za;eb=null!=nc?nc:eb;Lb=lf(pe({},Lb),{[ec]:pe(pe({},Lb[ec]),oc)});Ec&&50>=Vb&&(Vb++,"object"==typeof Ec&&(Ec.placement&&(mb=Ec.placement),Ec.rects&&(Qa=!0===Ec.rects?yield pa.getElementRects({reference:b,floating:g,strategy:X}):Ec.rects),{x:Za,y:eb}=vl(Qa,mb,Ga)),Pb=-1)}return{x:Za,y:eb,placement:mb,strategy:X,
middlewareData:Lb}}),gw=Math.min,Ap=Math.max,Qz=b=>({name:"arrow",options:b,fn(g){return ai(this,null,function*(){const {element:p,padding:G=0}=null!=b?b:{},{x:X,y:la,placement:pa,rects:Ga,platform:Qa}=g;if(null==p)return{};const Za=fn(G),eb={x:X,y:la},mb=Fk(pa),Lb=pa.split("-")[1],Vb=pk(mb);var Pb=yield Qa.getDimensions(p);const ec="y"===mb?"top":"left",gc="y"===mb?"bottom":"right";var Tb=Ga.reference[Vb]+Ga.reference[mb]-eb[mb]-Ga.floating[Vb];const nc=eb[mb]-Ga.reference[mb];var oc=yield null==
Qa.getOffsetParent?void 0:Qa.getOffsetParent(p);let Ec=oc?"y"===mb?oc.clientHeight||0:oc.clientWidth||0:0;0===Ec&&(Ec=Ga.floating[Vb]);oc=Za[ec];const Sc=Ec-Pb[Vb]-Za[gc];Pb=Ec/2-Pb[Vb]/2+(Tb/2-nc/2);Tb=Ap(oc,gw(Pb,Sc));return{[mb]:eb[mb]-(0<("start"===Lb?Za[ec]:Za[gc])&&Pb!==Tb&&Ga.reference[Vb]<=Ga.floating[Vb]?Pb<oc?oc-Pb:Sc-Pb:0),data:{[mb]:Tb,centerOffset:Pb-Tb}}})}}),lF={left:"right",right:"left",bottom:"top",top:"bottom"},mF={start:"end",end:"start"},Rz=["top","right","bottom","left"];Rz.reduce((b,
g)=>b.concat(g,g+"-start",g+"-end"),[]);var Sz=function(b){return void 0===b&&(b={}),{name:"flip",options:b,fn(g){return ai(this,null,function*(){var p;const {placement:G,middlewareData:X,rects:la,initialPlacement:pa,platform:Ga,elements:Qa}=g;var Za=b;const {mainAxis:eb=!0,crossAxis:mb=!0,fallbackPlacements:Lb,fallbackStrategy:Vb="bestFit",flipAlignment:Pb=!0}=Za;Za=Af(Za,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const ec=Xi(G);var gc=Lb||(ec!==pa&&Pb?function(vd){const Wd=
wm(vd);return[Vj(vd),Wd,Vj(Wd)]}(pa):[wm(pa)]);gc=[pa,...gc];const Tb=yield sl(g,Za),nc=[];Za=(null==(p=X.flip)?void 0:p.overflows)||[];if(eb&&nc.push(Tb[ec]),mb){const {main:vd,cross:Wd}=ul(G,la,yield null==Ga.isRTL?void 0:Ga.isRTL(Qa.floating));nc.push(Tb[vd],Tb[Wd])}if(Za=[...Za,{placement:G,overflows:nc}],!nc.every(vd=>0>=vd)){var oc,Ec;p=(null!=(oc=null==(Ec=X.flip)?void 0:Ec.index)?oc:0)+1;if(oc=gc[p])return{data:{index:p,overflows:Za},reset:{placement:oc}};oc="bottom";switch(Vb){case "bestFit":var Sc;
(Ec=null==(Sc=Za.map(vd=>[vd,vd.overflows.filter(Wd=>0<Wd).reduce((Wd,he)=>Wd+he,0)]).sort((vd,Wd)=>vd[1]-Wd[1])[0])?void 0:Sc[0].placement)&&(oc=Ec);break;case "initialPlacement":oc=pa}if(G!==oc)return{reset:{placement:oc}}}return{}})}}},Tz=function(b){b=void 0===b?{}:b;let {strategy:g="referenceHidden"}=b,p=Af(b,["strategy"]);return{name:"hide",fn(G){return ai(this,null,function*(){var {rects:X}=G;switch(g){case "referenceHidden":return X=Rk(yield sl(G,lf(pe({},p),{elementContext:"reference"})),
X.reference),{data:{referenceHiddenOffsets:X,referenceHidden:qk(X)}};case "escaped":return X=Rk(yield sl(G,lf(pe({},p),{altBoundary:!0})),X.floating),{data:{escapedOffsets:X,escaped:qk(X)}};default:return{}}})}}},Uz=function(b){return void 0===b&&(b=0),{name:"offset",options:b,fn(g){return ai(this,null,function*(){const {x:p,y:G}=g,X=yield function(la,pa){return ai(this,null,function*(){const {placement:Ga,platform:Qa,elements:Za}=la;var eb=yield null==Qa.isRTL?void 0:Qa.isRTL(Za.floating),mb=Xi(Ga);
const Lb=Ga.split("-")[1],Vb="x"===Fk(Ga);mb=["left","top"].includes(mb)?-1:1;eb=eb&&Vb?-1:1;const Pb="function"==typeof pa?pa(la):pa;let {mainAxis:ec,crossAxis:gc,alignmentAxis:Tb}="number"==typeof Pb?{mainAxis:Pb,crossAxis:0,alignmentAxis:null}:pe({mainAxis:0,crossAxis:0,alignmentAxis:null},Pb);return Lb&&"number"==typeof Tb&&(gc="end"===Lb?-1*Tb:Tb),Vb?{x:gc*eb,y:ec*mb}:{x:ec*mb,y:gc*eb}})}(g,b);return{x:p+X.x,y:G+X.y,data:X}})}}},Vz=function(b){return void 0===b&&(b={}),{name:"shift",options:b,
fn(g){return ai(this,null,function*(){const {x:p,y:G,placement:X}=g;var la=b;const {mainAxis:pa=!0,crossAxis:Ga=!1,limiter:Qa={fn:Vb=>{let {x:Pb,y:ec}=Vb;return{x:Pb,y:ec}}}}=la;var Za=Af(la,["mainAxis","crossAxis","limiter"]);la={x:p,y:G};Za=yield sl(g,Za);const eb=Fk(Xi(X)),mb="x"===eb?"y":"x";let Lb=la[eb];la=la[mb];pa&&(Lb=Ap(Lb+Za["y"===eb?"top":"left"],gw(Lb,Lb-Za["y"===eb?"bottom":"right"])));Ga&&(la=Ap(la+Za["y"===mb?"top":"left"],gw(la,la-Za["y"===mb?"bottom":"right"])));la=Qa.fn(lf(pe({},
g),{[eb]:Lb,[mb]:la}));return lf(pe({},la),{data:{x:la.x-p,y:la.y-G}})})}}},Wz=function(b){return void 0===b&&(b={}),{options:b,fn(g){const {x:p,y:G,placement:X,rects:la,middlewareData:pa}=g,{offset:Ga=0,mainAxis:Qa=!0,crossAxis:Za=!0}=b;var eb={x:p,y:G};g=Fk(X);const mb="x"===g?"y":"x";let Lb=eb[g];eb=eb[mb];var Vb="function"==typeof Ga?Ga(lf(pe({},la),{placement:X})):Ga;Vb="number"==typeof Vb?{mainAxis:Vb,crossAxis:0}:pe({mainAxis:0,crossAxis:0},Vb);if(Qa){var Pb="y"===g?"height":"width",ec=la.reference[g]-
la.floating[Pb]+Vb.mainAxis;Pb=la.reference[g]+la.reference[Pb]-Vb.mainAxis;Lb<ec?Lb=ec:Lb>Pb&&(Lb=Pb)}if(Za){var gc,Tb,nc,oc;const Ec="y"===g?"width":"height";ec=["top","left"].includes(Xi(X));Pb=la.reference[mb]-la.floating[Ec]+(ec&&null!=(gc=null==(Tb=pa.offset)?void 0:Tb[mb])?gc:0)+(ec?0:Vb.crossAxis);gc=la.reference[mb]+la.reference[Ec]+(ec?0:null!=(nc=null==(oc=pa.offset)?void 0:oc[mb])?nc:0)-(ec?Vb.crossAxis:0);eb<Pb?eb=Pb:eb>gc&&(eb=gc)}return{[g]:Lb,[mb]:eb}}}},nF=function(b){return void 0===
b&&(b={}),{name:"size",options:b,fn(g){return ai(this,null,function*(){const {placement:p,rects:G,platform:X,elements:la}=g;var pa=b,{apply:Ga}=pa;pa=Af(pa,["apply"]);pa=yield sl(g,pa);var Qa=Xi(p),Za=p.split("-")[1],eb,mb;"top"===Qa||"bottom"===Qa?(eb=Qa,mb=Za===((yield null==X.isRTL?void 0:X.isRTL(la.floating))?"start":"end")?"left":"right"):(mb=Qa,eb="end"===Za?"top":"bottom");Qa=Ap(pa.left,0);Za=Ap(pa.right,0);const Lb=Ap(pa.top,0),Vb=Ap(pa.bottom,0);mb={availableHeight:G.floating.height-(["left",
"right"].includes(p)?2*(0!==Lb||0!==Vb?Lb+Vb:Ap(pa.top,pa.bottom)):pa[eb]),availableWidth:G.floating.width-(["top","bottom"].includes(p)?2*(0!==Qa||0!==Za?Qa+Za:Ap(pa.left,pa.right)):pa[mb])};eb=yield X.getDimensions(la.floating);null==Ga||Ga(pe(pe({},g),mb));Ga=yield X.getDimensions(la.floating);return eb.width!==Ga.width||eb.height!==Ga.height?{reset:{rects:!0}}:{}})}}},Xz=Math.min,kt=Math.max,qu=Math.round,oF={getClippingRect:function(b){let {element:g,boundary:p,rootBoundary:G,strategy:X}=b;b=
[...("clippingAncestors"===p?ik(g):[].concat(p)),G];b=b.reduce((la,pa)=>{pa=Jg(g,pa,X);return la.top=kt(pa.top,la.top),la.right=Xz(pa.right,la.right),la.bottom=Xz(pa.bottom,la.bottom),la.left=kt(pa.left,la.left),la},Jg(g,b[0],X));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(b){let {rect:g,offsetParent:p,strategy:G}=b;var X=Mj(p);const la=xl(p);if(p===la)return g;b={scrollLeft:0,scrollTop:0};var pa=0,Ga=0;(X||!X&&
"fixed"!==G)&&(("body"!==Dj(p)||jm(la))&&(b=dk(p)),Mj(p))&&(X=uj(p,!0),pa=X.x+p.clientLeft,Ga=X.y+p.clientTop);return lf(pe({},g),{x:g.x-b.scrollLeft+pa,y:g.y-b.scrollTop+Ga})},isElement:Cj,getDimensions:zk,getOffsetParent:sk,getDocumentElement:xl,getElementRects:b=>{let {reference:g,floating:p,strategy:G}=b;b=sk(p);var X=Mj(b);const la=xl(b);var pa;if(pa=X)pa=uj(b),pa=qu(pa.width)!==b.offsetWidth||qu(pa.height)!==b.offsetHeight;pa=uj(g,pa,"fixed"===G);let Ga={scrollLeft:0,scrollTop:0};var Qa=0,Za=
0;if(X||!X&&"fixed"!==G)(("body"!==Dj(b)||jm(la))&&(Ga=dk(b)),Mj(b))?(X=uj(b,!0),Qa=X.x+b.clientLeft,Za=X.y+b.clientTop):la&&(Qa=rk(la));return{reference:{x:pa.left+Ga.scrollLeft-Qa,y:pa.top+Ga.scrollTop-Za,width:pa.width,height:pa.height},floating:lf(pe({},zk(p)),{x:0,y:0})}},getClientRects:b=>Array.from(b.getClientRects()),isRTL:b=>"rtl"===Tk(b).direction},pF=(b,g,p)=>Pz(b,g,pe({platform:oF},p)),fo=uf(W(22),1),Yz=W(22),qF=uf(W(31),1),hw="undefined"!==typeof document?Yz.useLayoutEffect:Yz.useEffect,
Zz=b=>{const {element:g,padding:p}=b;return{name:"arrow",options:b,fn(G){if(Object.prototype.hasOwnProperty.call(g,"current")){if(null!=g.current)return Qz({element:g.current,padding:p}).fn(G)}else if(g)return Qz({element:g,padding:p}).fn(G);return{}}}},iw=W(22),rF=(0,iw.forwardRef)((b,g)=>{const {children:p,width:G=10,height:X=5}=b,la=Af(b,["children","width","height"]);return(0,iw.createElement)(kl.svg,ff({},la,{ref:g,width:G,height:X,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),b.asChild?p:
(0,iw.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),sF=W(22),[jw,ds]=Aj("Popper"),[tF,$z]=jw("Popper"),kw=(0,am.forwardRef)((b,g)=>{const {__scopePopper:p,virtualRef:G}=b;b=Af(b,["__scopePopper","virtualRef"]);const X=$z("PopperAnchor",p),la=(0,am.useRef)(null);g=Cf(g,la);(0,am.useEffect)(()=>{X.onAnchorChange((null===G||void 0===G?void 0:G.current)||la.current)});return G?null:(0,am.createElement)(kl.div,ff({},b,{ref:g}))}),[uF,vF]=jw("PopperContent"),[wF,xF]=jw("PopperContent",{hasParent:!1,
positionUpdateFns:new Set}),lw=(0,am.forwardRef)((b,g)=>{var p,G,X,la,pa,Ga,Qa,Za;const {__scopePopper:eb,side:mb="bottom",sideOffset:Lb=0,align:Vb="center",alignOffset:Pb=0,arrowPadding:ec=0,collisionBoundary:gc=[],collisionPadding:Tb=0,sticky:nc="partial",hideWhenDetached:oc=!1,avoidCollisions:Ec=!0}=b;b=Af(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Sc=$z("PopperContent",eb),[vd,Wd]=
(0,am.useState)(null);g=Cf(g,nl=>Wd(nl));const [he,De]=(0,am.useState)(null);var Ye=Wf(he),jf=null!==(p=null===Ye||void 0===Ye?void 0:Ye.width)&&void 0!==p?p:0;p=null!==(G=null===Ye||void 0===Ye?void 0:Ye.height)&&void 0!==G?G:0;G=mb+("center"!==Vb?"-"+Vb:"");Ye="number"===typeof Tb?Tb:pe({top:0,right:0,bottom:0,left:0},Tb);const Ne=Array.isArray(gc)?gc:[gc],Ae=0<Ne.length;Ye={padding:Ye,boundary:Ne.filter(Ej),altBoundary:Ae};const {reference:Ad,floating:ad,strategy:ed,x:ld,y:$d,placement:Oe,middlewareData:mf,
update:Sf}=Zi({strategy:"fixed",placement:G,whileElementsMounted:Mh,middleware:[Uz({mainAxis:Lb+p,alignmentAxis:Pb}),Ec?Vz(pe({mainAxis:!0,crossAxis:!1,limiter:"partial"===nc?Wz():void 0},Ye)):void 0,he?Zz({element:he,padding:ec}):void 0,Ec?Sz(pe({},Ye)):void 0,zF({arrowWidth:jf,arrowHeight:p}),oc?Tz({strategy:"referenceHidden"}):void 0].filter(Mg)});Pm(()=>{Ad(Sc.anchor)},[Ad,Sc.anchor]);const qf=null!==ld&&null!==$d,[Gf,hh]=pi(Oe);jf=null===(X=mf.arrow)||void 0===X?void 0:X.x;X=null===(la=mf.arrow)||
void 0===la?void 0:la.y;la=0!==(null===(pa=mf.arrow)||void 0===pa?void 0:pa.centerOffset);const [Ef,kh]=(0,am.useState)();Pm(()=>{vd&&kh(window.getComputedStyle(vd).zIndex)},[vd]);const {hasParent:uh,positionUpdateFns:qj}=xF("PopperContent",eb),ml=!uh;(0,am.useLayoutEffect)(()=>{if(!ml)return qj.add(Sf),()=>{qj.delete(Sf)}},[ml,qj,Sf]);(0,am.useLayoutEffect)(()=>{ml&&qf&&Array.from(qj).reverse().forEach(nl=>requestAnimationFrame(nl))},[ml,qf,qj]);pa=lf(pe({"data-side":Gf,"data-align":hh},b),{ref:g,
style:lf(pe({},b.style),{animation:qf?void 0:"none",opacity:null!==(Ga=mf.hide)&&void 0!==Ga&&Ga.referenceHidden?0:void 0})});return(0,am.createElement)("div",{ref:ad,"data-radix-popper-content-wrapper":"",style:{position:ed,left:0,top:0,transform:qf?`translate3d(${Math.round(ld)}px, ${Math.round($d)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Ef,["--radix-popper-transform-origin"]:[null===(Qa=mf.transformOrigin)||void 0===Qa?void 0:Qa.x,null===(Za=mf.transformOrigin)||void 0===
Za?void 0:Za.y].join(" ")}},(0,am.createElement)(uF,{scope:eb,placedSide:Gf,onArrowChange:De,arrowX:jf,arrowY:X,shouldHideArrow:la},ml?(0,am.createElement)(wF,{scope:eb,hasParent:!0,positionUpdateFns:qj},(0,am.createElement)(kl.div,pa)):(0,am.createElement)(kl.div,pa)))}),yF={top:"bottom",right:"left",bottom:"top",left:"right"},aA=(0,am.forwardRef)(function(b,g){var {__scopePopper:p}=b;b=Af(b,["__scopePopper"]);p=vF("PopperArrow",p);return(0,am.createElement)("span",{ref:p.onArrowChange,style:{position:"absolute",
left:p.arrowX,top:p.arrowY,[yF[p.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[p.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[p.placedSide],visibility:p.shouldHideArrow?"hidden":void 0}},(0,am.createElement)(rF,ff({},b,{ref:g,style:lf(pe({},b.style),{display:"block"})})))}),zF=b=>({name:"transformOrigin",options:b,fn(g){var p,
G,X,la,pa;const {placement:Ga,rects:Qa,middlewareData:Za}=g,eb=(g=0!==(null===(p=Za.arrow)||void 0===p?void 0:p.centerOffset))?0:b.arrowWidth;p=g?0:b.arrowHeight;const [mb,Lb]=pi(Ga),Vb={start:"0%",center:"50%",end:"100%"}[Lb],Pb=(null!==(G=null===(X=Za.arrow)||void 0===X?void 0:X.x)&&void 0!==G?G:0)+eb/2;G=(null!==(la=null===(pa=Za.arrow)||void 0===pa?void 0:pa.y)&&void 0!==la?la:0)+p/2;pa=la="";"bottom"===mb?(la=g?Vb:`${Pb}px`,pa=`${-p}px`):"top"===mb?(la=g?Vb:`${Pb}px`,pa=`${Qa.floating.height+
p}px`):"right"===mb?(la=`${-p}px`,pa=g?Vb:`${G}px`):"left"===mb&&(la=`${Qa.floating.width+p}px`,pa=g?Vb:`${G}px`);return{data:{x:la,y:pa}}}}),mw=b=>{const {__scopePopper:g,children:p}=b,[G,X]=(0,am.useState)(null);return(0,am.createElement)(tF,{scope:g,anchor:G,onAnchorChange:X},p)},bA=W(22),AF=uf(W(31)),BF=(0,bA.forwardRef)((b,g)=>{var p;const {container:G=null===globalThis||void 0===globalThis?void 0:null===(p=globalThis.document)||void 0===p?void 0:p.body}=b;b=Af(b,["container"]);return G?AF.default.createPortal((0,bA.createElement)(kl.div,
ff({},b,{ref:g})),G):null}),Bp=W(22),CF=W(31),lt=b=>{const {present:g,children:p}=b;b=xg(g);const G="function"===typeof p?p({present:b.isPresent}):Bp.Children.only(p),X=Cf(b.ref,G.ref);return"function"===typeof p||b.isPresent?(0,Bp.cloneElement)(G,{ref:X}):null};lt.displayName="Presence";var ru=W(22),cA=W(22),DF=(0,cA.forwardRef)((b,g)=>(0,cA.createElement)(kl.span,ff({},b,{ref:g,style:pe({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",
whiteSpace:"nowrap",wordWrap:"normal"},b.style)}))),[su]=Aj("Tooltip",[ds]),tu=ds(),[EF,nw]=su("TooltipProvider"),[FF,mt]=su("Tooltip"),GF=(0,fh.forwardRef)((b,g)=>{var {__scopeTooltip:p}=b;const G=Af(b,["__scopeTooltip"]),X=mt("TooltipTrigger",p),la=nw("TooltipTrigger",p);p=tu(p);const pa=(0,fh.useRef)(null);g=Cf(g,pa,X.onTriggerChange);const Ga=(0,fh.useRef)(!1),Qa=(0,fh.useRef)(!1),Za=(0,fh.useCallback)(()=>Ga.current=!1,[]);(0,fh.useEffect)(()=>()=>document.removeEventListener("pointerup",Za),
[Za]);return(0,fh.createElement)(kw,ff({asChild:!0},p),(0,fh.createElement)(kl.button,ff({"aria-describedby":X.open?X.contentId:void 0,"data-state":X.stateAttribute},G,{ref:g,onPointerMove:If(b.onPointerMove,eb=>{"touch"===eb.pointerType||Qa.current||la.isPointerInTransitRef.current||(X.onTriggerEnter(),Qa.current=!0)}),onPointerLeave:If(b.onPointerLeave,()=>{X.onTriggerLeave();Qa.current=!1}),onPointerDown:If(b.onPointerDown,()=>{Ga.current=!0;document.addEventListener("pointerup",Za,{once:!0})}),
onFocus:If(b.onFocus,()=>{if(!Ga.current)X.onOpen()}),onBlur:If(b.onBlur,X.onClose),onClick:If(b.onClick,X.onClose)})))}),[HF,IF]=su("TooltipPortal",{forceMount:void 0}),JF=(0,fh.forwardRef)((b,g)=>{var p=IF("TooltipContent",b.__scopeTooltip);const {forceMount:G=p.forceMount,side:X="top"}=b;p=Af(b,["forceMount","side"]);b=mt("TooltipContent",b.__scopeTooltip);return(0,fh.createElement)(lt,{present:G||b.open},b.disableHoverableContent?(0,fh.createElement)(dA,ff({side:X},p,{ref:g})):(0,fh.createElement)(KF,
ff({side:X},p,{ref:g})))}),KF=(0,fh.forwardRef)((b,g)=>{const p=mt("TooltipContent",b.__scopeTooltip),G=nw("TooltipContent",b.__scopeTooltip),X=(0,fh.useRef)(null);g=Cf(g,X);const [la,pa]=(0,fh.useState)(null),{trigger:Ga,onClose:Qa}=p,Za=X.current,{onPointerInTransitChange:eb}=G,mb=(0,fh.useCallback)(()=>{pa(null);eb(!1)},[eb]),Lb=(0,fh.useCallback)((Vb,Pb)=>{const ec=bj({x:Vb.clientX,y:Vb.clientY},Vb.currentTarget.getBoundingClientRect()),gc="right"===ec||"bottom"===ec?-5:5;Vb="right"===ec||"left"===
ec?{x:Vb.clientX+gc,y:Vb.clientY}:{x:Vb.clientX,y:Vb.clientY+gc};Pb=Pb.getBoundingClientRect();const {top:Tb,right:nc,bottom:oc,left:Ec}=Pb;Pb=Rb([Vb,{x:Ec,y:Tb},{x:nc,y:Tb},{x:nc,y:oc},{x:Ec,y:oc}]);pa(Pb);eb(!0)},[eb]);(0,fh.useEffect)(()=>()=>mb(),[mb]);(0,fh.useEffect)(()=>{if(Ga&&Za){const Vb=ec=>Lb(ec,Za),Pb=ec=>Lb(ec,Ga);Ga.addEventListener("pointerleave",Vb);Za.addEventListener("pointerleave",Pb);return()=>{Ga.removeEventListener("pointerleave",Vb);Za.removeEventListener("pointerleave",Pb)}}},
[Ga,Za,Lb,mb]);(0,fh.useEffect)(()=>{if(la){const Vb=Pb=>{var ec=Pb.target;Pb={x:Pb.clientX,y:Pb.clientY};ec=(null===Ga||void 0===Ga?void 0:Ga.contains(ec))||(null===Za||void 0===Za?void 0:Za.contains(ec));const {x:gc,y:Tb}=Pb;Pb=!1;for(let nc=0,oc=la.length-1;nc<la.length;oc=nc++){const Ec=la[nc].x,Sc=la[nc].y,vd=la[oc].x,Wd=la[oc].y;Sc>Tb!==Wd>Tb&&gc<(vd-Ec)*(Tb-Sc)/(Wd-Sc)+Ec&&(Pb=!Pb)}Pb=!Pb;ec?mb():Pb&&(mb(),Qa())};document.addEventListener("pointermove",Vb);return()=>document.removeEventListener("pointermove",
Vb)}},[Ga,Za,la,Qa,mb]);return(0,fh.createElement)(dA,ff({},b,{ref:g}))}),[LF,MF]=su("Tooltip",{isInside:!1}),dA=(0,fh.forwardRef)((b,g)=>{const {__scopeTooltip:p,children:G,"aria-label":X,onEscapeKeyDown:la,onPointerDownOutside:pa}=b;b=Af(b,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Ga=mt("TooltipContent",p),Qa=tu(p),{onClose:Za}=Ga;(0,fh.useEffect)(()=>{document.addEventListener("tooltip.open",Za);return()=>document.removeEventListener("tooltip.open",
Za)},[Za]);(0,fh.useEffect)(()=>{if(Ga.trigger){const eb=mb=>{mb=mb.target;null!==mb&&void 0!==mb&&mb.contains(Ga.trigger)&&Za()};window.addEventListener("scroll",eb,{capture:!0});return()=>window.removeEventListener("scroll",eb,{capture:!0})}},[Ga.trigger,Za]);return(0,fh.createElement)(fw,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:la,onPointerDownOutside:pa,onFocusOutside:eb=>eb.preventDefault(),onDismiss:Za},(0,fh.createElement)(lw,ff({"data-state":Ga.stateAttribute},Qa,b,{ref:g,
style:lf(pe({},b.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,fh.createElement)(Lz,null,G),(0,fh.createElement)(LF,{scope:p,isInside:!0},(0,fh.createElement)(DF,{id:Ga.contentId,role:"tooltip"},X||G))))}),NF=(0,fh.forwardRef)((b,g)=>{const {__scopeTooltip:p}=b;b=Af(b,["__scopeTooltip"]);const G=tu(p);return MF("TooltipArrow",p).isInside?null:(0,fh.createElement)(aA,ff({},G,b,{ref:g}))}),OF=b=>{const {__scopeTooltip:g,delayDuration:p=700,skipDelayDuration:G=
300,disableHoverableContent:X=!1,children:la}=b,[pa,Ga]=(0,fh.useState)(!0),Qa=(0,fh.useRef)(!1),Za=(0,fh.useRef)(0);(0,fh.useEffect)(()=>{const eb=Za.current;return()=>window.clearTimeout(eb)},[]);return(0,fh.createElement)(EF,{scope:g,isOpenDelayed:pa,delayDuration:p,onOpen:(0,fh.useCallback)(()=>{window.clearTimeout(Za.current);Ga(!1)},[]),onClose:(0,fh.useCallback)(()=>{window.clearTimeout(Za.current);Za.current=window.setTimeout(()=>Ga(!0),G)},[G]),isPointerInTransitRef:Qa,onPointerInTransitChange:(0,fh.useCallback)(eb=>
{Qa.current=eb},[]),disableHoverableContent:X},la)},PF=b=>{const {__scopeTooltip:g,children:p,open:G,defaultOpen:X=!1,onOpenChange:la,disableHoverableContent:pa,delayDuration:Ga}=b,Qa=nw("Tooltip",b.__scopeTooltip);b=tu(g);const [Za,eb]=(0,fh.useState)(null),mb=zi(),Lb=(0,fh.useRef)(0),Vb=null!==pa&&void 0!==pa?pa:Qa.disableHoverableContent,Pb=null!==Ga&&void 0!==Ga?Ga:Qa.delayDuration,ec=(0,fh.useRef)(!1),[gc=!1,Tb]=Nj({prop:G,defaultProp:X,onChange:vd=>{if(vd)Qa.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));
else Qa.onClose();null===la||void 0===la||la(vd)}}),nc=(0,fh.useMemo)(()=>gc?ec.current?"delayed-open":"instant-open":"closed",[gc]),oc=(0,fh.useCallback)(()=>{window.clearTimeout(Lb.current);ec.current=!1;Tb(!0)},[Tb]),Ec=(0,fh.useCallback)(()=>{window.clearTimeout(Lb.current);Tb(!1)},[Tb]),Sc=(0,fh.useCallback)(()=>{window.clearTimeout(Lb.current);Lb.current=window.setTimeout(()=>{ec.current=!0;Tb(!0)},Pb)},[Pb,Tb]);(0,fh.useEffect)(()=>()=>window.clearTimeout(Lb.current),[]);return(0,fh.createElement)(mw,
b,(0,fh.createElement)(FF,{scope:g,contentId:mb,open:gc,stateAttribute:nc,trigger:Za,onTriggerChange:eb,onTriggerEnter:(0,fh.useCallback)(()=>{Qa.isOpenDelayed?Sc():oc()},[Qa.isOpenDelayed,Sc,oc]),onTriggerLeave:(0,fh.useCallback)(()=>{Vb?Ec():window.clearTimeout(Lb.current)},[Ec,Vb]),onOpen:oc,onClose:Ec,disableHoverableContent:Vb},p))},QF=GF,RF=b=>{const {__scopeTooltip:g,forceMount:p,children:G,container:X}=b;b=mt("TooltipPortal",g);return(0,fh.createElement)(HF,{scope:g,forceMount:p},(0,fh.createElement)(lt,
{present:p||b.open},(0,fh.createElement)(BF,{asChild:!0,container:X},G)))},SF=JF,TF=NF;nb=W(588);nb=W(588);nb=W(588);var UF=({style:b,icon:g,onClick:p})=>(0,nb.jsx)("button",{"data-html2canvas-ignore":"true",style:b,className:"tl-circle-button",onPointerDown:p,children:(0,nb.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,nb.jsx)(Bh,{name:g})})}),xo=W(22),Xg=W(22),gp=uf(W(22)),eA=W(22),VF=(0,eA.createContext)(void 0),WF=W(22),ow=0,iq=W(22),fA={bubbles:!1,cancelable:!0},gA=(0,iq.forwardRef)((b,
g)=>{const {loop:p=!1,trapped:G=!1,onMountAutoFocus:X,onUnmountAutoFocus:la}=b;b=Af(b,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [pa,Ga]=(0,iq.useState)(null),Qa=sf(X),Za=sf(la),eb=(0,iq.useRef)(null);g=Cf(g,Vb=>Ga(Vb));const mb=(0,iq.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,iq.useEffect)(()=>{if(G){let Vb=function(ec){!mb.paused&&pa&&(ec=ec.target,pa.contains(ec)?eb.current=ec:Bc(eb.current,{select:!0}))},Pb=function(ec){!mb.paused&&
pa&&(pa.contains(ec.relatedTarget)||Bc(eb.current,{select:!0}))};document.addEventListener("focusin",Vb);document.addEventListener("focusout",Pb);return()=>{document.removeEventListener("focusin",Vb);document.removeEventListener("focusout",Pb)}}},[G,pa,mb.paused]);(0,iq.useEffect)(()=>{if(pa){hA.add(mb);const Vb=document.activeElement;if(!pa.contains(Vb)){const Pb=new CustomEvent("focusScope.autoFocusOnMount",fA);pa.addEventListener("focusScope.autoFocusOnMount",Qa);pa.dispatchEvent(Pb);Pb.defaultPrevented||
(Qb(Tc(tb(pa)),{select:!0}),document.activeElement===Vb&&Bc(pa))}return()=>{pa.removeEventListener("focusScope.autoFocusOnMount",Qa);setTimeout(()=>{const Pb=new CustomEvent("focusScope.autoFocusOnUnmount",fA);pa.addEventListener("focusScope.autoFocusOnUnmount",Za);pa.dispatchEvent(Pb);Pb.defaultPrevented||Bc(null!==Vb&&void 0!==Vb?Vb:document.body,{select:!0});pa.removeEventListener("focusScope.autoFocusOnUnmount",Za);hA.remove(mb)},0)}}},[pa,Qa,Za,mb]);const Lb=(0,iq.useCallback)(Vb=>{if((p||G)&&
!mb.paused){var Pb=document.activeElement;if("Tab"===Vb.key&&!Vb.altKey&&!Vb.ctrlKey&&!Vb.metaKey&&Pb){const gc=Vb.currentTarget;var ec=gc;const Tb=tb(ec),nc=Mb(Tb,ec);ec=Mb(Tb.reverse(),ec);const [oc,Ec]=[nc,ec];oc&&Ec?Vb.shiftKey||Pb!==Ec?Vb.shiftKey&&Pb===oc&&(Vb.preventDefault(),p&&Bc(Ec,{select:!0})):(Vb.preventDefault(),p&&Bc(oc,{select:!0})):Pb===gc&&Vb.preventDefault()}}},[p,G,mb.paused]);return(0,iq.createElement)(kl.div,ff({tabIndex:-1},b,{ref:g,onKeyDown:Lb}))}),hA=function(){let b=[];
return{add(g){const p=b[0];g===p||null!==p&&void 0!==p&&p.pause();b=Oc(b,g);b.unshift(g)},remove(g){var p;b=Oc(b,g);null===(p=b[0])||void 0===p||p.resume()}}}(),nm=W(22),XF={bubbles:!1,cancelable:!0},[pw,iA,YF]=Eb("RovingFocusGroup"),[ZF,uu]=Aj("RovingFocusGroup",[YF]),[$F,aG]=ZF("RovingFocusGroup"),jA=(0,nm.forwardRef)((b,g)=>(0,nm.createElement)(pw.Provider,{scope:b.__scopeRovingFocusGroup},(0,nm.createElement)(pw.Slot,{scope:b.__scopeRovingFocusGroup},(0,nm.createElement)(bG,ff({},b,{ref:g}))))),
bG=(0,nm.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:p,orientation:G,loop:X=!1,dir:la,currentTabStopId:pa,defaultCurrentTabStopId:Ga,onCurrentTabStopIdChange:Qa,onEntryFocus:Za}=b,eb=Af(b,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),mb=(0,nm.useRef)(null);g=Cf(g,mb);const Lb=Ub(la),[Vb=null,Pb]=Nj({prop:pa,defaultProp:Ga,onChange:Qa}),[ec,gc]=(0,nm.useState)(!1),Tb=sf(Za),nc=iA(p),oc=(0,nm.useRef)(!1),
[Ec,Sc]=(0,nm.useState)(0);(0,nm.useEffect)(()=>{const vd=mb.current;if(vd)return vd.addEventListener("rovingFocusGroup.onEntryFocus",Tb),()=>vd.removeEventListener("rovingFocusGroup.onEntryFocus",Tb)},[Tb]);return(0,nm.createElement)($F,{scope:p,orientation:G,dir:Lb,loop:X,currentTabStopId:Vb,onItemFocus:(0,nm.useCallback)(vd=>Pb(vd),[Pb]),onItemShiftTab:(0,nm.useCallback)(()=>gc(!0),[]),onFocusableItemAdd:(0,nm.useCallback)(()=>Sc(vd=>vd+1),[]),onFocusableItemRemove:(0,nm.useCallback)(()=>Sc(vd=>
vd-1),[])},(0,nm.createElement)(kl.div,ff({tabIndex:ec||0===Ec?-1:0,"data-orientation":G},eb,{ref:g,style:pe({outline:"none"},b.style),onMouseDown:If(b.onMouseDown,()=>{oc.current=!0}),onFocus:If(b.onFocus,vd=>{var Wd=!oc.current;if(vd.target===vd.currentTarget&&Wd&&!ec&&(Wd=new CustomEvent("rovingFocusGroup.onEntryFocus",XF),vd.currentTarget.dispatchEvent(Wd),!Wd.defaultPrevented)){vd=nc().filter(De=>De.focusable);Wd=vd.find(De=>De.active);const he=vd.find(De=>De.id===Vb);vd=[Wd,he,...vd].filter(Boolean).map(De=>
De.ref.current);Sd(vd)}oc.current=!1}),onBlur:If(b.onBlur,()=>gc(!1))})))}),kA=(0,nm.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:p,focusable:G=!0,active:X=!1}=b,la=Af(b,["__scopeRovingFocusGroup","focusable","active"]),pa=zi(),Ga=aG("RovingFocusGroupItem",p),Qa=Ga.currentTabStopId===pa,Za=iA(p),{onFocusableItemAdd:eb,onFocusableItemRemove:mb}=Ga;(0,nm.useEffect)(()=>{if(G)return eb(),()=>mb()},[G,eb,mb]);return(0,nm.createElement)(pw.ItemSlot,{scope:p,id:pa,focusable:G,active:X},(0,nm.createElement)(kl.span,
ff({tabIndex:Qa?0:-1,"data-orientation":Ga.orientation},la,{ref:g,onMouseDown:If(b.onMouseDown,Lb=>{if(G)Ga.onItemFocus(pa);else Lb.preventDefault()}),onFocus:If(b.onFocus,()=>Ga.onItemFocus(pa)),onKeyDown:If(b.onKeyDown,Lb=>{if("Tab"===Lb.key&&Lb.shiftKey)Ga.onItemShiftTab();else if(Lb.target===Lb.currentTarget){var Vb=xd(Lb,Ga.orientation,Ga.dir);if(void 0!==Vb){Lb.preventDefault();let Pb=Za().filter(ec=>ec.focusable).map(ec=>ec.ref.current);if("last"===Vb)Pb.reverse();else if("prev"===Vb||"next"===
Vb)"prev"===Vb&&Pb.reverse(),Lb=Pb.indexOf(Lb.currentTarget),Pb=Ga.loop?Gd(Pb,Lb+1):Pb.slice(Lb+1);setTimeout(()=>Sd(Pb))}}})})))}),cG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},dG=function(b){return"undefined"===typeof document?null:(Array.isArray(b)?b[0]:b).ownerDocument.body},es=new WeakMap,vu=new WeakMap,wu={},qw=0,rw=function(b,g,p){void 0===g&&(g=dG(b));void 0===p&&(p="data-aria-hidden");var G=Array.isArray(b)?
b:[b];wu[p]||(wu[p]=new WeakMap);var X=wu[p],la=[],pa=new Set,Ga=function(Za){Za&&!pa.has(Za)&&(pa.add(Za),Ga(Za.parentNode))};G.forEach(Ga);var Qa=function(Za){!Za||0<=G.indexOf(Za)||Array.prototype.forEach.call(Za.children,function(eb){if(pa.has(eb))Qa(eb);else{var mb=eb.getAttribute("aria-hidden");mb=null!==mb&&"false"!==mb;var Lb=(es.get(eb)||0)+1,Vb=(X.get(eb)||0)+1;es.set(eb,Lb);X.set(eb,Vb);la.push(eb);1===Lb&&mb&&vu.set(eb,!0);1===Vb&&eb.setAttribute(p,"true");mb||eb.setAttribute("aria-hidden",
"true")}})};Qa(g);pa.clear();qw++;return function(){la.forEach(function(Za){var eb=es.get(Za)-1,mb=X.get(Za)-1;es.set(Za,eb);X.set(Za,mb);eb||(vu.has(Za)||Za.removeAttribute("aria-hidden"),vu.delete(Za));mb||Za.removeAttribute(p)});qw--;qw||(es=new WeakMap,es=new WeakMap,vu=new WeakMap,wu={})}},eG=uf(Pp(),1),{__assign:jq,__rest:lA,__spreadArray:fG}=eG.default,mA=uf(W(22)),Cp=uf(W(22)),gG=W(22),hG=uf(W(22)),nA=function(b){var g=b.sideCar;b=lA(b,["sideCar"]);if(!g)throw Error("Sidecar: please provide `sideCar` property to import the right car");
g=g.read();if(!g)throw Error("Sidecar medium not found");return hG.createElement(g,jq({},b))};nA.isSideCarExport=!0;var oA=function(b){void 0===b&&(b={});var g=Zf(null);g.options=jq({async:!0,ssr:!1},b);return g}(),sw=function(){},xu=Cp.forwardRef(function(b,g){var p=Cp.useRef(null),G=Cp.useState({onScrollCapture:sw,onWheelCapture:sw,onTouchMoveCapture:sw}),X=G[0];G=G[1];var la=b.forwardProps,pa=b.children,Ga=b.className,Qa=b.removeScrollBar,Za=b.enabled,eb=b.shards,mb=b.sideCar,Lb=b.noIsolation,
Vb=b.inert,Pb=b.allowPinchZoom,ec=b.as;ec=void 0===ec?"div":ec;b=lA(b,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));g=Id([p,g]);X=jq(jq({},b),X);return Cp.createElement(Cp.Fragment,null,Za&&Cp.createElement(mb,{sideCar:oA,removeScrollBar:Qa,shards:eb,noIsolation:Lb,inert:Vb,setCallbacks:G,allowPinchZoom:!!Pb,lockRef:p}),la?Cp.cloneElement(Cp.Children.only(pa),jq(jq({},X),{ref:g})):Cp.createElement(ec,jq({},X,{className:Ga,
ref:g}),pa))});xu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xu.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var Em=uf(W(22)),pA=uf(W(22)),iG=uf(W(22)),jG=function(){var b=0,g=null;return{add:function(p){if(0==b){if(document){var G=document.createElement("style");G.type="text/css";var X="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;X&&G.setAttribute("nonce",X)}else G=null;if(g=G)G=g,G.styleSheet?G.styleSheet.cssText=p:G.appendChild(document.createTextNode(p)),
p=g,(document.head||document.getElementsByTagName("head")[0]).appendChild(p)}b++},remove:function(){b--;!b&&g&&(g.parentNode&&g.parentNode.removeChild(g),g=null)}}},kG=function(){var b=jG();return function(g,p){iG.useEffect(function(){b.add(g);return function(){b.remove()}},[g&&p])}},qA=function(){var b=kG();return function(g){b(g.styles,g.dynamic);return null}},lG={left:0,top:0,right:0,gap:0},mG=qA(),nG=function(b,g,p,G){var X=b.left,la=b.top,pa=b.right;b=b.gap;void 0===p&&(p="margin");return"\n  .".concat("with-scroll-bars-hidden",
" {\n   overflow: hidden ").concat(G,";\n   padding-right: ").concat(b,"px ").concat(G,";\n  }\n  body {\n    overflow: hidden ").concat(G,";\n    overscroll-behavior: contain;\n    ").concat([g&&"position: relative ".concat(G,";"),"margin"===p&&"\n    padding-left: ".concat(X,"px;\n    padding-top: ").concat(la,"px;\n    padding-right: ").concat(pa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(b,"px ").concat(G,";\n    "),"padding"===p&&"padding-right: ".concat(b,"px ").concat(G,
";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(b,"px ").concat(G,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(b,"px ").concat(G,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(G,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(G,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",
": ").concat(b,"px;\n  }\n")},ir=function(b){var g=b.noRelative,p=b.noImportant;b=b.gapMode;var G=void 0===b?"margin":b;b=pA.useMemo(function(){var X=G;void 0===X&&(X="margin");if("undefined"===typeof window)X=lG;else{var la=window.getComputedStyle(document.body),pa=la["padding"===X?"paddingTop":"marginTop"],Ga=la["padding"===X?"paddingRight":"marginRight"];X=[parseInt(la["padding"===X?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(pa||"",10)||0,parseInt(Ga||"",10)||0];X={left:X[0],top:X[1],right:X[2],
gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+X[2]-X[0])}}return X},[G]);return pA.createElement(mG,{styles:nG(b,!g,G,p?"":"!important")})},tw=!1;if("undefined"!==typeof window)try{var yu=Object.defineProperty({},"passive",{get:function(){return tw=!0}});window.addEventListener("test",yu,yu);window.removeEventListener("test",yu,yu)}catch(b){tw=!1}var fs=tw?{passive:!1}:!1,rA=function(b,g){var p=window.getComputedStyle(b);return"hidden"!==p[g]&&!(p.overflowY===p.overflowX&&
"TEXTAREA"!==b.tagName&&"visible"===p[g])},sA=function(b,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(tA(b,g)){var p=uA(b,g);if(p[1]>p[2])return!0}g=g.parentNode}while(g&&g!==document.body);return!1},tA=function(b,g){return"v"===b?rA(g,"overflowY"):rA(g,"overflowX")},uA=function(b,g){return"v"===b?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},zu=function(b){return"changedTouches"in b?[b.changedTouches[0].clientX,b.changedTouches[0].clientY]:
[0,0]},vA=function(b){return b&&"current"in b?b.current:b},oG=function(b){return"\n  .block-interactivity-".concat(b," {pointer-events: none;}\n  .allow-interactivity-").concat(b," {pointer-events: all;}\n")},pG=0,gs=[];oA.useMedium(function(b){var g=Em.useRef([]),p=Em.useRef([0,0]),G=Em.useRef(),X=Em.useState(pG++)[0],la=Em.useState(function(){return qA()})[0],pa=Em.useRef(b);Em.useEffect(function(){pa.current=b},[b]);Em.useEffect(function(){if(b.inert){document.body.classList.add("block-interactivity-".concat(X));
var Pb=fG([b.lockRef.current],(b.shards||[]).map(vA),!0).filter(Boolean);Pb.forEach(function(ec){return ec.classList.add("allow-interactivity-".concat(X))});return function(){document.body.classList.remove("block-interactivity-".concat(X));Pb.forEach(function(ec){return ec.classList.remove("allow-interactivity-".concat(X))})}}},[b.inert,b.lockRef.current,b.shards]);var Ga=Em.useCallback(function(Pb,ec){if("touches"in Pb&&2===Pb.touches.length)return!pa.current.allowPinchZoom;var gc=zu(Pb),Tb=p.current,
nc="deltaX"in Pb?Pb.deltaX:Tb[0]-gc[0];Tb="deltaY"in Pb?Pb.deltaY:Tb[1]-gc[1];var oc=Pb.target,Ec=Math.abs(nc)>Math.abs(Tb)?"h":"v";if("touches"in Pb&&"h"===Ec&&"range"===oc.type)return!1;var Sc=sA(Ec,oc);if(!Sc)return!0;Sc?gc=Ec:(gc="v"===Ec?"h":"v",Sc=sA(Ec,oc));if(!Sc)return!1;!G.current&&"changedTouches"in Pb&&(nc||Tb)&&(G.current=gc);if(!gc)return!0;gc=G.current||gc;Tb="h"===gc?nc:Tb;nc=window.getComputedStyle(ec).direction;nc="h"===gc&&"rtl"===nc?-1:1;Ec=nc*Tb;Pb=Pb.target;Tb=ec.contains(Pb);
oc=!1;Ec=0<Ec;var vd=Sc=0;do{var Wd=uA(gc,Pb),he=Wd[0];Wd=Wd[1]-Wd[2]-nc*he;(he||Wd)&&tA(gc,Pb)&&(Sc+=Wd,vd+=he);Pb=Pb.parentNode}while(!Tb&&Pb!==document.body||Tb&&(ec.contains(Pb)||ec===Pb));Ec&&0===Sc?oc=!0:Ec||0!==vd||(oc=!0);return oc},[]),Qa=Em.useCallback(function(Pb){if(gs.length&&gs[gs.length-1]===la){var ec="deltaY"in Pb?[Pb.deltaX,Pb.deltaY]:zu(Pb),gc=g.current.filter(function(Tb){var nc;if(nc=Tb.name===Pb.type&&Tb.target===Pb.target)Tb=Tb.delta,nc=Tb[0]===ec[0]&&Tb[1]===ec[1];return nc})[0];
gc&&gc.should?Pb.cancelable&&Pb.preventDefault():gc||(gc=(pa.current.shards||[]).map(vA).filter(Boolean).filter(function(Tb){return Tb.contains(Pb.target)}),(0<gc.length?Ga(Pb,gc[0]):!pa.current.noIsolation)&&Pb.cancelable&&Pb.preventDefault())}},[]),Za=Em.useCallback(function(Pb,ec,gc,Tb){var nc={name:Pb,delta:ec,target:gc,should:Tb};g.current.push(nc);setTimeout(function(){g.current=g.current.filter(function(oc){return oc!==nc})},1)},[]),eb=Em.useCallback(function(Pb){p.current=zu(Pb);G.current=
void 0},[]),mb=Em.useCallback(function(Pb){Za(Pb.type,[Pb.deltaX,Pb.deltaY],Pb.target,Ga(Pb,b.lockRef.current))},[]),Lb=Em.useCallback(function(Pb){Za(Pb.type,zu(Pb),Pb.target,Ga(Pb,b.lockRef.current))},[]);Em.useEffect(function(){gs.push(la);b.setCallbacks({onScrollCapture:mb,onWheelCapture:mb,onTouchMoveCapture:Lb});document.addEventListener("wheel",Qa,fs);document.addEventListener("touchmove",Qa,fs);document.addEventListener("touchstart",eb,fs);return function(){gs=gs.filter(function(Pb){return Pb!==
la});document.removeEventListener("wheel",Qa,fs);document.removeEventListener("touchmove",Qa,fs);document.removeEventListener("touchstart",eb,fs)}},[]);var Vb=b.removeScrollBar;return Em.createElement(Em.Fragment,null,b.inert?Em.createElement(la,{styles:oG(X)}):null,Vb?Em.createElement(ir,{gapMode:"margin"}):null)});var Au=mA.forwardRef(function(b,g){return mA.createElement(xu,jq({},b,{ref:g,sideCar:nA}))});Au.classNames=xu.classNames;var uw=["Enter"," "],wA=["ArrowUp","PageDown","End"],qG=["ArrowDown",
"PageUp","Home",...wA];[...uw];[...uw];var [vw,rG,sG]=Eb("Menu"),[jr,Bu]=Aj("Menu",[sG,ds,uu]),ww=ds(),xA=uu(),[tG,Cu]=jr("Menu"),[uG,xw]=jr("Menu"),yA=(0,Xg.forwardRef)((b,g)=>{var {__scopeMenu:p}=b;b=Af(b,["__scopeMenu"]);p=ww(p);return(0,Xg.createElement)(kw,ff({},p,b,{ref:g}))}),[,vG]=jr("MenuPortal",{forceMount:void 0}),[wG,zA]=jr("MenuContent"),AA=(0,Xg.forwardRef)((b,g)=>{var p=vG("MenuContent",b.__scopeMenu);({forceMount:p=p.forceMount}=b);const G=Af(b,["forceMount"]),X=Cu("MenuContent",b.__scopeMenu),
la=xw("MenuContent",b.__scopeMenu);return(0,Xg.createElement)(vw.Provider,{scope:b.__scopeMenu},(0,Xg.createElement)(lt,{present:p||X.open},(0,Xg.createElement)(vw.Slot,{scope:b.__scopeMenu},la.modal?(0,Xg.createElement)(xG,ff({},G,{ref:g})):(0,Xg.createElement)(yG,ff({},G,{ref:g})))))}),xG=(0,Xg.forwardRef)((b,g)=>{const p=Cu("MenuContent",b.__scopeMenu),G=(0,Xg.useRef)(null);g=Cf(g,G);(0,Xg.useEffect)(()=>{const X=G.current;if(X)return rw(X)},[]);return(0,Xg.createElement)(BA,ff({},b,{ref:g,trapFocus:p.open,
disableOutsidePointerEvents:p.open,disableOutsideScroll:!0,onFocusOutside:If(b.onFocusOutside,X=>X.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>p.onOpenChange(!1)}))}),yG=(0,Xg.forwardRef)((b,g)=>{const p=Cu("MenuContent",b.__scopeMenu);return(0,Xg.createElement)(BA,ff({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>p.onOpenChange(!1)}))}),BA=(0,Xg.forwardRef)((b,g)=>{const {__scopeMenu:p,loop:G=!1,trapFocus:X,onOpenAutoFocus:la,onCloseAutoFocus:pa,
disableOutsidePointerEvents:Ga,onEscapeKeyDown:Qa,onPointerDownOutside:Za,onFocusOutside:eb,onInteractOutside:mb,onDismiss:Lb,disableOutsideScroll:Vb}=b,Pb=Af(b,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),ec=Cu("MenuContent",p),gc=xw("MenuContent",p),Tb=ww(p),nc=xA(p),oc=rG(p),[Ec,Sc]=(0,Xg.useState)(null),vd=(0,Xg.useRef)(null);g=Cf(g,vd,ec.onContentChange);
const Wd=(0,Xg.useRef)(0),he=(0,Xg.useRef)(""),De=(0,Xg.useRef)(0),Ye=(0,Xg.useRef)(null),jf=(0,Xg.useRef)("right"),Ne=(0,Xg.useRef)(0),Ae=Vb?Au:Xg.Fragment,Ad=Vb?{as:fp,allowPinchZoom:!0}:void 0,ad=ld=>{var $d,Oe;ld=he.current+ld;const mf=oc().filter(Ef=>!Ef.disabled),Sf=document.activeElement,qf=null===($d=mf.find(Ef=>Ef.ref.current===Sf))||void 0===$d?void 0:$d.textValue;$d=mf.map(Ef=>Ef.textValue);const Gf=Pe($d,ld,qf),hh=null===(Oe=mf.find(Ef=>Ef.textValue===Gf))||void 0===Oe?void 0:Oe.ref.current;
(function uh(kh){he.current=kh;window.clearTimeout(Wd.current);""!==kh&&(Wd.current=window.setTimeout(()=>uh(""),1E3))})(ld);hh&&setTimeout(()=>hh.focus())};(0,Xg.useEffect)(()=>()=>window.clearTimeout(Wd.current),[]);vb();const ed=(0,Xg.useCallback)(ld=>{var $d,Oe,mf;if(mf=jf.current===(null===($d=Ye.current)||void 0===$d?void 0:$d.side)){if($d=null===(Oe=Ye.current)||void 0===Oe?void 0:Oe.area){const {x:Sf,y:qf}={x:ld.clientX,y:ld.clientY};ld=!1;for(let Gf=0,hh=$d.length-1;Gf<$d.length;hh=Gf++){Oe=
$d[Gf].x;mf=$d[Gf].y;const Ef=$d[hh].x,kh=$d[hh].y;mf>qf!==kh>qf&&Sf<(Ef-Oe)*(qf-mf)/(kh-mf)+Oe&&(ld=!ld)}$d=ld}else $d=!1;mf=$d}return mf},[]);return(0,Xg.createElement)(wG,{scope:p,searchRef:he,onItemEnter:(0,Xg.useCallback)(ld=>{ed(ld)&&ld.preventDefault()},[ed]),onItemLeave:(0,Xg.useCallback)(ld=>{var $d;ed(ld)||(null===($d=vd.current)||void 0===$d||$d.focus(),Sc(null))},[ed]),onTriggerLeave:(0,Xg.useCallback)(ld=>{ed(ld)&&ld.preventDefault()},[ed]),pointerGraceTimerRef:De,onPointerGraceIntentChange:(0,Xg.useCallback)(ld=>
{Ye.current=ld},[])},(0,Xg.createElement)(Ae,Ad,(0,Xg.createElement)(gA,{asChild:!0,trapped:X,onMountAutoFocus:If(la,ld=>{var $d;ld.preventDefault();null===($d=vd.current)||void 0===$d||$d.focus()}),onUnmountAutoFocus:pa},(0,Xg.createElement)(fw,{asChild:!0,disableOutsidePointerEvents:Ga,onEscapeKeyDown:Qa,onPointerDownOutside:Za,onFocusOutside:eb,onInteractOutside:mb,onDismiss:Lb},(0,Xg.createElement)(jA,ff({asChild:!0},nc,{dir:gc.dir,orientation:"vertical",loop:G,currentTabStopId:Ec,onCurrentTabStopIdChange:Sc,
onEntryFocus:ld=>{gc.isUsingKeyboardRef.current||ld.preventDefault()}}),(0,Xg.createElement)(lw,ff({role:"menu","aria-orientation":"vertical","data-state":ec.open?"open":"closed","data-radix-menu-content":"",dir:gc.dir},Tb,Pb,{ref:g,style:pe({outline:"none"},Pb.style),onKeyDown:If(Pb.onKeyDown,ld=>{var $d=ld.target.closest("[data-radix-menu-content]")===ld.currentTarget;const Oe=ld.ctrlKey||ld.altKey||ld.metaKey,mf=1===ld.key.length;$d&&("Tab"===ld.key&&ld.preventDefault(),!Oe&&mf&&ad(ld.key));ld.target===
vd.current&&qG.includes(ld.key)&&(ld.preventDefault(),$d=oc().filter(Sf=>!Sf.disabled).map(Sf=>Sf.ref.current),wA.includes(ld.key)&&$d.reverse(),we($d))}),onBlur:If(b.onBlur,ld=>{ld.currentTarget.contains(ld.target)||(window.clearTimeout(Wd.current),he.current="")}),onPointerMove:If(b.onPointerMove,Re(ld=>{const $d=Ne.current!==ld.clientX;ld.currentTarget.contains(ld.target)&&$d&&(jf.current=ld.clientX>Ne.current?"right":"left",Ne.current=ld.clientX)}))})))))))}),CA=(0,Xg.forwardRef)((b,g)=>{const {disabled:p=
!1,onSelect:G}=b,X=Af(b,["disabled","onSelect"]),la=(0,Xg.useRef)(null),pa=xw("MenuItem",b.__scopeMenu),Ga=zA("MenuItem",b.__scopeMenu);g=Cf(g,la);const Qa=(0,Xg.useRef)(!1);return(0,Xg.createElement)(zG,ff({},X,{ref:g,disabled:p,onClick:If(b.onClick,()=>{const Za=la.current;if(!p&&Za){const eb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});Za.addEventListener("menu.itemSelect",mb=>null===G||void 0===G?void 0:G(mb),{once:!0});tl(Za,eb);if(eb.defaultPrevented)Qa.current=!1;else pa.onClose()}}),
onPointerDown:Za=>{var eb;null===(eb=b.onPointerDown)||void 0===eb||eb.call(b,Za);Qa.current=!0},onPointerUp:If(b.onPointerUp,Za=>{var eb;Qa.current||null===(eb=Za.currentTarget)||void 0===eb||eb.click()}),onKeyDown:If(b.onKeyDown,Za=>{const eb=""!==Ga.searchRef.current;p||eb&&" "===Za.key||!uw.includes(Za.key)||(Za.currentTarget.click(),Za.preventDefault())})}))}),zG=(0,Xg.forwardRef)((b,g)=>{const {__scopeMenu:p,disabled:G=!1,textValue:X}=b,la=Af(b,["__scopeMenu","disabled","textValue"]),pa=zA("MenuItem",
p),Ga=xA(p),Qa=(0,Xg.useRef)(null);g=Cf(g,Qa);const [Za,eb]=(0,Xg.useState)(!1),[mb,Lb]=(0,Xg.useState)("");(0,Xg.useEffect)(()=>{const Vb=Qa.current;if(Vb){var Pb;Lb((null!==(Pb=Vb.textContent)&&void 0!==Pb?Pb:"").trim())}},[la.children]);return(0,Xg.createElement)(vw.ItemSlot,{scope:p,disabled:G,textValue:null!==X&&void 0!==X?X:mb},(0,Xg.createElement)(kA,ff({asChild:!0},Ga,{focusable:!G}),(0,Xg.createElement)(kl.div,ff({role:"menuitem","data-highlighted":Za?"":void 0,"aria-disabled":G||void 0,
"data-disabled":G?"":void 0},la,{ref:g,onPointerMove:If(b.onPointerMove,Re(Vb=>{if(G)pa.onItemLeave(Vb);else pa.onItemEnter(Vb),Vb.defaultPrevented||Vb.currentTarget.focus()})),onPointerLeave:If(b.onPointerLeave,Re(Vb=>pa.onItemLeave(Vb))),onFocus:If(b.onFocus,()=>eb(!0)),onBlur:If(b.onBlur,()=>eb(!1))}))))});jr("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});jr("MenuItemIndicator",{checked:!1});var AG=(0,Xg.forwardRef)((b,g)=>{b=Af(b,["__scopeMenu"]);return(0,Xg.createElement)(kl.div,ff({role:"separator",
"aria-orientation":"horizontal"},b,{ref:g}))});jr("MenuSub");var DA=b=>{const {__scopeMenu:g,open:p=!1,children:G,dir:X,onOpenChange:la,modal:pa=!0}=b;b=ww(g);const [Ga,Qa]=(0,Xg.useState)(null),Za=(0,Xg.useRef)(!1),eb=sf(la),mb=Ub(X);(0,Xg.useEffect)(()=>{const Lb=()=>{Za.current=!0;document.addEventListener("pointerdown",Vb,{capture:!0,once:!0});document.addEventListener("pointermove",Vb,{capture:!0,once:!0})},Vb=()=>Za.current=!1;document.addEventListener("keydown",Lb,{capture:!0});return()=>{document.removeEventListener("keydown",
Lb,{capture:!0});document.removeEventListener("pointerdown",Vb,{capture:!0});document.removeEventListener("pointermove",Vb,{capture:!0})}},[]);return(0,Xg.createElement)(mw,b,(0,Xg.createElement)(tG,{scope:g,open:p,onOpenChange:eb,content:Ga,onContentChange:Qa},(0,Xg.createElement)(uG,{scope:g,onClose:(0,Xg.useCallback)(()=>eb(!1),[eb]),isUsingKeyboardRef:Za,dir:mb,modal:pa},G)))},[BG]=Aj("DropdownMenu",[Bu]),Du=Bu(),[CG,EA]=BG("DropdownMenu"),DG=(0,xo.forwardRef)((b,g)=>{const {__scopeDropdownMenu:p,
disabled:G=!1}=b,X=Af(b,["__scopeDropdownMenu","disabled"]),la=EA("DropdownMenuTrigger",p),pa=Du(p);return(0,xo.createElement)(yA,ff({asChild:!0},pa),(0,xo.createElement)(kl.button,ff({type:"button",id:la.triggerId,"aria-haspopup":"menu","aria-expanded":la.open,"aria-controls":la.open?la.contentId:void 0,"data-state":la.open?"open":"closed","data-disabled":G?"":void 0,disabled:G},X,{ref:Hk(g,la.triggerRef),onPointerDown:If(b.onPointerDown,Ga=>{G||0!==Ga.button||!1!==Ga.ctrlKey||(la.onOpenToggle(),
la.open||Ga.preventDefault())}),onKeyDown:If(b.onKeyDown,Ga=>{if(!G){if(["Enter"," "].includes(Ga.key))la.onOpenToggle();if("ArrowDown"===Ga.key)la.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Ga.key)&&Ga.preventDefault()}})})))}),EG=(0,xo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:p}=b;const G=Af(b,["__scopeDropdownMenu"]),X=EA("DropdownMenuContent",p);p=Du(p);const la=(0,xo.useRef)(!1);return(0,xo.createElement)(AA,ff({id:X.contentId,"aria-labelledby":X.triggerId},p,G,{ref:g,onCloseAutoFocus:If(b.onCloseAutoFocus,
pa=>{var Ga;la.current||null===(Ga=X.triggerRef.current)||void 0===Ga||Ga.focus();la.current=!1;pa.preventDefault()}),onInteractOutside:If(b.onInteractOutside,pa=>{pa=pa.detail.originalEvent;const Ga=0===pa.button&&!0===pa.ctrlKey;pa=2===pa.button||Ga;if(!X.modal||pa)la.current=!0}),style:lf(pe({},b.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),nt=(0,xo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:p}=b;b=Af(b,["__scopeDropdownMenu"]);p=Du(p);
return(0,xo.createElement)(CA,ff({},p,b,{ref:g}))}),FG=b=>{const {__scopeDropdownMenu:g,children:p,dir:G,open:X,defaultOpen:la,onOpenChange:pa,modal:Ga=!0}=b;b=Du(g);const Qa=(0,xo.useRef)(null),[Za=!1,eb]=Nj({prop:X,defaultProp:la,onChange:pa});return(0,xo.createElement)(CG,{scope:g,triggerId:zi(),triggerRef:Qa,contentId:zi(),open:Za,onOpenChange:eb,onOpenToggle:(0,xo.useCallback)(()=>eb(mb=>!mb),[eb]),modal:Ga},(0,xo.createElement)(DA,ff({},b,{open:Za,onOpenChange:eb,dir:G,modal:Ga}),p))};nb=W(588);
var GG=ef(function(){const b=bf(),g=p=>{p.preventDefault()};return(0,nb.jsxs)(FG,{children:[(0,nb.jsx)(DG,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*b.viewport.camera.zoom).toFixed(0)+"%"}),(0,nb.jsxs)(EG,{onCloseAutoFocus:p=>p.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,nb.jsxs)(nt,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToFit,children:["Zoom to drawing",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",
{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:""})," ",(0,nb.jsx)("code",{children:"1"})]})})]}),(0,nb.jsxs)(nt,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToSelection,disabled:0===b.selectedShapesArray.length,children:["Zoom to fit selection",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:""})," ",(0,nb.jsx)("code",{children:"2"})]})})]}),(0,nb.jsxs)(nt,{className:"tl-menu-item",
onSelect:g,onClick:b.api.zoomIn,children:["Zoom in",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"+"})]})})]}),(0,nb.jsxs)(nt,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomOut,children:["Zoom out",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",
{children:"-"})]})})]}),(0,nb.jsxs)(nt,{className:"tl-menu-item",onSelect:g,onClick:b.api.resetZoom,children:["Reset zoom",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:""})," ",(0,nb.jsx)("code",{children:"0"})]})})]})]})]})}),FA=W(22),GA=["horizontal","vertical"],kr=(0,FA.forwardRef)((b,g)=>{const {decorative:p,orientation:G="horizontal"}=b;b=Af(b,["decorative","orientation"]);const X=GA.includes(G)?
G:"horizontal";return(0,FA.createElement)(kl.div,ff({"data-orientation":X},p?{role:"none"}:{"aria-orientation":"vertical"===X?X:void 0,role:"separator"},b,{ref:g}))});kr.propTypes={orientation(b,g,p){b=b[g];g=String(b);return b&&!GA.includes(b)?Error(`Invalid prop \`orientation\` of value \`${g}\` supplied to \`${p}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};nb=W(588);var HG=ef(function(){const b=bf(),g=pu.useCallback(()=>{b.api.undo()},[b]),p=pu.useCallback(()=>{b.api.redo()},[b]),G=pu.useCallback(()=>{b.api.zoomIn()},[b]),X=pu.useCallback(()=>{b.api.zoomOut()},[b]);return(0,nb.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",children:[!b.readOnly&&(0,nb.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,nb.jsx)(ka,{tooltip:"Undo",onClick:g,children:(0,nb.jsx)(Bh,{name:"arrow-back-up"})}),
(0,nb.jsx)(ka,{tooltip:"Redo",onClick:p,children:(0,nb.jsx)(Bh,{name:"arrow-forward-up"})})]}),(0,nb.jsxs)("div",{className:`tl-toolbar tl-zoom-bar ${b.readOnly?"":"ml-4"}`,children:[(0,nb.jsx)(ka,{tooltip:"Zoom in",onClick:G,id:"tl-zoom-in",children:(0,nb.jsx)(Bh,{name:"plus"})}),(0,nb.jsx)(ka,{tooltip:"Zoom out",onClick:X,id:"tl-zoom-out",children:(0,nb.jsx)(Bh,{name:"minus"})}),(0,nb.jsx)(kr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,nb.jsx)(GG,{})]})]})}),HA=uf(W(22)),IG=uf(W(31));
nb=W(588);var Eu=b=>`[${b.map(g=>{var p;return null!=(p=null==g?void 0:g.toFixed(2))?p:"-"}).join(", ")}]`,JG=ef(()=>{var b;const {viewport:{bounds:g,camera:{point:p,zoom:G}},inputs:X}=wi(),la=HA.default.useRef();HA.default.useEffect(()=>{const Ga=document.getElementById("tl-statusbar-anchor");la.current=Ga},[]);const pa=[["Z",null!=(b=null==G?void 0:G.toFixed(2))?b:"null"],["MP",Eu(X.currentPoint)],["MS",Eu(X.currentScreenPoint)],["VP",Eu(p)],["VBR",Eu([g.maxX,g.maxY])]].map(Ga=>Ga.join("")).join("|");
b=la.current?IG.default.createPortal((0,nb.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:pa}),la.current):null;return(0,nb.jsx)(nb.Fragment,{children:b})}),Fu=uf(W(22));nb=W(588);var hp=ef(b=>{var {id:g,icon:p,tooltip:G,tooltipSide:X="left",handleClick:la}=b;b=Af(b,["id","icon","tooltip","tooltipSide","handleClick"]);var pa;const Ga=bf(),Qa=null==(pa=[...Ga.Tools,Wr,Xr])?void 0:pa.find(Za=>Za.id===g);pa=(pa=null==Qa?void 0:Qa.shortcut)&&G?(0,nb.jsxs)(nb.Fragment,{children:[G,
(0,nb.jsx)("span",{className:"ml-2 keyboard-shortcut",children:pa.map((Za,eb)=>(0,nb.jsx)("code",{children:Za.toUpperCase()},eb)).reduce((Za,eb)=>[Za," | ",eb])})]}):G;return(0,nb.jsx)(ka,lf(pe({},b),{tooltipSide:X,tooltip:pa,"data-tool":g,"data-selected":g===Ga.selectedTool.id,onClick:la,children:"string"===typeof p?(0,nb.jsx)(Bh,{name:p}):p}))}),Wj=W(22),[IA]=Aj("Popover",[ds]),Gu=ds(),[KG,ot]=IA("Popover"),JA=(0,Wj.forwardRef)((b,g)=>{var {__scopePopover:p}=b;const G=Af(b,["__scopePopover"]),X=
ot("PopoverTrigger",p);p=Gu(p);g=Cf(g,X.triggerRef);b=(0,Wj.createElement)(kl.button,ff({type:"button","aria-haspopup":"dialog","aria-expanded":X.open,"aria-controls":X.contentId,"data-state":X.open?"open":"closed"},G,{ref:g,onClick:If(b.onClick,X.onOpenToggle)}));return X.hasCustomAnchor?b:(0,Wj.createElement)(kw,ff({asChild:!0},p),b)}),[,LG]=IA("PopoverPortal",{forceMount:void 0}),KA=(0,Wj.forwardRef)((b,g)=>{var p=LG("PopoverContent",b.__scopePopover);({forceMount:p=p.forceMount}=b);const G=Af(b,
["forceMount"]);b=ot("PopoverContent",b.__scopePopover);return(0,Wj.createElement)(lt,{present:p||b.open},b.modal?(0,Wj.createElement)(MG,ff({},G,{ref:g})):(0,Wj.createElement)(NG,ff({},G,{ref:g})))}),MG=(0,Wj.forwardRef)((b,g)=>{const p=ot("PopoverContent",b.__scopePopover),G=(0,Wj.useRef)(null);g=Cf(g,G);const X=(0,Wj.useRef)(!1);(0,Wj.useEffect)(()=>{const la=G.current;if(la)return rw(la)},[]);return(0,Wj.createElement)(Au,{as:fp,allowPinchZoom:!0},(0,Wj.createElement)(LA,ff({},b,{ref:g,trapFocus:p.open,
disableOutsidePointerEvents:!0,onCloseAutoFocus:If(b.onCloseAutoFocus,la=>{var pa;la.preventDefault();X.current||null===(pa=p.triggerRef.current)||void 0===pa||pa.focus()}),onPointerDownOutside:If(b.onPointerDownOutside,la=>{la=la.detail.originalEvent;const pa=0===la.button&&!0===la.ctrlKey;X.current=2===la.button||pa},{checkForDefaultPrevented:!1}),onFocusOutside:If(b.onFocusOutside,la=>la.preventDefault(),{checkForDefaultPrevented:!1})})))}),NG=(0,Wj.forwardRef)((b,g)=>{const p=ot("PopoverContent",
b.__scopePopover),G=(0,Wj.useRef)(!1);return(0,Wj.createElement)(LA,ff({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:X=>{var la;null===(la=b.onCloseAutoFocus)||void 0===la||la.call(b,X);if(!X.defaultPrevented){var pa;G.current||null===(pa=p.triggerRef.current)||void 0===pa||pa.focus();X.preventDefault()}G.current=!1},onInteractOutside:X=>{var la,pa;null===(la=b.onInteractOutside)||void 0===la||la.call(b,X);X.defaultPrevented||(G.current=!0);la=X.target;(null===(pa=p.triggerRef.current)||
void 0===pa?0:pa.contains(la))&&X.preventDefault()}}))}),LA=(0,Wj.forwardRef)((b,g)=>{const {__scopePopover:p,trapFocus:G,onOpenAutoFocus:X,onCloseAutoFocus:la,disableOutsidePointerEvents:pa,onEscapeKeyDown:Ga,onPointerDownOutside:Qa,onFocusOutside:Za,onInteractOutside:eb}=b;b=Af(b,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const mb=ot("PopoverContent",p),Lb=Gu(p);vb();return(0,Wj.createElement)(gA,
{asChild:!0,loop:!0,trapped:G,onMountAutoFocus:X,onUnmountAutoFocus:la},(0,Wj.createElement)(fw,{asChild:!0,disableOutsidePointerEvents:pa,onInteractOutside:eb,onEscapeKeyDown:Ga,onPointerDownOutside:Qa,onFocusOutside:Za,onDismiss:()=>mb.onOpenChange(!1)},(0,Wj.createElement)(lw,ff({"data-state":mb.open?"open":"closed",role:"dialog",id:mb.contentId},Lb,b,{ref:g,style:lf(pe({},b.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),MA=(0,Wj.forwardRef)((b,
g)=>{var {__scopePopover:p}=b;b=Af(b,["__scopePopover"]);p=Gu(p);return(0,Wj.createElement)(aA,ff({},p,b,{ref:g}))}),NA=b=>{const {__scopePopover:g,children:p,open:G,defaultOpen:X,onOpenChange:la,modal:pa=!1}=b;b=Gu(g);const Ga=(0,Wj.useRef)(null),[Qa,Za]=(0,Wj.useState)(!1),[eb=!1,mb]=Nj({prop:G,defaultProp:X,onChange:la});return(0,Wj.createElement)(mw,b,(0,Wj.createElement)(KG,{scope:g,contentId:zi(),triggerRef:Ga,open:eb,onOpenChange:mb,onOpenToggle:(0,Wj.useCallback)(()=>mb(Lb=>!Lb),[mb]),hasCustomAnchor:Qa,
onCustomAnchorAdd:(0,Wj.useCallback)(()=>Za(!0),[]),onCustomAnchorRemove:(0,Wj.useCallback)(()=>Za(!1),[]),modal:pa},p))};nb=W(588);var OA=ef(function(b){var {popoverSide:g="left",setGeometry:p,activeGeometry:G,chevron:X=!0}=b;b=Af(b,["popoverSide","setGeometry","activeGeometry","chevron"]);const la=[{id:"box",icon:"square",tooltip:"Rectangle"},{id:"ellipse",icon:"circle",tooltip:"Circle"},{id:"polygon",icon:"triangle",tooltip:"Triangle"}];var pa={id:"shapes",icon:"triangle-square-circle",tooltip:"Shape"};
pa=G?la.find(Ga=>Ga.id===G):pa;return(0,nb.jsxs)(NA,{children:[(0,nb.jsx)(JA,{asChild:!0,children:(0,nb.jsxs)("div",lf(pe({},b),{className:"tl-geometry-tools-pane-anchor",children:[(0,nb.jsx)(hp,lf(pe({},pa),{tooltipSide:g})),X&&(0,nb.jsx)(Bh,{"data-selected":G,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,nb.jsxs)(KA,{className:"tl-popover-content",side:g,sideOffset:15,children:[(0,nb.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(g)?"flex-col":
"flex-row"}`,children:la.map(Ga=>(0,nb.jsx)(hp,{id:Ga.id,icon:Ga.icon,tooltip:G?Ga.tooltip:"",handleClick:p,tooltipSide:g},Ga.id))}),(0,nb.jsx)(MA,{className:"tl-popover-arrow"})]})]})}),vi=W(22),PA=W(22),QA=["PageUp","PageDown"],RA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],SA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},
[yw,OG,PG]=Eb("Slider"),[TA]=Aj("Slider",[PG]),[QG,Hu]=TA("Slider"),RG=(0,vi.forwardRef)((b,g)=>{function p(Ne){const Ae=ph(De,Ne);la(Ne,Ae)}function G(Ne){la(Ne,vd.current)}function X(){De[vd.current]!==jf.current[vd.current]&&gc(De)}function la(Ne,Ae,{commit:Ad}={commit:!1}){const ad=(String(Za).split(".")[1]||"").length;Ne=Dg(Math.round((Ne-Ga)/Za)*Za+Ga,ad);const ed=sg(Ne,[Ga,Qa]);Ye((ld=[])=>{const $d=ej(ld,ed,Ae);var Oe=Lb*Za;if(0<Oe){const mf=Ug($d);Oe=Math.min(...mf)>=Oe}else Oe=!0;return Oe?
(vd.current=$d.indexOf(ed),(Oe=String($d)!==String(ld))&&Ad&&gc($d),Oe?$d:ld):ld})}const {name:pa,min:Ga=0,max:Qa=100,step:Za=1,orientation:eb="horizontal",disabled:mb=!1,minStepsBetweenThumbs:Lb=0,defaultValue:Vb=[Ga],value:Pb,onValueChange:ec=()=>{},onValueCommit:gc=()=>{},inverted:Tb=!1}=b,nc=Af(b,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[oc,Ec]=(0,vi.useState)(null);g=Cf(g,Ne=>Ec(Ne));const Sc=(0,vi.useRef)(new Set),
vd=(0,vi.useRef)(0);var Wd="horizontal"===eb;const he=oc?!!oc.closest("form"):!0;Wd=Wd?SG:TG;const [De=[],Ye]=Nj({prop:Pb,defaultProp:Vb,onChange:Ne=>{var Ae;null===(Ae=[...Sc.current][vd.current])||void 0===Ae||Ae.focus();ec(Ne)}}),jf=(0,vi.useRef)(De);return(0,vi.createElement)(QG,{scope:b.__scopeSlider,disabled:mb,min:Ga,max:Qa,valueIndexToChangeRef:vd,thumbs:Sc.current,values:De,orientation:eb},(0,vi.createElement)(yw.Provider,{scope:b.__scopeSlider},(0,vi.createElement)(yw.Slot,{scope:b.__scopeSlider},
(0,vi.createElement)(Wd,ff({"aria-disabled":mb,"data-disabled":mb?"":void 0},nc,{ref:g,onPointerDown:If(nc.onPointerDown,()=>{mb||(jf.current=De)}),min:Ga,max:Qa,inverted:Tb,onSlideStart:mb?void 0:p,onSlideMove:mb?void 0:G,onSlideEnd:mb?void 0:X,onHomeKeyDown:()=>!mb&&la(Ga,0,{commit:!0}),onEndKeyDown:()=>!mb&&la(Qa,De.length-1,{commit:!0}),onStepKeyDown:({event:Ne,direction:Ae})=>{if(!mb){Ne=QA.includes(Ne.key)||Ne.shiftKey&&RA.includes(Ne.key);const Ad=vd.current;la(De[Ad]+Za*(Ne?10:1)*Ae,Ad,{commit:!0})}}})))),
he&&De.map((Ne,Ae)=>(0,vi.createElement)(YG,{key:Ae,name:pa?pa+(1<De.length?"[]":""):void 0,value:Ne})))}),[UA,VA]=TA("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),SG=(0,vi.forwardRef)((b,g)=>{function p(nc){const oc=Pb.current||Lb.getBoundingClientRect(),Ec=bh([0,oc.width],Tb?[G,X]:[X,G]);Pb.current=oc;return Ec(nc-oc.left)}const {min:G,max:X,dir:la,inverted:pa,onSlideStart:Ga,onSlideMove:Qa,onSlideEnd:Za,onStepKeyDown:eb}=b,mb=Af(b,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
[Lb,Vb]=(0,vi.useState)(null);g=Cf(g,nc=>Vb(nc));const Pb=(0,vi.useRef)(),ec=Ub(la),gc="ltr"===ec,Tb=gc&&!pa||!gc&&pa;return(0,vi.createElement)(UA,{scope:b.__scopeSlider,startEdge:Tb?"left":"right",endEdge:Tb?"right":"left",direction:Tb?1:-1,size:"width"},(0,vi.createElement)(WA,ff({dir:ec,"data-orientation":"horizontal"},mb,{ref:g,style:lf(pe({},mb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:nc=>{nc=p(nc.clientX);null===Ga||void 0===Ga||Ga(nc)},onSlideMove:nc=>{nc=
p(nc.clientX);null===Qa||void 0===Qa||Qa(nc)},onSlideEnd:()=>{Pb.current=void 0;null===Za||void 0===Za||Za()},onStepKeyDown:nc=>{const oc=SA[Tb?"from-left":"from-right"].includes(nc.key);null===eb||void 0===eb||eb({event:nc,direction:oc?-1:1})}})))}),TG=(0,vi.forwardRef)((b,g)=>{function p(Pb){const ec=Lb.current||mb.current.getBoundingClientRect(),gc=bh([0,ec.height],Vb?[X,G]:[G,X]);Lb.current=ec;return gc(Pb-ec.top)}const {min:G,max:X,inverted:la,onSlideStart:pa,onSlideMove:Ga,onSlideEnd:Qa,onStepKeyDown:Za}=
b,eb=Af(b,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),mb=(0,vi.useRef)(null);g=Cf(g,mb);const Lb=(0,vi.useRef)(),Vb=!la;return(0,vi.createElement)(UA,{scope:b.__scopeSlider,startEdge:Vb?"bottom":"top",endEdge:Vb?"top":"bottom",size:"height",direction:Vb?1:-1},(0,vi.createElement)(WA,ff({"data-orientation":"vertical"},eb,{ref:g,style:lf(pe({},eb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Pb=>{Pb=p(Pb.clientY);null===pa||void 0===
pa||pa(Pb)},onSlideMove:Pb=>{Pb=p(Pb.clientY);null===Ga||void 0===Ga||Ga(Pb)},onSlideEnd:()=>{Lb.current=void 0;null===Qa||void 0===Qa||Qa()},onStepKeyDown:Pb=>{const ec=SA[Vb?"from-bottom":"from-top"].includes(Pb.key);null===Za||void 0===Za||Za({event:Pb,direction:ec?-1:1})}})))}),WA=(0,vi.forwardRef)((b,g)=>{const {__scopeSlider:p,onSlideStart:G,onSlideMove:X,onSlideEnd:la,onHomeKeyDown:pa,onEndKeyDown:Ga,onStepKeyDown:Qa}=b,Za=Af(b,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
eb=Hu("Slider",p);return(0,vi.createElement)(kl.span,ff({},Za,{ref:g,onKeyDown:If(b.onKeyDown,mb=>{"Home"===mb.key?(pa(mb),mb.preventDefault()):"End"===mb.key?(Ga(mb),mb.preventDefault()):QA.concat(RA).includes(mb.key)&&(Qa(mb),mb.preventDefault())}),onPointerDown:If(b.onPointerDown,mb=>{const Lb=mb.target;Lb.setPointerCapture(mb.pointerId);mb.preventDefault();eb.thumbs.has(Lb)?Lb.focus():G(mb)}),onPointerMove:If(b.onPointerMove,mb=>{mb.target.hasPointerCapture(mb.pointerId)&&X(mb)}),onPointerUp:If(b.onPointerUp,
mb=>{const Lb=mb.target;Lb.hasPointerCapture(mb.pointerId)&&(Lb.releasePointerCapture(mb.pointerId),la(mb))})}))}),UG=(0,vi.forwardRef)((b,g)=>{var {__scopeSlider:p}=b;b=Af(b,["__scopeSlider"]);p=Hu("SliderTrack",p);return(0,vi.createElement)(kl.span,ff({"data-disabled":p.disabled?"":void 0,"data-orientation":p.orientation},b,{ref:g}))}),VG=(0,vi.forwardRef)((b,g)=>{var {__scopeSlider:p}=b;const G=Af(b,["__scopeSlider"]),X=Hu("SliderRange",p);p=VA("SliderRange",p);var la=(0,vi.useRef)(null);g=Cf(g,
la);var pa=X.values.length;la=X.values.map(Ga=>Tf(Ga,X.min,X.max));pa=1<pa?Math.min(...la):0;la=100-Math.max(...la);return(0,vi.createElement)(kl.span,ff({"data-orientation":X.orientation,"data-disabled":X.disabled?"":void 0},G,{ref:g,style:lf(pe({},b.style),{[p.startEdge]:pa+"%",[p.endEdge]:la+"%"})}))}),WG=(0,vi.forwardRef)((b,g)=>{const p=OG(b.__scopeSlider),[G,X]=(0,vi.useState)(null);g=Cf(g,pa=>X(pa));const la=(0,vi.useMemo)(()=>G?p().findIndex(pa=>pa.ref.current===G):-1,[p,G]);return(0,vi.createElement)(XG,
ff({},b,{ref:g,index:la}))}),XG=(0,vi.forwardRef)((b,g)=>{const {__scopeSlider:p,index:G}=b,X=Af(b,["__scopeSlider","index"]),la=Hu("SliderThumb",p),pa=VA("SliderThumb",p),[Ga,Qa]=(0,vi.useState)(null);g=Cf(g,Vb=>Qa(Vb));var Za=Wf(Ga);const eb=la.values[G],mb=void 0===eb?0:Tf(eb,la.min,la.max),Lb=ng(G,la.values.length);Za=(Za=null===Za||void 0===Za?void 0:Za[pa.size])?Sg(Za,mb,pa.direction):0;(0,vi.useEffect)(()=>{if(Ga)return la.thumbs.add(Ga),()=>{la.thumbs.delete(Ga)}},[Ga,la.thumbs]);return(0,vi.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[pa.startEdge]:`calc(${mb}% + ${Za}px)`}},(0,vi.createElement)(yw.ItemSlot,{scope:b.__scopeSlider},(0,vi.createElement)(kl.span,ff({role:"slider","aria-label":b["aria-label"]||Lb,"aria-valuemin":la.min,"aria-valuenow":eb,"aria-valuemax":la.max,"aria-orientation":la.orientation,"data-orientation":la.orientation,"data-disabled":la.disabled?"":void 0,tabIndex:la.disabled?void 0:0},X,{ref:g,style:void 0===eb?{display:"none"}:
b.style,onFocus:If(b.onFocus,()=>{la.valueIndexToChangeRef.current=G})}))))}),YG=b=>{const {value:g}=b;b=Af(b,["value"]);const p=(0,vi.useRef)(null),G=Vf(g);(0,vi.useEffect)(()=>{const X=p.current,la=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(G!==g&&la){const pa=new Event("input",{bubbles:!0});la.call(X,g);X.dispatchEvent(pa)}},[G,g]);return(0,vi.createElement)("input",ff({style:{display:"none"}},b,{ref:p,defaultValue:g}))},ZG=RG,$G=UG,aH=VG,bH=WG,Iu=uf(W(22));
nb=W(588);var XA=ef(b=>{var {side:g,align:p,alignOffset:G,label:X,arrow:la,children:pa,border:Ga}=b;b=Af(b,"side align alignOffset label arrow children border".split(" "));const Qa=Iu.useRef(null),[Za,eb]=Iu.useState(!1),{viewport:{bounds:mb,camera:{point:Lb,zoom:Vb}}}=bf(),[Pb,ec]=Iu.useState(0);Iu.useEffect(()=>{if(Qa.current&&Za){var gc=Qa.current.getBoundingClientRect();wf.boundsContain(mb,{minX:gc.x,minY:gc.y,maxX:gc.right,maxY:gc.bottom,width:gc.width,height:gc.height})||ec(Tb=>Tb+1)}},[Lb[0],
Lb[1],Vb,Za]);return(0,nb.jsxs)(NA,{onOpenChange:gc=>eb(gc),children:[(0,nb.jsx)(JA,lf(pe({},b),{"data-border":Ga,className:"tl-button tl-popover-trigger-button",children:X})),(0,nb.jsxs)(KA,{ref:Qa,className:"tl-popover-content",align:p,alignOffset:G,side:g,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[pa,la&&(0,nb.jsx)(MA,{className:"tl-popover-arrow"})]},"popover-content-"+Pb)]})}),cH=uf(W(22));nb=W(588);var dH=uf(W(22)),yf=W(22),YA=W(31),ip=uf(W(22)),Mn=W(22),
zw=W(22),eH=W(31),Dn="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const p=(0,zw.forwardRef)((G,X)=>{var {asChild:la}=G;G=Af(G,["asChild"]);la=la?fp:g;(0,zw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,zw.createElement)(la,ff({},G,{ref:X}))});p.displayName=`Primitive.${g}`;return lf(pe({},b),{[g]:p})},{}),ZA,fH=(0,Mn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gH=(0,Mn.forwardRef)((b,
g)=>{var p;const {disableOutsidePointerEvents:G=!1,onEscapeKeyDown:X,onPointerDownOutside:la,onFocusOutside:pa,onInteractOutside:Ga,onDismiss:Qa}=b,Za=Af(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),eb=(0,Mn.useContext)(fH),[mb,Lb]=(0,Mn.useState)(null),Vb=null!==(p=null===mb||void 0===mb?void 0:mb.ownerDocument)&&void 0!==p?p:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Pb]=(0,Mn.useState)({});g=
Cf(g,oc=>Lb(oc));p=Array.from(eb.layers);var [ec]=[...eb.layersWithOutsidePointerEventsDisabled].slice(-1);ec=p.indexOf(ec);const gc=mb?p.indexOf(mb):-1;p=0<eb.layersWithOutsidePointerEventsDisabled.size;const Tb=gc>=ec;ec=Qf(oc=>{const Ec=oc.target,Sc=[...eb.branches].some(vd=>vd.contains(Ec));Tb&&!Sc&&(null===la||void 0===la||la(oc),null===Ga||void 0===Ga||Ga(oc),oc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Vb);const nc=cj(oc=>{const Ec=oc.target;[...eb.branches].some(Sc=>Sc.contains(Ec))||
(null===pa||void 0===pa||pa(oc),null===Ga||void 0===Ga||Ga(oc),oc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Vb);ok(oc=>{gc===eb.layers.size-1&&(null===X||void 0===X||X(oc),!oc.defaultPrevented&&Qa&&(oc.preventDefault(),Qa()))},Vb);(0,Mn.useEffect)(()=>{if(mb)return G&&(0===eb.layersWithOutsidePointerEventsDisabled.size&&(ZA=Vb.body.style.pointerEvents,Vb.body.style.pointerEvents="none"),eb.layersWithOutsidePointerEventsDisabled.add(mb)),eb.layers.add(mb),vh(),()=>{G&&1===eb.layersWithOutsidePointerEventsDisabled.size&&
(Vb.body.style.pointerEvents=ZA)}},[mb,Vb,G,eb]);(0,Mn.useEffect)(()=>()=>{mb&&(eb.layers.delete(mb),eb.layersWithOutsidePointerEventsDisabled.delete(mb),vh())},[mb,eb]);(0,Mn.useEffect)(()=>{const oc=()=>Pb({});document.addEventListener("dismissableLayer.update",oc);return()=>document.removeEventListener("dismissableLayer.update",oc)},[]);return(0,Mn.createElement)(Dn.div,ff({},Za,{ref:g,style:pe({pointerEvents:p?Tb?"auto":"none":void 0},b.style),onFocusCapture:If(b.onFocusCapture,nc.onFocusCapture),
onBlurCapture:If(b.onBlurCapture,nc.onBlurCapture),onPointerDownCapture:If(b.onPointerDownCapture,ec.onPointerDownCapture)}))}),kq=W(22),$A={bubbles:!1,cancelable:!0},hH=(0,kq.forwardRef)((b,g)=>{const {loop:p=!1,trapped:G=!1,onMountAutoFocus:X,onUnmountAutoFocus:la}=b;b=Af(b,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [pa,Ga]=(0,kq.useState)(null),Qa=sf(X),Za=sf(la),eb=(0,kq.useRef)(null);g=Cf(g,Vb=>Ga(Vb));const mb=(0,kq.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,kq.useEffect)(()=>{if(G){let Vb=function(ec){!mb.paused&&pa&&(ec=ec.target,pa.contains(ec)?eb.current=ec:$i(eb.current,{select:!0}))},Pb=function(ec){!mb.paused&&pa&&(pa.contains(ec.relatedTarget)||$i(eb.current,{select:!0}))};document.addEventListener("focusin",Vb);document.addEventListener("focusout",Pb);return()=>{document.removeEventListener("focusin",Vb);document.removeEventListener("focusout",Pb)}}},[G,pa,mb.paused]);(0,kq.useEffect)(()=>{if(pa){aB.add(mb);const Vb=document.activeElement;
if(!pa.contains(Vb)){const Pb=new CustomEvent("focusScope.autoFocusOnMount",$A);pa.addEventListener("focusScope.autoFocusOnMount",Qa);pa.dispatchEvent(Pb);Pb.defaultPrevented||(fk(Sm(Bi(pa)),{select:!0}),document.activeElement===Vb&&$i(pa))}return()=>{pa.removeEventListener("focusScope.autoFocusOnMount",Qa);setTimeout(()=>{const Pb=new CustomEvent("focusScope.autoFocusOnUnmount",$A);pa.addEventListener("focusScope.autoFocusOnUnmount",Za);pa.dispatchEvent(Pb);Pb.defaultPrevented||$i(null!==Vb&&void 0!==
Vb?Vb:document.body,{select:!0});pa.removeEventListener("focusScope.autoFocusOnUnmount",Za);aB.remove(mb)},0)}}},[pa,Qa,Za,mb]);const Lb=(0,kq.useCallback)(Vb=>{if((p||G)&&!mb.paused){var Pb=document.activeElement;if("Tab"===Vb.key&&!Vb.altKey&&!Vb.ctrlKey&&!Vb.metaKey&&Pb){const gc=Vb.currentTarget;var ec=gc;const Tb=Bi(ec),nc=wk(Tb,ec);ec=wk(Tb.reverse(),ec);const [oc,Ec]=[nc,ec];oc&&Ec?Vb.shiftKey||Pb!==Ec?Vb.shiftKey&&Pb===oc&&(Vb.preventDefault(),p&&$i(Ec,{select:!0})):(Vb.preventDefault(),p&&
$i(oc,{select:!0})):Pb===gc&&Vb.preventDefault()}}},[p,G,mb.paused]);return(0,kq.createElement)(Dn.div,ff({tabIndex:-1},b,{ref:g,onKeyDown:Lb}))}),aB=function(){let b=[];return{add(g){const p=b[0];g===p||null!==p&&void 0!==p&&p.pause();b=pm(b,g);b.unshift(g)},remove(g){var p;b=pm(b,g);null===(p=b[0])||void 0===p||p.resume()}}}(),ln=W(22),[Aw,bB]=Aj("Popper"),[iH,cB]=Aw("Popper"),jH=(0,ln.forwardRef)((b,g)=>{const {__scopePopper:p,virtualRef:G}=b;b=Af(b,["__scopePopper","virtualRef"]);const X=cB("PopperAnchor",
p),la=(0,ln.useRef)(null);g=Cf(g,la);(0,ln.useEffect)(()=>{X.onAnchorChange((null===G||void 0===G?void 0:G.current)||la.current)});return G?null:(0,ln.createElement)(Dn.div,ff({},b,{ref:g}))}),[kH]=Aw("PopperContent"),[lH,mH]=Aw("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),nH=(0,ln.forwardRef)((b,g)=>{var p,G,X,la,pa,Ga,Qa,Za;const {__scopePopper:eb,side:mb="bottom",sideOffset:Lb=0,align:Vb="center",alignOffset:Pb=0,arrowPadding:ec=0,collisionBoundary:gc=[],collisionPadding:Tb=0,sticky:nc=
"partial",hideWhenDetached:oc=!1,avoidCollisions:Ec=!0,onPlaced:Sc}=b,vd=Af(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),Wd=cB("PopperContent",eb),[he,De]=(0,ln.useState)(null);g=Cf(g,mp=>De(mp));const [Ye,jf]=(0,ln.useState)(null);var Ne=Wf(Ye),Ae=null!==(p=null===Ne||void 0===Ne?void 0:Ne.width)&&void 0!==p?p:0;p=null!==(G=null===Ne||void 0===Ne?void 0:Ne.height)&&void 0!==G?G:0;G=
mb+("center"!==Vb?"-"+Vb:"");Ne="number"===typeof Tb?Tb:pe({top:0,right:0,bottom:0,left:0},Tb);const Ad=Array.isArray(gc)?gc:[gc],ad=0<Ad.length;Ne={padding:Ne,boundary:Ad.filter(bn),altBoundary:ad};const {reference:ed,floating:ld,strategy:$d,x:Oe,y:mf,placement:Sf,middlewareData:qf,update:Gf}=Zi({strategy:"fixed",placement:G,whileElementsMounted:Mh,middleware:[oH(),Uz({mainAxis:Lb+p,alignmentAxis:Pb}),Ec?Vz(pe({mainAxis:!0,crossAxis:!1,limiter:"partial"===nc?Wz():void 0},Ne)):void 0,Ye?Zz({element:Ye,
padding:ec}):void 0,Ec?Sz(pe({},Ne)):void 0,nF(lf(pe({},Ne),{apply:({elements:mp,availableWidth:sK,availableHeight:tK})=>{mp.floating.style.setProperty("--radix-popper-available-width",`${sK}px`);mp.floating.style.setProperty("--radix-popper-available-height",`${tK}px`)}})),pH({arrowWidth:Ae,arrowHeight:p}),oc?Tz({strategy:"referenceHidden"}):void 0].filter(tg)});Pm(()=>{ed(Wd.anchor)},[ed,Wd.anchor]);const hh=null!==Oe&&null!==mf,[Ef,kh]=an(Sf),uh=sf(Sc);Pm(()=>{hh&&(null===uh||void 0===uh||uh())},
[hh,uh]);Ae=null===(X=qf.arrow)||void 0===X?void 0:X.x;X=null===(la=qf.arrow)||void 0===la?void 0:la.y;la=0!==(null===(pa=qf.arrow)||void 0===pa?void 0:pa.centerOffset);const [qj,ml]=(0,ln.useState)();Pm(()=>{he&&ml(window.getComputedStyle(he).zIndex)},[he]);const {hasParent:nl,positionUpdateFns:lp}=mH("PopperContent",eb),Fp=!nl;(0,ln.useLayoutEffect)(()=>{if(!Fp)return lp.add(Gf),()=>{lp.delete(Gf)}},[Fp,lp,Gf]);Pm(()=>{Fp&&hh&&Array.from(lp).reverse().forEach(mp=>requestAnimationFrame(mp))},[Fp,
hh,lp]);pa=lf(pe({"data-side":Ef,"data-align":kh},vd),{ref:g,style:lf(pe({},vd.style),{animation:hh?void 0:"none",opacity:null!==(Ga=qf.hide)&&void 0!==Ga&&Ga.referenceHidden?0:void 0})});return(0,ln.createElement)("div",{ref:ld,"data-radix-popper-content-wrapper":"",style:{position:$d,left:0,top:0,transform:hh?`translate3d(${Math.round(Oe)}px, ${Math.round(mf)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:qj,["--radix-popper-transform-origin"]:[null===(Qa=qf.transformOrigin)||
void 0===Qa?void 0:Qa.x,null===(Za=qf.transformOrigin)||void 0===Za?void 0:Za.y].join(" ")},dir:b.dir},(0,ln.createElement)(kH,{scope:eb,placedSide:Ef,onArrowChange:jf,arrowX:Ae,arrowY:X,shouldHideArrow:la},Fp?(0,ln.createElement)(lH,{scope:eb,hasParent:!0,positionUpdateFns:lp},(0,ln.createElement)(Dn.div,pa)):(0,ln.createElement)(Dn.div,pa)))}),oH=()=>({name:"anchorCssProperties",fn(b){const {rects:g,elements:p}=b,{width:G,height:X}=g.reference;p.floating.style.setProperty("--radix-popper-anchor-width",
`${G}px`);p.floating.style.setProperty("--radix-popper-anchor-height",`${X}px`);return{}}}),pH=b=>({name:"transformOrigin",options:b,fn(g){var p,G,X,la,pa;const {placement:Ga,rects:Qa,middlewareData:Za}=g,eb=(g=0!==(null===(p=Za.arrow)||void 0===p?void 0:p.centerOffset))?0:b.arrowWidth;p=g?0:b.arrowHeight;const [mb,Lb]=an(Ga),Vb={start:"0%",center:"50%",end:"100%"}[Lb],Pb=(null!==(G=null===(X=Za.arrow)||void 0===X?void 0:X.x)&&void 0!==G?G:0)+eb/2;G=(null!==(la=null===(pa=Za.arrow)||void 0===pa?void 0:
pa.y)&&void 0!==la?la:0)+p/2;pa=la="";"bottom"===mb?(la=g?Vb:`${Pb}px`,pa=`${-p}px`):"top"===mb?(la=g?Vb:`${Pb}px`,pa=`${Qa.floating.height+p}px`):"right"===mb?(la=`${-p}px`,pa=g?Vb:`${G}px`):"left"===mb&&(la=`${Qa.floating.width+p}px`,pa=g?Vb:`${G}px`);return{data:{x:la,y:pa}}}}),qH=b=>{const {__scopePopper:g,children:p}=b,[G,X]=(0,ln.useState)(null);return(0,ln.createElement)(iH,{scope:g,anchor:G,onAnchorChange:X},p)},dB=W(22),rH=uf(W(31)),sH=(0,dB.forwardRef)((b,g)=>{var p;const {container:G=null===
globalThis||void 0===globalThis?void 0:null===(p=globalThis.document)||void 0===p?void 0:p.body}=b;b=Af(b,["container"]);return G?rH.default.createPortal((0,dB.createElement)(Dn.div,ff({},b,{ref:g})),G):null}),eB=W(22),tH=(0,eB.forwardRef)((b,g)=>(0,eB.createElement)(Dn.span,ff({},b,{ref:g,style:pe({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},b.style)}))),uH=[" ","Enter","ArrowUp","ArrowDown"],vH=
[" ","Enter"],[Ju,Ku,wH]=function(b){var g=b+"CollectionProvider";const [p,G]=Aj(g),[X,la]=p(g,{collectionRef:{current:null},itemMap:new Map}),pa=eb=>{const {scope:mb,children:Lb}=eb;eb=ip.default.useRef(null);const Vb=ip.default.useRef(new Map).current;return ip.default.createElement(X,{scope:mb,itemMap:Vb,collectionRef:eb},Lb)};Object.assign(pa,{displayName:g});const Ga=b+"CollectionSlot";g=ip.default.forwardRef((eb,mb)=>{const {scope:Lb,children:Vb}=eb;eb=la(Ga,Lb);mb=Cf(mb,eb.collectionRef);return ip.default.createElement(fp,
{ref:mb},Vb)});Object.assign(g,{displayName:Ga});const Qa=b+"CollectionItemSlot",Za=ip.default.forwardRef((eb,mb)=>{const {scope:Lb,children:Vb}=eb,Pb=Af(eb,["scope","children"]),ec=ip.default.useRef(null);eb=Cf(mb,ec);const gc=la(Qa,Lb);ip.default.useEffect(()=>{gc.itemMap.set(ec,pe({ref:ec},Pb));return()=>void gc.itemMap.delete(ec)});return ip.default.createElement(fp,{["data-radix-collection-item"]:"",ref:eb},Vb)});Object.assign(Za,{displayName:Qa});return[{Provider:pa,Slot:g,ItemSlot:Za},function(eb){const mb=
la(b+"CollectionConsumer",eb);return ip.default.useCallback(()=>{const Lb=mb.collectionRef.current;if(!Lb)return[];const Vb=Array.from(Lb.querySelectorAll("[data-radix-collection-item]"));return Array.from(mb.itemMap.values()).sort((Pb,ec)=>Vb.indexOf(Pb.ref.current)-Vb.indexOf(ec.ref.current))},[mb.collectionRef,mb.itemMap])},G]}("Select"),[hs]=Aj("Select",[wH,bB]),Bw=bB(),[xH,lr]=hs("Select"),[yH,zH]=hs("Select"),AH=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,disabled:G=!1}=b;b=Af(b,["__scopeSelect",
"disabled"]);const X=Bw(p),la=lr("SelectTrigger",p),pa=la.disabled||G;g=Cf(g,la.onTriggerChange);const Ga=Ku(p),[Qa,Za,eb]=cm(mb=>{const Lb=Ga().filter(Pb=>!Pb.disabled),Vb=Lb.find(Pb=>Pb.value===la.value);mb=$k(Lb,mb,Vb);if(void 0!==mb)la.onValueChange(mb.value)});return(0,yf.createElement)(jH,ff({asChild:!0},X),(0,yf.createElement)(Dn.button,ff({type:"button",role:"combobox","aria-controls":la.contentId,"aria-expanded":la.open,"aria-required":la.required,"aria-autocomplete":"none",dir:la.dir,"data-state":la.open?
"open":"closed",disabled:pa,"data-disabled":pa?"":void 0,"data-placeholder":void 0===la.value?"":void 0},b,{ref:g,onClick:If(b.onClick,mb=>{mb.currentTarget.focus()}),onPointerDown:If(b.onPointerDown,mb=>{const Lb=mb.target;Lb.hasPointerCapture(mb.pointerId)&&Lb.releasePointerCapture(mb.pointerId);0===mb.button&&!1===mb.ctrlKey&&(pa||(la.onOpenChange(!0),eb()),la.triggerPointerDownPosRef.current={x:Math.round(mb.pageX),y:Math.round(mb.pageY)},mb.preventDefault())}),onKeyDown:If(b.onKeyDown,mb=>{const Lb=
""!==Qa.current;mb.ctrlKey||mb.altKey||mb.metaKey||1!==mb.key.length||Za(mb.key);Lb&&" "===mb.key||!uH.includes(mb.key)||(pa||(la.onOpenChange(!0),eb()),mb.preventDefault())})})))}),BH=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,children:G,placeholder:X}=b;b=Af(b,["__scopeSelect","className","style","children","placeholder"]);const la=lr("SelectValue",p),{onValueNodeHasChildrenChange:pa}=la,Ga=void 0!==G;g=Cf(g,la.onValueNodeChange);Pm(()=>{pa(Ga)},[pa,Ga]);return(0,yf.createElement)(Dn.span,
ff({},b,{ref:g,style:{pointerEvents:"none"}}),void 0===la.value&&void 0!==X?X:G)}),CH=(0,yf.forwardRef)((b,g)=>{const {children:p}=b;b=Af(b,["__scopeSelect","children"]);return(0,yf.createElement)(Dn.span,ff({"aria-hidden":!0},b,{ref:g}),p||"")}),DH=(0,yf.forwardRef)((b,g)=>{const p=lr("SelectContent",b.__scopeSelect),[G,X]=(0,yf.useState)();Pm(()=>{X(new DocumentFragment)},[]);return p.open?(0,yf.createElement)(EH,ff({},b,{ref:g})):G?(0,YA.createPortal)((0,yf.createElement)(fB,{scope:b.__scopeSelect},
(0,yf.createElement)(Ju.Slot,{scope:b.__scopeSelect},(0,yf.createElement)("div",null,b.children))),G):null}),[fB,mr]=hs("SelectContent"),EH=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,position:G="item-aligned",onCloseAutoFocus:X,onEscapeKeyDown:la,onPointerDownOutside:pa,side:Ga,sideOffset:Qa,align:Za,alignOffset:eb,arrowPadding:mb,collisionBoundary:Lb,collisionPadding:Vb,sticky:Pb,hideWhenDetached:ec,avoidCollisions:gc}=b;b=Af(b,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));
const Tb=lr("SelectContent",p),[nc,oc]=(0,yf.useState)(null),[Ec,Sc]=(0,yf.useState)(null);g=Cf(g,Ef=>oc(Ef));const [vd,Wd]=(0,yf.useState)(null),[he,De]=(0,yf.useState)(null),Ye=Ku(p),[jf,Ne]=(0,yf.useState)(!1),Ae=(0,yf.useRef)(!1);(0,yf.useEffect)(()=>{if(nc)return rw(nc)},[nc]);vb();const Ad=(0,yf.useCallback)(Ef=>{const [kh,...uh]=Ye().map(nl=>nl.ref.current),[qj]=uh.slice(-1),ml=document.activeElement;for(const nl of Ef){if(nl===ml)break;null===nl||void 0===nl||nl.scrollIntoView({block:"nearest"});
nl===kh&&Ec&&(Ec.scrollTop=0);nl===qj&&Ec&&(Ec.scrollTop=Ec.scrollHeight);null===nl||void 0===nl||nl.focus();if(document.activeElement!==ml)break}},[Ye,Ec]),ad=(0,yf.useCallback)(()=>Ad([vd,nc]),[Ad,vd,nc]);(0,yf.useEffect)(()=>{jf&&ad()},[jf,ad]);const {onOpenChange:ed,triggerPointerDownPosRef:ld}=Tb;(0,yf.useEffect)(()=>{if(nc){var Ef=0,kh=0;const uh=ml=>{var nl,lp,Fp,mp;Ef=Math.abs(Math.round(ml.pageX)-(null!==(nl=null===(lp=ld.current)||void 0===lp?void 0:lp.x)&&void 0!==nl?nl:0));kh=Math.abs(Math.round(ml.pageY)-
(null!==(Fp=null===(mp=ld.current)||void 0===mp?void 0:mp.y)&&void 0!==Fp?Fp:0))},qj=ml=>{10>=Ef&&10>=kh?ml.preventDefault():nc.contains(ml.target)||ed(!1);document.removeEventListener("pointermove",uh);ld.current=null};null!==ld.current&&(document.addEventListener("pointermove",uh),document.addEventListener("pointerup",qj,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",uh);document.removeEventListener("pointerup",qj,{capture:!0})}}},[nc,ed,ld]);(0,yf.useEffect)(()=>{const Ef=
()=>ed(!1);window.addEventListener("blur",Ef);window.addEventListener("resize",Ef);return()=>{window.removeEventListener("blur",Ef);window.removeEventListener("resize",Ef)}},[ed]);const [$d,Oe]=cm(Ef=>{const kh=Ye().filter(ml=>!ml.disabled),uh=kh.find(ml=>ml.ref.current===document.activeElement),qj=$k(kh,Ef,uh);qj&&setTimeout(()=>qj.ref.current.focus())}),mf=(0,yf.useCallback)((Ef,kh,uh)=>{uh=!Ae.current&&!uh;if(void 0!==Tb.value&&Tb.value===kh||uh)Wd(Ef),uh&&(Ae.current=!0)},[Tb.value]),Sf=(0,yf.useCallback)(()=>
null===nc||void 0===nc?void 0:nc.focus(),[nc]),qf=(0,yf.useCallback)((Ef,kh,uh)=>{uh=!Ae.current&&!uh;(void 0!==Tb.value&&Tb.value===kh||uh)&&De(Ef)},[Tb.value]),Gf="popper"===G?gB:FH,hh=Gf===gB?{side:Ga,sideOffset:Qa,align:Za,alignOffset:eb,arrowPadding:mb,collisionBoundary:Lb,collisionPadding:Vb,sticky:Pb,hideWhenDetached:ec,avoidCollisions:gc}:{};return(0,yf.createElement)(fB,{scope:p,content:nc,viewport:Ec,onViewportChange:Sc,itemRefCallback:mf,selectedItem:vd,onItemLeave:Sf,itemTextRefCallback:qf,
focusSelectedItem:ad,selectedItemText:he,position:G,isPositioned:jf,searchRef:$d},(0,yf.createElement)(Au,{as:fp,allowPinchZoom:!0},(0,yf.createElement)(hH,{asChild:!0,trapped:Tb.open,onMountAutoFocus:Ef=>{Ef.preventDefault()},onUnmountAutoFocus:If(X,Ef=>{var kh;null===(kh=Tb.trigger)||void 0===kh||kh.focus({preventScroll:!0});Ef.preventDefault()})},(0,yf.createElement)(gH,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:la,onPointerDownOutside:pa,onFocusOutside:Ef=>Ef.preventDefault(),
onDismiss:()=>Tb.onOpenChange(!1)},(0,yf.createElement)(Gf,ff({role:"listbox",id:Tb.contentId,"data-state":Tb.open?"open":"closed",dir:Tb.dir,onContextMenu:Ef=>Ef.preventDefault()},b,hh,{onPlaced:()=>Ne(!0),ref:g,style:pe({display:"flex",flexDirection:"column",outline:"none"},b.style),onKeyDown:If(b.onKeyDown,Ef=>{var kh=Ef.ctrlKey||Ef.altKey||Ef.metaKey;"Tab"===Ef.key&&Ef.preventDefault();kh||1!==Ef.key.length||Oe(Ef.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Ef.key)){let uh=Ye().filter(qj=>
!qj.disabled).map(qj=>qj.ref.current);["ArrowUp","End"].includes(Ef.key)&&(uh=uh.slice().reverse());["ArrowUp","ArrowDown"].includes(Ef.key)&&(kh=uh.indexOf(Ef.target),uh=uh.slice(kh+1));setTimeout(()=>Ad(uh));Ef.preventDefault()}})}))))))}),FH=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,onPlaced:G}=b;b=Af(b,["__scopeSelect","onPlaced"]);const X=lr("SelectContent",p);var la=mr("SelectContent",p);const [pa,Ga]=(0,yf.useState)(null),[Qa,Za]=(0,yf.useState)(null);g=Cf(g,Ec=>Za(Ec));const eb=Ku(p),
mb=(0,yf.useRef)(!1),Lb=(0,yf.useRef)(!0),{viewport:Vb,selectedItem:Pb,selectedItemText:ec,focusSelectedItem:gc}=la,Tb=(0,yf.useCallback)(()=>{if(X.trigger&&X.valueNode&&pa&&Qa&&Vb&&Pb&&ec){var Ec=X.trigger.getBoundingClientRect(),Sc=Qa.getBoundingClientRect(),vd=X.valueNode.getBoundingClientRect(),Wd=ec.getBoundingClientRect();"rtl"!==X.dir?(Wd=vd.left-(Wd.left-Sc.left),vd=Ec.width+(Ec.left-Wd),Sc=sg(Wd,[10,window.innerWidth-10-Math.max(vd,Sc.width)]),pa.style.minWidth=vd+"px",pa.style.left=Sc+"px"):
(Wd=window.innerWidth-vd.right-(Sc.right-Wd.right),vd=Ec.width+(window.innerWidth-Ec.right-Wd),Sc=sg(Wd,[10,window.innerWidth-10-Math.max(vd,Sc.width)]),pa.style.minWidth=vd+"px",pa.style.right=Sc+"px");const Ae=eb();Sc=window.innerHeight-20;var he=Vb.scrollHeight,De=window.getComputedStyle(Qa);vd=parseInt(De.borderTopWidth,10);var Ye=parseInt(De.paddingTop,10);Wd=parseInt(De.borderBottomWidth,10);De=parseInt(De.paddingBottom,10);var jf=vd+Ye+he+De+Wd;he=Math.min(5*Pb.offsetHeight,jf);var Ne=window.getComputedStyle(Vb);
De=parseInt(Ne.paddingTop,10);Ne=parseInt(Ne.paddingBottom,10);const Ad=Ec.top+Ec.height/2-10,ad=Sc-Ad;Ec=Pb.offsetHeight/2;Ye=vd+Ye+(Pb.offsetTop+Ec);jf-=Ye;Ye<=Ad?(vd=Pb===Ae[Ae.length-1].ref.current,pa.style.bottom="0px",pa.style.height=Ye+Math.max(ad,Ec+(vd?Ne:0)+(Qa.clientHeight-Vb.offsetTop-Vb.offsetHeight)+Wd)+"px"):(Wd=Pb===Ae[0].ref.current,pa.style.top="0px",pa.style.height=Math.max(Ad,vd+Vb.offsetTop+(Wd?De:0)+Ec)+jf+"px",Vb.scrollTop=Ye-Ad+Vb.offsetTop);pa.style.margin="10px 0";pa.style.minHeight=
he+"px";pa.style.maxHeight=Sc+"px";null===G||void 0===G||G();requestAnimationFrame(()=>mb.current=!0)}},[eb,X.trigger,X.valueNode,pa,Qa,Vb,Pb,ec,X.dir,G]);Pm(()=>Tb(),[Tb]);const [nc,oc]=(0,yf.useState)();Pm(()=>{Qa&&oc(window.getComputedStyle(Qa).zIndex)},[Qa]);la=(0,yf.useCallback)(Ec=>{Ec&&!0===Lb.current&&(Tb(),null===gc||void 0===gc||gc(),Lb.current=!1)},[Tb,gc]);return(0,yf.createElement)(GH,{scope:p,contentWrapper:pa,shouldExpandOnScrollRef:mb,onScrollButtonChange:la},(0,yf.createElement)("div",
{ref:Ga,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:nc}},(0,yf.createElement)(Dn.div,ff({},b,{ref:g,style:pe({boxSizing:"border-box",maxHeight:"100%"},b.style)}))))}),gB=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,align:G="start",collisionPadding:X=10}=b;b=Af(b,["__scopeSelect","align","collisionPadding"]);const la=Bw(p);return(0,yf.createElement)(nH,ff({},la,b,{ref:g,align:G,collisionPadding:X,style:lf(pe({boxSizing:"border-box"},b.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)",
"--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[GH,Cw]=hs("SelectContent",{}),hB=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p}=b;b=Af(b,["__scopeSelect"]);const G=mr("SelectViewport",p),X=Cw("SelectViewport",p);g=Cf(g,G.onViewportChange);const la=
(0,yf.useRef)(0);return(0,yf.createElement)(yf.Fragment,null,(0,yf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,yf.createElement)(Ju.Slot,{scope:p},(0,yf.createElement)(Dn.div,ff({"data-radix-select-viewport":"",role:"presentation"},b,{ref:g,style:pe({position:"relative",flex:1,overflow:"auto"},b.style),onScroll:If(b.onScroll,
pa=>{pa=pa.currentTarget;const {contentWrapper:Ga,shouldExpandOnScrollRef:Qa}=X;if(null!==Qa&&void 0!==Qa&&Qa.current&&Ga){var Za=Math.abs(la.current-pa.scrollTop);if(0<Za){var eb=window.innerHeight-20,mb=parseFloat(Ga.style.minHeight);const Lb=parseFloat(Ga.style.height);mb=Math.max(mb,Lb);mb<eb&&(Za=mb+Za,eb=Math.min(eb,Za),Za-=eb,Ga.style.height=eb+"px","0px"===Ga.style.bottom&&(pa.scrollTop=0<Za?Za:0,Ga.style.justifyContent="flex-end"))}}la.current=pa.scrollTop})}))))});hs("SelectGroup");var [HH,
IH]=hs("SelectItem"),JH=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,value:G,disabled:X=!1,textValue:la}=b;b=Af(b,["__scopeSelect","value","disabled","textValue"]);const pa=lr("SelectItem",p),Ga=mr("SelectItem",p),Qa=pa.value===G,[Za,eb]=(0,yf.useState)(null!==la&&void 0!==la?la:""),[mb,Lb]=(0,yf.useState)(!1);g=Cf(g,ec=>{var gc;return null===(gc=Ga.itemRefCallback)||void 0===gc?void 0:gc.call(Ga,ec,G,X)});const Vb=zi(),Pb=()=>{X||(pa.onValueChange(G),pa.onOpenChange(!1))};return(0,yf.createElement)(HH,
{scope:p,value:G,disabled:X,textId:Vb,isSelected:Qa,onItemTextChange:(0,yf.useCallback)(ec=>{eb(gc=>{var Tb;return gc||(null!==(Tb=null===ec||void 0===ec?void 0:ec.textContent)&&void 0!==Tb?Tb:"").trim()})},[])},(0,yf.createElement)(Ju.ItemSlot,{scope:p,value:G,disabled:X,textValue:Za},(0,yf.createElement)(Dn.div,ff({role:"option","aria-labelledby":Vb,"data-highlighted":mb?"":void 0,"aria-selected":Qa&&mb,"data-state":Qa?"checked":"unchecked","aria-disabled":X||void 0,"data-disabled":X?"":void 0,
tabIndex:X?void 0:-1},b,{ref:g,onFocus:If(b.onFocus,()=>Lb(!0)),onBlur:If(b.onBlur,()=>Lb(!1)),onPointerUp:If(b.onPointerUp,Pb),onPointerMove:If(b.onPointerMove,ec=>{if(X){var gc;null===(gc=Ga.onItemLeave)||void 0===gc||gc.call(Ga)}else ec.currentTarget.focus({preventScroll:!0})}),onPointerLeave:If(b.onPointerLeave,ec=>{if(ec.currentTarget===document.activeElement){var gc;null===(gc=Ga.onItemLeave)||void 0===gc||gc.call(Ga)}}),onKeyDown:If(b.onKeyDown,ec=>{var gc;if(""===(null===(gc=Ga.searchRef)||
void 0===gc?void 0:gc.current)||" "!==ec.key)vH.includes(ec.key)&&Pb()," "===ec.key&&ec.preventDefault()})}))))}),KH=(0,yf.forwardRef)((b,g)=>{var {__scopeSelect:p}=b;b=Af(b,["__scopeSelect","className","style"]);const G=lr("SelectItemText",p),X=mr("SelectItemText",p),la=IH("SelectItemText",p);p=zH("SelectItemText",p);const [pa,Ga]=(0,yf.useState)(null);g=Cf(g,Lb=>Ga(Lb),la.onItemTextChange,Lb=>{var Vb;return null===(Vb=X.itemTextRefCallback)||void 0===Vb?void 0:Vb.call(X,Lb,la.value,la.disabled)});
const Qa=null===pa||void 0===pa?void 0:pa.textContent,Za=(0,yf.useMemo)(()=>(0,yf.createElement)("option",{key:la.value,value:la.value,disabled:la.disabled},Qa),[la.disabled,la.value,Qa]),{onNativeOptionAdd:eb,onNativeOptionRemove:mb}=p;Pm(()=>{eb(Za);return()=>mb(Za)},[eb,mb,Za]);return(0,yf.createElement)(yf.Fragment,null,(0,yf.createElement)(Dn.span,ff({id:la.textId},b,{ref:g})),la.isSelected&&G.valueNode&&!G.valueNodeHasChildren?(0,YA.createPortal)(b.children,G.valueNode):null)}),LH=(0,yf.forwardRef)((b,
g)=>{const p=mr("SelectScrollUpButton",b.__scopeSelect),G=Cw("SelectScrollUpButton",b.__scopeSelect),[X,la]=(0,yf.useState)(!1);g=Cf(g,G.onScrollButtonChange);Pm(()=>{if(p.viewport&&p.isPositioned){let pa=function(){la(0<Ga.scrollTop)};const Ga=p.viewport;pa();Ga.addEventListener("scroll",pa);return()=>Ga.removeEventListener("scroll",pa)}},[p.viewport,p.isPositioned]);return X?(0,yf.createElement)(iB,ff({},b,{ref:g,onAutoScroll:()=>{const {viewport:pa,selectedItem:Ga}=p;pa&&Ga&&(pa.scrollTop-=Ga.offsetHeight)}})):
null}),MH=(0,yf.forwardRef)((b,g)=>{const p=mr("SelectScrollDownButton",b.__scopeSelect),G=Cw("SelectScrollDownButton",b.__scopeSelect),[X,la]=(0,yf.useState)(!1);g=Cf(g,G.onScrollButtonChange);Pm(()=>{if(p.viewport&&p.isPositioned){let pa=function(){la(Math.ceil(Ga.scrollTop)<Ga.scrollHeight-Ga.clientHeight)};const Ga=p.viewport;pa();Ga.addEventListener("scroll",pa);return()=>Ga.removeEventListener("scroll",pa)}},[p.viewport,p.isPositioned]);return X?(0,yf.createElement)(iB,ff({},b,{ref:g,onAutoScroll:()=>
{const {viewport:pa,selectedItem:Ga}=p;pa&&Ga&&(pa.scrollTop+=Ga.offsetHeight)}})):null}),iB=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,onAutoScroll:G}=b;b=Af(b,["__scopeSelect","onAutoScroll"]);const X=mr("SelectScrollButton",p),la=(0,yf.useRef)(null),pa=Ku(p),Ga=(0,yf.useCallback)(()=>{null!==la.current&&(window.clearInterval(la.current),la.current=null)},[]);(0,yf.useEffect)(()=>()=>Ga(),[Ga]);Pm(()=>{var Qa;const Za=pa().find(eb=>eb.ref.current===document.activeElement);null===Za||void 0===
Za||null===(Qa=Za.ref.current)||void 0===Qa||Qa.scrollIntoView({block:"nearest"})},[pa]);return(0,yf.createElement)(Dn.div,ff({"aria-hidden":!0},b,{ref:g,style:pe({flexShrink:0},b.style),onPointerMove:If(b.onPointerMove,()=>{var Qa;null===(Qa=X.onItemLeave)||void 0===Qa||Qa.call(X);null===la.current&&(la.current=window.setInterval(G,50))}),onPointerLeave:If(b.onPointerLeave,()=>{Ga()})}))}),jB=(0,yf.forwardRef)((b,g)=>{const {value:p}=b;b=Af(b,["value"]);const G=(0,yf.useRef)(null);g=Cf(g,G);const X=
Vf(p);(0,yf.useEffect)(()=>{const la=G.current,pa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(X!==p&&pa){const Ga=new Event("change",{bubbles:!0});pa.call(la,p);la.dispatchEvent(Ga)}},[X,p]);return(0,yf.createElement)(tH,{asChild:!0},(0,yf.createElement)("select",ff({},b,{ref:g,defaultValue:p})))});jB.displayName="BubbleSelect";var NH=b=>{const {__scopeSelect:g,children:p,open:G,defaultOpen:X,onOpenChange:la,value:pa,defaultValue:Ga,onValueChange:Qa,dir:Za,name:eb,
autoComplete:mb,disabled:Lb,required:Vb}=b,Pb=Bw(g),[ec,gc]=(0,yf.useState)(null),[Tb,nc]=(0,yf.useState)(null),[oc,Ec]=(0,yf.useState)(!1),Sc=Ub(Za),[vd=!1,Wd]=Nj({prop:G,defaultProp:X,onChange:la}),[he,De]=Nj({prop:pa,defaultProp:Ga,onChange:Qa}),Ye=(0,yf.useRef)(null),jf=ec?!!ec.closest("form"):!0,[Ne,Ae]=(0,yf.useState)(new Set),Ad=Array.from(Ne).map(ad=>ad.props.value).join(";");return(0,yf.createElement)(qH,Pb,(0,yf.createElement)(xH,{required:Vb,scope:g,trigger:ec,onTriggerChange:gc,valueNode:Tb,
onValueNodeChange:nc,valueNodeHasChildren:oc,onValueNodeHasChildrenChange:Ec,contentId:zi(),value:he,onValueChange:De,open:vd,onOpenChange:Wd,dir:Sc,triggerPointerDownPosRef:Ye,disabled:Lb},(0,yf.createElement)(Ju.Provider,{scope:g},(0,yf.createElement)(yH,{scope:b.__scopeSelect,onNativeOptionAdd:(0,yf.useCallback)(ad=>{Ae(ed=>(new Set(ed)).add(ad))},[]),onNativeOptionRemove:(0,yf.useCallback)(ad=>{Ae(ed=>{ed=new Set(ed);ed.delete(ad);return ed})},[])},p)),jf?(0,yf.createElement)(jB,{key:Ad,"aria-hidden":!0,
required:Vb,tabIndex:-1,name:eb,autoComplete:mb,value:he,onChange:ad=>De(ad.target.value),disabled:Lb},void 0===he?(0,yf.createElement)("option",{value:""}):null,Array.from(Ne)):null))},OH=AH,PH=BH,QH=CH,RH=b=>(0,yf.createElement)(sH,ff({asChild:!0},b)),SH=DH,TH=hB,UH=JH,VH=KH,WH=LH,XH=MH;nb=W(588);nb=W(588);nb=W(588);var YH=ef(function(){const b=bf(),g=Fu.useCallback(la=>{b.api.setColor(la)},[]),p=Fu.useCallback(la=>{(la=la.currentTarget.dataset.tool)&&b.selectTool(la)},[]),[G,X]=Fu.useState(()=>
{var la;return null!=(la=Object.values(Rp).find(pa=>pa===b.selectedTool.id))?la:Object.values(Rp)[0]});Fu.useEffect(()=>{X(la=>{var pa;return null!=(pa=Object.values(Rp).find(Ga=>Ga===b.selectedTool.id))?pa:la})},[b.selectedTool.id]);return(0,nb.jsx)("div",{className:"tl-primary-tools","data-html2canvas-ignore":"true",children:(0,nb.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,nb.jsx)(hp,{handleClick:()=>b.selectTool("select"),tooltip:"Select",id:"select",icon:"select-cursor"}),
(0,nb.jsx)(hp,{handleClick:()=>b.selectTool("move"),tooltip:"Move",id:"move",icon:b.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,nb.jsx)(kr,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,nb.jsx)(hp,{handleClick:()=>b.selectTool("logseq-portal"),tooltip:"Add block or page",id:"logseq-portal",icon:"circle-plus"}),(0,nb.jsx)(hp,{handleClick:()=>b.selectTool("pencil"),tooltip:"Draw",id:"pencil",icon:"ballpen"}),(0,nb.jsx)(hp,{handleClick:()=>b.selectTool("highlighter"),tooltip:"Highlight",
id:"highlighter",icon:"highlight"}),(0,nb.jsx)(hp,{handleClick:()=>b.selectTool("erase"),tooltip:"Eraser",id:"erase",icon:"eraser"}),(0,nb.jsx)(hp,{handleClick:()=>b.selectTool("line"),tooltip:"Connector",id:"line",icon:"connector"}),(0,nb.jsx)(hp,{handleClick:()=>b.selectTool("text"),tooltip:"Text",id:"text",icon:"text"}),(0,nb.jsx)(OA,{activeGeometry:G,setGeometry:p}),(0,nb.jsx)(kr,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,nb.jsx)(og,{popoverSide:"left",
color:b.settings.color,setColor:g}),(0,nb.jsx)(Kh,{scaleLevel:b.settings.scaleLevel,popoverSide:"left",compact:!0})]})})});nb=W(588);var ZH=ef(function(){const b=bf();return(0,nb.jsxs)("div",{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[b.selectedTool.id," | ",b.selectedTool.currentState.id,(0,nb.jsx)("div",{style:{flex:1}}),(0,nb.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})});nb=W(588);var $H=ef(function(){const b=bf();return(0,nb.jsxs)(nb.Fragment,{children:[xh()&&
(0,nb.jsx)(ZH,{}),xh()&&(0,nb.jsx)(JG,{}),!b.readOnly&&(0,nb.jsx)(YH,{}),(0,nb.jsx)(HG,{})]})}),pt=uf(W(22)),Dp=uf(W(22)),aI=uf(W(22)),mn=uf(W(22)).default.createContext({}),bI=uf(W(22));nb=W(588);var kB=({id:b,showReferenceContent:g=!1})=>{var p;const {handlers:{isWhiteboardPage:G,redirectToPage:X,sidebarAddBlock:la,queryBlockByUUID:pa},renderers:{Breadcrumb:Ga,PageName:Qa}}=bI.default.useContext(mn);var Za="";let eb=gk(b)?"B":"P",mb="";if(gk(b)){Za=pa(b);if(!Za)return(0,nb.jsx)("span",{className:"p-2",
children:"Invalid reference. Did you remove it?"});mb=Za.content;Za="whiteboard-shape"===(null==(p=Za.properties)?void 0:p["ls-type"])?"link-to-whiteboard":"link-to-block"}else Za=G(b)?"link-to-whiteboard":"link-to-page";p=mb&&23<mb.length?mb.slice(0,20)+"...":mb;return(0,nb.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Lb=>{Lb.stopPropagation();Lb.shiftKey?la(b,"B"===eb?"block":"page"):X(b)},children:[(0,nb.jsx)(Bh,{name:Za}),(0,nb.jsx)("span",{className:"pointer-events-none block-link-reference-row",
children:"P"===eb?(0,nb.jsx)(Qa,{pageName:b}):(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)(Ga,{levelLimit:1,blockId:b,endSeparator:g}),g&&p]})})]})},Qm=uf(W(22)),Nn=W(22),cI=["children"],Lu="undefined"!==typeof document?Nn.useLayoutEffect:Nn.useEffect,gh=uf(W(22)),ji=W(22),dI=W(31),qt,Fm,eI="undefined"!=typeof document?ji.useLayoutEffect:ji.useEffect;!function(b){b[b.DEBUG=0]="DEBUG";b[b.INFO=1]="INFO";b[b.WARN=2]="WARN";b[b.ERROR=3]="ERROR"}(Fm||={});var fI=((qt={})[Fm.DEBUG]="debug",qt[Fm.INFO]=
"log",qt[Fm.WARN]="warn",qt[Fm.ERROR]="error",qt),lq=sh(function(){var b=Pd(Fm.ERROR);return{log:Pd(function(g,p,G){var X;void 0===G&&(G=Fm.INFO);G>=(null!=(X=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?X:b(4))&&console[fI[G]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",g,p)}),logLevel:b}},[],{singleton:!0}),On=sh(function(){var b=Uf(),g=Uf(),p=Pd(0),G=Uf(),X=Pd(0),la=Uf(),pa=Uf(),Ga=Pd(0),Qa=Pd(0),Za=Pd(0),eb=Pd(0),mb=Uf(),Lb=Uf(),Vb=
Pd(!1),Pb=Pd(!1);return be(He(b,$f(function(ec){return ec.scrollTop})),g),be(He(b,$f(function(ec){return ec.scrollHeight})),pa),be(g,X),{scrollContainerState:b,scrollTop:g,viewportHeight:la,headerHeight:Ga,fixedHeaderHeight:Qa,fixedFooterHeight:Za,footerHeight:eb,scrollHeight:pa,smoothScrollTargetReached:G,react18ConcurrentRendering:Pb,scrollTo:mb,scrollBy:Lb,statefulScrollTop:X,deviation:p,scrollingInProgress:Vb}},[],{singleton:!0}),Qi={lvl:0},Dw=sh(function(){return{recalcInProgress:Pd(!1)}},[],
{singleton:!0}),gI={offsetHeight:"height",offsetWidth:"width"},Ep=sh(function(b){var g=b[0].log,p=b[1].recalcInProgress;b=Uf();var G=Uf(),X=Si(G,0),la=Uf(),pa=Uf(),Ga=Pd(0),Qa=Pd([]),Za=Pd(void 0),eb=Pd(void 0),mb=Pd(function(nc,oc){return il(nc,gI[oc])}),Lb=Pd(void 0),Vb=Pd(0),Pb={offsetTree:[],sizeTree:Qi,groupOffsetTree:Qi,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},ec=Si(He(b,eg(Qa,g,Vb),pl(Di,Pb),jg()),Pb);be(He(Qa,Vg(function(nc){return 0<nc.length}),eg(ec,Vb),$f(function(nc){var oc=
nc[0],Ec=nc[1],Sc=nc[2];nc=oc.reduce(function(vd,Wd,he){return ua(vd,Wd,Gh(Wd,Ec.offsetTree,Sc)||he)},Qi);return lg({},Ec,{groupIndices:oc,groupOffsetTree:nc})})),ec);be(He(G,eg(ec),Vg(function(nc){return nc[0]<nc[1].lastIndex}),$f(function(nc){var oc=nc[1];return[{startIndex:nc[0],endIndex:oc.lastIndex,size:oc.lastSize}]})),b);be(Za,eb);var gc=Si(He(Za,$f(function(nc){return void 0===nc})),!0);be(He(eb,Vg(function(nc){return void 0!==nc&&ec(4).sizeTree===Qi}),$f(function(nc){return[{startIndex:0,
endIndex:0,size:nc}]})),b);Pb=rj(He(b,eg(ec),pl(function(nc,oc){oc=oc[1];return{changed:oc!==nc.sizes,sizes:oc}},{changed:!1,sizes:Pb}),$f(function(nc){return nc.changed})));dg(He(Ga,pl(function(nc,oc){return{diff:nc.prev-oc,prev:oc}},{diff:0,prev:0}),$f(function(nc){return nc.diff})),function(nc){0<nc?(p(0,!0),la(0,nc)):0>nc&&pa(0,nc)});dg(He(Ga,eg(g)),function(nc){0>nc[0]&&(0,nc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",
{firstItemIndex:Ga},Fm.ERROR)});g=rj(la);be(He(la,eg(ec),$f(function(nc){var oc=nc[0];nc=nc[1];if(0<nc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return $a(nc.sizeTree).reduce(function(Ec,Sc){var vd=Sc.k;Sc=Sc.v;return{ranges:[].concat(Ec.ranges,[{startIndex:Ec.prevIndex,endIndex:vd+oc-1,size:Ec.prevSize}]),prevIndex:vd+oc,prevSize:Sc}},{ranges:[],prevIndex:0,prevSize:nc.lastSize}).ranges})),b);var Tb=rj(He(pa,eg(ec,Vb),$f(function(nc){return Gh(-nc[0],
nc[1].offsetTree,nc[2])})));return be(He(pa,eg(ec,Vb),$f(function(nc){var oc=nc[0],Ec=nc[1];nc=nc[2];if(0<Ec.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Sc=$a(Ec.sizeTree).reduce(function(vd,Wd){return ua(vd,Math.max(0,Wd.k+oc),Wd.v)},Qi);return lg({},Ec,{sizeTree:Sc},ci(Ec.offsetTree,0,Sc,nc))})),ec),{data:Lb,totalCount:G,sizeRanges:b,groupIndices:Qa,defaultItemSize:eb,fixedItemSize:Za,unshiftWith:la,shiftWith:pa,shiftWithOffset:Tb,beforeUnshiftWith:g,
firstItemIndex:Ga,gap:Vb,sizes:ec,listRefresh:Pb,statefulTotalCount:X,trackItemSizes:gc,itemSize:mb}},re(lq,Dw),{singleton:!0}),hI="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,rt=sh(function(b){function g(){gc&&(gc(),gc=null);nc&&(nc(),nc=null);Tb&&(clearTimeout(Tb),Tb=null);Ga(0,!1)}var p=b[0],G=p.sizes,X=p.totalCount,la=p.listRefresh;p=p.gap;var pa=b[1],Ga=pa.scrollingInProgress,Qa=pa.viewportHeight,Za=pa.scrollTo,eb=pa.smoothScrollTargetReached,mb=pa.headerHeight,
Lb=pa.footerHeight,Vb=pa.fixedHeaderHeight;pa=pa.fixedFooterHeight;b=b[2].log;var Pb=Uf(),ec=Pd(0),gc=null,Tb=null,nc=null;return be(He(Pb,eg(G,Qa,X,ec,mb,Lb,b),eg(p,Vb,pa),$f(function(oc){var Ec=oc[0],Sc=Ec[0],vd=Ec[1],Wd=Ec[2],he=Ec[3],De=Ec[4],Ye=Ec[5],jf=Ec[6],Ne=Ec[7],Ae=oc[1];Ec=oc[2];oc=oc[3];var Ad=Ch(Sc),ad=Ad.align,ed=Ad.behavior,ld=Ad.offset;--he;Ad=gg(Ad,vd,he);Ye=Gh(Ad,vd.offsetTree,Ae)+Ye;"end"===ad?(Ye+=Ec+xa(vd.sizeTree,Ad)[1]-Wd+oc,Ad===he&&(Ye+=jf)):"center"===ad?Ye+=(Ec+xa(vd.sizeTree,
Ad)[1]-Wd+oc)/2:Ye-=De;ld&&(Ye+=ld);var $d=function(mf){g();mf?(Ne("retrying to scroll to",{location:Sc},Fm.DEBUG),Pb(0,Sc)):Ne("list did not change, scroll successful",{},Fm.DEBUG)};if(g(),"smooth"===ed){var Oe=!1;nc=dg(la,function(mf){Oe=Oe||mf});gc=Le(eb,function(){$d(Oe)})}else gc=Le(He(la,function(mf){var Sf=setTimeout(function(){mf(!1)},150);return function(qf){qf&&(mf(!0),clearTimeout(Sf))}}),$d);Tb=setTimeout(function(){g()},1200);Ga(0,!0);return Ne("scrolling from index to",{index:Ad,top:Ye,
behavior:ed},Fm.DEBUG),{top:Ye,behavior:ed}})),Za),{scrollToIndex:Pb,topListHeight:ec}},re(Ep,On,lq),{singleton:!0}),iI={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},st=sh(function(b){var g=b[0],p=g.scrollContainerState;b=g.scrollTop;var G=g.viewportHeight,X=g.headerHeight,la=g.footerHeight,pa=g.scrollBy;g=Pd(!1);var Ga=Pd(!0),Qa=Uf(),Za=Uf(),eb=Pd(4),mb=Pd(0),Lb=Si(He(si(He(Ah(b),Vk(1),Pf(!0)),He(Ah(b),Vk(1),Pf(!1),Hl(100))),
jg()),!1),Vb=Si(He(si(He(pa,Pf(!0)),He(pa,Pf(!1),Hl(200))),jg()),!1);be(He(Mi(Ah(b),Ah(mb)),$f(function(Pb){return Pb[0]<=Pb[1]}),jg()),Ga);be(He(Ga,Jf(50)),Za);G=rj(He(Mi(p,Ah(G),Ah(X),Ah(la),Ah(eb)),pl(function(Pb,ec){var gc,Tb,nc=ec[0],oc=nc.scrollTop;nc=nc.scrollHeight;var Ec=ec[1],Sc={viewportHeight:Ec,scrollTop:oc,scrollHeight:nc};return oc+Ec-nc>-ec[4]?(oc>Pb.state.scrollTop?(gc="SCROLLED_DOWN",Tb=Pb.state.scrollTop-oc):(gc="SIZE_DECREASED",Tb=Pb.state.scrollTop-oc||Pb.scrollTopDelta),{atBottom:!0,
state:Sc,atBottomBecause:gc,scrollTopDelta:Tb}):{atBottom:!1,notAtBottomBecause:Sc.scrollHeight>Pb.state.scrollHeight?"SIZE_INCREASED":Ec<Pb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":oc<Pb.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Sc}},iI),jg(function(Pb,ec){return Pb&&Pb.atBottom===ec.atBottom})));X=Si(He(p,pl(function(Pb,ec){var gc=ec.scrollTop,Tb=ec.scrollHeight;ec=ec.viewportHeight;return 1.01>Math.abs(Pb.scrollHeight-Tb)?{scrollTop:gc,scrollHeight:Tb,
jump:0,changed:!1}:Pb.scrollTop!==gc&&1>Tb-(gc+ec)?{scrollHeight:Tb,scrollTop:gc,jump:Pb.scrollTop-gc,changed:!0}:{scrollHeight:Tb,scrollTop:gc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Vg(function(Pb){return Pb.changed}),$f(function(Pb){return Pb.jump})),0);be(He(G,$f(function(Pb){return Pb.atBottom})),g);be(He(g,Jf(50)),Qa);la=Pd("down");be(He(p,$f(function(Pb){return Pb.scrollTop}),jg(),pl(function(Pb,ec){return Vb(4)?{direction:Pb.direction,prevScrollTop:ec}:{direction:ec<
Pb.prevScrollTop?"up":"down",prevScrollTop:ec}},{direction:"down",prevScrollTop:0}),$f(function(Pb){return Pb.direction})),la);be(He(p,Jf(50),Pf("none")),la);p=Pd(0);return be(He(Lb,Vg(function(Pb){return!Pb}),Pf(0)),p),be(He(b,Jf(100),eg(Lb),Vg(function(Pb){return!!Pb[1]}),pl(function(Pb,ec){return[Pb[1],ec[0]]},[0,0]),$f(function(Pb){return Pb[1]-Pb[0]})),p),{isScrolling:Lb,isAtTop:Ga,isAtBottom:g,atBottomState:G,atTopStateChange:Za,atBottomStateChange:Qa,scrollDirection:la,atBottomThreshold:eb,
atTopThreshold:mb,scrollVelocity:p,lastJumpDueToItemResize:X}},re(On)),nr=sh(function(b){var g=b[0].log;b=Pd(!1);var p=rj(He(b,Vg(function(G){return G}),jg()));return dg(b,function(G){G&&g(4)("props updated",{},Fm.DEBUG)}),{propsReady:b,didMount:p}},re(lq),{singleton:!0}),Ew=sh(function(b){var g=b[0],p=g.sizes,G=g.listRefresh;g=g.defaultItemSize;var X=b[1].scrollTop,la=b[2].scrollToIndex;b=b[3].didMount;var pa=Pd(!0),Ga=Pd(0);return be(He(b,eg(Ga),Vg(function(Qa){return!!Qa[1]}),Pf(!1)),pa),dg(He(Mi(G,
b),eg(pa,p,g),Vg(function(Qa){var Za=Qa[1],eb=Qa[3];return Qa[0][1]&&(Qa[2].sizeTree!==Qi||void 0!==eb)&&!Za}),eg(Ga)),function(Qa){var Za=Qa[1];setTimeout(function(){Le(X,function(){pa(0,!0)});la(0,Za)})}),{scrolledToInitialItem:pa,initialTopMostItemIndex:Ga}},re(Ep,On,rt,nr),{singleton:!0}),jI=sh(function(b){function g(ec){Qa(0,{index:"LAST",align:"end",behavior:ec})}function p(ec){var gc=Le(Ga,function(Tb){!ec||Tb.atBottom||"SIZE_INCREASED"!==Tb.notAtBottomBecause||Pb||(mb(4)("scrolling to bottom due to increased size",
{},Fm.DEBUG),g("auto"))});setTimeout(gc,100)}var G=b[0],X=G.totalCount,la=G.listRefresh,pa=b[1];G=pa.isAtBottom;var Ga=pa.atBottomState,Qa=b[2].scrollToIndex;pa=b[3].scrolledToInitialItem;var Za=b[4],eb=Za.propsReady;Za=Za.didMount;var mb=b[5].log;b=b[6].scrollingInProgress;var Lb=Pd(!1),Vb=Uf(),Pb=null;return dg(He(Mi(He(Ah(X),Vk(1)),Za),eg(Ah(Lb),G,pa,b),$f(function(ec){var gc=ec[0],Tb=gc[0];gc=gc[1]&&ec[3];var nc="auto";gc&&(nc=ec[1],ec=ec[2]||ec[4],nc="function"==typeof nc?jh(nc(ec)):ec&&jh(nc),
gc=gc&&!!nc);return{totalCount:Tb,shouldFollow:gc,followOutputBehavior:nc}}),Vg(function(ec){return ec.shouldFollow})),function(ec){var gc=ec.totalCount,Tb=ec.followOutputBehavior;Pb&&(Pb(),Pb=null);Pb=Le(la,function(){mb(4)("following output to ",{totalCount:gc},Fm.DEBUG);g(Tb);Pb=null})}),dg(He(Mi(Ah(Lb),X,eb),Vg(function(ec){return ec[0]&&ec[2]}),pl(function(ec,gc){gc=gc[1];return{refreshed:ec.value===gc,value:gc}},{refreshed:!1,value:0}),Vg(function(ec){return ec.refreshed}),eg(Lb,X)),function(ec){p(!1!==
ec[1])}),dg(Vb,function(){p(!1!==Lb(4))}),dg(Mi(Ah(Lb),Ga),function(ec){var gc=ec[1];ec[0]&&!gc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===gc.notAtBottomBecause&&g("auto")}),{followOutput:Lb,autoscrollToBottom:Vb}},re(Ep,st,rt,Ew,nr,lq,On)),lB=sh(function(b){var g=b[0],p=g.totalCount,G=g.groupIndices;g=g.sizes;var X=b[1];b=X.scrollTop;X=X.headerHeight;var la=Uf(),pa=Uf(),Ga=rj(He(la,$f(Fj)));return be(He(Ga,$f(function(Qa){return Qa.totalCount})),p),be(He(Ga,$f(function(Qa){return Qa.groupIndices})),
G),be(He(Mi(b,g,X),Vg(function(Qa){return Qa[1].groupOffsetTree!==Qi}),$f(function(Qa){return xa(Qa[1].groupOffsetTree,Math.max(Qa[0]-Qa[2],0),"v")[0]}),jg(),$f(function(Qa){return[Qa]})),pa),{groupCounts:la,topItemsIndexes:pa}},re(Ep,On)),Fw=sh(function(b){var g=b[0];b=g.scrollTop;var p=g.viewportHeight,G=g.deviation,X=g.headerHeight,la=g.fixedHeaderHeight;g=Uf();var pa=Pd(0),Ga=Pd(0),Qa=Pd(0);b=Si(He(Mi(Ah(b),Ah(p),Ah(X),Ah(g,oi),Ah(Qa),Ah(pa),Ah(la),Ah(G),Ah(Ga)),$f(function(Za){var eb=Za[0],mb=
Za[1],Lb=Za[2],Vb=Za[3],Pb=Vb[0];Vb=Vb[1];var ec=Za[4],gc=Za[6],Tb=Za[7],nc=Za[8],oc=eb-Tb;Za=Za[5]+gc;var Ec=Math.max(Lb-oc,0),Sc="none",vd="number"==typeof nc?nc:nc.top||0;nc="number"==typeof nc?nc:nc.bottom||0;return Pb-=Tb,Vb+=Lb+gc,Pb+(Lb+gc)>eb+Za-vd&&(Sc="up"),Vb-Tb<eb-Ec+mb+nc&&(Sc="down"),"none"!==Sc?[Math.max(oc-Lb-Pl(ec,"top",Sc)-vd,0),oc-Ec-gc+mb+Pl(ec,"bottom",Sc)+nc]:null}),Vg(function(Za){return null!=Za}),jg(oi)),[0,0]);return{listBoundary:g,overscan:Qa,topListHeight:pa,increaseViewportBy:Ga,
visibleRange:b}},re(On),{singleton:!0}),mB={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},is=sh(function(b){var g=b[0],p=g.sizes,G=g.totalCount,X=g.data,la=g.firstItemIndex,pa=g.gap,Ga=b[1],Qa=b[2],Za=Qa.visibleRange;g=Qa.listBoundary;Qa=Qa.topListHeight;var eb=b[3],mb=eb.scrolledToInitialItem,Lb=eb.initialTopMostItemIndex;eb=b[4].topListHeight;var Vb=b[5],Pb=b[6].didMount,ec=b[7].recalcInProgress;b=Pd([]);var gc=Uf();be(Ga.topItemsIndexes,
b);p=Si(He(Mi(Pb,ec,Ah(Za,oi),Ah(G),Ah(p),Ah(Lb),mb,Ah(b),Ah(la),Ah(pa),X),Vg(function(Tb){return Tb[0]&&!Tb[1]}),$f(function(Tb){var nc=Tb[2],oc=nc[0],Ec=nc[1];nc=Tb[3];var Sc=Tb[5],vd=Tb[6],Wd=Tb[7],he=Tb[8],De=Tb[9],Ye=Tb[10];Tb=Tb[4];var jf=Tb.sizeTree,Ne=Tb.offsetTree;if(0===nc||0===oc&&0===Ec)return lg({},mB,{totalCount:nc});if(jf===Qi)return km(function(qf,Gf,hh){return Gf.groupOffsetTree!==Qi?(qf=Rf(qf,Gf),[{index:xa(Gf.groupOffsetTree,qf)[0],size:0,offset:0},{index:qf,size:0,offset:0,data:hh&&
hh[0]}]):[{index:qf,size:0,offset:0,data:hh&&hh[0]}]}("number"==typeof Sc?Sc:"LAST"===Sc.index?nc-1:Sc.index,Tb,Ye),[],nc,De,Tb,he);Sc=[];if(0<Wd.length){var Ae,Ad=Wd[0],ad=Wd[Wd.length-1],ed=0;for(jf=Xl(Hd(jf,Ad,ad));!(Ae=jf()).done;){var ld=Ae.value;Ae=ld.value;var $d=Math.min(ld.end,ad);for(ld=Math.max(ld.start,Ad);ld<=$d;ld++)Sc.push({index:ld,size:Ae,offset:ed,data:Ye&&Ye[ld]}),ed+=Ae}}if(!vd)return km([],Sc,nc,De,Tb,he);var Oe=0<Wd.length?Wd[Wd.length-1]+1:0,mf=function(qf,Gf,hh,Ef){return void 0===
Ef&&(Ef=0),0<Ef&&(Gf=Math.max(Gf,qf[Bf(qf,Ef,vj)].offset)),Nd((uh=hh,ml=Bf(kh=qf,Gf,qj=yg),nl=Bf(kh,uh,qj,ml),kh.slice(ml,nl+1)),qh);var kh,uh,qj,ml,nl}(Ne,oc,Ec,Oe);if(0===mf.length)return null;var Sf=nc-1;return km(al([],function(qf){for(var Gf,hh=Xl(mf);!(Gf=hh()).done;){var Ef=Gf.value,kh=Ef.value;Gf=kh.offset;var uh=Ef.start,qj=kh.size;kh.offset<oc&&(kh=(uh+=Math.floor((oc-kh.offset+De)/(qj+De)))-Ef.start,Gf+=kh*qj+kh*De);uh<Oe&&(Gf+=(Oe-uh)*qj,uh=Oe);for(Ef=Math.min(Ef.end,Sf);uh<=Ef&&!(Gf>=
Ec);uh++)qf.push({index:uh,size:qj,offset:Gf,data:Ye&&Ye[uh]}),Gf+=qj+De}}),Sc,nc,De,Tb,he)}),Vg(function(Tb){return null!==Tb}),jg()),mB);return be(He(X,Vg(function(Tb){return void 0!==Tb}),$f(function(Tb){return Tb.length})),G),be(He(p,$f(function(Tb){return Tb.topListHeight})),eb),be(eb,Qa),be(He(p,$f(function(Tb){return[Tb.top,Tb.bottom]})),g),be(He(p,$f(function(Tb){return Tb.items})),gc),lg({listState:p,topItemsIndexes:b,endReached:rj(He(p,Vg(function(Tb){return 0<Tb.items.length}),eg(G,X),
Vg(function(Tb){var nc=Tb[0].items;return nc[nc.length-1].originalIndex===Tb[1]-1}),$f(function(Tb){return[Tb[1]-1,Tb[2]]}),jg(oi),$f(function(Tb){return Tb[0]}))),startReached:rj(He(p,Jf(200),Vg(function(Tb){var nc=Tb.items;return 0<nc.length&&nc[0].originalIndex===Tb.topItems.length}),$f(function(Tb){return Tb.items[0].index}),jg())),rangeChanged:rj(He(p,Vg(function(Tb){return 0<Tb.items.length}),$f(function(Tb){Tb=Tb.items;for(var nc=0,oc=Tb.length-1;"group"===Tb[nc].type&&nc<oc;)nc++;for(;"group"===
Tb[oc].type&&oc>nc;)oc--;return{startIndex:Tb[nc].index,endIndex:Tb[oc].index}}),jg(ak))),itemsRendered:gc},Vb)},re(Ep,lB,Fw,Ew,rt,st,nr,Dw),{singleton:!0}),kI=sh(function(b){var g=b[0],p=g.sizes,G=g.firstItemIndex,X=g.data;g=g.gap;var la=b[1].listState;b=b[2].didMount;var pa=Pd(0);return be(He(b,eg(pa),Vg(function(Ga){return 0!==Ga[1]}),eg(p,G,g,X),$f(function(Ga){var Qa=Ga[0][1],Za=Ga[1],eb=Ga[2],mb=Ga[3];Ga=Ga[4];var Lb=void 0===Ga?[]:Ga;Ga=0;if(0<Za.groupIndices.length)for(var Vb,Pb=Xl(Za.groupIndices);!((Vb=
Pb()).done||Vb.value-Ga>=Qa);)Ga++;Qa+=Ga;return km(Array.from({length:Qa}).map(function(ec,gc){return{index:gc,size:0,offset:0,data:Lb[gc]}}),[],Qa,mb,Za,eb)})),la),{initialItemCount:pa}},re(Ep,is,nr),{singleton:!0}),nB=sh(function(b){b=b[0].scrollVelocity;var g=Pd(!1),p=Uf(),G=Pd(!1);return be(He(b,eg(G,g,p),Vg(function(X){return!!X[1]}),$f(function(X){var la=X[0],pa=X[1],Ga=X[2];X=X[3];var Qa=pa.enter;if(Ga){if((0,pa.exit)(la,X))return!1}else if(Qa(la,X))return!0;return Ga}),jg()),g),dg(He(Mi(g,
b,p),eg(G)),function(X){var la=X[0];X=X[1];return la[0]&&X&&X.change&&X.change(la[1],la[2])}),{isSeeking:g,scrollSeekConfiguration:G,scrollVelocity:b,scrollSeekRangeChanged:p}},re(st),{singleton:!0}),lI=sh(function(b){b=b[0].topItemsIndexes;var g=Pd(0);return be(He(g,Vg(function(p){return 0<p}),$f(function(p){return Array.from({length:p}).map(function(G,X){return X})})),b),{topItemCount:g}},re(is)),Gw=sh(function(b){var g=b[0],p=g.footerHeight,G=g.headerHeight,X=g.fixedHeaderHeight;g=g.fixedFooterHeight;
var la=b[1].listState;b=Uf();p=Si(He(Mi(p,g,G,X,la),$f(function(pa){var Ga=pa[4];return pa[0]+pa[1]+pa[2]+pa[3]+Ga.offsetBottom+Ga.bottom})),0);return be(Ah(p),b),{totalListHeight:p,totalListHeightChanged:b}},re(On,is),{singleton:!0}),mI=ap(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),nI=sh(function(b){function g(gc){0<gc?(G(0,{top:-gc,behavior:"auto"}),la(0,0)):(la(0,0),G(0,{top:-gc,behavior:"auto"}))}var p=b[0],G=p.scrollBy,X=p.scrollTop,la=p.deviation,
pa=p.scrollingInProgress,Ga=b[1];p=Ga.isScrolling;var Qa=Ga.isAtBottom,Za=Ga.scrollDirection,eb=b[3],mb=eb.beforeUnshiftWith,Lb=eb.shiftWithOffset,Vb=eb.sizes;eb=eb.gap;var Pb=b[4].log,ec=b[5].recalcInProgress;b=rj(He(b[2].listState,eg(Ga.lastJumpDueToItemResize),pl(function(gc,Tb){var nc=gc[1],oc=Tb[0],Ec=oc.items,Sc=oc.totalCount;oc=oc.bottom+oc.offsetBottom;var vd=0;return gc[2]===Sc&&0<nc.length&&0<Ec.length&&(0===Ec[0].originalIndex&&0===nc[0].originalIndex||0!=(vd=oc-gc[3])&&(vd+=Tb[1])),[vd,
Ec,Sc,oc]},[0,[],0,0]),Vg(function(gc){return 0!==gc[0]}),eg(X,Za,pa,Qa,Pb),Vg(function(gc){return!gc[3]&&0!==gc[1]&&"up"===gc[2]}),$f(function(gc){var Tb=gc[0][0];return(0,gc[5])("Upward scrolling compensation",{amount:Tb},Fm.DEBUG),Tb})));return dg(He(b,eg(la,p)),function(gc){var Tb=gc[0],nc=gc[1];gc[2]&&mI()?la(0,nc-Tb):g(-Tb)}),dg(He(Mi(Si(p,!1),la,ec),Vg(function(gc){return!gc[0]&&!gc[2]&&0!==gc[1]}),$f(function(gc){return gc[1]}),Jf(1)),g),be(He(Lb,$f(function(gc){return{top:-gc}})),G),dg(He(mb,
eg(Vb,eb),$f(function(gc){var Tb=gc[0];return Tb*gc[1].lastSize+Tb*gc[2]})),function(gc){la(0,gc);requestAnimationFrame(function(){hj(G,{top:gc});requestAnimationFrame(function(){la(0,0);ec(0,!1)})})}),{deviation:la}},re(On,st,is,Ep,lq,Dw)),oI=sh(function(b){var g=b[0].totalListHeight,p=b[1].didMount,G=b[2].scrollTo;b=Pd(0);return dg(He(p,eg(b),Vg(function(X){return 0!==X[1]}),$f(function(X){return{top:X[1]}})),function(X){Le(He(g,Vg(function(la){return 0!==la})),function(){setTimeout(function(){G(0,
X)})})}),{initialScrollTop:b}},re(Gw,nr,On),{singleton:!0}),pI=sh(function(b){var g=b[0].viewportHeight;b=b[1].totalListHeight;var p=Pd(!1);return{alignToBottom:p,paddingTopAddition:Si(He(Mi(p,g,b),Vg(function(G){return G[0]}),$f(function(G){return Math.max(0,G[1]-G[2])}),jg()),0)}},re(On,Gw),{singleton:!0}),oB=sh(function(b){var g=b[0];b=g.scrollTo;g=g.scrollContainerState;var p=Uf(),G=Uf(),X=Uf(),la=Pd(!1),pa=Pd(void 0);return be(He(Mi(p,G),$f(function(Ga){var Qa=Ga[0];return{scrollTop:Math.max(0,
Qa.scrollTop-Ga[1].offsetTop),scrollHeight:Qa.scrollHeight,viewportHeight:Qa.viewportHeight}})),g),be(He(b,eg(G),$f(function(Ga){var Qa=Ga[0];return lg({},Qa,{top:Qa.top+Ga[1].offsetTop})})),X),{useWindowScroll:la,customScrollParent:pa,windowScrollContainerState:p,windowViewportRect:G,windowScrollTo:X}},re(On)),qI=["done","behavior","align"],rI=sh(function(b){var g=b[0],p=g.sizes,G=g.totalCount;g=g.gap;var X=b[1],la=X.scrollTop,pa=X.viewportHeight,Ga=X.headerHeight,Qa=X.fixedHeaderHeight,Za=X.fixedFooterHeight,
eb=X.scrollingInProgress;b=b[2].scrollToIndex;X=Uf();return be(He(X,eg(p,pa,G,Ga,Qa,Za,la),eg(g),$f(function(mb){var Lb=mb[0],Vb=Lb[0],Pb=Lb[1],ec=Lb[2],gc=Lb[3],Tb=Lb[4],nc=Lb[5],oc=Lb[6];Lb=Lb[7];var Ec=mb[1];mb=Vb.done;var Sc=Vb.behavior,vd=Vb.align,Wd=Ai(Vb,qI),he=null;Vb=gg(Vb,Pb,gc-1);Tb=Gh(Vb,Pb.offsetTree,Ec)+Tb+nc;return Tb<Lb+nc?he=lg({},Wd,{behavior:Sc,align:null!=vd?vd:"start"}):Tb+xa(Pb.sizeTree,Vb)[1]>Lb+ec-oc&&(he=lg({},Wd,{behavior:Sc,align:null!=vd?vd:"end"})),he?mb&&Le(He(eb,Vk(1),
Vg(function(De){return!1===De})),mb):mb&&mb(),he}),Vg(function(mb){return null!==mb})),b),{scrollIntoView:X}},re(Ep,On,rt,is,lq),{singleton:!0}),sI=["listState","topItemsIndexes"],tI=sh(function(b){return lg({},b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},re(Fw,kI,nr,nB,Gw,oI,pI,oB,rI)),pB=sh(function(b){var g=b[0],p=g.totalCount,G=g.sizeRanges,X=g.fixedItemSize,la=g.defaultItemSize,pa=g.trackItemSizes,Ga=g.itemSize,Qa=g.data,Za=g.firstItemIndex,eb=g.groupIndices,mb=g.statefulTotalCount;g=g.gap;
var Lb=b[1],Vb=Lb.initialTopMostItemIndex;Lb=Lb.scrolledToInitialItem;var Pb=b[2],ec=b[3],gc=b[4],Tb=gc.listState,nc=gc.topItemsIndexes;gc=Ai(gc,sI);var oc=b[5].scrollToIndex,Ec=b[7].topItemCount,Sc=b[8].groupCounts,vd=b[9];b=b[10];return be(gc.rangeChanged,vd.scrollSeekRangeChanged),be(He(vd.windowViewportRect,$f(function(Wd){return Wd.visibleHeight})),Pb.viewportHeight),lg({totalCount:p,data:Qa,firstItemIndex:Za,sizeRanges:G,initialTopMostItemIndex:Vb,scrolledToInitialItem:Lb,topItemsIndexes:nc,
topItemCount:Ec,groupCounts:Sc,fixedItemHeight:X,defaultItemHeight:la,gap:g},ec,{statefulTotalCount:mb,listState:Tb,scrollToIndex:oc,trackItemSizes:pa,itemSize:Ga,groupIndices:eb},gc,vd,Pb,b)},re(Ep,Ew,On,jI,is,rt,nI,lI,lB,tI,lq)),qB=ap(function(){if("undefined"==typeof document)return"sticky";var b=document.createElement("div");return b.style.position="-webkit-sticky","-webkit-sticky"===b.style.position?"-webkit-sticky":"sticky"}),Mu=gh.createContext(void 0),rB=gh.createContext(void 0),uI=["placeholder"],
vI=["style","children"],wI=["style","children"],xI=sh(function(){var b=Pd(function(Qa){return"Item "+Qa}),g=Pd(null),p=Pd(function(Qa){return"Group "+Qa}),G=Pd({}),X=Pd($g),la=Pd("div"),pa=Pd(Gi),Ga=function(Qa,Za){return void 0===Za&&(Za=null),Si(He(G,$f(function(eb){return eb[Qa]}),jg()),Za)};return{context:g,itemContent:b,groupContent:p,components:G,computeItemKey:X,headerFooterTag:la,scrollerRef:pa,FooterComponent:Ga("Footer"),HeaderComponent:Ga("Header"),TopItemListComponent:Ga("TopItemList"),
ListComponent:Ga("List","div"),ItemComponent:Ga("Item","div"),GroupComponent:Ga("Group","div"),ScrollerComponent:Ga("Scroller","div"),EmptyPlaceholder:Ga("EmptyPlaceholder"),ScrollSeekPlaceholder:Ga("ScrollSeekPlaceholder")}}),yI=sh(function(b){function g(X,la,pa){be(He(X,eg(G.components),$f(function(Ga){var Qa,Za=Ga[0];Ga=Ga[1];return console.warn("react-virtuoso: "+pa+" property is deprecated. Pass components."+la+" instead."),lg({},Ga,((Qa={})[la]=Za,Qa))})),G.components)}var p=b[0],G=b[1];b={item:ym(G.itemContent,
"Rename the %citem%c prop to %citemContent."),group:ym(G.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:ym(p.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:ym(p.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:ym(p.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Uf(),maxHeightCacheSize:Uf(),footer:Uf(),header:Uf(),HeaderContainer:Uf(),FooterContainer:Uf(),
ItemContainer:Uf(),ScrollContainer:Uf(),GroupContainer:Uf(),ListContainer:Uf(),emptyComponent:Uf(),scrollSeek:Uf()};return dg(b.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),dg(b.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
dg(b.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),dg(b.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),dg(b.scrollSeek,function(X){var la=X.placeholder;
X=Ai(X,uI);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=lg({},(0,G.components)(4),{ScrollSeekPlaceholder:la});(0,G.components)(0,la);(0,p.scrollSeekConfiguration)(0,X)}),g(b.footer,"Footer","footer"),g(b.header,"Header","header"),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),g(b.emptyComponent,
"EmptyPlaceholder","emptyComponent"),g(b.GroupContainer,"Group","GroupContainer"),lg({},p,G,b)},re(pB,xI)),zI=function(b){return gh.createElement("div",{style:{height:b.height}})},AI={position:qB(),zIndex:1,overflowAnchor:"none"},BI={overflowAnchor:"none"},sB=gh.memo(function(b){b=b.showTopList;b=void 0!==b&&b;var g=pj("listState"),p=yo("sizeRanges"),G=pj("useWindowScroll"),X=pj("customScrollParent"),la=yo("windowScrollContainerState"),pa=yo("scrollContainerState");G=X||G?la:pa;var Ga=pj("itemContent"),
Qa=pj("context"),Za=pj("groupContent");la=pj("trackItemSizes");pa=pj("itemSize");var eb=pj("log"),mb=yo("gap");p=Ui(p,pa,la,b?Gi:G,eb,mb,X).callbackRef;X=gh.useState(0);var Lb=X[0],Vb=X[1];Hw("deviation",function(Ec){Lb!==Ec&&Vb(Ec)});X=pj("EmptyPlaceholder");var Pb=pj("ScrollSeekPlaceholder")||zI;G=pj("ListComponent");var ec=pj("ItemComponent"),gc=pj("GroupComponent"),Tb=pj("computeItemKey"),nc=pj("isSeeking"),oc=0<pj("groupIndices").length;la=pj("paddingTopAddition");la=b?{}:{boxSizing:"border-box",
paddingTop:g.offsetTop+la,paddingBottom:g.offsetBottom,marginTop:Lb};return!b&&0===g.totalCount&&X?(0,ji.createElement)(X,di(X,Qa)):(0,ji.createElement)(G,lg({},di(G,Qa),{ref:p,style:la,"data-test-id":b?"virtuoso-top-item-list":"virtuoso-item-list"}),(b?g.topItems:g.items).map(function(Ec){var Sc=Ec.originalIndex,vd=Tb(Sc+g.firstItemIndex,Ec.data,Qa);return nc?(0,ji.createElement)(Pb,lg({},di(Pb,Qa),{key:vd,index:Ec.index,height:Ec.size,type:Ec.type||"item"},"group"===Ec.type?{}:{groupIndex:Ec.groupIndex})):
"group"===Ec.type?(0,ji.createElement)(gc,lg({},di(gc,Qa),{key:vd,"data-index":Sc,"data-known-size":Ec.size,"data-item-index":Ec.index,style:AI}),Za(Ec.index)):(0,ji.createElement)(ec,lg({},di(ec,Qa),{key:vd,"data-index":Sc,"data-known-size":Ec.size,"data-item-index":Ec.index,"data-item-group-index":Ec.groupIndex,style:BI}),oc?Ga(Ec.index,Ec.groupIndex,Ec.data,Qa):Ga(Ec.index,Ec.data,Qa))}))}),CI={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},js=
{width:"100%",height:"100%",position:"absolute",top:0},DI={width:"100%",position:qB(),top:0},EI=gh.memo(function(){var b=pj("HeaderComponent"),g=yo("headerHeight"),p=pj("headerFooterTag"),G=Yf(function(la){return g(il(la,"height"))}),X=pj("context");return b?(0,ji.createElement)(p,{ref:G},(0,ji.createElement)(b,di(b,X))):null}),FI=gh.memo(function(){var b=pj("FooterComponent"),g=yo("footerHeight"),p=pj("headerFooterTag"),G=Yf(function(la){return g(il(la,"height"))}),X=pj("context");return b?(0,ji.createElement)(p,
{ref:G},(0,ji.createElement)(b,di(b,X))):null}),GI=function(b){b=b.children;var g=(0,ji.useContext)(Mu),p=yo("viewportHeight"),G=yo("fixedItemHeight"),X=Yf(ri(p,function(la){return il(la,"height")}));return gh.useEffect(function(){g&&(p(g.viewportHeight),G(g.itemHeight))},[g,p,G]),gh.createElement("div",{style:js,ref:X,"data-viewport-type":"element"},b)},HI=function(b){b=b.children;var g=(0,ji.useContext)(Mu),p=yo("windowViewportRect"),G=yo("fixedItemHeight"),X=pj("customScrollParent");X=gn(p,X);
return gh.useEffect(function(){g&&(G(g.itemHeight),p({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,p,G]),gh.createElement("div",{ref:X,style:js,"data-viewport-type":"window"},b)},II=function(b){b=b.children;var g=pj("TopItemListComponent"),p=pj("headerHeight");p=lg({},DI,{marginTop:p+"px"});var G=pj("context");return(0,ji.createElement)(g||"div",{style:p,context:G},b)},Nu=Tm(yI,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},gh.memo(function(b){var g=pj("useWindowScroll"),p=0<pj("topItemsIndexes").length,G=pj("customScrollParent"),X=G||g?HI:GI;return gh.createElement(G||g?LI:KI,lg({},b),gh.createElement(X,null,gh.createElement(EI,null),gh.createElement(sB,null),gh.createElement(FI,
null)),p&&gh.createElement(II,null,gh.createElement(sB,{showTopList:!0})))})),JI=Nu.Component,yo=Nu.usePublisher,pj=Nu.useEmitterValue,Hw=Nu.useEmitter,KI=Un({usePublisher:yo,useEmitterValue:pj,useEmitter:Hw}),LI=cn({usePublisher:yo,useEmitterValue:pj,useEmitter:Hw}),tB={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},MI={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},uB=Math.round,vB=Math.ceil,Ou=Math.floor,Iw=Math.min,ks=Math.max,
NI=sh(function(b){var g=b[0],p=g.overscan,G=g.visibleRange,X=g.listBoundary,la=b[1];g=la.scrollTop;var pa=la.viewportHeight,Ga=la.scrollBy,Qa=la.scrollTo,Za=la.smoothScrollTargetReached,eb=la.scrollContainerState,mb=la.footerHeight;la=la.headerHeight;var Lb=b[2],Vb=b[3],Pb=b[4],ec=Pb.propsReady,gc=Pb.didMount,Tb=b[5];Pb=Tb.windowViewportRect;var nc=Tb.windowScrollTo,oc=Tb.useWindowScroll,Ec=Tb.customScrollParent;Tb=Tb.windowScrollContainerState;b=b[6];var Sc=Pd(0),vd=Pd(0),Wd=Pd(tB),he=Pd({height:0,
width:0}),De=Pd({height:0,width:0}),Ye=Uf(),jf=Uf(),Ne=Pd(0),Ae=Pd(void 0),Ad=Pd({row:0,column:0});be(He(Mi(gc,vd,Ae),Vg(function(ad){return 0!==ad[1]}),$f(function(ad){return{items:Vn(0,ad[1]-1,ad[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Wd);be(He(Mi(Ah(Sc),G,Ah(Ad,Co),Ah(De,function(ad,ed){return ad&&ad.width===ed.width&&ad.height===ed.height}),Ae),eg(he),$f(function(ad){var ed=ad[0],ld=ed[0],$d=ed[1],Oe=$d[0],mf=$d[1],Sf=ed[2],qf=ed[3],Gf=ed[4],hh=ad[1];ad=Sf.row;
var Ef=Sf.column;ed=qf.height;$d=qf.width;var kh=hh.width;if(0===ld||0===kh)return tB;if(0===$d)return lg({},MI,{items:Vn(0,0,Gf)});Ef=ks(1,Ou((kh+Ef)/($d+Ef)));Oe=Ef*Ou((Oe+ad)/(ed+ad));mf=Ef*vB((mf+ad)/(ed+ad))-1;mf=Iw(ld-1,ks(mf,Ef-1));Oe=Vn(Iw(mf,ks(0,Oe)),mf,Gf);qf=sm(hh,Sf,qf,Oe);Sf=qf.top;qf=qf.bottom;ld=vB(ld/Ef);return{items:Oe,offsetTop:Sf,offsetBottom:ld*ed+(ld-1)*ad-qf,top:Sf,bottom:qf,itemHeight:ed,itemWidth:$d}})),Wd);be(He(Ae,Vg(function(ad){return void 0!==ad}),$f(function(ad){return ad.length})),
Sc);be(He(he,$f(function(ad){return ad.height})),pa);be(He(Mi(he,De,Wd,Ad),$f(function(ad){ad=sm(ad[0],ad[3],ad[1],ad[2].items);return[ad.top,ad.bottom]}),jg(oi)),X);G=rj(He(Ah(Wd),Vg(function(ad){return 0<ad.items.length}),eg(Sc),Vg(function(ad){var ed=ad[0].items;return ed[ed.length-1].index===ad[1]-1}),$f(function(ad){return ad[1]-1}),jg()));X=rj(He(Ah(Wd),Vg(function(ad){ad=ad.items;return 0<ad.length&&0===ad[0].index}),Pf(0),jg()));pa=rj(He(Ah(Wd),Vg(function(ad){return 0<ad.items.length}),$f(function(ad){ad=
ad.items;return{startIndex:ad[0].index,endIndex:ad[ad.length-1].index}}),jg(ak)));be(pa,Vb.scrollSeekRangeChanged);be(He(Ye,eg(he,De,Sc,Ad),$f(function(ad){var ed=ad[1],ld=ad[2],$d=ad[3],Oe=ad[4],mf=Ch(ad[0]);ad=mf.align;var Sf=mf.behavior,qf=mf.offset;mf=mf.index;"LAST"===mf&&(mf=$d-1);$d=Um(ed,Oe,ld,ks(0,mf,Iw($d-1,mf)));return"end"===ad?$d=uB($d-ed.height+ld.height):"center"===ad&&($d=uB($d-ed.height/2+ld.height/2)),qf&&($d+=qf),{top:$d,behavior:Sf}})),Qa);gc=Si(He(Wd,$f(function(ad){return ad.offsetBottom+
ad.bottom})),0);return be(He(Pb,$f(function(ad){return{width:ad.visibleWidth,height:ad.visibleHeight}})),he),lg({data:Ae,totalCount:Sc,viewportDimensions:he,itemDimensions:De,scrollTop:g,scrollHeight:jf,overscan:p,scrollBy:Ga,scrollTo:Qa,scrollToIndex:Ye,smoothScrollTargetReached:Za,windowViewportRect:Pb,windowScrollTo:nc,useWindowScroll:oc,customScrollParent:Ec,windowScrollContainerState:Tb,deviation:Ne,scrollContainerState:eb,footerHeight:mb,headerHeight:la,initialItemCount:vd,gap:Ad},Vb,{gridState:Wd,
totalListHeight:gc},Lb,{startReached:X,endReached:G,rangeChanged:pa,propsReady:ec},b)},re(Fw,On,st,nB,nr,oB,lq)),OI=["placeholder"],PI=sh(function(){var b=Pd(function(Za){return"Item "+Za}),g=Pd({}),p=Pd(null),G=Pd("virtuoso-grid-item"),X=Pd("virtuoso-grid-list"),la=Pd($g),pa=Pd("div"),Ga=Pd(Gi),Qa=function(Za,eb){return void 0===eb&&(eb=null),Si(He(g,$f(function(mb){return mb[Za]}),jg()),eb)};return{context:p,itemContent:b,components:g,computeItemKey:la,itemClassName:G,listClassName:X,headerFooterTag:pa,
scrollerRef:Ga,FooterComponent:Qa("Footer"),HeaderComponent:Qa("Header"),ListComponent:Qa("List","div"),ItemComponent:Qa("Item","div"),ScrollerComponent:Qa("Scroller","div"),ScrollSeekPlaceholder:Qa("ScrollSeekPlaceholder","div")}}),QI=sh(function(b){function g(X,la,pa){be(He(X,eg(G.components),$f(function(Ga){var Qa,Za=Ga[0];Ga=Ga[1];return console.warn("react-virtuoso: "+pa+" property is deprecated. Pass components."+la+" instead."),lg({},Ga,((Qa={})[la]=Za,Qa))})),G.components)}var p=b[0],G=b[1];
b={item:ym(G.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Uf(),ScrollContainer:Uf(),ListContainer:Uf(),emptyComponent:Uf(),scrollSeek:Uf()};return dg(b.scrollSeek,function(X){var la=X.placeholder;X=Ai(X,OI);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=lg({},(0,G.components)(4),{ScrollSeekPlaceholder:la});(0,G.components)(0,la);(0,p.scrollSeekConfiguration)(0,
X)}),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),lg({},p,G,b)},re(NI,PI)),RI=gh.memo(function(){var b=Kl("gridState"),g=Kl("listClassName"),p=Kl("itemClassName"),G=Kl("itemContent"),X=Kl("computeItemKey"),la=Kl("isSeeking"),pa=So("scrollHeight"),Ga=Kl("ItemComponent"),Qa=Kl("ListComponent"),Za=Kl("ScrollSeekPlaceholder"),eb=Kl("context"),mb=So("itemDimensions"),Lb=So("gap"),Vb=Kl("log"),Pb=Yf(function(ec){pa(ec.parentElement.parentElement.scrollHeight);
var gc=ec.firstChild;gc&&mb(gc.getBoundingClientRect());Lb({row:bl("row-gap",getComputedStyle(ec).rowGap,Vb),column:bl("column-gap",getComputedStyle(ec).columnGap,Vb)})});return(0,ji.createElement)(Qa,lg({ref:Pb,className:g},di(Qa,eb),{style:{paddingTop:b.offsetTop,paddingBottom:b.offsetBottom}}),b.items.map(function(ec){var gc=X(ec.index,ec.data,eb);return la?(0,ji.createElement)(Za,lg({key:gc},di(Za,eb),{index:ec.index,height:b.itemHeight,width:b.itemWidth})):(0,ji.createElement)(Ga,lg({},di(Ga,
eb),{className:p,"data-index":ec.index,key:gc}),G(ec.index,ec.data,eb))}))}),SI=gh.memo(function(){var b=Kl("HeaderComponent"),g=So("headerHeight"),p=Kl("headerFooterTag"),G=Yf(function(la){return g(il(la,"height"))}),X=Kl("context");return b?(0,ji.createElement)(p,{ref:G},(0,ji.createElement)(b,di(b,X))):null}),TI=gh.memo(function(){var b=Kl("FooterComponent"),g=So("footerHeight"),p=Kl("headerFooterTag"),G=Yf(function(la){return g(il(la,"height"))}),X=Kl("context");return b?(0,ji.createElement)(p,
{ref:G},(0,ji.createElement)(b,di(b,X))):null}),UI=function(b){b=b.children;var g=(0,ji.useContext)(rB),p=So("itemDimensions"),G=So("viewportDimensions"),X=Yf(function(la){G(la.getBoundingClientRect())});return gh.useEffect(function(){g&&(G({height:g.viewportHeight,width:g.viewportWidth}),p({height:g.itemHeight,width:g.itemWidth}))},[g,G,p]),gh.createElement("div",{style:js,ref:X},b)},VI=function(b){b=b.children;var g=(0,ji.useContext)(rB),p=So("windowViewportRect"),G=So("itemDimensions"),X=Kl("customScrollParent");
X=gn(p,X);return gh.useEffect(function(){g&&(G({height:g.itemHeight,width:g.itemWidth}),p({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:g.viewportWidth}))},[g,p,G]),gh.createElement("div",{ref:X,style:js},b)},Jw=Tm(QI,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},gh.memo(function(b){b=lg({},b);var g=Kl("useWindowScroll"),p=Kl("customScrollParent"),G=p||g?VI:UI;return gh.createElement(p||g?XI:WI,lg({},b),gh.createElement(G,null,gh.createElement(SI,null),gh.createElement(RI,null),gh.createElement(TI,null)))})),So=Jw.usePublisher,Kl=Jw.useEmitterValue,wB=Jw.useEmitter,WI=Un({usePublisher:So,useEmitterValue:Kl,useEmitter:wB}),XI=cn({usePublisher:So,useEmitterValue:Kl,useEmitter:wB}),YI=sh(function(){var b=Pd(function(Qa){return gh.createElement("td",
null,"Item $",Qa)}),g=Pd(null),p=Pd(null),G=Pd(null),X=Pd({}),la=Pd($g),pa=Pd(Gi),Ga=function(Qa,Za){return void 0===Za&&(Za=null),Si(He(X,$f(function(eb){return eb[Qa]}),jg()),Za)};return{context:g,itemContent:b,fixedHeaderContent:p,fixedFooterContent:G,components:X,computeItemKey:la,scrollerRef:pa,TableComponent:Ga("Table","table"),TableHeadComponent:Ga("TableHead","thead"),TableFooterComponent:Ga("TableFoot","tfoot"),TableBodyComponent:Ga("TableBody","tbody"),TableRowComponent:Ga("TableRow","tr"),
ScrollerComponent:Ga("Scroller","div"),EmptyPlaceholder:Ga("EmptyPlaceholder"),ScrollSeekPlaceholder:Ga("ScrollSeekPlaceholder"),FillerRow:Ga("FillerRow")}}),ZI=sh(function(b){return lg({},b[0],b[1])},re(pB,YI)),$I=function(b){return gh.createElement("tr",null,gh.createElement("td",{style:{height:b.height}}))},aJ=function(b){return gh.createElement("tr",null,gh.createElement("td",{style:{height:b.height,padding:0,border:0}}))},bJ=gh.memo(function(){var b=Xj("listState"),g=To("sizeRanges"),p=Xj("useWindowScroll"),
G=Xj("customScrollParent"),X=To("windowScrollContainerState"),la=To("scrollContainerState");p=G||p?X:la;var pa=Xj("itemContent");X=Xj("trackItemSizes");G=Ui(g,Xj("itemSize"),X,p,Xj("log"),void 0,G);g=G.callbackRef;var Ga=G.ref;G=gh.useState(0);var Qa=G[0],Za=G[1];Lw("deviation",function(Tb){Qa!==Tb&&(Ga.current.style.marginTop=Tb+"px",Za(Tb))});X=Xj("EmptyPlaceholder");var eb=Xj("ScrollSeekPlaceholder")||$I;p=Xj("FillerRow")||aJ;G=Xj("TableBodyComponent");var mb=Xj("TableRowComponent"),Lb=Xj("computeItemKey"),
Vb=Xj("isSeeking");la=Xj("paddingTopAddition");var Pb=Xj("firstItemIndex"),ec=Xj("statefulTotalCount"),gc=Xj("context");if(0===ec&&X)return(0,ji.createElement)(X,di(X,gc));X=b.offsetTop+la+Qa;la=b.offsetBottom;X=0<X?gh.createElement(p,{height:X,key:"padding-top"}):null;p=0<la?gh.createElement(p,{height:la,key:"padding-bottom"}):null;b=b.items.map(function(Tb){var nc=Tb.originalIndex,oc=Lb(nc+Pb,Tb.data,gc);return Vb?(0,ji.createElement)(eb,lg({},di(eb,gc),{key:oc,index:Tb.index,height:Tb.size,type:Tb.type||
"item"})):(0,ji.createElement)(mb,lg({},di(mb,gc),{key:oc,"data-index":nc,"data-known-size":Tb.size,"data-item-index":Tb.index,style:{overflowAnchor:"none"}}),pa(Tb.index,Tb.data,gc))});return(0,ji.createElement)(G,lg({ref:g,"data-test-id":"virtuoso-item-list"},di(G,gc)),[X].concat(b,[p]))}),cJ=function(b){b=b.children;var g=(0,ji.useContext)(Mu),p=To("viewportHeight"),G=To("fixedItemHeight"),X=Yf(ri(p,function(la){return il(la,"height")}));return gh.useEffect(function(){g&&(p(g.viewportHeight),G(g.itemHeight))},
[g,p,G]),gh.createElement("div",{style:js,ref:X,"data-viewport-type":"element"},b)},dJ=function(b){b=b.children;var g=(0,ji.useContext)(Mu),p=To("windowViewportRect"),G=To("fixedItemHeight"),X=Xj("customScrollParent");X=gn(p,X);return gh.useEffect(function(){g&&(G(g.itemHeight),p({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,p,G]),gh.createElement("div",{ref:X,style:js,"data-viewport-type":"window"},b)},Kw=Tm(ZI,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},gh.memo(function(b){var g=Xj("useWindowScroll"),p=Xj("customScrollParent"),G=To("fixedHeaderHeight"),X=To("fixedFooterHeight"),la=Xj("fixedHeaderContent"),pa=Xj("fixedFooterContent"),Ga=Xj("context");G=Yf(ri(G,function(mb){return il(mb,
"height")}));var Qa=Yf(ri(X,function(mb){return il(mb,"height")}));X=p||g?fJ:eJ;g=p||g?dJ:cJ;p=Xj("TableComponent");var Za=Xj("TableHeadComponent"),eb=Xj("TableFooterComponent");la=la?gh.createElement(Za,lg({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:G},di(Za,Ga)),la()):null;pa=pa?gh.createElement(eb,lg({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Qa},di(eb,Ga)),pa()):null;return gh.createElement(X,lg({},b),gh.createElement(g,null,gh.createElement(p,lg({style:{borderSpacing:0}},
di(p,Ga)),[la,gh.createElement(bJ,{key:"TableBody"}),pa])))})),To=Kw.usePublisher,Xj=Kw.useEmitterValue,Lw=Kw.useEmitter,eJ=Un({usePublisher:To,useEmitterValue:Xj,useEmitter:Lw}),fJ=cn({usePublisher:To,useEmitterValue:Xj,useEmitter:Lw}),xB=uf(W(22)),jp=function(b){function g(p){p=b.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+p+" for more information.")||this;if(void 0===p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return p}tn(g,b);return g}(Xn(Error)),yB={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",
darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",
gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",
olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},gJ=/^#[a-fA-F0-9]{6}$/,hJ=/^#[a-fA-F0-9]{8}$/,iJ=/^#[a-fA-F0-9]{3}$/,jJ=/^#[a-fA-F0-9]{4}$/,Mw=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,kJ=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,
lJ=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,mJ=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Nw=function(b){return 7===b.length&&b[1]===b[2]&&b[3]===b[4]&&b[5]===b[6]?"#"+b[1]+b[3]+b[5]:b},nJ=Do(Eo,Eo.length,[]);nb=W(588);var Uo=uf(W(22)),go=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||
0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const p=b.ownerDocument,G=p.activeElement;G!==b&&b.focus();p.execCommand("insertText",!1,g)||go.insertTextFirefox(b,g);G===p.body?b.blur():G instanceof HTMLElement&&G!==b&&G.focus()}static set(b,g){b.select();go.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:p}=b;return b.value.slice(g?g:void 0,p?p:void 0)}static wrapSelection(b,g,p){const {selectionStart:G,
selectionEnd:X}=b,la=go.getSelection(b);go.insert(b,g+la+(null!=p?p:g));b.selectionStart=(G||0)+g.length;b.selectionEnd=(X||0)+g.length}static replace(b,g,p){let G=0;b.value.replace(g,(...X)=>{const la=G+X[X.length-2],pa=X[0].length;b.selectionStart=la;b.selectionEnd=la+pa;X="string"===typeof p?p:p(...X);go.insert(b,X);b.selectionStart=la;G+=X.length-pa;return X})}static findLineEnd(b,g){const p=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(p)?g:p+1}static indent(b){var g;const {selectionStart:p,
selectionEnd:G,value:X}=b;var la=X.slice(p,G);if((la=null==(g=/\n/g.exec(la))?void 0:g.length)&&0<la){g=X.lastIndexOf("\n",p-1)+1;var pa=b.value.slice(g,G-1);la=pa.replace(/^|\n/g,"$\x26  ");pa=la.length-pa.length;b.setSelectionRange(g,G-1);go.insert(b,la);b.setSelectionRange(p+1,G+pa)}else go.insert(b,"  ")}static unindent(b){const {selectionStart:g,selectionEnd:p,value:G}=b;var X=G.lastIndexOf("\n",g-1)+1;const la=go.findLineEnd(G,p);var pa=b.value.slice(X,la);const Ga=pa.replace(/(^|\n)(\t| {1,2})/g,
"$1");pa=pa.length-Ga.length;b.setSelectionRange(X,la);go.insert(b,Ga);X=(X=/\t| {1,2}/.exec(G.slice(X,g)))?X[0].length:0;b.setSelectionRange(g-X,Math.max(g-X,p-pa))}};nb=W(588);var Pu=b=>b.stopPropagation(),Qu=Uo.memo(function({font:b,text:g,color:p,fontStyle:G,fontSize:X,fontWeight:la,offsetX:pa=0,offsetY:Ga=0,scale:Qa=1,isEditing:Za=!1,pointerEvents:eb=!1,onBlur:mb,onChange:Lb}){const Vb=Uo.useRef(null),Pb=Uo.useRef(!1),ec=Uo.useCallback(Sc=>{Lb(as.normalizeText(Sc.currentTarget.value))},[Lb]),
gc=Uo.useCallback(Sc=>{if("Escape"!==Sc.key)if("Tab"===Sc.key&&0===g.length)Sc.preventDefault();else{if("Meta"!==Sc.key&&!Sc.metaKey)Sc.stopPropagation();else if("z"===Sc.key&&Sc.metaKey){document.execCommand(Sc.shiftKey?"redo":"undo",!1);Sc.stopPropagation();Sc.preventDefault();return}"Tab"===Sc.key&&(Sc.preventDefault(),Sc.shiftKey?go.unindent(Sc.currentTarget):go.indent(Sc.currentTarget),null==Lb?void 0:Lb(as.normalizeText(Sc.currentTarget.value)))}},[Lb]),Tb=Uo.useCallback(Sc=>{Za&&(Sc.currentTarget.setSelectionRange(0,
0),null==mb?void 0:mb())},[mb]),nc=Uo.useCallback(Sc=>{Za&&Pb.current&&document.activeElement===Sc.currentTarget&&Sc.currentTarget.select()},[Za]),oc=Uo.useCallback(Sc=>{Za&&Sc.stopPropagation()},[Za]);Uo.useEffect(()=>{Za&&requestAnimationFrame(()=>{Pb.current=!0;const Sc=Vb.current;Sc&&(Sc.focus(),Sc.select())})},[Za,mb]);const Ec=Uo.useRef(null);Uo.useLayoutEffect(()=>{const Sc=Ec.current;if(Sc){var vd=Zh(g||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:X,lineHeight:1,fontWeight:la},
4);Sc.style.transform=`scale(${Qa}, ${Qa}) translate(${pa}px, ${Ga}px)`;Sc.style.width=vd[0]+1+"px";Sc.style.height=vd[1]+1+"px"}},[g,la,X,Ga,pa,Qa]);return(0,nb.jsx)("div",{className:"tl-text-label-wrapper",children:(0,nb.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Ec,style:{font:b,fontStyle:G,fontSize:X,fontWeight:la,color:p,pointerEvents:eb?"all":"none",userSelect:Za?"text":"none"},children:[Za?(0,nb.jsx)("textarea",{ref:Vb,style:{font:b,color:p,fontStyle:G,fontSize:X,fontWeight:la},
className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:g,color:p,onFocus:nc,onChange:ec,onKeyDown:gc,onBlur:Tb,onPointerDown:oc,onContextMenu:Pu,onCopy:Pu,onPaste:Pu,onCut:Pu}):g,""]})})});nb=W(588);var zB={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ls=class extends yn{constructor(){super(...arguments);ib(this,
"canEdit",!0);ib(this,"ReactComponent",ef(({events:b,isErasing:g,isBinding:p,isSelected:G,isEditing:X,onEditingEnd:la})=>{const {props:{size:[pa,Ga],stroke:Qa,fill:Za,noFill:eb,strokeWidth:mb,strokeType:Lb,borderRadius:Vb,opacity:Pb,label:ec,italic:gc,fontWeight:Tb,fontSize:nc}}=this;var oc=ec||X?Zh(ec,{fontFamily:"var(--ls-font-family)",fontSize:nc,lineHeight:1,fontWeight:Tb},4):[0,0];const Ec=ne.mul(this.props.size,.5);oc=Math.max(.5,Math.min(1,pa/oc[0],Ga/oc[1]));const Sc=this.getBounds(),vd=xB.useMemo(()=>
ne.sub(Ec,ne.toFixed([Sc.width/2,Sc.height/2])),[Sc,oc,Ec]),Wd=xB.useCallback(he=>{var De;null==(De=this.update)?void 0:De.call(this,{label:he})},[ec]);return(0,nb.jsxs)("div",lf(pe({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,nb.jsx)(Qu,{font:"20px / 1 var(--ls-font-family)",text:ec,color:Yg(Qa,"text"),offsetX:vd[0],offsetY:vd[1],fontSize:nc,scale:oc,isEditing:X,onChange:Wd,onBlur:la,fontStyle:gc?"italic":"normal",fontWeight:Tb,pointerEvents:!!ec}),
(0,nb.jsxs)(uo,{opacity:g?.2:Pb,children:[p&&(0,nb.jsx)(oo,{mode:"svg",strokeWidth:mb,size:[pa,Ga]}),(0,nb.jsx)("rect",{className:G||!eb?"tl-hitarea-fill":"tl-hitarea-stroke",x:mb/2,y:mb/2,rx:Vb,ry:Vb,width:Math.max(.01,pa-mb),height:Math.max(.01,Ga-mb),pointerEvents:"all"}),(0,nb.jsx)("rect",{x:mb/2,y:mb/2,rx:Vb,ry:Vb,width:Math.max(.01,pa-mb),height:Math.max(.01,Ga-mb),strokeWidth:mb,stroke:Yg(Qa,"stroke"),strokeDasharray:"dashed"===Lb?"8 2":void 0,fill:eb?"none":Yg(Za,"background")})]})]}))}));
ib(this,"setScaleLevel",b=>ai(this,null,function*(){this.update({scaleLevel:b,fontSize:zB[null!=b?b:"md"],strokeWidth:zB[null!=b?b:"md"]/10});this.onResetBounds()}));ib(this,"ReactIndicator",ef(()=>{const {props:{size:[b,g],borderRadius:p,isLocked:G}}=this;return(0,nb.jsx)("g",{children:(0,nb.jsx)("rect",{width:b,height:g,rx:p,ry:p,fill:"transparent",strokeDasharray:G?"8 2":void 0})})}));ib(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));
void 0!==b.borderRadius&&(b.borderRadius=Math.max(0,b.borderRadius));return em(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};ib(ls,"id","box");ib(ls,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});de([Pg],ls.prototype,"scaleLevel",1);de([pg],ls.prototype,"setScaleLevel",2);var AB=uf(W(22));nb=W(588);var BB=
{xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ms=class extends Gv{constructor(){super(...arguments);ib(this,"canEdit",!0);ib(this,"ReactComponent",ef(({isSelected:b,isErasing:g,events:p,isEditing:G,onEditingEnd:X})=>{const {size:[la,pa],stroke:Ga,fill:Qa,noFill:Za,strokeWidth:eb,strokeType:mb,opacity:Lb,label:Vb,italic:Pb,fontWeight:ec,fontSize:gc}=this.props;var Tb=Vb||G?Zh(Vb,{fontFamily:"var(--ls-font-family)",fontSize:gc,lineHeight:1,fontWeight:ec},4):[0,0];const nc=ne.mul(this.props.size,.5);Tb=Math.max(.5,
Math.min(1,la/Tb[0],pa/Tb[1]));const oc=this.getBounds(),Ec=AB.useMemo(()=>ne.sub(nc,ne.toFixed([oc.width/2,oc.height/2])),[oc,Tb,nc]),Sc=AB.useCallback(vd=>{var Wd;null==(Wd=this.update)?void 0:Wd.call(this,{label:vd})},[Vb]);return(0,nb.jsxs)("div",lf(pe({},p),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,nb.jsx)(Qu,{font:"18px / 1 var(--ls-font-family)",text:Vb,color:Yg(Ga,"text"),offsetX:Ec[0],offsetY:Ec[1],scale:Tb,isEditing:G,onChange:Sc,onBlur:X,fontStyle:Pb?"italic":"normal",
fontSize:gc,fontWeight:ec,pointerEvents:!!Vb}),(0,nb.jsxs)(uo,lf(pe({},p),{opacity:g?.2:Lb,children:[(0,nb.jsx)("ellipse",{className:b||!Za?"tl-hitarea-fill":"tl-hitarea-stroke",cx:la/2,cy:pa/2,rx:Math.max(.01,(la-eb)/2),ry:Math.max(.01,(pa-eb)/2)}),(0,nb.jsx)("ellipse",{cx:la/2,cy:pa/2,rx:Math.max(.01,(la-eb)/2),ry:Math.max(.01,(pa-eb)/2),strokeWidth:eb,stroke:Yg(Ga,"stroke"),strokeDasharray:"dashed"===mb?"8 2":void 0,fill:Za?"none":Yg(Qa,"background")})]}))]}))}));ib(this,"setScaleLevel",b=>ai(this,
null,function*(){this.update({scaleLevel:b,fontSize:BB[null!=b?b:"md"],strokeWidth:BB[null!=b?b:"md"]/10});this.onResetBounds()}));ib(this,"ReactIndicator",ef(()=>{const {size:[b,g],isLocked:p}=this.props;return(0,nb.jsx)("g",{children:(0,nb.jsx)("ellipse",{cx:b/2,cy:g/2,rx:b/2,ry:g/2,strokeWidth:2,fill:"transparent",strokeDasharray:p?"8 2":"undefined"})})}));ib(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return em(this,b)})}get scaleLevel(){var b;
return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {size:[g,p],stroke:G,fill:X,noFill:la,strokeWidth:pa,strokeType:Ga,opacity:Qa}=this.props;return(0,nb.jsxs)("g",{opacity:Qa,children:[(0,nb.jsx)("ellipse",{className:la?"tl-hitarea-stroke":"tl-hitarea-fill",cx:g/2,cy:p/2,rx:Math.max(.01,(g-pa)/2),ry:Math.max(.01,(p-pa)/2)}),(0,nb.jsx)("ellipse",{cx:g/2,cy:p/2,rx:Math.max(.01,(g-pa)/2),ry:Math.max(.01,(p-pa)/2),strokeWidth:pa,stroke:Yg(G,"stroke"),strokeDasharray:"dashed"===Ga?"8 2":
void 0,fill:la?"none":Yg(X,"background")})]})}};ib(ms,"id","ellipse");ib(ms,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});de([Pg],ms.prototype,"scaleLevel",1);de([pg],ms.prototype,"setScaleLevel",2);nb=W(588);var Ow=class extends au{constructor(){super(...arguments);ib(this,"ReactComponent",ef(({events:b})=>{const g=this.getBounds(),p=bf(),
G=p.selectedShapesArray.some(la=>p.shapesInGroups([this]).includes(la)),X=this.ReactIndicator;return(0,nb.jsxs)(uo,lf(pe({},b),{children:[(0,nb.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,g.width-2),height:Math.max(.01,g.height-2),pointerEvents:"all"}),G&&(0,nb.jsx)("g",{stroke:"var(--color-selectedFill)",children:(0,nb.jsx)(X,{})})]}))}));ib(this,"ReactIndicator",ef(()=>{const b=this.getBounds();return(0,nb.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:b.width+
16,height:b.height+16,fill:"transparent"})}))}};ib(Ow,"id","group");ib(Ow,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});nb=W(588);var oJ={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},or=class extends Gr{constructor(b={}){super(b);ib(this,"ReactComponent",ef(({events:g,isErasing:p})=>{const {pointsPath:G,props:{stroke:X,strokeWidth:la,opacity:pa}}=this;return(0,nb.jsx)(uo,lf(pe({},g),{opacity:p?.2:1,children:(0,nb.jsx)("path",{d:G,strokeWidth:16*la,stroke:Yg(X,
"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:pa})}))}));ib(this,"setScaleLevel",g=>ai(this,null,function*(){this.update({scaleLevel:g,strokeWidth:oJ[null!=g?g:"md"]});this.onResetBounds()}));ib(this,"ReactIndicator",ef(()=>{const {pointsPath:g,props:p}=this;return(0,nb.jsx)("path",{d:g,fill:"none",strokeDasharray:p.isLocked?"8 2":"undefined"})}));ib(this,"validateProps",g=>{g=em(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,
1));return g});Ag(this)}get pointsPath(){const {points:b}=this.props;return Ps.getCurvedPathForPoints(b)}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:p,opacity:G}}=this;return(0,nb.jsx)("path",{d:b,strokeWidth:16*p,stroke:Yg(g,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:G})}};ib(or,"id","highlighter");ib(or,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",
point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});de([Pg],or.prototype,"pointsPath",1);de([Pg],or.prototype,"scaleLevel",1);de([pg],or.prototype,"setScaleLevel",2);var Pw=uf(W(22));nb=W(588);var Qw={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},mq=class extends yn{constructor(){super(...arguments);ib(this,"canChangeAspectRatio",!0);ib(this,"canFlip",!1);ib(this,"canEdit",!0);ib(this,"htmlAnchorRef",Pw.createRef());ib(this,"setScaleLevel",b=>ai(this,
null,function*(){var g;const p=ne.mul(this.props.size,Qw[null!=b?b:"md"]/Qw[null!=(g=this.props.scaleLevel)?g:"md"]);this.update({scaleLevel:b});yield Pj();this.update({size:p})}));ib(this,"onResetBounds",b=>{var g;if(this.htmlAnchorRef.current){const p=this.htmlAnchorRef.current.getBoundingClientRect(),[G,X]=ne.div([p.width,p.height],null!=(g=null==b?void 0:b.zoom)?g:1);this.update({size:[Math.max(Math.min(G||400,1400),10),Math.max(Math.min(X||400,1400),10)]})}return this});ib(this,"ReactComponent",
ef(({events:b,isErasing:g,isEditing:p})=>{const {props:{html:G,scaleLevel:X}}=this,la=Wl(),pa=bf(),Ga=pa.selectedIds.has(this.id),Qa=la||Ga&&!p||"select"!==pa.selectedTool.id,Za=Pw.useCallback(mb=>{Qa||mb.stopPropagation()},[Qa]),eb=Qw[null!=X?X:"md"];Pw.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:pa.viewport.camera.zoom}),pa.persist(!0))},[]);return(0,nb.jsx)(vo,lf(pe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,nb.jsx)("div",{onWheelCapture:Za,
onPointerDown:Za,onPointerUp:Za,className:"tl-html-container",style:{pointerEvents:la||!p&&!Ga?"none":"all",overflow:p?"auto":"hidden",width:`calc(100% / ${eb})`,height:`calc(100% / ${eb})`,transform:`scale(${eb})`},children:(0,nb.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:G.trim()}})})}))}));ib(this,"ReactIndicator",ef(()=>{const {props:{size:[b,g],isLocked:p}}=this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent",strokeDasharray:p?"8 2":
"undefined"})}));ib(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return em(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};ib(mq,"id","html");ib(mq,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});de([Pg],mq.prototype,"scaleLevel",1);de([pg],mq.prototype,"setScaleLevel",2);var CB=uf(W(22));nb=W(588);var pr=class extends yn{constructor(){super(...arguments);ib(this,
"frameRef",CB.createRef());ib(this,"canEdit",!0);ib(this,"onIFrameSourceChange",b=>{this.update({url:b})});ib(this,"reload",()=>{var b,g;this.frameRef.current&&(this.frameRef.current.src=null==(g=null==(b=this.frameRef)?void 0:b.current)?void 0:g.src)});ib(this,"ReactComponent",ef(({events:b,isErasing:g,isEditing:p})=>{CB.useRef(null);return(0,nb.jsx)(vo,lf(pe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,nb.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:p?
"all":"none",userSelect:"none"},children:this.props.url&&(0,nb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,nb.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin"})})})}))}));ib(this,"ReactIndicator",ef(()=>{const {props:{size:[b,g],isLocked:p}}=this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8,strokeDasharray:p?
"8 2":"undefined"})}))}};ib(pr,"id","iframe");ib(pr,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});de([pg],pr.prototype,"onIFrameSourceChange",2);de([pg],pr.prototype,"reload",2);var pJ=uf(W(22));nb=W(588);var Ru=class extends Hv{constructor(){super(...arguments);ib(this,"ReactComponent",ef(({events:b,isErasing:g,isBinding:p,asset:G})=>{const {props:{opacity:X,objectFit:la,clipping:pa,size:[Ga,Qa]}}=this,[Za,eb,mb,Lb]=Array.isArray(pa)?pa:[pa,pa,pa,pa],
{handlers:Vb}=pJ.useContext(mn);return(0,nb.jsxs)(vo,lf(pe({},b),{opacity:g?.2:X,children:[p&&(0,nb.jsx)(oo,{mode:"html",strokeWidth:4,size:[Ga,Qa]}),(0,nb.jsx)("div",{"data-asset-loaded":!!G,className:"tl-image-shape-container",children:G?(0,nb.jsx)("img",{src:Vb?Vb.makeAssetUrl(G.src):G.src,draggable:!1,style:{position:"relative",top:-Za,left:-Lb,width:Ga+(Lb-eb),height:Qa+(Za-mb),objectFit:la}}):"Asset is missing"})]}))}));ib(this,"ReactIndicator",ef(()=>{const {props:{size:[b,g],isLocked:p}}=
this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent",strokeDasharray:p?"8 2":"undefined"})}))}getShapeSVGJsx({assets:b}){var g,p;const G=this.getBounds(),{assetId:X,clipping:la}=this.props;if(b=b.find(pa=>pa.id===X)){Array.isArray(la);const pa=null==(p=null==(g=window.logseq)?void 0:g.api)?void 0:p.make_asset_url;return(0,nb.jsx)("image",{width:G.width,height:G.height,href:pa?pa(b.src):b.src})}return super.getShapeSVGJsx({})}};ib(Ru,"id","image");ib(Ru,"defaultProps",{id:"image1",parentId:"page",
type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Rw=uf(W(22)),qJ=uf(W(22));nb=W(588);nb=W(588);var DB={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},rJ=qJ.memo(function({style:b,start:g,end:p,decorationStart:G,decorationEnd:X,scaleLevel:la}){const pa=ne.dist(g,p);if(2>pa)return null;const {strokeWidth:Ga}=b,Qa=1+Ga*DB[null!=la?la:"md"]/10,Za="M"+ne.toFixed(g)+"L"+ne.toFixed(p);la=Math.min(pa/3,Ga*DB[null!=la?la:"md"]);G=G?Yn(g,p,la):null;
X=X?Yn(p,g,la):null;return(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)("path",{className:"tl-stroke-hitarea",d:Za}),(0,nb.jsx)("path",{d:Za,strokeWidth:Qa,stroke:b.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===b.strokeType?"8 4":void 0,pointerEvents:"stroke"}),G&&(0,nb.jsx)(Vm,{left:G.left,middle:g,right:G.right,stroke:b.stroke,strokeWidth:Qa}),X&&(0,nb.jsx)(Vm,{left:X.left,middle:p,right:X.right,stroke:b.stroke,strokeWidth:Qa})]})});nb=W(588);nb=W(588);var sJ={xs:10,
sm:16,md:20,lg:32,xl:48,xxl:60},ns=class extends Qs{constructor(){super(...arguments);ib(this,"hideSelection",!0);ib(this,"canEdit",!0);ib(this,"ReactComponent",ef(({events:b,isErasing:g,isEditing:p,onEditingEnd:G})=>{const {stroke:X,handles:{start:la,end:pa},opacity:Ga,label:Qa,italic:Za,fontWeight:eb,fontSize:mb,id:Lb}=this.props,Vb=Qa||p?Zh(Qa||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:mb,lineHeight:1,fontWeight:eb},6):[0,0],Pb=ne.med(la.point,pa.point);var ec=ne.dist(la.point,
pa.point);ec=Math.max(.5,Math.min(1,Math.max(ec/(Vb[1]+128),ec/(Vb[0]+128))));const gc=this.getBounds(),Tb=Rw.useMemo(()=>ne.sub(Pb,ne.toFixed([gc.width/2,gc.height/2])),[gc,ec,Pb]),nc=Rw.useCallback(oc=>{var Ec;null==(Ec=this.update)?void 0:Ec.call(this,{label:oc})},[Qa]);return(0,nb.jsxs)("div",lf(pe({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-line-container",children:[(0,nb.jsx)(Qu,{font:"20px / 1 var(--ls-font-family)",text:Qa,fontSize:mb,color:Yg(X,"text"),offsetX:Tb[0],
offsetY:Tb[1],scale:ec,isEditing:p,onChange:nc,onBlur:G,fontStyle:Za?"italic":"normal",fontWeight:eb,pointerEvents:!!Qa}),(0,nb.jsxs)(uo,{opacity:g?.2:Ga,id:Lb+"_svg",children:[(0,nb.jsx)(Fl,{id:Lb,bounds:gc,labelSize:Vb,offset:Tb,scale:ec}),(0,nb.jsx)("g",{pointerEvents:"none",mask:Qa||p?`url(#${Lb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));ib(this,"setScaleLevel",b=>ai(this,null,function*(){this.update({scaleLevel:b,fontSize:sJ[null!=b?b:"md"]});this.onResetBounds()}));ib(this,
"ReactIndicator",ef(({isEditing:b})=>{const {id:g,decorations:p,label:G,strokeWidth:X,fontSize:la,fontWeight:pa,handles:{start:Ga,end:Qa},isLocked:Za}=this.props,eb=this.getBounds(),mb=G||b?Zh(G,{fontFamily:"var(--ls-font-family)",fontSize:la,lineHeight:1,fontWeight:pa},6):[0,0],Lb=ne.med(Ga.point,Qa.point);var Vb=ne.dist(Ga.point,Qa.point);Vb=Math.max(.5,Math.min(1,Math.max(Vb/(mb[1]+128),Vb/(mb[0]+128))));const Pb=Rw.useMemo(()=>ne.sub(Lb,ne.toFixed([eb.width/2,eb.height/2])),[eb,Vb,Lb]);return(0,nb.jsxs)("g",
{children:[(0,nb.jsx)("path",{mask:G?`url(#${g}_clip)`:"",d:Lo({strokeWidth:X},Ga.point,Qa.point,null==p?void 0:p.start,null==p?void 0:p.end),strokeDasharray:Za?"8 2":"undefined"}),G&&!b&&(0,nb.jsx)("rect",{x:eb.width/2-mb[0]/2*Vb+Pb[0],y:eb.height/2-mb[1]/2*Vb+Pb[1],width:mb[0]*Vb,height:mb[1]*Vb,rx:4*Vb,ry:4*Vb,fill:"transparent"})]})}));ib(this,"validateProps",b=>em(this,b))}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx({preview:b}){const {stroke:g,fill:p,
strokeWidth:G,strokeType:X,decorations:la,label:pa,scaleLevel:Ga,handles:{start:Qa,end:Za}}=this.props,eb=ne.med(Qa.point,Za.point);return(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)(rJ,{style:{stroke:Yg(g,"text"),fill:p,strokeWidth:G,strokeType:X},scaleLevel:Ga,start:Qa.point,end:Za.point,decorationStart:null==la?void 0:la.start,decorationEnd:null==la?void 0:la.end}),b&&(0,nb.jsx)(nb.Fragment,{children:(0,nb.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${eb[0]}, ${eb[1]})`,
textAnchor:"middle",fill:Yg(g,"text"),stroke:Yg(g,"text"),children:pa})})]})}};ib(ns,"id","line");ib(ns,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});de([Pg],ns.prototype,"scaleLevel",1);de([pg],ns.prototype,"setScaleLevel",2);var Pn=uf(W(22));nb=
W(588);var tt={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},tJ=ef(({type:b,fill:g,opacity:p,children:G})=>{const X="var(--ls-secondary-background-color)"!==g?Yg(g,"background"):"var(--ls-tertiary-background-color)";g=g&&"var(--ls-secondary-background-color)"!==g?hg(g)?`var(--ls-highlight-color-${g})`:g:"var(--ls-secondary-background-color)";return(0,nb.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===b?"page":"block"}`,children:[(0,nb.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",
style:{opacity:p,background:"P"===b?X:`linear-gradient(0deg, ${g}, ${X})`}}),(0,nb.jsx)("div",{className:"relative",children:G})]})}),Ll=class extends yn{constructor(b={}){var g;super(b);ib(this,"hideRotateHandle",!0);ib(this,"canChangeAspectRatio",!0);ib(this,"canFlip",!0);ib(this,"canEdit",!0);ib(this,"persist",null);ib(this,"initialHeightCalculated",!0);ib(this,"getInnerHeight",null);ib(this,"setCollapsed",p=>ai(this,null,function*(){var G;if("B"===this.props.blockType){if(this.update({compact:p}),
this.canResize[1]=!p,!p)this.onResetBounds()}else{const X=this.props.size[1];this.canResize[1]=!p;this.update({isAutoResizing:!p,collapsed:p,size:[this.props.size[0],p?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:p?X:this.props.collapsedHeight})}null==(G=this.persist)?void 0:G.call(this)}));ib(this,"setScaleLevel",p=>ai(this,null,function*(){var G;const X=ne.mul(this.props.size,tt[null!=p?p:"md"]/tt[null!=(G=this.props.scaleLevel)?G:"md"]);this.update({scaleLevel:p});yield Pj();
this.update({size:X})}));ib(this,"onResetBounds",p=>{p=this.getAutoResizeHeight();null!==p&&1<Math.abs(p-this.props.size[1])&&(this.update({size:[this.props.size[0],p]}),this.initialHeightCalculated=!0);return this});ib(this,"onResize",(p,G)=>{var X;const {bounds:la,rotation:pa,scale:[Ga,Qa]}=G;p=[...this.scale];0>Ga&&(p[0]*=-1);0>Qa&&(p[1]*=-1);G=la.height;this.props.isAutoResizing&&(G=null!=(X=this.getAutoResizeHeight())?X:G);return this.update({point:[la.minX,la.minY],size:[Math.max(1,la.width),
Math.max(1,G)],scale:p,rotation:pa})});ib(this,"PortalComponent",ef(({})=>{const {props:{pageId:p,fill:G,opacity:X}}=this,{renderers:la}=Pn.useContext(mn),pa=bf(),Ga=Pn.useRef(null),[,Qa]=this.useComponentSize(Ga,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==la||!la.Page)return null;const {Page:Za,Block:eb}=la,[mb,Lb]=Pn.useState(!1);Pn.useEffect(()=>{var Vb,Pb;if(this.props.isAutoResizing){const ec=(null!=(Pb=null==(Vb=this.getInnerHeight)?
void 0:Vb.call(this))?Pb:Qa)+this.getHeaderHeight();Qa&&1<Math.abs(ec-this.props.size[1])&&(this.update({size:[this.props.size[0],ec]}),mb&&pa.persist(!0))}},[Qa,this.props.isAutoResizing]);Pn.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();pa.persist(!0)})},[this.initialHeightCalculated]);Pn.useEffect(()=>{setTimeout(function(){Lb(!0)})},[]);return(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>
pa.viewport.camera.zoom?"optimizeSpeed":"auto",background:G&&"var(--ls-secondary-background-color)"!==G?hg(G)?`var(--ls-highlight-color-${G})`:G:"var(--ls-secondary-background-color)",opacity:X}}),(0,nb.jsx)("div",{ref:Ga,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(mb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,nb.jsx)(eb,{blockId:p}):(0,nb.jsx)(Za,{pageName:p}))})]})}));ib(this,"ReactComponent",
ef(p=>{var G;const {events:X,isErasing:la,isEditing:pa,isBinding:Ga}=p,{props:{opacity:Qa,pageId:Za,fill:eb,scaleLevel:mb,strokeWidth:Lb,size:Vb}}=this,Pb=bf(),{renderers:ec,handlers:gc}=Pn.useContext(mn);this.persist=()=>Pb.persist();const Tb=Wl(),nc=Pb.selectedIds.has(this.id)&&1===Pb.selectedIds.size,oc=Pb.isIn("logseq-portal.creating")&&!Za,Ec=(Tb||nc&&!pa||"select"!==Pb.selectedTool.id)&&!oc,Sc=Pn.useCallback(ad=>{Ec||ad.stopPropagation()},[Ec]),vd=1===Pb.selectedShapesArray.length&&Pb.selectedShapesArray.some(ad=>
"logseq-portal"===ad.type&&ad.props.id!==this.props.id&&Za&&ad.props.pageId===Za),Wd=tt[null!=mb?mb:"md"];Pn.useEffect(()=>this.props.collapsed&&pa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[pa,this.props.collapsed]);Pn.useEffect(()=>{if(oc){const ad=[Pb.viewport.bounds.width,Pb.viewport.bounds.height],ed=Pb.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(ed[0]>ad[0]-400||ed[1]>ad[1]-
240||1.5<Pb.viewport.camera.zoom||.5>Pb.viewport.camera.zoom)&&Pb.viewport.zoomToBounds(lf(pe({},this.bounds),{minY:this.bounds.maxY+25}))}},[Pb.viewport.bounds.height.toFixed(2)]);const he=Pn.useCallback(ad=>{this.initialHeightCalculated=!1;const ed=gk(ad)?"B":"P";this.update({pageId:ad,size:[400,320],blockType:ed,compact:"B"===ed});Pb.selectTool("select");Pb.history.resume();Pb.history.persist()},[]),De=this.PortalComponent;var Ye=Pn.useMemo(()=>{var ad;if(Za&&"B"===this.props.blockType)return null==
(ad=null==gc?void 0:gc.queryBlockByUUID(Za))?void 0:ad.content},[null==gc?void 0:gc.queryBlockByUUID,Za]);Ye="B"===this.props.blockType&&"string"!==typeof Ye;const jf=(!this.props.collapsed||pa)&&!Ye;if(null==ec||!ec.Page)return null;const {Breadcrumb:Ne,PageName:Ae}=ec,Ad={width:`calc(100% / ${Wd})`,height:`calc(100% / ${Wd})`,opacity:la?.2:1};1!==Wd&&(Ad.transform=`scale(${Wd})`);return(0,nb.jsxs)(vo,lf(pe({style:{pointerEvents:"all"}},X),{children:[Ga&&(0,nb.jsx)(oo,{mode:"html",strokeWidth:Lb,
size:Vb}),(0,nb.jsx)("div",{"data-inner-events":!Ec,onWheelCapture:Sc,onPointerDown:Sc,onPointerUp:Sc,style:{width:"100%",height:"100%",pointerEvents:Tb||!pa&&!nc?"none":"all"},children:oc?(0,nb.jsx)(TB,{onChange:he,onAddBlock:ad=>{setTimeout(()=>{var ed,ld,$d;Pb.api.editShape(this);null==($d=null==(ld=null==(ed=window.logseq)?void 0:ed.api)?void 0:ld.edit_block)?void 0:$d.call(ld,ad)})},placeholder:"Create or search your graph..."}):(0,nb.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,
"data-page-id":Za,"data-portal-selected":vd,"data-editing":pa,style:Ad,children:[!this.props.compact&&!Ye&&(0,nb.jsx)(tJ,{type:null!=(G=this.props.blockType)?G:"P",fill:eb,opacity:Qa,children:"P"===this.props.blockType?(0,nb.jsx)(Ae,{pageName:Za}):(0,nb.jsx)(Ne,{blockId:Za})}),Ye&&(0,nb.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),jf&&(0,nb.jsx)(De,pe({},p))]})})]}))}));ib(this,"ReactIndicator",ef(()=>{const p=this.getBounds();return(0,nb.jsx)("rect",{width:p.width,height:p.height,
fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));ib(this,"validateProps",p=>{var G;if(void 0!==p.size){const X=tt[null!=(G=this.props.scaleLevel)?G:"md"];p.size[0]=Math.max(p.size[0],60*X);p.size[1]=Math.max(p.size[1],40*X)}return em(this,p)});Ag(this);b.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(g=b.size)?void 0:g[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(b){return b?/^\(\(.*\)\)$/.test(b)&&40===b.length?"B":"P":!1}get collapsed(){return"B"===
this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}useComponentSize(b,g=""){const [p,G]=Pn.useState([0,0]),X=bf();Pn.useEffect(()=>{setTimeout(()=>{if(null==b?0:b.current){const la=g?b.current.querySelector(g):b.current;if(la){const pa=()=>{const {width:Qa,height:Za}=la.getBoundingClientRect(),eb=ne.div([Qa,Za],X.viewport.camera.zoom);G(eb);return eb};pa();this.getInnerHeight=()=>pa()[1];const Ga=new ResizeObserver(()=>
{pa()});Ga.observe(la);return()=>{Ga.disconnect()}}}return()=>{}},10)},[b,g]);return p}getHeaderHeight(){var b;const g=tt[null!=(b=this.props.scaleLevel)?b:"md"];return this.props.compact?0:40*g}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var b,g,p;const G=this.getBounds();return(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?hg(this.props.fill)?
`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:Yg(this.props.fill,"background"),strokeWidth:null!=(b=this.props.strokeWidth)?b:2,fillOpacity:null!=(g=this.props.opacity)?g:.2,width:G.width,rx:8,ry:8,height:G.height}),!this.props.compact&&(0,nb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Yg(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(p=this.props.opacity)?
p:.2,x:1,y:1,width:G.width-2,height:38,rx:8,ry:8}),(0,nb.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${G.width/2}, ${10+G.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};ib(Ll,"id","logseq-portal");ib(Ll,"defaultSearchQuery","");ib(Ll,"defaultSearchFilter",null);ib(Ll,"defaultProps",{id:"logseq-portal",
type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});de([Pg],Ll.prototype,"collapsed",1);de([pg],Ll.prototype,"setCollapsed",2);de([Pg],Ll.prototype,"scaleLevel",1);de([pg],Ll.prototype,"setScaleLevel",2);var {min:os,PI:uJ}=Math,ut=uJ+1E-4;nb=W(588);var vJ={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},wJ={easing:b=>Math.sin(b*
Math.PI/2),simulatePressure:!0},xJ={easing:b=>b*b,simulatePressure:!1},qr=class extends Gr{constructor(b={}){super(b);ib(this,"ReactComponent",ef(({events:g,isErasing:p})=>{const {props:{opacity:G}}=this;return(0,nb.jsx)(uo,lf(pe({},g),{opacity:p?.2:G,children:this.getShapeSVGJsx()}))}));ib(this,"setScaleLevel",g=>ai(this,null,function*(){this.update({scaleLevel:g,strokeWidth:vJ[null!=g?g:"md"]});this.onResetBounds()}));ib(this,"ReactIndicator",ef(()=>{const {pointsPath:g}=this;return(0,nb.jsx)("path",
{d:g,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));ib(this,"validateProps",g=>{g=em(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});Ag(this)}get pointsPath(){var b=this.props;if(2>b.points.length)var g="";else g=lf(pe({size:1+1.5*b.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===b.points[1][2]?wJ:xJ),{last:b.isComplete}),b=uc(b.points,g),g=Ps.getSvgPathFromStroke(Jb(b,g));return g}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?
b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:p,strokeType:G}}=this;return(0,nb.jsx)("path",{pointerEvents:"all",d:b,strokeWidth:p/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:Yg(g,"text"),fill:Yg(g,"text"),strokeDasharray:"dashed"===G?"12 4":void 0})}};ib(qr,"id","pencil");ib(qr,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});de([Pg],qr.prototype,
"pointsPath",1);de([Pg],qr.prototype,"scaleLevel",1);de([pg],qr.prototype,"setScaleLevel",2);var EB=uf(W(22));nb=W(588);var FB={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ps=class extends Tp{constructor(){super(...arguments);ib(this,"canEdit",!0);ib(this,"ReactComponent",ef(({events:b,isErasing:g,isSelected:p,isEditing:G,onEditingEnd:X})=>{const {offset:[la,pa],props:{stroke:Ga,fill:Qa,noFill:Za,strokeWidth:eb,opacity:mb,strokeType:Lb,label:Vb,italic:Pb,fontWeight:ec,fontSize:gc}}=this,Tb=this.getVertices(eb/
2).join();var nc=Vb||G?Zh(Vb,{fontFamily:"var(--ls-font-family)",fontSize:gc,lineHeight:1,fontWeight:ec},4):[0,0];const oc=[this.props.size[0]/2,2*this.props.size[1]/3];nc=Math.max(.5,Math.min(1,this.props.size[0]/(2*nc[0]),this.props.size[1]/(2*nc[1])));const Ec=this.getBounds(),Sc=EB.useMemo(()=>ne.sub(oc,ne.toFixed([Ec.width/2,Ec.height/2])),[Ec,nc,oc]),vd=EB.useCallback(Wd=>{var he;null==(he=this.update)?void 0:he.call(this,{label:Wd})},[Vb]);return(0,nb.jsxs)("div",lf(pe({},b),{style:{width:"100%",
height:"100%",overflow:"hidden"},children:[(0,nb.jsx)(Qu,{font:"20px / 1 var(--ls-font-family)",text:Vb,fontSize:gc,color:Yg(Ga,"text"),offsetX:Sc[0],offsetY:Sc[1]/nc,scale:nc,isEditing:G,onChange:vd,onBlur:X,fontStyle:Pb?"italic":"normal",fontWeight:ec,pointerEvents:!!Vb}),(0,nb.jsx)(uo,{opacity:g?.2:mb,children:(0,nb.jsxs)("g",{transform:`translate(${la}, ${pa})`,children:[(0,nb.jsx)("polygon",{className:p||!Za?"tl-hitarea-fill":"tl-hitarea-stroke",points:Tb}),(0,nb.jsx)("polygon",{points:Tb,stroke:Yg(Ga,
"stroke"),fill:Za?"none":Yg(Qa,"background"),strokeWidth:eb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Lb?"8 2":void 0})]})})]}))}));ib(this,"setScaleLevel",b=>ai(this,null,function*(){this.update({scaleLevel:b,fontSize:FB[null!=b?b:"md"],strokeWidth:FB[null!=b?b:"md"]/10});this.onResetBounds()}));ib(this,"ReactIndicator",ef(()=>{const {offset:[b,g],props:{strokeWidth:p,isLocked:G}}=this;return(0,nb.jsx)("g",{children:(0,nb.jsx)("polygon",{transform:`translate(${b}, ${g})`,points:this.getVertices(p/
2).join(),strokeDasharray:G?"8 2":"undefined"})})}));ib(this,"validateProps",b=>{void 0!==b.sides&&(b.sides=Math.max(b.sides,3));return em(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {offset:[g,p],props:{stroke:G,fill:X,noFill:la,strokeWidth:pa,opacity:Ga,strokeType:Qa}}=this;b=this.getVertices(pa/2).join();return(0,nb.jsxs)("g",{transform:`translate(${g}, ${p})`,opacity:Ga,children:[(0,nb.jsx)("polygon",{className:la?"tl-hitarea-stroke":
"tl-hitarea-fill",points:b}),(0,nb.jsx)("polygon",{points:b,stroke:Yg(G,"stroke"),fill:la?"none":Yg(X,"background"),strokeWidth:pa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Qa?"8 2":void 0})]})}};ib(ps,"id","polygon");ib(ps,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});de([Pg],ps.prototype,"scaleLevel",
1);de([pg],ps.prototype,"setScaleLevel",2);var kp=uf(W(22));nb=W(588);var yJ={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},qs=class extends Iv{constructor(){super(...arguments);ib(this,"ReactComponent",ef(({events:b,isErasing:g,isEditing:p,onEditingEnd:G})=>{const {props:{opacity:X,fontFamily:la,fontSize:pa,fontWeight:Ga,italic:Qa,lineHeight:Za,text:eb,stroke:mb,padding:Lb}}=this,Vb=kp.useRef(null),Pb=kp.useRef(!1),ec=kp.useRef(null),gc=kp.useCallback(Sc=>{const {isSizeLocked:vd}=this.props;Sc=as.normalizeText(Sc.currentTarget.value);
vd?this.update({text:Sc,size:this.getAutoSizedBoundingBox({text:Sc})}):this.update({text:Sc})},[]),Tb=kp.useCallback(Sc=>{if("Escape"!==Sc.key)if("Tab"===Sc.key&&0===eb.length)Sc.preventDefault();else{if("Meta"!==Sc.key&&!Sc.metaKey)Sc.stopPropagation();else if("z"===Sc.key&&Sc.metaKey){Sc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Sc.stopPropagation();Sc.preventDefault();return}"Tab"===Sc.key&&(Sc.preventDefault(),Sc.shiftKey?go.unindent(Sc.currentTarget):go.indent(Sc.currentTarget),
this.update({text:as.normalizeText(Sc.currentTarget.value)}))}},[]),nc=kp.useCallback(Sc=>{p&&(Sc.currentTarget.setSelectionRange(0,0),null==G?void 0:G())},[G]),oc=kp.useCallback(Sc=>{p&&Pb.current&&document.activeElement===Sc.currentTarget&&Sc.currentTarget.select()},[p]),Ec=kp.useCallback(Sc=>{p&&Sc.stopPropagation()},[p]);kp.useEffect(()=>{p?requestAnimationFrame(()=>{Pb.current=!0;const Sc=Vb.current;Sc&&(Sc.focus(),Sc.select())}):null==G?void 0:G()},[p,G]);kp.useLayoutEffect(()=>{if(0===this.props.size[0]||
0===this.props.size[1])this.onResetBounds()},[]);return(0,nb.jsx)(vo,lf(pe({},b),{opacity:g?.2:X,children:(0,nb.jsx)("div",{ref:ec,className:"tl-text-shape-wrapper","data-hastext":!!eb,"data-isediting":p,style:{fontFamily:la,fontStyle:Qa?"italic":"normal",fontSize:pa,fontWeight:Ga,padding:Lb,lineHeight:Za,color:Yg(mb,"text")},children:p?(0,nb.jsx)("textarea",{ref:Vb,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",
placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:eb,onFocus:oc,onChange:gc,onKeyDown:Tb,onBlur:nc,onPointerDown:Ec}):(0,nb.jsxs)(nb.Fragment,{children:[eb,""]})})}))}));ib(this,"setScaleLevel",b=>ai(this,null,function*(){this.update({scaleLevel:b,fontSize:yJ[null!=b?b:"md"]});this.onResetBounds()}));ib(this,"ReactIndicator",ef(({isEditing:b})=>{const {props:{borderRadius:g,isLocked:p},bounds:G}=this;return b?null:(0,nb.jsx)("rect",{width:G.width,height:G.height,
rx:g,ry:g,fill:"transparent",strokeDasharray:p?"8 2":"undefined"})}));ib(this,"validateProps",b=>em(this,b));ib(this,"getBounds",()=>{const [b,g]=this.props.point,[p,G]=this.props.size;return{minX:b,minY:g,maxX:b+p,maxY:g+G,width:p,height:G}});ib(this,"onResizeStart",({isSingle:b})=>{var g;if(!b)return this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];return this.update({isSizeLocked:!1})});ib(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var b;
return null!=(b=this.props.scaleLevel)?b:"md"}getAutoSizedBoundingBox(b={}){const {text:g=this.props.text,fontFamily:p=this.props.fontFamily,fontSize:G=this.props.fontSize,fontWeight:X=this.props.fontWeight,lineHeight:la=this.props.lineHeight,padding:pa=this.props.padding}=b,[Ga,Qa]=Zh(g,{fontFamily:p,fontSize:G,lineHeight:la,fontWeight:X},pa);return[Ga,Qa]}getShapeSVGJsx(){var b=window.navigator.userAgent.toLowerCase();if(b.includes("webkit")&&!b.includes("chrome"))return super.getShapeSVGJsx(null);
const {props:{text:g,stroke:p,fontSize:G,fontFamily:X}}=this;b=this.getBounds();return(0,nb.jsx)("foreignObject",{width:b.width,height:b.height,children:(0,nb.jsx)("div",{style:{color:Yg(p,"text"),fontSize:G,fontFamily:X,display:"contents"},children:g})})}};ib(qs,"id","text");ib(qs,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",
fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});de([Pg],qs.prototype,"scaleLevel",1);de([pg],qs.prototype,"setScaleLevel",2);var GB=uf(W(22));nb=W(588);var Su=class extends yn{constructor(){super(...arguments);ib(this,"canFlip",!1);ib(this,"canEdit",!0);ib(this,"canChangeAspectRatio",!1);ib(this,"ReactComponent",ef(({events:b,isErasing:g,asset:p,isEditing:G})=>{const {props:{opacity:X}}=this,la=Wl();var pa=bf();const Ga=pa.selectedIds.has(this.id),Qa=la||Ga&&!G||"select"!==pa.selectedTool.id;
pa=GB.useCallback(eb=>{Qa||eb.stopPropagation()},[Qa]);const {handlers:Za}=GB.useContext(mn);return(0,nb.jsx)(vo,lf(pe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:X}},b),{children:(0,nb.jsx)("div",{onWheelCapture:pa,onPointerDown:pa,onPointerUp:pa,className:"tl-video-container",style:{pointerEvents:la||!G&&!Ga?"none":"all",overflow:G?"auto":"hidden"},children:p&&(0,nb.jsx)("video",{controls:!0,src:Za?Za.makeAssetUrl(p.src):p.src})})}))}));ib(this,"ReactIndicator",ef(()=>{const {props:{size:[b,
g],isLocked:p}}=this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent",strokeDasharray:p?"8 2":"undefined"})}))}};ib(Su,"id","video");ib(Su,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});nb=W(588);var HB=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,IB=class extends yn{constructor(){super(...arguments);ib(this,"aspectRatio",
480/853);ib(this,"canChangeAspectRatio",!1);ib(this,"canFlip",!1);ib(this,"canEdit",!0);ib(this,"onYoutubeLinkChange",b=>{this.update({url:b,size:IB.defaultProps.size})});ib(this,"ReactComponent",ef(({events:b,isErasing:g,isEditing:p})=>(0,nb.jsx)(vo,lf(pe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,nb.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:p?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},
children:this.embedId?(0,nb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,nb.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,nb.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},
children:(0,nb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,nb.jsxs)("g",{children:[(0,nb.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,nb.jsx)("g",{children:(0,nb.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,nb.jsxs)("g",{fill:"#fff",children:[(0,nb.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,nb.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))));ib(this,"ReactIndicator",ef(()=>{const {props:{size:[b,g],isLocked:p}}=this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8,strokeDasharray:p?"8 2":"undefined"})}));ib(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[0]*this.aspectRatio,1));return em(this,b)})}get embedId(){var b,g;const p=this.props.url,
G=p.match(HB);return null!=(g=null!=(b=null==G?void 0:G[1])?b:p)?g:""}getShapeSVGJsx(){const b=this.getBounds(),g=this.embedId;return g?(0,nb.jsxs)("g",{children:[(0,nb.jsx)("image",{width:b.width,height:b.height,href:`https://img.youtube.com/vi/${g}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,nb.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,nb.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},rr=IB;ib(rr,"id","youtube");ib(rr,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});de([Pg],rr.prototype,"embedId",1);de([pg],rr.prototype,"onYoutubeLinkChange",2);var rs=uf(W(22));nb=W(588);var JB=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,KB=class extends yn{constructor(){super(...arguments);ib(this,"canFlip",!1);ib(this,"canEdit",!0);ib(this,"initialHeightCalculated",
!0);ib(this,"getInnerHeight",null);ib(this,"onTwitterLinkChange",b=>{this.update({url:b,size:KB.defaultProps.size})});ib(this,"ReactComponent",ef(({events:b,isErasing:g,isEditing:p})=>{const {renderers:{Tweet:G}}=rs.useContext(mn),X=bf(),la=rs.useRef(null),[,pa]=this.useComponentSize(la);rs.useEffect(()=>{var Ga,Qa;const Za=null!=(Qa=null==(Ga=this.getInnerHeight)?void 0:Ga.call(this))?Qa:pa;pa&&1<Math.abs(Za-this.props.size[1])&&(this.update({size:[this.props.size[0],Za]}),X.persist(!0))},[pa]);
rs.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();X.persist(!0)})},[this.initialHeightCalculated]);return(0,nb.jsx)(vo,lf(pe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,nb.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:p?"all":"none",userSelect:"none"},children:this.embedId?(0,nb.jsx)("div",{ref:la,children:(0,nb.jsx)(G,{tweetId:this.embedId})}):null})}))}));ib(this,"ReactIndicator",
ef(()=>{const {props:{size:[b,g],isLocked:p}}=this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8,strokeDasharray:p?"8 2":"undefined"})}));ib(this,"onResetBounds",b=>{b=this.getAutoResizeHeight();null!==b&&1<Math.abs(b-this.props.size[1])&&(this.update({size:[this.props.size[0],b]}),this.initialHeightCalculated=!0);return this});ib(this,"onResize",(b,g)=>{var p;const {bounds:G,rotation:X,scale:[la,pa]}=g;b=[...this.scale];0>la&&(b[0]*=-1);0>pa&&(b[1]*=-1);g=null!=(p=this.getAutoResizeHeight())?
p:G.height;return this.update({point:[G.minX,G.minY],size:[Math.max(1,G.width),Math.max(1,g)],scale:b,rotation:X})});ib(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.min(Math.max(b.size[0],300),550),b.size[1]=Math.max(b.size[1],1));return em(this,b)})}get embedId(){var b,g;const p=this.props.url,G=p.match(JB);return null!=(g=null!=(b=null==G?void 0:G[1])?b:p)?g:""}useComponentSize(b,g=""){const [p,G]=rs.useState([0,0]),X=bf();rs.useEffect(()=>{if(null==b?0:b.current){const la=g?b.current.querySelector(g):
b.current;if(la){const pa=()=>{const {width:Qa,height:Za}=la.getBoundingClientRect(),eb=ne.div([Qa,Za],X.viewport.camera.zoom);G(eb);return eb};pa();this.getInnerHeight=()=>pa()[1];const Ga=new ResizeObserver(()=>{pa()});Ga.observe(la);return()=>{Ga.disconnect()}}}return()=>{}},[b,g]);return p}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const b=this.getBounds();return this.embedId?(0,nb.jsxs)("g",{children:[(0,nb.jsx)("rect",{width:b.width,height:b.height,
fill:"#15202b",rx:8,ry:8}),(0,nb.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,nb.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},ss=KB;ib(ss,"id","tweet");ib(ss,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});de([Pg],ss.prototype,"embedId",1);de([pg],ss.prototype,"onTwitterLinkChange",2);nb=W(588);var LB=[ls,ms,or,Ru,Su,ns,qr,ps,qs,rr,ss,pr,mq,Ll,Ow],Sw=class extends sp{constructor(){super(...arguments);ib(this,"Shape",ls)}};ib(Sw,"id","box");ib(Sw,"shortcut",["9","r"]);var Tw=class extends sp{constructor(){super(...arguments);
ib(this,"Shape",ms)}};ib(Tw,"id","ellipse");ib(Tw,"shortcut",["o"]);var Uw=class extends Yt{};ib(Uw,"id","erase");ib(Uw,"shortcut",["6","e"]);var Vw=class extends Rs{constructor(){super(...arguments);ib(this,"Shape",or);ib(this,"simplify",!0);ib(this,"simplifyTolerance",.618)}};ib(Vw,"id","highlighter");ib(Vw,"shortcut",["5","h"]);var Ww=class extends Zt{constructor(){super(...arguments);ib(this,"Shape",ns)}};ib(Ww,"id","line");ib(Ww,"shortcut",["7","c"]);var Xw=class extends Rs{constructor(){super(...arguments);
ib(this,"Shape",qr);ib(this,"simplify",!1)}};ib(Xw,"id","pencil");ib(Xw,"shortcut",["4","d"]);var MB=class extends sp{constructor(){super(...arguments);ib(this,"Shape",ps)}};ib(MB,"id","polygon");var Yw=class extends $t{constructor(){super(...arguments);ib(this,"Shape",qs)}};ib(Yw,"id","text");ib(Yw,"shortcut",["8","t"]);var NB=class extends sp{constructor(){super(...arguments);ib(this,"Shape",rr)}};ib(NB,"id","youtube");var OB=class extends Fi{constructor(){super(...arguments);ib(this,"creatingShape");
ib(this,"offset",[0,0]);ib(this,"onEnter",()=>{this.app.history.pause();Jd(()=>{const b=new Ll({id:gl(),parentId:this.app.currentPage.id,point:ne.sub(this.app.inputs.originPoint,this.offset),size:Ll.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=b;this.app.currentPage.addShapes(b);this.app.setEditingShape(b);this.app.setSelectedShapes([b])})});ib(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.creatingShape)break;this.app.selectTool("select");
break;case "canvas":b.order||this.app.selectTool("select")}});ib(this,"onExit",()=>{var b;this.creatingShape&&(this.app.history.resume(),(null==(b=this.creatingShape)?0:b.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};ib(OB,"id","creating");var PB=class extends Fi{constructor(){super(...arguments);ib(this,"cursor","crosshair");ib(this,"onPointerDown",b=>{this.tool.transition("creating")})}};
ib(PB,"id","idle");var vt=class extends Vp{constructor(){super(...arguments);ib(this,"Shape",Ll);ib(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])})}};ib(vt,"id","logseq-portal");ib(vt,"shortcut",["3"]);ib(vt,"states",[PB,OB]);ib(vt,"initial","idle");var QB=class extends sp{constructor(){super(...arguments);ib(this,"Shape",mq)}};ib(QB,"id","youtube");var RB=class extends sp{constructor(){super(...arguments);ib(this,"Shape",pr)}};ib(RB,"id","iframe");var zJ=uf(W(591));nb=
W(588);var AJ=new Map(LB.map(b=>[b.id,b])),Zw=class{constructor(b){ib(this,"shapes");ib(this,"pageId");ib(this,"assets");b&&this.load(b)}load(b){var g;const p=null==(g=null==b?void 0:b.pages)?void 0:g[0];this.pageId=null==p?void 0:p.id;this.assets=b.assets;this.shapes=null==p?void 0:p.shapes.map(G=>{var X=G.type;if(!X)throw Error("No shape type provided.");const la=AJ.get(X);if(!la)throw Error(`Could not find shape class for ${X}`);return new la(G)}).filter(G=>"group"!==G.type)}generatePreviewJsx(b,
g){var p,G;const X=[...(null!=(p=this.shapes)?p:[]).map(Za=>Za.getRotatedBounds())];(p=null==b?void 0:b.currentView)&&X.push(p);let la=wf.getCommonBounds(X);if(!la)return null;la=wf.expandBounds(la,16);la=g?wf.ensureRatio(la,g):la;const pa=Za=>[(Za[0]-la.minX).toFixed(2),(Za[1]-la.minY).toFixed(2)],[Ga,Qa]=p?pa([p.minX,p.minY]):[0,0];return la&&(0,nb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":la.minX.toFixed(2),"data-common-bound-y":la.minY.toFixed(2),"data-common-bound-width":la.width.toFixed(2),
"data-common-bound-height":la.height.toFixed(2),viewBox:[0,0,la.width,la.height].join(" "),children:[(0,nb.jsx)("defs",{children:p&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Ga}, ${Qa})`,width:p.width,height:p.height}),(0,nb.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,nb.jsx)("rect",{width:la.width,height:la.height,fill:"white"}),(0,nb.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,nb.jsx)("g",
{id:this.pageId+"-preview-shapes",children:null==(G=this.shapes)?void 0:G.map(Za=>{var eb,mb;const {bounds:Lb,props:{rotation:Vb}}=Za,[Pb,ec]=pa([Lb.minX,Lb.minY]),gc=+(180*((null!=Vb?Vb:0)+(null!=(eb=Lb.rotation)?eb:0))/Math.PI).toFixed(2),[Tb,nc]=[(Lb.width/2).toFixed(2),(Lb.height/2).toFixed(2)];return(0,nb.jsx)("g",{transform:[`translate(${Pb}, ${ec})`,`rotate(${gc}, ${Tb}, ${nc})`].join(" "),children:Za.getShapeSVGJsx({assets:null!=(mb=this.assets)?mb:[]})},Za.id)})}),(0,nb.jsx)("rect",{mask:p?
`url(#${this.pageId}-camera-mask)`:"",width:la.width,height:la.height,fill:"transparent"}),p&&(0,nb.jsx)("use",{id:"minimap-camera-rect","data-x":Ga,"data-y":Qa,"data-width":p.width,"data-height":p.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/b.camera.zoom})]})}exportAsSVG(b){return(b=this.generatePreviewJsx(void 0,b))?zJ.default.renderToString(b):""}},BJ=uf(W(22));nb=W(588);var Tu=BJ.forwardRef((b,g)=>{var {value:p,className:G}=b;b=Af(b,["autoResize","value",
"className"]);return(0,nb.jsx)("div",{className:"tl-input"+(G?" "+G:""),children:(0,nb.jsxs)("div",{className:"tl-input-sizer",children:[(0,nb.jsx)("div",{className:"tl-input-hidden",children:p}),(0,nb.jsx)("input",pe({ref:g,value:p,className:"tl-text-input",type:"text"},b))]})})});nb=W(588);var nq=({type:b,active:g})=>(0,nb.jsx)("span",{className:"tl-type-tag","data-active":g,children:(0,nb.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",
BS:"block-search",PS:"page-search"})[b]}`})}),SB=(b,g)=>(0,nb.jsx)("span",{children:b.split(new RegExp(`(${g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((p,G)=>1===G%2?(0,nb.jsx)("mark",{className:"tl-highlighted",children:p}):p).map((p,G)=>(0,nb.jsx)(Qm.default.Fragment,{children:p},G))}),CJ=(b,g)=>{const {handlers:p}=Qm.default.useContext(mn),[G,X]=Qm.default.useState(null),la=Dk(b,200);Qm.default.useEffect(()=>{let pa=!1;if(0<la.length){const Ga={"pages?":!0,"blocks?":!0,"files?":!1};
"B"===g?Ga["pages?"]=!1:"P"===g&&(Ga["blocks?"]=!1);p.search(la,Ga).then(Qa=>{pa||X(Qa)})}else X(null);return()=>{pa=!0}},[la,null==p?void 0:p.search]);return G},TB=ef(({className:b,style:g,placeholder:p,onChange:G,onBlur:X,onAddBlock:la})=>{const [pa,Ga]=Qm.default.useState(Ll.defaultSearchQuery),[Qa,Za]=Qm.default.useState(Ll.defaultSearchFilter),eb=Qm.default.useRef(null),{handlers:mb,renderers:Lb}=Qm.default.useContext(mn),Vb=Qm.default.useCallback(he=>{var De;G(he);null==(De=eb.current)?void 0:
De.blur();he&&(Ll.defaultSearchQuery="",Ll.defaultSearchFilter=null)},[]),Pb=Qm.default.useCallback(he=>{if(he=null==mb?void 0:mb.addNewBlock(he))Vb(he),null==la?void 0:la(he);return he},[la]),ec=Qm.default.useRef(null),[gc,Tb]=Qm.default.useState(0),nc=CJ(pa,Qa),[oc,Ec]=Qm.default.useState("circle-plus"),[Sc,vd]=Qm.default.useState(!1);Qm.default.useEffect(()=>{setTimeout(()=>{var he;null==(he=eb.current)?void 0:he.focus()})},[Qa]);Qm.default.useEffect(()=>{Ll.defaultSearchQuery=pa;Ll.defaultSearchFilter=
Qa},[pa,Qa]);const Wd=Qm.default.useMemo(()=>{var he;const De=[],Ye=null==Lb?void 0:Lb.Breadcrumb;if(!Ye||!mb)return[];la&&De.push({actionIcon:"circle-plus",onChosen:()=>!!Pb(pa),element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{active:!0,type:"BA"}),0<pa.length?(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)("strong",{children:"New block:"}),pa]}):(0,nb.jsx)("strong",{children:"New block"})]})});(null==(he=null==nc?void 0:nc.pages)?0:he.some(jf=>jf.toLowerCase()===
pa.toLowerCase()))||!pa||De.push({actionIcon:"circle-plus",onChosen:()=>{Vb(pa);return!0},element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{active:!0,type:"PA"}),(0,nb.jsx)("strong",{children:"New page:"}),pa]})},{actionIcon:"circle-plus",onChosen:()=>{null==mb?void 0:mb.addNewWhiteboard(pa);Vb(pa);return!0},element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{active:!0,type:"WA"}),(0,nb.jsx)("strong",{children:"New whiteboard:"}),
pa]})});0===pa.length&&null===Qa&&De.push({actionIcon:"search",onChosen:()=>{Za("B");return!0},element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{Za("P");return!0},element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{type:"PS"}),"Search only pages"]})});Qa&&"P"!==Qa||!nc||!nc.pages||De.push(...nc.pages.map(jf=>({actionIcon:"search",onChosen:()=>{Vb(jf);
return!0},element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{type:mb.isWhiteboardPage(jf)?"WP":"P"}),SB(jf,pa)]})})));Qa&&"B"!==Qa||!nc||!nc.blocks||De.push(...nc.blocks.filter(jf=>jf.content&&jf.uuid).map(({content:jf,uuid:Ne})=>{const Ae=mb.queryBlockByUUID(Ne);return{actionIcon:"search",onChosen:()=>{var Ad,ad,ed;return Ae?(Vb(Ne),null==(ed=null==(ad=null==(Ad=window.logseq)?void 0:Ad.api)?void 0:ad.set_blocks_id)?void 0:ed.call(ad,[Ne]),!0):!1},element:Ae?
(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{type:"B"}),(0,nb.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,nb.jsx)(Ye,{blockId:Ne})})]}),(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)("div",{className:"tl-quick-search-option-placeholder"}),SB(jf,pa)]})]}):(0,nb.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));
return De},[pa,Qa,nc,null==Lb?void 0:Lb.Breadcrumb,mb]);Qm.default.useEffect(()=>{const he=De=>{var Ye,jf;let Ne=gc;"ArrowDown"===De.key?Ne=Math.min(Wd.length-1,gc+1):"ArrowUp"===De.key?Ne=Math.max(0,gc-1):"Enter"===De.key?(null==(Ye=Wd[gc])?void 0:Ye.onChosen(),De.stopPropagation(),De.preventDefault()):"Backspace"===De.key&&0===pa.length?Za(null):"Escape"===De.key&&Vb("");Ne!==gc&&(Ye=Wd[Ne],Tb(Ne),Ec(Ye.actionIcon),De.stopPropagation(),De.preventDefault(),(De=null==(jf=ec.current)?void 0:jf.querySelector(".tl-quick-search-option:nth-child("+
(Ne+1)+")"))&&(null==De?void 0:De.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",he,!0);return()=>{document.removeEventListener("keydown",he,!0)}},[Wd,gc,pa]);return(0,nb.jsxs)("div",{className:"tl-quick-search "+(null!=b?b:""),style:g,children:[(0,nb.jsx)(UF,{icon:oc,onClick:()=>{var he;null==(he=Wd[gc])?void 0:he.onChosen()}}),(0,nb.jsxs)("div",{className:"tl-quick-search-input-container",children:[Qa&&(0,nb.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,nb.jsx)(nq,
{type:Qa}),"B"===Qa?"Search blocks":"Search pages",(0,nb.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>Za(null),children:(0,nb.jsx)(Bh,{name:"x"})})]}),(0,nb.jsx)(Tu,{ref:eb,type:"text",value:pa,className:"tl-quick-search-input",placeholder:null!=p?p:"Create or search your graph...",onChange:he=>Ga(he.target.value),onKeyDown:he=>{"Enter"===he.key&&Vb(pa);he.stopPropagation()},onFocus:()=>{vd(!0)},onBlur:()=>{vd(!1);null==X?void 0:X()}})]}),0<Wd.length&&(0,nb.jsx)("div",{onWheelCapture:he=>
he.stopPropagation(),className:"tl-quick-search-options",ref:ec,style:{visibility:Sc?"visible":"hidden",pointerEvents:Sc?"all":"none"},children:(0,nb.jsx)(JI,{style:{height:40*Math.min(Math.max(1,Wd.length),12)},totalCount:Wd.length,itemContent:he=>{const {actionIcon:De,onChosen:Ye,element:jf}=Wd[he];return(0,nb.jsx)("div",{"data-focused":he===gc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Ec(De);Tb(he)},onPointerDownCapture:Ne=>{Ye()&&(Ne.stopPropagation(),Ne.preventDefault())},
children:jf},he)}})})]})});nb=W(588);var DJ=ef(function(b){var {pageId:g,portalType:p,refs:G,side:X,onRefsChange:la}=b;b=Af(b,"pageId portalType shapeType refs side onRefsChange".split(" "));const pa=G.length+(g?1:0),Ga=0===G.length,Qa=eb=>{eb&&!G.includes(eb)&&Ga&&la([...G,eb])},Za=!(!g||!p);return(0,nb.jsx)(XA,lf(pe({},b),{side:X,align:"start",alignOffset:-6,label:(0,nb.jsx)(dc,{content:"Link",sideOffset:14,children:(0,nb.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",
children:[(0,nb.jsx)(Bh,{name:0<pa?"link":"add-link"}),0<pa&&(0,nb.jsx)("div",{className:"tl-shape-links-count",children:pa})]})}),children:(0,nb.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":Za,children:[Za&&(0,nb.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,nb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,nb.jsx)(Bh,{className:"opacity-50",name:"internal-link"}),"References"]}),(0,nb.jsx)(je,{type:p,id:g})]}),
(0,nb.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,nb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,nb.jsx)(Bh,{className:"opacity-50",name:"add-link"}),"Link to any page or block"]}),Ga&&(0,nb.jsx)(TB,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:"Start typing to search...",onChange:Qa}),0<G.length&&(0,nb.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:G.map((eb,mb)=>(0,nb.jsx)(je,{id:eb,type:gk(eb)?
"B":"P",onRemove:()=>{la(G.filter((Lb,Vb)=>mb!==Vb))},showContent:!0},eb))})]})]})}))}),ll=uf(W(22)),UB=W(22),VB=(0,UB.forwardRef)((b,g)=>{const {pressed:p,defaultPressed:G=!1,onPressedChange:X}=b,la=Af(b,["pressed","defaultPressed","onPressedChange"]),[pa=!1,Ga]=Nj({prop:p,onChange:X,defaultProp:G});return(0,UB.createElement)(kl.button,ff({type:"button","aria-pressed":pa,"data-state":pa?"on":"off","data-disabled":b.disabled?"":void 0},la,{ref:g,onClick:If(b.onClick,()=>{b.disabled||Ga(!pa)})}))}),
EJ=VB,[WB]=Aj("ToggleGroup",[uu]),XB=uu(),FJ=ll.default.forwardRef((b,g)=>{const {type:p}=b;b=Af(b,["type"]);if("single"===p)return ll.default.createElement(GJ,ff({},b,{ref:g}));if("multiple"===p)return ll.default.createElement(HJ,ff({},b,{ref:g}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[YB,ZB]=WB("ToggleGroup"),GJ=ll.default.forwardRef((b,g)=>{const {value:p,defaultValue:G,onValueChange:X=()=>{}}=b,la=Af(b,["value","defaultValue","onValueChange"]),[pa,Ga]=Nj({prop:p,defaultProp:G,
onChange:X});return ll.default.createElement(YB,{scope:b.__scopeToggleGroup,type:"single",value:pa?[pa]:[],onItemActivate:Ga,onItemDeactivate:ll.default.useCallback(()=>Ga(""),[Ga])},ll.default.createElement($B,ff({},la,{ref:g})))}),HJ=ll.default.forwardRef((b,g)=>{const {value:p,defaultValue:G,onValueChange:X=()=>{}}=b,la=Af(b,["value","defaultValue","onValueChange"]),[pa=[],Ga]=Nj({prop:p,defaultProp:G,onChange:X}),Qa=ll.default.useCallback(eb=>Ga((mb=[])=>[...mb,eb]),[Ga]),Za=ll.default.useCallback(eb=>
Ga((mb=[])=>mb.filter(Lb=>Lb!==eb)),[Ga]);return ll.default.createElement(YB,{scope:b.__scopeToggleGroup,type:"multiple",value:pa,onItemActivate:Qa,onItemDeactivate:Za},ll.default.createElement($B,ff({},la,{ref:g})))}),[IJ,JJ]=WB("ToggleGroup"),$B=ll.default.forwardRef((b,g)=>{const {__scopeToggleGroup:p,disabled:G=!1,rovingFocus:X=!0,orientation:la,dir:pa,loop:Ga=!0}=b;var Qa=Af(b,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));b=XB(p);const Za=Ub(pa);Qa=pe({role:"group",
dir:Za},Qa);return ll.default.createElement(IJ,{scope:p,rovingFocus:X,disabled:G},X?ll.default.createElement(jA,ff({asChild:!0},b,{orientation:la,dir:Za,loop:Ga}),ll.default.createElement(kl.div,ff({},Qa,{ref:g}))):ll.default.createElement(kl.div,ff({},Qa,{ref:g})))}),KJ=ll.default.forwardRef((b,g)=>{var p=ZB("ToggleGroupItem",b.__scopeToggleGroup);const G=JJ("ToggleGroupItem",b.__scopeToggleGroup),X=XB(b.__scopeToggleGroup);p=p.value.includes(b.value);const la=G.disabled||b.disabled;b=lf(pe({},b),
{pressed:p,disabled:la});const pa=ll.default.useRef(null);return G.rovingFocus?ll.default.createElement(kA,ff({asChild:!0},X,{focusable:!la,active:p,ref:pa}),ll.default.createElement(aC,ff({},b,{ref:g}))):ll.default.createElement(aC,ff({},b,{ref:g}))}),aC=ll.default.forwardRef((b,g)=>{const {__scopeToggleGroup:p,value:G}=b,X=Af(b,["__scopeToggleGroup","value"]),la=ZB("ToggleGroupItem",p);b={role:"radio","aria-checked":b.pressed,"aria-pressed":void 0};return ll.default.createElement(VB,ff({},"single"===
la.type?b:void 0,X,{ref:g,onPressedChange:pa=>{if(pa)la.onItemActivate(G);else la.onItemDeactivate(G)}}))}),bC=FJ,cC=KJ;nb=W(588);nb=W(588);nb=W(588);var dC="LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),LJ=["YoutubeLink","TwitterLink","IFrameSource","Links"],Qn=new Map,$w={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],
tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing",
"Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"]},MJ=Object.entries($w).filter(([,b])=>b.includes("NoFill")&&b.includes("Swatch")).map(([b])=>b),NJ=ef(()=>{const b=bf(),g=Wa("AutoResizing"),p=g.every(G=>G.props.isAutoResizing);return(0,nb.jsx)(va,{tooltip:"Auto Resize",toggle:g.every(G=>"logseq-portal"===G.props.type),className:"tl-button",pressed:p,onPressedChange:G=>{g.forEach(X=>{if("logseq-portal"===X.props.type)X.update({isAutoResizing:G});else X.onResetBounds({zoom:b.viewport.camera.zoom})});
b.persist()},children:(0,nb.jsx)(Bh,{name:"dimensions"})})}),OJ=ef(()=>{const b=bf(),g=Wa("LogseqPortalViewMode"),p=g.every(G=>G.collapsed);return p||g.every(G=>!G.collapsed)?(0,nb.jsx)(va,{tooltip:p?"Expand":"Collapse",toggle:g.every(G=>"logseq-portal"===G.props.type),className:"tl-button",pressed:p,onPressedChange:()=>b.api.setCollapsed(!p),children:(0,nb.jsx)(Bh,{name:p?"object-expanded":"object-compact"})}):null}),PJ=ef(()=>{const {handlers:{isMobile:b}}=Dp.default.useContext(mn);var g=Wa("ScaleLevel");
g=1<(new Set(g.map(p=>p.scaleLevel))).size?"":g[0].scaleLevel;return(0,nb.jsx)(Kh,{scaleLevel:g,compact:b()})}),QJ=ef(()=>{const b=bf(),g=Wa("IFrameSource")[0],p=Dp.default.useCallback(X=>{g.onIFrameSourceChange(X.target.value.trim().toLowerCase());b.persist()},[]),G=Dp.default.useCallback(()=>{g.reload()},[]);return(0,nb.jsxs)("span",{className:"flex gap-3",children:[(0,nb.jsx)(ka,{tooltip:"Reload",type:"button",onClick:G,children:(0,nb.jsx)(Bh,{name:"refresh"})}),(0,nb.jsx)(Tu,{title:"Website Url",
className:"tl-iframe-src",value:`${g.props.url}`,onChange:p}),(0,nb.jsx)(ka,{tooltip:"Open website url",type:"button",onClick:()=>window.open(g.props.url),children:(0,nb.jsx)(Bh,{name:"external-link"})})]})}),RJ=ef(()=>{const b=bf(),g=Wa("YoutubeLink")[0],p=Dp.default.useCallback(G=>{g.onYoutubeLinkChange(G.target.value);b.persist()},[]);return(0,nb.jsxs)("span",{className:"flex gap-3",children:[(0,nb.jsx)(Tu,{title:"YouTube Link",className:"tl-youtube-link",value:`${g.props.url}`,onChange:p}),(0,nb.jsx)(ka,
{tooltip:"Open YouTube Link",type:"button",onClick:()=>{var G,X,la;return null==(la=null==(X=null==(G=window.logseq)?void 0:G.api)?void 0:X.open_external_link)?void 0:la.call(X,g.props.url)},children:(0,nb.jsx)(Bh,{name:"external-link"})})]})}),SJ=ef(()=>{const b=bf(),g=Wa("TwitterLink")[0],p=Dp.default.useCallback(G=>{g.onTwitterLinkChange(G.target.value);b.persist()},[]);return(0,nb.jsxs)("span",{className:"flex gap-3",children:[(0,nb.jsx)(Tu,{title:"Twitter Link",className:"tl-twitter-link",value:`${g.props.url}`,
onChange:p}),(0,nb.jsx)(ka,{tooltip:"Open Twitter Link",type:"button",onClick:()=>{var G,X,la;return null==(la=null==(X=null==(G=window.logseq)?void 0:G.api)?void 0:X.open_external_link)?void 0:la.call(X,g.props.url)},children:(0,nb.jsx)(Bh,{name:"external-link"})})]})}),TJ=ef(()=>{const b=bf(),g=Wa("NoFill"),p=Dp.default.useCallback(X=>{g.forEach(la=>la.update({noFill:X}));b.persist()},[]),G=g.every(X=>X.props.noFill);return(0,nb.jsx)(va,{tooltip:"Fill",className:"tl-button",pressed:G,onPressedChange:p,
children:(0,nb.jsx)(Bh,{name:G?"droplet-off":"droplet"})})}),UJ=ef(()=>{const b=bf(),g=Wa("Swatch"),p=Dp.default.useCallback(X=>{g.forEach(la=>{la.update({fill:X,stroke:X})});b.persist()},[]),G=Dp.default.useCallback(X=>{g.forEach(la=>{la.update({opacity:X})});b.persist()},[]);return(0,nb.jsx)(og,{popoverSide:"top",color:g[0].props.noFill?g[0].props.stroke:g[0].props.fill,opacity:g[0].props.opacity,setOpacity:G,setColor:p})}),VJ=ef(()=>{const b=bf(),g=Dp.default.useCallback(p=>{b.api.convertShapes(p.currentTarget.dataset.tool)},
[]);return(0,nb.jsx)(OA,{popoverSide:"top",chevron:!1,setGeometry:g})}),WJ=ef(()=>{const b=bf(),g=Wa("StrokeType"),p=g.every(G=>"dashed"===G.props.strokeType)?"dashed":g.every(G=>"line"===G.props.strokeType)?"line":"mixed";return(0,nb.jsx)(Fe,{title:"Stroke Type",options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:p,onValueChange:G=>{g.forEach(X=>{X.update({strokeType:G})});b.persist()}})}),XJ=ef(()=>{const b=bf(),g=Wa("ArrowMode");var p=
g.every(X=>{var la;return"arrow"===(null==(la=X.props.decorations)?void 0:la.start)});const G=g.every(X=>{var la;return"arrow"===(null==(la=X.props.decorations)?void 0:la.end)});p=[p?"start":null,G?"end":null].filter(ui);return(0,nb.jsx)(fa,{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:p,onValueChange:X=>{g.forEach(la=>{var pa=la.update;var Ga={start:X.includes("start")?"arrow":null,end:X.includes("end")?"arrow":null};pa.call(la,
{decorations:Ga})});b.persist()}})}),YJ=ef(()=>{const b=bf(),g=Wa("TextStyle"),p=g.every(X=>500<X.props.fontWeight),G=g.every(X=>X.props.italic);return(0,nb.jsxs)("span",{className:"flex gap-1",children:[(0,nb.jsx)(va,{tooltip:"Bold",className:"tl-button",pressed:p,onPressedChange:X=>{g.forEach(la=>{la.update({fontWeight:X?700:400});la.onResetBounds()});b.persist()},children:(0,nb.jsx)(Bh,{name:"bold"})}),(0,nb.jsx)(va,{tooltip:"Italic",className:"tl-button",pressed:G,onPressedChange:X=>{g.forEach(la=>
{la.update({italic:X});la.onResetBounds()});b.persist()},children:(0,nb.jsx)(Bh,{name:"italic"})})]})}),ZJ=ef(()=>{var b;const g=bf(),p=g.selectedShapesArray[0];return(0,nb.jsx)(DJ,{onRefsChange:G=>{p.update({refs:G});g.persist()},refs:null!=(b=p.props.refs)?b:[],shapeType:p.props.type,side:"right",pageId:"logseq-portal"===p.props.type?p.props.pageId:void 0,portalType:"logseq-portal"===p.props.type?p.props.blockType:void 0})});Qn.set("Geometry",VJ);Qn.set("AutoResizing",NJ);Qn.set("LogseqPortalViewMode",
OJ);Qn.set("ScaleLevel",PJ);Qn.set("YoutubeLink",RJ);Qn.set("TwitterLink",SJ);Qn.set("IFrameSource",QJ);Qn.set("NoFill",TJ);Qn.set("Swatch",UJ);Qn.set("StrokeType",WJ);Qn.set("ArrowMode",XJ);Qn.set("TextStyle",YJ);Qn.set("Links",ZJ);var eC=b=>{var g;return(null!=(g=$w[b])?g:[]).filter(ui)},$J=b=>{const g=b.map(G=>G.props.type),p=new Set(0<b.length?eC(g[0]):[]);for(let G=1;G<g.length&&0<p.size;G++){const X=eC(g[G]);p.forEach(la=>{X.includes(la)||p.delete(la)})}1<b.length&&LJ.forEach(G=>{p.has(G)&&
p.delete(G)});return Array.from(p).sort((G,X)=>dC.indexOf(G)-dC.indexOf(X)).map(G=>Qn.get(G))};nb=W(588);var aK=ef(({shapes:b,offsets:g,hidden:p})=>{const G=bf(),X=pt.useRef(null),la=pt.useRef(null);pt.useLayoutEffect(()=>{setTimeout(()=>{const Ga=la.current;if(Ga){var {offsetWidth:Qa,offsetHeight:Za}=Ga;X.current=[Qa,Za]}})});pt.useLayoutEffect(()=>{var Ga;const Qa=la.current;if(Qa){var Za=null!=(Ga=X.current)?Ga:[0,0];Ga=0;if(116>g.top){var eb=g.height/2+40;140>g.bottom&&(eb+=g.bottom-140)}else eb=
-(g.height/2+40);16>g.left+g.width/2-Za[0]/2?Ga+=-(g.left+g.width/2-Za[0]/2-16):16>g.right+g.width/2-Za[0]/2&&(Ga+=g.right+g.width/2-Za[0]/2-16);var [mb,Lb]=[Ga,eb];Qa.style.transform=`translateX(${mb}px) translateY(${Lb}px)`}},[g]);if(!G)return null;const pa=$J(b);return(0,nb.jsx)(vo,{centered:!0,children:0<pa.length&&(0,nb.jsx)("div",{ref:la,className:"tl-toolbar tl-context-bar",style:{visibility:p?"hidden":"visible",pointerEvents:p?"none":"all"},children:pa.map((Ga,Qa)=>(0,nb.jsxs)(pt.Fragment,
{children:[(0,nb.jsx)(Ga,{}),Qa<pa.length-1&&(0,nb.jsx)(kr,{className:"tl-toolbar-separator",orientation:"vertical"})]},Qa))})})}),ax=uf(W(22)),Ml=W(22),[bK]=Aj("ContextMenu",[Bu]),wt=Bu(),[cK,fC]=bK("ContextMenu"),dK=(0,Ml.forwardRef)((b,g)=>{const {__scopeContextMenu:p,disabled:G=!1}=b,X=Af(b,["__scopeContextMenu","disabled"]),la=fC("ContextMenuTrigger",p),pa=wt(p),Ga=(0,Ml.useRef)({x:0,y:0}),Qa=(0,Ml.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(pe({width:0,height:0},Ga.current))}),Za=(0,Ml.useRef)(0),
eb=(0,Ml.useCallback)(()=>window.clearTimeout(Za.current),[]);(0,Ml.useEffect)(()=>eb,[eb]);(0,Ml.useEffect)(()=>void(G&&eb()),[G,eb]);return(0,Ml.createElement)(Ml.Fragment,null,(0,Ml.createElement)(yA,ff({},pa,{virtualRef:Qa})),(0,Ml.createElement)(kl.span,ff({"data-state":la.open?"open":"closed","data-disabled":G?"":void 0},X,{ref:g,style:pe({WebkitTouchCallout:"none"},b.style),onContextMenu:G?b.onContextMenu:If(b.onContextMenu,mb=>{eb();Ga.current={x:mb.clientX,y:mb.clientY};la.onOpenChange(!0);
mb.preventDefault()}),onPointerDown:G?b.onPointerDown:If(b.onPointerDown,xb(mb=>{eb();Za.current=window.setTimeout(()=>{Ga.current={x:mb.clientX,y:mb.clientY};la.onOpenChange(!0)},700)})),onPointerMove:G?b.onPointerMove:If(b.onPointerMove,xb(eb)),onPointerCancel:G?b.onPointerCancel:If(b.onPointerCancel,xb(eb)),onPointerUp:G?b.onPointerUp:If(b.onPointerUp,xb(eb))})))}),eK=(0,Ml.forwardRef)((b,g)=>{var {__scopeContextMenu:p}=b;const G=Af(b,["__scopeContextMenu"]),X=fC("ContextMenuContent",p);p=wt(p);
const la=(0,Ml.useRef)(!1);return(0,Ml.createElement)(AA,ff({},p,G,{ref:g,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:pa=>{var Ga;null===(Ga=b.onCloseAutoFocus)||void 0===Ga||Ga.call(b,pa);!pa.defaultPrevented&&la.current&&pa.preventDefault();la.current=!1},onInteractOutside:pa=>{var Ga;null===(Ga=b.onInteractOutside)||void 0===Ga||Ga.call(b,pa);pa.defaultPrevented||X.modal||(la.current=!0)},style:lf(pe({},b.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
om=(0,Ml.forwardRef)((b,g)=>{var {__scopeContextMenu:p}=b;b=Af(b,["__scopeContextMenu"]);p=wt(p);return(0,Ml.createElement)(CA,ff({},p,b,{ref:g}))}),oq=(0,Ml.forwardRef)((b,g)=>{var {__scopeContextMenu:p}=b;b=Af(b,["__scopeContextMenu"]);p=wt(p);return(0,Ml.createElement)(AG,ff({},p,b,{ref:g}))}),fK=b=>{const {__scopeContextMenu:g,children:p,onOpenChange:G,dir:X,modal:la=!0}=b,[pa,Ga]=(0,Ml.useState)(!1);b=wt(g);const Qa=sf(G),Za=(0,Ml.useCallback)(eb=>{Ga(eb);Qa(eb)},[Qa]);return(0,Ml.createElement)(cK,
{scope:g,open:pa,onOpenChange:Za,modal:la},(0,Ml.createElement)(DA,ff({},b,{dir:X,open:pa,onOpenChange:Za,modal:la}),p))};nb=W(588);var gK=ef(function({children:b,collisionRef:g}){var p,G,X,la,pa,Ga,Qa,Za,eb,mb,Lb,Vb,Pb,ec,gc,Tb,nc;const oc=bf(),{handlers:Ec}=ax.useContext(mn),Sc=ax.useRef(null),vd=he=>{he();oc.transition("select")},Wd=ax.useMemo(()=>xh(),[]);return(0,nb.jsxs)(fK,{onOpenChange:he=>{he&&!oc.isIn("select.contextMenu")?oc.transition("select").selectedTool.transition("contextMenu"):!he&&
oc.isIn("select.contextMenu")&&oc.selectedTool.transition("idle")},children:[(0,nb.jsx)(dK,{disabled:oc.editingShape&&0!==Object.keys(oc.editingShape).length,children:b}),(0,nb.jsx)(eK,{className:"tl-menu tl-context-menu",ref:Sc,onEscapeKeyDown:()=>oc.transition("select"),collisionBoundary:g.current,asChild:!0,tabIndex:-1,children:(0,nb.jsxs)("div",{children:[1<(null==(p=oc.selectedShapes)?void 0:p.size)&&!oc.readOnly&&(null==(G=oc.selectedShapesArray)?void 0:G.some(he=>!he.props.isLocked))&&(0,nb.jsxs)(nb.Fragment,
{children:[(0,nb.jsxs)(om,{children:[(0,nb.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,nb.jsx)(ka,{tooltip:"Align left",onClick:()=>vd(()=>oc.align("left")),children:(0,nb.jsx)(Bh,{name:"layout-align-left"})}),(0,nb.jsx)(ka,{tooltip:"Align center horizontally",onClick:()=>vd(()=>oc.align("centerHorizontal")),children:(0,nb.jsx)(Bh,{name:"layout-align-center"})}),(0,nb.jsx)(ka,{tooltip:"Align right",onClick:()=>vd(()=>oc.align("right")),children:(0,nb.jsx)(Bh,{name:"layout-align-right"})}),
(0,nb.jsx)(kr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,nb.jsx)(ka,{tooltip:"Distribute horizontally",onClick:()=>vd(()=>oc.distribute("horizontal")),children:(0,nb.jsx)(Bh,{name:"layout-distribute-vertical"})})]}),(0,nb.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,nb.jsx)(ka,{tooltip:"Align top",onClick:()=>vd(()=>oc.align("top")),children:(0,nb.jsx)(Bh,{name:"layout-align-top"})}),(0,nb.jsx)(ka,{tooltip:"Align center vertically",onClick:()=>vd(()=>oc.align("centerVertical")),
children:(0,nb.jsx)(Bh,{name:"layout-align-middle"})}),(0,nb.jsx)(ka,{tooltip:"Align bottom",onClick:()=>vd(()=>oc.align("bottom")),children:(0,nb.jsx)(Bh,{name:"layout-align-bottom"})}),(0,nb.jsx)(kr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,nb.jsx)(ka,{tooltip:"Distribute vertically",onClick:()=>vd(()=>oc.distribute("vertical")),children:(0,nb.jsx)(Bh,{name:"layout-distribute-horizontal"})})]})]}),(0,nb.jsx)(oq,{className:"menu-separator"}),(0,nb.jsxs)(om,{className:"tl-menu-item",
onClick:()=>vd(oc.packIntoRectangle),children:[(0,nb.jsx)(Bh,{className:"tl-menu-icon",name:"layout-grid"}),"Pack into rectangle"]}),(0,nb.jsx)(oq,{className:"menu-separator"})]}),0<(null==(X=oc.selectedShapes)?void 0:X.size)&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.api.zoomToSelection),children:["Zoom to fit",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",
{children:""})," ",(0,nb.jsx)("code",{children:"2"})]})})]}),(0,nb.jsx)(oq,{className:"menu-separator"})]}),(oc.selectedShapesArray.some(he=>"group"===he.type||oc.getParentGroup(he))||1<oc.selectedShapesArray.length)&&(null==(la=oc.selectedShapesArray)?void 0:la.some(he=>!he.props.isLocked))&&!oc.readOnly&&(0,nb.jsxs)(nb.Fragment,{children:[oc.selectedShapesArray.some(he=>"group"===he.type||oc.getParentGroup(he))&&(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.api.unGroup),children:[(0,nb.jsx)(Bh,
{className:"tl-menu-icon",name:"ungroup"}),"Ungroup",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:""})," ",(0,nb.jsx)("code",{children:"G"})]})})]}),1<oc.selectedShapesArray.length&&(null==(pa=oc.selectedShapesArray)?void 0:pa.some(he=>!he.props.isLocked))&&(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.api.doGroup),children:[(0,nb.jsx)(Bh,{className:"tl-menu-icon",
name:"group"}),"Group",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"G"})]})})]}),(0,nb.jsx)(oq,{className:"menu-separator"})]}),0<(null==(Ga=oc.selectedShapes)?void 0:Ga.size)&&(null==(Qa=oc.selectedShapesArray)?void 0:Qa.some(he=>!he.props.isLocked))&&(0,nb.jsxs)(nb.Fragment,{children:[!oc.readOnly&&(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.cut),
children:[(0,nb.jsx)(Bh,{className:"tl-menu-icon",name:"cut"}),"Cut",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"X"})]})})]}),(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.copy),children:[(0,nb.jsx)(Bh,{className:"tl-menu-icon",name:"copy"}),"Copy",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",
children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"C"})]})})]})]}),!oc.readOnly&&(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.paste),children:[(0,nb.jsx)(Bh,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"V"})]})})]}),1===(null==(Za=oc.selectedShapes)?void 0:Za.size)&&!oc.readOnly&&
(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(()=>oc.paste(void 0,!0)),children:["Paste as link",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:""})," ",(0,nb.jsx)("code",{children:"V"})]})})]}),0<(null==(eb=oc.selectedShapes)?void 0:eb.size)&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)(oq,{className:"menu-separator"}),(0,nb.jsxs)(om,{className:"tl-menu-item",
onClick:()=>vd(()=>{var he,De;return Ec.exportToImage(oc.currentPageId,{x:oc.selectionBounds.minX+oc.viewport.camera.point[0]-8,y:oc.selectionBounds.minY+oc.viewport.camera.point[1]-8,width:(null==(he=oc.selectionBounds)?void 0:he.width)+16,height:(null==(De=oc.selectionBounds)?void 0:De.height)+16,zoom:oc.viewport.camera.zoom})}),children:[(0,nb.jsx)(Bh,{className:"tl-menu-icon",name:"file-export"}),"Export",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsx)("span",{className:"keyboard-shortcut"})})]})]}),
(0,nb.jsx)(oq,{className:"menu-separator"}),(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.api.selectAll),children:["Select all",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"A"})]})})]}),1<(null==(mb=oc.selectedShapes)?void 0:mb.size)&&(0,nb.jsx)(om,{className:"tl-menu-item",onClick:()=>vd(oc.api.deselectAll),children:"Deselect all"}),0<(null==(Lb=
oc.selectedShapes)?void 0:Lb.size)&&(null==(Vb=oc.selectedShapesArray)?void 0:Vb.some(he=>!he.props.isLocked))&&(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(()=>oc.setLocked(!0)),children:[(0,nb.jsx)(Bh,{className:"tl-menu-icon",name:"lock"}),"Lock",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"L"})]})})]}),0<(null==(Pb=oc.selectedShapes)?void 0:Pb.size)&&
(null==(ec=oc.selectedShapesArray)?void 0:ec.some(he=>he.props.isLocked))&&(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(()=>oc.setLocked(!1)),children:[(0,nb.jsx)(Bh,{className:"tl-menu-icon",name:"lock-open"}),"Unlock",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:""})," ",(0,nb.jsx)("code",{children:"L"})]})})]}),0<(null==(gc=oc.selectedShapes)?void 0:
gc.size)&&!oc.readOnly&&(null==(Tb=oc.selectedShapesArray)?void 0:Tb.some(he=>!he.props.isLocked))&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.api.deleteShapes),children:[(0,nb.jsx)(Bh,{className:"tl-menu-icon",name:"backspace"}),"Delete",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsx)("span",{className:"keyboard-shortcut",children:(0,nb.jsx)("code",{children:"Del"})})})]}),1<(null==(nc=oc.selectedShapes)?void 0:nc.size)&&!oc.readOnly&&
(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)(oq,{className:"menu-separator"}),(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.flipHorizontal),children:[(0,nb.jsx)(Bh,{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.flipVertical),children:[(0,nb.jsx)(Bh,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),!oc.readOnly&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)(oq,{className:"menu-separator"}),
(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.bringToFront),children:["Move to front",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:""})," ",(0,nb.jsx)("code",{children:"]"})]})})]}),(0,nb.jsxs)(om,{className:"tl-menu-item",onClick:()=>vd(oc.sendToBack),children:["Move to back",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",
children:[(0,nb.jsx)("code",{children:""})," ",(0,nb.jsx)("code",{children:"["})]})})]})]}),Wd&&(0,nb.jsx)(om,{className:"tl-menu-item",onClick:()=>{1===oc.selectedShapesArray.length?console.log(Fc(oc.selectedShapesArray[0].serialized)):console.log(oc.selectedShapesArray.map(he=>Fc(he.serialized)))},children:"(Dev) Print shape props"})]})]})})]})}),gC=uf(W(22));nb=W(588);var hK=ef(({shape:b})=>{const g=bf(),{handlers:p}=gC.default.useContext(mn),G=gC.default.useMemo(()=>{var X;const la=[...(null!=
(X=b.props.refs)?X:[])].map(pa=>[pa,!0]);"logseq-portal"===b.props.type&&b.props.pageId&&la.unshift([b.props.pageId,!1]);return la.filter(pa=>pa[0].toLowerCase()!==g.currentPage.name&&p.getBlockPageName(pa[0])!==g.currentPage.name)},[b.props.type,b.props.parentId,b.props.refs]);return 0===G.length?null:(0,nb.jsx)("div",{className:"tl-quick-links",title:"Shape Quick Links",children:G.map(([X,la])=>(0,nb.jsx)("div",{className:"tl-quick-links-row",children:(0,nb.jsx)(kB,{id:X,showReferenceContent:la})},
X))})}),iK=uf(W(22)),hC=uf(W(22)),jK=[".png",".svg",".jpg",".jpeg",".gif"],kK=[".mp4",".webm",".ogg"],lK=(b,g,p)=>ai(void 0,[b,g,p],function*(G,{point:X,shiftKey:la,dataTransfer:pa,fromDrop:Ga},Qa){function Za(ed,ld){return ai(this,null,function*(){const $d=Object.values(G.assets).find(Oe=>Oe.src===ed);return $d?$d:{id:gl(),type:ld?"video":"image",src:ed,size:yield Jj(Qa.makeAssetUrl(ed),ld)}})}function eb(ed){return ai(this,null,function*(){const ld=ed.filter($d=>"unknown"!==bc($d.name)).map($d=>
ai(this,null,function*(){try{const Oe=yield Qa.saveAsset($d);return yield Za(Oe,"video"===bc($d.name))}catch(Oe){console.error(Oe)}return null}));return(yield Promise.all(ld)).filter(ui)})}function mb(ed){return[lf(pe({},mq.defaultProps),{html:ed,point:[X[0],X[1]]})]}function Lb(ed){return ai(this,null,function*(){return xc(Pb,Tb,gc,nc,ec,Wd)(ed)})}function Vb(){return ai(this,null,function*(){const ed=yield navigator.clipboard.read(),ld=xc(nc,ec,Wd);return(yield Promise.all(ed.map($d=>ld($d)))).flat().filter(ui)})}
function Pb(ed){return ai(this,null,function*(){var ld=Array.from(ed.files);return 0<ld.length?(Ye=ld=yield eb(ld),ld.map(($d,Oe)=>{const mf=lf(pe({},"video"===$d.type?Su.defaultProps:Ru.defaultProps),{id:gl(),assetId:$d.id,opacity:1});$d.size&&Object.assign(mf,{point:[X[0]-$d.size[0]/4+16*Oe,X[1]-$d.size[1]/4+16*Oe],size:ne.div($d.size,2)});return mf})):null})}function ec(ed){return ai(this,null,function*(){if(ed.types.includes("text/plain")&&(la||Ga))return null;const ld=yield Wc(ed,"text/html");
return ld?xc(oc,mb)(ld):null})}function gc(ed){return ai(this,null,function*(){var ld,$d,Oe,mf,Sf,qf,Gf=ed.getData("block-uuid");if(Gf){Gf=Gf.trim();const hh=null==(Oe=null==($d=null==(ld=window.logseq)?void 0:ld.api)?void 0:$d.get_selected_blocks)?void 0:Oe.call($d);ld=hh&&1<(null==hh?void 0:hh.length)?hh.map(Ef=>Ef.uuid):[Gf];null==(qf=null==(Sf=null==(mf=window.logseq)?void 0:mf.api)?void 0:Sf.set_blocks_id)?void 0:qf.call(Sf,ld);mf=ld.map(Ef=>vd(`((${Ef}))`));return(yield Promise.all(mf)).flat().filter(ui).map((Ef,
kh)=>lf(pe({},Ef),{point:[X[0]+(Ll.defaultProps.size[0]+16)*kh,X[1]]}))}return null})}function Tb(ed){return ai(this,null,function*(){var ld=ed.getData("page-name");return ld?(ld=ld.trim(),vd(`[[${ld}]]`)):null})}function nc(ed){return ai(this,null,function*(){var ld=yield Wc(ed,"text/plain");return ld?(ld=ld.trim(),xc(Ec,Sc)(ld)):null})}function oc(ed){if(ed=G.api.getClonedShapesFromTldrString(decodeURIComponent(ed),X)){const {shapes:ld,assets:$d,bindings:Oe}=ed;jf.push(...$d);Ne.push(...Oe);return ld}return null}
function Ec(ed){return ai(this,null,function*(){try{const $d=new URL(ed);var ld=$d.host&&["http:","https:"].includes($d.protocol)}catch($d){ld=!1}return ld&&!la?HB.test(ed)?[lf(pe({},rr.defaultProps),{url:ed,point:[X[0],X[1]]})]:JB.test(ed)?[lf(pe({},ss.defaultProps),{url:ed,point:[X[0],X[1]]})]:[lf(pe({},pr.defaultProps),{url:ed,point:[X[0],X[1]]})]:null})}function Sc(ed){return ed.startsWith("\x3ciframe")?[lf(pe({},mq.defaultProps),{html:ed,point:[X[0],X[1]]})]:null}function vd(ed){return ai(this,
null,function*(){if(/^\(\(.*\)\)$/.test(ed)&&40===ed.length){var ld=ed.slice(2,-2);if(gk(ld))return[lf(pe({},Ll.defaultProps),{point:[X[0],X[1]],size:[400,0],pageId:ld,fill:G.settings.color,stroke:G.settings.color,scaleLevel:G.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(ed))return ld=ed.slice(2,-2),[lf(pe({},Ll.defaultProps),{point:[X[0],X[1]],size:[400,0],pageId:ld,fill:G.settings.color,stroke:G.settings.color,scaleLevel:G.settings.scaleLevel,blockType:"P"})];return null})}function Wd(ed){return ai(this,
null,function*(){var ld=yield Wc(ed,"text/plain");return ld&&(ld=ld.trim(),ld=null==Qa?void 0:Qa.addNewBlock(ld))?[lf(pe({},Ll.defaultProps),{size:[400,0],point:[X[0],X[1]],pageId:ld,fill:G.settings.color,stroke:G.settings.color,scaleLevel:G.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var he,De;let Ye=[],jf=[];const Ne=[];G.cursors.setCursor("progress");let Ae=[];try{pa?Ae.push(...(null!=(he=yield Lb(pa))?he:[])):Ae.push(...(null!=(De=yield Vb())?De:[]))}catch(ed){console.error(ed)}const Ad=
Ae.map(ed=>lf(pe({},ed),{parentId:G.currentPageId,isLocked:!1,id:gk(ed.id)?ed.id:gl()})),ad=null==pa?void 0:pa.types.every(ed=>"Files"===ed);G.wrapUpdate(()=>{var ed=[...Ye,...jf];0<ed.length&&G.createAssets(ed);0<Ad.length&&G.createShapes(Ad);G.currentPage.updateBindings(Object.fromEntries(Ne.map(ld=>[ld.id,ld])));if(1===G.selectedShapesArray.length&&1===Ad.length&&Ga){ed=G.selectedShapesArray[0];const ld=G.getShapeById(Ad[0].id);G.createNewLineBinding(ed,ld)}G.setSelectedShapes(Ad.map(ld=>ld.id));
G.selectedTool.transition("idle");G.cursors.setCursor("default");(Ga||ad)&&G.packIntoRectangle()})}),iC=uf(W(22)),mK=uf(W(22));nb=W(588);var nK=[Sw,Tw,MB,Uw,Vw,Ww,Xw,Yw,NB,RB,QB,vt],oK=b=>{const {renderers:g}=cs.useContext(mn);return(0,nb.jsx)(g.BacklinksCount,lf(pe({},b),{options:{"portal?":!1}}))},pK=()=>{const b=cs.useRef(null),g=bf(),p=cs.useMemo(()=>({ContextBar:aK,BacklinksCount:oK,QuickLinks:hK}),[]);return(0,nb.jsx)(gK,{collisionRef:b,children:(0,nb.jsx)("div",{ref:b,className:"logseq-tldraw logseq-tldraw-wrapper",
"data-tlapp":g.uuid,children:(0,nb.jsx)(dF,{components:p,children:(0,nb.jsx)($H,{})})})})},qK=b=>{var {onPersist:g,readOnly:p,model:G}=b;b=Af(b,["onPersist","readOnly","model"]);const X=Bd(),la=pd(),pa=Vd(),Ga=p?null:ze(),Qa=cs.useCallback((Za,eb)=>{null==g?void 0:g(Za,eb)},[G]);return(0,nb.jsx)(bF,lf(pe({Shapes:LB,Tools:nK,onDrop:X,onPaste:la,onCopy:pa,readOnly:p,onCanvasDBClick:Ga,onPersist:Qa,model:G},b),{children:(0,nb.jsx)(pK,{})}))},rK=function(b){var {renderers:g,handlers:p}=b;b=Af(b,["renderers",
"handlers"]);const G={renderers:cs.useMemo(()=>Object.fromEntries(Object.entries(g).map(([X,la])=>[X,cs.memo(la)])),[]),handlers:p};return(0,nb.jsx)(mn.Provider,{value:G,children:(0,nb.jsx)(qK,pe({},b))})}};
'use strict';var ajd=function(a){return a},bjd=function(a,b){return $APP.xh.j(function(c){var d=$APP.qf(c);c=$APP.G.j(d,$APP.rD);d=$APP.G.j(d,$APP.HG);return new $APP.m(null,2,[$APP.Al,$APP.u.C(c),$APP.BFb,$APP.My.j(d,new $APP.O(null,2,5,$APP.Q,[$APP.WE,$APP.BFb],null))],null)},$APP.Uf.j(function(c){return $APP.WE.C($APP.HG.C(c))},$APP.DH(a,b,new $APP.m(null,1,[$APP.zt,new $APP.O(null,2,5,$APP.Q,[$APP.rD,$APP.HG],null)],null))))},cjd=function(a){return $APP.Fq.G(a,$APP.F([$APP.Gq,!0]))},djd=function(a,
b,c,d){var e=$APP.JH(a);b=new $APP.m(null,2,[$APP.XE,$APP.Lib,$APP.ZE,new $APP.m(null,6,[$APP.Al,$APP.wa(b,"id"),$APP.W,$APP.wa(b,"name"),$APP.HI,cjd($APP.wa(b,"bindings")),$APP.BFb,$APP.wa(b,"nonce"),$APP.CFb,cjd(c),$APP.yFb,d],null)],null);c=$APP.fx();e=$APP.hI.C(e);e=$APP.n(e)?e:$APP.fx();return new $APP.m(null,5,[$APP.yr,a,$APP.jH,"whiteboard",$APP.HG,b,$APP.iI,c,$APP.hI,e],null)},ejd=function(a,b,c,d,e,f){a=cjd(a.getCleanUpAssets());var g=$APP.xh.j(function(z){return $APP.wa(z,"id")},b.shapes),
h=$APP.dh($APP.xh.j(function(z){z=$APP.qf(z);z=$APP.G.j(z,$APP.Al);return $APP.S.F(cjd(b.getShapeById(z).serialized),$APP.by,g.indexOf(z))},$APP.LA.j(c,d)));d=$APP.dh($APP.xh.j($APP.Al,d));var l=$APP.dh($APP.xh.j($APP.Al,c)),p=$APP.dh($APP.Lm.j($APP.Vj,$APP.LA.j(l,d)));c=$APP.dh($APP.Uf.j(function(z){z=$APP.Al.C(z);return p.C?p.C(z):p.call(null,z)},h));var q=$APP.Lm.j($APP.Vj,$APP.LA.j(d,l)),r=$APP.lC();d=$APP.x(q)?$APP.xh.j(function(z){return $APP.My.j(z,new $APP.O(null,2,5,$APP.Q,[$APP.HG,$APP.WE],
null))},function(){var z=new $APP.O(null,1,5,$APP.Q,[$APP.wz],null),E=$APP.tj.j(function(H){return new $APP.O(null,2,5,$APP.Q,[$APP.rD,$APP.$h(H)],null)},q);return $APP.KF?$APP.KF(r,z,E):$APP.LF.call(null,r,z,E)}()):null;l=$APP.tj.j(function(z){return new $APP.O(null,2,5,$APP.Q,[$APP.gLa,new $APP.O(null,2,5,$APP.Q,[$APP.rD,$APP.$h(z)],null)],null)},q);var t=$APP.LA.j(h,c),y=$APP.x(t)?function(){var z=new $APP.O(null,1,5,$APP.Q,[$APP.wz],null),E=$APP.tj.j(function(H){return new $APP.O(null,2,5,$APP.Q,
[$APP.rD,$APP.$h($APP.Al.C(H))],null)},t);return $APP.KF?$APP.KF(r,z,E):$APP.LF.call(null,r,z,E)}():null;return new $APP.m(null,4,[$APP.Gqc,djd(e,b,a,g),$APP.CFc,$APP.xh.j(function(z){return $APP.Zd(p,$APP.u.C($APP.rD.C(z)))?$APP.S.F(z,$APP.iI,$APP.fx()):$APP.ktb(z)},$APP.xh.j(function(z){z=new $APP.m(null,2,[$APP.XE,$APP.NN,$APP.WE,z],null);z=new $APP.m(null,3,[$APP.FF,new $APP.m(null,1,[$APP.yr,$APP.xr.C?$APP.xr.C(e):$APP.xr.call(null,e)],null),$APP.UF,new $APP.m(null,1,[$APP.yr,e],null),$APP.HG,
z],null);var E=$APP.Rib(z,e);return $APP.Vl.G($APP.F([z,E]))},h)),$APP.jG,l,$APP.iWb,new $APP.m(null,3,[$APP.Ysb,$APP.Hb(f),$APP.Asb,f,$APP.ow,new $APP.m(null,5,[$APP.PN,e,$APP.SFb,d,$APP.TFb,c,$APP.UFb,t,$APP.VFb,y],null)],null)],null)},fjd=function(a,b,c){var d=$APP.cd($APP.A(b.pages)),e=d.shapes,f=$APP.xh.j(function(p){return $APP.wa(p,"id")},e);e=$APP.dh($APP.xh.j(function(p){var q=p.id;return new $APP.m(null,2,[$APP.Al,q,$APP.BFb,$APP.B.j(p.id,f.indexOf(q))?p.nonce:(new Date).getTime()],null)},
e));var g=$APP.lC(),h=function(){var p=$APP.My.j($APP.v($APP.o5c),new $APP.O(null,2,5,$APP.Q,[g,a],null));return $APP.n(p)?p:$APP.dh($APP.xh.j(function(q){return $APP.Ir.F(q,$APP.Al,$APP.u)},bjd(g,a)))}();b=ejd(b,d,e,h,a,c);h=$APP.qf(b);d=$APP.G.j(h,$APP.Gqc);b=$APP.G.j(h,$APP.CFc);c=$APP.G.j(h,$APP.jG);h=$APP.G.j(h,$APP.iWb);d=$APP.Yk.G(c,new $APP.O(null,1,5,$APP.Q,[d],null),$APP.F([b]));var l=$APP.My.j(h,new $APP.O(null,2,5,$APP.Q,[$APP.ow,$APP.TFb],null));l=$APP.n($APP.Bf(function(p){return $APP.B.j("group",
$APP.Om.C(p))},l))?$APP.S.F(h,$APP.WFb,$APP.ew):$APP.n($APP.Bf(function(p){return $APP.B.j("group",$APP.Om.C(p))},$APP.My.j(h,new $APP.O(null,2,5,$APP.Q,[$APP.ow,$APP.SFb],null))))?$APP.S.F(h,$APP.WFb,$APP.Jrc):$APP.n($APP.Bf(function(p){return $APP.B.j("line",$APP.Om.C(p))&&$APP.B.j("arrow ",$APP.Uo.C($APP.Fpc.C(p)))},l))?$APP.S.F(h,$APP.WFb,$APP.TBc):h;b=$APP.x($APP.Yk.j(b,c))?l:$APP.S.F(h,$APP.aYa,!0);$APP.Mh.R($APP.o5c,$APP.Ev,new $APP.O(null,2,5,$APP.Q,[g,a],null),e);if($APP.Zd(new $APP.$g(null,
new $APP.m(null,1,[$APP.TBc,null],null),null),$APP.WFb.C(b)))return $APP.oC($APP.TRc,new $APP.m(null,2,[$APP.Ty,d,$APP.iWb,b],null));e=$APP.TRc.C($APP.v($APP.mC));$APP.Yk.j($APP.Ty.C(e),d);$APP.Vl.G($APP.F([b,$APP.iWb.C(e)]));$APP.oC($APP.TRc,$APP.pf);return null},gjd=function(a){a=$APP.CH(a);return $APP.Lm.j($APP.Jib,a)},hjd=function(a){var b=$APP.Uy.C($APP.JH(a));a=gjd(a);a=$APP.Uf.j(function(d){return $APP.B.j(b,$APP.Uy.C($APP.UF.C(d)))},a);var c=$APP.dh($APP.Lm.j($APP.Eb,$APP.xh.j(function(d){return $APP.My.F(d,
new $APP.O(null,2,5,$APP.Q,[$APP.VF,$APP.Uy],null),null)},a)));a=$APP.Lm.j(function(d){d=$APP.Uy.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},ijd=function(){return $APP.km(null,function(){return $APP.km(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.km(a.text(),function(b){return $APP.km($APP.Fr($APP.pf,b),function(c){return $APP.em(c)})})})})},jjd=function(a){var b=$APP.G0a();return($APP.rd(b)||$APP.B.j(1,$APP.Wc(b))&&$APP.B.j(a,$APP.yr.C($APP.A(b))))&&
$APP.Hb($APP.My.j($APP.v($APP.mC),new $APP.O(null,1,5,$APP.Q,[$APP.Gcc],null)))},kjd=function(a){return null!=a?$APP.nm($APP.km(null,function(){return $APP.km(ijd(),function(b){var c=$APP.qf(b);b=$APP.G.j(c,$APP.fI);c=$APP.G.j(c,$APP.cx);var d=$APP.A(b);b=$APP.zFb(d,c);d=$APP.Iib(d);c=$APP.CFb.C(d);d=$APP.HI.C(d);a.cloneShapesIntoCurrentPage($APP.Ji(new $APP.m(null,3,[$APP.KFb,b,$APP.CFb,c,$APP.HI,d],null)));$APP.oC($APP.Gcc,!0);b=$APP.UB($APP.fhc,!0);return $APP.em(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",
b)}):null},njd=function(a,b){b=$APP.Fq.G(b,$APP.F([new $APP.m(null,1,[$APP.Gq,!0],null)]));b=$APP.qf(b);var c=$APP.G.j(b,ljd),d=$APP.G.j(b,$APP.wK),e=$APP.G.j(b,mjd),f=$APP.lC();return $APP.km(null,function(){return $APP.km($APP.n(d)?$APP.kdb(f,a,new $APP.m(null,1,[$APP.Dx,100],null)):null,function(g){return $APP.km($APP.n(c)?$APP.pdb(a,10):null,function(h){return $APP.km($APP.n(e)?$APP.qdb(a,100):null,function(l){return $APP.em($APP.Ji(new $APP.m(null,3,[$APP.fI,h,$APP.cx,g,$APP.gL,l],null)))})})})})},
ojd=function(a){return $APP.jm($APP.Nzb($APP.lC(),new $APP.O(null,1,5,$APP.Q,[$APP.Fq.C(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.D.F(c,0,null),$APP.D.F(c,1,null),c=$APP.D.F(c,2,null),$APP.Pzb($APP.n(c)?c:b)):null})},pjd=function(){return $APP.yCb(null)},qjd=function(){return $APP.BCb(null)},Fjd=function(a){return $APP.Ng([rjd,sjd,tjd,ujd,vjd,wjd,$APP.RD,xjd,yjd,zjd,Ajd,Bjd,Cjd,Djd,Ejd],[function(b){return $APP.yr.C($APP.XZa($APP.lC(),$APP.Ci(b)))},function(b){return $APP.KH(b,
!1)},function(b){return $APP.DFb(b)},$APP.zx,function(b){return $APP.Oyb(b,new $APP.m(null,1,[$APP.mT,!1],null))},$APP.dI,njd,ojd,ajd,function(b,c){return $APP.$w(b,$APP.F([$APP.bx,c]))},function(b){var c=$APP.u,d=c.C,e=$APP.rB(),f=$APP.JH(a),g=hjd(a);b=new $APP.m(null,6,[$APP.VF,$APP.Xg($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.Q,[$APP.Uy],null)),$APP.rD,e,$APP.oD,$APP.n(b)?b:"",$APP.nG,$APP.zr,$APP.FF,new $APP.m(null,2,[$APP.yr,$APP.xr.C?$APP.xr.C(a):$APP.xr.call(null,a),$APP.jx,a],null),$APP.UF,new $APP.m(null,
1,[$APP.yr,a],null)],null);$APP.MF(new $APP.O(null,1,5,$APP.Q,[b],null));return d.call(c,e)},function(b,c){return $APP.LD(function(){return(0,$APP.kRb)(b,$APP.Vl.G($APP.F([$APP.Fq.G(c,$APP.F([$APP.Gq,!0])),new $APP.m(null,1,[$APP.nT,!0],null)])))})},function(b,c){return $APP.mD($APP.lC(),$APP.Uy.C($APP.JH(b)),$APP.yh.C(c))},function(b){var c=$APP.Hw(b)?$APP.yr.C($APP.XZa($APP.lC(),$APP.Ci(b))):null;c=$APP.n(c)?c:b;var d=$APP.EH(c),e=$APP.dI(c);return $APP.n(d)?$APP.n(e)?$APP.oN(c,new $APP.m(null,
1,[$APP.nN,b],null)):$APP.lN($APP.KH(b,!1)):null},function(b){return $APP.Ji($APP.ZG($APP.Ci(b)))}])},Ejd=new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),Bjd=new $APP.N(null,"exportToImage","exportToImage",-154356643),Ajd=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),mjd=new $APP.N(null,"files?","files?",-1267491104),rjd=new $APP.N(null,"getBlockPageName","getBlockPageName",-1656908032),Gjd=new $APP.N(null,"renderers","renderers",-1460292282),Hjd=new $APP.N(null,"model",
"model",331153215),sjd=new $APP.N(null,"getRedirectPageName","getRedirectPageName",-1858136925),ujd=new $APP.N(null,"isMobile","isMobile",-2043133877),Ijd=new $APP.N(null,"onMount","onMount",-876858467),vjd=new $APP.N(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),yjd=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),Jjd=new $APP.N(null,"onPersist","onPersist",-1848738852),Kjd=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),zjd=new $APP.N(null,"copyToClipboard","copyToClipboard",
1092115063),Djd=new $APP.N(null,"redirectToPage","redirectToPage",87147838),tjd=new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",554297706),xjd=new $APP.N(null,"saveAsset","saveAsset",-668047853),Ljd=new $APP.N(null,"BacklinksCount","BacklinksCount",364670631),Mjd=new $APP.N(null,"Block","Block",-1959785792),Cjd=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),Njd=new $APP.N(null,"Page","Page",-1267059506),ljd=new $APP.N(null,"pages?","pages?",-2065014049),Ojd=new $APP.N(null,
"PageName","PageName",-164991013),Pjd=new $APP.N(null,"Tweet","Tweet",-452258680),wjd=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579),Qjd=new $APP.N(null,"BlockReference","BlockReference",-120254741);$APP.bda("tldraw");var Rjd=$APP.tm(592);var Sjd,Tjd;$APP.$$c={};Sjd=$APP.JT($APP.wa(Rjd,"App"));$APP.cad=$APP.wa(Rjd,"generateJSXFromModel");
Tjd=new $APP.m(null,7,[Njd,$APP.$r($APP.ds,function(a){return(0,$APP.j$c)(new $APP.m(null,2,[$APP.PN,$APP.KH($APP.wa(a,"pageName"),!1),$APP.nT,!0],null))},null,"frontend.extensions.tldraw/page-cp"),Mjd,$APP.$r($APP.ds,function(a){a=$APP.$h($APP.wa(a,"blockId"));var b=$APP.HTa($APP.u7b);a=b.C?b.C(a):b.call(null,a);return $APP.Nr(a)},null,"frontend.extensions.tldraw/block-cp"),Kjd,$APP.$r($APP.ds,function(a){return $APP.Nr($APP.zW(new $APP.m(null,1,[$APP.a_,!0],null),$APP.lC(),$APP.$h($APP.wa(a,"blockId")),
new $APP.m(null,2,[$APP.hYb,$APP.wa(a,"endSeparator"),$APP.iYb,$APP.wa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),Pjd,$APP.$r($APP.ds,function(a){return(0,$APP.VWb)($APP.wa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),Ojd,$APP.$r($APP.ds,function(a){return(0,$APP.nW)(new $APP.m(null,1,[$APP.a_,!0],null),new $APP.m(null,1,[$APP.yr,$APP.wa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),Ljd,function(a){return $APP.Ef.j($APP.fad,$APP.xh.j(function(b){return $APP.Fq.G($APP.wa(a,
b),$APP.F([new $APP.m(null,1,[$APP.Gq,!0],null)]))},new $APP.O(null,3,5,$APP.Q,["id","className","options"],null)))},Qjd,$APP.$r($APP.ds,function(a){return(0,$APP.eWb)($APP.pf,$APP.wa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference")],null);
$APP.aad=$APP.$r($APP.ds,function(a,b){function c(l){if($APP.n(l)){l.appUndo=pjd;l.appRedo=qjd;var p=$APP.wa(l,"api");return $APP.n(p)?$APP.jm(d?kjd(p):null,function(){$APP.BUa(l,b);return h.C?h.C(l):h.call(null,l)}):null}return null}var d=jjd(a),e=$APP.LFb(a),f=$APP.ns(null),g=$APP.D.F(f,0,null),h=$APP.D.F(f,1,null);$APP.os(function(){$APP.n($APP.n(g)?b:g)&&$APP.BUa(g,b);return function(){return $APP.Ec}},new $APP.O(null,2,5,$APP.Q,[b,g],null));return $APP.n(e)?$APP.X("div",{style:{overscrollBehavior:"none"},
onBlur:function(l){l=$APP.wa(l,"target").tagName;var p=new $APP.$g(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.qD():null},onWheel:$APP.Uw,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.Hb(g)?$APP.X("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.Nr($APP.TT("Loading onboarding whiteboard ..."))]):null,$APP.Nr(function(){var l=new $APP.m(null,6,[Gjd,Tjd,$APP.LB,
Fjd(a),Ijd,c,$APP.WGc,!0,Jjd,function(p,q){$APP.oC(new $APP.O(null,2,5,$APP.Q,[$APP.VIc,$APP.lC()],null),$APP.fx());return $APP.n(!1)?(console.time("tldraw persist"),p=fjd(a,p,q.replace),console.timeEnd("tldraw persist"),p):fjd(a,p,q.replace)},Hjd,e],null);return Sjd.C?Sjd.C(l):Sjd.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Za.Xi();
}).call(this);